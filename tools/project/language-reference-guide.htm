
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="assets/styles/pdf.css" rel="stylesheet"/>
<link href="assets/styles/admonitions.css" rel="stylesheet"/>
<link href="assets/styles/codeblocks.css" rel="stylesheet"/>
<link href="assets/styles/toc.css" rel="stylesheet"/>
<link href="assets/styles/sections.css" rel="stylesheet"/>
<title>Language Reference Guide</title>
</head>
<body>
<div id="title">Language Reference Guide</div> <!-- This is the running element for the page header; see pdf.css -->
<section>
<article id="contents">
<h2 class="contents">Contents</h2>
<ul>
<li class="front-matter"><a class="toc" href="#primitive-functions-key-to-notation-header"></a></li>
<li class="toc-chapter"><a class="toc" href="#primitive-functions-header"></a><ul class="first-level">
<li><a class="toc" href="#primitive-functions-scalar-functions-header"></a></li>
<li><a class="toc" href="#primitive-functions-mixed-functions-header"></a></li>
<li><a class="toc" href="#primitive-functions-notes-header"></a></li>
<li><a class="toc" href="#primitive-functions-functions-a-z--header"></a><ul>
<li><a class="toc" href="#primitive-functions-functions-a-z-header"></a></li>
<li><a class="toc" href="#primitive-functions-abort-header"></a></li>
<li><a class="toc" href="#primitive-functions-add-header"></a></li>
<li><a class="toc" href="#primitive-functions-and-lowest-common-multiple-header"></a></li>
<li><a class="toc" href="#primitive-functions-assignment-header"></a></li>
<li><a class="toc" href="#primitive-functions-assignment-indexed-header"></a></li>
<li><a class="toc" href="#primitive-functions-assignment-selective-header"></a></li>
<li><a class="toc" href="#primitive-functions-binomial-header"></a></li>
<li><a class="toc" href="#primitive-functions-branch-header"></a></li>
<li><a class="toc" href="#primitive-functions-catenate-laminate-header"></a></li>
<li><a class="toc" href="#primitive-functions-catenate-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-ceiling-header"></a></li>
<li><a class="toc" href="#primitive-functions-circular-header"></a></li>
<li><a class="toc" href="#primitive-functions-conjugate-header"></a></li>
<li><a class="toc" href="#primitive-functions-deal-header"></a></li>
<li><a class="toc" href="#primitive-functions-decode-header"></a></li>
<li><a class="toc" href="#primitive-functions-depth-header"></a></li>
<li><a class="toc" href="#primitive-functions-direction-header"></a></li>
<li><a class="toc" href="#primitive-functions-disclose-header"></a></li>
<li><a class="toc" href="#primitive-functions-divide-header"></a></li>
<li><a class="toc" href="#primitive-functions-drop-header"></a></li>
<li><a class="toc" href="#primitive-functions-drop-with-axes-header"></a></li>
<li><a class="toc" href="#primitive-functions-enclose-header"></a></li>
<li><a class="toc" href="#primitive-functions-enclose-with-axes-header"></a></li>
<li><a class="toc" href="#primitive-functions-encode-header"></a></li>
<li><a class="toc" href="#primitive-functions-enlist-header"></a></li>
<li><a class="toc" href="#primitive-functions-equal-header"></a></li>
<li><a class="toc" href="#primitive-functions-excluding-header"></a></li>
<li><a class="toc" href="#primitive-functions-execute-header"></a></li>
<li><a class="toc" href="#primitive-functions-expand-header"></a></li>
<li><a class="toc" href="#primitive-functions-expand-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-exponential-header"></a></li>
<li><a class="toc" href="#primitive-functions-factorial-header"></a></li>
<li><a class="toc" href="#primitive-functions-find-header"></a></li>
<li><a class="toc" href="#primitive-functions-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-floor-header"></a></li>
<li><a class="toc" href="#primitive-functions-format-monadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-format-dyadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-grade-down-monadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-grade-down-dyadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-grade-up-monadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-grade-up-dyadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-greater-header"></a></li>
<li><a class="toc" href="#primitive-functions-greater-or-equal-header"></a></li>
<li><a class="toc" href="#primitive-functions-index-header"></a></li>
<li><a class="toc" href="#primitive-functions-index-with-axes-header"></a></li>
<li><a class="toc" href="#primitive-functions-index-generator-header"></a></li>
<li><a class="toc" href="#primitive-functions-index-of-header"></a></li>
<li><a class="toc" href="#primitive-functions-indexing-header"></a></li>
<li><a class="toc" href="#primitive-functions-intersection-header"></a></li>
<li><a class="toc" href="#primitive-functions-interval-index-header"></a></li>
<li><a class="toc" href="#primitive-functions-left-header"></a></li>
<li><a class="toc" href="#primitive-functions-less-header"></a></li>
<li><a class="toc" href="#primitive-functions-less-or-equal-header"></a></li>
<li><a class="toc" href="#primitive-functions-logarithm-header"></a></li>
<li><a class="toc" href="#primitive-functions-magnitude-header"></a></li>
<li><a class="toc" href="#primitive-functions-match-header"></a></li>
<li><a class="toc" href="#primitive-functions-materialise-header"></a></li>
<li><a class="toc" href="#primitive-functions-matrix-divide-header"></a></li>
<li><a class="toc" href="#primitive-functions-matrix-inverse-header"></a></li>
<li><a class="toc" href="#primitive-functions-maximum-header"></a></li>
<li><a class="toc" href="#primitive-functions-membership-header"></a></li>
<li><a class="toc" href="#primitive-functions-minimum-header"></a></li>
<li><a class="toc" href="#primitive-functions-minus-header"></a></li>
<li><a class="toc" href="#primitive-functions-mix-header"></a></li>
<li><a class="toc" href="#primitive-functions-multiply-header"></a></li>
<li><a class="toc" href="#primitive-functions-nand-header"></a></li>
<li><a class="toc" href="#primitive-functions-natural-logarithm-header"></a></li>
<li><a class="toc" href="#primitive-functions-negative-header"></a></li>
<li><a class="toc" href="#primitive-functions-nest-header"></a></li>
<li><a class="toc" href="#primitive-functions-nor-header"></a></li>
<li><a class="toc" href="#primitive-functions-not-header"></a></li>
<li><a class="toc" href="#primitive-functions-not-equal-header"></a></li>
<li><a class="toc" href="#primitive-functions-not-match-header"></a></li>
<li><a class="toc" href="#primitive-functions-or-greatest-common-divisor-header"></a></li>
<li><a class="toc" href="#primitive-functions-partition-header"></a></li>
<li><a class="toc" href="#primitive-functions-partitioned-enclose-header"></a></li>
<li><a class="toc" href="#primitive-functions-pi-times-header"></a></li>
<li><a class="toc" href="#primitive-functions-pick-header"></a></li>
<li><a class="toc" href="#primitive-functions-plus-header"></a></li>
<li><a class="toc" href="#primitive-functions-power-header"></a></li>
<li><a class="toc" href="#primitive-functions-ravel-header"></a></li>
<li><a class="toc" href="#primitive-functions-ravel-with-axes-header"></a></li>
<li><a class="toc" href="#primitive-functions-reciprocal-header"></a></li>
<li><a class="toc" href="#primitive-functions-replicate-header"></a></li>
<li><a class="toc" href="#primitive-functions-replicate-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-reshape-header"></a></li>
<li><a class="toc" href="#primitive-functions-residue-header"></a></li>
<li><a class="toc" href="#primitive-functions-reverse-header"></a></li>
<li><a class="toc" href="#primitive-functions-reverse-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-right-header"></a></li>
<li><a class="toc" href="#primitive-functions-roll-header"></a></li>
<li><a class="toc" href="#primitive-functions-rotate-header"></a></li>
<li><a class="toc" href="#primitive-functions-rotate-first-header"></a></li>
<li><a class="toc" href="#primitive-functions-same-header"></a></li>
<li><a class="toc" href="#primitive-functions-shape-header"></a></li>
<li><a class="toc" href="#primitive-functions-split-header"></a></li>
<li><a class="toc" href="#primitive-functions-subtract-header"></a></li>
<li><a class="toc" href="#primitive-functions-table-header"></a></li>
<li><a class="toc" href="#primitive-functions-take-header"></a></li>
<li><a class="toc" href="#primitive-functions-take-with-axes-header"></a></li>
<li><a class="toc" href="#primitive-functions-tally-header"></a></li>
<li><a class="toc" href="#primitive-functions-times-header"></a></li>
<li><a class="toc" href="#primitive-functions-transpose-monadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-transpose-dyadic-header"></a></li>
<li><a class="toc" href="#primitive-functions-type-header"></a></li>
<li><a class="toc" href="#primitive-functions-union-header"></a></li>
<li><a class="toc" href="#primitive-functions-unique-header"></a></li>
<li><a class="toc" href="#primitive-functions-unique-mask-header"></a></li>
<li><a class="toc" href="#primitive-functions-where-header"></a></li>
<li><a class="toc" href="#primitive-functions-without-header"></a></li>
<li><a class="toc" href="#primitive-functions-zilde-header"></a></li>
</ul></li>
</ul></li>
<li class="toc-chapter"><a class="toc" href="#primitive-operators-header"></a><ul class="first-level">
<li><a class="toc" href="#primitive-operators-operator-syntax-header"></a></li>
<li><a class="toc" href="#primitive-operators-operators-summarised-header"></a></li>
<li><a class="toc" href="#primitive-operators-operators-a-z-header"></a></li>
<li><a class="toc" href="#primitive-operators-primitive-operators-a-z--header"></a><ul>
<li><a class="toc" href="#primitive-operators-assignment-modified-header"></a></li>
<li><a class="toc" href="#primitive-operators-assignment-indexed-modified-header"></a></li>
<li><a class="toc" href="#primitive-operators-assignment-selective-modified-header"></a></li>
<li><a class="toc" href="#primitive-operators-at-header"></a></li>
<li><a class="toc" href="#primitive-operators-atop-header"></a></li>
<li><a class="toc" href="#primitive-operators-axis-with-monadic-operand-header"></a></li>
<li><a class="toc" href="#primitive-operators-axis-with-dyadic-operand-header"></a></li>
<li><a class="toc" href="#primitive-operators-beside-header"></a></li>
<li><a class="toc" href="#primitive-operators-bind-header"></a></li>
<li><a class="toc" href="#primitive-operators-commute-header"></a></li>
<li><a class="toc" href="#primitive-operators-constant-header"></a></li>
<li><a class="toc" href="#primitive-operators-each-with-monadic-operand-header"></a></li>
<li><a class="toc" href="#primitive-operators-each-with-dyadic-operand-header"></a></li>
<li><a class="toc" href="#primitive-operators-i-beam-short-header"></a></li>
<li><a class="toc" href="#primitive-operators-inner-product-header"></a></li>
<li><a class="toc" href="#primitive-operators-key-header"></a></li>
<li><a class="toc" href="#primitive-operators-outer-product-header"></a></li>
<li><a class="toc" href="#primitive-operators-over-header"></a></li>
<li><a class="toc" href="#primitive-operators-power-operator-header"></a></li>
<li><a class="toc" href="#primitive-operators-rank-header"></a></li>
<li><a class="toc" href="#primitive-operators-reduce-header"></a></li>
<li><a class="toc" href="#primitive-operators-reduce-first-header"></a></li>
<li><a class="toc" href="#primitive-operators-reduce-n-wise-header"></a></li>
<li><a class="toc" href="#primitive-operators-reduce-first-n-wise-header"></a></li>
<li><a class="toc" href="#primitive-operators-scan-header"></a></li>
<li><a class="toc" href="#primitive-operators-scan-first-header"></a></li>
<li><a class="toc" href="#primitive-operators-spawn-header"></a></li>
<li><a class="toc" href="#primitive-operators-stencil-header"></a></li>
<li><a class="toc" href="#primitive-operators-variant-header"></a></li>
</ul></li>
</ul></li>
<li class="toc-chapter"><a class="toc" href="#i-beam-operator-header"></a><ul class="first-level">
<li><a class="toc" href="#primitive-operators-i-beam-header"></a></li>
<li><a class="toc" href="#i-beam-operator-the-i-beam-operator-header"></a><ul>
<li><a class="toc" href="#the-i-beam-operator-inverted-table-index-of-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-execute-expression-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-overwrite-free-pockets-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-canonical-representation-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-unsqueezed-type-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-syntax-colouring-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-syntax-colour-tokens-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-compress-vector-of-short-integers-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-serialise-array-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-compiler-control-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-trap-control-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-case-convert-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-called-monadically-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-temporary-directory-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-loaded-libraries-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-set-shell-script-debug-options-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-number-of-threads-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-parallel-execution-threshold-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-update-function-timestamp-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-format-datetime-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-set-aplcore-parameters-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-hash-array-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-memory-manager-statistics-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-specify-workspace-available-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-disable-global-triggers-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-update-datatable-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-read-datatable-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-remove-data-binding-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-create-data-binding-source-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-create-net-delegate-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-identify-net-type-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-flush-session-caption-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-close-all-windows-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-set-dyalog-pixel-type-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-override-com-default-value-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-export-to-memory-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-close-net-appdomain-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-verify-net-interface-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-set-workspace-save-options-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-expose-root-properties-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-discard-thread-on-exit-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-discard-parked-threads-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-mark-thread-as-uninterruptible-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-use-separate-thread-for-net-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-continue-autosave-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-disable-component-checksum-validation-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-enable-compression-of-large-components-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-send-text-to-ride-embedded-browser-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-connected-to-the-ride-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-manage-ride-connections-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-fork-new-task-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-change-user-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-reap-forked-tasks-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-signal-counts-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-discard-source-information-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-discard-source-code-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-list-loaded-files-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-list-loaded-file-objects-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-remove-loaded-file-object-info-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-loaded-file-object-info-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-json-translate-name-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-singular-value-decomposition-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-externalise-array-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-hash-table-size-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-lookup-table-size-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-sample-probability-distribution-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-line-count-header"></a></li>
<li><a class="toc" href="#the-i-beam-operator-supplementary-i-beam-functions-header"></a></li>
</ul></li>
</ul></li>
<li class="toc-chapter"><a class="toc" href="#system-functions-and-variables-header"></a><ul class="first-level">
<li><a class="toc" href="#system-functions-summary-tables-introduction-header"></a></li>
<li><a class="toc" href="#system-functions-summary-tables-system-functions-and-variables-print-header"></a></li>
<li><a class="toc" href="#system-functions-summary-tables-system-functions-categorised-header"></a></li>
<li><a class="toc" href="#system-functions-summary-tables-system-variables-header"></a></li>
<li><a class="toc" href="#system-functions-summary-tables-functions-a-z-header"></a></li>
<li><a class="toc" href="#system-functions-and-variables-system-functions-a-z--header"></a><ul>
<li><a class="toc" href="#system-functions-character-input-output-header"></a></li>
<li><a class="toc" href="#system-functions-evaluated-input-output-header"></a></li>
<li><a class="toc" href="#system-functions-underscored-alphabetic-characters-header"></a></li>
<li><a class="toc" href="#system-functions-a-header"></a></li>
<li><a class="toc" href="#system-functions-ai-header"></a></li>
<li><a class="toc" href="#system-functions-an-header"></a></li>
<li><a class="toc" href="#system-functions-arbin-header"></a></li>
<li><a class="toc" href="#system-functions-arbout-header"></a></li>
<li><a class="toc" href="#system-functions-at-header"></a></li>
<li><a class="toc" href="#system-functions-atx-header"></a></li>
<li><a class="toc" href="#system-functions-av-header"></a></li>
<li><a class="toc" href="#system-functions-avu-header"></a></li>
<li><a class="toc" href="#system-functions-base-header"></a></li>
<li><a class="toc" href="#system-functions-c-header"></a></li>
<li><a class="toc" href="#system-functions-class-header"></a></li>
<li><a class="toc" href="#system-functions-clear-header"></a></li>
<li><a class="toc" href="#system-functions-execute-windows-command-header"></a></li>
<li><a class="toc" href="#system-functions-start-windows-auxiliary-processor-header"></a></li>
<li><a class="toc" href="#system-functions-cr-header"></a></li>
<li><a class="toc" href="#system-functions-cs-header"></a></li>
<li><a class="toc" href="#system-functions-csv-header"></a></li>
<li><a class="toc" href="#system-functions-ct-header"></a></li>
<li><a class="toc" href="#system-functions-cy-header"></a></li>
<li><a class="toc" href="#system-functions-d-header"></a></li>
<li><a class="toc" href="#system-functions-dct-header"></a></li>
<li><a class="toc" href="#system-functions-df-header"></a></li>
<li><a class="toc" href="#system-functions-div-header"></a></li>
<li><a class="toc" href="#system-functions-dl-header"></a></li>
<li><a class="toc" href="#system-functions-dm-header"></a></li>
<li><a class="toc" href="#system-functions-dmx-header"></a></li>
<li><a class="toc" href="#system-functions-dq-header"></a></li>
<li><a class="toc" href="#system-functions-data-representation-monadic-header"></a></li>
<li><a class="toc" href="#system-functions-data-representation-dyadic-header"></a></li>
<li><a class="toc" href="#system-functions-dt-print-header"></a></li>
<li><a class="toc" href="#system-functions-ed-header"></a></li>
<li><a class="toc" href="#system-functions-em-header"></a></li>
<li><a class="toc" href="#system-functions-en-header"></a></li>
<li><a class="toc" href="#system-functions-exception-header"></a></li>
<li><a class="toc" href="#system-functions-ex-header"></a></li>
<li><a class="toc" href="#system-functions-export-header"></a></li>
<li><a class="toc" href="#system-functions-fappend-header"></a></li>
<li><a class="toc" href="#system-functions-favail-header"></a></li>
<li><a class="toc" href="#system-functions-fchk-header"></a></li>
<li><a class="toc" href="#system-functions-fcopy-header"></a></li>
<li><a class="toc" href="#system-functions-fcreate-header"></a></li>
<li><a class="toc" href="#system-functions-fdrop-header"></a></li>
<li><a class="toc" href="#system-functions-ferase-header"></a></li>
<li><a class="toc" href="#system-functions-fhist-header"></a></li>
<li><a class="toc" href="#system-functions-fhold-header"></a></li>
<li><a class="toc" href="#system-functions-fix-header"></a></li>
<li><a class="toc" href="#system-functions-flib-header"></a></li>
<li><a class="toc" href="#system-functions-format-monadic-header"></a></li>
<li><a class="toc" href="#system-functions-format-dyadic-header"></a></li>
<li><a class="toc" href="#system-functions-fnames-header"></a></li>
<li><a class="toc" href="#system-functions-fnums-header"></a></li>
<li><a class="toc" href="#system-functions-fprops-header"></a></li>
<li><a class="toc" href="#system-functions-fr-header"></a></li>
<li><a class="toc" href="#system-functions-frdac-header"></a></li>
<li><a class="toc" href="#system-functions-frdci-header"></a></li>
<li><a class="toc" href="#system-functions-fread-header"></a></li>
<li><a class="toc" href="#system-functions-frename-header"></a></li>
<li><a class="toc" href="#system-functions-freplace-header"></a></li>
<li><a class="toc" href="#system-functions-fresize-header"></a></li>
<li><a class="toc" href="#system-functions-fsize-header"></a></li>
<li><a class="toc" href="#system-functions-fstac-header"></a></li>
<li><a class="toc" href="#system-functions-fstie-header"></a></li>
<li><a class="toc" href="#system-functions-ftie-header"></a></li>
<li><a class="toc" href="#system-functions-funtie-header"></a></li>
<li><a class="toc" href="#system-functions-fx-header"></a></li>
<li><a class="toc" href="#system-functions-instances-header"></a></li>
<li><a class="toc" href="#system-functions-io-header"></a></li>
<li><a class="toc" href="#system-functions-and-variables-system-functions-a-z--json-convert-header"></a><ul>
<li><a class="toc" href="#system-functions-json-header"></a></li>
<li><a class="toc" href="#system-functions-json-name-manglling-header"></a></li>
</ul></li>
<li><a class="toc" href="#system-functions-kl-header"></a></li>
<li><a class="toc" href="#system-functions-lc-header"></a></li>
<li><a class="toc" href="#system-functions-load-header"></a></li>
<li><a class="toc" href="#system-functions-lock-header"></a></li>
<li><a class="toc" href="#system-functions-lx-header"></a></li>
<li><a class="toc" href="#system-functions-map-header"></a></li>
<li><a class="toc" href="#system-functions-mkdir-header"></a></li>
<li><a class="toc" href="#system-functions-ml-header"></a></li>
<li><a class="toc" href="#system-functions-set-monitor-header"></a></li>
<li><a class="toc" href="#system-functions-query-monitor-header"></a></li>
<li><a class="toc" href="#system-functions-na-header"></a></li>
<li><a class="toc" href="#system-functions-nappend-header"></a></li>
<li><a class="toc" href="#system-functions-nc-header"></a></li>
<li><a class="toc" href="#system-functions-ncopy-header"></a></li>
<li><a class="toc" href="#system-functions-ncreate-header"></a></li>
<li><a class="toc" href="#system-functions-ndelete-header"></a></li>
<li><a class="toc" href="#system-functions-nerase-header"></a></li>
<li><a class="toc" href="#system-functions-new-header"></a></li>
<li><a class="toc" href="#system-functions-nexists-header"></a></li>
<li><a class="toc" href="#system-functions-nget-header"></a></li>
<li><a class="toc" href="#system-functions-ninfo-header"></a></li>
<li><a class="toc" href="#system-functions-nl-header"></a></li>
<li><a class="toc" href="#system-functions-nlock-header"></a></li>
<li><a class="toc" href="#system-functions-nmove-header"></a></li>
<li><a class="toc" href="#system-functions-nnames-header"></a></li>
<li><a class="toc" href="#system-functions-nnums-header"></a></li>
<li><a class="toc" href="#system-functions-nparts-header"></a></li>
<li><a class="toc" href="#system-functions-nput-header"></a></li>
<li><a class="toc" href="#system-functions-nq-header"></a></li>
<li><a class="toc" href="#system-functions-nr-header"></a></li>
<li><a class="toc" href="#system-functions-nread-header"></a></li>
<li><a class="toc" href="#system-functions-nrename-header"></a></li>
<li><a class="toc" href="#system-functions-nreplace-header"></a></li>
<li><a class="toc" href="#system-functions-nresize-header"></a></li>
<li><a class="toc" href="#system-functions-ns-header"></a></li>
<li><a class="toc" href="#system-functions-nsi-header"></a></li>
<li><a class="toc" href="#system-functions-nsize-header"></a></li>
<li><a class="toc" href="#system-functions-ntie-header"></a></li>
<li><a class="toc" href="#system-functions-null-header"></a></li>
<li><a class="toc" href="#system-functions-nuntie-header"></a></li>
<li><a class="toc" href="#system-functions-nxlate-header"></a></li>
<li><a class="toc" href="#system-functions-off-header"></a></li>
<li><a class="toc" href="#system-functions-opt-header"></a></li>
<li><a class="toc" href="#system-functions-or-header"></a></li>
<li><a class="toc" href="#system-functions-path-header"></a></li>
<li><a class="toc" href="#system-functions-pfkey-header"></a></li>
<li><a class="toc" href="#system-functions-pp-header"></a></li>
<li><a class="toc" href="#system-functions-profile-header"></a></li>
<li><a class="toc" href="#system-functions-pw-header"></a></li>
<li><a class="toc" href="#system-functions-r-header"></a></li>
<li><a class="toc" href="#system-functions-refs-header"></a></li>
<li><a class="toc" href="#system-functions-rl-header"></a></li>
<li><a class="toc" href="#system-functions-rsi-header"></a></li>
<li><a class="toc" href="#system-functions-rtl-header"></a></li>
<li><a class="toc" href="#system-functions-s-header"></a></li>
<li><a class="toc" href="#system-functions-save-header"></a></li>
<li><a class="toc" href="#system-functions-sd-header"></a></li>
<li><a class="toc" href="#system-functions-se-header"></a></li>
<li><a class="toc" href="#system-functions-execute-unix-command-header"></a></li>
<li><a class="toc" href="#system-functions-start-unix-auxiliary-processor-header"></a></li>
<li><a class="toc" href="#system-functions-shadow-header"></a></li>
<li><a class="toc" href="#system-functions-si-header"></a></li>
<li><a class="toc" href="#system-functions-signal-header"></a></li>
<li><a class="toc" href="#system-functions-size-header"></a></li>
<li><a class="toc" href="#system-functions-sm-header"></a></li>
<li><a class="toc" href="#system-functions-sr-header"></a></li>
<li><a class="toc" href="#system-functions-src-header"></a></li>
<li><a class="toc" href="#system-functions-stack-header"></a></li>
<li><a class="toc" href="#system-functions-state-header"></a></li>
<li><a class="toc" href="#system-functions-set-stop-header"></a></li>
<li><a class="toc" href="#system-functions-query-stop-header"></a></li>
<li><a class="toc" href="#system-functions-set-access-control-header"></a></li>
<li><a class="toc" href="#system-functions-query-access-control-header"></a></li>
<li><a class="toc" href="#system-functions-shared-variable-offer-header"></a></li>
<li><a class="toc" href="#system-functions-query-degree-of-coupling-header"></a></li>
<li><a class="toc" href="#system-functions-svq-header"></a></li>
<li><a class="toc" href="#system-functions-svr-header"></a></li>
<li><a class="toc" href="#system-functions-svs-header"></a></li>
<li><a class="toc" href="#system-functions-talloc-header"></a></li>
<li><a class="toc" href="#system-functions-tc-header"></a></li>
<li><a class="toc" href="#system-functions-tcnums-header"></a></li>
<li><a class="toc" href="#system-functions-tget-header"></a></li>
<li><a class="toc" href="#system-functions-this-header"></a></li>
<li><a class="toc" href="#system-functions-tid-header"></a></li>
<li><a class="toc" href="#system-functions-tkill-header"></a></li>
<li><a class="toc" href="#system-functions-tname-header"></a></li>
<li><a class="toc" href="#system-functions-tnums-header"></a></li>
<li><a class="toc" href="#system-functions-tpool-header"></a></li>
<li><a class="toc" href="#system-functions-tput-header"></a></li>
<li><a class="toc" href="#system-functions-set-trace-header"></a></li>
<li><a class="toc" href="#system-functions-query-trace-header"></a></li>
<li><a class="toc" href="#system-functions-trap-header"></a></li>
<li><a class="toc" href="#system-functions-treq-header"></a></li>
<li><a class="toc" href="#system-functions-ts-header"></a></li>
<li><a class="toc" href="#system-functions-tsync-header"></a></li>
<li><a class="toc" href="#system-functions-ucs-header"></a></li>
<li><a class="toc" href="#system-functions-using-header"></a></li>
<li><a class="toc" href="#system-functions-vr-header"></a></li>
<li><a class="toc" href="#system-functions-vfi-header"></a></li>
<li><a class="toc" href="#system-functions-wa-header"></a></li>
<li><a class="toc" href="#system-functions-wc-header"></a></li>
<li><a class="toc" href="#system-functions-wg-header"></a></li>
<li><a class="toc" href="#system-functions-wn-header"></a></li>
<li><a class="toc" href="#system-functions-ws-header"></a></li>
<li><a class="toc" href="#system-functions-wsid-header"></a></li>
<li><a class="toc" href="#system-functions-wx-header"></a></li>
<li><a class="toc" href="#system-functions-xml-header"></a></li>
<li><a class="toc" href="#system-functions-xsi-header"></a></li>
<li><a class="toc" href="#system-functions-set-external-variable-header"></a></li>
<li><a class="toc" href="#system-functions-query-external-variable-header"></a></li>
</ul></li>
</ul></li>
<li class="toc-chapter"><a class="toc" href="#system-commands-header"></a><ul class="first-level">
<li><a class="toc" href="#system-commands-introduction-header"></a></li>
<li><a class="toc" href="#system-commands-system-commands-a-z--header"></a><ul>
<li><a class="toc" href="#system-commands-classes-header"></a></li>
<li><a class="toc" href="#system-commands-clear-header"></a></li>
<li><a class="toc" href="#system-commands-cmd-header"></a></li>
<li><a class="toc" href="#system-commands-continue-header"></a></li>
<li><a class="toc" href="#system-commands-copy-header"></a></li>
<li><a class="toc" href="#system-commands-cs-header"></a></li>
<li><a class="toc" href="#system-commands-drop-header"></a></li>
<li><a class="toc" href="#system-commands-ed-header"></a></li>
<li><a class="toc" href="#system-commands-erase-header"></a></li>
<li><a class="toc" href="#system-commands-events-header"></a></li>
<li><a class="toc" href="#system-commands-fns-header"></a></li>
<li><a class="toc" href="#system-commands-holds-header"></a></li>
<li><a class="toc" href="#system-commands-lib-header"></a></li>
<li><a class="toc" href="#system-commands-load-header"></a></li>
<li><a class="toc" href="#system-commands-methods-header"></a></li>
<li><a class="toc" href="#system-commands-ns-header"></a></li>
<li><a class="toc" href="#system-commands-objects-header"></a></li>
<li><a class="toc" href="#system-commands-obs-header"></a></li>
<li><a class="toc" href="#system-commands-off-header"></a></li>
<li><a class="toc" href="#system-commands-ops-header"></a></li>
<li><a class="toc" href="#system-commands-pcopy-header"></a></li>
<li><a class="toc" href="#system-commands-props-header"></a></li>
<li><a class="toc" href="#system-commands-reset-header"></a></li>
<li><a class="toc" href="#system-commands-save-header"></a></li>
<li><a class="toc" href="#system-commands-sh-header"></a></li>
<li><a class="toc" href="#system-commands-si-header"></a></li>
<li><a class="toc" href="#system-commands-sic-header"></a></li>
<li><a class="toc" href="#system-commands-sinl-header"></a></li>
<li><a class="toc" href="#system-commands-tid-header"></a></li>
<li><a class="toc" href="#system-commands-vars-header"></a></li>
<li><a class="toc" href="#system-commands-wsid-header"></a></li>
<li><a class="toc" href="#system-commands-xload-header"></a></li>
</ul></li>
</ul></li>
<li class="toc-chapter"><a class="toc" href="#appendices-header"></a><ul class="first-level">
<li><a class="toc" href="#pcre-specifications-pcre-overview-header"></a></li>
<li><a class="toc" href="#pcre-specifications-pcre-regular-expression-syntax-summary-header"></a></li>
<li><a class="toc" href="#pcre-specifications-pcre-regular-expression-details-header"></a></li>
</ul></li>
</ul>
</article>
</section>
<article id="primitive-functions-key-to-notation">
<h1 id="primitive-functions-key-to-notation-header"> Key to Notation</h1>
<p>The following definitions and conventions apply throughout this section:</p>
<table>
<tbody>
<tr>
<td><code>f</code></td>
<td>A function, or an operator's left operand (function or array).</td>
</tr>
<tr>
<td><code>g</code></td>
<td>A function, or an operator's right operand (function or array).</td>
</tr>
<tr>
<td><code>A</code></td>
<td>An operator's left argument when an array.</td>
</tr>
<tr>
<td><code>B</code></td>
<td>An operator's right argument when an array.</td>
</tr>
<tr>
<td><code>X</code></td>
<td>The left argument of a function.</td>
</tr>
<tr>
<td><code>Y</code></td>
<td>The right argument of a function.</td>
</tr>
<tr>
<td><code>R</code></td>
<td>The explicit result of a function.</td>
</tr>
<tr>
<td><code>[K]</code></td>
<td>Axis specification.</td>
</tr>
<tr>
<td><code>[I]</code></td>
<td>Index specification.</td>
</tr>
<tr>
<td><code>{X}</code></td>
<td>The left argument of a function is optional.</td>
</tr>
<tr>
<td><code>{R}←</code></td>
<td>The function may or may not return a result, or the result may be suppressed.</td>
</tr>
</tbody>
</table>
<p><em>function</em> may refer to a primitive function, a system function, a defined (canonical, dfn or assigned) function or a derived (from an operator) function.</p>
</article>
<section data-chapter-seq="1" id="primitive-functions">
<h1 class="chapter" id="primitive-functions-header">Primitive Functions</h1>
<article id="primitive-functions-scalar-functions">
<h2 id="primitive-functions-scalar-functions-header"> Scalar Functions</h2>
<p>There is a class of primitive functions termed scalar functions This class is identified in <a class="internal-link" href="#ScalarPrimitiveFunctions">Table 1-1</a> below. Scalar functions are <strong>pervasive</strong>, i.e. their properties apply at all levels of nesting.  Scalar functions have the following properties:</p>

<table id="ScalarPrimitiveFunctions"><caption style="caption-side:top"><strong>Table 1-1:</strong> Scalar Primitive Functions</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td><a class="internal-link" href="#primitive-functions-conjugate">Conjugate</a></td>
<td><a class="internal-link" href="#primitive-functions-add">Plus (Add)</a></td>
</tr>
<tr>
<td><code>-</code></td>
<td><a class="internal-link" href="#primitive-functions-negative">Negative</a></td>
<td><a class="internal-link" href="#primitive-functions-subtract">Minus (Subtract)</a></td>
</tr>
<tr>
<td><code>×</code></td>
<td><a class="internal-link" href="#primitive-functions-direction">Direction (Signum)</a></td>
<td><a class="internal-link" href="#primitive-functions-multiply">Times (Multiply)</a></td>
</tr>
<tr>
<td><code>÷</code></td>
<td><a class="internal-link" href="#primitive-functions-reciprocal">Reciproca</a> l</td>
<td><a class="internal-link" href="#primitive-functions-divide">Divide</a></td>
</tr>
<tr>
<td><code>|</code></td>
<td><a class="internal-link" href="#primitive-functions-magnitude">Magnitude</a></td>
<td><a class="internal-link" href="#primitive-functions-residue">Residue</a></td>
</tr>
<tr>
<td><code>⌊</code></td>
<td><a class="internal-link" href="#primitive-functions-floor">Floor</a></td>
<td><a class="internal-link" href="#primitive-functions-minimum">Minimum</a></td>
</tr>
<tr>
<td><code>⌈</code></td>
<td><a class="internal-link" href="#primitive-functions-ceiling">Ceiling</a></td>
<td><a class="internal-link" href="#primitive-functions-maximum">Maximum</a></td>
</tr>
<tr>
<td><code>*</code></td>
<td><a class="internal-link" href="#primitive-functions-exponential">Exponential</a></td>
<td><a class="internal-link" href="#primitive-functions-power">Power</a></td>
</tr>
<tr>
<td><code>⍟</code></td>
<td><a class="internal-link" href="#primitive-functions-natural-logarithm">Natural Logarithm</a></td>
<td><a class="internal-link" href="#primitive-functions-logarithm">Logarithm</a></td>
</tr>
<tr>
<td><code>○</code></td>
<td><a class="internal-link" href="#primitive-functions-pi-times">Pi Times</a></td>
<td><a class="internal-link" href="#primitive-functions-circular">Circular</a></td>
</tr>
<tr>
<td><code>!</code></td>
<td><a class="internal-link" href="#primitive-functions-factorial">Factorial</a></td>
<td><a class="internal-link" href="#primitive-functions-binomial">Binomial</a></td>
</tr>
<tr>
<td><code>~</code></td>
<td><a class="internal-link" href="#primitive-functions-notes">Not</a></td>
<td>$</td>
</tr>
<tr>
<td><code>?</code></td>
<td><a class="internal-link" href="#primitive-functions-roll">Roll</a></td>
<td>$</td>
</tr>
<tr>
<td><code>∊</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-set-dyalog-pixel-type">Type</a> (See <a class="internal-link" href="#primitive-functions-enlist">Enlist</a> )</td>
<td>$</td>
</tr>
<tr>
<td><code>^</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-and-lowest-common-multiple">And</a></td>
</tr>
<tr>
<td><code>∨</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-or-greatest-common-divisor">Or</a></td>
</tr>
<tr>
<td><code>⍲</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-nand">Nand</a></td>
</tr>
<tr>
<td><code>⍱</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-nor">Nor</a></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-less">Less</a></td>
</tr>
<tr>
<td><code>≤</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-less-or-equal">Less Or Equal</a></td>
</tr>
<tr>
<td><code>=</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-equal">Equal</a></td>
</tr>
<tr>
<td><code>≥</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-greater-or-equal">Greater Or Equal</a></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-greater">Greater</a></td>
</tr>
<tr>
<td><code>≠</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-not-equal">Not Equal</a></td>
</tr>
<tr>
<td colspan="3">$ Dyadic form is not scalar</td>
</tr>
</tbody>
</table>
<h4>Monadic Scalar Functions</h4>
<ul>
<li>The function is applied independently to each simple scalar in its argument.</li>
<li>The function produces a result with a structure identical to its argument.</li>
<li>When applied to an empty argument, the function produces an empty result.  With the exception of <code>+</code> and <code>∊</code>, the type of this result depends on the function, not on the type of the argument. By definition + and <code>∊</code> return a result of the same type as their arguments.</li>
</ul>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
<span class="m">0.5</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">0.25</span>
</code></pre></div>
<h4>Dyadic Scalar Functions</h4>
<ul>
<li>The function is applied independently to corresponding pairs of simple scalars in its arguments.</li>
<li>A simple scalar will be replicated to conform to the structure of the other argument.  If a simple scalar in the structure of an argument corresponds to a non-simple scalar in the other argument, then the function is applied between the simple scalar and the items of the non-simple scalar.  Replication of simple scalars is called scalar extension.</li>
<li>A simple unit is treated as a scalar for scalar extension purposes.  A unit is a single element array of any rank.  If both arguments are simple units, the argument with lower rank is extended.</li>
<li>The function produces a result with a structure identical to that of its arguments (after scalar extensions).</li>
<li>If applied between empty arguments, the function produces a composite structure resulting from any scalar extensions, with type appropriate to the particular function. (All scalar dyadic functions return a result of numeric type.)</li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="m">3</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">7</span>

<span class="w">      </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">9</span>

<span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
<span class="m">20</span><span class="w">  </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="m">4</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="m">1</span><span class="o">↑</span><span class="s1">''</span><span class="o">+⍳</span><span class="m">0</span>
<span class="m">0</span>
<span class="w">       </span><span class="m">1</span><span class="o">↑</span><span class="p">(</span><span class="m">0</span><span class="o">⍴⊂</span><span class="s1">' '</span><span class="w"> </span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="o">×</span><span class="s1">''</span>
<span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p><strong>Note:</strong>  The Axis operator applies to all scalar dyadic functions.</p>
</article>
<article id="primitive-functions-mixed-functions">
<h2 id="primitive-functions-mixed-functions-header"> Mixed Functions</h2>
<p>Mixed rank functions and special symbols are summarised in <a class="internal-link" href="#MixedRankFunctions">Table 1-2</a>. For convenience, they are sub-divided into five classes:</p>

<table id="MixedRankFunctions"><caption style="caption-side:top"><strong>Table 1-2:</strong> Mixed rank functions and special symbols</caption>
<tbody>
<tr>
<td><strong>Structural</strong></td>
<td>These functions change the structure of the arguments in some way.</td>
</tr>
<tr>
<td><strong>Selection</strong></td>
<td>These functions select elements from an argument.</td>
</tr>
<tr>
<td><strong>Selector</strong></td>
<td>These functions identify specific elements by a Boolean map or by an ordered set of indices.</td>
</tr>
<tr>
<td><strong>Miscellaneous</strong></td>
<td>These functions transform arguments in some way, or provide information about the arguments.</td>
</tr>
<tr>
<td><strong>Special</strong></td>
<td>These symbols have special properties.</td>
</tr>
</tbody>
</table>
<p>In general, the structure of the result of a mixed primitive function is different from that of its arguments.</p>
<p>Scalar extension may apply to some, but not all, dyadic mixed functions.</p>
<p>Mixed primitive functions are not pervasive. The function is applied to elements of the arguments, not necessarily independently.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'MOUSE'</span><span class="o">⍳⊂</span><span class="s1">'DOG'</span>
<span class="m">2</span><span class="w"> </span>
<span class="w">      </span><span class="m">3</span><span class="o">↑</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">'TWO'</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="s1">'FOUR'</span>
<span class="m">1</span><span class="w">  </span><span class="nv">TWO</span><span class="w">  </span><span class="m">3</span>
</code></pre></div>
<p>In the following tables, note that:</p>
<ul>
<li><code>[]</code> Implies axis specification is optional</li>
<li>$  This function is in another class</li>
</ul>

<table id="Structural"><caption style="caption-side:top"><strong>Table 1-3:</strong> Structural Primitive Functions</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⍴</code></td>
<td>$</td>
<td><a class="internal-link" href="#primitive-functions-reshape">Reshape</a></td>
</tr>
<tr>
<td><code>,</code></td>
<td><a class="internal-link" href="#primitive-functions-ravel-with-axes">Ravel </a> <code>[]</code></td>
<td><a class="internal-link" href="#primitive-functions-catenate-laminate">Catenate/Laminate</a> <code>[]</code></td>
</tr>
<tr>
<td><code>⍪</code></td>
<td><a class="internal-link" href="#system-functions-summary-tables-system-functions-categorised">Table</a></td>
<td><a class="internal-link" href="#primitive-functions-catenate-first">Catenate First / Laminate </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⌽</code></td>
<td><a class="internal-link" href="#primitive-functions-reverse-first">Reverse </a> <code>[]</code></td>
<td><a class="internal-link" href="#primitive-functions-rotate-first">Rotate </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⊖</code></td>
<td><a class="internal-link" href="#primitive-functions-reverse-first">Reverse First </a> <code>[]</code></td>
<td><a class="internal-link" href="#primitive-functions-rotate-first">Rotate First </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⍉</code></td>
<td><a class="internal-link" href="#primitive-functions-transpose-monadic">Transpose</a></td>
<td><a class="internal-link" href="#primitive-functions-transpose-dyadic">Transpose</a></td>
</tr>
<tr>
<td><code>↑</code></td>
<td><a class="internal-link" href="#primitive-functions-mixed-functions">Mix</a> / <a class="internal-link" href="#primitive-functions-disclose">Disclose </a> <code>[]</code></td>
<td>$</td>
</tr>
<tr>
<td><code>↓</code></td>
<td><a class="internal-link" href="#primitive-functions-split">Split </a> <code>[]</code></td>
<td>$</td>
</tr>
<tr>
<td><code>⊂</code></td>
<td><a class="internal-link" href="#primitive-functions-enclose">Enclose </a> <code>[]</code></td>
<td><a class="internal-link" href="#primitive-functions-partitioned-enclose">Partitioned Enclose </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⊆</code></td>
<td><a class="internal-link" href="#primitive-functions-nest">Nest</a></td>
<td><a class="internal-link" href="#primitive-functions-partitioned-enclose">Partition </a> <code>[]</code></td>
</tr>
<tr>
<td><code>∊</code></td>
<td><a class="internal-link" href="#primitive-functions-enlist">Enlist</a> (See <a class="internal-link" href="#the-i-beam-operator-set-dyalog-pixel-type">Type</a> )</td>
<td>$</td>
</tr>
</tbody>
</table>

<table id="Selection"><caption style="caption-side:top"><strong>Table 1-4:</strong> Selection Primitive Functions</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⊃</code></td>
<td><a class="internal-link" href="#primitive-functions-disclose">Disclose </a> / <a class="internal-link" href="#primitive-functions-mixed-functions">Mix</a></td>
<td><a class="internal-link" href="#primitive-functions-pick">Pick</a></td>
</tr>
<tr>
<td><code>↑</code></td>
<td>$</td>
<td><a class="internal-link" href="#primitive-functions-take-with-axes">Take </a> <code>[]</code></td>
</tr>
<tr>
<td><code>↓</code></td>
<td>$</td>
<td><a class="internal-link" href="#system-functions-fdrop">Drop </a> <code>[]</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-replicate-first">Replicate </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⌿</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-replicate-first">Replicate First </a> <code>[]</code></td>
</tr>
<tr>
<td><code>\</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-expand-first">Expand </a> <code>[]</code></td>
</tr>
<tr>
<td><code>⍀</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-expand-first">Expand First </a> <code>[]</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>$</td>
<td><a class="internal-link" href="#primitive-functions-excluding">Without (Excluding)</a></td>
</tr>
<tr>
<td><code>∩</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-intersection">Intersection</a></td>
</tr>
<tr>
<td><code>∪</code></td>
<td><a class="internal-link" href="#primitive-functions-unique-mask">Unique</a></td>
<td><a class="internal-link" href="#primitive-functions-union">Union</a></td>
</tr>
<tr>
<td><code>⊣</code></td>
<td><a class="internal-link" href="#primitive-functions-same">Same</a></td>
<td><a class="internal-link" href="#primitive-functions-left">Left</a></td>
</tr>
<tr>
<td><code>⊢</code></td>
<td><a class="internal-link" href="#primitive-functions-same">Same</a></td>
<td><a class="internal-link" href="#primitive-functions-right">Right</a></td>
</tr>
<tr>
<td><code>⌷</code></td>
<td><a class="internal-link" href="#primitive-functions-materialise">Materialise</a></td>
<td><a class="internal-link" href="#primitive-functions-index-of">Index</a></td>
</tr>
<tr>
<td><code>≠</code></td>
<td><a class="internal-link" href="#primitive-functions-unique-mask">Unique Mask</a></td>
<td> </td>
</tr>
</tbody>
</table>

<table id="Selector"><caption style="caption-side:top"><strong>Table 1-5:</strong> Selector Primitive Functions</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⍳</code></td>
<td><a class="internal-link" href="#primitive-functions-index-generator">Index Generator</a></td>
<td><a class="internal-link" href="#primitive-functions-index-of">Index Of</a></td>
</tr>
<tr>
<td><code>⍸</code></td>
<td><a class="internal-link" href="#primitive-functions-where">Where</a></td>
<td><a class="internal-link" href="#primitive-functions-interval-index">Interval Index</a></td>
</tr>
<tr>
<td><code>∊</code></td>
<td>$</td>
<td><a class="internal-link" href="#primitive-functions-membership">Membership</a></td>
</tr>
<tr>
<td><code>⍋</code></td>
<td><a class="internal-link" href="#primitive-functions-grade-up-monadic">Grade Up</a></td>
<td><a class="internal-link" href="#primitive-functions-grade-up-dyadic">Grade Up</a></td>
</tr>
<tr>
<td><code>⍒</code></td>
<td><a class="internal-link" href="#primitive-functions-grade-down-monadic">Grade Down</a></td>
<td><a class="internal-link" href="#primitive-functions-grade-down-dyadic">Grade Down</a></td>
</tr>
<tr>
<td><code>?</code></td>
<td>$</td>
<td><a class="internal-link" href="#primitive-functions-deal">Deal</a></td>
</tr>
<tr>
<td><code>⍷</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-find">Find</a></td>
</tr>
</tbody>
</table>

<table id="Miscellaneous"><caption style="caption-side:top"><strong>Table 1-6:</strong> Miscellaneous Primitive Functions</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⍴</code></td>
<td><a class="internal-link" href="#primitive-functions-shape">Shape</a></td>
<td>$</td>
</tr>
<tr>
<td><code>≡</code></td>
<td><a class="internal-link" href="#primitive-functions-depth">Depth</a></td>
<td><a class="internal-link" href="#primitive-functions-match">Match</a></td>
</tr>
<tr>
<td><code>≢</code></td>
<td><a class="internal-link" href="#primitive-functions-tally">Tally</a></td>
<td><a class="internal-link" href="#primitive-functions-not-match">Not Match</a></td>
</tr>
<tr>
<td><code>⍎</code></td>
<td><a class="internal-link" href="#system-functions-execute-windows-command">Execute</a></td>
<td><a class="internal-link" href="#system-functions-execute-windows-command">Execute</a></td>
</tr>
<tr>
<td><code>⍕</code></td>
<td><a class="internal-link" href="#primitive-functions-format-monadic">Format</a></td>
<td><a class="internal-link" href="#primitive-functions-format-dyadic">Format</a></td>
</tr>
<tr>
<td><code>⊥</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-decode">Decode (Base)</a></td>
</tr>
<tr>
<td><code>⊤</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-encode">Encode (Representation)</a></td>
</tr>
<tr>
<td><code>⌹</code></td>
<td><a class="internal-link" href="#primitive-functions-matrix-inverse">Matrix Inverse</a></td>
<td><a class="internal-link" href="#primitive-functions-matrix-divide">Matrix Divide</a></td>
</tr>
</tbody>
</table>

<table id="Special"><caption style="caption-side:top"><strong>Table 1-7:</strong> Special Syntax</caption>
<thead>
<tr>
<th>Symbol</th>
<th>Monadic</th>
<th>Dyadic</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>→</code></td>
<td><a class="internal-link" href="#primitive-functions-abort">Abort</a></td>
<td> </td>
</tr>
<tr>
<td><code>→</code></td>
<td><a class="internal-link" href="#primitive-functions-branch">Branch</a></td>
<td> </td>
</tr>
<tr>
<td><code>←</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-assignment-indexed">Assignment</a></td>
</tr>
<tr>
<td><code>[I]←</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-assignment-indexed">Assignment(Indexed)</a></td>
</tr>
<tr>
<td><code>(I)←</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-assignment-selective">Assignment(Selective)</a></td>
</tr>
<tr>
<td><code>[]</code></td>
<td> </td>
<td><a class="internal-link" href="#primitive-functions-indexing">Indexing</a></td>
</tr>
</tbody>
</table>
</article>
<article id="primitive-functions-notes">
<h2 id="primitive-functions-notes-header"> Notes</h2>
<h4>Conformability</h4>
<p>The arguments of a dyadic function are said to be CONFORMABLE if the shape of each argument meets the requirements of the function, possibly after scalar extension.</p>
<h4>Fill Elements</h4>
<p>Some primitive functions may include fill elements in their result.  The fill element for an array is the enclosed type of the disclose of the array (<code>⊂∊⊃Y</code> for array <code>Y</code> with <code>⎕ML←0</code>).  The Type function (<code>∊</code> with <code>⎕ml←0</code>) replaces a numeric value with zero and a character value with <code>' '</code>.</p>
<p>The Disclose function (<code>⊃</code>) returns the first item of an array.  If the array is empty, <code>⊃Y</code> is the PROTOTYPE of <code>Y</code>.  The prototype is the type of the first element of the original array.</p>
<p>Primitive functions which may return an array including fill elements are Expand (<code>\</code> or <code>⍀</code>), Replicate (<code>/</code> or <code>⌿</code>), Reshape (<code>⍴</code>) and Take (<code>↑</code>).</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ML</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="o">∊⍳</span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">∊⊃</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)(</span><span class="s1">'ABC'</span><span class="p">)</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">⊂∊⊃</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)(</span><span class="s1">'ABC'</span><span class="p">)</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">⊂∊⊃⊂</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)(</span><span class="s1">'ABC'</span><span class="p">)</span>
<span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'ABC'</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="m">0</span><span class="o">⍴</span><span class="nv">A</span>
<span class="w">      </span><span class="o">⊂∊⊃</span><span class="nv">A</span>

<span class="w">      </span><span class="s1">' '</span><span class="o">=⊂∊⊃</span><span class="nv">A</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<h4>Axis Operator</h4>
<p>The axis operator may be applied to all scalar dyadic primitive functions and certain mixed primitive functions.  An integer axis identifies a specific axis along which the function is to be applied to one or both of its arguments.  If the primitive function is to be applied without an axis specification, a default axis is implied, either the first or last.</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">+</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span>
<span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span>
<span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span>
</code></pre></div></p>
<p>Sometimes the axis value is fractional, indicating that a new axis or axes are to be created between the axes identified by the lower and upper integer bounds of the value (either of which might not exist).</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'NAMES'</span><span class="o">,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="s1">'='</span>
<span class="nv">NAMES</span>
<span class="o">=====</span>
</code></pre></div>
<p><code>⎕IO</code> is an implicit argument of an axis specification.</p>
<h4>Migration Level</h4>
<p><code>⎕ML</code> determines the degree of migration of the Dyalog APL language towards IBM's APL2. Unless otherwise stated, the manual assumes <code>⎕ML</code> has a value of 1.</p>
</article>
<section id="primitive-functions-functions-a-z-">
<h2 id="primitive-functions-functions-a-z--header">Functions (A-Z)</h2>
<article id="primitive-functions-functions-a-z">
<h3 id="primitive-functions-functions-a-z-header"> Functions (A-Z)</h3>
<p>In the remainder of this Chapter, the primitive functions are presented in alphabetical order of their descriptive names.</p>
</article>
<article id="primitive-functions-abort">
<div class="heading-container"><h3 class="heading" id="primitive-functions-abort-header">Abort</h3><div class="command">→</div></div>
<p>This is a special case of the Branch function used in the niladic sense.  If it occurs in a statement it must be the only symbol in an expression or the only symbol forming an expression in a text string to be executed by <code>⍎</code>.  It clears the most recently suspended statement and all of its pendent statements from the state indicator.</p>
<p>The Abort function has no explicit result.  The function is not in the function domain of operators.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">F</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="s1">'F[1]'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">G</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="s1">'F[3]'</span>
<span class="w">      </span><span class="bp">∇</span>

<span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">G</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="s1">'G[1]'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="s1">'G[3]'</span>
<span class="w">      </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">F</span>
<span class="nv">F</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
<span class="nv">G</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>

<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'VALIDATE'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">VALIDATE</span>
<span class="w"> </span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="kd">→</span><span class="p">(</span><span class="m">12</span><span class="o">=</span><span class="m">1</span><span class="o">↑</span><span class="nf">⎕AI</span><span class="p">)</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="s1">'ACCOUNT NOT AUTHORISED'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">VALIDATE</span>
<span class="nv">ACCOUNT</span><span class="w"> </span><span class="nv">NOT</span><span class="w"> </span><span class="nv">AUTHORISED</span>

<span class="w">      </span><span class="m">1</span><span class="o">↑</span><span class="nf">⎕AI</span>
<span class="m">52</span>
</code></pre></div>
</article>
<article id="primitive-functions-add">
<div class="heading-container"><h3 class="heading" id="primitive-functions-add-header">Add</h3><div class="command">R←X+Y</div></div>
<p><code>Y</code> must be numeric.  <code>X</code> must be numeric.  <code>R</code> is the arithmetic sum of <code>X</code> and <code>Y</code>.  <code>R</code> is numeric. This function is also known as Plus.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">4</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3</span><span class="o">,⊂</span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">4</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>

<span class="w">      </span><span class="m">1J1</span><span class="w"> </span><span class="m">2J2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">3J3</span>
<span class="m">4J4</span><span class="w"> </span><span class="m">5J5</span>

<span class="w">      </span><span class="m">¯5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">4J4</span><span class="w"> </span><span class="m">5J5</span>
<span class="m">¯1J4</span><span class="w"> </span><span class="m">0J5</span>
</code></pre></div>
</article>
<article id="primitive-functions-and-lowest-common-multiple">
<div class="heading-container"><h3 class="heading" id="primitive-functions-and-lowest-common-multiple-header">And, Lowest Common Multiple</h3><div class="command">R←X^Y</div></div>
<h5>Case 1: <code>X</code> and <code>Y</code> are Boolean</h5>
<p><code>R</code> is Boolean is determined as follows:
<div class="highlight"><pre><span></span><code><span class="w">             </span><span class="nv">X</span><span class="w">   </span><span class="nv">Y</span><span class="w">     </span><span class="nv">R</span>

<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">1</span>
</code></pre></div></p>
<p>Note that the ASCII caret (<code>^</code>) will also be interpreted as an APL <strong>And</strong> (<code>^</code>).</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">^</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<h5>Case 2: Either or both X and Y are numeric (non-Boolean)</h5>
<p><code>R</code> is the lowest common multiple of <code>X</code> and <code>Y</code>. Note that in this case, <code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">15</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="err">^</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span>
<span class="m">105</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">∧</span><span class="w"> </span><span class="m">0j1</span><span class="w"> </span><span class="m">1j2</span><span class="w"> </span><span class="m">2j3</span>
<span class="m">0J2</span><span class="w"> </span><span class="m">3J6</span><span class="w"> </span><span class="m">8J12</span>

<span class="w">      </span><span class="m">2j2</span><span class="w"> </span><span class="m">2j4</span><span class="w"> </span><span class="o">∧</span><span class="w"> </span><span class="m">5j5</span><span class="w"> </span><span class="m">4j4</span>
<span class="m">10J10</span><span class="w"> </span><span class="m">¯4J12</span>
</code></pre></div>
</article>
<article id="primitive-functions-assignment">
<div class="heading-container"><h3 class="heading" id="primitive-functions-assignment-header">Assignment</h3><div class="command">X←Y</div></div>
<p>Assignment  allocates the result of the expression <code>Y</code> to the <em>name</em> or <em>names</em> in <code>X</code>.</p>
<p>If <code>Y</code> is an array expression, <code>X</code> must contain one or more names which are variables, system variables, or are undefined. Following assignment, the name(s) in <code>X</code> become variable(s) with value(s) taken from the result of the expression <code>Y</code>.</p>
<p>If <code>X</code> contains a single name, the variable assumes the value of <code>Y</code>. If <code>X</code> contains multiple names then <code>Y</code> can be a single-item array of any rank (including a scalar) or  a vector. If <code>Y</code> is a single-item array, the scalar value <code>⊃Y</code> is assigned to all names in <code>X</code>. Otherwise, each element of <code>Y</code> is assigned to the corresponding name in <code>X</code>.  Although not mandatory, Dyalog recommends that the names in <code>X</code> are enclosed in parentheses to reduce potential ambiguity in assignment statements.</p>
<p>The assignment arrow (or specification arrow) is often read as 'Is' or 'Gets'.</p>
<h5>Examples of single assignment</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="m">2.3</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">2.3</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="o">⍳</span><span class="m">3</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<h5>Examples of multiple assignment using parentheses</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="p">)</span><span class="kd">←</span><span class="m">2</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">B</span>
<span class="m">2</span>

<span class="w">      </span><span class="p">(</span><span class="nv">P</span><span class="w"> </span><span class="nf">⎕IO</span><span class="w"> </span><span class="nv">Q</span><span class="p">)</span><span class="kd">←</span><span class="s1">'TEXT'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="w">      </span><span class="nv">P</span>
<span class="nv">TEXT</span>
<span class="w">      </span><span class="nf">⎕IO</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">Q</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<h5>Example of multiple assignment without parentheses</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">year</span><span class="w"> </span><span class="nv">month</span><span class="w"> </span><span class="nv">day</span><span class="kd">←</span><span class="m">2017</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">24</span>
<span class="w">      </span><span class="nv">day</span>
<span class="m">24</span>
<span class="w">      </span><span class="nv">month</span>
<span class="m">5</span>
<span class="w">      </span><span class="nv">year</span>
<span class="m">2017</span><span class="w">            </span>
</code></pre></div>
<p>Implementation note: erroneous expressions such as <code>var 3←5</code> will result in <code>5</code> being assigned to <code>var</code>, even though a <code>SYNTAX ERROR</code> will be generated. In the case of <code>(var 3)←5</code> no assignment will be made.</p>
<p>Pass-through assignments are permitted. The value of <code>Y</code> is carried through each assignment:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">I</span><span class="kd">←</span><span class="nv">J</span><span class="kd">←</span><span class="nv">K</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="nv">I</span><span class="o">,</span><span class="nv">J</span><span class="o">,</span><span class="nv">K</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Function Assignment</h5>
<p>If <code>Y</code> is a function expression, <code>X</code> must be a single name which is either undefined, or is the name of an existing function or defined operator. <code>X</code> may not be the name of a system function, or a primitive symbol.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">PLUS</span><span class="kd">←</span><span class="o">+</span>
<span class="w">      </span><span class="nv">PLUS</span>
<span class="o">+</span>

<span class="w">      </span><span class="nv">SUM</span><span class="kd">←</span><span class="o">+</span><span class="na">/</span>
<span class="w">      </span><span class="nv">SUM</span>
<span class="o">+</span><span class="na">/</span>

<span class="w">      </span><span class="nv">MEAN</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷⍴</span><span class="bp">⍵</span><span class="kt">}</span>
</code></pre></div>
<h5>Namespace Reference Assignment</h5>
<p>If an expression evaluates to a namespace reference, or <em>ref</em>, you may assign it to a name. A name assigned to a simple scalar <em>ref</em>, has name class 9, whereas one assigned to an <em>array</em> containing <em>refs</em> has name class 2.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'f1'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="s1">'ns1'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>

<span class="w">      </span><span class="nv">N</span><span class="kd">←</span><span class="nv">ns1</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'N'</span><span class="w">           </span><span class="c1">⍝ name class of a scalar ref</span>
<span class="m">9</span>
<span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nv">f1</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'F'</span><span class="w">           </span><span class="c1">⍝ name class of a scalar ref</span>
<span class="m">9</span>
<span class="w">      </span><span class="nv">refs</span><span class="kd">←</span><span class="nv">N</span><span class="w"> </span><span class="nv">F</span><span class="w">         </span><span class="c1">⍝ vector of refs.</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'refs'</span><span class="w">        </span><span class="c1">⍝ nameclass of vector.</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">F2</span><span class="kd">←</span><span class="m">2</span><span class="o">⊃</span><span class="nv">refs</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'F2'</span>
<span class="m">9</span>
</code></pre></div></p>
<h5>Re-Assignment</h5>
<p>A name that already exists may be assigned a new value if the assignment will not alter its name class, or will change it from 2 to 9 or vice versa. The table of permitted re-assignments is as follows:</p>
<table>
<thead>
<tr>
<th> </th>
<th>Ref</th>
<th>Variable</th>
<th>Function</th>
<th>Operator</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ref</td>
<td>Yes</td>
<td>Yes</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Variable</td>
<td>Yes</td>
<td>Yes</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Function</td>
<td> </td>
<td> </td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Operator</td>
<td> </td>
<td> </td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</article>
<article id="primitive-functions-assignment-indexed">
<div class="heading-container"><h3 class="heading" id="primitive-functions-assignment-indexed-header">Assignment (Indexed)</h3><div class="command">{R}←X[I]←Y</div></div>
<p>Indexed Assignment is the Assignment function modified by the Indexing function.  The phrase <code>[I]←</code> is treated as the function for descriptive purposes.</p>
<p><code>Y</code> may be any array.  <code>X</code> may be the <em>name</em> of any array or a selection from a named array <code>(EXP X)[I]←Y</code>, see <a class="internal-link" href="#primitive-functions-assignment-selective">Section 1.4.7</a>.  <code>I</code> must be a valid index specification.  The shape of <code>Y</code> must conform with the shape (implied) of the indexed structure defined by <code>I</code>.  If <code>Y</code> is a scalar or a 1-element vector it will be extended to conform.  A side effect of Indexed Assignment is to change the value of the indexed elements of <code>X</code>.</p>
<p><code>R</code> is the value of <code>Y</code>.  If the result is not explicitly assigned or used it is suppressed.</p>
<p><code>⎕IO</code> is an implicit argument of Indexed Assignment.</p>
<p>Three forms of indexing are permitted.</p>
<h5>Simple Indexed Assignment</h5>
<p>For vector <code>X</code>, <code>I</code> is a simple integer array whose items are from the set <code>⍳⍴R</code>.  Elements of <code>X</code> identified by index positions <code>I</code> are replaced by corresponding elements of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">A</span><span class="kd">←</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="m">10</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<p>The last-most element of <code>Y</code> is assigned when an index is repeated in <code>I</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="kd">←</span><span class="m">100</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>For matrix <code>X</code>, <code>I</code> is composed of two simple integer arrays separated by the semicolon character (<code>;</code>).  The arrays select indices from the rows and columns of <code>X</code> respectively.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">B</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'REDSUN'</span>
<span class="nv">RED</span>
<span class="nv">SUN</span>

<span class="w">      </span><span class="nv">B</span><span class="sr">[</span><span class="m">2</span><span class="sr">;</span><span class="m">2</span><span class="sr">]</span><span class="kd">←</span><span class="s1">'O'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">B</span>
<span class="nv">RED</span>
<span class="nv">SON</span>
</code></pre></div>
<p>For higher-rank array <code>X</code>, <code>I</code> is a series of simple integer arrays with adjacent arrays separated by a single semicolon character (<code>;</code>).  Each array selects indices from an axis of <code>X</code> taken in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">C</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span>
<span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>

<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span>
<span class="m">24</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">26</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="m">1</span><span class="sr">;</span><span class="m">1</span><span class="sr">;</span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="m">103</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">103</span>
<span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w">  </span><span class="m">16</span>

<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w">  </span><span class="m">23</span>
<span class="m">24</span><span class="w"> </span><span class="m">25</span><span class="w">  </span><span class="m">26</span>
</code></pre></div>
<p>An indexing array may be ELIDED.  That is, if an indexing array is omitted from the <code>K</code>th axis, the indexing vector <code>⍳(⍴X)[K]</code> is implied:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">C</span><span class="sr">[;</span><span class="m">1</span><span class="sr">;</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">112</span><span class="w"> </span><span class="m">113</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="m">123</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">11</span><span class="w"> </span><span class="m">112</span><span class="w"> </span><span class="m">113</span>
<span class="m">14</span><span class="w">  </span><span class="m">15</span><span class="w">  </span><span class="m">16</span>

<span class="m">21</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="m">123</span>
<span class="m">24</span><span class="w">  </span><span class="m">25</span><span class="w">  </span><span class="m">26</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[;;]</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Choose Indexed Assignment</h5>
<p>The index specification <code>I</code> is a non-simple integer array. Each item identifies a single element of <code>X</code> by a set of indices with one element per axis of <code>X</code> in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">C</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="o">⊂</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span><span class="kd">←</span><span class="m">101</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">101</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="sr">]</span><span class="kd">←</span><span class="m">102</span><span class="w"> </span><span class="m">203</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">101</span><span class="w"> </span><span class="m">102</span><span class="w">  </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="w"> </span><span class="m">21</span><span class="w">  </span><span class="m">22</span><span class="w"> </span><span class="m">203</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="sr">]</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">103</span><span class="w"> </span><span class="m">204</span><span class="w"> </span><span class="m">201</span><span class="w"> </span><span class="m">104</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="m">101</span><span class="w"> </span><span class="m">102</span><span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="m">104</span>
<span class="m">201</span><span class="w">  </span><span class="m">22</span><span class="w"> </span><span class="m">203</span><span class="w"> </span><span class="m">204</span>
</code></pre></div>
<p>A scalar may be indexed by the enclosed empty vector:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">S</span>
<span class="m">10</span>
<span class="w">      </span><span class="nv">S</span><span class="sr">[</span><span class="o">⊂⍳</span><span class="m">0</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'VECTOR'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">S</span>
<span class="w"> </span><span class="nv">VECTOR</span><span class="w"> </span>
<span class="w">      </span><span class="nv">S</span><span class="sr">[</span><span class="o">⊂⍳</span><span class="m">0</span><span class="sr">]</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">S</span>
<span class="m">5</span>
</code></pre></div></p>
<p>Choose Indexed Assignment may be used very effectively in conjunction with Index Generator (<code>⍳</code>) and Structural functions in order to assign into an array:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">C</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="o">⍳⍴</span><span class="nv">C</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">4</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">⍉⍳⍴</span><span class="nv">C</span><span class="sr">]</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">21</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="nv">C</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">¯1</span><span class="o">↑⍳⍴</span><span class="nv">C</span><span class="sr">]</span><span class="kd">←</span><span class="m">99</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">C</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">99</span>
<span class="m">21</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">99</span>
</code></pre></div></p>
<h5>Reach Indexed Assignment</h5>
<p>The index specification <code>I</code> is a non-simple integer array, each of whose items reach down to a nested element of <code>X</code>.  The items of an item of <code>I</code> are simple vectors (or scalars) forming sets of indices that index arrays at successive levels of <code>X</code> starting at the top-most level.  A set of indices has one element per axis at the respective level of nesting of <code>X</code> in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">D</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="s1">'SMITH'</span><span class="w"> </span><span class="s1">'JONES'</span><span class="w"> </span><span class="s1">'SAM'</span><span class="w"> </span><span class="s1">'BILL'</span><span class="p">)</span>

<span class="w">      </span><span class="nv">D</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="nv">SMITH</span><span class="w">  </span><span class="nv">JONES</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="nv">SAM</span><span class="w">    </span><span class="nv">BILL</span>

<span class="w">      </span><span class="o">≡</span><span class="nv">J</span><span class="kd">←</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="m">¯3</span>

<span class="w">      </span><span class="nv">D</span><span class="sr">[</span><span class="nv">J</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'WILLIAMS'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">D</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="nv">SMITH</span><span class="w">  </span><span class="nv">WILLIAMS</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="nv">SAM</span><span class="w">    </span><span class="nv">BILL</span>

<span class="w">      </span><span class="nv">D</span><span class="sr">[</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">))(</span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="sr">]</span><span class="kd">←</span><span class="m">10</span><span class="w"> </span><span class="s1">'W'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">D</span>
<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="nv">SMITH</span><span class="w">  </span><span class="nv">WILLIAMS</span>
<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="nv">SAM</span><span class="w">    </span><span class="nv">WILL</span>

<span class="w">      </span><span class="nv">E</span>
<span class="w"> </span><span class="nv">GREEN</span><span class="w">  </span><span class="nv">YELLOW</span><span class="w">  </span><span class="nv">RED</span>

<span class="w">      </span><span class="nv">E</span><span class="sr">[</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span><span class="kd">←</span><span class="s1">'M'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">E</span>
<span class="w"> </span><span class="nv">GREEN</span><span class="w">  </span><span class="nv">MELLOW</span><span class="w">  </span><span class="nv">RED</span>
</code></pre></div>
<p>The context of indexing is important.  In the last example, the indexing method is determined to be Reach rather than Choose since <code>E</code> is a vector, not a matrix as would be required for Choose.  Observe that:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">⊂</span><span class="p">(</span><span class="o">⊂</span><span class="m">2</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="o">⊂</span><span class="m">1</span><span class="p">)</span>
</code></pre></div></p>
<p>Note that for any array <code>A</code>, <code>A[⊂⍬]</code> represents a scalar quantity, which is the whole of <code>A</code>, so:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="m">5</span><span class="o">⍴</span><span class="m">0</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="o">⊂</span><span class="no">⍬</span><span class="sr">]</span><span class="kd">←</span><span class="m">1</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span>
</code></pre></div></p>
<h5>Combined Indexed and Selective Assignment</h5>
<p>Instead of <code>X</code> being a name, it may be a selection from a named array, and the statement is of the form <code>(EXP X)[I]←Y</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'Hello'</span><span class="w"> </span><span class="s1">'World'</span>
<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="o">↑</span><span class="na">¨</span><span class="nv">MAT</span><span class="p">)</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">;]</span><span class="kd">←</span><span class="s1">'#'</span>
<span class="w">      </span><span class="nv">MAT</span>
<span class="w"> </span><span class="c1">##llo  ##rld  ##llo </span>
<span class="w"> </span><span class="c1">##rld  ##llo  ##rld </span>
<span class="w"> </span><span class="nv">Hello</span><span class="w">  </span><span class="nv">World</span><span class="w">  </span><span class="nv">Hello</span><span class="w"> </span>
<span class="w"> </span><span class="nv">World</span><span class="w">  </span><span class="nv">Hello</span><span class="w">  </span><span class="nv">World</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'Hello'</span><span class="w"> </span><span class="s1">'World'</span>
<span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ ∊ is Enlist</span>
<span class="w">     </span><span class="p">(</span><span class="o">∊</span><span class="nv">MAT</span><span class="p">)</span><span class="sr">[</span><span class="m">2</span><span class="o">×⍳⌊</span><span class="m">0.5</span><span class="o">×⍴∊</span><span class="nv">MAT</span><span class="sr">]</span><span class="kd">←</span><span class="s1">'#'</span>
<span class="w">      </span><span class="nv">MAT</span>
<span class="w"> </span><span class="nv">H</span><span class="c1">#l#o  #o#l#  H#l#o </span>
<span class="w"> </span><span class="c1">#o#l#  H#l#o  #o#l# </span>
<span class="w"> </span><span class="nv">H</span><span class="c1">#l#o  #o#l#  H#l#o </span>
<span class="w"> </span><span class="c1">#o#l#  H#l#o  #o#l# </span>
</code></pre></div></p>
</article>
<article id="primitive-functions-assignment-selective">
<div class="heading-container"><h3 class="heading" id="primitive-functions-assignment-selective-header">Assignment (Selective)</h3><div class="command">(EXP X)←Y</div></div>
<p><code>X</code> is the <em>name</em> of a variable in the workspace, possibly modified by the indexing function <code>(EXP X[I])←Y</code>, see <a class="internal-link" href="#primitive-functions-assignment-indexed">Section 1.4.6</a>.  <code>EXP</code> is an expression that <strong>selects</strong> elements of <code>X</code>.  <code>Y</code> is an array expression. The result of the expression <code>Y</code> is allocated to the elements of <code>X</code> selected by <code>EXP</code>. Note that <code>X</code> may refer to a single name only.</p>
<p>The following functions may appear in the selection expression. Where appropriate these functions may be used with axis <code>[]</code> and with the Each operator <code>¨</code>.</p>

<table id="Selective_Assignment_Functions"><caption style="caption-side:top"><strong>Table 1-8:</strong> Functions for Selective Assignment</caption>
<tbody>
<tr>
<td><code>↑</code></td>
<td>Take</td>
</tr>
<tr>
<td><code>↓</code></td>
<td>Drop</td>
</tr>
<tr>
<td><code>,</code></td>
<td>Ravel</td>
</tr>
<tr>
<td><code>⍪</code></td>
<td>Table</td>
</tr>
<tr>
<td><code>⌽⊖</code></td>
<td>Reverse, Rotate</td>
</tr>
<tr>
<td><code>⍴</code></td>
<td>Reshape</td>
</tr>
<tr>
<td><code>⊃</code></td>
<td>Disclose, Pick</td>
</tr>
<tr>
<td><code>⍉</code></td>
<td>Transpose (Monadic and Dyadic)</td>
</tr>
<tr>
<td><code>/⌿</code></td>
<td>Replicate</td>
</tr>
<tr>
<td><code>\⍀</code></td>
<td>Expand</td>
</tr>
<tr>
<td><code>⌷</code></td>
<td>Index</td>
</tr>
<tr>
<td><code>∊</code></td>
<td>Enlist ( <code>⎕ML≥1</code> )</td>
</tr>
</tbody>
</table>
<p>Note: Mix and Split (monadic <code>↑</code> and <code>↓</code>), Type (monadic <code>∊</code> when <code>⎕ML&lt;1</code>) and Membership (dyadic <code>∊</code>) may not be used in the selection expression.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'HELLO'</span>
<span class="w">      </span><span class="p">((</span><span class="nv">A</span><span class="o">∊</span><span class="s1">'AEIOU'</span><span class="p">)</span><span class="na">/</span><span class="nv">A</span><span class="p">)</span><span class="kd">←</span><span class="s1">'*'</span>

<span class="w">      </span><span class="nv">A</span>
<span class="nv">H</span><span class="o">*</span><span class="nv">LL</span><span class="o">*</span>

<span class="w">      </span><span class="nv">Z</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="w">      </span><span class="p">(</span><span class="m">5</span><span class="o">↑,</span><span class="nv">Z</span><span class="p">)</span><span class="kd">←</span><span class="m">0</span>

<span class="w">      </span><span class="nv">Z</span>
<span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">0</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">9</span>
<span class="w">      </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">⍉</span><span class="nv">MAT</span><span class="p">)</span><span class="kd">←</span><span class="m">0</span>

<span class="w">      </span><span class="nv">MAT</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">6</span>
<span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">1</span><span class="c1">⍝ so ∊ is Enlist</span>
<span class="w">      </span><span class="nv">names</span><span class="kd">←</span><span class="s1">'Andy'</span><span class="w"> </span><span class="s1">'Karen'</span><span class="w"> </span><span class="s1">'Liam'</span>
<span class="w">      </span><span class="p">((</span><span class="s1">'a'</span><span class="o">=∊</span><span class="nv">names</span><span class="p">)</span><span class="na">/</span><span class="o">∊</span><span class="nv">names</span><span class="p">)</span><span class="kd">←</span><span class="s1">'*'</span>
<span class="w">      </span><span class="nv">names</span>
<span class="w"> </span><span class="nv">Andy</span><span class="w">  </span><span class="nv">K</span><span class="o">*</span><span class="nv">ren</span><span class="w">  </span><span class="nv">Li</span><span class="o">*</span><span class="nv">m</span>
</code></pre></div></p>
<h5>Each Operator</h5>
<p>The functions listed in the table above may also be used with the Each Operator <code>¨</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'HELLO'</span><span class="w"> </span><span class="s1">'WORLD'</span>
<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="o">↑</span><span class="na">¨</span><span class="nv">A</span><span class="p">)</span><span class="kd">←</span><span class="s1">'*'</span>
<span class="w">      </span><span class="nv">A</span>
<span class="w"> </span><span class="o">**</span><span class="nv">LLO</span><span class="w">  </span><span class="o">**</span><span class="nv">RLD</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'HELLO'</span><span class="w"> </span><span class="s1">'WORLD'</span>
<span class="w">      </span><span class="p">((</span><span class="nv">A</span><span class="o">=</span><span class="s1">'O'</span><span class="p">)</span><span class="na">/¨</span><span class="nv">A</span><span class="p">)</span><span class="kd">←</span><span class="s1">'*'</span>
<span class="w">      </span><span class="nv">A</span>
<span class="w"> </span><span class="nv">HELL</span><span class="o">*</span><span class="w">  </span><span class="nv">W</span><span class="o">*</span><span class="nv">RLD</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'HELLO'</span><span class="w"> </span><span class="s1">'WORLD'</span>
<span class="w">      </span><span class="p">((</span><span class="nv">A</span><span class="o">∊</span><span class="na">¨</span><span class="o">⊂</span><span class="s1">'LO'</span><span class="p">)</span><span class="na">/¨</span><span class="nv">A</span><span class="p">)</span><span class="kd">←</span><span class="s1">'*'</span>
<span class="w">      </span><span class="nv">A</span>
<span class="w"> </span><span class="nv">HE</span><span class="o">***</span><span class="w">  </span><span class="nv">W</span><span class="o">*</span><span class="nv">R</span><span class="o">*</span><span class="nv">D</span>
</code></pre></div>
<h5>Bracket Indexing</h5>
<p>Bracket indexing may also be applied to the expression on the left of the assignment arrow.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'Hello'</span><span class="w"> </span><span class="s1">'World'</span>
<span class="w">      </span><span class="p">(</span><span class="m">¯2</span><span class="o">↑</span><span class="na">¨</span><span class="nv">MAT</span><span class="sr">[;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="p">)</span><span class="kd">←</span><span class="s1">'$'</span>
<span class="w">      </span><span class="nv">MAT</span>
<span class="w"> </span><span class="nv">Hel</span><span class="err">$$</span><span class="w">  </span><span class="nv">World</span><span class="w">  </span><span class="nv">Hel</span><span class="err">$$</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Wor</span><span class="err">$$</span><span class="w">  </span><span class="nv">Hello</span><span class="w">  </span><span class="nv">Wor</span><span class="err">$$</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Hel</span><span class="err">$$</span><span class="w">  </span><span class="nv">World</span><span class="w">  </span><span class="nv">Hel</span><span class="err">$$</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Wor</span><span class="err">$$</span><span class="w">  </span><span class="nv">Hello</span><span class="w">  </span><span class="nv">Wor</span><span class="err">$$</span><span class="w"> </span>
</code></pre></div>
</article>
<article id="primitive-functions-binomial">
<div class="heading-container"><h3 class="heading" id="primitive-functions-binomial-header">Binomial</h3><div class="command">R←X!Y</div></div>
<p><code>X</code> and <code>Y</code> may be any numbers except that if <code>Y</code> is a negative integer then <code>X</code> must be an integer. <code>R</code> is numeric. An element of <code>R</code> is integer if corresponding elements of <code>X</code> and <code>Y</code> are integers.</p>
<p>Binomial is defined in terms of the function Factorial:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="o">!</span><span class="nv">Y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nv">Y</span><span class="p">)</span><span class="o">÷</span><span class="p">(</span><span class="o">!</span><span class="nv">X</span><span class="p">)</span><span class="o">×!</span><span class="nv">Y</span><span class="o">-</span><span class="nv">X</span>
</code></pre></div></p>
<p>Results are derived smoothly from the Beta function:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Beta</span><span class="p">(</span><span class="nv">X</span><span class="o">,</span><span class="nv">Y</span><span class="p">)</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">÷</span><span class="nv">Y</span><span class="o">×</span><span class="p">(</span><span class="nv">X</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="o">!</span><span class="nv">X</span><span class="o">+</span><span class="nv">Y</span><span class="o">-</span><span class="m">1</span>
</code></pre></div></p>
<p>For positive integer arguments, <code>R</code> is the number of selections of <code>X</code> things from <code>Y</code> things.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1.2</span><span class="w"> </span><span class="m">1.4</span><span class="w"> </span><span class="m">1.6</span><span class="w"> </span><span class="m">1.8</span><span class="w"> </span><span class="m">2</span><span class="o">!</span><span class="m">5</span>
<span class="m">5</span><span class="w"> </span><span class="m">6.105689248</span><span class="w"> </span><span class="m">7.219424686</span><span class="w"> </span><span class="m">8.281104786</span><span class="w"> </span><span class="m">9.227916704</span><span class="w"> </span><span class="m">10</span>

<span class="w">      </span><span class="m">2</span><span class="o">!</span><span class="m">3j2</span>
<span class="m">1J5</span>
</code></pre></div>
</article>
<article id="primitive-functions-branch">
<div class="heading-container"><h3 class="heading" id="primitive-functions-branch-header">Branch</h3><div class="command">→Y</div></div>
<p><code>Y</code> may be a scalar or vector which, if not empty, has a simple numeric scalar as its first element.  The function has no explicit result.  It is used to modify the normal sequence of execution of expressions or to resume execution after a statement has been interrupted. Branch is not in the function domain of operators.</p>
<p>The following distinct usages of the branch function occur:</p>
<table>
<thead>
<tr>
<th> </th>
<th>Entered in a Statement in a Defined Function</th>
<th>Entered in Immediate Execution Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>→LINE</code></td>
<td>Continue with the specific line</td>
<td>Restart execution at the specific line of the most recently suspended function</td>
</tr>
<tr>
<td><code>→⍳0</code></td>
<td>Continue with the next expression</td>
<td>No effect</td>
</tr>
</tbody>
</table>
<p>In a defined function, if <code>Y</code> is non-empty then the first element in <code>Y</code> specifies a statement line in the defined function to be executed next.  If the line does not exist, then execution of the function is terminated.  For this purpose, line 0 does not exist.  (Note that statement line numbers are independent of the index origin <code>⎕IO</code>).</p>
<p>If <code>Y</code> is empty, the branch function has no effect.  The next expression is executed on the same line, if any, or on the next line if not.  If there is no following line, the function is terminated.</p>
<p>The <code>:GoTo</code> statement may be used in place of Branch in a defined function.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">TEST</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="m">1</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="m">4</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="m">3</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="m">4</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">TEST</span>
<span class="m">1</span>
<span class="m">4</span>
</code></pre></div>
<p>In general it is better to branch to a LABEL than to a line number.  A label occurs in a statement followed by a colon and is assigned the value of the statement line number when the function is defined.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">TEST</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="m">1</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">FOUR</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="m">3</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">FOUR</span><span class="bp">:</span><span class="m">4</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<p>The previous examples illustrate unconditional branching. There are numerous APL idioms which result in conditional branching. Some popular idioms are identified in the following table:</p>
<table>
<thead>
<tr>
<th>Branch Expression</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>→TEST/L1</code></td>
<td>Branches to label <code>L1</code> if <code>TEST</code> results in 1 but not if <code>TEST</code> results in 0.</td>
</tr>
<tr>
<td><code>→TEST⍴L1</code></td>
<td>Similar to above.</td>
</tr>
<tr>
<td><code>→TEST↑L1</code></td>
<td>Similar to above.</td>
</tr>
<tr>
<td><code>→L1⍴⍨TEST</code></td>
<td>Similar to above.</td>
</tr>
<tr>
<td><code>→L1⌈⍳TEST</code></td>
<td>Similar to above but only if <code>⎕IO←→1</code> .</td>
</tr>
<tr>
<td><code>→L1×⍳TEST</code></td>
<td>Similar to above but only if <code>⎕IO←→1</code> .</td>
</tr>
<tr>
<td><code>→(L1,L2,L3)[N]</code></td>
<td>Unconditional branch to a selected label.</td>
</tr>
<tr>
<td><code>→(T1,T2,T3)/L1,L2,L3</code></td>
<td>Branches to the first selected label dependent on tests <code>T1</code> , <code>T2</code> , <code>T3</code> . If all tests result in 0, there is no branch.</td>
</tr>
<tr>
<td><code>→N⌽L1,L2,L3</code></td>
<td>Unconditional branch to the first label after rotation.</td>
</tr>
</tbody>
</table>
<p>A branch expression may occur within a statement including <code>⋄</code> separators:
<div class="highlight"><pre><span></span><code><span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">   </span><span class="kd">→</span><span class="nv">NEXT</span><span class="o">⍴</span><span class="na">⍨</span><span class="nv">TEST</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">A</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">END</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">  </span><span class="nv">NEXT</span><span class="bp">:</span>
</code></pre></div></p>
<p>In this example, the expressions <code>'A←A+1'</code> and <code>'→END'</code> are executed only if <code>TEST</code> returns the value 1.  Otherwise control branches to label <code>NEXT</code>.</p>
<p>In immediate execution mode, the branch function permits execution to be continued within the most recently suspended function, if any, in the state indicator.  If the state indicator is empty, or if the argument <code>Y</code> is the empty vector, the branch expression has no effect.  If a statement line is specified which does not exist, the function is terminated.  Otherwise, execution is restarted from the beginning of the specified statement line in the most recently suspended function.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">F</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="m">1</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="m">2</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="m">3</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="s1">'F'</span>
<span class="w">      </span><span class="nv">F</span>
<span class="m">1</span>

<span class="nv">F</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span>
<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.F[2]*</span>
<span class="w">      </span><span class="kd">→</span><span class="m">2</span>
<span class="m">2</span>
<span class="m">3</span>
</code></pre></div>
<p>The system constant <code>⎕LC</code> returns a vector of the line numbers of statement lines in the state indicator, starting with that in the most recently suspended function.  It is convenient to restart execution in a suspended state by the expression:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-catenate-laminate">
<div class="heading-container"><h3 class="heading" id="primitive-functions-catenate-laminate-header">Catenate/Laminate</h3><div class="command">R←X,[K]Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> may be any array.  The axis specification is optional.  If specified, <code>K</code> must be a numeric scalar or 1-element vector which may have a fractional value.  If not specified, the last axis is implied.</p>
<p>The form <code>R←X⍪Y</code> may be used to imply catenation along the first axis.</p>
<p>Two cases of the function catenate  are permitted:</p>
<ol>
<li>With an integer axis specification, or implied axis specification.</li>
<li>With a fractional axis specification, also called <strong>laminate</strong>. </li>
</ol>
<h5>Catenation with Integer or Implied Axis Specification</h5>
<p>The arrays <code>X</code> and <code>Y</code> are joined along the required axis to form array <code>R</code>.  A scalar is extended to the shape of the other argument except that the required axis is restricted to a unit dimension.  <code>X</code> and <code>Y</code> must have the same shape (after extension) except along the required axis, or one of the arguments may have rank one less than the other, provided that their shapes conform to the prior rule after augmenting the array of lower rank to have a unit dimension along the required axis. The rank of <code>R</code> is the greater of the ranks of the arguments, but not less than 1.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'FUR'</span><span class="o">,</span><span class="s1">'LONG'</span>
<span class="nv">FURLONG</span>

<span class="w">      </span><span class="m">1</span><span class="o">,</span><span class="m">2</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'THISWEEK'</span><span class="p">)</span><span class="o">⍪</span><span class="s1">'='</span>
<span class="nv">THIS</span>
<span class="nv">WEEK</span>
<span class="o">====</span>

<span class="w">      </span><span class="nv">S</span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">+</span><span class="na">⌿</span><span class="nv">S</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span>
</code></pre></div>
<p>If, after extension, exactly one of <code>X</code> and <code>Y</code> have a length of zero along the joined axis, then the data type of <code>R</code> will be that of the argument with a non-zero length. Otherwise, the data type of <code>R</code> will be that of <code>X</code>.</p>
<h5>Lamination with Fractional Axis Specification</h5>
<p>The arrays <code>X</code> and <code>Y</code> are joined along a new axis created before the <code>⌈K</code>th axis.  The new axis has a length of 2.  <code>K</code> must exceed <code>⎕IO</code> (the index origin) minus 1, and <code>K</code> must be less than <code>⎕IO</code> plus the greater of the ranks of <code>X</code> and <code>Y</code>.  A scalar  argument is extended to the shape of the other argument.  Otherwise <code>X</code> and <code>Y</code> must have the same shape.</p>
<p>The rank of <code>R</code> is one plus the greater of the ranks of <code>X</code> and <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'HEADING'</span><span class="o">,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="s1">'-'</span>
<span class="nv">HEADING</span>
<span class="o">-------</span>

<span class="w">      </span><span class="s1">'NIGHT'</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="s1">'*'</span>
<span class="nv">N</span><span class="o">*</span>
<span class="nv">I</span><span class="o">*</span>
<span class="nv">G</span><span class="o">*</span>
<span class="nv">H</span><span class="o">*</span>
<span class="nv">T</span><span class="o">*</span><span class="w"> </span>
<span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="s1">'HEADING'</span><span class="o">,</span><span class="sr">[</span><span class="m">¯0.5</span><span class="sr">]</span><span class="s1">'-'</span>
<span class="nv">HEADING</span>
<span class="o">-------</span>
</code></pre></div>
</article>
<article id="primitive-functions-catenate-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-catenate-first-header">Catenate First</h3><div class="command">R←X⍪[K]Y</div></div>
<p>The form <code>R←X⍪Y</code> implies catenation along the first axis whereas the form <code>R←X,Y</code> implies catenation along the last axis (columns).  See <a class="internal-link" href="#primitive-functions-catenate-laminate">Section 1.4.10</a>.</p>
</article>
<article id="primitive-functions-ceiling">
<div class="heading-container"><h3 class="heading" id="primitive-functions-ceiling-header">Ceiling</h3><div class="command">R←⌈Y</div></div>
<p>Ceiling is defined in terms of Floor as <code>⌈Y←→-⌊-Y</code></p>
<p><code>Y</code> must be numeric.</p>
<p>If an element of <code>Y</code> is real, the corresponding element of <code>R</code> is the least integer greater than or equal to the value of <code>Y</code>.</p>
<p>If an element of <code>Y</code> is complex, the corresponding element of <code>R</code> depends on the relationship between the real and imaginary parts of the numbers in <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌈</span><span class="m">¯2.3</span><span class="w">  </span><span class="m">0.1</span><span class="w">  </span><span class="m">100</span><span class="w">  </span><span class="m">3.3</span>
<span class="m">¯2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="o">⌈</span><span class="m">1.2j2.5</span><span class="w"> </span><span class="m">1.2j¯2.5</span>
<span class="m">1J3</span><span class="w"> </span><span class="m">1J¯2</span>
</code></pre></div>
<p>For further explanation, see <a class="internal-link" href="#primitive-functions-floor">Section 1.4.36</a>.</p>
<p><code>⎕CT</code> is an implied argument of Ceiling.</p>
</article>
<article id="primitive-functions-circular">
<div class="heading-container"><h3 class="heading" id="primitive-functions-circular-header">Circular</h3><div class="command">R←X○Y</div></div>
<p><code>Y</code> must be numeric.  <code>X</code> must be an integer in the range <code>¯12 ≤ X ≤ 12</code>. <code>R</code> is numeric.</p>
<p><code>X</code> determines which of a family of trigonometric, hyperbolic, Pythagorean  and complex functions to apply to <code>Y</code>, from the following table. Note that when <code>Y</code> is complex, <code>a</code> and  <code>b</code> are used to represent its real and imaginary parts, while <code>θ</code> represents its phase.</p>
<table>
<thead>
<tr>
<th>(-X) ○ Y</th>
<th>X</th>
<th>X ○ Y</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(1-Y*2)*.5</code></td>
<td><code>0</code></td>
<td><code>(1-Y*2)*.5</code></td>
</tr>
<tr>
<td><code>Arcsin Y</code></td>
<td><code>1</code></td>
<td><code>Sine Y</code></td>
</tr>
<tr>
<td><code>Arccos Y</code></td>
<td><code>2</code></td>
<td><code>Cosine Y</code></td>
</tr>
<tr>
<td><code>Arctan Y</code></td>
<td><code>3</code></td>
<td><code>Tangent Y</code></td>
</tr>
<tr>
<td><code>Y=¯1:0Y≠¯1:(Y+1)×((Y-1)÷Y+1)*0.5</code></td>
<td><code>4</code></td>
<td><code>(1+Y*2)*.5</code></td>
</tr>
<tr>
<td><code>Arcsinh Y</code></td>
<td><code>5</code></td>
<td><code>Sinh Y</code></td>
</tr>
<tr>
<td><code>Arccosh Y</code></td>
<td><code>6</code></td>
<td><code>Cosh Y</code></td>
</tr>
<tr>
<td><code>Arctanh Y</code></td>
<td><code>7</code></td>
<td><code>Tanh Y</code></td>
</tr>
<tr>
<td><code>-8○Y</code></td>
<td><code>8</code></td>
<td><code>(-1+Y*2)*0.5</code></td>
</tr>
<tr>
<td><code>Y</code></td>
<td><code>9</code></td>
<td><code>a</code></td>
</tr>
<tr>
<td><code>+Y</code></td>
<td><code>10</code></td>
<td><code>|Y</code></td>
</tr>
<tr>
<td><code>Y×0J1</code></td>
<td><code>11</code></td>
<td><code>b</code></td>
</tr>
<tr>
<td><code>*Y×0J1</code></td>
<td><code>12</code></td>
<td><code>θ</code></td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="o">○</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1.570796327</span>

<span class="w">      </span><span class="m">1</span><span class="o">○</span><span class="p">(</span><span class="nv">PI</span><span class="kd">←</span><span class="o">○</span><span class="m">1</span><span class="p">)</span><span class="o">÷</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">0.8660254038</span><span class="w">  </span><span class="m">0.7071067812</span>

<span class="w">      </span><span class="m">2</span><span class="o">○</span><span class="nv">PI</span><span class="o">÷</span><span class="m">3</span>
<span class="m">0.5</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="o">○</span><span class="m">3.5J¯1.2</span>
<span class="m">3.5</span><span class="w"> </span><span class="m">¯1.2</span>

<span class="w">      </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="na">∘.</span><span class="o">○</span><span class="m">3.5J¯1.2</span><span class="w"> </span><span class="m">2J3</span><span class="w"> </span><span class="m">3J4</span>
<span class="w"> </span><span class="m">3.5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">¯1.2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="m">¯4</span><span class="o">○</span><span class="m">¯1</span>
<span class="m">0</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-conjugate">
<div class="heading-container"><h3 class="heading" id="primitive-functions-conjugate-header">Conjugate</h3><div class="command">R←+Y</div></div>
<p>If <code>Y</code> is complex, <code>R</code> is <code>Y</code> with the imaginary part of all elements negated.</p>
<p>If <code>Y</code> is real or non-numeric, <code>R</code> is the same array unchanged, although <code>⊣</code> is faster. See <a class="internal-link" href="#primitive-functions-same">Section 1.4.95</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="m">3j4</span>
<span class="m">3J¯4</span>
<span class="w">      </span><span class="o">+</span><span class="m">1j2</span><span class="w"> </span><span class="m">2j3</span><span class="w"> </span><span class="m">3j4</span>
<span class="m">1J¯2</span><span class="w"> </span><span class="m">2J¯3</span><span class="w"> </span><span class="m">3J¯4</span>

<span class="w">      </span><span class="m">3j4</span><span class="o">++</span><span class="m">3j4</span>
<span class="m">6</span>
<span class="w">      </span><span class="m">3j4</span><span class="o">×+</span><span class="m">3j4</span>
<span class="m">25</span>

<span class="w">      </span><span class="o">+</span><span class="nv">A</span><span class="kd">←</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">+</span><span class="nf">⎕EX</span><span class="s1">'A'</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-deal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-deal-header">Deal</h3><div class="command">R←X?Y</div></div>
<p><code>Y</code> must be a simple scalar or 1-element vector containing a non-negative integer. <code>X</code> must be a simple scalar or 1-element vector containing a non-negative integer and <code>X≤Y</code>.</p>
<p><code>R</code> is an integer  vector obtained by making <code>X</code> random selections from <code>⍳Y</code> without repetition.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">13</span><span class="o">?</span><span class="m">52</span>
<span class="m">7</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="m">13</span><span class="o">?</span><span class="m">52</span>
<span class="m">20</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">37</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="m">40</span>
</code></pre></div>
<p><code>⎕IO</code> and <code>⎕RL</code> are implicit arguments of Deal. A side effect of Deal is to change the value of <code>⎕RL</code>. See <a class="internal-link" href="#system-functions-rl">Section 4.6.124</a>.</p>
</article>
<article id="primitive-functions-decode">
<div class="heading-container"><h3 class="heading" id="primitive-functions-decode-header">Decode</h3><div class="command">R←X⊥Y</div></div>
<p><code>Y</code> must be a simple numeric array.  <code>X</code> must be a simple numeric array.  <code>R</code> is the numeric array which results from
the evaluation of <code>Y</code> in the number system with radix <code>X</code>.</p>
<p><code>X</code> and <code>Y</code> are conformable if the length of the last axis of <code>X</code> is the same as the length of the first axis of <code>Y</code>. A
scalar or 1-element vector is extended to a vector of the required length. If the last axis of <code>X</code> or the first axis
of <code>Y</code> has a length of 1, the array is extended along that axis to conform with the other argument.</p>
<p>The shape of <code>R</code> is the catenation of the shape of <code>X</code> less the last dimension with the shape of <code>Y</code> less the first
dimension. That is:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="m">¯1</span><span class="o">↓⍴</span><span class="nv">X</span><span class="p">)</span><span class="o">,</span><span class="m">1</span><span class="o">↓⍴</span><span class="nv">Y</span>
</code></pre></div>
<p>For vector arguments, each element of <code>X</code> defines the ratio between the units for corresponding pairs of elements
in <code>Y</code>. The first element of <code>X</code> has no effect on the result.</p>
<p>This function is also known as Base Value.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">60</span><span class="w"> </span><span class="m">60</span><span class="o">⊥</span><span class="m">3</span><span class="w"> </span><span class="m">13</span>
<span class="m">193</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">60</span><span class="o">⊥</span><span class="m">3</span><span class="w"> </span><span class="m">13</span>
<span class="m">193</span>

<span class="w">      </span><span class="m">60</span><span class="o">⊥</span><span class="m">3</span><span class="w"> </span><span class="m">13</span>
<span class="m">193</span>

<span class="w">      </span><span class="m">2</span><span class="o">⊥</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">10</span>
</code></pre></div>
<h5>Polynomial Evaluation</h5>
<p>If <code>X</code> is a scalar and <code>Y</code> a vector of length n, decode evaluates the polynomial (Index origin 1):</p>
<math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
<mi>Y</mi>
<mo>[</mo>
<mn>1</mn>
<mo>]</mo>
<msup>
<mrow>
<mi>X</mi>
</mrow>
<mrow>
<mi>n</mi>
<mo>-</mo>
<mn>1</mn>
</mrow>
</msup>
<mo>+</mo>
<mi>Y</mi>
<mo>[</mo>
<mn>2</mn>
<mo>]</mo>
<msup>
<mrow>
<mi>X</mi>
</mrow>
<mrow>
<mi>n</mi>
<mo>-</mo>
<mn>2</mn>
</mrow>
</msup>
<mo>+</mo>
<mn>...</mn>
<mo>+</mo>
<mi>Y</mi>
<mo>[</mo>
<mi>n</mi>
<mo>]</mo>
<msup>
<mrow>
<mi>X</mi>
</mrow>
<mrow>
<mn>0</mn>
</mrow>
</msup>
</mrow>
</math>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="o">⊥</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">26</span>
<span class="w">      </span><span class="m">3</span><span class="o">⊥</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">58</span>
<span class="w">      </span><span class="m">1j1</span><span class="o">⊥</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5J9</span>
</code></pre></div>
<p>For higher-rank array arguments, each of the vectors along the last axis of <code>X</code> is taken as the radix vector for each of
the vectors along the first axis of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="nv">A</span><span class="o">⊥</span><span class="nv">M</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">21</span>
</code></pre></div>
<p>Scalar extension may be applied:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="o">⊥</span><span class="nv">M</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
</code></pre></div>
<p>Extension along a unit axis may be applied:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="m">2</span><span class="w"> </span><span class="m">10</span>
<span class="w"> </span><span class="m">2</span>
<span class="m">10</span>
<span class="w">      </span><span class="nv">A</span><span class="o">⊥</span><span class="nv">M</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">   </span><span class="m">4</span><span class="w">   </span><span class="m">5</span><span class="w">   </span><span class="m">6</span><span class="w">   </span><span class="m">7</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">110</span><span class="w"> </span><span class="m">111</span>
</code></pre></div>
</article>
<article id="primitive-functions-depth">
<div class="heading-container"><h3 class="heading" id="primitive-functions-depth-header">Depth</h3><div class="command">(⎕ML)</div></div>
<p><code>Y</code> may be any array. <code>R</code> is the maximum number of levels of nesting of <code>Y</code>. A simple scalar (rank-0 number, character or namespace-reference) has a depth of 0.</p>
<p>A higher rank array, all of whose items are simple scalars, is termed a <em>simple array</em> and has a depth of 1. An array whose items are not all simple scalars is <em>nested</em> and has a depth 1 greater than that of its most deeply nested item.</p>
<p><code>Y</code> is of <em>uniform depth</em> if it is simple or if all of its items have the same uniform depth.</p>
<p>If <code>⎕ML&lt;2</code> and <code>Y</code> is not of uniform depth then <code>R</code> is negated (therefore, when <code>⎕ML&lt;2</code>, a negative value of <code>R</code> indicates non-uniform depth).</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">≡</span><span class="m">1</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">≡</span><span class="s1">'A'</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">≡</span><span class="s1">'ABC'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">≡</span><span class="m">1</span><span class="w"> </span><span class="s1">'A'</span>
<span class="m">1</span><span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">0</span>

<span class="w">      </span><span class="o">≡</span><span class="nv">A</span><span class="kd">←</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="p">(</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="c1">⍝ Non-uniform array</span>
<span class="m">¯3</span>
<span class="w">      </span><span class="o">≡</span><span class="na">¨</span><span class="nv">A</span><span class="w">          </span><span class="c1">⍝ A[1] is uniform, A[2] is non-uniform</span>
<span class="m">1</span><span class="w"> </span><span class="m">¯2</span>
<span class="w">      </span><span class="o">≡</span><span class="na">¨¨</span><span class="nv">A</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">2</span>

<span class="w">      </span><span class="o">≡</span><span class="nv">A</span>
<span class="m">3</span>
<span class="w">      </span><span class="o">≡</span><span class="na">¨</span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">≡</span><span class="na">¨¨</span><span class="nv">A</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-direction">
<div class="heading-container"><h3 class="heading" id="primitive-functions-direction-header">Direction (Signum)</h3><div class="command">R←×Y</div></div>
<p><code>Y</code> may be any numeric array.</p>
<p>Where an element of <code>Y</code> is real, the corresponding element of <code>R</code> is an integer whose value indicates whether the value is negative (<code>¯1</code>), zero (<code>0</code>) or positive (<code>1</code>).</p>
<p>Where an element of <code>Y</code> is complex, the corresponding element of <code>R</code> is a number with the same phase but with magnitude (absolute value) 1. It is equivalent to <code>Y÷|Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">×</span><span class="m">¯15.3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">101</span>
<span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="o">×</span><span class="m">3j4</span><span class="w"> </span><span class="m">4j5</span>
<span class="m">0.6J0.8</span><span class="w"> </span><span class="m">0.6246950476J0.7808688094</span>

<span class="w">      </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">÷|</span><span class="bp">⍵</span><span class="kt">}</span><span class="m">3j4</span><span class="w"> </span><span class="m">4j5</span>
<span class="m">0.6J0.8</span><span class="w"> </span><span class="m">0.6246950476J0.7808688094</span>

<span class="w">      </span><span class="o">|×</span><span class="m">3j4</span><span class="w"> </span><span class="m">4j5</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-disclose">
<div class="heading-container"><h3 class="heading" id="primitive-functions-disclose-header">Disclose</h3><div class="command">(⎕ML)</div></div>
<p>The symbol chosen to represent Disclose depends on the current Migration Level.</p>
<p>If  <code>⎕ML&lt;2</code>, Disclose is represented by the symbol: <code>⊃</code>.</p>
<p>If  <code>⎕ML≥2</code>, Disclose is represented by the symbol: <code>↑</code>.</p>
<p><code>Y</code> may be any array.  <code>R</code> is an array.  If <code>Y</code> is non-empty, <code>R</code> is the value of the first item of <code>Y</code> taken in ravel order.  If <code>Y</code> is empty, <code>R</code> is the prototype of <code>Y</code>.</p>
<p>Disclose is the inverse of Enclose.  The identity <code>R←→⊃⊂R</code> holds for all <code>R</code>.  Disclose is also referred to as First.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span>
<span class="m">1</span>

<span class="w">      </span><span class="o">⊃</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="m">2</span>

<span class="w">      </span><span class="o">⊃</span><span class="s1">'MONDAY'</span><span class="w"> </span><span class="s1">'TUESDAY'</span>
<span class="nv">MONDAY</span>

<span class="w">      </span><span class="o">⊃</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">))(</span><span class="m">4</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">))</span>
<span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">⊃⍳</span><span class="m">0</span>
<span class="m">0</span>

<span class="w">      </span><span class="s1">' '</span><span class="o">=⊃</span><span class="s1">''</span>
<span class="m">1</span>

<span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="o">↓⊂</span><span class="m">1</span><span class="o">,⊂</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-divide">
<div class="heading-container"><h3 class="heading" id="primitive-functions-divide-header">Divide</h3><div class="command">R←X÷Y</div></div>
<p><code>Y</code> must be a numeric array.  <code>X</code> must be a numeric array.  <code>R</code> is the numeric array resulting from <code>X</code> divided by <code>Y</code>.  System variable <code>⎕DIV</code> is an implicit argument of Divide.</p>
<p>If <code>⎕DIV=0</code> and <code>Y=0</code> then if <code>X=0</code>, the result of <code>X÷Y</code> is 1; if <code>X≠0</code> then <code>X÷Y</code> is a <code>DOMAIN ERROR.</code></p>
<p>If <code>⎕DIV=1</code> and <code>Y=0</code>, the result of <code>X÷Y</code> is <code>0</code> for all values of <code>X</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="o">÷</span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="m">0.5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2.5</span>

<span class="w">      </span><span class="m">3j1</span><span class="w"> </span><span class="m">2.5</span><span class="w"> </span><span class="m">4j5</span><span class="o">÷</span><span class="m">2</span><span class="w"> </span><span class="m">1j1</span><span class="w"> </span><span class="m">.2</span>
<span class="m">1.5J0.5</span><span class="w"> </span><span class="m">1.25J¯1.25</span><span class="w"> </span><span class="m">20J25</span>

<span class="w">      </span><span class="nf">⎕DIV</span><span class="kd">←</span><span class="m">1</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="o">÷</span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0.5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-drop">
<div class="heading-container"><h3 class="heading" id="primitive-functions-drop-header">Drop</h3><div class="command">R←X↓Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple scalar or vector of integers. If <code>X</code> is a scalar, it is treated as a one-element vector.  If <code>Y</code> is a scalar, it is treated as an array whose shape is <code>(⍴X)⍴1</code>. After any scalar extensions, the shape of <code>X</code> must be less than or equal to the rank of <code>Y</code>. Any missing trailing items in <code>X</code> default to 0.</p>
<p><code>R</code> is an array with the same rank as <code>Y</code> but with elements removed from the vectors along each of the axes of <code>Y</code>. For the <code>I</code>th axis:</p>
<ul>
<li>if <code>X[I]</code> is positive, all but the first <code>X[I]</code> elements of the vectors result</li>
<li>if <code>X[I]</code> is negative, all but the last <code>X[I]</code> elements of the vectors result</li>
</ul>
<p>If the magnitude of <code>X[I]</code> exceeds the length of the <code>I</code>th axis, the result is an empty array with zero length along that axis.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">4</span><span class="o">↓</span><span class="s1">'OVERBOARD'</span>
<span class="nv">BOARD</span>

<span class="w">      </span><span class="m">¯5</span><span class="o">↓</span><span class="s1">'OVERBOARD'</span>
<span class="nv">OVER</span>

<span class="w">      </span><span class="o">⍴</span><span class="m">10</span><span class="o">↓</span><span class="s1">'OVERBOARD'</span>
<span class="m">0</span>

<span class="w">      </span><span class="nv">M</span>
<span class="nv">ONE</span>
<span class="nv">FAT</span>
<span class="nv">FLY</span>
<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">¯2</span><span class="o">↓</span><span class="nv">M</span>
<span class="nv">O</span>
<span class="nv">F</span>
<span class="nv">F</span>

<span class="w">      </span><span class="m">¯2</span><span class="w"> </span><span class="m">¯1</span><span class="o">↓</span><span class="nv">M</span>
<span class="nv">ON</span>
<span class="w">      </span><span class="m">1</span><span class="o">↓</span><span class="nv">M</span>
<span class="nv">FAT</span>
<span class="nv">FLY</span>
<span class="w">      </span><span class="nv">M3</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="nf">⎕A</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">↓</span><span class="nv">M3</span>
<span class="nv">QRST</span>
<span class="nv">UVWX</span>
<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="o">↓</span><span class="nv">M3</span>
<span class="nv">ABCD</span>
<span class="nv">EFGH</span>
</code></pre></div>
</article>
<article id="primitive-functions-drop-with-axes">
<div class="heading-container"><h3 class="heading" id="primitive-functions-drop-with-axes-header">Drop with Axes</h3><div class="command">R←X↓[K]Y</div></div>
<p><code>Y</code> may be any non-scalar array.  <code>X</code> must be a simple integer scalar or vector.  <code>K</code> is a vector of zero or more axes of <code>Y</code>.</p>
<p><code>R</code> is an array of the elements of <code>Y</code> with the first or last <code>X</code>[i] elements removed. Elements are removed from the beginning or end of <code>Y</code> according to the sign of <code>X</code>[i].</p>
<p>The rank of <code>R</code> is the same as the rank of <code>Y</code>:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⍴⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">⍴⍴</span><span class="nv">Y</span>
</code></pre></div></p>
<p>The size of each axis of <code>R</code> is determined by the corresponding element of <code>X</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⍴</span><span class="nv">R</span><span class="p">)</span><span class="sr">[</span><span class="o">,</span><span class="nv">K</span><span class="sr">]</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="m">0</span><span class="o">⌈</span><span class="p">(</span><span class="o">⍴</span><span class="nv">Y</span><span class="p">)</span><span class="sr">[</span><span class="o">,</span><span class="nv">K</span><span class="sr">]</span><span class="o">-|,</span><span class="nv">X</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">M</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="m">1</span><span class="o">↓</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="m">2</span><span class="o">↓</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">↓</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">23</span><span class="w"> </span><span class="m">24</span>
</code></pre></div>
</article>
<article id="primitive-functions-enclose">
<div class="heading-container"><h3 class="heading" id="primitive-functions-enclose-header">Enclose</h3><div class="command">R←⊂Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a scalar array whose item is the array <code>Y</code>.  If <code>Y</code> is a simple scalar, <code>R</code> is the simple scalar unchanged.  Otherwise, <code>R</code> has a depth whose magnitude is one greater than the magnitude of the depth of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="m">1</span>
<span class="m">1</span>

<span class="w">      </span><span class="o">⊂</span><span class="s1">'A'</span>
<span class="nv">A</span>

<span class="w">      </span><span class="o">⊂</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">⊂</span><span class="m">1</span><span class="o">,⊂</span><span class="s1">'CAT'</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="nv">CAT</span>

<span class="w">      </span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">8</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>

<span class="w">      </span><span class="o">⊂⍳</span><span class="m">0</span>

<span class="w">      </span><span class="o">⊂⊂⍳</span><span class="m">0</span>

<span class="w">      </span><span class="o">⊂⊂</span><span class="m">10</span>
<span class="m">10</span>
</code></pre></div>
<p>See also: <a class="internal-link" href="#primitive-functions-enclose-with-axes">Section 1.4.24</a>.</p>
</article>
<article id="primitive-functions-enclose-with-axes">
<div class="heading-container"><h3 class="heading" id="primitive-functions-enclose-with-axes-header">Enclose with Axes</h3><div class="command">R←⊂[K]Y</div></div>
<p><code>Y</code> may be any array.  <code>K</code> is a vector of zero or more axes of <code>Y</code>.  <code>R</code> is an array of the elements of <code>Y</code> enclosed along the axes <code>K</code>.  The shape of <code>R</code> is the shape of <code>Y</code> with the <code>K</code> axes removed:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="nv">Y</span><span class="p">)</span><span class="sr">[</span><span class="p">(</span><span class="o">⍳⍴⍴</span><span class="nv">R</span><span class="p">)</span><span class="o">~</span><span class="nv">K</span><span class="sr">]</span>
</code></pre></div></p>
<p>The shape of each element of <code>R</code> is the shape of the <code>K</code>th axes of <code>Y</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⊃</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="nv">Y</span><span class="p">)</span><span class="sr">[</span><span class="o">,</span><span class="nv">K</span><span class="sr">]</span>
</code></pre></div></p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'DUCKSWANBIRDWORMCAKESEED'</span>
<span class="err">┌┌</span><span class="kd">→</span><span class="err">───┐</span>
<span class="o">↓↓</span><span class="nv">DUCK</span><span class="err">│</span>
<span class="err">││</span><span class="nv">SWAN</span><span class="err">│</span>
<span class="err">││</span><span class="nv">BIRD</span><span class="err">│</span>
<span class="err">││</span><span class="w">    </span><span class="err">│</span>
<span class="err">││</span><span class="nv">WORM</span><span class="err">│</span>
<span class="err">││</span><span class="nv">CAKE</span><span class="err">│</span>
<span class="err">││</span><span class="nv">SEED</span><span class="err">│</span>
<span class="err">└└────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="o">⊂</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">A</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">DUCK</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">SWAN</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">BIRD</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">WORM</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">CAKE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">SEED</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="o">⊂</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">A</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">DUCK</span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">WORM</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">SWAN</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">CAKE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">BIRD</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">SEED</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="o">⊂</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">A</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">DUCK</span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">SWAN</span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">BIRD</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">WORM</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">CAKE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">SEED</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────┘</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-encode">
<div class="heading-container"><h3 class="heading" id="primitive-functions-encode-header">Encode</h3><div class="command">R←X⊤Y</div></div>
<p><code>Y</code> must be a simple numeric array.  <code>X</code> must be a simple numeric array.  <code>R</code> is the numeric array which results from the representation of <code>Y</code> in the number system defined by <code>X</code>.</p>
<p>The shape of <code>R</code> is <code>(⍴X),⍴Y</code> (the catenation of the shapes of <code>X</code> and <code>Y</code>).</p>
<p>If <code>X</code> is a vector or a scalar, the result for each element of <code>Y</code> is the value of the element expressed in the number system defined by radix <code>X</code>.  If <code>Y</code> is greater than can be expressed in the number system, the result is equal to the representation of the residue <code>(×/X)|Y</code>.  If the first element of <code>X</code> is 0, the value will be fully represented.</p>
<p>This function is also known as Representation.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="o">⊤</span><span class="m">5</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">125</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="o">⊤</span><span class="m">5</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">125</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">12</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">5</span>
</code></pre></div>
<p>If <code>X</code> is a higher-rank array, each of the vectors along the first axis of <code>X</code> is used as the radix vector for each element of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">16</span>
<span class="m">2</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">16</span>
</code></pre></div>
<p>This example shows binary, octal and hexadecimal representations of the decimal number 75.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="o">⊤</span><span class="m">75</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">11</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊤</span><span class="m">1.25</span><span class="w"> </span><span class="m">10.5</span>
<span class="m">1</span><span class="w">    </span><span class="m">10</span>
<span class="m">0.25</span><span class="w">  </span><span class="m">0.5</span>

<span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">13</span><span class="o">⊤</span><span class="m">13</span><span class="o">?</span><span class="m">52</span>
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span>
<span class="m">12</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span>
</code></pre></div>
<p><code>⎕IO</code> is not an implicit argument of encode.</p>
</article>
<article id="primitive-functions-enlist">
<div class="heading-container"><h3 class="heading" id="primitive-functions-enlist-header">Enlist</h3><div class="command">(⎕ML≥1)</div></div>
<p>Migration level must be such that <code>⎕ML≥1</code> (otherwise see <a class="internal-link" href="#the-i-beam-operator-set-dyalog-pixel-type">Section 3.2.34</a>).</p>
<p><code>Y</code> may be any array, <code>R</code> is a simple vector created from all the elements of <code>Y</code> in ravel order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">1</span><span class="w">         </span><span class="c1">⍝  Migration level 1</span>
<span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="s1">'MISS'</span><span class="w"> </span><span class="s1">'IS'</span><span class="w"> </span><span class="s1">'SIP'</span><span class="w"> </span><span class="s1">'PI'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">MAT</span>
<span class="w"> </span><span class="nv">MISS</span><span class="w">  </span><span class="nv">IS</span>
<span class="w"> </span><span class="nv">SIP</span><span class="w">   </span><span class="nv">PI</span>
<span class="w">      </span><span class="o">∊</span><span class="nv">MAT</span>
<span class="nv">MISSISSIPPI</span>

<span class="w">      </span><span class="nv">M</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">6</span><span class="p">(</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="p">))</span>
<span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>
<span class="w">   </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="o">∊</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>
</code></pre></div>
</article>
<article id="primitive-functions-equal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-equal-header">Equal</h3><div class="command">R←X=Y</div></div>
<p><code>Y</code> may be any array. <code>X</code> may be any array. <code>R</code> is Boolean.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Equal.</p>
<p>If <code>X</code> and <code>Y</code> are refs, then <code>R</code> is 1 if they are refs to the same object. If <code>X</code> is a ref and <code>Y</code> is not, or vice-versa, then <code>R</code> is 0.</p>
<p>If <code>X</code> and <code>Y</code> are character, then <code>R</code> is 1 if they are the same character. If <code>X</code> is character and <code>Y</code> is numeric, or vice-versa, then <code>R</code> is 0.</p>
<p>If <code>X</code> and <code>Y</code> are numeric, then <code>R</code> is 1 if <code>X</code> and <code>Y</code> are within comparison tolerance of each other.</p>
<p>For real numbers <code>X</code> and <code>Y</code>, <code>X</code> is considered equal to <code>Y</code> if <code>(|X-Y)</code> is not greater than <code>⎕CT×(|X)⌈|Y</code>.</p>
<p>For complex numbers <code>X=Y</code> is 1 if the magnitude of <code>X-Y</code> does not exceed <code>⎕CT</code> times the larger of the magnitudes of <code>X</code> and <code>Y</code>; geometrically, <code>X=Y</code> if the number smaller in magnitude lies on or within a circle centred on the one with larger magnitude, having radius <code>⎕CT</code> times the larger magnitude.</p>
<p><img alt="comparison" src="img/comparison.png"/></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="o">=</span><span class="m">3.1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">¯3</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="m">2</span><span class="o">+</span><span class="m">0j1</span><span class="o">×</span><span class="nf">⎕CT</span><span class="w"> </span>
<span class="w">      </span><span class="nv">a</span>
<span class="m">2J1E¯14</span>
<span class="w">      </span><span class="nv">a</span><span class="o">=</span><span class="m">2j.00000000000001</span><span class="w"> </span><span class="m">2j.0000000000001</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'CAT'</span><span class="o">=</span><span class="s1">'FAT'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="s1">'CAT'</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'CAT'</span><span class="o">=</span><span class="s1">'C'</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>
<span class="w">      </span><span class="m">1</span><span class="o">=</span><span class="m">1.000000000001</span>
<span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="o">=</span><span class="m">1.0000001</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-excluding">
<div class="heading-container"><h3 class="heading" id="primitive-functions-excluding-header">Excluding</h3><div class="command">R←X~Y</div></div>
<p><code>X</code> must be a scalar or vector.  <code>R</code> is a vector of the elements of <code>X</code> excluding those elements which occur in <code>Y</code> taken in the order in which they occur in <code>X</code>.</p>
<p>Elements of <code>X</code> and <code>Y</code> are considered the same if <code>X≡Y</code> returns 1 for those elements.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Excluding. Excluding is also known as Without.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'HELLO'</span><span class="o">~</span><span class="s1">'GOODBYE'</span>
<span class="nv">HLL</span>
<span class="w">      </span><span class="s1">'MONDAY'</span><span class="w"> </span><span class="s1">'TUESDAY'</span><span class="w"> </span><span class="s1">'WEDNESDAY'</span><span class="o">~</span><span class="s1">'TUESDAY'</span><span class="w"> </span><span class="s1">'FRIDAY'</span>
<span class="w"> </span><span class="nv">MONDAY</span><span class="w">  </span><span class="nv">WEDNESDAY</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="o">~⍳</span><span class="m">10</span>
<span class="m">15</span>
</code></pre></div>
<p>For performance information, see <i>Programmer's Guide: Search Functions and Hash Tables</i>.</p>
</article>
<article id="primitive-functions-execute">
<div class="heading-container"><h3 class="heading" id="primitive-functions-execute-header">Execute</h3><div class="command">R←{X}⍎Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector containing an APL expression to be executed. The expression may contain one or more sub-expressions separated by <code>⋄</code> (Diamond) characters.</p>
<p>If the result of the expression is used or is assigned to a name,  <code>R</code> is the result (if any) of the last-executed sub-expression and the non-shy results of all preceding expressions (that are not assigned within the expression) are displayed. Otherwise the unassigned non-shy results of all of the sub-expressions are displayed.</p>
<p>If the expression is an empty vector or a vector containing only blanks or one that does not produce a result, then <code>⍎Y</code> has no value and using or assigning it to a name will generate <code>VALUE ERROR</code>.</p>
<p>If <code>Y</code> contains a branch expression, the branch is effected in the environment from which the Execute was invoked, and <code>⍎Y</code> does not return.</p>
<p>If specified, <code>X</code> must be a namespace reference or a simple character scalar or vector representing the name of a namespace in which the expression is to be executed. If <code>X</code> is omitted or is an empty character vector, the expression is executed in the current space.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍎</span><span class="s1">'2+2'</span>
<span class="m">4</span>
<span class="w">      </span><span class="o">⍎</span><span class="s1">'1+1 ⋄ 2+2'</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="w"> </span><span class="o">⍎</span><span class="s1">'1+1 ⋄ 2+2'</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">4</span>
<span class="w">      </span><span class="m">4</span><span class="o">=⍎</span><span class="s1">'1+1 ⋄ 2+2'</span>
<span class="m">2</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⍎</span><span class="s1">'A←2|¯1↑⎕TS ⋄ →0⍴⍨A ⋄ A'</span>
<span class="m">0</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">0</span>
<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="o">⍎</span><span class="s1">''</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">context</span><span class="w"> </span><span class="nv">expected</span><span class="w"> </span><span class="nv">one</span>
<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="o">⍎</span><span class="s1">''</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="s1">'myspace'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="s1">''</span>
<span class="w">      </span><span class="nv">myspace</span><span class="o">⍎</span><span class="s1">'A←⍳6'</span>
<span class="w">      </span><span class="nv">myspace</span><span class="na">.</span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
</article>
<article id="primitive-functions-expand">
<div class="heading-container"><h3 class="heading" id="primitive-functions-expand-header">Expand</h3><div class="command">R←X\[K]Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> is a simple integer scalar or vector.  The axis specification is optional.  If present, <code>K</code> must be a simple integer scalar or 1-element vector.  The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.  The form <code>R←X⍀Y</code> implies the first axis.  If <code>Y</code> is a scalar, it is treated as a one-element vector.</p>
<p>If <code>Y</code> has length 1 along the <code>K</code><sup>th</sup> (or implied) axis, it is extended along that axis to match the number of positive elements in <code>X</code>. Otherwise, the number of positive elements in <code>X</code> must be the length of the <code>K</code><sup>th</sup> (or implied) axis of <code>Y</code>.</p>
<p><code>R</code> is composed from the sub-arrays along the <code>K</code><sup>th</sup> axis of <code>Y</code>. If <code>X[I]</code> (an element of <code>X</code>) is the <code>J</code><sup>th</sup> positive element in <code>X</code>, then the <code>J</code><sup>th</sup> sub-array along the <code>K</code><sup>th</sup> axis of <code>Y</code> is replicated <code>X[I]</code> times. If <code>X[I]</code> is negative, then a sub-array of fill elements of <code>Y</code> is replicated <code>|X[I]</code> times and inserted in relative order along the <code>K</code><sup>th</sup> axis of the result. If <code>X[I]</code> is zero, it is treated as the value <code>¯1</code>. The shape of <code>R</code> is the shape of <code>Y</code> except that the length of the <code>K</code><sup>th</sup> axis is <code>+/1⌈|X</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="na">\</span><span class="o">⍳</span><span class="m">0</span>
<span class="m">0</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="m">5</span><span class="na">\</span><span class="s1">'A'</span>
<span class="nv">A</span><span class="w">  </span><span class="nv">AAA</span><span class="w">    </span><span class="nv">AAAAA</span>

<span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">\</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">⍀</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">\</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">1</span><span class="na">\</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
</article>
<article id="primitive-functions-expand-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-expand-first-header">Expand First</h3><div class="command">R←X⍀Y</div></div>
<p>The form <code>R←X⍀Y</code> implies expansion along the first axis whereas the form <code>R←X\Y</code> implies expansion along the last axis (columns).  See <a class="internal-link" href="#primitive-functions-expand-first">Section 1.4.31</a>.</p>
</article>
<article id="primitive-functions-exponential">
<div class="heading-container"><h3 class="heading" id="primitive-functions-exponential-header">Exponential</h3><div class="command">R←*Y</div></div>
<p><code>Y</code> must be numeric. <code>R</code> is numeric and is the <code>Y</code>th power of <em>e</em>, the base of natural logarithms.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">*</span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">2.718281828</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="o">*</span><span class="m">0j1</span><span class="w"> </span><span class="m">1j2</span>
<span class="m">0.5403023059J0.8414709848</span><span class="w"> </span><span class="m">¯1.131204384J2.471726672</span>

<span class="w">      </span><span class="m">1</span><span class="o">+*○</span><span class="m">0j1</span><span class="w"> </span><span class="c1">⍝ Euler Identity</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-factorial">
<div class="heading-container"><h3 class="heading" id="primitive-functions-factorial-header">Factorial</h3><div class="command">R←!Y</div></div>
<p><code>Y</code> must be numeric excluding negative integers.  <code>R</code> is numeric.  <code>R</code> is the product of the first <code>Y</code> integers for positive integer values of <code>Y</code>. In general, <code>!Y</code> is gamma <code>Y+1</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">!</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">120</span>

<span class="w">      </span><span class="o">!</span><span class="m">¯1.5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1.5</span><span class="w"> </span><span class="m">3.3</span>
<span class="m">¯3.544907702</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1.329340388</span><span class="w"> </span><span class="m">8.85534336</span>

<span class="w">      </span><span class="o">!</span><span class="m">0j1</span><span class="w"> </span><span class="m">1j2</span>
<span class="m">0.4980156681J¯0.1549498283</span><span class="w"> </span><span class="m">0.1122942423J0.3236128855</span>
</code></pre></div>
</article>
<article id="primitive-functions-find">
<div class="heading-container"><h3 class="heading" id="primitive-functions-find-header">Find</h3><div class="command">R←X⍷Y</div></div>
<p><code>X</code> and <code>Y</code> may be any arrays.  <code>R</code> is a simple Boolean array the same shape as Y which identifies occurrences of <code>X</code> within <code>Y</code>.</p>
<p>If the rank of <code>X</code> is smaller than the rank of <code>Y</code>, <code>X</code> is treated as if it were the same rank with leading axes of size 1.  For example a vector is treated as a 1-row matrix.</p>
<p>If the rank of <code>X</code> is larger than the rank of <code>Y</code>, no occurrences of <code>X</code> are found in <code>Y</code>.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments of Find.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'AN'</span><span class="o">⍷</span><span class="s1">'BANANA'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'ANA'</span><span class="o">⍷</span><span class="s1">'BANANA'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'BIRDS'</span><span class="w"> </span><span class="s1">'NEST'</span><span class="o">⍷</span><span class="s1">'BIRDS'</span><span class="w"> </span><span class="s1">'NEST'</span><span class="w"> </span><span class="s1">'SOUP'</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nv">MAT</span>
<span class="nv">IS</span><span class="w"> </span><span class="nv">YOU</span><span class="w"> </span><span class="nv">IS</span>
<span class="nv">OR</span><span class="w"> </span><span class="nv">IS</span><span class="w"> </span><span class="nv">YOU</span>
<span class="nv">ISN</span><span class="s1">'T</span>
<span class="s1">      '</span><span class="nv">IS</span><span class="s1">'⍷MAT</span>
<span class="s1">1 0 0 0 0 0 0 1 0</span>
<span class="s1">0 0 0 1 0 0 0 0 0</span>
<span class="s1">1 0 0 0 0 0 0 0 0</span>
<span class="s1">      '</span><span class="nv">IS</span><span class="w"> </span><span class="nv">YOU</span><span class="err">'</span><span class="o">⍷</span><span class="nv">MAT</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-first-header">First</h3><div class="command">(⎕ML)</div></div>
<p>See function <a class="internal-link" href="#primitive-functions-disclose">Section 1.4.19</a>.</p>
</article>
<article id="primitive-functions-floor">
<div class="heading-container"><h3 class="heading" id="primitive-functions-floor-header">Floor</h3><div class="command">R←⌊Y</div></div>
<p><code>Y</code> must be numeric.</p>
<p>For real numbers, <code>R</code> is the largest integer value less than or equal to <code>Y</code> within the comparison tolerance <code>⎕CT</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌊</span><span class="m">¯2.3</span><span class="w"> </span><span class="m">0.1</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">3.3</span>
<span class="m">¯3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">⌊</span><span class="m">0.5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.4</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="m">0.6</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>For complex numbers, <code>R</code> depends on the relationship between the real and imaginary parts of the numbers in <code>Y</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌊</span><span class="m">1j3.2</span><span class="w"> </span><span class="m">3.3j2.5</span><span class="w"> </span><span class="m">¯3.3j¯2.5</span>
<span class="m">1J3</span><span class="w"> </span><span class="m">3J2</span><span class="w"> </span><span class="m">¯3J¯3</span>
</code></pre></div></p>
<h5>Complex Floor</h5>
<p>The following (deliberately) simple function illustrates one way to express the rules for evaluating complex Floor.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">fl</span><span class="kd">←</span><span class="nv">CpxFloor</span><span class="w"> </span><span class="nv">cpxs</span><span class="sr">;</span><span class="nv">a</span><span class="sr">;</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ Complex floor of scalar complex number (a+ib)</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="kd">←</span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="o">○</span><span class="nv">cpxs</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="m">1</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">a</span><span class="o">-⌊</span><span class="nv">a</span><span class="p">)</span><span class="o">+</span><span class="nv">b</span><span class="o">-⌊</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nv">fl</span><span class="kd">←</span><span class="p">(</span><span class="o">⌊</span><span class="nv">a</span><span class="p">)</span><span class="o">+</span><span class="m">0J1</span><span class="o">×⌊</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="o">-⌊</span><span class="nv">a</span><span class="p">)</span><span class="o">&lt;</span><span class="nv">b</span><span class="o">-⌊</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">            </span><span class="nv">fl</span><span class="kd">←</span><span class="p">(</span><span class="o">⌊</span><span class="nv">a</span><span class="p">)</span><span class="o">+</span><span class="m">0J1</span><span class="o">×</span><span class="m">1</span><span class="o">+⌊</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">            </span><span class="nv">fl</span><span class="kd">←</span><span class="p">(</span><span class="m">1</span><span class="o">+⌊</span><span class="nv">a</span><span class="p">)</span><span class="o">+</span><span class="m">0J1</span><span class="o">×⌊</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">CpxFloor</span><span class="na">¨</span><span class="m">1j3.2</span><span class="w"> </span><span class="m">3.3j2.5</span><span class="w"> </span><span class="m">¯3.3j¯2.5</span>
<span class="m">1J3</span><span class="w"> </span><span class="m">3J2</span><span class="w"> </span><span class="m">¯3J¯3</span>
</code></pre></div></p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Floor.</p>
</article>
<article id="primitive-functions-format-monadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-format-monadic-header">Format (Monadic)</h3><div class="command">R←⍕Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a simple character array which will display identically to the display produced by <code>Y</code>.  The result is independent of <code>⎕PW</code>.  If <code>Y</code> is a simple character array, then <code>R</code> is <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">B</span><span class="kd">←</span><span class="o">⍕</span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="o">⍴</span><span class="s1">'HELLO PEOPLE'</span>
<span class="nv">HELLO</span>
<span class="nv">PEOPLE</span>

<span class="w">      </span><span class="nv">B</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="nv">A</span>
<span class="m">1</span>
</code></pre></div>
<p>If <code>Y</code> is a simple numeric scalar, then <code>R</code> is a vector containing the formatted number without any spaces.  A floating point number is formatted according to the system variable <code>⎕PP</code>.  <code>⎕PP</code> is ignored when formatting integers.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PP</span><span class="kd">←</span><span class="m">5</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="kd">←</span><span class="o">⍕⍳</span><span class="m">0</span>
<span class="m">0</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="kd">←</span><span class="o">⍕</span><span class="m">10</span>
<span class="m">2</span>

<span class="w">      </span><span class="nv">C</span>
<span class="m">10</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="kd">←</span><span class="o">⍕</span><span class="m">12.34</span>
<span class="m">5</span>

<span class="w">      </span><span class="nv">C</span>
<span class="m">12.34</span>

<span class="w">      </span><span class="o">⍕</span><span class="m">123456789</span>
<span class="m">123456789</span>

<span class="w">      </span><span class="o">⍕</span><span class="m">123.456789</span>
<span class="m">123.46</span>
</code></pre></div>
<p>Scaled notation is used if the magnitude of the non-integer number is too large to represent with <code>⎕PP</code> significant digits or if the number requires more than five leading zeroes after the decimal point.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍕</span><span class="m">123456.7</span>
<span class="m">1.2346E5</span>

<span class="w">      </span><span class="o">⍕</span><span class="m">0.0000001234</span>
<span class="m">1.234E¯7</span>
</code></pre></div>
<p>If <code>Y</code> is a simple numeric vector, then <code>R</code> is a character vector in which each element of <code>Y</code> is independently formatted with a single separating space between formatted elements.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="kd">←</span><span class="o">⍕</span><span class="m">¯123456</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">22.5</span><span class="w"> </span><span class="m">¯0.000000667</span><span class="w"> </span><span class="m">5.00001</span>
<span class="m">27</span>

<span class="w">      </span><span class="nv">C</span>
<span class="m">¯1.2346E5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">22.5</span><span class="w"> </span><span class="m">¯6.67E¯7</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<p>If <code>Y</code> is a simple numeric array rank higher than one, <code>R</code> is a character array with the same shape as <code>Y</code> except that the last dimension of <code>Y</code> is determined by the length of the formatted data.  The format width is determined independently for each column of <code>Y</code>, such that:</p>
<ol>
<li>the decimal points for floating point or scaled formats are aligned.</li>
<li>the <code>E</code> characters for scaled formats are aligned, with trailing zeros added to the mantissae if necessary.</li>
<li>integer formats are aligned to the left of the decimal point column, if any, or right-adjusted in the field otherwise.</li>
<li>each formatted column is separated from its neighbours by a single blank column.</li>
<li>the exponent values in scaled formats are left-adjusted to remove any blanks.</li>
</ol>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">C</span><span class="kd">←</span><span class="m">22</span><span class="w"> </span><span class="m">¯0.000000123</span><span class="w"> </span><span class="m">2.34</span><span class="w"> </span><span class="m">¯212</span><span class="w"> </span><span class="m">123456</span><span class="w"> </span><span class="m">6.00002</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="kd">←</span><span class="o">⍕</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="nv">C</span>
<span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">29</span>

<span class="w">      </span><span class="nv">C</span>
<span class="w">  </span><span class="m">22</span><span class="w">    </span><span class="m">¯1.2300E¯7</span><span class="w">  </span><span class="m">2.3400E0</span>
<span class="m">¯212</span><span class="w">     </span><span class="m">1.2346E5</span><span class="w">   </span><span class="m">6.0000E0</span>

<span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">2.2000E1</span><span class="w">  </span><span class="m">¯1.2300E¯7</span>
<span class="w">   </span><span class="m">2.34</span><span class="w"> </span><span class="m">¯2.1200E2</span><span class="w">   </span><span class="m">1.2346E5</span>
</code></pre></div>
<p>If <code>Y</code> is non-simple, and all items of <code>Y</code> at any depth are scalars or vectors, then <code>R</code> is a vector.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">B</span><span class="kd">←</span><span class="o">⍕</span><span class="nv">A</span><span class="kd">←</span><span class="s1">'ABC'</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">))</span><span class="w"> </span><span class="m">10</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">A</span>
<span class="m">4</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">A</span>
<span class="m">¯3</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">B</span>
<span class="m">26</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">B</span>
<span class="m">1</span>

<span class="w">      </span><span class="nv">A</span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">  </span><span class="m">100</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">   </span><span class="m">10</span>

<span class="w">      </span><span class="nv">B</span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">  </span><span class="m">100</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">   </span><span class="m">10</span>
</code></pre></div>
<p>By replacing spaces with <code>^</code>, it is clearer to see how the result of <code>⍕</code> is formed:
<div class="highlight"><pre><span></span><code><span class="err">^</span><span class="nv">ABC</span><span class="err">^^</span><span class="m">100</span><span class="err">^^</span><span class="m">1</span><span class="err">^</span><span class="m">2</span><span class="err">^^</span><span class="m">3</span><span class="err">^</span><span class="m">4</span><span class="err">^</span><span class="m">5</span><span class="err">^^^</span><span class="m">10</span>
</code></pre></div></p>
<p>If <code>Y</code> is non-simple, and all items of <code>Y</code> at any depth are not scalars, then <code>R</code> is a matrix.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">D</span><span class="kd">←</span><span class="o">⍕</span><span class="nv">C</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="s1">'AB'</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">1</span><span class="o">+⍳</span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'CDEFGHIJKLMN'</span><span class="p">)</span>

<span class="w">      </span><span class="nv">C</span>
<span class="m">1</span><span class="w">  </span><span class="nv">AB</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="nv">CDE</span>
<span class="w">       </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="nv">FGH</span>

<span class="w">            </span><span class="nv">IJK</span>
<span class="w">            </span><span class="nv">LMN</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span>
<span class="m">4</span>

<span class="w">      </span><span class="o">≡</span><span class="nv">C</span>
<span class="m">¯2</span>

<span class="w">      </span><span class="nv">D</span>
<span class="m">1</span><span class="w">  </span><span class="nv">AB</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="nv">CDE</span>
<span class="w">       </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="nv">FGH</span>

<span class="w">            </span><span class="nv">IJK</span>
<span class="w">            </span><span class="nv">LMN</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">D</span>
<span class="m">5</span><span class="w"> </span><span class="m">16</span>

<span class="w">      </span><span class="o">≡</span><span class="nv">D</span>
<span class="m">1</span>
</code></pre></div>
<p>By replacing spaces with <code>^</code>, it is clearer to see how the result of <code>⍕</code> is formed:
<div class="highlight"><pre><span></span><code><span class="m">1</span><span class="err">^^</span><span class="nv">AB</span><span class="err">^^</span><span class="m">2</span><span class="err">^</span><span class="m">3</span><span class="err">^^</span><span class="nv">CDE</span><span class="err">^</span>
<span class="err">^^^^^^^</span><span class="m">4</span><span class="err">^</span><span class="m">5</span><span class="err">^^</span><span class="nv">FGH</span><span class="err">^</span>
<span class="err">^^^^^^^^^^^^^^^^</span>
<span class="err">^^^^^^^^^^^^</span><span class="nv">IJK</span><span class="err">^</span>
<span class="err">^^^^^^^^^^^^</span><span class="nv">LMN</span><span class="err">^</span>
</code></pre></div></p>
<p><code>⎕PP</code> is an implicit argument of Monadic Format.</p>
</article>
<article id="primitive-functions-format-dyadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-format-dyadic-header">Format (Dyadic)</h3><div class="command">R←X⍕Y</div></div>
<p><code>Y</code> must be a simple real (non-complex) numeric array.  <code>X</code> must be a simple integer scalar or vector.  <code>R</code> is a character array displaying the array <code>Y</code> according to the specification <code>X</code>.  <code>R</code> has rank <code>1⌈⍴⍴Y</code> and <code>¯1↓⍴R</code> is <code>¯1↓⍴Y</code>. If any element of <code>Y</code> is complex, dyadic <code>⍕</code> reports a <code>DOMAIN ERROR</code>.</p>
<p>Conformability requires that if <code>X</code> has more than two elements, then <code>⍴X</code> must be <code>2×¯1↑⍴Y</code>. If <code>X</code> contains one element, it is extended to <code>(2×¯1↑⍴Y)⍴0,X</code>.  If <code>X</code> contains 2 elements, it is extended to <code>(2×¯1↑⍴Y)⍴X</code>.</p>
<p><code>X</code> specifies two numbers (possibly after extension) for each column in <code>Y</code>.  For this purpose, scalar <code>Y</code> is treated as a one-element vector.  Each pair of numbers in <code>X</code> identifies a format width (<code>W</code>) and a format precision (<code>P</code>).</p>
<p>If <code>P</code> is 0, the column is to be formatted as integers.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">⍕</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">3</span>
<span class="w">    </span><span class="m">4</span><span class="w">    </span><span class="m">5</span><span class="w">    </span><span class="m">6</span>

<span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="o">⍕</span><span class="m">1.1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="m">2.547</span>
<span class="w">   </span><span class="m">1</span><span class="w">   </span><span class="m">2</span><span class="w">  </span><span class="m">¯4</span><span class="w">   </span><span class="m">3</span>
</code></pre></div>
<p class="example">Example</p>
<p>If <code>P</code> is positive, the format is floating point with <code>P</code> significant digits to be displayed after the decimal point.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="o">⍕</span><span class="m">1.1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="m">2.547</span>
<span class="w"> </span><span class="m">1.1</span><span class="w"> </span><span class="m">2.0¯4.0</span><span class="w"> </span><span class="m">2.5</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>If <code>P</code> is negative, scaled format is used with <code>|P</code> digits in the mantissa.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">7</span><span class="w"> </span><span class="m">¯3</span><span class="o">⍕</span><span class="m">5</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">155</span><span class="w"> </span><span class="m">1555</span>
<span class="m">5.00E0</span><span class="w"> </span><span class="m">1.50E1</span><span class="w"> </span><span class="m">1.55E2</span><span class="w"> </span><span class="m">1.56E3</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>If <code>W</code> is 0 or absent, then the width of the corresponding columns of <code>R</code> are determined by the maximum width required by any element in the corresponding columns of <code>Y</code>, plus one separating space.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="o">⍕</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">10</span><span class="w"> </span><span class="m">15.2346</span><span class="w"> </span><span class="m">¯17.1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w"> </span><span class="m">10.000</span><span class="w"> </span><span class="m">15.235</span><span class="w"> </span><span class="m">¯17.100</span>
<span class="w">  </span><span class="m">2.000</span><span class="w">  </span><span class="m">3.000</span><span class="w">   </span><span class="m">4.000</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>If a formatted element exceeds its specified field width when <code>W&gt;</code>0, the field width for that element is filled with asterisks.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍕</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">10.1</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">1001</span><span class="w"> </span><span class="m">22.357</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">1110.1</span>
<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15.00</span>
<span class="o">***</span><span class="w"> </span><span class="m">22.36</span>
<span class="m">101</span><span class="o">******</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>If the format precision exceeds the internal precision, low order digits are replaced by the symbol '<code>_</code>'.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">26</span><span class="o">⍕</span><span class="m">2</span><span class="o">*</span><span class="m">100</span>
<span class="m">1267650600228229</span><span class="nv">_______________</span><span class="na">.</span><span class="nv">__________________________</span>

<span class="w">      </span><span class="o">⍴</span><span class="m">26</span><span class="o">⍕</span><span class="m">2</span><span class="o">*</span><span class="m">100</span>
<span class="m">59</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">20</span><span class="o">⍕÷</span><span class="m">3</span>
<span class="w"> </span><span class="m">0.3333333333333333</span><span class="nv">____</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">¯20</span><span class="o">⍕÷</span><span class="m">3</span>
<span class="w"> </span><span class="m">3.333333333333333</span><span class="nv">____E¯1</span>
</code></pre></div></p>
<p>The shape of <code>R</code> is the same as the shape of <code>Y</code> except that the last dimension of <code>R</code> is the sum of the field widths specified in <code>X</code> or deduced by the function.  If <code>Y</code> is a scalar, the shape of <code>R</code> is the field width.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍕</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-grade-down-monadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-grade-down-monadic-header">Grade Down (Monadic)</h3><div class="command">R←⍒Y</div></div>
<p><code>Y</code> may be any array of rank greater than 0 but may not contain namespaces.  <code>R</code> is an integer vector being the permutation of <code>⍳1↑⍴Y</code> that places the sub-arrays along the first axis in descending order. For the rules for comparing items of <code>Y</code> with one another, see <a class="internal-link" href="#primitive-functions-grade-up-monadic">Section 1.4.41</a>.</p>
<p><code>⎕IO</code> is an implicit argument of Grade Down.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍒</span><span class="m">22.5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯4</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span>

<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>

<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⍒</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>
</code></pre></div></p>
<p><strong>Note that character arrays sort differently in the Unicode and Classic Editions.</strong>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="nv">Goldilocks</span>
<span class="nv">porridge</span><span class="w">   </span>
<span class="nv">Porridge</span><span class="w">   </span>
<span class="m">3</span><span class="w"> </span><span class="nv">bears</span><span class="w"> </span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Unicode Edition</th>
<th>Classic Edition</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apl       ⍒M 2 3 1 4</code></td>
<td><code>apl       ⍒M 3 1 4 2</code></td>
</tr>
<tr>
<td><code>apl       M[⍒M;] porridge Porridge Goldilocks 3 bears</code></td>
<td><code>apl       M[⍒M;] Porridge Goldilocks 3 bears porridge</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">pb</span>
<span class="m">6</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="nv">pb</span>
<span class="err">┌────────┬─────┬───┐</span>
<span class="err">│</span><span class="nv">Rivers</span><span class="w">  </span><span class="err">│</span><span class="nv">Jason</span><span class="err">│</span><span class="m">554</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Daintree</span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">532</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Rivers</span><span class="w">  </span><span class="err">│</span><span class="nv">Jason</span><span class="err">│</span><span class="m">543</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Foad</span><span class="w">    </span><span class="err">│</span><span class="nv">Jay</span><span class="w">  </span><span class="err">│</span><span class="m">558</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Scholes</span><span class="w"> </span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">547</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Scholes</span><span class="w"> </span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">535</span><span class="err">│</span>
<span class="err">└────────┴─────┴───┘</span>
<span class="w">      </span><span class="o">⍒</span><span class="nv">pb</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
</article>
<article id="primitive-functions-grade-down-dyadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-grade-down-dyadic-header">Grade Down (Dyadic)</h3><div class="command">R←X⍒Y</div></div>
<p><code>Y</code> must be a simple character array of rank greater than 0.  <code>X</code> must be a simple character array of rank 1 or greater.  <code>R</code> is a simple integer vector of shape <code>1↑⍴Y</code> containing the permutation of <code>⍳1↑⍴Y</code> that places the sub-arrays of <code>Y</code> along the first axis in descending order according to the collation sequence <code>X</code>.  The indices of any set of identical sub-arrays in <code>Y</code> occur in <code>R</code> in ascending order.</p>
<p>If <code>X</code> is a vector, the following identity holds:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="o">⍒</span><span class="nv">Y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">⍒</span><span class="nv">X</span><span class="o">⍳</span><span class="nv">Y</span>
</code></pre></div></p>
<p>A left argument of rank greater than 1 allows successive resolution of duplicate orderings in the following way.</p>
<p>Starting with the last axis:</p>
<ul>
<li>The characters in the right argument are located along the current axis of the left argument.  The position of the first occurrence gives the ordering value of the character.</li>
<li>If a character occurs more than once in the left argument its lowest position along the current axis is used.</li>
<li>If a character of the right argument does not occur in the left argument, the ordering value is one more than the maximum index of the current axis - as with dyadic iota.</li>
</ul>
<p>The process is repeated using each axis in turn, from the last to the first, resolving duplicates until either no duplicates result or all axes have been exhausted.</p>
<p>For example, if index origin is 1:</p>
<table>
<thead>
<tr>
<th>Left argument:</th>
<th>Right argument:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apl abc ABA</code></td>
<td><code>apl ab ac Aa Ac</code></td>
</tr>
</tbody>
</table>
<p>Along last axis:</p>
<table>
<thead>
<tr>
<th>Character:</th>
<th>Value:</th>
<th>Ordering:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apl ab ac Aa Ac</code></td>
<td><code>apl 1 2 1 3 1 1 1 3</code></td>
<td><code>apl 3 =1   &lt;-duplicate ordering with 4 =1   &lt;-respect to last axis.</code></td>
</tr>
</tbody>
</table>
<p>Duplicates exist, so resolve these with respect to the first axis:</p>
<table>
<thead>
<tr>
<th>Character:</th>
<th>Value:</th>
<th>Ordering:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apl  ac Ac</code></td>
<td><code>apl 1 1 2 1</code></td>
<td><code>apl 2 1</code></td>
</tr>
</tbody>
</table>
<p>So the final row ordering is:
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="nv">ab</span><span class="w">              </span><span class="m">3</span>
<span class="w">        </span><span class="nv">ac</span><span class="w">              </span><span class="m">2</span>
<span class="w">        </span><span class="nv">Aa</span><span class="w">              </span><span class="m">4</span>
<span class="w">        </span><span class="nv">Ac</span><span class="w">              </span><span class="m">1</span>
</code></pre></div></p>
<p>That is, the order of rows is 4 2 1 3 which corresponds to a descending row sort of:
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="nv">Ac</span><span class="w">              </span><span class="m">1</span>
<span class="w">        </span><span class="nv">ac</span><span class="w">              </span><span class="m">2</span>
<span class="w">        </span><span class="nv">ab</span><span class="w">              </span><span class="m">3</span>
<span class="w">        </span><span class="nv">Aa</span><span class="w">              </span><span class="m">4</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">S1</span>
<span class="m">2</span><span class="w"> </span><span class="m">27</span>
<span class="w">      </span><span class="nv">S1</span>
<span class="w"> </span><span class="nv">ABCDEFGHIJKLMNOPQRSTUVWXYZ</span>
<span class="w"> </span><span class="nv">abcdefghijklmnopqrstuvwxyz</span>
<span class="w">      </span><span class="nv">S2</span>
<span class="w"> </span><span class="nv">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span>
<span class="w">      </span><span class="nv">S3</span>
<span class="w"> </span><span class="nv">AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz</span>
<span class="w">      </span><span class="nv">S4</span>
<span class="w"> </span><span class="nv">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</span>
<span class="w"> </span><span class="nv">abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</span>
</code></pre></div>
<p>The following results are tabulated for comparison:
<div class="highlight"><pre><span></span><code><span class="nv">X</span><span class="w">       </span><span class="nv">X</span><span class="sr">[</span><span class="nv">S1</span><span class="o">⍒</span><span class="nv">X</span><span class="sr">;]</span><span class="w">    </span><span class="nv">X</span><span class="sr">[</span><span class="nv">S2</span><span class="o">⍒</span><span class="nv">X</span><span class="sr">;]</span><span class="w">    </span><span class="nv">X</span><span class="sr">[</span><span class="nv">S3</span><span class="o">⍒</span><span class="nv">X</span><span class="sr">;]</span><span class="w">    </span><span class="nv">X</span><span class="sr">[</span><span class="nv">S4</span><span class="o">⍒</span><span class="nv">X</span><span class="sr">;]</span>
<span class="nv">FIRsT</span><span class="w">     </span><span class="nv">TAPE</span><span class="w">        </span><span class="nv">rAT</span><span class="w">         </span><span class="nv">TAPE</span><span class="w">        </span><span class="nv">TAPE</span>
<span class="nv">TAP</span><span class="w">       </span><span class="nv">TAP</span><span class="w">         </span><span class="nv">fIRST</span><span class="w">       </span><span class="nv">TAP</span><span class="w">         </span><span class="nv">TAP</span>
<span class="nv">RATE</span><span class="w">      </span><span class="nv">RATE</span><span class="w">        </span><span class="nv">TAPE</span><span class="w">        </span><span class="nv">rAT</span><span class="w">         </span><span class="nv">RATE</span>
<span class="nv">FiRST</span><span class="w">     </span><span class="nv">rAT</span><span class="w">         </span><span class="nv">TAP</span><span class="w">         </span><span class="nv">RATE</span><span class="w">        </span><span class="nv">rAT</span>
<span class="nv">FIRST</span><span class="w">     </span><span class="nv">RAT</span><span class="w">         </span><span class="nv">RATE</span><span class="w">        </span><span class="nv">RAT</span><span class="w">         </span><span class="nv">RAT</span>
<span class="nv">rAT</span><span class="w">       </span><span class="nv">MAT</span><span class="w">         </span><span class="nv">RAT</span><span class="w">         </span><span class="nv">MAT</span><span class="w">         </span><span class="nv">MAT</span>
<span class="nv">fIRST</span><span class="w">     </span><span class="nv">fIRST</span><span class="w">       </span><span class="nv">MAT</span><span class="w">         </span><span class="nv">fIRST</span><span class="w">       </span><span class="nv">FIRsT</span>
<span class="nv">TAPE</span><span class="w">      </span><span class="nv">FiRST</span><span class="w">       </span><span class="nv">FiRST</span><span class="w">       </span><span class="nv">FiRST</span><span class="w">       </span><span class="nv">FiRST</span>
<span class="nv">MAT</span><span class="w">       </span><span class="nv">FIRsT</span><span class="w">       </span><span class="nv">FIRsT</span><span class="w">       </span><span class="nv">FIRsT</span><span class="w">       </span><span class="nv">FIRST</span>
<span class="nv">RAT</span><span class="w">       </span><span class="nv">FIRST</span><span class="w">       </span><span class="nv">FIRST</span><span class="w">       </span><span class="nv">FIRST</span><span class="w">       </span><span class="nv">fIRST</span>
</code></pre></div></p>
<p><code>⎕IO</code> is an implicit argument of Grade Down.</p>
</article>
<article id="primitive-functions-grade-up-monadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-grade-up-monadic-header">Grade Up (Monadic)</h3><div class="command">R←⍋Y</div></div>
<p><code>Y</code> may be any array of rank greater than 0 but may not contain namespaces.  <code>R</code> is an integer vector being the permutation of <code>⍳1↑⍴Y</code> that places the sub-arrays along the first axis in ascending order. The rules for comparing items of <code>Y</code> with one another are as follows:</p>
<h5>Rules for comparing simple scalars</h5>
<ul>
<li>Numeric comparisons are  exact, as if <code>⎕CT←⎕DCT←0</code> and <code>⎕FR←1287</code></li>
<li>Two real numbers are compared numerically, thus 1.2 precedes 3.</li>
<li>In the  Unicode Edition two characters are compared numerically according to their position in the Unicode table. Thus <code>'a'</code> (<code>⎕UCS 97</code>) precedes<code>'b'</code> (<code>⎕UCS 98</code>). In the Classic Edition characters are compared according to their index in <code>⎕AV</code>.</li>
<li>Complex numbers are ordered by first comparing their real parts. If these are equal, the order is determined by comparing their imaginary parts.Thus <code>1J¯2</code> precedes <code>1</code> which precedes <code>1J2</code>.</li>
<li><code>⎕NULL</code> (which represents a null item obtained from an external source) precedes all numbers, and all numbers precede all characters.Thus <code>⎕NULL</code> precedes 100, and 100 precedes <code>'A'</code>. </li>
</ul>
<h5>Rules for comparing non-scalar arrays</h5>
<ul>
<li>Arrays are compared item by item in ravel order.</li>
<li>For arrays of equal  shape, the order is determined by the first pair of items which differ, thus <code>(1949 4 29)</code> precedes <code>(1949 4 30)</code>. Similarly <code>('April' 29)</code> precedes <code>('April' 30)</code>.</li>
<li>Arrays with the same rank but different shape are ordered as if the shorter array were padded with items that precede all other types of item (negative infinity) including <code>⎕NULL</code>. Thus <code>'car'</code> precedes <code>'carpet'</code>and <code>(1949 4)</code> precedes <code>(1949 4 30)</code>. An alternative model is to say that shorter arrays precede longer ones that begin the same way. For character vectors this is described as Lexicographical ordering, which is the order that words appear in a dictionary.</li>
<li>Arrays with differing rank are ordered by first extending the shape of the lower-ranked array with 1s at the beginning, and then comparing the resultant equal-rank arrays as described above. So, to compare a vector (rank 1) with a matrix (rank 2), the vector is reshaped into a 1-row matrix.</li>
<li>Empty arrays are compared first by type alone, so an empty numeric array precedes an empty character array, regardless of rank or shape.Thus <code>((0 3 2)⍴0)</code> precedes <code>''</code>. If the empty arrays are of the same type, they are sorted in order of their shape vector, working right to left.So <code>((0 5 2)⍴99)</code> precedes <code>((0 3 4)⍴0)</code>  and<code>((0 3 4)⍴'')</code> precedes <code>((1 0 5 4)⍴'')</code>.</li>
</ul>
<p><code>⎕IO</code> is an implicit argument of Grade Up</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍋</span><span class="m">22.5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯4</span>
<span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span>

<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>

<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⍋</span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<p><strong>Note that character arrays sort differently in the Unicode and Classic Editions.</strong>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="nv">Goldilocks</span>
<span class="nv">porridge</span><span class="w">   </span>
<span class="nv">Porridge</span><span class="w">   </span>
<span class="m">3</span><span class="w"> </span><span class="nv">bears</span><span class="w">   </span>
</code></pre></div></p>
<table>
<thead>
<tr>
<th>Unicode Edition</th>
<th>Classic Edition</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apl       ⍋M 4 1 3 2</code></td>
<td><code>apl       ⍋M 2 4 1 3</code></td>
</tr>
<tr>
<td><code>apl       M[⍋M;] 3 bears Goldilocks Porridge porridge</code></td>
<td><code>apl       M[⍋M;] porridge 3 bears Goldilocks Porridge</code></td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">pb</span>
<span class="m">6</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="nv">pb</span>
<span class="err">┌────────┬─────┬───┐</span>
<span class="err">│</span><span class="nv">Rivers</span><span class="w">  </span><span class="err">│</span><span class="nv">Jason</span><span class="err">│</span><span class="m">554</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Daintree</span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">532</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Rivers</span><span class="w">  </span><span class="err">│</span><span class="nv">Jason</span><span class="err">│</span><span class="m">543</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Foad</span><span class="w">    </span><span class="err">│</span><span class="nv">Jay</span><span class="w">  </span><span class="err">│</span><span class="m">558</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Scholes</span><span class="w"> </span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">547</span><span class="err">│</span>
<span class="err">├────────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Scholes</span><span class="w"> </span><span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="err">│</span><span class="m">535</span><span class="err">│</span>
<span class="err">└────────┴─────┴───┘</span>
<span class="w">      </span><span class="o">⍋</span><span class="nv">pb</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></td>
</tr>
</tbody>
</table>
</article>
<article id="primitive-functions-grade-up-dyadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-grade-up-dyadic-header">Grade Up (Dyadic)</h3><div class="command">R←X⍋Y</div></div>
<p><code>Y</code> must be a simple character array of rank greater than 0.  <code>X</code> must be a simple character array of rank 1 or greater.  <code>R</code> is a simple integer vector being the permutation of <code>⍳1↑⍴Y</code> that places the sub-arrays of <code>Y</code> along the first axis in ascending order according to the collation sequence <code>X</code>.</p>
<p>If <code>X</code> is a vector, the following identity holds:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="o">⍋</span><span class="nv">Y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">⍋</span><span class="nv">X</span><span class="o">⍳</span><span class="nv">Y</span>
</code></pre></div></p>
<p>If <code>X</code> is a higher-rank array, each axis of <code>X</code> represents a grading attribute in increasing order of importance (the first axis is the least significant and the last axis is the most significant).  If a character is repeated in <code>X</code>, it is treated as though it were located at the position in the array determined by the lowest index in each axis for all occurrences of the character.  The character has the same weighting as the character located at the derived position in <code>X</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="s1">'ABBA'</span><span class="p">)</span><span class="w"> </span><span class="o">⍋</span><span class="w"> </span><span class="s1">'AB'</span><span class="sr">[</span><span class="o">?</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">2</span><span class="sr">]</span><span class="w"> </span><span class="c1">⍝ A and B are equivalent</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">        </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">14</span><span class="o">⍴</span><span class="s1">' abcdegiklmnrt ABCDEGIKLMNRT'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="nv">abcdegiklmnrt</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="nv">ABCDEGIKLMNRT</span><span class="err">│</span>
<span class="err">└──────────────┘</span>

<span class="w">      </span><span class="nv">V</span><span class="kd">←</span><span class="s1">'Ab'</span><span class="w"> </span><span class="s1">'AB'</span><span class="w"> </span><span class="s1">'aba'</span><span class="w"> </span><span class="s1">'ABA'</span><span class="w"> </span><span class="s1">'abaca'</span><span class="w"> </span><span class="s1">'abecedarian'</span>
<span class="w">      </span><span class="nv">V</span><span class="o">,</span><span class="kd">←</span><span class="s1">'Abelian'</span><span class="w"> </span><span class="s1">'black'</span><span class="w"> </span><span class="s1">'blackball'</span><span class="w"> </span><span class="s1">'black belt'</span>
<span class="w">      </span><span class="nv">V</span><span class="o">,</span><span class="kd">←</span><span class="s1">'blacking'</span><span class="w"> </span><span class="s1">'Black Mass'</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">M</span><span class="kd">←</span><span class="o">↑</span><span class="nv">V</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span>
<span class="o">↓</span><span class="nv">Ab</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="nv">AB</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="nv">aba</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="nv">ABA</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="nv">abaca</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">abecedarian</span><span class="err">│</span>
<span class="err">│</span><span class="nv">Abelian</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="nv">black</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">blackball</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="nv">black</span><span class="w"> </span><span class="nv">belt</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="nv">blacking</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Black</span><span class="w"> </span><span class="nv">Mass</span><span class="w"> </span><span class="err">│</span>
<span class="err">└───────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="p">(</span><span class="nv">M</span><span class="sr">[</span><span class="p">(</span><span class="o">,</span><span class="nv">A</span><span class="p">)</span><span class="o">⍋</span><span class="nv">M</span><span class="sr">;]</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">M</span><span class="sr">[</span><span class="p">(</span><span class="o">,⍉</span><span class="nv">A</span><span class="p">)</span><span class="o">⍋</span><span class="nv">M</span><span class="sr">;]</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">M</span><span class="sr">[</span><span class="nv">A</span><span class="o">⍋</span><span class="nv">M</span><span class="sr">;]</span><span class="p">)</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">Ab</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">aba</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">aba</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">Ab</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">AB</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abaca</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abaca</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">AB</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">aba</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abecedarian</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abecedarian</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">aba</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">ABA</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Ab</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">ABA</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abaca</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w"> </span><span class="nv">belt</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Abelian</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abaca</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abecedarian</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blackball</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">AB</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">abecedarian</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Abelian</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blacking</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">ABA</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Abelian</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Ab</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blackball</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Abelian</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w"> </span><span class="nv">belt</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w"> </span><span class="nv">belt</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">black</span><span class="w"> </span><span class="nv">belt</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">AB</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blackball</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Black</span><span class="w"> </span><span class="nv">Mass</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blacking</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">ABA</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blacking</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blackball</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Black</span><span class="w"> </span><span class="nv">Mass</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Black</span><span class="w"> </span><span class="nv">Mass</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Black</span><span class="w"> </span><span class="nv">Mass</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">blacking</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────────────────────────────────────┘'</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-greater">
<div class="heading-container"><h3 class="heading" id="primitive-functions-greater-header">Greater</h3><div class="command">R←X&gt;Y</div></div>
<p><code>Y</code> must be numeric.  <code>X</code> must be numeric.  <code>R</code> is Boolean.  <code>R</code> is 1 if <code>X</code> is greater than <code>Y</code> and <code>X=Y</code> is 0.  Otherwise <code>R</code> is 0.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Greater.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">2</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1.00000000001</span><span class="w"> </span><span class="m">1.000000001</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-greater-or-equal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-greater-or-equal-header">Greater Or Equal</h3><div class="command">R←X≥Y</div></div>
<p><code>Y</code> must be numeric.  <code>X</code> must be numeric.  <code>R</code> is Boolean.  <code>R</code> is 1 if <code>X</code> is greater than <code>Y</code> or <code>X=Y</code>.  Otherwise <code>R</code> is 0.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Greater Or Equal.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">≥</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>

<span class="w">      </span><span class="m">1</span><span class="o">≥</span><span class="m">1</span>
<span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="o">≥</span><span class="m">1.00000000001</span>
<span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="o">≥</span><span class="m">1.00000001</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-index">
<div class="heading-container"><h3 class="heading" id="primitive-functions-index-header">Index</h3><div class="command">R←X⌷Y</div></div>
<p><code>X</code> must be a scalar or vector of depth <code>≤2</code> of integers each <code>≥⎕IO</code>. <code>Y</code> may be any array. In general, the result <code>R</code> is similar to that obtained by square-bracket indexing in that:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">I</span><span class="w"> </span><span class="nv">J</span><span class="w"> </span><span class="na">...</span><span class="w"> </span><span class="o">⌷</span><span class="w"> </span><span class="nv">Y</span><span class="p">)</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="nv">Y</span><span class="sr">[</span><span class="nv">I</span><span class="sr">;</span><span class="nv">J</span><span class="sr">;</span><span class="na">...</span><span class="sr">]</span>
</code></pre></div></p>
<p>The length of left argument <code>X</code> must be less than or equal to the rank of right argument <code>Y</code>. Any missing trailing items of <code>X</code> default to the index vector of the corresponding axis of <code>Y</code>.</p>
<p>Note that in common with square-bracket indexing, items of the left argument <code>X</code> may be of any rank and that the shape of the result is the concatenation of the shapes of the items of the left argument:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⍴</span><span class="nv">X</span><span class="o">⌷</span><span class="nv">Y</span><span class="p">)</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="o">↑,</span><span class="na">/</span><span class="o">⍴</span><span class="na">¨</span><span class="nv">X</span>
</code></pre></div></p>
<p>Index is sometimes referred to as <em>squad indexing</em>.</p>
<p>Note that index may be used with selective specification.</p>
<p><code>⎕IO</code> is an implicit argument of index.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span>

<span class="w">      </span><span class="nv">VEC</span><span class="kd">←</span><span class="m">111</span><span class="w"> </span><span class="m">222</span><span class="w"> </span><span class="m">333</span><span class="w"> </span><span class="m">444</span>
<span class="w">      </span><span class="m">3</span><span class="o">⌷</span><span class="nv">VEC</span>
<span class="m">333</span>
<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">⌷</span><span class="nv">VEC</span>
<span class="m">444</span><span class="w"> </span><span class="m">333</span>
<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">⌷</span><span class="nv">VEC</span>
<span class="m">333</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">444</span>
<span class="m">111</span><span class="w"> </span><span class="m">222</span><span class="w"> </span><span class="m">333</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">MAT</span><span class="kd">←</span><span class="m">10</span><span class="o">⊥</span><span class="na">¨</span><span class="o">⍳</span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
<span class="m">31</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">34</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">21</span>
<span class="w">      </span><span class="m">2</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">32</span><span class="w"> </span><span class="m">31</span>
<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">1</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">21</span><span class="w"> </span><span class="m">31</span>
<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="o">,</span><span class="m">1</span><span class="p">)</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">21</span>
<span class="m">31</span>
<span class="w">      </span><span class="o">⍴</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="m">1</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">2</span><span class="p">)</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴</span><span class="no">⍬</span><span class="w"> </span><span class="no">⍬</span><span class="o">⌷</span><span class="nv">MAT</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="p">(</span><span class="m">3</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="o">⌷</span><span class="nv">MAT</span><span class="p">)</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">MAT</span><span class="w">    </span><span class="c1">⍝ Selective assignment.</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">34</span>
</code></pre></div></p>
<h5>Indexing  Classes</h5>
<p>If <code>Y</code> is a ref to an instance of a Class with a Default property, <code>⌷</code> is applied to the Default property. Similarly, <code>⌷</code> applied to a COM or .NET collection returns the appropriate item(s) of the collection.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">c</span>
<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">c</span><span class="w">                 </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Property</span><span class="w"> </span><span class="nv">Default</span><span class="w"> </span><span class="nv">p</span><span class="w">  </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span><span class="w"> </span><span class="nv">Shared</span>
<span class="w">        </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">get</span><span class="w">          </span>
<span class="w">          </span><span class="nv">r</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="nf">⎕A</span><span class="w">     </span>
<span class="w">        </span><span class="bp">∇</span><span class="w">                </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndProperty</span><span class="w">         </span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w">                </span>

<span class="w">      </span><span class="m">2</span><span class="o">⌷</span><span class="nv">c</span>
<span class="nv">MNOP</span>
<span class="nv">QRST</span>
<span class="nv">UVWX</span>
</code></pre></div>
</article>
<article id="primitive-functions-index-with-axes">
<div class="heading-container"><h3 class="heading" id="primitive-functions-index-with-axes-header">Index with Axes</h3><div class="command">R←{X}⌷[K]Y</div></div>
<p><code>X</code> must be a scalar or vector of depth <code>≤2</code>, of integers each <code>≥⎕IO</code>. <code>Y</code> may be any array. <code>K</code> is a simple scalar or vector specifying axes of <code>Y</code>. The length of <code>K</code> must be the same as the length of <code>X</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⍴,</span><span class="nv">X</span><span class="p">)</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="o">⍴,</span><span class="nv">K</span>
</code></pre></div></p>
<p>In general, the result <code>R</code> is similar to that obtained by square-bracket indexing with elided subscripts. Items of <code>K</code> distribute items of <code>X</code> along the axes of <code>Y</code>. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">I</span><span class="w"> </span><span class="nv">J</span><span class="w"> </span><span class="o">⌷</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="w"> </span><span class="nv">Y</span><span class="w">  </span><span class="kd">←→</span><span class="w">  </span><span class="nv">Y</span><span class="sr">[</span><span class="nv">I</span><span class="sr">;;</span><span class="nv">J</span><span class="sr">]</span><span class="w"> </span>
</code></pre></div></p>
<p>Note that index with axis may be used with selective specification. <code>⎕IO</code> is an implicit argument of index with axis.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span>

<span class="w">     </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">CUBE</span><span class="kd">←</span><span class="m">10</span><span class="o">⊥</span><span class="na">¨</span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">111</span><span class="w"> </span><span class="m">112</span><span class="w"> </span><span class="m">113</span><span class="w"> </span><span class="m">114</span>
<span class="m">121</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="m">123</span><span class="w"> </span><span class="m">124</span>
<span class="m">131</span><span class="w"> </span><span class="m">132</span><span class="w"> </span><span class="m">133</span><span class="w"> </span><span class="m">134</span>

<span class="m">211</span><span class="w"> </span><span class="m">212</span><span class="w"> </span><span class="m">213</span><span class="w"> </span><span class="m">214</span>
<span class="m">221</span><span class="w"> </span><span class="m">222</span><span class="w"> </span><span class="m">223</span><span class="w"> </span><span class="m">224</span>
<span class="m">231</span><span class="w"> </span><span class="m">232</span><span class="w"> </span><span class="m">233</span><span class="w"> </span><span class="m">234</span>

<span class="w">      </span><span class="m">2</span><span class="o">⌷</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">CUBE</span>
<span class="m">211</span><span class="w"> </span><span class="m">212</span><span class="w"> </span><span class="m">213</span><span class="w"> </span><span class="m">214</span>
<span class="m">221</span><span class="w"> </span><span class="m">222</span><span class="w"> </span><span class="m">223</span><span class="w"> </span><span class="m">224</span>
<span class="m">231</span><span class="w"> </span><span class="m">232</span><span class="w"> </span><span class="m">233</span><span class="w"> </span><span class="m">234</span>

<span class="w">      </span><span class="m">2</span><span class="o">⌷</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">CUBE</span>
<span class="m">112</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="m">132</span>
<span class="m">212</span><span class="w"> </span><span class="m">222</span><span class="w"> </span><span class="m">232</span>

<span class="w">      </span><span class="nv">CUBE</span><span class="sr">[;;</span><span class="m">2</span><span class="sr">]</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="m">2</span><span class="o">⌷</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">CUBE</span>
<span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">4</span><span class="o">⌷</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">CUBE</span>
<span class="m">114</span><span class="w"> </span><span class="m">134</span>
<span class="m">214</span><span class="w"> </span><span class="m">234</span>

<span class="w">      </span><span class="nv">CUBE</span><span class="sr">[;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">;</span><span class="m">4</span><span class="sr">]</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">4</span><span class="o">⌷</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">CUBE</span>
<span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="o">⌷</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">CUBE</span><span class="p">)</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">CUBE</span><span class="w"> </span><span class="c1">⍝ Selective assignment.</span>
<span class="m">111</span><span class="w"> </span><span class="m">112</span><span class="w"> </span><span class="m">113</span><span class="w"> </span><span class="m">114</span>
<span class="m">121</span><span class="w"> </span><span class="m">122</span><span class="w"> </span><span class="m">123</span><span class="w"> </span><span class="m">124</span>
<span class="m">131</span><span class="w"> </span><span class="m">132</span><span class="w"> </span><span class="m">133</span><span class="w"> </span><span class="m">134</span>

<span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">212</span><span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">214</span>
<span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">222</span><span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">224</span>
<span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">232</span><span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">234</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-index-generator">
<div class="heading-container"><h3 class="heading" id="primitive-functions-index-generator-header">Index Generator</h3><div class="command">R←⍳Y</div></div>
<p><code>Y</code> must be a simple scalar or vector array of non-negative numbers. <code>R</code> is a numeric array composed of the set of all possible coordinates of an array of shape <code>Y</code>. The shape of <code>R</code> is <code>Y</code> and each element of <code>R</code> occurs in its self-indexing position in <code>R</code>. In particular, the following identity holds:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍳</span><span class="nv">Y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="nv">Y</span><span class="p">)</span><span class="sr">[</span><span class="o">⍳</span><span class="nv">Y</span><span class="sr">]</span>
</code></pre></div></p>
<p><code>⎕IO</code> is an implicit argument of Index Generator. This function is also known as Interval.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⍴⍳</span><span class="m">0</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">⊢</span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'MAINEXIT'</span>
<span class="nv">MAIN</span>
<span class="nv">EXIT</span>
<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="o">⍳⍴</span><span class="nv">A</span><span class="sr">]</span>
<span class="nv">MAIN</span>
<span class="nv">EXIT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="o">⍳⍴</span><span class="nv">A</span><span class="sr">]</span>
<span class="nv">MAIN</span>
<span class="nv">EXIT</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-index-of">
<div class="heading-container"><h3 class="heading" id="primitive-functions-index-of-header">Index Of</h3><div class="command">R←X⍳Y</div></div>
<p><code>Y</code> may be any array. <code>X</code> may be any array of rank 1 or more.</p>
<p>In general, the function locates the first occurrence of sub-arrays in <code>Y</code> which match major cells of  <code>X</code>, where a major cell is  a sub-array on the leading dimension of <code>X</code> with shape <code>1↓⍴X</code>. The shape of the result <code>R</code> is <code>(1-⍴⍴X)↓⍴Y</code>.</p>
<p>If a sub-array of <code>Y</code> cannot be found in <code>X</code>, then the corresponding element of <code>R</code> will be <code>⎕IO+⊃⍴X</code>.</p>
<p>In particular, if <code>X</code> is a vector, the result <code>R</code> is a simple integer array with the same shape as <code>Y</code> identifying where elements of <code>Y</code> are first found in <code>X</code>. If an element of <code>Y</code> cannot be found in <code>X</code>, then the corresponding element of <code>R</code> will be <code>⎕IO+⊃⍴X</code>.</p>
<p>Elements of <code>X</code> and <code>Y</code> are considered the same if <code>X≡Y</code> returns 1 for those elements.</p>
<p><code>⎕IO</code>,  <code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments of Index Of.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="o">⍳</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'MOUSE'</span><span class="o">⍳</span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'BIRD'</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span>
<span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="o">⍳</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="w">      </span><span class="nv">Y</span>
<span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="w">      </span><span class="nv">X</span><span class="o">⍳</span><span class="nv">Y</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="nv">X</span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span>
<span class="m">4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X1</span><span class="kd">←</span><span class="m">10</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">1000</span><span class="na">∘.</span><span class="o">+</span><span class="nv">X</span>
<span class="w">      </span><span class="nv">X1</span>
<span class="w">  </span><span class="m">11</span><span class="w">   </span><span class="m">12</span><span class="w">   </span><span class="m">13</span><span class="w">   </span><span class="m">14</span>
<span class="w">  </span><span class="m">15</span><span class="w">   </span><span class="m">16</span><span class="w">   </span><span class="m">17</span><span class="w">   </span><span class="m">18</span>
<span class="w">  </span><span class="m">19</span><span class="w">   </span><span class="m">20</span><span class="w">   </span><span class="m">21</span><span class="w">   </span><span class="m">22</span>

<span class="w"> </span><span class="m">101</span><span class="w">  </span><span class="m">102</span><span class="w">  </span><span class="m">103</span><span class="w">  </span><span class="m">104</span>
<span class="w"> </span><span class="m">105</span><span class="w">  </span><span class="m">106</span><span class="w">  </span><span class="m">107</span><span class="w">  </span><span class="m">108</span>
<span class="w"> </span><span class="m">109</span><span class="w">  </span><span class="m">110</span><span class="w">  </span><span class="m">111</span><span class="w">  </span><span class="m">112</span>

<span class="m">1001</span><span class="w"> </span><span class="m">1002</span><span class="w"> </span><span class="m">1003</span><span class="w"> </span><span class="m">1004</span>
<span class="m">1005</span><span class="w"> </span><span class="m">1006</span><span class="w"> </span><span class="m">1007</span><span class="w"> </span><span class="m">1008</span>
<span class="m">1009</span><span class="w"> </span><span class="m">1010</span><span class="w"> </span><span class="m">1011</span><span class="w"> </span><span class="m">1012</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X1</span><span class="o">⍳</span><span class="m">100</span><span class="w"> </span><span class="m">1000</span><span class="na">∘.</span><span class="o">+</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span>
<span class="nv">United</span><span class="w"> </span><span class="nv">Kingdom</span>
<span class="nv">Germany</span><span class="w">       </span>
<span class="nv">France</span><span class="w">        </span>
<span class="nv">Italy</span><span class="w">         </span>
<span class="nv">United</span><span class="w"> </span><span class="nv">States</span><span class="w"> </span>
<span class="nv">Canada</span><span class="w">        </span>
<span class="nv">Japan</span><span class="w">         </span>
<span class="nv">Canada</span><span class="w">        </span>
<span class="nv">France</span><span class="w">        </span>
<span class="w">      </span><span class="nv">y</span>
<span class="nv">United</span><span class="w"> </span><span class="nv">Kingdom</span>
<span class="nv">Germany</span><span class="w">       </span>
<span class="nv">France</span><span class="w">        </span>
<span class="nv">Italy</span><span class="w">         </span>
<span class="nv">USA</span><span class="w">           </span>

<span class="nv">Canada</span><span class="w">        </span>
<span class="nv">Japan</span><span class="w">         </span>
<span class="nv">China</span><span class="w">         </span>
<span class="nv">India</span><span class="w">         </span>
<span class="nv">Deutschland</span><span class="w">   </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">9</span><span class="w"> </span><span class="m">14</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">y</span>
<span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">14</span>
<span class="w">      </span><span class="nv">x</span><span class="o">⍳</span><span class="nv">y</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">10</span>
<span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>

<span class="w">      </span><span class="nv">x</span><span class="o">⍳</span><span class="nv">x</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>Note that the expression <code>y⍳x</code> signals a <code>LENGTH ERROR</code> because it looks for major cells in the left argument, whose shape is <code>5 14</code> (that is <code>1↓⍴y</code>), which is not the same as the trailing shape of <code>x</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">y</span><span class="o">⍳</span><span class="nv">x</span>
<span class="nv">LENGTH</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nv">y</span><span class="o">⍳</span><span class="nv">x</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div></p>
<p>For performance information, see <i>Programmer's Guide: Search Functions and Hash Tables</i>.</p>
</article>
<article id="primitive-functions-indexing">
<div class="heading-container"><h3 class="heading" id="primitive-functions-indexing-header">Indexing</h3><div class="command">R←X[Y]</div></div>
<p><code>X</code> may be  any array. <code>Y</code> must be a valid index specification. <code>R</code> is an array composed of elements indexed from <code>X</code> and the shape of <code>X</code> is determined by the index specification.</p>
<p>This form of Indexing, using brackets, does not follow the normal syntax of a dyadic function. For an alternative method of indexing, see <a class="internal-link" href="#primitive-functions-index-of">Section 1.4.48</a>.</p>
<p><code>⎕IO</code> is an implicit argument of Indexing.</p>
<p>Three forms of indexing are permitted. The form used is determined by context.</p>
<h5>Simple Indexing</h5>
<p>For vector <code>X</code>, <code>Y</code> is a simple integer array composed of items from the set <code>⍳⍴X</code>.</p>
<p><code>R</code> consists of elements selected according to index positions in <code>Y</code>. <code>R</code> has the same shape as <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">50</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span>
<span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>
<span class="m">20</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">20</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span>
<span class="m">30</span>

<span class="w">      </span><span class="s1">'ONE'</span><span class="w"> </span><span class="s1">'TWO'</span><span class="w"> </span><span class="s1">'THREE'</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span>
<span class="w"> </span><span class="nv">TWO</span>
</code></pre></div>
<p>For matrix <code>X</code>, <code>Y</code> is composed of two simple integer arrays separated by the semicolon character (<code>;</code>). The arrays select indices from the rows and columns of <code>X</code> respectively.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">M</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">10</span><span class="o">×⍳</span><span class="m">8</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="m">2</span><span class="sr">;</span><span class="m">3</span><span class="sr">]</span>
<span class="m">70</span>
</code></pre></div>
<p>For higher-rank array <code>X</code>, <code>Y</code> is composed of a simple integer array for each axis of <code>X</code> with adjacent arrays separated by a single semicolon character (<code>;</code>). The arrays select indices from the respective axes of <code>X</code>, taken in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">10</span><span class="o">×⍳</span><span class="m">24</span>
<span class="w"> </span><span class="m">10</span><span class="w">  </span><span class="m">20</span><span class="w">  </span><span class="m">30</span><span class="w">  </span><span class="m">40</span>
<span class="w"> </span><span class="m">50</span><span class="w">  </span><span class="m">60</span><span class="w">  </span><span class="m">70</span><span class="w">  </span><span class="m">80</span>
<span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">110</span><span class="w"> </span><span class="m">120</span>

<span class="m">130</span><span class="w"> </span><span class="m">140</span><span class="w"> </span><span class="m">150</span><span class="w"> </span><span class="m">160</span>
<span class="m">170</span><span class="w"> </span><span class="m">180</span><span class="w"> </span><span class="m">190</span><span class="w"> </span><span class="m">200</span>
<span class="m">210</span><span class="w"> </span><span class="m">220</span><span class="w"> </span><span class="m">230</span><span class="w"> </span><span class="m">240</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">1</span><span class="sr">;</span><span class="m">1</span><span class="sr">;</span><span class="m">1</span><span class="sr">]</span>
<span class="m">10</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">2</span><span class="sr">;</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="sr">;</span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span>
<span class="m">240</span><span class="w"> </span><span class="m">210</span>
<span class="m">200</span><span class="w"> </span><span class="m">170</span>
</code></pre></div>
<p>If an indexing array is omitted for the <code>K</code>th axis, the index vector <code>⍳(⍴X)[K]</code> is assumed for that axis.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="sr">[;</span><span class="m">2</span><span class="sr">;]</span>
<span class="w"> </span><span class="m">50</span><span class="w">  </span><span class="m">60</span><span class="w">  </span><span class="m">70</span><span class="w">  </span><span class="m">80</span>
<span class="m">170</span><span class="w"> </span><span class="m">180</span><span class="w"> </span><span class="m">190</span><span class="w"> </span><span class="m">200</span>

<span class="w">      </span><span class="nv">M</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[;]</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="m">1</span><span class="sr">;]</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[;</span><span class="m">1</span><span class="sr">]</span>
<span class="m">10</span><span class="w"> </span><span class="m">50</span>
</code></pre></div>
<h5>Choose Indexing</h5>
<p>The index specification <code>Y</code> is a non-simple array. Each item identifies a single element of <code>X</code> by a set of indices with one element per axis of <code>X</code> in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="o">⊂</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span>
<span class="m">20</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴⊂</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span>
<span class="m">80</span><span class="w"> </span><span class="m">80</span>
<span class="m">80</span><span class="w"> </span><span class="m">80</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="sr">]</span>
<span class="m">50</span><span class="w"> </span><span class="m">20</span>
</code></pre></div>
<p>A scalar may be indexed by the enclosed empty vector:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">S</span><span class="kd">←</span><span class="s1">'Z'</span>
<span class="w">      </span><span class="nv">S</span><span class="sr">[</span><span class="m">3</span><span class="o">⍴⊂⍳</span><span class="m">0</span><span class="sr">]</span>
<span class="nv">ZZZ</span>
</code></pre></div></p>
<p>Simple and Choose indexing are indistinguishable for vector <code>X</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">V</span><span class="kd">←</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="o">⊂</span><span class="m">2</span><span class="sr">]</span>
<span class="m">20</span>
<span class="w">      </span><span class="o">⊂</span><span class="m">2</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span>
<span class="m">20</span>
</code></pre></div></p>
<h5>Reach Indexing</h5>
<p>The index specification <code>Y</code> is a non-simple integer array, each of whose items reach down to a nested element of <code>X</code>. The items of an item of <code>Y</code> are simple vectors (or scalars) forming sets of indices that index arrays at successive levels of <code>X</code> starting at the top-most level. A set of indices has one element per axis at the respective level of nesting of <code>X</code> in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">G</span><span class="kd">←</span><span class="p">(</span><span class="s1">'ABC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'DEF'</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="s1">'GHI'</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="s1">'JKL'</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
<span class="w">      </span><span class="nv">G</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="nv">G</span><span class="o">,</span><span class="p">(</span><span class="s1">'MNO'</span><span class="w"> </span><span class="m">5</span><span class="p">)(</span><span class="s1">'PQR'</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="w">      </span><span class="nv">G</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span><span class="w">   </span><span class="nv">DEF</span><span class="w">  </span><span class="m">2</span><span class="w">   </span><span class="nv">GHI</span><span class="w">  </span><span class="m">3</span>
<span class="w">  </span><span class="nv">JKL</span><span class="w">  </span><span class="m">4</span><span class="w">   </span><span class="nv">MNO</span><span class="w">  </span><span class="m">5</span><span class="w">   </span><span class="nv">PQR</span><span class="w">  </span><span class="m">6</span>

<span class="w">      </span><span class="nv">G</span><span class="sr">[</span><span class="p">((</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">1</span><span class="p">)((</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">2</span><span class="p">)</span><span class="sr">]</span>
<span class="w"> </span><span class="nv">DEF</span><span class="w">  </span><span class="m">6</span>

<span class="w">      </span><span class="nv">G</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴⊂</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">2</span><span class="sr">]</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="nv">G</span><span class="sr">[</span><span class="o">⊂⊂</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span>

<span class="w">      </span><span class="nv">G</span><span class="sr">[</span><span class="o">⊂</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="sr">]</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span>

<span class="w">      </span><span class="nv">V</span><span class="kd">←</span><span class="o">,</span><span class="nv">G</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="o">⊂⊂</span><span class="m">1</span><span class="sr">]</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="o">⊂</span><span class="m">1</span><span class="sr">]</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span>
</code></pre></div>
<h5>Indexing  Classes</h5>
<p>If <code>Y</code> is a ref to an instance of a Class with a Default property, indexing is applied to the Default property. Similarly, indexing applied to a .NET collection returns the appropriate item(s) of the collection.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">c</span>
<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">c</span><span class="w">                 </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Property</span><span class="w"> </span><span class="nv">Default</span><span class="w"> </span><span class="nv">p</span><span class="w">  </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span><span class="w"> </span><span class="nv">Shared</span>
<span class="w">        </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">get</span><span class="w">          </span>
<span class="w">          </span><span class="nv">r</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="nf">⎕A</span><span class="w">     </span>
<span class="w">        </span><span class="bp">∇</span><span class="w">                </span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndProperty</span><span class="w">         </span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w">                </span>
<span class="w">      </span><span class="nv">c</span><span class="sr">[</span><span class="m">2</span><span class="sr">;</span><span class="m">3</span><span class="sr">;]</span>
<span class="nv">UVWX</span>
</code></pre></div>
<p>See also: <a class="internal-link" href="#primitive-functions-index-of">Section 1.4.48</a>.</p>
</article>
<article id="primitive-functions-intersection">
<div class="heading-container"><h3 class="heading" id="primitive-functions-intersection-header">Intersection</h3><div class="command">R←X∩Y</div></div>
<p><code>Y</code> must be  a scalar or vector.  <code>X</code> must be a scalar or vector.  A scalar <code>X</code> or <code>Y</code> is treated as a one-element vector.  <code>R</code> is a vector composed of items occurring in both <code>X</code> and <code>Y</code> in the order of occurrence in <code>X</code>.  If an item is repeated in <code>X</code> and also occurs in <code>Y</code>, the item is also repeated in <code>R</code>.</p>
<p>Items in <code>X</code> and <code>Y</code> are considered the same if <code>X≡Y</code> returns 1 for those items.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Intersection.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'ABRA'</span><span class="o">∩</span><span class="s1">'CAR'</span>
<span class="nv">ARA</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="s1">'PLUS'</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">∩</span><span class="w"> </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<p>For performance information, see <i>Programmer's Guide: Search Functions and Hash Tables</i>.</p>
</article>
<article id="primitive-functions-interval-index">
<div class="heading-container"><h3 class="heading" id="primitive-functions-interval-index-header">Interval Index</h3><div class="command">R←X⍸Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⍸</code> (Iota Underbar) is not available in Classic Edition, and Interval Index is instead represented by <code>⎕U2378</code>.</p>
<p><code>X</code> is an ordered non-scalar array that represents a set of intervals or ranges.</p>
<p>Note that the <code>i</code><sup>th</sup> interval starts at  <code>X[i]</code>, then includes all subsequent values up to but not including <code>X[i+1]</code>.</p>
<p>For example, if <code>X</code> is  <code>(1 3 5)</code> it defines 4 intervals numbered 0 to 3 as follows.</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>less than 1</td>
<td><code>&lt;1</code></td>
</tr>
<tr>
<td>1</td>
<td>between 1 and 3</td>
<td><code>(≥1)∧(&lt;3)</code></td>
</tr>
<tr>
<td>2</td>
<td>between 3 and 5</td>
<td><code>(≥3)∧(&lt;5)</code></td>
</tr>
<tr>
<td>3</td>
<td>greater than or equal to 5</td>
<td><code>≥5</code></td>
</tr>
</tbody>
</table>
<p>If <code>X</code> is <code>'AEIOU'</code> it defines 6 intervals numbered 0 to 5 as follows:</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>before A</td>
<td><code>⎕UCS 0,⍳64</code></td>
</tr>
<tr>
<td>1</td>
<td>between A and E</td>
<td><code>ABCD</code></td>
</tr>
<tr>
<td>2</td>
<td>between E and I</td>
<td><code>EFGH</code></td>
</tr>
<tr>
<td>3</td>
<td>between I and O</td>
<td><code>IJKLMN</code></td>
</tr>
<tr>
<td>4</td>
<td>between O and U</td>
<td><code>OPQREST</code></td>
</tr>
<tr>
<td>5</td>
<td>U and after</td>
<td><code>UVWXYZ...</code></td>
</tr>
</tbody>
</table>
<p><code>Y</code> is an array of the same type (numeric or character) as <code>X</code>.</p>
<p>The result <code>R</code> is an integer array that identifies into which interval  the corresponding value in <code>Y</code> falls.</p>
<p>Like dyadic <code>⍳</code> (see <a class="internal-link" href="#primitive-functions-index-of">Section 1.4.48</a>), Interval Index works with major cells. For a vector these are its elements; for a matrix its rows, and so forth.</p>
<p><code>X</code> and <code>Y</code> are compared using  the same logic as monadic <code>⍋</code> (see <a class="internal-link" href="#primitive-functions-grade-up-monadic">Section 1.4.41</a>) which is independent of <code>⎕CT</code> and <code>⎕DCT</code>.</p>
<p><code>⎕IO</code> is an implicit argument of Interval Index. In all the following examples, <code>⎕IO</code> is 1.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="o">⍸</span><span class="m">11</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">21</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<p>In the above example:</p>
<ul>
<li>11 is between <code>X[1]</code> and <code>X[2]</code> so the answer is 1.</li>
<li>1 is less than  <code>X[1]</code> so the answer is 0</li>
<li>31 is greater than <code>X[⍴X]</code> so the answer is 3</li>
<li>21 is between <code>X[2]</code> and <code>X[3]</code> so the answer is 2.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'AEIOU'</span><span class="w"> </span><span class="o">⍸</span><span class="w"> </span><span class="s1">'DYALOG'</span>
<span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
</code></pre></div></li>
</ul>
<p>And in the alphabetic example above:</p>
<ul>
<li>"D" is between <code>X[1]</code> and <code>X[2]</code>, so the answer is 1</li>
<li>"Y" is after <code>X[⍴X]</code> so the answer is 5</li>
<li>"A" is between <code>X[1]</code> and <code>X[2]</code>, so the answer is 1</li>
<li>as so on ...</li>
</ul>
<h6>Example (Classification)</h6>
<p>Commercially, olive oil is graded as follows:</p>
<ul>
<li>if its acidity is less than 0.8%, as "Extra Virgin"</li>
<li>if its acidity is less than 2%, as "Virgin"</li>
<li>if its acidity is less than 3.3%, as "Ordinary"</li>
<li>otherwise, as "Lampante"
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">grades</span><span class="kd">←</span><span class="s1">'Extra Virgin'</span><span class="w"> </span><span class="s1">'Virgin'</span><span class="w"> </span><span class="s1">'Ordinary'</span><span class="w"> </span><span class="s1">'Lampante'</span>
<span class="w">     </span><span class="nv">acidity</span><span class="kd">←</span><span class="m">0.8</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3.3</span>

<span class="w">     </span><span class="nv">samples</span><span class="kd">←</span><span class="m">1.3</span><span class="w"> </span><span class="m">1.9</span><span class="w"> </span><span class="m">0.7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">.6</span><span class="w"> </span><span class="m">3.2</span>
<span class="w">     </span><span class="nv">acidity</span><span class="o">⍸</span><span class="nv">samples</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="w">     </span><span class="nv">samples</span><span class="o">,⍪</span><span class="nv">grades</span><span class="sr">[</span><span class="m">1</span><span class="o">+</span><span class="nv">acidity</span><span class="o">⍸</span><span class="nv">samples</span><span class="sr">]</span>
<span class="err">┌───┬────────────┐</span>
<span class="err">│</span><span class="m">1.3</span><span class="err">│</span><span class="nv">Virgin</span><span class="w">      </span><span class="err">│</span>
<span class="err">├───┼────────────┤</span>
<span class="err">│</span><span class="m">1.9</span><span class="err">│</span><span class="nv">Virgin</span><span class="w">      </span><span class="err">│</span>
<span class="err">├───┼────────────┤</span>
<span class="err">│</span><span class="m">0.7</span><span class="err">│</span><span class="nv">Extra</span><span class="w"> </span><span class="nv">Virgin</span><span class="err">│</span>
<span class="err">├───┼────────────┤</span>
<span class="err">│</span><span class="m">4</span><span class="w">  </span><span class="err">│</span><span class="nv">Lampante</span><span class="w">    </span><span class="err">│</span>
<span class="err">├───┼────────────┤</span>
<span class="err">│</span><span class="m">0.6</span><span class="err">│</span><span class="nv">Extra</span><span class="w"> </span><span class="nv">Virgin</span><span class="err">│</span>
<span class="err">├───┼────────────┤</span>
<span class="err">│</span><span class="m">3.2</span><span class="err">│</span><span class="nv">Ordinary</span><span class="w">    </span><span class="err">│</span>
<span class="err">└───┴────────────┘</span>
</code></pre></div></li>
</ul>
<h5>Example (Data Consolidation by Interval)</h5>
<p><code>x</code> represents some data sampled in chronological order at timestamps <code>t</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">200000</span>
<span class="w">      </span><span class="nv">x</span>
<span class="m">3984300</span><span class="w"> </span><span class="m">2020650</span><span class="w"> </span><span class="m">819000</span><span class="w"> </span><span class="m">1677100</span><span class="w"> </span><span class="m">3959200</span><span class="w"> </span><span class="m">2177250</span><span class="w"> </span><span class="m">3431800</span><span class="w"> </span><span class="na">...</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">t</span>
<span class="m">200000</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="o">↑</span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">¯10</span><span class="o">↑</span><span class="nv">t</span><span class="p">)</span>
<span class="err">┌─────┬────────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">54</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">55</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">56</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">56</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">58</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">58</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">59</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">59</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">59</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">59</span><span class="err">│</span>
<span class="err">└─────┴────────┘</span>
</code></pre></div></p>
<p><code>u</code> represents timestamps for 5-minute intervals:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">u</span>
<span class="m">288</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="o">↑</span><span class="nv">u</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">¯10</span><span class="o">↑</span><span class="nv">u</span><span class="p">)</span>
<span class="err">┌──────┬───────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">55</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└──────┴───────┘</span>
</code></pre></div></p>
<p>Therefore, the expression <code>(u⍸t){+/⍵}⌸x</code> summarises <code>x</code> in 5-minute intervals.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">u</span><span class="w"> </span><span class="o">⍸</span><span class="w"> </span><span class="nv">t</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="na">...</span><span class="w"> </span><span class="m">288</span><span class="w"> </span><span class="m">288</span><span class="w"> </span><span class="m">288</span><span class="w"> </span><span class="m">288</span><span class="w"> </span><span class="m">288</span><span class="w"> </span><span class="m">288</span>

<span class="w">      </span><span class="p">(</span><span class="nv">u</span><span class="o">⍸</span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="kt">{</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="w"> </span><span class="nv">x</span>
<span class="m">1339083050</span><span class="w"> </span><span class="m">1365108650</span><span class="w"> </span><span class="m">1541944750</span><span class="w"> </span><span class="m">1393476000</span><span class="w"> </span><span class="m">1454347100</span><span class="w"> </span><span class="na">...</span>

<span class="w">      </span><span class="p">(</span><span class="nv">u</span><span class="o">⍸</span><span class="nv">t</span><span class="p">)</span><span class="w"> </span><span class="kt">{</span><span class="p">(</span><span class="bp">⍺</span><span class="o">⌷</span><span class="nv">u</span><span class="p">)</span><span class="o">,+</span><span class="na">/</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="w"> </span><span class="nv">x</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1339083050</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1365108650</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1541944750</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1393476000</span>
<span class="w">   </span><span class="na">...</span>
<span class="m">23</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1388823150</span>
<span class="m">23</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1453472350</span>
<span class="m">23</span><span class="w"> </span><span class="m">55</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1492078850</span>
</code></pre></div></p>
<h6>Higher-Rank Left Argument</h6>
<p>If <code>X</code> is a higher rank array, the function compares sub-arrays in <code>Y</code>  with the major cells of  <code>X</code>, where a major cell is  a sub-array on the leading dimension of <code>X</code> with shape <code>1↓⍴X</code>. In this case, the shape of the result <code>R</code> is <code>(1-⍴⍴X)↓⍴Y</code>.</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">↑</span><span class="w"> </span><span class="s1">'Fi'</span><span class="w"> </span><span class="s1">'Jay'</span><span class="w"> </span><span class="s1">'John'</span><span class="w"> </span><span class="s1">'Morten'</span><span class="w"> </span><span class="s1">'Roger'</span>
<span class="w">      </span><span class="nv">x</span>
<span class="nv">Fi</span>
<span class="nv">Jay</span><span class="w">   </span>
<span class="nv">John</span><span class="w">  </span>
<span class="nv">Morten</span>
<span class="nv">Roger</span><span class="w"> </span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">y</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">⍪</span><span class="w"> </span><span class="o">↑</span><span class="w"> </span><span class="s1">'JD'</span><span class="w"> </span><span class="s1">'Jd'</span><span class="w"> </span><span class="s1">'Geoff'</span><span class="w"> </span><span class="s1">'Alpha'</span><span class="w"> </span><span class="s1">'Omega'</span><span class="w"> </span><span class="s1">'Zeus  '</span>
<span class="w">      </span><span class="nv">y</span>
<span class="nv">Fi</span>
<span class="nv">Jay</span><span class="w">   </span>
<span class="nv">John</span><span class="w">  </span>
<span class="nv">Morten</span>
<span class="nv">Roger</span><span class="w"> </span>
<span class="nv">JD</span><span class="w">    </span>
<span class="nv">Jd</span><span class="w">    </span>
<span class="nv">Geoff</span><span class="w"> </span>
<span class="nv">Alpha</span><span class="w"> </span>
<span class="nv">Omega</span><span class="w"> </span>
<span class="nv">Zeus</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="w"> </span><span class="o">⍸</span><span class="w"> </span><span class="nv">y</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="nv">y</span><span class="w"> </span><span class="o">,⍪</span><span class="w"> </span><span class="nv">x</span><span class="o">⍸</span><span class="nv">y</span>
<span class="nv">Fi</span><span class="w">     </span><span class="m">1</span>
<span class="nv">Jay</span><span class="w">    </span><span class="m">2</span>
<span class="nv">John</span><span class="w">   </span><span class="m">3</span>
<span class="nv">Morten</span><span class="w"> </span><span class="m">4</span>
<span class="nv">Roger</span><span class="w">  </span><span class="m">5</span>
<span class="nv">JD</span><span class="w">     </span><span class="m">1</span>
<span class="nv">Jd</span><span class="w">     </span><span class="m">2</span>
<span class="nv">Geoff</span><span class="w">  </span><span class="m">1</span>
<span class="nv">Alpha</span><span class="w">  </span><span class="m">0</span>
<span class="nv">Omega</span><span class="w">  </span><span class="m">4</span>
<span class="nv">Zeus</span><span class="w">   </span><span class="m">5</span>
</code></pre></div></p>
<h6>Further Example</h6>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">y</span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="nv">x</span>
<span class="nv">Fi</span><span class="w">    </span>
<span class="nv">Jay</span><span class="w">   </span>
<span class="nv">John</span><span class="w">  </span>
<span class="nv">Morten</span>
<span class="nv">Roger</span><span class="w"> </span>
<span class="w">      </span><span class="nv">y</span>
<span class="nv">Fi</span><span class="w">    </span>
<span class="nv">Jay</span><span class="w">   </span>
<span class="nv">John</span><span class="w">  </span>

<span class="nv">Morten</span>
<span class="nv">Roger</span><span class="w"> </span>
<span class="nv">JD</span><span class="w">    </span>

<span class="nv">Jd</span><span class="w">    </span>
<span class="nv">Geoff</span><span class="w"> </span>
<span class="nv">Alpha</span><span class="w"> </span>
<span class="w">      </span><span class="nv">x</span><span class="o">⍸</span><span class="nv">y</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<h6>Nested Array Example</h6>
<p>A card-player likes to sort a hand into suits spades, hearts, diamond, clubs (fortunately alphabetic) and high-to-low within each suit.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">suits</span><span class="kd">←</span><span class="s1">'Clubs'</span><span class="w"> </span><span class="s1">'Diamonds'</span><span class="w"> </span><span class="s1">'Hearts'</span><span class="w"> </span><span class="s1">'Spades'</span>
<span class="w">      </span><span class="nv">pack</span><span class="kd">←</span><span class="o">,</span><span class="p">(</span><span class="o">⊂</span><span class="na">¨</span><span class="nv">suits</span><span class="p">)</span><span class="na">∘.</span><span class="o">,</span><span class="m">1</span><span class="o">↓</span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ 11=Jack ... 14=Ace</span>
<span class="w">      </span><span class="nv">hand</span><span class="kd">←</span><span class="o">↑</span><span class="p">(</span><span class="o">,</span><span class="nv">pack</span><span class="p">)</span><span class="sr">[</span><span class="m">7</span><span class="o">?</span><span class="m">52</span><span class="sr">]</span>
<span class="w">      </span><span class="nv">hand</span><span class="kd">←</span><span class="nv">hand</span><span class="sr">[</span><span class="o">⍒</span><span class="nv">hand</span><span class="sr">;]</span>
<span class="w">      </span><span class="nv">hand</span>
<span class="err">┌────────┬──┐</span>
<span class="err">│</span><span class="nv">Spades</span><span class="w">  </span><span class="err">│</span><span class="m">12</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">12</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Diamonds</span><span class="err">│</span><span class="m">11</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Diamonds</span><span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Clubs</span><span class="w">   </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="err">│</span>
<span class="err">└────────┴──┘</span>
</code></pre></div></p>
<p>Another card, the 10 of diamonds is dealt. Where must it go in the hand ?
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊖</span><span class="nv">hand</span><span class="p">)</span><span class="o">⍸</span><span class="s1">'Diamonds'</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="c1">⍝ left arg must be sorted up</span>
<span class="m">2</span>
<span class="w">      </span><span class="p">(</span><span class="m">¯2</span><span class="o">↓</span><span class="nv">hand</span><span class="p">)</span><span class="o">⍪</span><span class="s1">'Diamonds'</span><span class="w"> </span><span class="m">10</span><span class="o">⍪</span><span class="m">¯2</span><span class="o">↑</span><span class="nv">hand</span>
<span class="err">┌────────┬──┐</span>
<span class="err">│</span><span class="nv">Spades</span><span class="w">  </span><span class="err">│</span><span class="m">12</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">12</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Hearts</span><span class="w">  </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Diamonds</span><span class="err">│</span><span class="m">11</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Diamonds</span><span class="err">│</span><span class="m">10</span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Diamonds</span><span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────┼──┤</span>
<span class="err">│</span><span class="nv">Clubs</span><span class="w">   </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="err">│</span>
<span class="err">└────────┴──┘</span>
</code></pre></div></p>
<p>Note that if <code>(∧/Y∊X)</code> and <code>X</code> is sorted and <code>⎕CT=0</code> ,then <code>x⍸y</code> is the same as <code>x⍳y</code>.</p>
</article>
<article id="primitive-functions-left">
<div class="heading-container"><h3 class="heading" id="primitive-functions-left-header">Left</h3><div class="command">R←X⊣Y</div></div>
<p><code>X</code> and <code>Y</code> may be any arrays.</p>
<p>The result <code>R</code> is the left argument <code>X</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">42</span><span class="o">⊣</span><span class="s1">'abc'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">42</span>
</code></pre></div>
<p>Note that when <code>⊣</code> is applied using reduction, the derived function selects the first sub-array of the array along the specified dimension. This is implemented as an idiom.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊣</span><span class="na">/</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span>

<span class="w">      </span><span class="nv">mat</span><span class="kd">←</span><span class="o">↑</span><span class="s1">'scent'</span><span class="w"> </span><span class="s1">'canoe'</span><span class="w"> </span><span class="s1">'arson'</span><span class="w"> </span><span class="s1">'rouse'</span><span class="w"> </span><span class="s1">'fleet'</span>
<span class="w">      </span><span class="o">⊣</span><span class="na">⌿</span><span class="nv">mat</span><span class="w">  </span><span class="c1">⍝ first row                          </span>
<span class="nv">scent</span>
<span class="w">      </span><span class="o">⊣</span><span class="na">/</span><span class="nv">mat</span><span class="w">  </span><span class="c1">⍝ first column                       </span>
<span class="nv">scarf</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊣</span><span class="na">/</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span><span class="w"> </span><span class="c1">⍝ first row from each plane</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
</code></pre></div></p>
<p>Similarly, with expansion:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊣</span><span class="na">\</span><span class="nv">mat</span>
<span class="nv">sssss</span>
<span class="nv">ccccc</span>
<span class="nv">aaaaa</span>
<span class="nv">rrrrr</span>
<span class="nv">fffff</span>
<span class="w">      </span><span class="o">⊣</span><span class="na">⍀</span><span class="nv">mat</span>
<span class="nv">scent</span>
<span class="nv">scent</span>
<span class="nv">scent</span>
<span class="nv">scent</span>
<span class="nv">scent</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-less">
<div class="heading-container"><h3 class="heading" id="primitive-functions-less-header">Less</h3><div class="command">R←X</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.  <code>R</code> is Boolean.  <code>R</code> is 1 if <code>X</code> is less than <code>Y</code> and <code>X=Y</code> is 0.  Otherwise <code>R</code> is 0.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Less.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0.99999999999</span><span class="w"> </span><span class="m">0.9999999999</span><span class="o">&lt;</span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-less-or-equal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-less-or-equal-header">Less Or Equal</h3><div class="command">R←X≤Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.  <code>R</code> is Boolean.  <code>R</code> is 1 if <code>X</code> is less than <code>Y</code> or <code>X=Y</code>.  Otherwise <code>R</code> is 0.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Less Or Equal.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">≤</span><span class="w"> </span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>

<span class="w">      </span><span class="m">1</span><span class="w">  </span><span class="m">1.00000000001</span><span class="w"> </span><span class="m">1.00000001</span><span class="w"> </span><span class="o">≤</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-logarithm">
<div class="heading-container"><h3 class="heading" id="primitive-functions-logarithm-header">Logarithm</h3><div class="command">R←X⍟Y</div></div>
<p><code>X</code> and <code>Y</code> must be numeric arrays. <code>X</code> cannot be 1 unless <code>Y</code> is also 1. <code>R</code> is the base <code>X</code> logarithm of <code>Y</code>.</p>
<p>Note that Logarithm (dyadic <code>⍟</code>) is defined in terms of Natural Logarithm (monadic <code>⍟</code>) as:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="o">⍟</span><span class="nv">Y</span><span class="kd">←→</span><span class="p">(</span><span class="o">⍟</span><span class="nv">Y</span><span class="p">)</span><span class="o">÷⍟</span><span class="nv">X</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="o">⍟</span><span class="m">100</span><span class="w"> </span><span class="m">2</span>
<span class="m">2</span><span class="w"> </span><span class="m">0.3010299957</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">10</span><span class="o">⍟</span><span class="m">0J1</span><span class="w"> </span><span class="m">1J2</span>
<span class="m">0J2.266180071</span><span class="w"> </span><span class="m">0.3494850022J0.4808285788</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="o">⍟</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="o">⍟</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-magnitude">
<div class="heading-container"><h3 class="heading" id="primitive-functions-magnitude-header">Magnitude</h3><div class="command">R←|Y</div></div>
<p><code>Y</code> may be any numeric array. <code>R</code> is numeric composed of the absolute (unsigned) values of <code>Y</code>.</p>
<p>Note that the magnitude of a complex number <math xmlns="http://www.w3.org/1998/Math/MathML">
<mi>z</mi>
<mo>=</mo>
<mi>a</mi>
<mo>+</mo>
<mi>b</mi>
<mi>i</mi>
</math> (where <math xmlns="http://www.w3.org/1998/Math/MathML">
<mi>a</mi>
</math> and <math xmlns="http://www.w3.org/1998/Math/MathML">
<mi>b</mi>
</math> are real numbers, and <math xmlns="http://www.w3.org/1998/Math/MathML">
<mi>i</mi>
</math> is the imaginary unit) is defined to be:</p>
<math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
<mo>|</mo>
<mi>z</mi>
<mo>|</mo>
</mrow>
<mo>=</mo>
<msqrt>
<mrow>
<msup>
<mi>a</mi>
<mn>2</mn>
</msup>
<mo>+</mo>
<msup>
<mi>b</mi>
<mn>2</mn>
</msup>
</mrow>
</msqrt>
</math>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">|</span><span class="m">2</span><span class="w"> </span><span class="m">¯3.4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯2.7</span>
<span class="m">2</span><span class="w"> </span><span class="m">3.4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2.7</span>

<span class="w">      </span><span class="o">|</span><span class="m">3j4</span>
<span class="m">5</span>
</code></pre></div>
<p><code>⎕IO</code> is an implicit argument of magnitude.</p>
</article>
<article id="primitive-functions-match">
<div class="heading-container"><h3 class="heading" id="primitive-functions-match-header">Match</h3><div class="command">R←X≡Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> may be any array.  <code>R</code> is a simple Boolean scalar.  If <code>X</code> is identical to <code>Y</code>, then <code>R</code> is 1.  Otherwise <code>R</code> is 0.</p>
<p>Non-empty arrays are identical if they have the same structure and the same values in all corresponding locations.  Empty arrays are identical if they have the same shape and the same prototype (disclosed nested structure).</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Match.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="no">⍬</span><span class="o">≡⍳</span><span class="m">0</span>
<span class="m">1</span>
<span class="w">      </span><span class="s1">''</span><span class="o">≡⍳</span><span class="m">0</span>
<span class="m">0</span>
<span class="w">      </span><span class="nv">A</span>
<span class="nv">THIS</span>
<span class="nv">WORD</span>

<span class="w">      </span><span class="nv">A</span><span class="o">≡</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'THISWORD'</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">A</span><span class="o">≡⍳</span><span class="m">10</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">+</span><span class="nv">B</span><span class="kd">←</span><span class="nv">A</span><span class="w"> </span><span class="nv">A</span>
<span class="w"> </span><span class="nv">THIS</span><span class="w">  </span><span class="nv">THIS</span>
<span class="w"> </span><span class="nv">WORD</span><span class="w">  </span><span class="nv">WORD</span>

<span class="w">      </span><span class="nv">A</span><span class="o">≡⊃</span><span class="nv">B</span>
<span class="m">1</span>

<span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="o">⍴</span><span class="nv">A</span><span class="p">)</span><span class="o">≡</span><span class="m">0</span><span class="o">⍴</span><span class="nv">B</span>
<span class="m">0</span>

<span class="w">      </span><span class="s1">' '</span><span class="o">=⊃</span><span class="m">0</span><span class="o">⍴</span><span class="nv">B</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="s1">' '</span><span class="o">=⊃</span><span class="m">0</span><span class="o">⍴</span><span class="nv">A</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-materialise">
<div class="heading-container"><h3 class="heading" id="primitive-functions-materialise-header">Materialise</h3><div class="command">R←⌷Y</div></div>
<p>If <code>Y</code> is a ref to an instance of a Dyalog Class with a Default  property:</p>
<ul>
<li>If the Default property is Simple, <code>⌷</code> returns its value. </li>
<li>If the Default property is Numbered, <code>⌷</code> returns an array whose shape is determined by the PropertyShape function and whose items are constructed by calling the ProperyGet function repeatedly with the corresponding set of indices. However, see <strong>Performance Considerations</strong>.</li>
<li>If the Default property is Keyed,  <code>NONCE ERROR</code> is reported, because in this case APL has no way to determine the list of all the elements.</li>
</ul>
<p>If  <code>Y</code> is a ref to an instance of a COM or .NET Collection object, <code>⌷</code> returns a vector containing all its items.</p>
<p>Otherwise, if <code>Y</code> is an array, <code>Y</code> is returned.</p>
<p class="example">Example</p>
<p>The following example uses the sample <i>ComponentFile Class</i>.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="p">)</span><span class="nv">Load</span><span class="w"> </span><span class="nv">ComponentFile</span>
<span class="na">...\</span><span class="nv">Samples</span><span class="na">\</span><span class="nv">OO4APL</span><span class="na">\</span><span class="nv">ComponentFile</span><span class="na">.</span><span class="nv">dws</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="na">...</span>
<span class="w">      </span><span class="nv">F1</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">ComponentFile</span><span class="w"> </span><span class="s1">'test1'</span>

<span class="w">      </span><span class="nv">F1</span>
<span class="c1">#.[ComponentFile]</span>

<span class="w">      </span><span class="nv">F1</span><span class="na">.</span><span class="nv">Append</span><span class="na">¨</span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span><span class="o">×⊂⍳</span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="o">⌷</span><span class="nv">F1</span>
<span class="err">┌───────┬───────┬────────┬─────────┬──────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">12</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">16</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">20</span><span class="err">│</span>
<span class="err">└───────┴───────┴────────┴─────────┴──────────┘</span>
</code></pre></div></p>
<p>The following example shows how <code>⌷</code>obtains the items in an Excel Sheets collection .
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">wb</span><span class="kd">←</span><span class="nv">ex</span><span class="na">.</span><span class="nv">Workbooks</span><span class="na">.</span><span class="nv">Open</span><span class="o">⊂</span><span class="s1">'budget.xls'</span>
<span class="w">      </span><span class="nv">wb</span><span class="na">.</span><span class="nv">Sheets</span>
<span class="c1">#.[OLEClient].[Workbooks].[_Workbook].[Sheets]</span>
<span class="w">      </span><span class="o">⌷</span><span class="nv">wb</span><span class="na">.</span><span class="nv">Sheets</span>
<span class="w"> </span><span class="c1">#.[_Worksheet]  #.[_Worksheet]  #.[_Worksheet]</span>
<span class="w">      </span><span class="p">(</span><span class="o">⌷</span><span class="nv">wb</span><span class="na">.</span><span class="nv">Sheets</span><span class="p">)</span><span class="na">.</span><span class="nv">Name</span>
<span class="err">┌────┬────┬────┐</span>
<span class="err">│</span><span class="m">2012</span><span class="err">│</span><span class="m">2011</span><span class="err">│</span><span class="m">2010</span><span class="err">│</span>
<span class="err">└────┴────┴────┘</span>
</code></pre></div></p>
<h5>Performance Considerations</h5>
<p>Note that the <em>values</em> of the index set are obtained or assigned by calls to the corresponding PropertyGet and PropertySet functions. Furthermore, if there is a sequence of primitive functions to the left of the Index function, that operate on the index set itself (functions such as dyadic <code>⍴,↑,↓,⊃</code>) as opposed to functions that operate on the <em>values</em> of the index set (functions such as <code>+,⌈,⌊,⍴¨</code>), calls to the PropertyGet and PropertySet functions are deferred until the required index set has been completely determined. The full set of functions that cause deferral of calls to the PropertyGet and PropertySet functions is the same as the set of functions that applies to selective specification.</p>
<p>If for example, <code>CompFile</code> is an Instance of the <i>ComponentFile Class</i>:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="m">1</span><span class="o">↑⌽⌷</span><span class="nv">CompFile</span>
</code></pre></div></p>
<p>would only call the PropertyGet function (for <code>CompFile</code>) once, to get the value of the last element.</p>
<p>Note that similarly, the expression
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10000</span><span class="o">⍴⌷</span><span class="nv">CompFile</span>
</code></pre></div></p>
<p>would call the PropertyGet function 10000 times, on repeated indices if <code>CompFile</code> has less than 10000 elements. The deferral of access function calls is intended to be an optimisation, but can have the opposite effect. You can avoid unnecessary repetitive calls by assigning the result of <code>⌷</code> to a temporary variable.</p>
</article>
<article id="primitive-functions-matrix-divide">
<div class="heading-container"><h3 class="heading" id="primitive-functions-matrix-divide-header">Matrix Divide</h3><div class="command">R←X⌹Y</div></div>
<p><code>Y</code> must be a simple numeric array of rank 2 or less.  <code>X</code> must be a simple numeric array of rank 2 or less.  <code>Y</code> must be non-singular.  A scalar argument is treated as a matrix with one-element.  If <code>Y</code> is a vector, it is treated as a single column matrix.  If <code>X</code> is a vector, it is treated as a single column matrix.  The number of rows in <code>X</code> and <code>Y</code> must be the same.  <code>Y</code> must have at least the same number of rows as columns.</p>
<p><code>R</code> is the result of matrix division of <code>X</code> by <code>Y</code>.  That is, the matrix product <code>Y+.×R</code> is <code>X</code>.</p>
<p><code>R</code> is determined such that <code>(X-Y+.×R)*2</code> is minimised.</p>
<p>The shape of <code>R</code> is <code>(1↓⍴Y),1↓⍴X</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PP</span><span class="kd">←</span><span class="m">5</span>

<span class="w">      </span><span class="nv">B</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span>
<span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="m">35</span><span class="w"> </span><span class="m">89</span><span class="w"> </span><span class="m">79</span><span class="w"> </span><span class="o">⌹</span><span class="w"> </span><span class="nv">B</span>
<span class="m">2.1444</span><span class="w"> </span><span class="m">8.2111</span><span class="w"> </span><span class="m">5.0889</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">35</span><span class="w"> </span><span class="m">36</span>
<span class="m">89</span><span class="w"> </span><span class="m">88</span>
<span class="m">79</span><span class="w"> </span><span class="m">75</span>

<span class="w">      </span><span class="nv">A</span><span class="w"> </span><span class="o">⌹</span><span class="w"> </span><span class="nv">B</span>
<span class="m">2.1444</span><span class="w"> </span><span class="m">2.1889</span>
<span class="m">8.2111</span><span class="w"> </span><span class="m">7.1222</span>
<span class="m">5.0889</span><span class="w"> </span><span class="m">5.5778</span>
</code></pre></div>
<p>If there are more rows than columns in the right argument, the least squares solution results.  In the following example, the constants a and b which provide the best fit for the set of equations represented by P = a + bQ are determined:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Q</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="nv">P</span>
<span class="m">12.03</span><span class="w"> </span><span class="m">8.78</span><span class="w"> </span><span class="m">6.01</span><span class="w"> </span><span class="m">3.75</span><span class="w"> </span><span class="m">¯0.31</span><span class="w"> </span><span class="m">¯2.79</span>

<span class="w">      </span><span class="nv">P</span><span class="o">⌹</span><span class="nv">Q</span>
<span class="m">14.941</span><span class="w"> </span><span class="m">¯2.9609</span>
</code></pre></div></p>
<h5>Example: linear regression on complex numbers</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="nv">j</span><span class="na">⌿</span><span class="m">¯50</span><span class="o">+?</span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">100</span>
<span class="w">      </span><span class="nv">y</span><span class="kd">←</span><span class="p">(</span><span class="nv">x</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">j</span><span class="na">⌿</span><span class="m">0.0001</span><span class="o">×</span><span class="m">¯50</span><span class="o">+?</span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="o">⍴</span><span class="m">100</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">13</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">y</span>
<span class="m">13</span>
<span class="w">      </span><span class="nv">y</span><span class="w"> </span><span class="o">⌹</span><span class="w"> </span><span class="nv">x</span>
<span class="m">3J0.000011066</span><span class="w"> </span><span class="m">4J¯0.000018499</span><span class="w"> </span><span class="m">5J0.000005745</span><span class="w"> </span><span class="m">6J0.000050328</span>
<span class="w">      </span><span class="c1">⍝ i.e. y⌹x recovered the coefficients 3 4 5 6</span>
</code></pre></div>
<h5>Additional Information</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="o">⌹</span><span class="nv">y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">⌹</span><span class="p">(</span><span class="o">⍉</span><span class="nv">y</span><span class="p">)</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="nv">y</span><span class="p">)</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="p">(</span><span class="o">⍉</span><span class="nv">y</span><span class="p">)</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="nv">x</span>
</code></pre></div>
<p>(Use <code>+⍉</code> instead of <code>⍉</code> for complex <code>y</code>.)</p>
<p>This equivalence, familiar to mathematicians and statisticians, explains</p>
<ul>
<li>the conformability requirements for <code>⌹</code></li>
<li>how to compute the result for tall matrices from the better known square matrix case</li>
</ul>
</article>
<article id="primitive-functions-matrix-inverse">
<div class="heading-container"><h3 class="heading" id="primitive-functions-matrix-inverse-header">Matrix Inverse</h3><div class="command">R←⌹Y</div></div>
<p><code>Y</code> must be a simple array of rank 2 or less.  <code>Y</code> must be non-singular.  If <code>Y</code> is a scalar, it is treated as a one-element matrix.  If <code>Y</code> is a vector, it is treated as a single-column matrix.  <code>Y</code> must have at least the same number of rows as columns.</p>
<p><code>R</code> is the inverse of <code>Y</code> if <code>Y</code> is a square matrix, or the left inverse of <code>Y</code> if <code>Y</code> is not a square matrix.  That is, <code>R+.×Y</code> is an identity matrix.</p>
<p>The shape of <code>R</code> is <code>⌽⍴Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">¯3</span>
<span class="m">4</span><span class="w"> </span><span class="m">10</span>

<span class="w">      </span><span class="o">+</span><span class="nv">A</span><span class="kd">←</span><span class="o">⌹</span><span class="nv">M</span>
<span class="w"> </span><span class="m">0.3125</span><span class="w"> </span><span class="m">0.09375</span>
<span class="m">¯0.125</span><span class="w">  </span><span class="m">0.0625</span>
</code></pre></div>
<p>Within calculation accuracy, <code>A+.×M</code> is the identity matrix.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span>


<span class="w">      </span><span class="nv">j</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍺</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍺</span><span class="o">+</span><span class="m">0J1</span><span class="o">×</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="nv">j</span><span class="na">⌿</span><span class="m">¯50</span><span class="o">+?</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="m">100</span>
<span class="w">      </span><span class="nv">x</span>
<span class="m">¯37J¯41</span><span class="w">  </span><span class="m">25J015</span><span class="w">  </span><span class="m">¯5J¯09</span><span class="w">   </span><span class="m">3J020</span><span class="w"> </span><span class="m">¯29J041</span>
<span class="m">¯46J026</span><span class="w">  </span><span class="m">17J¯24</span><span class="w">  </span><span class="m">17J¯46</span><span class="w">  </span><span class="m">43J023</span><span class="w"> </span><span class="m">¯12J¯18</span>
<span class="w">  </span><span class="m">1J013</span><span class="w">  </span><span class="m">33J025</span><span class="w"> </span><span class="m">¯47J049</span><span class="w"> </span><span class="m">¯45J¯14</span><span class="w">   </span><span class="m">2J¯26</span>
<span class="w"> </span><span class="m">17J048</span><span class="w"> </span><span class="m">¯50J022</span><span class="w"> </span><span class="m">¯12J025</span><span class="w"> </span><span class="m">¯44J015</span><span class="w">  </span><span class="m">¯9J¯43</span>
<span class="w"> </span><span class="m">18J013</span><span class="w">   </span><span class="m">8J038</span><span class="w">  </span><span class="m">43J¯23</span><span class="w">  </span><span class="m">34J¯07</span><span class="w">   </span><span class="m">2J026</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="nv">id</span><span class="kd">←</span><span class="kt">{</span><span class="na">∘.</span><span class="o">=</span><span class="na">⍨</span><span class="o">⍳</span><span class="bp">⍵</span><span class="kt">}</span><span class="w">  </span><span class="c1">⍝ identity matrix of order ⍵</span>
<span class="w">      </span><span class="o">⌈</span><span class="na">/</span><span class="o">,|</span><span class="w"> </span><span class="p">(</span><span class="nv">id</span><span class="w"> </span><span class="m">1</span><span class="o">↑⍴</span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">x</span><span class="o">+</span><span class="na">.</span><span class="o">×⌹</span><span class="nv">x</span>
<span class="m">3.66384E¯16</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-maximum">
<div class="heading-container"><h3 class="heading" id="primitive-functions-maximum-header">Maximum</h3><div class="command">R←X⌈Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.  <code>R</code> is numeric.  <code>R</code> is the larger of the numbers <code>X</code> and <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯2.01</span><span class="w"> </span><span class="m">0.1</span><span class="w"> </span><span class="m">15.3</span><span class="w"> </span><span class="o">⌈</span><span class="w"> </span><span class="m">¯3.2</span><span class="w"> </span><span class="m">¯1.1</span><span class="w"> </span><span class="m">22.7</span>
<span class="m">¯2.01</span><span class="w"> </span><span class="m">0.1</span><span class="w"> </span><span class="m">22.7</span>
</code></pre></div>
</article>
<article id="primitive-functions-membership">
<div class="heading-container"><h3 class="heading" id="primitive-functions-membership-header">Membership</h3><div class="command">R←X∊Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> may be any array.  <code>R</code> is Boolean. An element of <code>R</code> is 1 if the corresponding element of <code>X</code> can be found in <code>Y</code>.</p>
<p>An element of <code>X</code> is considered identical to an element in <code>Y</code> if <code>X≡Y</code> returns 1 for those elements.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Membership.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'THIS NOUN'</span><span class="w"> </span><span class="o">∊</span><span class="w"> </span><span class="s1">'THAT WORD'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'MOUSE'</span><span class="w"> </span><span class="o">∊</span><span class="w"> </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'FOX'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'LLAMA'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>For performance information, see <i>Programmer's Guide: Search Functions and Hash Tables</i>.</p>
</article>
<article id="primitive-functions-minimum">
<div class="heading-container"><h3 class="heading" id="primitive-functions-minimum-header">Minimum</h3><div class="command">R←X⌊Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.  <code>R</code> is numeric.  <code>R</code> is the smaller of <code>X</code> and <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯2.1</span><span class="w"> </span><span class="m">0.1</span><span class="w"> </span><span class="m">15.3</span><span class="w"> </span><span class="o">⌊</span><span class="w"> </span><span class="m">¯3.2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">22</span>
<span class="m">¯3.2</span><span class="w"> </span><span class="m">0.1</span><span class="w"> </span><span class="m">15.3</span>
</code></pre></div>
</article>
<article id="primitive-functions-minus">
<div class="heading-container"><h3 class="heading" id="primitive-functions-minus-header">Minus</h3><div class="command">R←X-Y</div></div>
<p>See <a class="internal-link" href="#primitive-functions-subtract">Section 1.4.98</a>.</p>
</article>
<article id="primitive-functions-mix">
<div class="heading-container"><h3 class="heading" id="primitive-functions-mix-header">Mix</h3><div class="command">(⎕ML)</div></div>
<p>The symbol chosen to represent Mix depends on the current Migration Level.</p>
<p>If <code>⎕ML&lt;2</code>, Mix is represented by the symbol: <code>↑</code>.</p>
<p>If <code>⎕ML≥2</code>, Mix is represented by the symbol: <code>⊃</code>.</p>
<p><code>Y</code> may be any array whose items may be uniform in rank and shape, or differ in rank and shape. If the items of <code>Y</code> are non-uniform, they are extended prior to the application of the function as follows:</p>
<ol>
<li>If the items of <code>Y</code> have different ranks, each item is extended in rank to that of the greatest rank by padding with leading 1s. </li>
<li>If the items of <code>Y</code> have different shapes, each is padded with the corresponding prototype to a shape that represents the greatest length along each axis of all items in <code>Y</code>.</li>
</ol>
<p>For the purposes of the following narrative,  <code>y</code> represents the virtual item in <code>Y</code> with the greatest rank and shape, with which all other items are extended to conform.</p>
<p><code>R</code> is an array composed from the items of  <code>Y</code> assembled into a higher-rank array with one less level of nesting. <code>⍴R</code> will be some permutation of <code>(⍴Y),⍴y</code>.</p>
<p><code>K</code> is an optional axis specification whose value(s)  indicate where in the result the axes of <code>y</code> appear. There are three cases:</p>
<ol>
<li><code>K</code> may be a scalar or 1-element vector whose value is a fractional number indicating the two axes of <code>Y</code> between which new axes are to be inserted for <code>y</code>.  The shape of <code>R</code> is the shape of <code>Y</code> with the shape <code>⍴y</code> inserted between the <code>⌊K</code>th and the <code>⌈K</code>th axes of <code>Y</code></li>
<li><code>K</code> may be a scalar or 1-element vector integer whose value specifies the position of the first axis of <code>y</code> in the result. This case is identical to the fractional case where <code>K</code> (in this case) is <code>⌈K</code> (in the fractional case).</li>
<li><code>K</code> may be an integer vector, with the same length as <code>⍴y</code>, each element of which specifies the position in the result of the corresponding axis of the <code>y</code>. </li>
</ol>
<p>If <code>K</code> is absent, the axes of <code>y</code> appear as the last axes of the result.</p>
<h5>Simple Vector Examples</h5>
<p>In this example, the shape of <code>Y</code> is 3, and the shape of  <code>y</code> is 2. So the shape of the result will be a permutation of 2 and 3, i.e. in this simple example, either <code>(2 3)</code> or <code>(3 2</code>).</p>
<p>If <code>K</code> is omitted, the shape of the result is <code>(⍴Y),⍴y</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div></p>
<p>If <code>K</code> is between 0 and 1, the shape of the result is <code>(⍴y),⍴Y</code> because <code>(⍴y)</code> is inserted between the 0<sup>th</sup> and the 1<sup>st</sup> axis of the result, i.e. at the beginning.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="sr">[</span><span class="m">.5</span><span class="sr">]</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
</code></pre></div></p>
<p>If <code>K</code> is between 1 and 2, the shape of the result is <code>(⍴Y),⍴y</code> because <code>(⍴y)</code> is inserted between the 1<sup>st</sup> and 2<sup>nd</sup> axis of the result, i.e. at the end. This is the same as the case when <code>K</code> is omitted.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div></p>
<p>An integer <code>K</code> may be used instead. If <code>⎕ML≥2</code>,  <code>⊃</code> is used instead of <code>↑</code>).
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">3</span>
<span class="w">      </span><span class="o">⊃</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⊃</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⊃</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div></p>
<h5>Shape Extension</h5>
<p>If the items of <code>Y</code> are unequal in shape, the shorter ones are extended:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">3</span>
<span class="w">      </span><span class="o">⊃</span><span class="p">(</span><span class="m">1</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">0</span>
<span class="w">       </span><span class="o">⊃</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="p">(</span><span class="m">1</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)(</span><span class="m">5</span><span class="p">)</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h4>More Simple Vector Examples</h4>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">box</span><span class="w"> </span><span class="nv">on</span>
<span class="nv">Was</span><span class="w"> </span><span class="nv">OFF</span>
<span class="w">       </span><span class="s1">'Andy'</span><span class="w"> </span><span class="s1">'Geoff'</span><span class="w"> </span><span class="s1">'Pauline'</span>
<span class="err">┌────┬─────┬───────┐</span>
<span class="err">│</span><span class="nv">Andy</span><span class="err">│</span><span class="nv">Geoff</span><span class="err">│</span><span class="nv">Pauline</span><span class="err">│</span>
<span class="err">└────┴─────┴───────┘</span>
<span class="w">      </span><span class="o">↑</span><span class="s1">'Andy'</span><span class="w"> </span><span class="s1">'Geoff'</span><span class="w"> </span><span class="s1">'Pauline'</span>
<span class="nv">Andy</span><span class="w">   </span>
<span class="nv">Geoff</span><span class="w">  </span>
<span class="nv">Pauline</span>

<span class="w">        </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">3</span>
<span class="w">        </span><span class="o">⊃</span><span class="p">(</span><span class="s1">'andy'</span><span class="w"> </span><span class="m">19</span><span class="p">)(</span><span class="s1">'geoff'</span><span class="w"> </span><span class="m">37</span><span class="p">)(</span><span class="s1">'pauline'</span><span class="w"> </span><span class="m">21</span><span class="p">)</span>
<span class="err">┌───────┬──┐</span>
<span class="err">│</span><span class="nv">andy</span><span class="w">   </span><span class="err">│</span><span class="m">19</span><span class="err">│</span>
<span class="err">├───────┼──┤</span>
<span class="err">│</span><span class="nv">geoff</span><span class="w">  </span><span class="err">│</span><span class="m">37</span><span class="err">│</span>
<span class="err">├───────┼──┤</span>
<span class="err">│</span><span class="nv">pauline</span><span class="err">│</span><span class="m">21</span><span class="err">│</span>
<span class="err">└───────┴──┘</span>
<span class="w">        </span><span class="o">⊃</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="p">(</span><span class="s1">'andy'</span><span class="w"> </span><span class="m">19</span><span class="na">.</span><span class="nv">htm</span><span class="p">)(</span><span class="s1">'geoff'</span><span class="w"> </span><span class="m">37</span><span class="p">)(</span><span class="s1">'pauline'</span><span class="w"> </span><span class="m">21</span><span class="p">)</span>
<span class="err">┌────┬─────┬───────┐</span>
<span class="err">│</span><span class="nv">andy</span><span class="err">│</span><span class="nv">geoff</span><span class="err">│</span><span class="nv">pauline</span><span class="err">│</span>
<span class="err">├────┼─────┼───────┤</span>
<span class="err">│</span><span class="m">19</span><span class="w">  </span><span class="err">│</span><span class="m">37</span><span class="w">   </span><span class="err">│</span><span class="m">21</span><span class="w">     </span><span class="err">│</span>
<span class="err">└────┴─────┴───────┘</span>
<span class="w">        </span><span class="o">⊃</span><span class="p">(</span><span class="s1">'andy'</span><span class="w"> </span><span class="m">19</span><span class="p">)(</span><span class="s1">'geoff'</span><span class="w"> </span><span class="m">37</span><span class="p">)(</span><span class="o">⊂</span><span class="s1">'pauline'</span><span class="p">)</span>
<span class="err">┌───────┬───────┐</span>
<span class="err">│</span><span class="nv">andy</span><span class="w">   </span><span class="err">│</span><span class="m">19</span><span class="w">     </span><span class="err">│</span>
<span class="err">├───────┼───────┤</span>
<span class="err">│</span><span class="nv">geoff</span><span class="w">  </span><span class="err">│</span><span class="m">37</span><span class="w">     </span><span class="err">│</span>
<span class="err">├───────┼───────┤</span>
<span class="err">│</span><span class="nv">pauline</span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">└───────┴───────┘</span>
</code></pre></div>
<p>Notice that in the last statement, the shape of the third item was extended by catenating it with its prototype.</p>
<h6>Example (Matrix of Matrices)</h6>
<p>In the following examples, <code>Y</code> is a matrix of shape <code>(5 4)</code> and each item of <code>Y</code> (<code>y</code>) is a matrix of shape <code>(3 2)</code>. The shape of the result will be some permutation of <code>(5 4 3 2)</code>.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">Y</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="p">(</span><span class="o">⍳</span><span class="m">20</span><span class="p">)</span><span class="o">×⊂</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">1</span>
<span class="w">       </span><span class="nv">Y</span>
<span class="err">┌─────┬─────┬─────┬─────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">├─────┼─────┼─────┼─────┤</span>
<span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="err">│</span>
<span class="err">├─────┼─────┼─────┼─────┤</span>
<span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="err">│</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="m">11</span><span class="w"> </span><span class="m">11</span><span class="err">│</span><span class="m">12</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="err">│</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="m">11</span><span class="w"> </span><span class="m">11</span><span class="err">│</span><span class="m">12</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="err">│</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="m">11</span><span class="w"> </span><span class="m">11</span><span class="err">│</span><span class="m">12</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">├─────┼─────┼─────┼─────┤</span>
<span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">13</span><span class="err">│</span><span class="m">14</span><span class="w"> </span><span class="m">14</span><span class="err">│</span><span class="m">15</span><span class="w"> </span><span class="m">15</span><span class="err">│</span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="err">│</span>
<span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">13</span><span class="err">│</span><span class="m">14</span><span class="w"> </span><span class="m">14</span><span class="err">│</span><span class="m">15</span><span class="w"> </span><span class="m">15</span><span class="err">│</span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="err">│</span>
<span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">13</span><span class="err">│</span><span class="m">14</span><span class="w"> </span><span class="m">14</span><span class="err">│</span><span class="m">15</span><span class="w"> </span><span class="m">15</span><span class="err">│</span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="err">│</span>
<span class="err">├─────┼─────┼─────┼─────┤</span>
<span class="err">│</span><span class="m">17</span><span class="w"> </span><span class="m">17</span><span class="err">│</span><span class="m">18</span><span class="w"> </span><span class="m">18</span><span class="err">│</span><span class="m">19</span><span class="w"> </span><span class="m">19</span><span class="err">│</span><span class="m">20</span><span class="w"> </span><span class="m">20</span><span class="err">│</span>
<span class="err">│</span><span class="m">17</span><span class="w"> </span><span class="m">17</span><span class="err">│</span><span class="m">18</span><span class="w"> </span><span class="m">18</span><span class="err">│</span><span class="m">19</span><span class="w"> </span><span class="m">19</span><span class="err">│</span><span class="m">20</span><span class="w"> </span><span class="m">20</span><span class="err">│</span>
<span class="err">│</span><span class="m">17</span><span class="w"> </span><span class="m">17</span><span class="err">│</span><span class="m">18</span><span class="w"> </span><span class="m">18</span><span class="err">│</span><span class="m">19</span><span class="w"> </span><span class="m">19</span><span class="err">│</span><span class="m">20</span><span class="w"> </span><span class="m">20</span><span class="err">│</span>
<span class="err">└─────┴─────┴─────┴─────┘</span>
</code></pre></div></p>
<p>By default, the axes of <code>y</code> appear in the last position in the shape of the result, but this position is altered by specifying the axis <code>K</code>. Notice where the <code>(3 2)</code> appears in the following results:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⊃</span><span class="nv">Y</span>
<span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="nv">Y</span>
<span class="nv">INDEX</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="nv">Y</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div></p>
<p>Note that <code>⊃[4]Y</code> generates an <code>INDEX ERROR</code> because 4 is greater than the length of the result.</p>
<h6>Example (Vector K)</h6>
<p>The axes of <code>y</code> do not have to be contiguous in the shape of the result. By specifying a vector <code>K</code>, they can be distributed. Notice where the <code>3</code> and the <code>2</code> appear in the following results:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="sr">[</span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="nv">Y</span>
<span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<h6>Rank Extension</h6>
<p>If the items of <code>Y</code> are unequal in rank, the lower rank items are extended in rank by prefixing their shapes with 1s. Each additional 1 may then be increased to match the maximum shape of the other items along that axis.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">3</span>
<span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="p">(</span><span class="m">1</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">10</span><span class="o">×⍳</span><span class="m">8</span><span class="p">)</span>
<span class="w">      </span><span class="nv">Y</span>
<span class="err">┌─┬───────┬────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="m">40</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="err">│</span>
<span class="err">└─┴───────┴────────┘</span>
<span class="w">       </span><span class="o">⍴⊃</span><span class="nv">Y</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span>
<span class="w">       </span><span class="o">⊃</span><span class="nv">Y</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">0</span>
<span class="m">40</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>In the above example, the first item (1) becomes (<code>1 1⍴1</code>) to conform with the 3rd item which is rank 2. It is then extended in shape to become <code>(2 4↑1 1⍴1)</code> to conform with the 2-row 3rd item, and 4-column 2nd item.. Likewise, the 2nd item becomes a 2-row matrix, and the 3rd item gains another column.</p>
</article>
<article id="primitive-functions-multiply">
<div class="heading-container"><h3 class="heading" id="primitive-functions-multiply-header">Multiply</h3><div class="command">R←X×Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.  <code>R</code> is the arithmetic product of <code>X</code> and <code>Y</code>.</p>
<p>This function is also known as Times.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">×</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">6</span>
<span class="m">6</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span>

<span class="w">       </span><span class="m">2j3</span><span class="o">×</span><span class="m">.3j.5</span><span class="w"> </span><span class="m">1j2</span><span class="w"> </span><span class="m">3j4</span><span class="w"> </span><span class="m">.5</span>
<span class="m">¯0.9J1.9</span><span class="w"> </span><span class="m">¯4J7</span><span class="w"> </span><span class="m">¯6J17</span><span class="w"> </span><span class="m">1J1.5</span>
</code></pre></div>
</article>
<article id="primitive-functions-nand">
<div class="heading-container"><h3 class="heading" id="primitive-functions-nand-header">Nand</h3><div class="command">R←X⍲Y</div></div>
<p><code>Y</code> must be a Boolean array.  <code>X</code> must be a Boolean array.  <code>R</code> is Boolean.  The value of <code>R</code> is the truth value of the proposition "not both <code>X</code> and <code>Y</code>", and is determined as follows:
<div class="highlight"><pre><span></span><code><span class="w">             </span><span class="nv">X</span><span class="w">   </span><span class="nv">Y</span><span class="w">     </span><span class="nv">R</span>

<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">0</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">⍲</span><span class="w"> </span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-natural-logarithm">
<div class="heading-container"><h3 class="heading" id="primitive-functions-natural-logarithm-header">Natural Logarithm</h3><div class="command">R←⍟Y</div></div>
<p><code>Y</code> must be a numeric array. <code>R</code> is numeric.  <code>R</code> is the natural (or Napierian) logarithm of <code>Y</code> whose base is the mathematical constant <em>e=2.71828...</em>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍟</span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">0</span><span class="w"> </span><span class="m">0.6931471806</span>

<span class="w">      </span><span class="o">⍟</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">0j1</span><span class="w"> </span><span class="m">1j2</span><span class="w"> </span><span class="m">2j3</span><span class="w"> </span><span class="m">3j4</span>
<span class="m">0.000000000J1.570796327</span><span class="w">  </span><span class="m">0.8047189562J1.107148718</span>
<span class="m">1.282474679J0.9827937232</span><span class="w"> </span><span class="m">1.6094379120J0.927295218</span>
</code></pre></div>
</article>
<article id="primitive-functions-negative">
<div class="heading-container"><h3 class="heading" id="primitive-functions-negative-header">Negative</h3><div class="command">R←-Y</div></div>
<p><code>Y</code> may be any numeric array. <code>R</code> is numeric and is the negative value of <code>Y</code>. For complex numbers both the real and imaginary parts are negated.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">-</span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯3</span><span class="w"> </span><span class="m">¯5</span>
<span class="m">¯4</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">-</span><span class="m">1j2</span><span class="w"> </span><span class="m">¯2J3</span><span class="w"> </span><span class="m">4J¯5</span>
<span class="m">¯1J¯2</span><span class="w"> </span><span class="m">2J¯3</span><span class="w"> </span><span class="m">¯4J5</span>
</code></pre></div>
</article>
<article id="primitive-functions-nest">
<div class="heading-container"><h3 class="heading" id="primitive-functions-nest-header">Nest</h3><div class="command">R←⊆Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⊆</code> (Left Shoe Underbar) is not available in Classic Edition, and Nest is instead represented by <code>⎕U2286</code>.</p>
<p><code>Y</code> may be any array.</p>
<p>If <code>Y</code> is simple, <code>R</code> is a scalar array whose item is the array <code>Y</code>.  If <code>Y</code> is a simple scalar or is already nested, <code>R</code> is <code>Y</code> unchanged.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊆</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="err">┌─────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span>
<span class="err">└─────┘</span>
<span class="w">      </span><span class="o">⊆</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="err">┌─┬─────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span>
<span class="err">└─┴─────┘</span>
<span class="w">      </span><span class="o">⊆</span><span class="s1">'Dyalog'</span>
<span class="err">┌──────┐</span>
<span class="err">│</span><span class="nv">Dyalog</span><span class="err">│</span>
<span class="err">└──────┘</span>
<span class="w">      </span><span class="o">⊆</span><span class="s1">'Dyalog'</span><span class="w"> </span><span class="s1">'APL'</span>
<span class="err">┌──────┬───┐</span>
<span class="err">│</span><span class="nv">Dyalog</span><span class="err">│</span><span class="nv">APL</span><span class="err">│</span>
<span class="err">└──────┴───┘</span>
</code></pre></div>
</article>
<article id="primitive-functions-nor">
<div class="heading-container"><h3 class="heading" id="primitive-functions-nor-header">Nor</h3><div class="command">R←X⍱Y</div></div>
<p><code>Y</code> must be a Boolean array.  <code>X</code> must be a Boolean array.  <code>R</code> is Boolean.  The value of <code>R</code> is the truth value of the proposition "neither <code>X</code> nor <code>Y</code>", and is determined as follows:
<div class="highlight"><pre><span></span><code><span class="w">             </span><span class="nv">X</span><span class="w">   </span><span class="nv">Y</span><span class="w">     </span><span class="nv">R</span>

<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">0</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">⍱</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-not">
<div class="heading-container"><h3 class="heading" id="primitive-functions-not-header">Not</h3><div class="command">R←~Y</div></div>
<p><code>Y</code> must be a Boolean array.  <code>R</code> is Boolean.  The value of <code>R</code> is 0 if <code>Y</code> is 1, and <code>R</code> is 1 if <code>Y</code> is 0.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">~</span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-not-equal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-not-equal-header">Not Equal</h3><div class="command">R←X≠Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> may be any array.  <code>R</code> is Boolean.  <code>R</code> is 0 if <code>X=Y</code>.  Otherwise <code>R</code> is 1.</p>
<p>For Boolean <code>X</code> and <code>Y</code>, the value of <code>R</code> is the exclusive or (XOR)  result, determined as follows:
<div class="highlight"><pre><span></span><code><span class="w">             </span><span class="nv">X</span><span class="w">   </span><span class="nv">Y</span><span class="w">     </span><span class="nv">R</span>

<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">0</span>
</code></pre></div></p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Not Equal.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">≠</span><span class="w"> </span><span class="m">1.1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>

<span class="w">      </span><span class="m">1</span><span class="o">≠</span><span class="m">1</span><span class="w"> </span><span class="m">1.00000000001</span><span class="w"> </span><span class="m">1.0000001</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">≠</span><span class="s1">'CAT'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-not-match">
<div class="heading-container"><h3 class="heading" id="primitive-functions-not-match-header">Not Match</h3><div class="command">R←X≢Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> may be any array.  <code>R</code> is a simple Boolean scalar.  If <code>X</code> is identical to <code>Y</code>, then <code>R</code> is 0.  Otherwise <code>R</code> is 1.</p>
<p>Non-empty arrays are identical if they have the same structure and the same values in all corresponding locations.  Empty arrays are identical if they have the same shape and the same prototype (disclosed nested structure).</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Not Match.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="no">⍬</span><span class="o">≢⍳</span><span class="m">0</span>
<span class="m">0</span>
<span class="w">      </span><span class="s1">''</span><span class="o">≢⍳</span><span class="m">0</span>
<span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nv">A</span><span class="kd">←</span><span class="o">⊂</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="nv">ABC</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="o">≢</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="s1">'ABC'</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">A</span><span class="o">≢⊂</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span>
<span class="m">0</span>
<span class="w">      </span><span class="no">⍬</span><span class="o">≢</span><span class="m">0</span><span class="o">⍴</span><span class="nv">A</span>
<span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="m">1</span><span class="o">↑</span><span class="m">0</span><span class="o">⍴</span><span class="nv">A</span><span class="p">)</span><span class="o">≢⊂</span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="s1">'   '</span>
<span class="m">1</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-or-greatest-common-divisor">
<div class="heading-container"><h3 class="heading" id="primitive-functions-or-greatest-common-divisor-header">Or, Greatest Common Divisor</h3><div class="command">R←X∨Y</div></div>
<h5>Case 1: <code>X</code> and <code>Y</code> are Boolean</h5>
<p>R is Boolean and is determined as follows:
<div class="highlight"><pre><span></span><code><span class="w">             </span><span class="nv">X</span><span class="w">   </span><span class="nv">Y</span><span class="w">     </span><span class="nv">R</span>

<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">0</span>
<span class="w">             </span><span class="m">0</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">1</span>
<span class="w">             </span><span class="m">1</span><span class="w">   </span><span class="m">1</span><span class="w">     </span><span class="m">1</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">∨</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<h5>Case 2: <code>X</code> and <code>Y</code> are numeric (non-Boolean)</h5>
<p>R is the Greatest Common Divisor of <code>X</code> and <code>Y</code>. Note that in this case, <code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">15</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">∨</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span>
<span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">7</span>

<span class="w">      </span><span class="nv">rational</span><span class="kd">←</span><span class="kt">{</span><span class="o">↑</span><span class="bp">⍵</span><span class="w"> </span><span class="m">1</span><span class="o">÷⊂</span><span class="m">1</span><span class="o">∨</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ rational (⎕CT) approximation</span>
<span class="w">                           </span><span class="c1">⍝ to floating array.</span>
<span class="w">      </span><span class="nv">rational</span><span class="w"> </span><span class="m">0.4321</span><span class="w"> </span><span class="m">0.1234</span><span class="w"> </span><span class="m">6.66</span><span class="o">,</span><span class="w"> </span><span class="o">÷</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">4321</span><span class="w">  </span><span class="m">617</span><span class="w"> </span><span class="m">333</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">10000</span><span class="w"> </span><span class="m">5000</span><span class="w">  </span><span class="m">50</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
</article>
<article id="primitive-functions-partition">
<div class="heading-container"><h3 class="heading" id="primitive-functions-partition-header">Partition</h3><div class="command"></div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⊆</code> (Left Shoe Underbar) is not available in Classic Edition, and Partition is instead represented by <code>⎕U2286</code>.</p>
<p><code>Y</code> may be any non-scalar array.</p>
<p><code>X</code> must be a simple scalar or vector of non-negative integers.</p>
<p>The axis specification is optional.  If present, it must be a simple integer scalar or one element array representing an axis of <code>Y</code>.  If absent, the last axis is implied.</p>
<p><code>R</code> is an array of the elements of <code>Y</code> partitioned according to <code>X</code>.</p>
<p>A new partition is started in the result whenever the corresponding element in <code>X</code> is greater than the previous one. Items in <code>Y</code> corresponding to <code>0</code>s in <code>X</code> are not included in the result.</p>
<p>Note that if <code>⎕ML≥3</code>, the symbol <code>⊂</code> means the same as <code>⊆</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">3</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⊆</span><span class="s1">'NOWISTHE'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">NOW</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">IS</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">THE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⊆</span><span class="s1">'NOWISTHE'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">NOW</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">THE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────┘</span>

<span class="w">      </span><span class="nv">TEXT</span><span class="kd">←</span><span class="s1">'   NOW     IS      THE      TIME    '</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="s1">' '</span><span class="o">≠</span><span class="nv">TEXT</span><span class="p">)</span><span class="o">⊆</span><span class="nv">TEXT</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">NOW</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">IS</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">THE</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">TIME</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">CMAT</span><span class="kd">←</span><span class="nf">⎕FMT</span><span class="p">(</span><span class="s1">' '</span><span class="o">,</span><span class="nv">ROWS</span><span class="p">)</span><span class="o">,</span><span class="nv">COLS</span><span class="o">⍪</span><span class="nv">NMAT</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────────┐</span>
<span class="o">↓</span><span class="w">           </span><span class="nv">Jan</span><span class="w">   </span><span class="nv">Feb</span><span class="w">  </span><span class="nv">Mar</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="nv">Cakes</span><span class="w">       </span><span class="m">0</span><span class="w">   </span><span class="m">100</span><span class="w">  </span><span class="m">150</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="nv">Biscuits</span><span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w">  </span><span class="m">350</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="nv">Buns</span><span class="w">        </span><span class="m">0</span><span class="w">  </span><span class="m">1000</span><span class="w">  </span><span class="m">500</span><span class="w"> </span><span class="err">│</span>
<span class="err">└──────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="o">∨</span><span class="na">⌿</span><span class="s1">' '</span><span class="o">≠</span><span class="nv">CMAT</span><span class="p">)</span><span class="o">⊆</span><span class="nv">CMAT</span><span class="w">   </span><span class="c1">⍝ Split at blank cols.</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Jan</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="nv">Feb</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Mar</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Cakes</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">100</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">150</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Biscuits</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">350</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Buns</span><span class="w">    </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1000</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">500</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">N</span><span class="kd">←</span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">16</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">──────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊆</span><span class="nv">N</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w">   </span><span class="err">└</span><span class="o">~</span><span class="err">┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">8</span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w">   </span><span class="err">└</span><span class="o">~</span><span class="err">┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">12</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">───┘</span><span class="w">  </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">16</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">────┘</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊆</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">N</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">7</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">13</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">14</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">15</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">16</span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w">  </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w">  </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w">  </span><span class="err">└</span><span class="o">~</span><span class="err">─┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────┘</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-partitioned-enclose">
<div class="heading-container"><h3 class="heading" id="primitive-functions-partitioned-enclose-header">Partitioned Enclose</h3><div class="command">(⎕ML&lt;3)</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple integer scalar or vector. If <code>X</code> is a scalar it is extended to <code>(≢Y)⍴X</code>.</p>
<p>The axis specification is optional.  If present, it must be a simple integer scalar or one-element vector.  The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.</p>
<p><code>R</code> is a vector of items selected from <code>Y</code> by inserting 0 or more dividers, specified by <code>X</code>, between its major cells.</p>
<p>Each element of <code>X</code> specifies the number of dividers to insert before the corresponding major cell of <code>Y</code>. The maximum length of <code>X</code> is <code>1+≢Y</code>, when the last element of <code>X</code> specifies the number of trailing dividers. Note that major cells of <code>Y</code> that precede the first divider (identified by the first non-zero element of <code>X</code>) are excluded from the result.</p>
<p>The length of <code>R</code> is <code>+/X</code> (after possible extension).</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="o">⊂</span><span class="s1">'abcdefg'</span>
<span class="err">┌───┬──┐</span>
<span class="err">│</span><span class="nv">cde</span><span class="err">│</span><span class="nv">fg</span><span class="err">│</span>
<span class="err">└───┴──┘</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊂</span><span class="s1">'abcdefg'</span>
<span class="err">┌┬──┬─┬┬┬──┬┬──┬┐</span>
<span class="err">││</span><span class="nv">ab</span><span class="err">│</span><span class="nv">c</span><span class="err">│││</span><span class="nv">de</span><span class="err">││</span><span class="nv">fg</span><span class="err">││</span>
<span class="err">└┴──┴─┴┴┴──┴┴──┴┘</span>
<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊂</span><span class="s1">'abcdefg'</span>
<span class="err">┌┬──┬────┐</span>
<span class="err">││</span><span class="nv">bc</span><span class="err">│</span><span class="nv">defg</span><span class="err">│</span>
<span class="err">└┴──┴────┘</span>
</code></pre></div>
<p>The above examples may be explained pictorially by the diagram below.</p>
<p><img alt="partitioned enclose" src="img/partitioned-enclose.png"/></p>
<h5>Further Examples</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊂</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌───────┬──────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">└───────┴──────────┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊂</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌───────┬──┐</span>
<span class="err">│</span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="err">│</span><span class="w"> </span><span class="m">4</span><span class="err">│</span>
<span class="err">│</span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="err">│</span><span class="w"> </span><span class="m">8</span><span class="err">│</span>
<span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="err">│</span><span class="m">12</span><span class="err">│</span>
<span class="err">└───────┴──┘</span>
</code></pre></div>
</article>
<article id="primitive-functions-pi-times">
<div class="heading-container"><h3 class="heading" id="primitive-functions-pi-times-header">Pi Times</h3><div class="command">R←○Y</div></div>
<p><code>Y</code> may be any numeric array. <code>R</code> is numeric. The value of <code>R</code> is the product of the mathematical constant <em>π=3.14159...</em> (Pi), and <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">○</span><span class="m">0.5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="m">1.570796327</span><span class="w"> </span><span class="m">3.141592654</span><span class="w"> </span><span class="m">6.283185307</span>

<span class="w">      </span><span class="o">○</span><span class="m">0J1</span>
<span class="m">0J3.141592654</span>

<span class="w">      </span><span class="o">*○</span><span class="m">0J1</span><span class="w"> </span><span class="c1">⍝ Euler</span>
<span class="m">¯1</span>
</code></pre></div>
</article>
<article id="primitive-functions-pick">
<div class="heading-container"><h3 class="heading" id="primitive-functions-pick-header">Pick</h3><div class="command">R←X⊃Y</div></div>
<p><code>Y</code> may be any array.</p>
<p><code>X</code> is a scalar or vector of indices of <code>Y</code>.</p>
<p><code>R</code> is an item selected from the structure of <code>Y</code> according to <code>X</code>.</p>
<p>Elements of <code>X</code> select from successively deeper levels in the structure of <code>Y</code>.  The items of <code>X</code> are simple integer scalars or vectors which identify a set of indices, one per axis at the particular level of nesting of <code>Y</code> in row-major order.  Simple scalar items in <code>Y</code> may be picked by empty vector items in <code>X</code> to any arbitrary depth.</p>
<p><code>⎕IO</code> is an implicit argument of Pick.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">G</span><span class="kd">←</span><span class="p">(</span><span class="s1">'ABC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'DEF'</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="s1">'GHI'</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="s1">'JKL'</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>

<span class="w">      </span><span class="nv">G</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="nv">G</span><span class="o">,</span><span class="p">(</span><span class="s1">'MNO'</span><span class="w"> </span><span class="m">5</span><span class="p">)(</span><span class="s1">'PQR'</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>

<span class="w">      </span><span class="nv">G</span>
<span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">1</span><span class="w">   </span><span class="nv">DEF</span><span class="w">  </span><span class="m">2</span><span class="w">   </span><span class="nv">GHI</span><span class="w">  </span><span class="m">3</span>
<span class="w">  </span><span class="nv">JKL</span><span class="w">  </span><span class="m">4</span><span class="w">   </span><span class="nv">MNO</span><span class="w">  </span><span class="m">5</span><span class="w">   </span><span class="nv">PQR</span><span class="w">  </span><span class="m">6</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">((</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="o">,</span><span class="m">1</span><span class="p">)</span><span class="o">⊃</span><span class="nv">G</span>
<span class="nv">JKL</span>

<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="o">⊃</span><span class="nv">G</span>
<span class="w"> </span><span class="nv">JKL</span><span class="w">  </span><span class="m">4</span>

<span class="w">      </span><span class="p">((</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="o">⊃</span><span class="nv">G</span>
<span class="nv">K</span>

<span class="w">      </span><span class="p">(</span><span class="m">5</span><span class="o">⍴⊂⍳</span><span class="m">0</span><span class="p">)</span><span class="o">⊃</span><span class="m">10</span>
<span class="m">10</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-plus">
<div class="heading-container"><h3 class="heading" id="primitive-functions-plus-header">Plus</h3><div class="command">R←X+Y</div></div>
<p>See <a class="internal-link" href="#primitive-functions-add">Section 1.4.3</a>.</p>
</article>
<article id="primitive-functions-power">
<div class="heading-container"><h3 class="heading" id="primitive-functions-power-header">Power</h3><div class="command">R←X*Y</div></div>
<p><code>Y</code> must be a numeric array.  <code>X</code> must be a numeric array.  <code>R</code> is numeric.  The value of <code>R</code> is <code>X</code> raised to the power of <code>Y</code>.</p>
<p>If <code>Y</code> is zero, <code>R</code> is defined to be 1.</p>
<p>If <code>X</code> is zero, <code>Y</code> must be non-negative.</p>
<p>In general, <code>X*Y</code> is defined as <code>*Y×⍟X</code>. If <code>X</code> is negative, the result <code>R</code> is likely to be complex.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="o">*</span><span class="m">2</span><span class="w"> </span><span class="m">¯2</span>
<span class="m">4</span><span class="w"> </span><span class="m">0.25</span>

<span class="w">      </span><span class="m">9</span><span class="w"> </span><span class="m">64</span><span class="o">*</span><span class="m">0.5</span>
<span class="m">3</span><span class="w"> </span><span class="m">8</span>

<span class="w">      </span><span class="m">¯27</span><span class="o">*</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1.2</span><span class="w"> </span><span class="m">.5</span>
<span class="m">¯19683</span><span class="w"> </span><span class="m">729</span><span class="w"> </span><span class="m">¯42.22738244J¯30.67998919</span><span class="w"> </span><span class="m">0J5.196152423</span>

<span class="w">      </span><span class="m">¯8</span><span class="o">*÷</span><span class="m">3</span>
<span class="m">1J1.732050808</span>
</code></pre></div>
</article>
<article id="primitive-functions-ravel">
<div class="heading-container"><h3 class="heading" id="primitive-functions-ravel-header">Ravel</h3><div class="command">R←,Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a vector of the elements of <code>Y</code> taken in row-major order.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="o">,</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="nv">A</span>
<span class="nv">ABC</span>
<span class="nv">DEF</span>
<span class="nv">GHI</span>
<span class="nv">JKL</span>
<span class="w">      </span><span class="o">,</span><span class="nv">A</span>
<span class="nv">ABCDEFGHIJKL</span>

<span class="w">      </span><span class="o">⍴,</span><span class="m">10</span>
<span class="m">1</span>
</code></pre></div>
<p>See also: <a class="internal-link" href="#primitive-functions-ravel-with-axes">Section 1.4.83</a>.</p>
</article>
<article id="primitive-functions-ravel-with-axes">
<div class="heading-container"><h3 class="heading" id="primitive-functions-ravel-with-axes-header">Ravel with Axes</h3><div class="command">R←,[K]Y</div></div>
<p><code>Y</code> may be any array.</p>
<p><code>K</code> is either:</p>
<ul>
<li>A simple fractional scalar adjacent to an axis of <code>Y</code>, or</li>
<li>A simple integer scalar or vector of axes of <code>Y</code>, or</li>
<li>An empty vector</li>
</ul>
<p>Ravel with axis can be used with selective specification.</p>
<p><code>R</code> depends on the case of <code>K</code> above.</p>
<p>If <code>K</code> is a fraction, the result <code>R</code> is an array of the same shape as <code>Y</code>, but with a new axis of length 1 inserted at the <code>K</code>th position.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="m">1</span><span class="o">+⍴⍴</span><span class="nv">Y</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">R</span><span class="w">  </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="o">,⍴</span><span class="nv">Y</span><span class="p">)</span><span class="sr">[</span><span class="o">⍋</span><span class="nv">K</span><span class="o">,⍳⍴⍴</span><span class="nv">Y</span><span class="sr">]</span>
</code></pre></div>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="s1">'ABC'</span>
<span class="nv">ABC</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="s1">'ABC'</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="s1">'ABC'</span>
<span class="nv">A</span>
<span class="nv">B</span>
<span class="nv">C</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="s1">'ABC'</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nv">MAT</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="nv">MAT</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="nv">MAT</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">2.5</span><span class="sr">]</span><span class="nv">MAT</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>If <code>K</code> is an integer scalar or vector of axes of <code>Y</code>, then:</p>
<ul>
<li><code>K</code> must contain contiguous axes of <code>Y</code> in ascending order</li>
<li><code>R</code> contains the elements of <code>Y</code> ravelled along the indicated axes</li>
</ul>
<p>Note that if <code>K</code> is a scalar or single element vector, <code>R ←→ Y</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="m">1</span><span class="o">+</span><span class="p">(</span><span class="o">⍴⍴</span><span class="nv">Y</span><span class="p">)</span><span class="o">-⍴,</span><span class="nv">K</span>
</code></pre></div>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">6</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="o">,</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="o">⍴,</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">2</span><span class="w"> </span><span class="m">12</span>
</code></pre></div>
<p>If <code>K</code> is an empty vector a new last axis of length 1 is created.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="nv">Y</span><span class="p">)</span><span class="o">,</span><span class="m">1</span>
</code></pre></div>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Q1</span><span class="kd">←</span><span class="s1">'January'</span><span class="w"> </span><span class="s1">'February'</span><span class="w"> </span><span class="s1">'March'</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">Q1</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">January</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">February</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">March</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────────────┘</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="o">,</span><span class="sr">[</span><span class="o">⍳</span><span class="m">0</span><span class="sr">]</span><span class="nv">Q1</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">January</span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">February</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">March</span><span class="err">│</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└─────┘</span><span class="w">    </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────┘</span>
</code></pre></div>
<p>See also: <a class="internal-link" href="#primitive-functions-ravel-with-axes">Section 1.4.83</a>.</p>
</article>
<article id="primitive-functions-reciprocal">
<div class="heading-container"><h3 class="heading" id="primitive-functions-reciprocal-header">Reciprocal</h3><div class="command">R←÷Y</div></div>
<p><code>Y</code> must be a numeric array.  <code>R</code> is numeric.  <code>R</code> is the reciprocal of <code>Y</code>; that is <code>1÷Y</code>.  If <code>⎕DIV=0</code>, <code>÷0</code> results in a <code>DOMAIN ERROR</code>.  If <code>⎕DIV=1</code>, <code>÷0</code> returns 0.</p>
<p><code>⎕DIV</code> is an implicit argument of Reciprocal.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span>
<span class="m">0.25</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="m">0.2</span>

<span class="w">      </span><span class="o">÷</span><span class="m">0j1</span><span class="w"> </span><span class="m">0j¯1</span><span class="w"> </span><span class="m">2j2</span><span class="w"> </span><span class="m">4j4</span>
<span class="m">0J¯1</span><span class="w"> </span><span class="m">0J1</span><span class="w"> </span><span class="m">0.25J¯0.25</span><span class="w"> </span><span class="m">0.125J¯0.125</span>

<span class="w">      </span><span class="nf">⎕DIV</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span>
<span class="w">      </span><span class="o">÷</span><span class="m">0</span><span class="w"> </span><span class="m">0.5</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
</article>
<article id="primitive-functions-replicate">
<div class="heading-container"><h3 class="heading" id="primitive-functions-replicate-header">Replicate</h3><div class="command">R←X/[K]Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> is a simple integer vector or scalar.</p>
<p>The axis specification is optional.  If present, <code>K</code> must be a simple integer scalar or 1-element vector.  The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.  The form <code>R←X⌿Y</code> implies the first axis of <code>Y</code>.</p>
<p>If <code>Y</code> has length 1 along the <code>K</code><sup>th</sup> (or implied) axis, it is extended along that axis to match the length of <code>X</code>. Otherwise, the length of <code>X</code> must be the length of the <code>K</code><sup>th</sup> (or implied) axis of <code>Y</code>. However, if <code>X</code> is a scalar or one-element vector, it will be extended to the length of the <code>K</code><sup>th</sup> axis.</p>
<p><code>R</code> is composed from sub-arrays along the <code>K</code>th axis of <code>Y</code>.  If <code>X[I]</code> (an element of <code>X</code>) is positive, then the corresponding sub-array is replicated <code>X[I]</code> times.  If <code>X[I]</code> is zero, then the corresponding sub-array of <code>Y</code> is excluded.  If <code>X[I]</code> is negative, then the fill element of  <code>Y</code> is replicated <code>|X[I]</code> times.  Each of the (replicated) sub-arrays and fill items are joined along the <code>K</code>th axis in the order of occurrence.  The shape of <code>R</code> is the shape of <code>Y</code> except that the length of the (implied) <code>K</code>th axis is <code>+/|X</code> (after possible extension).</p>
<p>This function is sometimes called Compress when <code>X</code> is Boolean.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="m">5</span><span class="na">/</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">⌿</span><span class="nv">M</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
<p>If <code>Y</code> is a singleton <code>(1=×/⍴,Y)</code> its value is notionally extended to the length of <code>X</code> along the specified axis.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="m">4</span>
<span class="m">4</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="o">,</span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">⍴</span><span class="m">5</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-replicate-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-replicate-first-header">Replicate First</h3><div class="command">R←X⌿[K]Y</div></div>
<p>The form <code>R←X⌿Y</code> implies replication along the first axis of <code>Y</code>.  See <a class="internal-link" href="#primitive-functions-replicate-first">Section 1.4.86</a>.</p>
</article>
<article id="primitive-functions-reshape">
<div class="heading-container"><h3 class="heading" id="primitive-functions-reshape-header">Reshape</h3><div class="command">R←X⍴Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple scalar or vector of non-negative integers.  <code>R</code> is an array of shape <code>X</code> whose elements are taken from <code>Y</code> in row-major sequence and repeated cyclically if required.  If <code>Y</code> is empty, <code>R</code> is composed of fill elements of <code>Y</code> (<code>⊂∊⊃Y</code> with <code>⎕ml←0</code>).  If <code>X</code> contains at least one zero, then <code>R</code> is empty.  If <code>X</code> is an empty vector, then <code>R</code> is scalar.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">8</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-functions-residue">
<div class="heading-container"><h3 class="heading" id="primitive-functions-residue-header">Residue</h3><div class="command">R←X|Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array.</p>
<p>For positive arguments, <code>R</code> is the remainder when <code>Y</code> is divided by <code>X</code>. If <code>X=0</code>, <code>R</code> is <code>Y</code>.</p>
<p>For other argument values, <code>R</code> is given by the expression <code>Y-X×⌊Y÷X+0=X</code>. This expression also applies when <code>X</code> and/or <code>Y</code> are complex if the simple <code>⌊</code> is replaced by the <code>CpxFloor</code> function. See <a class="internal-link" href="#primitive-functions-floor">Section 1.4.36</a>.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Residue.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">¯3</span><span class="w"> </span><span class="m">¯3</span><span class="o">|</span><span class="m">¯5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯2</span>

<span class="w">      </span><span class="m">0.5</span><span class="o">|</span><span class="m">3.12</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯0.6</span>
<span class="m">0.12</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0.4</span>

<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">|</span><span class="m">¯5.25</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2.41</span>
<span class="m">¯0.25</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0.41</span>

<span class="w">      </span><span class="m">1j2</span><span class="o">|</span><span class="m">2j3</span><span class="w"> </span><span class="m">3j4</span><span class="w"> </span><span class="m">5j6</span>
<span class="m">1J1</span><span class="w"> </span><span class="m">¯1J1</span><span class="w"> </span><span class="m">0J1</span>
</code></pre></div>
<p>Note that the ASCII Broken Bar (<code>⎕UCS 166</code>, U+00A6) is not interpreted as Residue.</p>
</article>
<article id="primitive-functions-reverse">
<div class="heading-container"><h3 class="heading" id="primitive-functions-reverse-header">Reverse</h3><div class="command">R←⌽[K]Y</div></div>
<p><code>Y</code> may be any array.  The axis specification is optional.  If present, <code>K</code> must be an integer scalar or one-element vector.  The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis is implied.  The form <code>R←⊖Y</code> implies the first axis.</p>
<p><code>R</code> is the array <code>Y</code> reversed on the <code>K</code>th or implied axis.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌽</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w">      </span><span class="o">⌽</span><span class="nv">M</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⊖</span><span class="nv">M</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="o">⌽</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
</article>
<article id="primitive-functions-reverse-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-reverse-first-header">Reverse First</h3><div class="command">R←⊖[K]Y</div></div>
<p>The form <code>R←⊖Y</code> implies reversal along the first axis.  See <a class="internal-link" href="#primitive-functions-reverse-first">Section 1.4.90</a>.</p>
</article>
<article id="primitive-functions-right">
<div class="heading-container"><h3 class="heading" id="primitive-functions-right-header">Right</h3><div class="command">R←X⊢Y</div></div>
<p><code>X</code> and <code>Y</code> may be any arrays. The result <code>R</code> is the right argument <code>Y</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">42</span><span class="w"> </span><span class="o">⊢</span><span class="s1">'abc'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="nv">abc</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">32</span><span class="o">+</span><span class="m">1.8</span><span class="o">×⊢</span><span class="m">0</span><span class="w"> </span><span class="m">100</span><span class="w">      </span><span class="c1">⍝ {32+1.8×⍵} 0 100</span>
<span class="m">32</span><span class="w"> </span><span class="m">212</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊢÷+</span><span class="na">/</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">     </span><span class="c1">⍝ {⍵÷+/⍵} 4 3 0 1</span>
<span class="m">0.5</span><span class="w"> </span><span class="m">0.375</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0.125</span>

<span class="w">      </span><span class="o">↓</span><span class="na">⍣</span><span class="m">2</span><span class="o">⊢</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="nf">⎕A</span><span class="w">     </span><span class="c1">⍝ (↓⍣2)2 2 2 2⍴⎕A</span>
<span class="w">  </span><span class="nv">AB</span><span class="w">  </span><span class="nv">CD</span><span class="w">    </span><span class="nv">EF</span><span class="w">  </span><span class="nv">GH</span><span class="w">  </span>
<span class="w">  </span><span class="nv">IJ</span><span class="w">  </span><span class="nv">KL</span><span class="w">    </span><span class="nv">MN</span><span class="w">  </span><span class="nv">OP</span><span class="w">  </span>
</code></pre></div></p>
<p>When <code>⊢</code> is applied using reduction, the derived function selects the last sub-array of the array along the specified dimension. This is implemented as an idiom.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="na">/</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">3</span>
<span class="w">      </span><span class="nv">mat</span><span class="kd">←</span><span class="o">↑</span><span class="s1">'scent'</span><span class="w"> </span><span class="s1">'canoe'</span><span class="w"> </span><span class="s1">'arson'</span><span class="w"> </span><span class="s1">'rouse'</span><span class="w"> </span><span class="s1">'fleet'</span>

<span class="w">      </span><span class="o">⊢</span><span class="na">⌿</span><span class="nv">mat</span><span class="w">  </span><span class="c1">⍝ last row                           </span>
<span class="nv">fleet</span>
<span class="w">      </span><span class="o">⊢</span><span class="na">/</span><span class="nv">mat</span><span class="w">  </span><span class="c1">⍝ last column</span>
<span class="nv">tenet</span>

<span class="w">      </span><span class="o">⊢</span><span class="na">/</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span><span class="w"> </span><span class="c1">⍝ last row from each plane</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
</code></pre></div>
</article>
<article id="primitive-functions-roll">
<div class="heading-container"><h3 class="heading" id="primitive-functions-roll-header">Roll</h3><div class="command">R←?Y</div></div>
<p><code>Y</code> may be any non-negative integer array. <code>R</code> has the same shape as <code>Y</code> at each depth.</p>
<p>For each positive element of <code>Y</code> the corresponding element of <code>R</code> is an integer, pseudo-randomly selected from the integers <code>⍳Y</code> with each integer in this population having an equal chance of being selected.</p>
<p>For each zero element of <code>Y</code>, the corresponding element of <code>R</code> is a pseudo-random floating-point value in the range 0 - 1, but excluding 0 and 1, i.e. <code>(0&lt;R[I]&lt;1)</code>.</p>
<p><code>⎕IO</code> and <code>⎕RL</code> are implicit arguments of Roll. A side effect of Roll is to change the value of <code>⎕RL</code>.</p>
<p>Note that different random number generators are available; see <code>⎕RL</code> for more information.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">?</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">9</span>
<span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="o">?</span><span class="m">3</span><span class="o">⍴</span><span class="m">0</span>
<span class="m">0.3205466592</span><span class="w"> </span><span class="m">0.3772891947</span><span class="w"> </span><span class="m">0.5456603511</span>
</code></pre></div>
</article>
<article id="primitive-functions-rotate">
<div class="heading-container"><h3 class="heading" id="primitive-functions-rotate-header">Rotate</h3><div class="command">R←X⌽[K]Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple integer array.  The axis specification is optional.  If present, <code>K</code> must be a simple integer scalar or one-element vector.</p>
<p>The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.  The form <code>R←X⊖Y</code> implies the first axis.</p>
<p><code>X</code> must have the same shape as <code>Y</code>, excluding <code>Y</code>'s <code>K</code>th axis. Otherwise, if <code>X</code> is a one-element array, it will be extended to conform.</p>
<p><code>R</code> is an array with the same shape as <code>Y</code>, with the elements of each of the vectors along the <code>K</code>th axis of <code>Y</code> rotated by the value of the corresponding element of <code>X</code>.  If the value is positive, the rotation is in the sense of right to left.  If the value is negative, the rotation is in the sense of left to right.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="m">¯2</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>

<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>

<span class="w">      </span><span class="nv">I</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nv">I</span><span class="o">⌽</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span>

<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">16</span>
<span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">12</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">J</span>
<span class="m">2</span><span class="w"> </span><span class="m">¯3</span>
<span class="m">3</span><span class="w"> </span><span class="m">¯2</span>
<span class="w">      </span><span class="nv">J</span><span class="o">⌽</span><span class="nv">M</span>
<span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">5</span>

<span class="m">12</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span>
<span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-rotate-first">
<div class="heading-container"><h3 class="heading" id="primitive-functions-rotate-first-header">Rotate First</h3><div class="command">R←X⊖[K]Y</div></div>
<p>The form <code>R←X⊖Y</code> implies rotation along the first axis.  See <a class="internal-link" href="#primitive-functions-rotate-first">Section 1.4.94</a>.</p>
</article>
<article id="primitive-functions-same">
<div class="heading-container"><h3 class="heading" id="primitive-functions-same-header">Same</h3><div class="command">R←⊣YR←⊢Y</div></div>
<p><code>Y</code> may be any array.</p>
<p>The result <code>R</code> is the argument <code>Y</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊣</span><span class="s1">'abc'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="nv">abc</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊢,</span><span class="nf">⎕size</span><span class="p">)</span><span class="w"> </span><span class="s1">'a'</span><span class="nf">⎕nl</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="c1">⍝ left tine of fork meaning "it"</span>
<span class="nv">acc</span><span class="w">      </span><span class="m">572</span>
<span class="nv">and</span><span class="w">      </span><span class="m">492</span>
<span class="nv">ascan</span><span class="w">    </span><span class="m">740</span>
<span class="nv">ascana</span><span class="w">   </span><span class="m">716</span>
<span class="nv">at</span><span class="w">      </span><span class="m">1764</span>
<span class="nv">avl</span><span class="w">    </span><span class="m">17476</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-shape">
<div class="heading-container"><h3 class="heading" id="primitive-functions-shape-header">Shape</h3><div class="command">R←⍴Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a non-negative integer vector whose elements are the dimensions of <code>Y</code>.  If <code>Y</code> is a scalar, then <code>R</code> is an empty vector.  The rank of <code>Y</code> is given by <code>⍴⍴Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="m">10</span>

<span class="w">      </span><span class="o">⍴</span><span class="s1">'CAT'</span>
<span class="m">3</span>

<span class="w">      </span><span class="o">⍴</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="o">+</span><span class="nv">G</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)(</span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'MOUSE'</span><span class="w"> </span><span class="s1">'FLEA'</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="nv">CAT</span><span class="w">  </span><span class="nv">MOUSE</span><span class="w">  </span><span class="nv">FLEA</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">G</span>
<span class="m">2</span>

<span class="w">      </span><span class="o">⍴⍴</span><span class="nv">G</span>
<span class="m">1</span>

<span class="w">      </span><span class="o">⍴</span><span class="na">¨</span><span class="nv">G</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">3</span>

<span class="w">      </span><span class="o">⍴</span><span class="na">¨¨</span><span class="nv">G</span>
<span class="w">          </span><span class="m">3</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">4</span>
</code></pre></div>
</article>
<article id="primitive-functions-split">
<div class="heading-container"><h3 class="heading" id="primitive-functions-split-header">Split</h3><div class="command">R←↓[K]Y</div></div>
<p><code>Y</code> may be any array.  The axis specification is optional.  If present, <code>K</code> must be a simple integer scalar or one-element vector.  The value of <code>K</code> must be an axis of <code>Y</code>.  If absent, the last axis is implied.</p>
<p>The items of <code>R</code> are the sub-arrays of <code>Y</code> along the <code>K</code>th axis.  <code>R</code> is a scalar if <code>Y</code> is a scalar.  Otherwise <code>R</code> is an array whose rank is <code>¯1+⍴⍴Y</code> and whose shape is <code>(K≠⍳⍴⍴Y)/⍴Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↓</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'MINDTHATSTEP'</span>
<span class="w"> </span><span class="nv">MIND</span><span class="w">  </span><span class="nv">THAT</span><span class="w">  </span><span class="nv">STEP</span>

<span class="w">      </span><span class="o">↓</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">10</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>

<span class="w">      </span><span class="o">↓</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">10</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span>
</code></pre></div>
</article>
<article id="primitive-functions-subtract">
<div class="heading-container"><h3 class="heading" id="primitive-functions-subtract-header">Subtract</h3><div class="command">R←X-Y</div></div>
<p><code>Y</code> may be any numeric array.  <code>X</code> may be any numeric array. <code>R</code> is numeric. The value of <code>R</code> is the difference between <code>X</code> and <code>Y</code>.</p>
<p>This function is also known as Minus.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">¯3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">¯4</span>

<span class="w">      </span><span class="m">2j3</span><span class="o">-</span><span class="m">.3j5</span><span class="w">  </span><span class="c1">⍝ (a+bi)-(c+di) = (a-c)+(b-d)i</span>
<span class="m">1.7J¯2</span>
</code></pre></div>
</article>
<article id="primitive-functions-table">
<div class="heading-container"><h3 class="heading" id="primitive-functions-table-header">Table</h3><div class="command">R←⍪Y</div></div>
<p><code>Y</code> may be any array. <code>R</code> is a 2-dimensional matrix of the elements of <code>Y</code> taken in row-major order, preserving the shape of the first dimension of <code>Y</code> if it exists</p>
<p><em>Table</em> has been implemented according to the Extended APL Standard (<em>ISO/IEC 13751:2001).</em></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="w"> </span><span class="o">⍪</span><span class="s1">'a'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">a</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="w"> </span><span class="o">⍪</span><span class="s1">'hello'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">h</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">e</span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">l</span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">l</span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">o</span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────┘</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="p">(</span><span class="o">⍴</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="w"> </span><span class="o">⍪</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">12</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">───┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">──────────────────────────────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────────────────────────────┘</span>
</code></pre></div>
</article>
<article id="primitive-functions-take">
<div class="heading-container"><h3 class="heading" id="primitive-functions-take-header">Take</h3><div class="command">R←X↑Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple integer scalar or vector.</p>
<p>If <code>Y</code> is a scalar, it is treated as a one-element array of shape <code>(⍴,X)⍴1</code>.  The length of <code>X</code> must be the same as or less than the rank of <code>Y</code>. If the length of <code>X</code> is less than the rank of <code>Y</code>, the missing elements of <code>X</code> default to the length of the corresponding axis of <code>Y</code>.</p>
<p><code>R</code> is an array of the same rank as <code>Y</code> (after possible extension), and of shape <code>|X</code>.  If <code>X[I]</code> (an element of <code>X</code>) is positive, then <code>X[I]</code> sub-arrays are taken from the beginning of the <code>I</code><sup>th</sup> axis of <code>Y</code>.  If <code>X[I]</code> is negative, then <code>X[I]</code> sub-arrays are taken from the end of the <code>I</code><sup>th</sup> axis of <code>Y</code>.</p>
<p>If more elements are taken than exist on axis <code>I</code>, the extra positions in <code>R</code> are filled with the fill element of <code>Y</code> (<code>⊂∊⊃Y</code> with <code>⎕ml←0</code>).</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">5</span><span class="o">↑</span><span class="s1">'ABCDEF'</span>
<span class="nv">ABCDE</span>

<span class="w">      </span><span class="m">5</span><span class="o">↑</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="m">¯5</span><span class="o">↑</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="m">5</span><span class="o">↑</span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">↑</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>

<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯2</span><span class="o">↑</span><span class="nv">M</span>
<span class="m">7</span><span class="w"> </span><span class="m">8</span>
<span class="w">      </span><span class="nv">M3</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="nf">⎕A</span>
<span class="w">      </span><span class="m">1</span><span class="o">↑</span><span class="nv">M3</span>
<span class="nv">ABCD</span>
<span class="nv">EFGH</span>
<span class="nv">IJKL</span>
<span class="w">      </span><span class="m">¯1</span><span class="o">↑</span><span class="nv">M3</span>
<span class="nv">MNOP</span>
<span class="nv">QRST</span>
<span class="nv">UVWX</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-take-with-axes">
<div class="heading-container"><h3 class="heading" id="primitive-functions-take-with-axes-header">Take with Axes</h3><div class="command">R←X↑[K]Y</div></div>
<p><code>Y</code> may be any non-scalar array.  <code>X</code> must be a simple integer scalar or vector.  <code>K</code> is a vector of zero or more axes of <code>Y</code>.</p>
<p><code>R</code> is an array of the first or last elements of <code>Y</code> taken along the axes <code>K</code> depending on whether the corresponding element of <code>X</code> is positive or negative respectively.</p>
<p>The rank of <code>R</code> is the same as the rank of <code>Y</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴⍴</span><span class="nv">R</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">⍴⍴</span><span class="nv">Y</span>
</code></pre></div></p>
<p>The size of each axis of <code>R</code> is determined by the corresponding element of <code>X</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⍴</span><span class="nv">R</span><span class="p">)</span><span class="sr">[</span><span class="o">,</span><span class="nv">K</span><span class="sr">]</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">|,</span><span class="nv">X</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">M</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="m">2</span><span class="o">↑</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>

<span class="w">      </span><span class="m">2</span><span class="o">↑</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span>


<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">¯2</span><span class="o">↑</span><span class="sr">[</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="sr">]</span><span class="nv">M</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>

<span class="m">17</span><span class="w"> </span><span class="m">18</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span>
</code></pre></div>
</article>
<article id="primitive-functions-tally">
<div class="heading-container"><h3 class="heading" id="primitive-functions-tally-header">Tally</h3><div class="command">R←≢Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a simple numeric scalar.</p>
<p>Tally returns the number of major cells of <code>Y</code>. See <i>Cells and Sub-arrays</i>.</p>
<p>This can also be expressed as the length of the leading axis or 1 if <code>Y</code> is a scalar. Tally is equivalent to the function <code>{⍬⍴(⍴⍵),1}</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">≢</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">10</span>
<span class="m">2</span>
<span class="w">      </span><span class="o">≢</span><span class="m">2</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">≢</span><span class="no">⍬</span>
<span class="m">0</span>
</code></pre></div>
<p>Note that <code>≢V</code> is useful for returning the length of vector <code>V</code> as a scalar.  (In contrast, <code>⍴V</code> is a one-element vector.)</p>
</article>
<article id="primitive-functions-times">
<div class="heading-container"><h3 class="heading" id="primitive-functions-times-header">Times</h3><div class="command">R←X×Y</div></div>
<p>See <a class="internal-link" href="#primitive-functions-multiply">Section 1.4.66</a>.</p>
</article>
<article id="primitive-functions-transpose-monadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-transpose-monadic-header">Transpose (Monadic)</h3><div class="command">R←⍉Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is an array of shape <code>⌽⍴Y</code>, similar to <code>Y</code> with the order of the axes reversed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="o">⍉</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span>
<span class="m">2</span><span class="w"> </span><span class="m">5</span>
<span class="m">3</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">cube</span><span class="w">    </span><span class="c1">⍝ 3D array</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="o">⍉</span><span class="w"> </span><span class="nv">cube</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">13</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">17</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">21</span>

<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">14</span>
<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">18</span>
<span class="m">10</span><span class="w"> </span><span class="m">22</span>

<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">15</span>
<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">19</span>
<span class="m">11</span><span class="w"> </span><span class="m">23</span>

<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">16</span>
<span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">20</span>
<span class="m">12</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="o">⍴</span><span class="w"> </span><span class="nv">cube</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍴</span><span class="w"> </span><span class="o">⍉</span><span class="w"> </span><span class="nv">cube</span><span class="w">    </span><span class="c1">⍝ transpose reverses shape</span>
<span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
</article>
<article id="primitive-functions-transpose-dyadic">
<div class="heading-container"><h3 class="heading" id="primitive-functions-transpose-dyadic-header">Transpose (Dyadic)</h3><div class="command">R←X⍉Y</div></div>
<p><code>Y</code> may be any array.  <code>X</code> must be a simple scalar or vector whose elements are included in the set <code>⍳⍴⍴Y</code>.  Integer values in <code>X</code> may be repeated but all integers in the set <code>⍳⌈/X</code> must be included.  The length of <code>X</code> must equal the rank of <code>Y</code>.</p>
<p><code>R</code> is an array formed by the transposition of the axes of <code>Y</code> as specified by <code>X</code>.  The <code>I</code><sup>th</sup> element of <code>X</code> gives the new position for the <code>I</code><sup>th</sup> axis of <code>Y</code>.  If <code>X</code> repositions two or more axes of <code>Y</code> to the same axis, the elements used to fill this axis are those whose indices on the relevant axes of <code>Y</code> are equal.</p>
<p><code>⎕IO</code> is an implicit argument of Dyadic Transpose.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>

<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="o">⍉</span><span class="nv">A</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">16</span>

<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>

<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span>
<span class="m">21</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">24</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="o">⍉</span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">18</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="o">⍉</span><span class="nv">A</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span>
<span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></p>
<h5>Alternative Explanation</h5>
<p>Assign a distinct letter for each unique integer in <code>X</code> :
<div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">…</span>
<span class="nv">i</span><span class="w"> </span><span class="nv">j</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="nv">l</span>
</code></pre></div></p>
<p>If <code>R←X⍉Y</code>, then <code>R[i;j;k;…]</code> equals <code>Y</code> indexed by the letters corresponding to elements of <code>X</code> .</p>
<h5>For example</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span>

<span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="m">100</span>

<span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="c1">⍝  k j k i j</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="nv">X</span><span class="o">⍉</span><span class="nv">Y</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">i</span><span class="kd">←</span><span class="o">?</span><span class="m">17</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">j</span><span class="kd">←</span><span class="o">?</span><span class="m">11</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">k</span><span class="kd">←</span><span class="o">?</span><span class="m">5</span>
<span class="w">      </span><span class="nv">R</span><span class="sr">[</span><span class="nv">i</span><span class="sr">;</span><span class="nv">j</span><span class="sr">;</span><span class="nv">k</span><span class="sr">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Y</span><span class="sr">[</span><span class="nv">k</span><span class="sr">;</span><span class="nv">j</span><span class="sr">;</span><span class="nv">k</span><span class="sr">;</span><span class="nv">i</span><span class="sr">;</span><span class="nv">j</span><span class="sr">]</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">R</span><span class="sr">[</span><span class="nv">i</span><span class="sr">;</span><span class="nv">j</span><span class="sr">;</span><span class="nv">k</span><span class="sr">]</span><span class="o">=</span><span class="nv">Y</span><span class="sr">[</span><span class="o">⊂⍎</span><span class="na">¨</span><span class="s1">'ijk'</span><span class="sr">[</span><span class="nv">X</span><span class="sr">]]</span>
<span class="m">1</span>
</code></pre></div></p>
<p>From the above it can be seen that:</p>
<ul>
<li>the rank of <code>R</code> is <code>0⌈1+⌈/X</code></li>
<li>the shape of R is <code>(⍴Y)⌊.+(⌈/⍴Y)×X∘.≠⍳0⌈1+⌈/X</code></li>
</ul>
</article>
<article id="primitive-functions-type">
<div class="heading-container"><h3 class="heading" id="primitive-functions-type-header">Type</h3><div class="command">(⎕ML&lt;1)</div></div>
<p>Migration level must be such that <code>⎕ML&lt;1</code> (otherwise <code>∊</code> means Enlist. See <a class="internal-link" href="#primitive-functions-enlist">Section 1.4.26</a>).</p>
<p><code>Y</code> may be any array.  <code>R</code> is an array with the same shape and structure as <code>Y</code> in which a numeric value is replaced by 0 and a character value is replaced by <code>' '</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">∊</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'TEXT'</span><span class="p">)</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">' '</span><span class="o">=∊</span><span class="s1">'X'</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-functions-union">
<div class="heading-container"><h3 class="heading" id="primitive-functions-union-header">Union</h3><div class="command">R←X∪Y</div></div>
<p><code>Y</code> must be a vector.  <code>X</code> must be a vector.  If either argument is a scalar, it is treated as a one-element vector.  <code>R</code> is a vector of the elements of <code>X</code> catenated with the elements of <code>Y</code> which are not found in <code>X</code>.</p>
<p>Items in <code>X</code> and <code>Y</code> are considered the same if <code>X≡Y</code> returns 1 for those items.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Union.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'WASH'</span><span class="w"> </span><span class="o">∪</span><span class="w"> </span><span class="s1">'SHOUT'</span>
<span class="nv">WASHOUT</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'ONE'</span><span class="w"> </span><span class="s1">'TWO'</span><span class="w"> </span><span class="o">∪</span><span class="w"> </span><span class="s1">'TWO'</span><span class="w"> </span><span class="s1">'THREE'</span>
<span class="w"> </span><span class="nv">ONE</span><span class="w">  </span><span class="nv">TWO</span><span class="w">  </span><span class="nv">THREE</span>
</code></pre></div>
<p>For performance information, see <i>Programmer's Guide: Search Functions and Hash Tables</i>.</p>
</article>
<article id="primitive-functions-unique">
<div class="heading-container"><h3 class="heading" id="primitive-functions-unique-header">Unique</h3><div class="command">R←∪Y</div></div>
<p><code>Y</code> may be any array. <code>R</code> is a vector of the unique major cells of <code>Y</code> (the unique items of a vector, the unique rows of a matrix and so forth), in the order in which they first appear in <code>Y</code>.  For further information, see <i>Major Cells</i>.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Unique.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">∪</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">10</span>
<span class="m">22</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">∪</span><span class="w"> </span><span class="nv">v</span><span class="kd">←</span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DUCK'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'DUCK'</span>
<span class="err">┌───┬───┬────┐</span>
<span class="err">│</span><span class="nv">CAT</span><span class="err">│</span><span class="nv">DOG</span><span class="err">│</span><span class="nv">DUCK</span><span class="err">│</span>
<span class="err">└───┴───┴────┘</span>
<span class="w">      </span><span class="o">⊢</span><span class="nv">mat</span><span class="kd">←</span><span class="o">↑</span><span class="nv">v</span><span class="w">                                   </span>
<span class="nv">CAT</span><span class="w"> </span>
<span class="nv">DOG</span><span class="w"> </span>
<span class="nv">CAT</span><span class="w"> </span>
<span class="nv">DUCK</span>
<span class="nv">DOG</span><span class="w"> </span>
<span class="nv">DUCK</span>
<span class="w">      </span><span class="o">∪</span><span class="nv">mat</span><span class="w">                                       </span>
<span class="nv">CAT</span><span class="w"> </span>
<span class="nv">DOG</span><span class="w"> </span>
<span class="nv">DUCK</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="o">⍴⍳</span><span class="m">20</span>
<span class="w">      </span><span class="nv">a</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>
<span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>

<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>
<span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>

<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>
<span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
<span class="w">      </span><span class="o">∪</span><span class="nv">a</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>
<span class="m">16</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-unique-mask">
<div class="heading-container"><h3 class="heading" id="primitive-functions-unique-mask-header">Unique Mask</h3><div class="command">R←≠Y</div></div>
<p><code>Y</code> may be any array.</p>
<p><code>R</code> is a Boolean vector whose length is the number of major cells
in <code>Y</code>. For each major cell of <code>Y</code>, the corresponding element of  <code>R</code> is 1 if it is the first occurrence of that value, and 0 if it is a duplicate of an earlier major cell.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of Unique.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">≠</span><span class="m">22</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">10</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">≠</span><span class="w"> </span><span class="nv">v</span><span class="kd">←</span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'CAT'</span><span class="w"> </span><span class="s1">'DUCK'</span><span class="w"> </span><span class="s1">'DOG'</span><span class="w"> </span><span class="s1">'DUCK'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">⊢</span><span class="nv">mat</span><span class="kd">←</span><span class="o">↑</span><span class="nv">v</span><span class="w"> </span>
<span class="nv">CAT</span><span class="w"> </span>
<span class="nv">DOG</span><span class="w"> </span>
<span class="nv">CAT</span><span class="w"> </span>
<span class="nv">DUCK</span>
<span class="nv">DOG</span><span class="w"> </span>
<span class="nv">DUCK</span>
<span class="w">      </span><span class="o">≠</span><span class="nv">mat</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
</article>
<article id="primitive-functions-where">
<div class="heading-container"><h3 class="heading" id="primitive-functions-where-header">Where</h3><div class="command">R←⍸Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⍸</code> (Iota Underbar) is not available in Classic Edition, and Where is instead represented by <code>⎕U2378</code>.</p>
<p><code>Y</code> must be a simple Boolean or numeric array of non-negative integers.</p>
<p>The model for Where can be expressed as <code>{(,⍵)/,⍳⍴⍵}</code>.</p>
<p>If <code>Y</code> is Boolean, <code>R</code> is a vector of the indices of all the 1s in <code>Y</code>. If <code>Y</code> is all zeros, <code>R</code> is an empty vector.</p>
<p><code>⎕IO</code> is an implicit argument of Where.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⍸</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span>

<span class="w">      </span><span class="o">⍸</span><span class="s1">'e'</span><span class="o">=</span><span class="s1">'Pete'</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="o">⍸</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="err">┌───┬───┬───┬───┬───┬───┬───┬───┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span>
<span class="err">└───┴───┴───┴───┴───┴───┴───┴───┘</span>

<span class="w">      </span><span class="o">⍸</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="err">┌─────┬─────┬─────┬─────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="err">│</span>
<span class="err">└─────┴─────┴─────┴─────┘</span>

<span class="w">      </span><span class="o">⍸</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">/⍥</span><span class="o">,⍳⍴</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⍸</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="err">┌───┬───┬───┬───┬───┬───┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="err">│</span>
<span class="err">└───┴───┴───┴───┴───┴───┘</span>
</code></pre></div>
</article>
<article id="primitive-functions-without">
<div class="heading-container"><h3 class="heading" id="primitive-functions-without-header">Without</h3><div class="command">R←X~Y</div></div>
<p>See <a class="internal-link" href="#primitive-functions-excluding">Section 1.4.28</a>.</p>
</article>
<article id="primitive-functions-zilde">
<div class="heading-container"><h3 class="heading" id="primitive-functions-zilde-header">Zilde</h3><div class="command">R←⍬</div></div>
<p>The empty vector (<code>⍳0</code>) may be represented by the numeric constant <code>⍬</code> called ZILDE.</p>
</article>
</section>
</section>
<section data-chapter-seq="2" id="primitive-operators">
<h1 class="chapter" id="primitive-operators-header">Primitive Operators</h1>
<article id="primitive-operators-operator-syntax">
<h2 id="primitive-operators-operator-syntax-header"> Operator Syntax</h2>
<p>Operators take one or two operands.  An operator with one operand is monadic.  The operand of a monadic operator is to the left of the operator.  An operator with two operands is dyadic.  Both operands are required for a dyadic operator.</p>
<p>Operators have long scope to the left.  That is, the left operand is the longest function or array expression to its left (see <i>Programmer's Guide: Operators</i>).  A dyadic operator has short scope on the right.  Right scope may be extended by the use of parentheses.</p>
<p>An operand may be an array, a primitive function, a system function, a defined function or a derived function.  An array may be the result of an array expression.</p>
<p>An operator with its operand(s) forms a derived function.  The derived function may be monadic or dyadic and it may or may not return an explicit result.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">15</span>
<span class="w">      </span><span class="p">(</span><span class="o">*</span><span class="na">∘</span><span class="m">2</span><span class="p">)</span><span class="o">⍳</span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">9</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">PLUS</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">TIMES</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">×</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nv">PLUS</span><span class="na">.</span><span class="nv">TIMES</span><span class="w"> </span><span class="m">2</span>
<span class="m">2</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span>
<span class="nv">A</span>
<span class="nv">X</span>
<span class="w">      </span><span class="nf">⎕EX</span><span class="na">¨</span><span class="o">↓</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<h3>Monadic Operators</h3>
<p>Like primitive functions, monadic operators can be:</p>
<ul>
<li>named</li>
<li>enclosed within parentheses</li>
<li>displayed in the session</li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="na">¨</span><span class="p">)</span><span class="w">      </span><span class="c1">⍝ name and display</span>
<span class="na">¨</span>
<span class="w">      </span><span class="nv">shape</span><span class="kd">←</span><span class="o">⍴</span>
<span class="w">      </span><span class="nv">shape</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w"> </span>

<span class="w">      </span><span class="nv">slash</span><span class="kd">←</span><span class="na">/</span>
<span class="w">      </span><span class="o">+</span><span class="nv">slash</span><span class="w"> </span><span class="o">⍳</span><span class="m">10</span>
<span class="m">55</span>
<span class="w">      </span><span class="nv">swap</span><span class="kd">←</span><span class="na">⍨</span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="o">-</span><span class="nv">swap</span><span class="w"> </span><span class="m">4</span>
<span class="m">1</span>
</code></pre></div>
<h3>Right Operand Currying</h3>
<p>A dyadic operator may be bound or <em>curried</em> with its right operand to form a monadic operator:</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">inv</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="na">⍣</span><span class="m">¯1</span><span class="w">  </span><span class="c1">⍝ produces monadic inverse operator</span>
<span class="na">⍣</span><span class="w"> </span><span class="m">¯1</span>
<span class="w">      </span><span class="o">+</span><span class="na">\</span><span class="nv">inv</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">    </span><span class="c1">⍝ scan-inverse</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">lim</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="na">⍣</span><span class="o">≡</span><span class="w">       </span><span class="c1">⍝ power-limit</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="na">∘</span><span class="o">÷</span><span class="nv">lim</span><span class="w"> </span><span class="m">1</span><span class="w">     </span><span class="c1">⍝ Phi</span>
<span class="m">1.61803</span>
</code></pre></div>
<h3>Function Composition</h3>
<p>Function composition refers to the "gluing" together of two functions using a dyadic operator such that the functions are applied to the argument(s) as normal, but in a particular pattern specific to the operator that is being used. The term function composition comes from traditional mathematics where it is used for a function <code>h(x)=f(g(x))</code> when written as  <code>h(x)=(f∘g)(x)</code> APL generalises this idea to dyadic functions, allowing various patterns of application in addition to the simple application of one monadic function to the result of another monadic function. The three main patterns, represented by Atop, Beside, and Over can be visualised as follows:</p>
<p><img alt="compositions" src="img/compositions.png"/></p>
<p>When any of these are applied monadically, the dotted branch falls away, and they are all equivalent to each other and to <code>h(x)=(f∘g)(x)</code> of traditional mathematics.</p>
</article>
<article id="primitive-operators-operators-summarised">
<h2 class="heading" id="primitive-operators-operators-summarised-header"><span class="name"> Operators Summarised</span></h2>
<p><a class="internal-link" href="#MonadicOperators">Table 2-1</a> and <a class="internal-link" href="#DyadicOperators">Table 2-2</a> below summarise the Monadic and Dyadic primitive operators whose detailed descriptions  follow in alphabetical order in this section.</p>
<p>Some operators may include an axis specification (indicated <code>[]</code>in the tables). Note that in these case <code>⎕IO</code> is an implicit argument of the derived function.</p>

<table id="MonadicOperators"><caption style="caption-side:top"><strong>Table 2-1:</strong> Monadic Primitive Operators</caption>
<thead>
<tr>
<th>Name</th>
<th>Producing Monadic derived function</th>
<th>Producing Dyadic derived function</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assignment (Modified)</td>
<td> </td>
<td><code>Xf←Y</code></td>
</tr>
<tr>
<td>Assignment (Indexed Modified)</td>
<td> </td>
<td><code>X[I]f←Y</code></td>
</tr>
<tr>
<td>Assignment (Selective Modified)</td>
<td> </td>
<td><code>(EXP X)f←Y</code></td>
</tr>
<tr>
<td>Commute</td>
<td><code>f⍨Y</code></td>
<td><code>Xf⍨Y</code></td>
</tr>
<tr>
<td>Each</td>
<td><code>f¨Y</code></td>
<td><code>Xf¨Y</code></td>
</tr>
<tr>
<td>I-Beam</td>
<td><code>A⌶Y</code></td>
<td><code>X(A⌶)Y</code></td>
</tr>
<tr>
<td>Key</td>
<td><code>f⌸Y</code></td>
<td><code>Xf⌸Y</code></td>
</tr>
<tr>
<td>Reduction</td>
<td><code>f/Y  [ ]</code></td>
<td><code>Xf/Y [ ]</code></td>
</tr>
<tr>
<td>Reduction First</td>
<td><code>f⌿Y  [ ]</code></td>
<td><code>Xf⌿Y [ ]</code></td>
</tr>
<tr>
<td>Scan</td>
<td><code>f\Y  [ ]</code></td>
<td> </td>
</tr>
<tr>
<td>Scan First</td>
<td><code>f⍀Y  [ ]</code></td>
<td> </td>
</tr>
<tr>
<td>Spawn</td>
<td><code>f&amp;Y</code></td>
<td><code>Xf&amp;Y</code></td>
</tr>
</tbody>
</table>

<table id="DyadicOperators"><caption style="caption-side:top"><strong>Table 2-2:</strong> Dyadic Primitive Operators</caption>
<thead>
<tr>
<th>Name</th>
<th>Producing Monadic derived function</th>
<th>Producing Dyadic derived function</th>
</tr>
</thead>
<tbody>
<tr>
<td>At</td>
<td><code>f@gY</code></td>
<td><code>Xf@gY</code></td>
</tr>
<tr>
<td>Atop</td>
<td><code>f⍤gY</code></td>
<td><code>Xf⍤gY</code></td>
</tr>
<tr>
<td>Axis</td>
<td><code>f[B]Y</code></td>
<td><code>Xf[B]Y</code></td>
</tr>
<tr>
<td>Beside</td>
<td><code>f∘gY</code></td>
<td><code>Xf∘gY</code></td>
</tr>
<tr>
<td rowspan="2">Bind</td>
<td><code>A∘gY</code></td>
<td> </td>
</tr>
<tr>
<td><code>(f∘B)Y</code></td>
<td> </td>
</tr>
<tr>
<td>Constant</td>
<td><code>(A⍨)Y</code></td>
<td><code>X(A⍨)Y</code></td>
</tr>
<tr>
<td>Inner Product</td>
<td> </td>
<td><code>Xf.gY</code></td>
</tr>
<tr>
<td>Outer Product</td>
<td> </td>
<td><code>X∘.gY</code></td>
</tr>
<tr>
<td>Over</td>
<td><code>f⍥gY</code></td>
<td><code>Xf⍥gY</code></td>
</tr>
<tr>
<td>Power</td>
<td><code>f⍣gY</code></td>
<td><code>Xf⍣gY</code></td>
</tr>
<tr>
<td>Rank</td>
<td><code>f⍤kY</code></td>
<td><code>Xf⍤kY</code></td>
</tr>
<tr>
<td>Stencil</td>
<td><code>f⌺gY</code></td>
<td> </td>
</tr>
<tr>
<td>Variant</td>
<td><code>f⍠gY</code></td>
<td><code>Xf⍠gY</code></td>
</tr>
</tbody>
</table>
</article>
<article id="primitive-operators-operators-a-z">
<h2 id="primitive-operators-operators-a-z-header"> Operators (A-Z)</h2>
<p>Monadic and Dyadic primitive operators are presented in alphabetical order of their descriptive names as shown in <a class="internal-link" href="#MonadicOperators">Table 2-1</a> and <a class="internal-link" href="#DyadicOperators">Table 2-2</a>.</p>
</article>
<section id="primitive-operators-primitive-operators-a-z-">
<h2 id="primitive-operators-primitive-operators-a-z--header">Primitive Operators (A-Z)</h2>
<article id="primitive-operators-assignment-modified">
<div class="heading-container"><h3 class="heading" id="primitive-operators-assignment-modified-header">Assignment (Modified)</h3><div class="command">{R}←Xf←Y</div></div>
<p><code>f</code> may be any dyadic function which returns an explicit result.  <code>Y</code> may be any array  appropriate to function <code>f</code>.  <code>X</code> must be the <em>name</em> of an existing array appropriate to function <code>f</code>.</p>
<p><code>R</code> is the “pass-through” value, that is, the value of <code>Y</code>.  If the result of the derived function is not assigned or used, there is no explicit result.</p>
<p>The effect of the derived function is to reset the value of the array named by <code>X</code> to the result of <code>XfY</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">A</span><span class="o">+</span><span class="kd">←</span><span class="m">10</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">A</span><span class="o">×</span><span class="kd">←</span><span class="m">2</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">22</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">30</span>

<span class="w">      </span><span class="nv">vec</span><span class="kd">←</span><span class="m">¯4</span><span class="o">+</span><span class="m">9</span><span class="o">?</span><span class="m">9</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">vec</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯3</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="nv">vec</span><span class="na">/⍨</span><span class="kd">←</span><span class="nv">vec</span><span class="o">&gt;</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="nv">vec</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
</article>
<article id="primitive-operators-assignment-indexed-modified">
<div class="heading-container"><h3 class="heading" id="primitive-operators-assignment-indexed-modified-header">Assignment (Indexed Modified)</h3><div class="command">{R}←X[I]f←Y</div></div>
<p><code>f</code> may be any dyadic function which returns an explicit result.  <code>Y</code> may be any array whose items are appropriate to function <code>f</code>.  <code>X</code> must be the <em>name</em> of an existing array.  <code>I</code> must be a valid index specification.  The items of the indexed portion of <code>X</code> must be appropriate to function <code>f</code>.</p>
<p><code>Y</code> is either an array of the same shape as the indices specified by <code>I</code> or a scalar that is notionally extended to be the same shape as those indices.</p>
<p>The operator loops through the indices specified by <code>I</code> in ravel order. For each successive index <code>i</code> in the set specified by <code>I</code>,     it calculates the result of <code>X[i]fY[i]</code> and assigns it back to <code>X[i]</code>.</p>
<p><code>R</code> is the "pass-through" value, that is, the value of <code>Y</code>.  If the result of the derived function is not assigned or used, there is no explicit result.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">+</span><span class="nv">A</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="o">+</span><span class="kd">←</span><span class="m">1</span>
<span class="m">1</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="o">÷</span><span class="kd">←</span><span class="m">2</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1.5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<p>As the operator performs a loop, if an index in <code>I</code> is repeated, function <code>f</code> will be applied that number of times and successively to the same item of <code>X</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">B</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="m">0</span>
<span class="w">      </span><span class="nv">B</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">;</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="o">+</span><span class="kd">←</span><span class="m">1</span>
<span class="w">      </span><span class="nv">B</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-operators-assignment-selective-modified">
<div class="heading-container"><h3 class="heading" id="primitive-operators-assignment-selective-modified-header">Assignment (Selective Modified)</h3><div class="command">{R}←(EXP X)f←Y</div></div>
<p><code>f</code> may be any dyadic function which returns an explicit result.  <code>Y</code> may be any array whose items are appropriate to function <code>f</code>.  <code>X</code> must be the <em>name</em> of an existing array.  <code>EXP</code> is an expression that <strong>selects</strong> elements of <code>X</code>. (See <a class="internal-link" href="#primitive-functions-assignment-selective">Section 1.4.7</a> for a list of allowed selection functions.)  The selected elements of <code>X</code> must be appropriate to function <code>f</code>.</p>
<p><code>Y</code> is either an array of the same shape as the selected elements of <code>X</code> or a scalar that is notionally extended to be the same shape as the selection.</p>
<p>The operator loops through the selected elements of <code>X</code> in ravel order. For each selected element <code>X[i]</code>,     it calculates the result of <code>X[i]fY[i]</code> and assigns it back to the same element <code>X[i]</code>.</p>
<p><code>R</code> is the "pass-through" value, that is, the value of <code>Y</code>.  If the result of the derived function is not assigned or used, there is no explicit result.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span>
<span class="m">12</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">30</span>

<span class="w">      </span><span class="p">((</span><span class="nv">A</span><span class="o">&gt;</span><span class="m">30</span><span class="p">)</span><span class="na">/</span><span class="nv">A</span><span class="p">)</span><span class="w"> </span><span class="o">×</span><span class="kd">←</span><span class="w"> </span><span class="m">100</span>
<span class="w">      </span><span class="nv">A</span>
<span class="m">12</span><span class="w"> </span><span class="m">3600</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">7800</span><span class="w"> </span><span class="m">30</span>
</code></pre></div>
<p>As the operator performs a loop, if an element of <code>X</code> is selected more than once,  function <code>f</code> will be applied the corresponding number of times and successively to the same element of <code>X</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="m">3</span><span class="o">⍴</span><span class="m">0</span>
<span class="w">      </span><span class="p">(</span><span class="m">5</span><span class="o">⍴</span><span class="nv">a</span><span class="p">)</span><span class="o">+</span><span class="kd">←</span><span class="m">1</span>
<span class="w">      </span><span class="nv">a</span>
<span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-at">
<div class="heading-container"><h3 class="heading" id="primitive-operators-at-header">At</h3><div class="command">R←{X}(f@g)Y</div></div>
<p>This operator substitutes selected items in <code>Y</code> with new values or applies a function to modify selected items in <code>Y</code>.</p>
<p>The right operand <code>g</code>  identifies which items of array <code>Y</code> are to be substituted or modified. It is either:</p>
<ul>
<li>an array that specifies a set of indices in <code>Y</code>. If <code>g</code> is a simple scalar or vector, it selects major cells in <code>Y</code>. If nested, it specifies indices for Choose or Reach indexing.</li>
<li>or a function that when applied to <code>Y</code> returns a Boolean array of the same shape as <code>Y</code> (a <em>mask</em>) in which a 1 indicates that the corresponding item of <code>Y</code> is to be substituted or modified. Note that the <em>ravel</em> of the mask selects from the <em>ravel</em> of the right argument's index array.</li>
</ul>
<p>The left operand <code>f</code> is either:</p>
<ul>
<li>an array that contains values to replace those items in <code>Y</code> identified by <code>g</code></li>
<li>or a function to be applied to those items, the result of which is used to replace them. If this function is dyadic, its left argument is the array <code>X</code>. Note that the function is applied to the sub-array of <code>Y</code> selected by <code>g</code> <em>as a whole</em> and not to each item separately.</li>
</ul>
<p>The result <code>R</code> is the same as <code>Y</code> but with the items specified by <code>g</code> substituted or modified by <code>f</code>.</p>
<h5>Examples (array @ array)</h5>
<p>Replace the 2nd and 4th items of <code>⍳5</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="o">⍳</span><span class="m">5</span><span class="w">   </span><span class="c1">⍝ [^1]</span>
<span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>Replace the 2nd and 4th items  of nested vector with <code>⍬</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="no">⍬</span><span class="p">)</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span>
<span class="err">┌─┬┬─────┬┬─────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span>
<span class="err">└─┴┴─────┴┴─────────┘</span>
</code></pre></div></p>
<p>Replace the 2nd and 4th rows (major cells) of a matrix:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="p">)(</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">10</span>
<span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span>
<span class="m">20</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></p>
<p>Replace first and last elements with 0 using Choose Indexing:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="na">@</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">9</span>
<span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Replace nested items using Reach Indexing:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">G</span>
<span class="err">┌───────┬───────┬───────┐</span>
<span class="err">│┌───┬─┐│┌───┬─┐│┌───┬─┐│</span>
<span class="err">││</span><span class="nv">ABC</span><span class="err">│</span><span class="m">1</span><span class="err">│││</span><span class="nv">DEF</span><span class="err">│</span><span class="m">2</span><span class="err">│││</span><span class="nv">GHI</span><span class="err">│</span><span class="m">3</span><span class="err">││</span>
<span class="err">│└───┴─┘│└───┴─┘│└───┴─┘│</span>
<span class="err">├───────┼───────┼───────┤</span>
<span class="err">│┌───┬─┐│┌───┬─┐│┌───┬─┐│</span>
<span class="err">││</span><span class="nv">JKL</span><span class="err">│</span><span class="m">4</span><span class="err">│││</span><span class="nv">MNO</span><span class="err">│</span><span class="m">5</span><span class="err">│││</span><span class="nv">PQR</span><span class="err">│</span><span class="m">6</span><span class="err">││</span>
<span class="err">│└───┴─┘│└───┴─┘│└───┴─┘│</span>
<span class="err">└───────┴───────┴───────┘</span>
<span class="w">       </span><span class="nv">G</span><span class="sr">[</span><span class="p">((</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">1</span><span class="p">)((</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">2</span><span class="p">)</span><span class="sr">]</span>
<span class="err">┌───┬─┐</span>
<span class="err">│</span><span class="nv">DEF</span><span class="err">│</span><span class="m">6</span><span class="err">│</span>
<span class="err">└───┴─┘</span>
<span class="w">       </span><span class="p">(</span><span class="s1">''</span><span class="w"> </span><span class="s1">'*'</span><span class="w"> </span><span class="na">@</span><span class="p">((</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">1</span><span class="p">)((</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="m">2</span><span class="p">))</span><span class="w"> </span><span class="nv">G</span>
<span class="err">┌───────┬───────┬───────┐</span>
<span class="err">│┌───┬─┐│┌┬─┐</span><span class="w">   </span><span class="err">│┌───┬─┐│</span>
<span class="err">││</span><span class="nv">ABC</span><span class="err">│</span><span class="m">1</span><span class="err">││││</span><span class="m">2</span><span class="err">│</span><span class="w">   </span><span class="err">││</span><span class="nv">GHI</span><span class="err">│</span><span class="m">3</span><span class="err">││</span>
<span class="err">│└───┴─┘│└┴─┘</span><span class="w">   </span><span class="err">│└───┴─┘│</span>
<span class="err">├───────┼───────┼───────┤</span>
<span class="err">│┌───┬─┐│┌───┬─┐│┌───┬─┐│</span>
<span class="err">││</span><span class="nv">JKL</span><span class="err">│</span><span class="m">4</span><span class="err">│││</span><span class="nv">MNO</span><span class="err">│</span><span class="m">5</span><span class="err">│││</span><span class="nv">PQR</span><span class="err">│</span><span class="o">*</span><span class="err">││</span>
<span class="err">│└───┴─┘│└───┴─┘│└───┴─┘│</span>
<span class="err">└───────┴───────┴───────┘</span>
</code></pre></div></p>
<h5>Examples (function @ array)</h5>
<p>Replace the 2nd and 4th items of <code>⍳5</code> with their reciprocals:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">0.5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0.25</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>Replace the 2nd and 4th items of <code>⍳5</code> with their reversal:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌽</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>Multiply the 2nd and 4th items of <code>⍳5</code> by 10:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="o">×</span><span class="na">@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>Replace the 2nd and 4th items by their totals:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">+</span><span class="na">/¨@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span>
<span class="err">┌─┬─┬─────┬──┬─────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">10</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span>
<span class="err">└─┴─┴─────┴──┴─────────┘</span>
</code></pre></div></p>
<p>Replace the 2nd and 4th rows (major cells) of a matrix with their accumulatives:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">+</span><span class="na">\@</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span>
<span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">15</span>
<span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span>
<span class="m">10</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">33</span>
</code></pre></div></p>
<h5>Examples (array @ function)</h5>
<p>Replace odd elements with 0:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="na">@</span><span class="p">(</span><span class="m">2</span><span class="na">∘</span><span class="o">|</span><span class="p">)</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Replace multiples of 3 (note              that masked items are substituted in ravel order):
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'abcde'</span><span class="na">@</span><span class="kt">{</span><span class="m">0</span><span class="o">=</span><span class="m">3</span><span class="o">|</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">16</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="nv">b</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w">  </span><span class="nv">d</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w">  </span><span class="nv">e</span><span class="w"> </span><span class="m">16</span>

<span class="w">      </span><span class="s1">'abcde'</span><span class="na">@</span><span class="p">(</span><span class="m">0</span><span class="o">=</span><span class="m">3</span><span class="o">|⊢</span><span class="p">)</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">16</span><span class="w"> </span><span class="c1">⍝ or using a train</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="nv">b</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span>
<span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w">  </span><span class="nv">d</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w">  </span><span class="nv">e</span><span class="w"> </span><span class="m">16</span>
</code></pre></div></p>
<h5>Examples (function @ function)</h5>
<p>Replace odd elements with their reciprocals:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="na">@</span><span class="p">(</span><span class="m">2</span><span class="na">∘</span><span class="o">|</span><span class="p">)</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0.3333333333</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0.2</span>
</code></pre></div></p>
<p>Replace odd items of <code>⍳5</code> with themselves reversed:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌽</span><span class="na">@</span><span class="p">(</span><span class="m">2</span><span class="na">∘</span><span class="o">|</span><span class="p">)</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-atop">
<div class="heading-container"><h3 class="heading" id="primitive-operators-atop-header">Atop</h3><div class="command">{R}←{X}f⍤gY</div></div>
<p>Classic Edition:  the symbol <code>⍤</code> is not available in Classic Edition, and the Atop operator is instead represented by <code>⎕U2364</code>.</p>
<p><code>f</code> can be any monadic function.  <code>Y</code> can be any array that is suitable as the right argument to function <code>g</code> with the result of <code>g</code> being appropriate to function <code>f</code>.</p>
<p>If <code>X</code> is omitted, <code>g</code> must be a monadic function. If <code>X</code> is specified, <code>g</code> must be a dyadic function and <code>X</code> can be any array that is suitable as the left argument to function <code>g</code>.</p>
<p>The derived function is equivalent to <code>fgY</code> or <code>fXgY</code> and need not return a result.</p>
<p>The Atop operator allows functions to be <em>glued</em> together to build up more complex functions. For further information, see <a class="internal-link" href="#the-i-beam-operator-syntax-colour-tokens">Section 3.2.7</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">-</span><span class="na">⍤</span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w">      </span><span class="c1">⍝ (  f⍤g y) ≡  f   g y</span>
<span class="m">¯0.25</span>
<span class="w">      </span><span class="m">12</span><span class="w"> </span><span class="o">-</span><span class="na">⍤</span><span class="o">÷</span><span class="w"> </span><span class="m">4</span><span class="w">   </span><span class="c1">⍝ (x f⍤g y) ≡ (f x g y)</span>
<span class="m">¯3</span>
<span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">~</span><span class="na">⍤</span><span class="o">∊</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-operators-axis-with-monadic-operand">
<div class="heading-container"><h3 class="heading" id="primitive-operators-axis-with-monadic-operand-header">Axis (with Monadic Operand)</h3><div class="command">R←f[B]Y</div></div>
<p><code>f</code> must be a monadic primitive mixed function taken from those shown in <a class="internal-link" href="#MonadicMixed">Table 2-3</a> below, or a function derived from the operators Reduction (<code>/</code>) or Scan (<code>\</code>). <code>B</code> must be a numeric scalar or vector. <code>Y</code> may be any array whose items are appropriate to function <code>f</code>. Axis does not follow the normal syntax of an operator.</p>

<table id="MonadicMixed"><caption style="caption-side:top"><strong>Table 2-3:</strong> Primitive monadic mixed functions with optional axis.</caption>
<thead>
<tr>
<th>Function</th>
<th>Name</th>
<th>Range of B</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⌽ or ⊖</code></td>
<td>Reverse</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>↑</code></td>
<td>Mix</td>
<td><code>(0≠1|B)^(B&gt;⎕IO-1)^(B&lt;⎕IO+⍴⍴Y)</code></td>
</tr>
<tr>
<td><code>↓</code></td>
<td>Split</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>,</code></td>
<td>Ravel</td>
<td>fraction, or zero or more axes of <code>Y</code></td>
</tr>
<tr>
<td><code>⊂</code></td>
<td>Enclose</td>
<td><code>(B≡⍳0)∨(^/B∊⍳⍴⍴Y)</code></td>
</tr>
</tbody>
</table>
<p>In most cases, <code>B</code> must be an integer which identifies a specific axis of <code>Y</code>. However, when  <code>f</code> is the Mix function (<code>↑</code>),   <code>B</code> is a fractional value whose lower and upper integer bounds select an adjacent pair of axes of <code>Y</code> or an extreme axis of <code>Y</code>.</p>
<p>For Ravel (<code>,</code>) and Enclose (<code>⊂</code>), <code>B</code> can be a <strong>vector</strong> of two or more axes.</p>
<p><code>⎕IO</code> is an implicit argument of the derived function which determines the meaning of <code>B</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⌽</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">↑</span><span class="sr">[</span><span class="m">.1</span><span class="sr">]</span><span class="s1">'ONE'</span><span class="w"> </span><span class="s1">'TWO'</span>
<span class="nv">OT</span>
<span class="nv">NW</span>
<span class="nv">EO</span>
</code></pre></div>
</article>
<article id="primitive-operators-axis-with-dyadic-operand">
<div class="heading-container"><h3 class="heading" id="primitive-operators-axis-with-dyadic-operand-header">Axis (with Dyadic Operand)</h3><div class="command">R←Xf[B]Y</div></div>
<p><code>f</code> must be a dyadic primitive scalar function, or a dyadic primitive mixed function taken from <a class="internal-link" href="#DyadicMixed">Table 2-4</a> below. <code>B</code> must be a numeric scalar or vector. <code>X</code> and <code>Y</code> may be any arrays whose items are appropriate to function <code>f</code>. Axis does not follow the normal syntax of an operator.</p>

<table id="DyadicMixed"><caption style="caption-side:top"><strong>Table 2-4:</strong> Primitive dyadic mixed functions with optional axis.</caption>
<thead>
<tr>
<th>Function</th>
<th>Name</th>
<th>Range of B</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/ or ⌿</code></td>
<td>Replicate</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>\ or ⍀</code></td>
<td>Expand</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>⊂</code></td>
<td>Partitioned Enclose</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>⌽ or ⊖</code></td>
<td>Rotate</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>, or ⍪</code></td>
<td>Catenate</td>
<td><code>B∊⍳⍴⍴Y</code></td>
</tr>
<tr>
<td><code>, or ⍪</code></td>
<td>Laminate</td>
<td><code>(0≠1|B)^(B&gt;⎕IO-1)^(B&lt;⎕IO+(⍴⍴X)⌈⍴⍴Y)</code></td>
</tr>
<tr>
<td><code>↑</code></td>
<td>Take</td>
<td>one or more axes of <code>Y</code></td>
</tr>
<tr>
<td><code>↓</code></td>
<td>Drop</td>
<td>one or more axes of <code>Y</code></td>
</tr>
<tr>
<td><code>⌷</code></td>
<td>Index</td>
<td>one or more axes of <code>Y</code></td>
</tr>
</tbody>
</table>
<p>In most cases, <code>B</code> must be an integer value identifying the axis of <code>X</code> and <code>Y</code> along which function <code>f</code> is to be applied.</p>
<p>Exceptionally, <code>B</code> must be a fractional value for the Laminate function (<code>,</code>) whose upper and lower integer bounds identify a pair of axes or an extreme axis of <code>X</code> and <code>Y</code>. For Take (<code>↑</code>) and Drop (<code>↓</code>), <code>B</code> can be a <strong>vector</strong> of two or more axes.</p>
<p><code>⎕IO</code> is an implicit argument of the derived function which determines the meaning of <code>B</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">=</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'ABCDEF'</span>
<span class="nv">AA</span><span class="w">  </span><span class="nv">C</span>
<span class="nv">DD</span><span class="w">  </span><span class="nv">F</span>

<span class="w">      </span><span class="s1">'ABC'</span><span class="o">,</span><span class="sr">[</span><span class="m">1.1</span><span class="sr">]</span><span class="s1">'='</span>
<span class="nv">A</span><span class="o">=</span>
<span class="nv">B</span><span class="o">=</span>
<span class="nv">C</span><span class="o">=</span>

<span class="w">      </span><span class="s1">'ABC'</span><span class="o">,</span><span class="sr">[</span><span class="m">0.1</span><span class="sr">]</span><span class="s1">'='</span>
<span class="nv">ABC</span>
<span class="o">===</span>

<span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="nv">O</span>

<span class="w">      </span><span class="s1">'ABC'</span><span class="o">,</span><span class="sr">[</span><span class="m">¯0.5</span><span class="sr">]</span><span class="s1">'='</span>
<span class="nv">ABC</span>
<span class="o">===</span>
</code></pre></div>
<h5>Axis with Scalar Dyadic Functions</h5>
<p>The axis operator <code>[X]</code> can take a scalar dyadic function as operand. This has the effect of "stretching" a lower rank array to fit a higher rank one. The arguments must be conformable along the specified axis (or axes) with elements of the lower rank array being replicated along the other axes.</p>
<p>For example, if <code>H</code> is the higher rank array, <code>L</code> the lower rank one, <code>X</code> is an axis specification, and <code>f</code> a scalar dyadic function, then the expressions <code>Hf[X]L</code> and <code>Lf[X]H</code> are conformable if <code>(⍴L)←→(⍴H)[X]</code>. Each element of L is replicated along the remaining <code>(⍴H)~X</code> axes of <code>H</code>.</p>
<p>In the special case where both arguments have the same rank, the right one will play the role of the higher rank array. If <code>R</code> is the right argument, <code>L</code> the left argument, <code>X</code> is an axis specification and <code>f</code> a scalar dyadic function, then the expression <code>Lf[X]R</code> is conformable if <code>(⍴L)←→(⍴R)[X]</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">mat</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span>
<span class="m">40</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">60</span>

<span class="w">      </span><span class="nv">mat</span><span class="o">+</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">       </span><span class="c1">⍝ add along first axis</span>
<span class="m">11</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">31</span>
<span class="m">42</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">62</span>

<span class="w">      </span><span class="nv">mat</span><span class="o">+</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">     </span><span class="c1">⍝ add along last axis</span>
<span class="m">11</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">33</span>
<span class="m">41</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">63</span>

<span class="w">      </span><span class="nv">cube</span>
<span class="w"> </span><span class="m">100</span><span class="w">  </span><span class="m">200</span><span class="w">  </span><span class="m">300</span>
<span class="w"> </span><span class="m">400</span><span class="w">  </span><span class="m">500</span><span class="w">  </span><span class="m">600</span>

<span class="w"> </span><span class="m">700</span><span class="w">  </span><span class="m">800</span><span class="w">  </span><span class="m">900</span>
<span class="m">1000</span><span class="w"> </span><span class="m">1100</span><span class="w"> </span><span class="m">1200</span>

<span class="w">      </span><span class="nv">cube</span><span class="o">+</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>
<span class="w"> </span><span class="m">101</span><span class="w">  </span><span class="m">201</span><span class="w">  </span><span class="m">301</span>
<span class="w"> </span><span class="m">401</span><span class="w">  </span><span class="m">501</span><span class="w">  </span><span class="m">601</span>

<span class="w"> </span><span class="m">702</span><span class="w">  </span><span class="m">802</span><span class="w">  </span><span class="m">902</span>
<span class="m">1002</span><span class="w"> </span><span class="m">1102</span><span class="w"> </span><span class="m">1202</span>

<span class="w">      </span><span class="nv">cube</span><span class="o">+</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">101</span><span class="w">  </span><span class="m">202</span><span class="w">  </span><span class="m">303</span>
<span class="w"> </span><span class="m">401</span><span class="w">  </span><span class="m">502</span><span class="w">  </span><span class="m">603</span>

<span class="w"> </span><span class="m">701</span><span class="w">  </span><span class="m">802</span><span class="w">  </span><span class="m">903</span>
<span class="m">1001</span><span class="w"> </span><span class="m">1102</span><span class="w"> </span><span class="m">1203</span>

<span class="w">      </span><span class="nv">cube</span><span class="o">+</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">mat</span>
<span class="w"> </span><span class="m">110</span><span class="w">  </span><span class="m">220</span><span class="w">  </span><span class="m">330</span>
<span class="w"> </span><span class="m">440</span><span class="w">  </span><span class="m">550</span><span class="w">  </span><span class="m">660</span>

<span class="w"> </span><span class="m">710</span><span class="w">  </span><span class="m">820</span><span class="w">  </span><span class="m">930</span>
<span class="m">1040</span><span class="w"> </span><span class="m">1150</span><span class="w"> </span><span class="m">1260</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">cube</span><span class="o">+</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="sr">]</span><span class="nv">mat</span>
<span class="w"> </span><span class="m">110</span><span class="w">  </span><span class="m">220</span><span class="w">  </span><span class="m">330</span>
<span class="w"> </span><span class="m">410</span><span class="w">  </span><span class="m">520</span><span class="w">  </span><span class="m">630</span>

<span class="w"> </span><span class="m">740</span><span class="w">  </span><span class="m">850</span><span class="w">  </span><span class="m">960</span>
<span class="m">1040</span><span class="w"> </span><span class="m">1150</span><span class="w"> </span><span class="m">1260</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-beside">
<div class="heading-container"><h3 class="heading" id="primitive-operators-beside-header">Beside</h3><div class="command">{R}←{X}f∘gY</div></div>
<p><code>g</code> can be any monadic function which returns a result.  <code>Y</code> can be any array appropriate to function <code>g</code> with <code>gY</code> being suitable as the right argument to function <code>f</code>.</p>
<p>If <code>X</code> is omitted, <code>f</code> must be a monadic function. If <code>X</code> is specified, <code>f</code> must be a dyadic function and <code>X</code> can be any array that is suitable as the left argument to function <code>f</code>.</p>
<p>The derived function is equivalent to <code>fgY</code> or <code>XfgY</code> and need not return a result.</p>
<p>The Beside operator allows functions to be glued together to build up more complex functions. For further information, see <a class="internal-link" href="#the-i-beam-operator-syntax-colour-tokens">Section 3.2.7</a>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">RANK</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">⍴</span><span class="na">∘</span><span class="o">⍴</span>
<span class="w">      </span><span class="nv">RANK</span><span class="w"> </span><span class="na">¨</span><span class="w"> </span><span class="s1">'JOANNE'</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="na">/∘</span><span class="o">⍳</span><span class="na">¨</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="m">3</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">21</span>
<span class="w"> </span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'SUM'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">SUM</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">SUM</span><span class="na">∘</span><span class="o">⍳</span><span class="na">¨</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="m">3</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">21</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="na">∘</span><span class="o">÷</span><span class="na">/</span><span class="m">40</span><span class="o">⍴</span><span class="m">1</span><span class="w">       </span><span class="c1">⍝ Golden Ratio! (Bob Smith)</span>
<span class="m">1.618033989</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">0</span><span class="o">,</span><span class="na">∘</span><span class="o">⍳</span><span class="na">¨</span><span class="o">⍳</span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-bind">
<div class="heading-container"><h3 class="heading" id="primitive-operators-bind-header">Bind</h3><div class="command">{R}←A∘fY{R}←(f∘B)Y</div></div>
<p>The Bind operator binds an array <code>A</code> or <code>B</code> to a dyadic function <code>f</code> either as its left or its right argument respectively. The former may be described as left argument currying and the latter as right argument currying.</p>
<p><code>A</code>, <code>B</code> and <code>Y</code> may be any arrays whose items are appropriate to function <code>f</code>. In the case where <code>B</code> is bound as the right argument of function <code>f</code>, the parentheses are required in order to distinguish between the operand <code>B</code> and the argument <code>Y</code>.</p>
<p>The derived function is equivalent to <code>AfY</code> or <code>YfB</code> and need not return a result.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="na">∘</span><span class="o">⍴</span><span class="w"> </span><span class="na">¨</span><span class="w"> </span><span class="s1">'AB'</span>
<span class="w"> </span><span class="nv">AA</span><span class="w">  </span><span class="nv">BB</span>
<span class="w"> </span><span class="nv">AA</span><span class="w">  </span><span class="nv">BB</span>

<span class="w">      </span><span class="nv">SINE</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1</span><span class="na">∘</span><span class="o">○</span>

<span class="w">      </span><span class="nv">SINE</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span>
<span class="m">¯0.5440211109</span><span class="w"> </span><span class="m">0.9129452507</span><span class="w"> </span><span class="m">¯0.9880316241</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">*</span><span class="na">∘</span><span class="m">0.5</span><span class="p">)</span><span class="m">4</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">25</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">SQRT</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="o">*</span><span class="na">∘</span><span class="m">.5</span>

<span class="w">      </span><span class="nv">SQRT</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">25</span>
<span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>The following example uses both forms of Bind to list functions in the workspace:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">3</span>
<span class="nv">ADD</span>
<span class="nv">PLUS</span>

<span class="w">      </span><span class="vg">⎕</span><span class="na">∘</span><span class="kd">←</span><span class="na">∘</span><span class="nf">⎕VR</span><span class="na">¨</span><span class="o">↓</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">3</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">ADD</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">LAB</span><span class="o">⍴</span><span class="na">⍨</span><span class="m">0</span><span class="o">≠</span><span class="nf">⎕NC</span><span class="s1">'SUM'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">SUM</span><span class="kd">←</span><span class="m">0</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">LAB</span><span class="bp">:</span><span class="nv">SUM</span><span class="kd">←</span><span class="nv">SUM</span><span class="o">++</span><span class="na">/</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">B</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-commute">
<div class="heading-container"><h3 class="heading" id="primitive-operators-commute-header">Commute</h3><div class="command">{R}←{X}f⍨Y</div></div>
<p><code>f</code> may be any dyadic function.  <code>X</code> and <code>Y</code> may be any arrays whose items are appropriate to function <code>f</code>.</p>
<p>The derived function is equivalent to <code>YfX</code>.  The derived function need not return a result.</p>
<p>If left argument <code>X</code> is omitted, the right argument <code>Y</code> is duplicated in its place, i.e.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f</span><span class="na">⍨</span><span class="nv">Y</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">f</span><span class="na">⍨</span><span class="nv">Y</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">N</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="nv">N</span><span class="na">/⍨</span><span class="m">2</span><span class="o">|</span><span class="nv">N</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="o">⍴</span><span class="na">⍨</span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span>


<span class="w">      </span><span class="nv">mean</span><span class="kd">←</span><span class="o">+</span><span class="na">/∘</span><span class="p">(</span><span class="o">÷</span><span class="na">∘</span><span class="o">⍴</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="c1">⍝ mean of a vector</span>
<span class="w">      </span><span class="nv">mean</span><span class="w"> </span><span class="o">⍳</span><span class="m">10</span>
<span class="m">5.5</span>
</code></pre></div>
<p>The following statements are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="na">/⍨</span><span class="kd">←</span><span class="nv">I</span>
<span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nv">F</span><span class="na">/⍨</span><span class="nv">I</span>
<span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nv">I</span><span class="na">/</span><span class="nv">F</span>
</code></pre></div></p>
<p>Commute often eliminates the need for parentheses</p>
</article>
<article id="primitive-operators-constant">
<div class="heading-container"><h3 class="heading" id="primitive-operators-constant-header">Constant</h3><div class="command">R←{X}(A⍨)Y</div></div>
<p><code>A</code>,  <code>X</code> and <code>Y</code> are arrays. The Constant operator returns array <code>A</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'mu'</span><span class="na">⍨</span><span class="w"> </span><span class="s1">'any'</span><span class="w"> </span><span class="nf">⎕NULL</span><span class="w">   </span><span class="c1">⍝ Always returns its operand</span>
<span class="nv">mu</span>
<span class="w">      </span><span class="m">1E100</span><span class="w"> </span><span class="p">(</span><span class="s1">'mu'</span><span class="na">⍨</span><span class="p">)</span><span class="w"> </span><span class="m">1j1</span>
<span class="nv">mu</span>
<span class="w">      </span><span class="m">¯1</span><span class="na">⍨¨</span><span class="w"> </span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span>
<span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span>
</code></pre></div>
</article>
<article id="primitive-operators-each-with-monadic-operand">
<div class="heading-container"><h3 class="heading" id="primitive-operators-each-with-monadic-operand-header">Each (with Monadic Operand)</h3><div class="command">{R}←f¨Y</div></div>
<p><code>f</code> may be any monadic function.  <code>Y</code> may be any array, each of whose items are separately appropriate to function <code>f</code>.</p>
<p>The derived function applies function <code>f</code> separately to each item of <code>Y</code>.  The derived function need not return a result.  If a result is returned, <code>R</code> has the same shape as <code>Y</code>, and its elements are the items produced by the application of function <code>f</code> to the corresponding items of <code>Y</code>.</p>
<p>If <code>Y</code> is empty, the prototype of <code>R</code> is determined by applying the operand function <em>once</em> to the prototype of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">G</span><span class="kd">←</span><span class="p">(</span><span class="s1">'TOM'</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">))(</span><span class="s1">'DICK'</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">4</span><span class="p">))(</span><span class="s1">'HARRY'</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">5</span><span class="p">))</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">G</span>
<span class="m">3</span>
<span class="w">      </span><span class="o">⍴</span><span class="na">¨</span><span class="nv">G</span>
<span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">2</span>

<span class="w">      </span><span class="o">⍴</span><span class="na">¨¨</span><span class="nv">G</span>
<span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">    </span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">    </span><span class="m">5</span><span class="w">  </span><span class="m">5</span>

<span class="w">      </span><span class="o">+</span><span class="nf">⎕FX</span><span class="na">¨</span><span class="p">(</span><span class="s1">'FOO1'</span><span class="w"> </span><span class="s1">'A←1'</span><span class="p">)(</span><span class="s1">'FOO2'</span><span class="w"> </span><span class="s1">'A←2'</span><span class="p">)</span>
<span class="w"> </span><span class="nv">FOO1</span><span class="w"> </span><span class="nv">FOO2</span>
</code></pre></div>
</article>
<article id="primitive-operators-each-with-dyadic-operand">
<div class="heading-container"><h3 class="heading" id="primitive-operators-each-with-dyadic-operand-header">Each (with Dyadic Operand)</h3><div class="command">{R}←Xf¨Y</div></div>
<p><code>f</code> may be any dyadic function.  <code>X</code> and <code>Y</code> may be any arrays whose corresponding items (after scalar extension) are appropriate to function <code>f</code> when applied separately.</p>
<p>The derived function is applied separately to each pair of corresponding elements of <code>X</code> and <code>Y</code>.  If <code>X</code> or <code>Y</code> is a scalar or single-element array, it will be extended to conform with the other argument.  The derived function need not produce an explicit result.  If a result is returned, <code>R</code> has the same shape as <code>Y</code> (after possible scalar extension) whose elements are the items produced by the application of the derived function to the corresponding items of <code>X</code> and <code>Y</code>.</p>
<p>If <code>X</code> or <code>Y</code> is empty, the operand function is applied <em>once</em> between the prototypes of <code>X</code> and <code>Y</code> to determine the prototype of <code>R</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="nv">G</span><span class="kd">←</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">))(</span><span class="m">4</span><span class="w"> </span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">))(</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="m">10</span>
<span class="w">   </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="m">10</span>
<span class="w">      </span><span class="m">1</span><span class="o">⌽</span><span class="na">¨</span><span class="nv">G</span>
<span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">1</span><span class="w">   </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">8</span><span class="w">  </span><span class="m">10</span>

<span class="w">      </span><span class="m">1</span><span class="o">⌽</span><span class="na">¨¨</span><span class="nv">G</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w">   </span><span class="m">4</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w">   </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="m">10</span>

<span class="w">      </span><span class="m">1</span><span class="o">⌽</span><span class="na">¨¨¨</span><span class="nv">G</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="m">10</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">↑</span><span class="na">¨</span><span class="nv">G</span>
<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w">   </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'ABC'</span><span class="o">,</span><span class="na">¨</span><span class="s1">'XYZ'</span>
<span class="w"> </span><span class="nv">AX</span><span class="w">  </span><span class="nv">BY</span><span class="w">  </span><span class="nv">CZ</span>
</code></pre></div>
</article>
<article id="primitive-operators-i-beam-short">
<div class="heading-container"><h3 class="heading" id="primitive-operators-i-beam-short-header">I-Beam</h3><div class="command">R←{X}(A⌶)Y</div></div>
<p>I-Beam is a monadic operator that provides a range of system related services.</p>
<p><strong>WARNING:</strong> Although documentation is provided for I-Beam functions, any service provided using I-Beam should be considered as "experimental" and subject to change – without notice - from one release to the next. Any use of I-Beams in applications should therefore be carefully isolated in cover-functions that can be adjusted if necessary.</p>
<p><code>A</code> is an integer that specifies the type of operation to be performed. <code>Y</code> is an array that supplies further information about what is to be done.</p>
<p><code>X</code> may or may not be required depending on <code>A</code>.</p>
<p><code>R</code> is the result of the derived function.</p>
<p>For further information, see <a class="internal-link" href="#the-i-beam-operator-case-convert">Section 3.2.12</a>.</p>
</article>
<article id="primitive-operators-inner-product">
<div class="heading-container"><h3 class="heading" id="primitive-operators-inner-product-header">Inner Product</h3><div class="command">R←Xf.gY</div></div>
<p><code>f</code> and <code>g</code> are dyadic functions. The last axis of <code>X</code> must have the same length as the first axis of <code>Y</code>, or one of <code>X</code> and <code>Y</code> is single (<code>^/1=⍴X</code> or <code>^/1=⍴Y</code>).</p>
<p>The result of the derived function has shape <code>(¯1↓⍴X),1↓⍴Y</code>; each item is <code>f/x g¨y</code> where <code>x</code> and <code>y</code> are vectors taken from all the combinations of vectors along the last axis of <code>X</code> and the first axis of <code>Y</code>.</p>
<h5>Notes</h5>
<ul>
<li><code>g</code> must return a result.</li>
<li><code>f</code> must return a result with the possible exception of the case when <code>1=⍴x g¨y</code>.</li>
<li>The expression <code>f/x g¨y</code> applies even when <code>R</code> or <code>x g¨y</code> or <code>X</code> or <code>Y</code> is empty. When <code>X</code> or <code>Y</code> is empty, the vector <code>x</code> is <code>X</code> reshaped to the appropriate length (<code>y</code> is <code>Y</code> reshaped to appropriate length).</li>
<li><code>x</code> is just <code>X</code> itself if <code>X</code> is a scalar. Likewise <code>y</code> and <code>Y</code>.</li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="m">10</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">14</span>
<span class="m">76</span>
<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">×</span><span class="m">10</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">14</span>
<span class="m">76</span>

<span class="w">      </span><span class="nv">NAMES</span>
<span class="nv">HENRY</span>
<span class="nv">WILLIAM</span>
<span class="nv">JAMES</span>
<span class="nv">SEBASTIAN</span>

<span class="w">      </span><span class="nv">NAMES</span><span class="err">^</span><span class="na">.</span><span class="o">=</span><span class="s1">'WILLIAM  '</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="primitive-operators-key">
<div class="heading-container"><h3 class="heading" id="primitive-operators-key-header">Key</h3><div class="command">R←{X}f⌸Y</div></div>
<p><strong>Classic Edition:</strong>
  the symbol <code>⌸</code> is not available in Classic Edition, and the Key operator is instead represented by <code>⎕U2338</code>.</p>
<p><code>f</code> may be any dyadic function that returns a result.</p>
<p>If <code>X</code> is specified, it is an array whose major cells specify keys for corresponding major cells of <code>Y</code>.  The Key operator <code>⌸</code> applies the function <code>f</code> to each unique key in <code>X</code> and the major cells of <code>Y</code> having that key.</p>
<p>If <code>X</code> is omitted, <code>Y</code> is an array whose major cells represent keys. In this case, the Key operator applies the function <code>f</code> to each unique key in  <code>Y</code> and the  elements of <code>⍳≢Y</code> having that key.  <code>f⌸Y</code> is the same as <code>Y f⌸⍳≢Y</code>.</p>
<p>The elements of <code>R</code> appear in the order in which they first appear in <code>Y</code>.</p>
<p>Key is similar to the GROUP BY clause in SQL.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of the Key operator.</p>
<p class="example">Example</p>
<p>In this example, both arrays are vectors so their major cells are their elements. The function <code>{⍺':'⍵}</code> is applied between the unique elements in <code>suits</code> (<code>'Spades' 'Hearts' 'Clubs'</code>) and the elements in <code>cards</code> grouped according to their corresponding elements in <code>suits</code>, i.e. (<code>'2' 'Ace'</code>), (<code>'Queen' 'Jack'</code>) and (<code>,'4'</code>).
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">cards</span><span class="kd">←</span><span class="s1">'2'</span><span class="w"> </span><span class="s1">'Queen'</span><span class="w"> </span><span class="s1">'Ace'</span><span class="w"> </span><span class="s1">'4'</span><span class="w"> </span><span class="s1">'Jack'</span>
<span class="w">      </span><span class="nv">suits</span><span class="kd">←</span><span class="s1">'Spades'</span><span class="w"> </span><span class="s1">'Hearts'</span><span class="w"> </span><span class="s1">'Spades'</span><span class="w"> </span><span class="s1">'Clubs'</span><span class="w"> </span><span class="s1">'Hearts'</span>

<span class="w">      </span><span class="nv">suits</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="nv">cards</span>
<span class="w"> </span><span class="nv">Spades</span><span class="w">  </span><span class="m">2</span><span class="w">     </span>
<span class="w"> </span><span class="nv">Hearts</span><span class="w">  </span><span class="nv">Queen</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Spades</span><span class="w">  </span><span class="nv">Ace</span><span class="w">   </span>
<span class="w"> </span><span class="nv">Clubs</span><span class="w">   </span><span class="m">4</span><span class="w">     </span>
<span class="w"> </span><span class="nv">Hearts</span><span class="w">  </span><span class="nv">Jack</span>

<span class="w">       </span><span class="nv">suits</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍺</span><span class="s1">':'</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="w"> </span><span class="nv">cards</span>
<span class="w">  </span><span class="nv">Spades</span><span class="w">  </span><span class="bp">:</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">Ace</span><span class="w">         </span>
<span class="w">  </span><span class="nv">Hearts</span><span class="w">  </span><span class="bp">:</span><span class="w">  </span><span class="nv">Queen</span><span class="w">  </span><span class="nv">Jack</span><span class="w">  </span>
<span class="w">  </span><span class="nv">Clubs</span><span class="w">   </span><span class="bp">:</span><span class="w"> </span><span class="m">4</span>
</code></pre></div></p>
<h5>Monadic Examples</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="na">⌸</span><span class="w"> </span><span class="nv">suits</span><span class="w"> </span><span class="c1">⍝ indices of unique major cells</span>
<span class="w">  </span><span class="nv">Spades</span><span class="w">   </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>
<span class="w">  </span><span class="nv">Hearts</span><span class="w">   </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>
<span class="w">  </span><span class="nv">Clubs</span><span class="w">    </span><span class="m">4</span>

<span class="w">      </span><span class="kt">{</span><span class="bp">⍺</span><span class="o">,≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="na">⌸</span><span class="w"> </span><span class="nv">suits</span><span class="w"> </span><span class="c1">⍝ count of unique major cells</span>
<span class="w"> </span><span class="nv">Spades</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="nv">Hearts</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="nv">Clubs</span><span class="w">   </span><span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">letters</span><span class="kd">←</span><span class="s1">'zabayza'</span>
<span class="w">       </span><span class="kt">{</span><span class="bp">⍺</span><span class="p">(</span><span class="o">≢</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="na">⌸</span><span class="nv">letters</span>
<span class="nv">z</span><span class="w"> </span><span class="m">2</span>
<span class="nv">a</span><span class="w"> </span><span class="m">3</span>
<span class="nv">b</span><span class="w"> </span><span class="m">1</span>
<span class="nv">y</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<h5>Further Examples</h5>
<p><code>x</code> is a vector of stock codes, <code>y</code> is a corresponding matrix of values.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">x</span>
<span class="m">10</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">y</span>
<span class="m">10</span><span class="w"> </span><span class="m">2</span>
<span class="w">     </span><span class="nv">x</span><span class="o">,</span><span class="nv">y</span>
<span class="w"> </span><span class="nv">IBM</span><span class="w">   </span><span class="m">13</span><span class="w"> </span><span class="m">75</span>
<span class="w"> </span><span class="nv">AAPL</span><span class="w">  </span><span class="m">45</span><span class="w"> </span><span class="m">53</span>
<span class="w"> </span><span class="nv">GOOG</span><span class="w">  </span><span class="m">21</span><span class="w">  </span><span class="m">4</span>
<span class="w"> </span><span class="nv">GOOG</span><span class="w">  </span><span class="m">67</span><span class="w"> </span><span class="m">67</span>
<span class="w"> </span><span class="nv">AAPL</span><span class="w">  </span><span class="m">93</span><span class="w"> </span><span class="m">38</span>
<span class="w"> </span><span class="nv">MSFT</span><span class="w">  </span><span class="m">51</span><span class="w"> </span><span class="m">83</span>
<span class="w"> </span><span class="nv">IBM</span><span class="w">    </span><span class="m">3</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="nv">AAPL</span><span class="w">  </span><span class="m">52</span><span class="w"> </span><span class="m">67</span>
<span class="w"> </span><span class="nv">AAPL</span><span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">38</span>
<span class="w"> </span><span class="nv">IBM</span><span class="w">    </span><span class="m">6</span><span class="w"> </span><span class="m">41</span>
</code></pre></div></p>
<p>If we apply the function <code>{⍺ ⍵}</code> to <code>x</code> and <code>y</code> using the <code>⌸</code> operator, we can see how the rows (its major cells) of <code>y</code> are grouped according to the corresponding elements (its major cells) of <code>x</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="nv">y</span>
<span class="w"> </span><span class="nv">IBM</span><span class="w">   </span><span class="m">13</span><span class="w"> </span><span class="m">75</span><span class="w"> </span>
<span class="w">        </span><span class="m">3</span><span class="w">  </span><span class="m">5</span><span class="w"> </span>
<span class="w">        </span><span class="m">6</span><span class="w"> </span><span class="m">41</span><span class="w"> </span>
<span class="w"> </span><span class="nv">AAPL</span><span class="w">  </span><span class="m">45</span><span class="w"> </span><span class="m">53</span><span class="w"> </span>
<span class="w">       </span><span class="m">93</span><span class="w"> </span><span class="m">38</span><span class="w"> </span>
<span class="w">       </span><span class="m">52</span><span class="w"> </span><span class="m">67</span><span class="w"> </span>
<span class="w">        </span><span class="m">0</span><span class="w"> </span><span class="m">38</span><span class="w"> </span>
<span class="w"> </span><span class="nv">GOOG</span><span class="w">  </span><span class="m">21</span><span class="w">  </span><span class="m">4</span><span class="w"> </span>
<span class="w">       </span><span class="m">67</span><span class="w"> </span><span class="m">67</span><span class="w"> </span>
<span class="w"> </span><span class="nv">MSFT</span><span class="w">  </span><span class="m">51</span><span class="w"> </span><span class="m">83</span><span class="w">       </span>
</code></pre></div></p>
<p>More usefully, we can apply the function <code>{⍺(+⌿⍵)}</code>, which delivers the stock codes and the corresponding totals in <code>y</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="kt">{</span><span class="bp">⍺</span><span class="p">(</span><span class="o">+</span><span class="na">⌿</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="na">⌸</span><span class="nv">y</span>
<span class="w">  </span><span class="nv">IBM</span><span class="w">    </span><span class="m">22</span><span class="w"> </span><span class="m">121</span><span class="w">  </span>
<span class="w">  </span><span class="nv">AAPL</span><span class="w">   </span><span class="m">190</span><span class="w"> </span><span class="m">196</span><span class="w"> </span>
<span class="w">  </span><span class="nv">GOOG</span><span class="w">   </span><span class="m">88</span><span class="w"> </span><span class="m">71</span><span class="w">   </span>
<span class="w">  </span><span class="nv">MSFT</span><span class="w">   </span><span class="m">51</span><span class="w"> </span><span class="m">83</span><span class="w">   </span>
</code></pre></div></p>
<p>There is no need for the function to use its left argument. So to obtain just the totals in <code>y</code> grouped by the stock codes in <code>x</code>:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">x</span><span class="kt">{</span><span class="o">+</span><span class="na">⌿</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="nv">y</span>
<span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">121</span>
<span class="m">190</span><span class="w"> </span><span class="m">196</span>
<span class="w"> </span><span class="m">88</span><span class="w">  </span><span class="m">71</span>
<span class="w"> </span><span class="m">51</span><span class="w">  </span><span class="m">83</span>
</code></pre></div></p>
<h5>Defined Function Example</h5>
<p>This example appends the data for a stock into a component file named by the symbol.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">stock</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="nv">data</span><span class="sr">;</span><span class="nv">fid</span><span class="sr">;</span><span class="nv">file</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">file</span><span class="kd">←</span><span class="o">⊃</span><span class="nv">stock</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Trap</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">        </span><span class="nv">fid</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="nv">fid</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">EndTrap</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="nv">fid</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="nv">data</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="nv">fid</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">fid</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">x</span><span class="w"> </span><span class="nv">foo</span><span class="na">⌸</span><span class="nv">y</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="na">⌸</span><span class="w"> </span><span class="nv">suits</span><span class="w"> </span><span class="c1">⍝ indices of unique major cells</span>
<span class="w">  </span><span class="nv">Spades</span><span class="w">   </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>
<span class="w">  </span><span class="nv">Hearts</span><span class="w">   </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>
<span class="w">  </span><span class="nv">Clubs</span><span class="w">    </span><span class="m">4</span>

<span class="w">      </span><span class="kt">{</span><span class="bp">⍺</span><span class="o">,≢</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="na">⌸</span><span class="w"> </span><span class="nv">suits</span><span class="w"> </span><span class="c1">⍝ count of unique major cells</span>
<span class="w"> </span><span class="nv">Spades</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="nv">Hearts</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="nv">Clubs</span><span class="w">   </span><span class="m">1</span>
</code></pre></div>
<h5>Another Example</h5>
<p>Given a list of names and scores., the problem is to sum the scores for each unique name. A solution is presented first without using the Key operator, and then with the Key operator.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">names</span><span class="w"> </span><span class="c1">⍝ 12, some repeat</span>
<span class="w"> </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Jay</span><span class="w">  </span><span class="nv">Bob</span><span class="w">  </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Jay</span><span class="w">  </span><span class="nv">Jim</span><span class="w">  </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Jim</span>
<span class="w"> </span><span class="nv">Pete</span><span class="w">  </span><span class="nv">Pete</span><span class="w"> </span>

<span class="w">      </span><span class="p">(</span><span class="o">∪</span><span class="nv">names</span><span class="p">)</span><span class="na">∘.</span><span class="o">≡</span><span class="nv">names</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nv">scores</span>
<span class="m">66</span><span class="w"> </span><span class="m">75</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">77</span><span class="w"> </span><span class="m">55</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">78</span>

<span class="w">      </span><span class="nv">b</span><span class="kd">←</span><span class="o">↓</span><span class="p">(</span><span class="o">∪</span><span class="nv">names</span><span class="p">)</span><span class="na">∘.</span><span class="o">≡</span><span class="nv">names</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">disp</span><span class="w"> </span><span class="nv">b</span><span class="na">/¨</span><span class="o">⊂⍳</span><span class="m">12</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────┬───┬─┬────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">─────────────</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">─</span><span class="kd">→</span><span class="err">┴</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">──</span><span class="kd">→</span><span class="err">┘</span>

<span class="w">      </span><span class="o">+</span><span class="na">/¨</span><span class="nv">b</span><span class="na">/¨</span><span class="o">⊂</span><span class="nv">scores</span>
<span class="m">399</span><span class="w"> </span><span class="m">85</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">109</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">disp</span><span class="w"> </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="w"> </span><span class="nv">names</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────┬───┬─┬────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">─────────────</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">─</span><span class="kd">→</span><span class="err">┴</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">──</span><span class="kd">→</span><span class="err">┘</span>

<span class="w">      </span><span class="nv">names</span><span class="w"> </span><span class="kt">{</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌸</span><span class="w"> </span><span class="nv">scores</span>
<span class="m">399</span><span class="w"> </span><span class="m">85</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">109</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-outer-product">
<div class="heading-container"><h3 class="heading" id="primitive-operators-outer-product-header">Outer Product</h3><div class="command">{R}←X∘.gY</div></div>
<p><code>g</code> may be any dyadic function.  The left operand of the operator is the symbol <code>∘</code>.  <code>X</code> and <code>Y</code> may be any arrays whose elements are appropriate to the function <code>g</code>.</p>
<p>Function <code>g</code> is applied to all combinations of the elements of <code>X</code> and <code>Y</code>.  If function <code>g</code> returns a result, the shape of <code>R</code> is <code>(⍴X),⍴Y</code>.  Each element of <code>R</code> is the item returned by function <code>g</code> when applied to the particular combination of elements of <code>X</code> and <code>Y</code>.</p>
<p>If <code>X</code> or <code>Y</code> is empty, the result <code>R</code> is a conformable empty array, and the operand function is applied <em>once</em> between the first items of <code>X</code> and <code>Y</code> to determine the prototype of <code>R</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="na">∘.</span><span class="o">×</span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w">  </span><span class="m">40</span>
<span class="m">20</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">60</span><span class="w">  </span><span class="m">80</span>
<span class="m">30</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">120</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="na">∘.</span><span class="o">⍴</span><span class="s1">'AB'</span>
<span class="w"> </span><span class="nv">A</span><span class="w">    </span><span class="nv">B</span>
<span class="w"> </span><span class="nv">AA</span><span class="w">   </span><span class="nv">BB</span>
<span class="w"> </span><span class="nv">AAA</span><span class="w">  </span><span class="nv">BBB</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="na">∘.</span><span class="o">,</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)</span><span class="na">∘.</span><span class="o">=⍳</span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="primitive-operators-over">
<div class="heading-container"><h3 class="heading" id="primitive-operators-over-header">Over</h3><div class="command">{R}←{X}f⍥gY</div></div>
<p>Classic Edition:  the symbol <code>⍥</code> is not available in Classic Edition, and the Over operator is instead represented by <code>⎕U2365</code>.</p>
<p><code>g</code> can be any monadic function which returns a result.  <code>Y</code> can be any array that is suitable as the argument to function <code>g</code> with <code>gY</code> being suitable as the right argument to function <code>f</code>.</p>
<p>If <code>X</code> is omitted, <code>f</code> must be a monadic function. If <code>X</code> is specified, <code>f</code> must be a dyadic function and <code>X</code> can be any array that is suitable as argument to function <code>g</code> with <code>gX</code> being suitable as the left argument to function <code>f</code>.</p>
<p>The derived function is equivalent to <code>fgY</code> or <code>(gX)f(gY)</code> and need not return a result.</p>
<p>The Over operator allows functions to be <em>glued</em> together to build up more complex functions. For further information, see <a class="internal-link" href="#the-i-beam-operator-syntax-colour-tokens">Section 3.2.7</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">,</span><span class="na">⍥</span><span class="o">⊂</span><span class="w"> </span><span class="s1">'text'</span><span class="w">   </span><span class="c1">⍝ ,⍥⊂  ←→  {⍺⍵}</span>
<span class="err">┌───┬────┐</span>
<span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="nv">text</span><span class="err">│</span>
<span class="err">└───┴────┘</span>

<span class="w">     </span><span class="nv">scores</span><span class="kd">←</span><span class="m">82</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">76</span>
<span class="w">     </span><span class="nv">weights</span><span class="kd">←</span><span class="m">20</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">45</span>
<span class="w">     </span><span class="p">(</span><span class="nv">weights</span><span class="o">×</span><span class="nv">scores</span><span class="p">)</span><span class="o">÷</span><span class="na">⍥</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="p">)</span><span class="nv">weights</span><span class="w"> </span><span class="c1">⍝ Weighted average</span>
<span class="m">82.1</span>
</code></pre></div>
</article>
<article id="primitive-operators-power-operator">
<div class="heading-container"><h3 class="heading" id="primitive-operators-power-operator-header">Power Operator</h3><div class="command">{R}←{X}(f⍣g)Y</div></div>
<p>If right operand <code>g</code> is a numeric integer scalar, power applies its left operand function <code>f</code> cumulatively <code>g</code> times to its argument. In particular, <code>g</code> may be Boolean 0 or 1 for conditional function application.</p>
<p>If right operand <code>g</code> is a scalar-returning dyadic <em>function</em>, then left operand function <code>f</code> is applied repeatedly <strong>until</strong> <code>((f Y) g Y)</code> or until a strong interrupt occurs. Notice that power calls its dyadic right operand <code>g</code> with the next <code>(f Y)</code> and current <code>(Y)</code> values of the iteration as left and right arguments. In particular, if <code>g</code> is <code>=</code> or <code>≡</code>, the result is sometimes termed a <em>fixpoint</em> of <code>f</code>.</p>
<p>If a left argument <code>X</code> is present, it is bound as left argument to left operand function <code>f</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="w"> </span><span class="p">(</span><span class="nv">f</span><span class="w"> </span><span class="na">⍣</span><span class="w"> </span><span class="nv">g</span><span class="p">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">→</span><span class="w"> </span><span class="p">(</span><span class="nv">X</span><span class="na">∘</span><span class="nv">f</span><span class="w"> </span><span class="na">⍣</span><span class="w"> </span><span class="nv">g</span><span class="p">)</span><span class="w"> </span><span class="nv">Y</span>
</code></pre></div></p>
<p>A <em>negative</em> right operand <code>g</code> applies the <em>inverse</em> of the operand function <code>f</code>, <code>(|g)</code>times. In this case, <code>f</code> may be a primitive function or an expression of primitive functions combined with primitive operators:</p>
<table>
<tbody>
<tr>
<td><code>∘</code></td>
<td>compose</td>
</tr>
<tr>
<td><code>¨</code></td>
<td>each</td>
</tr>
<tr>
<td><code>∘.</code></td>
<td>outer product</td>
</tr>
<tr>
<td><code>⍨</code></td>
<td>commute</td>
</tr>
<tr>
<td><code>\</code></td>
<td>scan</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>axis</td>
</tr>
<tr>
<td><code>⍣</code></td>
<td>power</td>
</tr>
</tbody>
</table>
<p>If the function does not have an inverse, a negative argument <code>g</code> generates <code>DOMAIN ERROR</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">(</span><span class="o">,</span><span class="na">∘</span><span class="o">⊂</span><span class="na">∘</span><span class="o">,</span><span class="na">⍣</span><span class="p">(</span><span class="m">1</span><span class="o">=≡,</span><span class="nv">vec</span><span class="p">))</span><span class="nv">vec</span><span class="w">    </span><span class="c1">⍝ ravel-enclose if simple.</span>

<span class="w">    </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">c</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="kt">{</span><span class="p">(</span><span class="o">⊂</span><span class="na">⍣</span><span class="bp">⍺</span><span class="p">)</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="nv">abc</span><span class="w"> </span><span class="c1">⍝ enclose first and last.</span>

<span class="w">    </span><span class="nv">cap</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="bp">⍺⍺</span><span class="na">⍣</span><span class="bp">⍺</span><span class="p">)</span><span class="bp">⍵</span><span class="kt">}</span><span class="w">           </span><span class="c1">⍝ conditional application.</span>

<span class="w">    </span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">c</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="o">⊂</span><span class="nv">cap</span><span class="na">¨</span><span class="nv">abc</span><span class="w">     </span><span class="c1">⍝ enclose first and last.</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nv">succ</span><span class="kd">←</span><span class="m">1</span><span class="na">∘</span><span class="o">+</span><span class="w">                </span><span class="c1">⍝ successor function.</span>

<span class="w">    </span><span class="p">(</span><span class="nv">succ</span><span class="na">⍣</span><span class="m">4</span><span class="p">)</span><span class="m">10</span><span class="w">              </span><span class="c1">⍝ fourth successor of 10. </span>
<span class="m">14</span>
<span class="w">    </span><span class="p">(</span><span class="nv">succ</span><span class="na">⍣</span><span class="m">¯3</span><span class="p">)</span><span class="m">10</span><span class="w">             </span><span class="c1">⍝ third predecessor of 10.</span>
<span class="m">7</span>
<span class="w">    </span><span class="m">1</span><span class="o">+</span><span class="na">∘</span><span class="o">÷</span><span class="na">⍣</span><span class="o">=</span><span class="m">1</span><span class="w">                 </span><span class="c1">⍝ fixpoint: golden mean.</span>
<span class="m">1.618033989</span>

<span class="w">    </span><span class="nv">f</span><span class="kd">←</span><span class="p">(</span><span class="m">32</span><span class="na">∘</span><span class="o">+</span><span class="p">)</span><span class="na">∘</span><span class="p">(</span><span class="o">×</span><span class="na">∘</span><span class="m">1.8</span><span class="p">)</span><span class="w">        </span><span class="c1">⍝ Fahrenheit from Celsius.</span>
<span class="w">    </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>
<span class="m">32</span><span class="w"> </span><span class="m">212</span>

<span class="w">    </span><span class="nv">c</span><span class="kd">←</span><span class="nv">f</span><span class="na">⍣</span><span class="m">¯1</span><span class="w">                  </span><span class="c1">⍝ c is Inverse of f.</span>
<span class="w">    </span><span class="nv">c</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">212</span><span class="w">                </span><span class="c1">⍝ Celsius from Fahrenheit.</span>
<span class="m">0</span><span class="w"> </span><span class="m">100</span>

<span class="w">    </span><span class="nv">invs</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="bp">⍺⍺</span><span class="na">⍣</span><span class="m">¯1</span><span class="p">)</span><span class="bp">⍵</span><span class="kt">}</span><span class="w">         </span><span class="c1">⍝ inverse operator.</span>

<span class="w">    </span><span class="o">+</span><span class="na">\</span><span class="nv">invs</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">10</span><span class="w">         </span><span class="c1">⍝ scan inverse.</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">    </span><span class="m">2</span><span class="na">∘</span><span class="o">⊥</span><span class="nv">invs</span><span class="w"> </span><span class="m">9</span><span class="w">               </span><span class="c1">⍝ decode inverse.</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">    </span><span class="nv">dual</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵⍵</span><span class="na">⍣</span><span class="m">¯1</span><span class="w"> </span><span class="bp">⍺⍺</span><span class="w"> </span><span class="bp">⍵⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w">    </span><span class="c1">⍝ dual operator.</span>

<span class="w">    </span><span class="nv">mean</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷⍴</span><span class="bp">⍵</span><span class="kt">}</span><span class="w">         </span><span class="c1">⍝ mean function.</span>

<span class="w">    </span><span class="nv">mean</span><span class="w"> </span><span class="nv">dual</span><span class="o">⍟</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">    </span><span class="c1">⍝ geometric mean.</span>
<span class="m">2.605171085</span>

<span class="w">    </span><span class="o">+</span><span class="na">/</span><span class="nv">dual</span><span class="o">÷</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">       </span><span class="c1">⍝ parallel resistance.</span>
<span class="m">0.4379562044</span>

<span class="w">    </span><span class="nv">mean</span><span class="w"> </span><span class="nv">dual</span><span class="p">(</span><span class="o">×</span><span class="na">⍨</span><span class="p">)</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="c1">⍝ root-mean-square.</span>
<span class="m">3.31662479</span>

<span class="w">    </span><span class="o">⍉</span><span class="nv">dual</span><span class="o">↑</span><span class="w"> </span><span class="s1">'hello'</span><span class="w"> </span><span class="s1">'world'</span><span class="w">  </span><span class="c1">⍝ vector transpose.</span>
<span class="w"> </span><span class="nv">hw</span><span class="w">  </span><span class="nv">eo</span><span class="w">  </span><span class="nv">lr</span><span class="w">  </span><span class="nv">ll</span><span class="w">  </span><span class="nv">od</span>
</code></pre></div></p>
<h5>Warning</h5>
<p>Some expressions, such as the following, will cause an infinite internal loop and APL will appear to hang. In most cases this can be resolved by issuing a hard INTERRUPT.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">!</span><span class="na">⍣</span><span class="o">-</span><span class="m">1</span>
<span class="w">      </span><span class="o">!</span><span class="na">⍣</span><span class="o">-</span><span class="m">2</span>
</code></pre></div></p>
<p>One can ensure that weak interrupts and <code>⎕TKILL</code> can interrupt by packaging the <code>⍣</code> within the dop      <code>{⍺←⊢ ⋄ ⍺ (⍺⍺{⍺←⊢ ⋄ ⍺ ⍺⍺ ⍵}⍣⍵⍵) ⍵}</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">PowOp</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍺</span><span class="kd">←</span><span class="o">⊢</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍺</span><span class="w"> </span><span class="p">(</span><span class="bp">⍺⍺</span><span class="kt">{</span><span class="bp">⍺</span><span class="kd">←</span><span class="o">⊢</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍺⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⍣</span><span class="bp">⍵⍵</span><span class="p">)</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">tnum</span><span class="kd">←</span><span class="o">!</span><span class="nv">PowOp</span><span class="o">-</span><span class="na">&amp;</span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ using naked ⍣ will freeze APL</span>

<span class="w">      </span><span class="nf">⎕tkill</span><span class="w"> </span><span class="nv">tnum</span>
</code></pre></div>
</article>
<article id="primitive-operators-rank">
<div class="heading-container"><h3 class="heading" id="primitive-operators-rank-header">Rank</h3><div class="command">R←{X}(f⍤B)Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⍤</code> is not available in Classic Edition, and the Rank operator is instead represented by <code>⎕U2364</code>.</p>
<p>The Rank operator <code>⍤</code> applies monadic function <code>f</code> successively to sub-arrays of <code>Y</code>, or dyadic function <code>f</code> between sub-arrays of <code>X</code> and <code>Y</code>. Sub-arrays are selected by right operand <code>B</code>.</p>
<p><code>B</code> is a numeric scalar or vector of up to three items, specifying the ranks of the cells to which <code>f</code> should be applied. The most general form is a three item vector <code>p q r</code>, where:</p>
<ul>
<li><code>p</code> specifies the rank of the argument cells when <code>f</code> is applied monadically</li>
<li><code>q</code> specifies the rank of the left argument cells when <code>f</code> is applied dyadically</li>
<li><code>r</code> specifies the rank of the right argument cells when <code>f</code> is applied dyadically</li>
</ul>
<p>If <code>B</code> is a two item vector <code>q r</code>, it is implicitly extended to <code>r q r</code>. If  <code>B</code> has a single item <code>r</code>, it is implicitly extended to <code>r r r</code>.</p>
<p>If an item <code>k</code> of <code>B</code> is zero or positive it selects k-cells of the corresponding argument. If it is negative, it selects (r+k)-cells where <code>r</code> is the rank of the corresponding argument. A value of <code>¯1</code> selects major cells.  For further information, see <i>Cells and Sub-arrays</i>.</p>
<p>If <code>X</code> is omitted, <code>f</code> may be any monadic function that returns a result. <code>Y</code> may be any array. The Rank operator <code>⍤</code> applies function <code>f</code> successively to the sub-arrays in <code>Y</code> specified by <code>p</code> (i.e. the first item of <code>B</code>, as specified or implicitly extended).</p>
<p>If <code>X</code> is specified, it may be any array and <code>f</code> may be any dyadic function that returns a result. <code>Y</code> may be any array. In this case, the Rank operator applies function <code>f</code> successively between the sub-arrays in <code>X</code> specified by <code>q</code> and the sub-arrays in <code>Y</code> specified by <code>r</code>.</p>
<p>The sub-arrays of <code>R</code> are the results of the individual applications of <code>f</code>. If these results differ in rank or shape, they are extended to a common rank and shape in the manner of Mix. See <a class="internal-link" href="#primitive-functions-mixed-functions">Section 1.2</a>.</p>
<p>Notice that it is necessary to prevent the right operand <code>k</code> binding to the right argument. This can be done using parentheses e.g. <code>(f⍤1)Y</code>. The same can be achieved using  <code>⊢</code> e.g. <code>f⍤1⊢Y</code> because <code>⍤</code> binds tighter to its right operand than <code>⊢</code> does to its left argument, and <code>⊢</code> therefore resolves to Identity.</p>
<h5>Monadic Examples</h5>
<p>Using enclose (<code>⊂</code>) as the left operand elucidates the workings of the rank operator.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span>
<span class="m">36</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="m">5</span>
<span class="m">63</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">10</span>
<span class="m">64</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">98</span>

<span class="m">66</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">74</span>
<span class="m">44</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">62</span>
<span class="m">48</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">22</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">Y</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="na">⍤</span><span class="m">2</span><span class="w"> </span><span class="o">⊢</span><span class="nv">Y</span>
<span class="err">┌───────────┬───────────┐</span>
<span class="err">│</span><span class="m">36</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="m">5</span><span class="err">│</span><span class="m">66</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">74</span><span class="err">│</span>
<span class="err">│</span><span class="m">63</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="m">44</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">62</span><span class="err">│</span>
<span class="err">│</span><span class="m">64</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">98</span><span class="err">│</span><span class="m">48</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">22</span><span class="err">│</span>
<span class="err">└───────────┴───────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="na">⍤</span><span class="m">1</span><span class="w"> </span><span class="o">⊢</span><span class="nv">Y</span>
<span class="err">┌───────────┬───────────┬───────────┐</span>
<span class="err">│</span><span class="m">36</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="err">│</span><span class="m">63</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">10</span><span class="err">│</span><span class="m">64</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">98</span><span class="err">│</span>
<span class="err">├───────────┼───────────┼───────────┤</span>
<span class="err">│</span><span class="m">66</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">74</span><span class="err">│</span><span class="m">44</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">62</span><span class="w"> </span><span class="err">│</span><span class="m">48</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="err">│</span>
<span class="err">└───────────┴───────────┴───────────┘</span>
</code></pre></div></p>
<p>The function <code>{(⊂⍋⍵)⌷⍵}</code> sorts a vector.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="o">⊂⍋</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⌷</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span>
</code></pre></div></p>
<p>The rank operator can be used to apply the function to sub-arrays; in this case to sort the 1-cells (rows) of a 3-dimensional array.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span>
<span class="m">36</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="m">5</span>
<span class="m">63</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">10</span>
<span class="m">64</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">98</span>

<span class="m">66</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">74</span>
<span class="m">44</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">62</span>
<span class="m">48</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">81</span><span class="w"> </span><span class="m">22</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="kt">{</span><span class="p">(</span><span class="o">⊂⍋</span><span class="bp">⍵</span><span class="p">)</span><span class="o">⌷</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⍤</span><span class="m">1</span><span class="p">)</span><span class="nv">Y</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">99</span>
<span class="m">10</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">63</span>
<span class="m">64</span><span class="w"> </span><span class="m">68</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="m">98</span>

<span class="m">27</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">74</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">46</span><span class="w"> </span><span class="m">62</span>
<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">48</span><span class="w"> </span><span class="m">81</span>
</code></pre></div></p>
<h5>Dyadic Examples</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="na">⍤</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span>
<span class="m">24</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">27</span>
<span class="m">38</span><span class="w"> </span><span class="m">39</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">41</span>
</code></pre></div>
<p>Using the function <code>{⍺ ⍵}</code>  as the left operand demonstrates how the dyadic case of the rank operator works.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⍤</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌──┬─────────┐</span>
<span class="err">│</span><span class="m">10</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="err">│</span>
<span class="err">├──┼─────────┤</span>
<span class="err">│</span><span class="m">20</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="err">│</span>
<span class="err">├──┼─────────┤</span>
<span class="err">│</span><span class="m">30</span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="err">│</span>
<span class="err">└──┴─────────┘</span>
</code></pre></div></p>
<p>Note that a right operand of <code>¯1</code> applies the function between the major cells (in this case <em>elements</em>) of the left argument, and the major cells (in this case <em>rows</em>) of the right argument.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⍤</span><span class="m">¯1</span><span class="p">)</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌──┬─────────┐</span>
<span class="err">│</span><span class="m">10</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="err">│</span>
<span class="err">├──┼─────────┤</span>
<span class="err">│</span><span class="m">20</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="err">│</span>
<span class="err">├──┼─────────┤</span>
<span class="err">│</span><span class="m">30</span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="err">│</span>
<span class="err">└──┴─────────┘</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-reduce">
<div class="heading-container"><h3 class="heading" id="primitive-operators-reduce-header">Reduce</h3><div class="command">R←f/[K]Y</div></div>
<p><code>f</code> must be a dyadic function.  <code>Y</code> may be any array whose items in the sub-arrays along the <code>K</code><sup>th</sup> axis are appropriate to function <code>f</code>.</p>
<p>The axis specification is optional.  If present, <code>K</code> must identify an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.  The form <code>R←f⌿Y</code> implies the first axis of <code>Y</code>.</p>
<p><code>R</code> is an array formed by applying function <code>f</code> between items of the vectors along the <code>K</code><sup>th</sup> (or implied) axis of <code>Y</code>. For a typical vector <code>Y</code>, the result <code>R</code> is:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">R</span><span class="w">  </span><span class="kd">←→</span><span class="w"> </span><span class="o">⊂</span><span class="p">(</span><span class="m">1</span><span class="o">⊃</span><span class="nv">Y</span><span class="p">)</span><span class="nv">f</span><span class="p">(</span><span class="m">2</span><span class="o">⊃</span><span class="nv">Y</span><span class="p">)</span><span class="nv">f</span><span class="na">......</span><span class="nv">f</span><span class="p">(</span><span class="nv">n</span><span class="o">⊃</span><span class="nv">Y</span><span class="p">)</span>
</code></pre></div></p>
<p>The shape <code>S</code> of <code>R</code> is the shape of <code>Y</code> excluding the <code>K</code><sup>th</sup> axis, i.e.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">S</span><span class="w">  </span><span class="kd">←→</span><span class="w">  </span><span class="o">⍴</span><span class="nv">R</span><span class="w">  </span><span class="kd">←→</span><span class="w">  </span><span class="p">(</span><span class="nv">K</span><span class="o">≠⍳⍴⍴</span><span class="nv">Y</span><span class="p">)</span><span class="na">/</span><span class="o">⍴</span><span class="nv">Y</span>
</code></pre></div></p>
<p>If <code>Y</code> is a scalar then for any function <code>f</code>, <code>R</code> is <code>Y</code>.</p>
<p>If the length of the <code>K</code><sup>th</sup> axis of <code>Y</code> is 1, or if the length of any other axis of <code>Y</code> is 0, then <code>f</code> is not applied and <code>R</code> is <code>S⍴Y</code>.</p>
<p>Otherwise, if the length of the <code>K</code><sup>th</sup> axis is 0 then the result depends on <code>f</code> and on <code>⊃Y</code> (the prototypical item of <code>Y</code>) as follows:</p>
<p>If <code>f</code> is one of the functions listed in <a class="internal-link" href="#IdentityElements">Table 2-5</a> then <code>R</code> is <code>S⍴⊂I</code>, where <code>I</code> is formed from <code>⊃Y</code> by replacing each depth-zero item of <code>⊃Y</code> with the <em>identity element</em> from the table.</p>
<p>Otherwise, if <code>f</code> is Catenate, <code>R</code> is <code>S⍴⊂0/⊃Y</code>. If <code>f</code> is Catenate First, <code>R</code> is <code>S⍴⊂0⌿⊃Y</code>. If <code>f</code> is Catenate along the J<sup>th</sup> axis, <code>R</code> is <code>S⍴⊂0/[J]⊃Y</code>. See <a class="internal-link" href="#primitive-functions-catenate-laminate">Section 1.4.10</a>.</p>
<p>Otherwise, <code>DOMAIN ERROR</code> is reported.</p>

<table id="IdentityElements"><caption style="caption-side:top"><strong>Table 2-5:</strong> Identity Elements</caption>
<thead>
<tr>
<th>Function</th>
<th> </th>
<th>Identity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Add</td>
<td><code>+</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Subtract</td>
<td><code>-</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Multiply</td>
<td><code>×</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Divide</td>
<td><code>÷</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Residue</td>
<td><code>|</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Minimum</td>
<td><code>⌊</code></td>
<td><code>M</code><span class="footnote">&lt;code&gt;M&lt;/code&gt; represents the largest representable value: typically this is 1.7E308, unless &lt;code&gt;⎕FR&lt;/code&gt; is 1287, when the value is 1E6145.</span></td>
</tr>
<tr>
<td>Maximum</td>
<td><code>⌈</code></td>
<td><code>-M</code></td>
</tr>
<tr>
<td>Power</td>
<td><code>*</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Binomial</td>
<td><code>!</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>And</td>
<td><code>∧</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Or</td>
<td><code>∨</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Less</td>
<td><code>&lt;</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Less or Equal</td>
<td><code>≤</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Equal</td>
<td><code>=</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Greater</td>
<td><code>&gt;</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Greater or Equal</td>
<td><code>≥</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Not Equal</td>
<td><code>≠</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Encode</td>
<td><code>⊤</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td>Union</td>
<td><code>∪</code></td>
<td><code>⍬</code></td>
</tr>
<tr>
<td>Replicate</td>
<td><code>/⌿</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Expand</td>
<td><code>\⍀</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td>Rotate</td>
<td><code>⌽⊖</code></td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">∨</span><span class="na">/</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">MAT</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="nv">MAT</span>
<span class="m">6</span><span class="w"> </span><span class="m">15</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="na">⌿</span><span class="nv">MAT</span>
<span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span>

<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">MAT</span>
<span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span>

<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)(</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="p">)</span>
<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">18</span>

<span class="w">      </span><span class="o">,</span><span class="na">/</span><span class="s1">'ONE'</span><span class="w"> </span><span class="s1">'NESS'</span>
<span class="w"> </span><span class="nv">ONENESS</span>

<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">0</span>
<span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="no">⍬</span><span class="p">)</span><span class="o">≡,</span><span class="na">/</span><span class="no">⍬</span><span class="w"> </span>
<span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="s1">''</span><span class="p">)</span><span class="o">≡,</span><span class="na">/</span><span class="m">0</span><span class="o">⍴</span><span class="s1">'Hello'</span><span class="w"> </span><span class="s1">'World'</span><span class="w"> </span>
<span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">0</span><span class="p">)</span><span class="o">≡⍪</span><span class="na">/</span><span class="m">0</span><span class="o">⍴⊂</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">0</span>
<span class="m">1</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-reduce-first">
<div class="heading-container"><h3 class="heading" id="primitive-operators-reduce-first-header">Reduce First</h3><div class="command">R←f⌿Y</div></div>
<p>The form <code>R←f⌿Y</code> implies reduction along the first axis of <code>Y</code>. See <a class="internal-link" href="#primitive-operators-reduce-first">Section 2.4.22</a> above.</p>
</article>
<article id="primitive-operators-reduce-n-wise">
<div class="heading-container"><h3 class="heading" id="primitive-operators-reduce-n-wise-header">Reduce N-Wise</h3><div class="command">R←Xf/[K]Y</div></div>
<p><code>f</code> must be a dyadic function. <code>X</code> must be a simple scalar or one-item integer array. <code>Y</code> may be any array whose sub-arrays along the <code>K</code>th axis are appropriate to function <code>f</code>.</p>
<p>The axis specification is optional. If present, <code>K</code> must identify an axis of <code>Y</code>. If absent, the last axis of <code>Y</code> is implied. The form <code>R←Xf⌿Y</code> implies the first axis of <code>Y</code>.</p>
<p><code>R</code> is an array formed by applying function <code>f</code> between items of sub-vectors of length <code>X</code> taken from vectors along the <code>K</code>th (or implied) axis of <code>Y</code>.</p>
<p><code>X</code> can be thought of as the width of a "window" which moves along vectors drawn from the <code>K</code>th axis of <code>Y</code>.</p>
<p>If <code>X</code> is zero, the result is a <code>(⍴Y)+(-⍴⍴Y)↑1</code> array of identity elements for the function <code>f</code>. See <a href="#IdentityElements">Identity Elements</a>.</p>
<p>If <code>X</code> is negative, each sub-vector is reversed before being reduced.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍳</span><span class="m">4</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="m">3</span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ (1+2+3) (2+3+4)</span>
<span class="m">6</span><span class="w"> </span><span class="m">9</span>
<span class="w">      </span><span class="m">2</span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ (1+2) (2+3) (3+4)</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span>
<span class="w">      </span><span class="m">1</span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ (1) (2) (3) (4)</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">      </span><span class="m">0</span><span class="o">+</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ Identity element for +</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="m">0</span><span class="o">×</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ Identity element for ×</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="m">2</span><span class="o">,</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">    </span><span class="c1">⍝ (1,2) (2,3) (3,4)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span>
<span class="w">      </span><span class="m">¯2</span><span class="o">,</span><span class="na">/</span><span class="o">⍳</span><span class="m">4</span><span class="w">   </span><span class="c1">⍝ (2,1) (3,2) (4,3)</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>
</code></pre></div>
</article>
<article id="primitive-operators-reduce-first-n-wise">
<div class="heading-container"><h3 class="heading" id="primitive-operators-reduce-first-n-wise-header">Reduce First N-Wise</h3><div class="command">R←Xf⌿[K]Y</div></div>
<p>The form <code>R←Xf⌿Y</code> implies N-Wise reduction along the first axis of <code>Y</code>. See <a class="internal-link" href="#primitive-operators-reduce-n-wise">Section 2.4.23</a>.</p>
</article>
<article id="primitive-operators-scan">
<div class="heading-container"><h3 class="heading" id="primitive-operators-scan-header">Scan</h3><div class="command">R←f\[K]Y</div></div>
<p><code>f</code> may be any dyadic function that returns a result.  <code>Y</code> may be any array whose items in the sub-arrays along the <code>K</code>th axis are appropriate to the function <code>f</code>.</p>
<p>The axis specification is optional.  If present, <code>K</code> must identify an axis of <code>Y</code>.  If absent, the last axis of <code>Y</code> is implied.  The form <code>R←f⍀Y</code> implies the first axis of <code>Y</code>.</p>
<p><code>R</code> is an array formed by successive reductions along the <code>K</code>th axis of <code>Y</code>.  If <code>V</code> is a typical vector taken from the <code>K</code>th axis of <code>Y</code>, then the <code>I</code><sup>th</sup> element of the result is determined as <code>f/I↑V</code>.</p>
<p>The shape of <code>R</code> is the same as the shape of <code>Y</code>.  If <code>Y</code> is an empty array, then <code>R</code> is the same empty array.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">∨</span><span class="na">\</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="err">^</span><span class="na">\</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="o">+</span><span class="na">\</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span>

<span class="w">      </span><span class="o">+</span><span class="na">\</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="p">)(</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="m">12</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">18</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>

<span class="w">      </span><span class="o">+</span><span class="na">\</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">6</span>
<span class="m">4</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">15</span>

<span class="w">      </span><span class="o">+</span><span class="na">⍀</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span>

<span class="w">      </span><span class="o">+</span><span class="na">\</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">M</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">9</span>

<span class="w">      </span><span class="o">,</span><span class="na">\</span><span class="s1">'ABC'</span>
<span class="nv">A</span><span class="w"> </span><span class="nv">AB</span><span class="w">  </span><span class="nv">ABC</span>

<span class="w">      </span><span class="nv">T</span><span class="kd">←</span><span class="s1">'ONE(TWO) BOOK(S)'</span>

<span class="w">      </span><span class="o">≠</span><span class="na">\</span><span class="nv">T</span><span class="o">∊</span><span class="s1">'()'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="p">((</span><span class="nv">T</span><span class="o">∊</span><span class="s1">'()'</span><span class="p">)</span><span class="o">⍱≠</span><span class="na">\</span><span class="nv">T</span><span class="o">∊</span><span class="s1">'()'</span><span class="p">)</span><span class="na">/</span><span class="nv">T</span>
<span class="nv">ONE</span><span class="w"> </span><span class="nv">BOOK</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-scan-first">
<div class="heading-container"><h3 class="heading" id="primitive-operators-scan-first-header">Scan First</h3><div class="command">R←f⍀Y</div></div>
<p>The form <code>R←f⍀Y</code> implies scan along the first axis of <code>Y</code>.  See <a class="internal-link" href="#primitive-operators-scan-first">Section 2.4.26</a>.</p>
</article>
<article id="primitive-operators-spawn">
<div class="heading-container"><h3 class="heading" id="primitive-operators-spawn-header">Spawn</h3><div class="command">{R}←{X}f&amp;Y</div></div>
<p><code>&amp;</code> is a monadic operator with an ambivalent derived function. <code>&amp;</code> spawns a new thread in which <code>f</code> is applied to its argument <code>Y</code> (monadic case) or between its arguments <code>X</code> and <code>Y</code> (dyadic case). The shy result of this application is the number of the newly created thread.</p>
<p>When function f terminates, its result (if any), the <strong>thread result</strong>, is returned. If the thread number is the subject of an active <code>⎕TSYNC</code>, the thread result appears as the result of <code>⎕TSYNC</code>. If no <code>⎕TSYNC</code> is in effect, the thread result is displayed in the session in the normal fashion.</p>
<p>Note that <code>&amp;</code> can be used in conjunction with the <strong>each</strong> operator <code>¨</code> to launch many threads in parallel.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="na">&amp;</span><span class="m">4</span><span class="w">         </span><span class="c1">⍝ Reciprocal in background</span>
<span class="m">0.25</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="o">÷</span><span class="na">&amp;</span><span class="m">4</span><span class="w">       </span><span class="c1">⍝ Show thread number</span>
<span class="m">1</span>
<span class="m">0.25</span>

<span class="w">      </span><span class="nv">FOO</span><span class="na">&amp;</span><span class="m">88</span><span class="w">      </span><span class="c1">⍝ Spawn monadic function.</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="nv">FOO</span><span class="na">&amp;</span><span class="m">3</span><span class="w">     </span><span class="c1">⍝ dyadic</span>

<span class="w">      </span><span class="kt">{</span><span class="nv">NIL</span><span class="kt">}</span><span class="na">&amp;</span><span class="m">0</span><span class="w">     </span><span class="c1">⍝ niladic</span>

<span class="w">      </span><span class="o">⍎</span><span class="na">&amp;</span><span class="s1">'NIL'</span><span class="w">     </span><span class="c1">⍝ ..</span>

<span class="w">      </span><span class="nv">X</span><span class="na">.</span><span class="nv">GOO</span><span class="na">&amp;</span><span class="m">99</span><span class="w">    </span><span class="c1">⍝ thread in remote space.</span>

<span class="w">      </span><span class="o">⍎</span><span class="na">&amp;</span><span class="s1">'⎕dl 2'</span><span class="w">   </span><span class="c1">⍝ Execute async expression.</span>

<span class="w">      </span><span class="s1">'NS'</span><span class="o">⍎</span><span class="na">&amp;</span><span class="s1">'FOO'</span><span class="w"> </span><span class="c1">⍝ .. remote .. .. .. </span>

<span class="w">      </span><span class="nv">PRT</span><span class="na">&amp;¨</span><span class="o">↓</span><span class="nf">⎕nl</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="c1">⍝ PRT spaces in parallel.</span>
</code></pre></div>
</article>
<article id="primitive-operators-stencil">
<div class="heading-container"><h3 class="heading" id="primitive-operators-stencil-header">Stencil</h3><div class="command">R←(f⌺g)Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⌺</code> is not available in Classic Edition, and the Stencil operator is instead represented by <code>⎕U233A</code>.</p>
<p>Stencil is used in image processing, artificial neural networks, computational fluid dynamics, cellular automata, and many other fields of application. The computation is sometimes referred to as tessellation, moving window, or <a href="https://en.wikipedia.org/wiki/Stencil_code">stencil code</a>. This operator applies the left operand function <code>f</code> to a series of (possibly overlapping) rectangles in the array <code>Y</code>.</p>
<p>In general, the right operand <code>g</code> is a 2- row matrix of positive non-zero integers with up to <code>⍴⍴Y</code> columns. The first row contains the rectangle sizes, the second row the <em>movements</em> i.e. how much to move the rectangle in each step. If <code>g</code> is a scalar or vector it specifies the rectangle size and the movement defaults to 1.</p>
<p>The predominant case uses a rectangle size which is odd and a movement of 1.</p>
<p>Rectangles are <em>centred</em> on successive elements of <code>Y</code> and (unless the rectangle size is 1), padded with fill elements.</p>
<p>The first rectangle is centred on the first element of <code>Y</code> preceded by the appropriate number of fill elements. Subsequent rectangles are centred on subsequent elements of <code>Y</code> according to the size of the movement, and padded before or after as appropriate. When the movement is 1, each element of <code>Y</code> in its turn is the middle of a rectangle.</p>
<p><code>f</code> is invoked dyadically with a vector left argument indicating for each axis the number of fill elements and on what side; positive values mean that the padding precedes the array values,
negative values mean that the padding follows the array values.</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⊢</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌────────────┬────────────┬─────────────┐</span>
<span class="err">│┌───┬─────┐</span><span class="w"> </span><span class="err">│┌───┬─────┐</span><span class="w"> </span><span class="err">│┌────┬─────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│└───┴─────┘</span><span class="w"> </span><span class="err">│└───┴─────┘</span><span class="w"> </span><span class="err">│└────┴─────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────────┼────────────┼─────────────┤</span>
<span class="err">│┌───┬─────┐</span><span class="w"> </span><span class="err">│┌───┬─────┐</span><span class="w"> </span><span class="err">│┌────┬─────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│└───┴─────┘</span><span class="w"> </span><span class="err">│└───┴─────┘</span><span class="w"> </span><span class="err">│└────┴─────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────────┼────────────┼─────────────┤</span>
<span class="err">│┌────┬─────┐│┌────┬─────┐│┌─────┬─────┐│</span>
<span class="err">││</span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│││</span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│││</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│││</span><span class="w">    </span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="err">│││</span><span class="w">     </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│││</span><span class="w">    </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│││</span><span class="w">     </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">│└────┴─────┘│└────┴─────┘│└─────┴─────┘│</span>
<span class="err">└────────────┴────────────┴─────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">+</span><span class="na">/</span><span class="o">,</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⊢</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="m">12</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">16</span>
<span class="m">27</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="m">33</span>
<span class="m">24</span><span class="w"> </span><span class="m">39</span><span class="w"> </span><span class="m">28</span>
</code></pre></div></p>
<p>In the first expression above, the left operand function <code>{⊂⍺ ⍵}</code> simply displays its left and right arguments to illustrate the mechanics of the operation. The right operand <code>(3 3)</code> specifies that each rectangle contains 3 rows and 3 columns, and the movement is 1.</p>
<p>In order for the first element of <code>Y</code> (1) to be centred, the first rectangle is padded with a row above and a column to the left, as indicated by the left argument <code>(1 1)</code> to the function.</p>
<p>Another way to think about the way Stencil operates is that it portions the array into sections or neighbourhoods in which elements can be analysed with respect to their immediate neighbours. Stencil  has uses in image processing applications.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">,</span><span class="sr">[</span><span class="m">.5</span><span class="sr">]</span><span class="m">2</span><span class="p">)</span><span class="o">⊢</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌────────────┬─────────────┐</span>
<span class="err">│┌───┬─────┐</span><span class="w"> </span><span class="err">│┌────┬─────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="w"> </span><span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│└───┴─────┘</span><span class="w"> </span><span class="err">│└────┴─────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">├────────────┼─────────────┤</span>
<span class="err">│┌────┬─────┐│┌─────┬─────┐│</span>
<span class="err">││</span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│││</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│││</span><span class="w">     </span><span class="err">│</span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">││</span><span class="w">    </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│││</span><span class="w">     </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">│└────┴─────┘│└─────┴─────┘│</span>
<span class="err">└────────────┴─────────────┘</span>
<span class="w">       </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">,</span><span class="sr">[</span><span class="m">.5</span><span class="sr">]</span><span class="m">3</span><span class="p">)</span><span class="o">⊢</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">12</span>
<span class="err">┌───────────┐</span>
<span class="err">│┌───┬─────┐│</span>
<span class="err">││</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">││</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">││</span>
<span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">││</span>
<span class="err">│└───┴─────┘│</span>
<span class="err">└───────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nv">A</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="o">,</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="o">,</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nv">y</span><span class="kd">←</span><span class="m">1</span><span class="o">=?</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="o">⍴</span><span class="m">4</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">+</span><span class="na">/</span><span class="o">,</span><span class="nv">A</span><span class="o">×</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍴</span><span class="nv">A</span><span class="p">)</span><span class="w"> </span><span class="o">⊢</span><span class="nv">y</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">8</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">2</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>You can see that the result identifies where there are clusters in <code>y</code>.</p>
<h5>Examples (odd rectangle, movement not 1)</h5>
<p>If the movement is greater than one, corresponding portions are skipped as shown below.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="err">┌─────┬─────┬─────┬─────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span>
<span class="err">└─────┴─────┴─────┴─────┘</span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="m">¯2</span><span class="o">↑⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>
<span class="c1">⍝      ↑ middle</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">9</span>
<span class="err">┌─────────┬─────────┬─────────┬─────────┬─────────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└─────────┴─────────┴─────────┴─────────┴─────────┘</span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="m">¯2</span><span class="o">↑⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">9</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span>
<span class="m">¯2</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="c1">⍝        ↑ middle</span>
</code></pre></div></p>
<h5>Even Rectangle Size</h5>
<p>For even rectangle sizes, the "middle" consists of two elements which are moved according to the movement parameter (equal to 1 in these examples).</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">s</span><span class="kd">←</span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="err">┌───┬───┬───┬───┬───┬───┬───┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="err">│</span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span>
<span class="err">└───┴───┴───┴───┴───┴───┴───┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="m">¯2</span><span class="o">↑⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="w"> </span><span class="m">2</span><span class="o">⍳</span><span class="m">8</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>
<span class="c1">⍝    ↑ ↑ middle</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">s</span><span class="kd">←</span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="w"> </span><span class="m">4</span><span class="o">⍳</span><span class="m">8</span>
<span class="err">┌───────┬───────┬───────┬───────┬───────┬───────┬───────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└───────┴───────┴───────┴───────┴───────┴───────┴───────┘</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">s</span>
<span class="m">7</span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="m">¯2</span><span class="o">↑⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="w"> </span><span class="m">4</span><span class="o">⍳</span><span class="m">8</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>
<span class="m">¯1</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span>
<span class="c1">⍝      ↑ ↑ middle</span>
</code></pre></div></p>
<h5>Examples (even rectangle, movement not 1)</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="err">┌───────┬───────┬───────┬───────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="err">│</span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└───────┴───────┴───────┴───────┘</span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="m">¯2</span><span class="o">↑⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">4</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="m">¯1</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span>
<span class="c1">⍝      ↑ ↑ middle</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="o">⊂</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="err">┌───────────┬───────────┬───────────┬───────────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="err">│</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└───────────┴───────────┴───────────┴───────────┘</span>
<span class="w">      </span><span class="kt">{</span><span class="p">(</span><span class="o">⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">' f '</span><span class="o">,⍕</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">⌺</span><span class="p">(</span><span class="o">⍪</span><span class="m">6</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="m">8</span>
<span class="m">2</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span>
<span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span>
<span class="m">0</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span>
<span class="m">¯2</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="c1">⍝        ↑ ↑ middle</span>
</code></pre></div></p>
</article>
<article id="primitive-operators-variant">
<div class="heading-container"><h3 class="heading" id="primitive-operators-variant-header">Variant</h3><div class="command">{R}←{X}(f⍠B)Y</div></div>
<p><strong>Classic Edition:</strong>  the symbol <code>⍠</code> is not available in Classic Edition, and the Variant operator is instead represented by <code>⎕U2360</code>. Note too that <code>⍠</code> and <code>⎕OPT</code> are synonymous though only the latter is available in the Classic Edition.</p>
<p>The Variant operator <code>⍠</code> specifies the value of an <em>option</em> to be used by its left operand function <code>f</code>. An <em>option</em> is a named property of a function whose value in some way affects the operation of that function.</p>
<p>For example, the Search and Replace operators include options named <code>IC</code> and <code>Mode</code> which respectively determine whether or not <em>case</em> is ignored and in what manner the input document is processed.</p>
<p>One of the set of options may be designated as the <em>Principal option</em> whose value may be set using a short-cut form of syntax as described below. For example, the Principal option for the Search and Replace operators is <code>IC</code>.</p>
<p>For the operand function with right argument <code>Y</code> and optional left argument <code>X</code>, the right operand <code>B</code> specifies the values of one or more options that are applicable to that function. If <code>B</code> is empty, function <code>f</code> is called with default options. Otherwise, <code>B</code> may be a scalar, a 2-element vector, or a vector of 2-element vectors which specifies values for one or more options as follows:</p>
<ul>
<li>If <code>B</code> is a 2-element vector and the first element is a character vector, it specifies an option name in the first element and the option value (which may be any suitable array) in the second element.</li>
<li>If <code>B</code> is a vector of 2-element vectors, each item of B is interpreted as above.</li>
<li>If <code>B</code> is a scalar (a rank-0 array of any depth), it specifies the value of the Principal option,</li>
</ul>
<p>Option names and their values must be appropriate for the left operand function, otherwise <code>DOMAIN ERROR</code> (error code 11) will be reported.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">tn</span><span class="kd">←</span><span class="s1">'Dick'</span><span class="p">(</span><span class="nf">⎕FCREATE</span><span class="na">⍠</span><span class="s1">'Z'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="m">0</span>
</code></pre></div>
<p>The following illustrations and examples apply to functions derived from the Search and Replace operators.</p>
<h5>Examples of operand <code>B</code></h5>
<p>The following expression sets the IC option to <code>1</code>, the Mode option to <code>'D'</code> and the EOL option to <code>'LF'</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'EOL'</span><span class="w"> </span><span class="s1">'LF'</span><span class="p">)</span>
</code></pre></div></p>
<p>The following expression sets just the EOL option to 'CR'.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="s1">'EOL'</span><span class="w"> </span><span class="s1">'CR'</span>
</code></pre></div></p>
<p>The following expression sets just the Principal option (which for the Search and Replace operators is IC) to 1.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<p>The order in which options are specified is typically irrelevant but if the same option is specified more than once, the rightmost one dominates. The following expression sets the option IC to 1:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
</code></pre></div></p>
<p>The Variant operator generates a derived function <code>f⍠B</code> and may be assigned to a name. The derived function is effectively function <code>f</code> bound with the option values specified by <code>B</code>.</p>
<p>The derived function may itself be used as a left operand to Variant to produce a second derived function whose options are further modified by the second application of the operator. The following sets the same options as the first example above:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="na">⍠</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="na">⍠</span><span class="s1">'EOL'</span><span class="w"> </span><span class="s1">'LF'</span>
</code></pre></div></p>
<p>When the same option is specified more than once in this way, the outermost (rightmost) one dominates. The following expression also sets the option <code>IC</code> to 1:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="na">⍠</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">0</span><span class="na">⍠</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<h5>Further Examples</h5>
<p>The following derived function returns the location of the word <code>'variant'</code> within its right argument using default values for all the options.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f1</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">'variant'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">f1</span><span class="w"> </span><span class="s1">'The variant Variant operator'</span>
<span class="m">4</span>
</code></pre></div></p>
<p>It may be modified to perform a case-insensitive search:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">f1</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'The variant Variant operator'</span>
<span class="m">4</span><span class="w"> </span><span class="m">12</span>
</code></pre></div></p>
<p>This modified function may be named:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f2</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">f1</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">f2</span><span class="w"> </span><span class="s1">'The variant Variant operator'</span>
<span class="m">4</span><span class="w"> </span><span class="m">12</span>
</code></pre></div></p>
<p>The modified function may itself be modified, in this case to revert to a case sensitive search:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f3</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">f2</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">f3</span><span class="w"> </span><span class="s1">'The variant Variant operator'</span>
<span class="m">4</span>
</code></pre></div></p>
<p>This is equivalent to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">f1</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="s1">'The variant Variant operator'</span>
<span class="m">4</span>
</code></pre></div></p>
<h5>Redundancy</h5>
<p>A function that has been modified by Variant may be used in a context where the option or options that have been modified are not relevant. This is illustarted by the follwoing example.</p>
<p><code>JSON</code> is a character matrix that specifies 2 objects <code>a</code> and <code>b</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">JSON</span>
<span class="kt">{</span><span class="w">                    </span>
<span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"The answer is"</span><span class="o">,</span>
<span class="s2">"b"</span><span class="w"> </span><span class="bp">:</span><span class="w"> </span><span class="m">42</span><span class="w">             </span>
<span class="kt">}</span><span class="w">      </span><span class="o">⍴</span><span class="nv">JSON</span>
<span class="m">4</span><span class="w"> </span><span class="m">21</span>
</code></pre></div></p>
<p>It can be imported to a matrix <code>mat</code> ...
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nv">mat</span><span class="kd">←</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">))</span><span class="nv">JSON</span>
<span class="err">┌─┬─┬─────────────┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">             </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼─┼─────────────┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="nv">The</span><span class="w"> </span><span class="nv">answer</span><span class="w"> </span><span class="nv">is</span><span class="err">│</span><span class="m">4</span><span class="err">│</span>
<span class="err">├─┼─┼─────────────┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="m">42</span><span class="w">           </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">└─┴─┴─────────────┴─┘</span>
</code></pre></div></p>
<p>This result may be exported
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">))</span><span class="w"> </span><span class="nv">mat</span>
<span class="kt">{</span><span class="s2">"a"</span><span class="bp">:</span><span class="s2">"The answer is"</span><span class="o">,</span><span class="s2">"b"</span><span class="bp">:</span><span class="m">42</span><span class="kt">}</span>
</code></pre></div></p>
<p>The ('Compact' 0) variant option delivers a more readable result:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)(</span><span class="s1">'Compact'</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="nv">mat</span>
<span class="kt">{</span><span class="w">                      </span>
<span class="w">  </span><span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"The answer is"</span><span class="o">,</span>
<span class="w">  </span><span class="s2">"b"</span><span class="bp">:</span><span class="w"> </span><span class="m">42</span><span class="w">              </span>
<span class="kt">}</span>
</code></pre></div></p>
<p>A modified version of <code>⎕JSON</code> ...
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">myJSON</span><span class="kd">←</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)(</span><span class="s1">'Compact'</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="w">      </span><span class="nv">myJSON</span>
<span class="err">┌─────┬─┬────────────────────────┐</span>
<span class="err">│</span><span class="nf">⎕JSON</span><span class="err">│</span><span class="na">⍠</span><span class="err">│┌──────────┬───────────┐│</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">││┌──────┬─┐│┌───────┬─┐││</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│││</span><span class="nv">Format</span><span class="err">│</span><span class="nv">M</span><span class="err">│││</span><span class="nv">Compact</span><span class="err">│</span><span class="m">0</span><span class="err">│││</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">││└──────┴─┘│└───────┴─┘││</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│└──────────┴───────────┘│</span>
<span class="err">└─────┴─┴────────────────────────┘</span>
</code></pre></div></p>
<p>... may be used both to import and export, despite the fact that the Compact option applies only to JSON export. In the context of JSON import it is redundant and ignored.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊢</span><span class="nv">mat</span><span class="kd">←</span><span class="w"> </span><span class="nv">myJSON</span><span class="w"> </span><span class="nv">JSON</span>
<span class="err">┌─┬─┬─────────────┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">             </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼─┼─────────────┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="nv">The</span><span class="w"> </span><span class="nv">answer</span><span class="w"> </span><span class="nv">is</span><span class="err">│</span><span class="m">4</span><span class="err">│</span>
<span class="err">├─┼─┼─────────────┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="m">42</span><span class="w">           </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">└─┴─┴─────────────┴─┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nv">myJSON</span><span class="w"> </span><span class="nv">mat</span>
<span class="kt">{</span><span class="w">                      </span>
<span class="w">  </span><span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"The answer is"</span><span class="o">,</span>
<span class="w">  </span><span class="s2">"b"</span><span class="bp">:</span><span class="w"> </span><span class="m">42</span><span class="w">              </span>
<span class="kt">}</span><span class="w">                      </span>
</code></pre></div></p>
<h5>Variant and .NET</h5>
<p>The Variant operator may also be used in conjunction with .NET classes; it can used to cast an array into a specific .NET data type, and to specify which constructor should be used when creating a new instance of a .NET class which has overloaded constructors. For further information, see <i>Advanced Techniques</i>.</p>
</article>
</section>
</section>
<section data-chapter-seq="3" id="i-beam-operator">
<h1 class="chapter" id="i-beam-operator-header">I-Beam Operator</h1>
<article id="primitive-operators-i-beam">
<div class="heading-container"><h2 class="heading" id="primitive-operators-i-beam-header">I-Beam</h2><div class="command">R←{X}(A⌶)Y</div></div>
<p>I-Beam is a monadic operator that provides a range of system related services.</p>
<p><strong>WARNING:</strong> Although documentation is provided for I-Beam functions, any service provided using I-Beam should be considered as "experimental" and subject to change – without notice - from one release to the next. Any use of I-Beams in applications should therefore be carefully isolated in cover-functions that can be adjusted if necessary. See also: <a class="internal-link" href="#the-i-beam-operator-supplementary-i-beam-functions">Section 3.2.68</a>.</p>
<p><code>A</code> is an integer that specifies the type of operation to be performed  as shown in the table below. <code>Y</code> is an array that supplies further information about what is to be done.</p>
<p><code>X</code> may or may not be required depending on <code>A</code>.</p>
<p><code>R</code> is the result of the derived function.</p>
<p>When attempting to use  I-Beam with an unsupported operation value, <code>A</code>, one of three different error messages will be reported:</p>
<ul>
<li>Invalid I-Beam function selection</li>
<li>I-Beam function xxx has been withdrawn</li>
<li>I-Beam function xxx is not supported by this interpreter</li>
</ul>
<p>This allows the user to distinguish between operation values that have never been used, those that have been used in earlier versions but are no longer included in the current version, and those
that are valid in other editions or on other platforms other than the current interpreter.</p>
<p>The column labelled <em>O/S</em> indicates if a function applies only on Windows (W), only on Windows .NET Framework, (WF), only under IBM AIX (AIX), or only on non-Windows (X) platforms.</p>
<table>
<thead>
<tr>
<th>A</th>
<th>Derived Function</th>
<th>O/S</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>8</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-inverted-table-index-of">Inverted Table Index-of</a></td>
<td> </td>
</tr>
<tr>
<td><code>85</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-execute-expression">Execute Expression</a></td>
<td> </td>
</tr>
<tr>
<td><code>127</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-overwrite-free-pockets">Overwrite Free Pockets</a></td>
<td> </td>
</tr>
<tr>
<td><code>180</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-canonical-representation">Canonical Representation</a></td>
<td> </td>
</tr>
<tr>
<td><code>181</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-unsqueezed-type">Unsqueezed Type</a></td>
<td> </td>
</tr>
<tr>
<td><code>200</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-syntax-colouring">Syntax Colouring</a></td>
<td> </td>
</tr>
<tr>
<td><code>201</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-syntax-colour-tokens">Syntax Colour Tokens</a></td>
<td> </td>
</tr>
<tr>
<td><code>219</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-compress-vector-of-short-integers">Compress/Decompress Vector of Short Integers</a></td>
<td> </td>
</tr>
<tr>
<td><code>220</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-serialise-array">Serialise/Deserialise Array</a></td>
<td> </td>
</tr>
<tr>
<td><code>400</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-compiler-control">Compiler Control</a></td>
<td> </td>
</tr>
<tr>
<td><code>600</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-trap-control">Trap Control</a></td>
<td> </td>
</tr>
<tr>
<td><code>739</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-temporary-directory">Temporary Directory</a></td>
<td> </td>
</tr>
<tr>
<td><code>819</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-case-convert">Case Convert</a></td>
<td> </td>
</tr>
<tr>
<td><code>900</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-called-monadically">Called Monadically</a></td>
<td> </td>
</tr>
<tr>
<td><code>950</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-loaded-libraries">Loaded Libraries</a></td>
<td> </td>
</tr>
<tr>
<td><code>1010</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-set-shell-script-debug-options">Set Shell Script Debug Options</a></td>
<td> </td>
</tr>
<tr>
<td><code>1111</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-number-of-threads">Number of Threads</a></td>
<td> </td>
</tr>
<tr>
<td><code>1112</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-parallel-execution-threshold">Parallel Execution Threshold</a></td>
<td> </td>
</tr>
<tr>
<td><code>1159</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-update-function-timestamp">Update Function Time and User Stamp</a></td>
<td> </td>
</tr>
<tr>
<td><code>1200</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-format-datetime">Format Date-time</a></td>
<td> </td>
</tr>
<tr>
<td><code>1302</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-set-aplcore-parameters">Set aplcore Parameters</a></td>
<td> </td>
</tr>
<tr>
<td><code>1500</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-hash-array">Hash Array</a></td>
<td> </td>
</tr>
<tr>
<td><code>2000</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-memory-manager-statistics">Memory Manager Statistics</a></td>
<td> </td>
</tr>
<tr>
<td><code>2002</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-specify-workspace-available">Specify Workspace Available</a></td>
<td> </td>
</tr>
<tr>
<td><code>2007</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-disable-global-triggers">Disable Global Triggers</a></td>
<td> </td>
</tr>
<tr>
<td><code>2010</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-update-datatable">Update DataTable</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2011</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-read-datatable">Read DataTable</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2014</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-remove-data-binding">Remove Data Binding</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2015</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-create-data-binding-source">Create Data Binding Source</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2016</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-create-net-delegate">Create .NET Delegate</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2017</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-identify-net-type">Identify .NET Type</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2022</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-flush-session-caption">Flush Session Caption</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2023</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-close-all-windows">Close all Windows</a></td>
<td> </td>
</tr>
<tr>
<td><code>2035</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-set-dyalog-pixel-type">Set Dyalog Pixel Type</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2041</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-override-com-default-value">Override COM Default Value</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2100</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-export-to-memory">Export to Memory</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2101</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-close-net-appdomain">Close .NET AppDomain</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2250</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-verify-net-interface">Verify .NET Interface</a></td>
<td> </td>
</tr>
<tr>
<td><code>2400</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-set-workspace-save-options">Set Workspace Save Options</a></td>
<td> </td>
</tr>
<tr>
<td><code>2401</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-expose-root-properties">Expose Root Properties</a></td>
<td> </td>
</tr>
<tr>
<td><code>2501</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-discard-thread-on-exit">Discard thread on exit</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2502</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-discard-parked-threads">Discard parked threads</a></td>
<td>W</td>
</tr>
<tr>
<td><code>2503</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-mark-thread-as-uninterruptible">Mark Thread as Uninterruptible</a></td>
<td> </td>
</tr>
<tr>
<td><code>2520</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-use-separate-thread-for-net">Use Separate Thread For .NET</a></td>
<td>WF</td>
</tr>
<tr>
<td><code>2704</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-continue-autosave">Continue Autosave</a></td>
<td> </td>
</tr>
<tr>
<td><code>3002</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-disable-component-checksum-validation">Disable Component Checksum Validation</a></td>
<td> </td>
</tr>
<tr>
<td><code>3012</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-enable-compression-of-large-components">Enable Compression of Large Components</a></td>
<td> </td>
</tr>
<tr>
<td><code>3500</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-send-text-to-ride-embedded-browser">Send Text to RIDE-embedded Browser</a></td>
<td> </td>
</tr>
<tr>
<td><code>3501</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-connected-to-the-ride">Connected to the RIDE</a></td>
<td> </td>
</tr>
<tr>
<td><code>3502</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-manage-ride-connections">Manage RIDE Connections</a></td>
<td> </td>
</tr>
<tr>
<td><code>4000</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-fork-new-task">Fork New Task</a></td>
<td>AIX</td>
</tr>
<tr>
<td><code>4001</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-change-user">Change User</a></td>
<td>X</td>
</tr>
<tr>
<td><code>4002</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-reap-forked-tasks">Reap Forked Tasks</a></td>
<td>AIX</td>
</tr>
<tr>
<td><code>4007</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-signal-counts">Signal Counts</a></td>
<td>X</td>
</tr>
<tr>
<td><code>5171</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-discard-source-information">Discard Source Information</a></td>
<td> </td>
</tr>
<tr>
<td><code>5172</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-discard-source-code">Discard Source Code</a></td>
<td> </td>
</tr>
<tr>
<td><code>5176</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-list-loaded-files">List Loaded Files</a></td>
<td> </td>
</tr>
<tr>
<td><code>5177</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-list-loaded-file-objects">List Loaded File Objects</a></td>
<td> </td>
</tr>
<tr>
<td><code>5178</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-remove-loaded-file-object-info">Remove Loaded File Object Info</a></td>
<td> </td>
</tr>
<tr>
<td><code>5179</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-remove-loaded-file-object-info">Loaded File Object Info</a></td>
<td> </td>
</tr>
<tr>
<td><code>7162</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-json-translate-name">JSON Translate Name</a></td>
<td> </td>
</tr>
<tr>
<td><code>8415</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-singular-value-decomposition">Singular Value Decomposition</a></td>
<td> </td>
</tr>
<tr>
<td><code>8674</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-externalise-array">Externalise Array</a></td>
<td> </td>
</tr>
<tr>
<td><code>9468</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-hash-table-size">Hash Table Size</a></td>
<td> </td>
</tr>
<tr>
<td><code>9469</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-lookup-table-size">Lookup Table Size</a></td>
<td> </td>
</tr>
<tr>
<td><code>16808</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-sample-probability-distribution">Sample Probability Distribution</a></td>
<td> </td>
</tr>
<tr>
<td><code>50100</code></td>
<td><a class="internal-link" href="#the-i-beam-operator-line-count">Line Count</a></td>
<td> </td>
</tr>
</tbody>
</table>
</article>
<section id="i-beam-operator-the-i-beam-operator">
<h2 id="i-beam-operator-the-i-beam-operator-header">The I-Beam Operator</h2>
<article id="the-i-beam-operator-inverted-table-index-of">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-inverted-table-index-of-header">Inverted Table Index Of</h3><div class="command">R←X(8⌶)Y</div></div>
<p>This function computes <code>X</code> index-of <code>Y</code> (viz. <code>X⍳Y</code>) where <code>X</code> and <code>Y</code> are compatible inverted tables. <code>R</code> is the indices of <code>Y</code> in <code>X</code>.</p>
<p>An inverted table is a (nested) vector all of whose items have the same number of major cells. That is, <code>1=⍴⍴⍵</code> and <code>(≢⊃⍵)=≢¨⍵</code>. An inverted table representation of relational data is more efficient in time and space than other representations.</p>
<p>The following is an example of an inverted table:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="nf">⎕a</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="s1">'metalepsis'</span>
<span class="w">      </span><span class="nv">X</span>
<span class="err">┌───┬───────────────────┬──────────┐</span>
<span class="err">│</span><span class="nv">ABC</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span><span class="err">│</span><span class="nv">metalepsis</span><span class="err">│</span>
<span class="err">│</span><span class="nv">DEF</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">GHI</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">JKL</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">MNO</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">PQR</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">STU</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">VWX</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">YZA</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="nv">BCD</span><span class="err">│</span><span class="w">                   </span><span class="err">│</span><span class="w">          </span><span class="err">│</span>
<span class="err">└───┴───────────────────┴──────────┘</span>
</code></pre></div></p>
<p>Using inverted tables, it is often necessary to perform a table look-up to find the "row" indices of one in another. Suppose there is a second table <code>Y</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="p">(</span><span class="o">⊂⊂</span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="o">⌷</span><span class="na">¨</span><span class="nv">X</span>
<span class="w">      </span><span class="nv">Y</span>
<span class="w"> </span><span class="nv">GHI</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="nv">tmamli</span><span class="w"> </span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">                      </span>
<span class="w"> </span><span class="nv">JKL</span><span class="w">                      </span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">                      </span>
<span class="w"> </span><span class="nv">MNO</span><span class="w">                      </span>
<span class="w"> </span><span class="nv">YZA</span><span class="w">  </span>
</code></pre></div></p>
<p>To compute the indices of   <code>Y</code> in <code>X</code>  using dyadic <code>⍳</code>, it is necessary to first un-invert each of the tables in order to create nested matrices that <code>⍳</code> can handle.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">unvert</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="o">⍉↑⊂</span><span class="na">⍤</span><span class="m">¯1</span><span class="na">¨</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">unvert</span><span class="w"> </span><span class="nv">X</span>
<span class="err">┌───┬─┬─┐</span>
<span class="err">│</span><span class="nv">ABC</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="nv">m</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">DEF</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">e</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">GHI</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="nv">t</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">JKL</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="nv">a</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">MNO</span><span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="nv">l</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">PQR</span><span class="err">│</span><span class="m">5</span><span class="err">│</span><span class="nv">e</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">STU</span><span class="err">│</span><span class="m">6</span><span class="err">│</span><span class="nv">p</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">VWX</span><span class="err">│</span><span class="m">7</span><span class="err">│</span><span class="nv">s</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">YZA</span><span class="err">│</span><span class="m">8</span><span class="err">│</span><span class="nv">i</span><span class="err">│</span>
<span class="err">├───┼─┼─┤</span>
<span class="err">│</span><span class="nv">BCD</span><span class="err">│</span><span class="m">9</span><span class="err">│</span><span class="nv">s</span><span class="err">│</span>
<span class="err">└───┴─┴─┘</span>

<span class="w">      </span><span class="p">(</span><span class="nv">unvert</span><span class="w"> </span><span class="nv">X</span><span class="p">)</span><span class="w"> </span><span class="o">⍳</span><span class="w"> </span><span class="p">(</span><span class="nv">unvert</span><span class="w"> </span><span class="nv">Y</span><span class="p">)</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span>
</code></pre></div></p>
<p>Each un-inverted table requires considerably more workspace than its inverted form, so if the inverted tables are large, this operation is potentially expensive in terms of both time and workspace.</p>
<p><code>8⌶</code> is an optimised version of the above expression.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="w"> </span><span class="p">(</span><span class="m">8</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">Y</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">9</span>
</code></pre></div></p>
</article>
<article id="the-i-beam-operator-execute-expression">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-execute-expression-header">Execute Expression</h3><div class="command">R←X(85⌶)Y</div></div>
<p>Executes an expression.</p>
<p><code>Y</code> is a character vector containing an APL expression.</p>
<p>The function executes the expression in <code>Y</code> exactly as it would be executed by the monadic Execute primitive function <code>⍎</code>, but handles shy results  of the execution rather differently.</p>
<p>The left argument <code>X</code> determines how a shy result from the execution of <code>Y</code> is treated and is either 0 or 1.</p>
<p>If <code>X</code> is 1, and the expression in <code>Y</code> returns an explicit result, <code>R</code> is that result. If the expression in <code>Y</code> returns no result or returns a shy result, the function signals <code>ERROR 85</code>. Effectively, a shy result is discarded.</p>
<p>If <code>X</code> is 0, and the expression in <code>Y</code> returns an explicit result or a shy result, <code>R</code> is that result (but is no longer shy). If the expression in <code>Y</code> returns no result, the function signals <code>ERROR 85</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍎</span><span class="s1">'a←42'</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="w"> </span><span class="o">⍎</span><span class="s1">'a←42'</span><span class="w">     </span><span class="c1">⍝ shy result</span>
<span class="m">42</span>
<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="m">85</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'a←42'</span><span class="w"> </span><span class="c1">⍝ not shy</span>
<span class="m">42</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">85</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'a←42'</span>
<span class="nv">ERROR</span><span class="w"> </span><span class="m">85</span>
<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="m">85</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'a←42'</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-overwrite-free-pockets">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-overwrite-free-pockets-header">Overwrite Free Pockets</h3><div class="command">R←127⌶Y</div></div>
<p>Overwrites all free pockets in the workspace.</p>
<p>Some applications (cryptography for example) make use of secure data during execution. The nature of the APL workspace is such that remnants of this secure data may persist in the workspace (and thus the process memory) even after the relevant APL variables have been expunged. This function overwrites all unused data pockets in the workspace so that any potentially secure data is removed.</p>
<p><code>Y</code> is any empty array, preferably <code>⍬</code>(zilde). <code>R</code> is always 1.</p>
<p>It is the responsibility of the programmer to ensure that there are no USED pockets in the workspace that reference the data.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="sr">;</span><span class="nv">a</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">a</span><span class="kd">←</span><span class="s1">'my secure data'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕EX</span><span class="s1">'a'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="c1">⍝ 'my secure data' is now in an</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="c1">⍝ UNUSED pocket in the workspace</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="nv">a</span><span class="kd">←</span><span class="m">127</span><span class="na">⌶</span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ all unused pockets are overwritten,</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">            </span><span class="c1">⍝ 'my secure data' is no longer present</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<h5>Whereas</h5>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="sr">;</span><span class="nv">a</span><span class="sr">;</span><span class="nv">b</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">a</span><span class="kd">←</span><span class="s1">'my secure data'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">b</span><span class="kd">←</span><span class="nv">a</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕EX</span><span class="s1">'a'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="c1">⍝ 'my secure data' is now in an</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="c1">⍝ UNUSED pocket in the workspace</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="nv">a</span><span class="kd">←</span><span class="m">127</span><span class="na">⌶</span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ all unused pockets are overwritten,</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">            </span><span class="c1">⍝ but 'my secure data' is still present</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">            </span><span class="c1">⍝ because it is referenced by b</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-canonical-representation">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-canonical-representation-header">Canonical Representation</h3><div class="command">R←180⌶Y</div></div>
<p>This function is the same as the system function <code>⎕CR</code> except that it can be used to obtain the canonical representation of methods in classes. <code>180⌶</code> is used by <code>]PROFILE</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="nv">ComponentFile</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Program</span><span class="w"> </span><span class="nv">Files</span><span class="na">\</span><span class="nv">Dyalog</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">15.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="na">\...</span>

<span class="w">      </span><span class="m">180</span><span class="na">⌶</span><span class="s1">'ComponentFile.Close'</span>
<span class="w"> </span><span class="nv">Close</span><span class="w">                          </span>
<span class="w"> </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Destructor</span><span class="w">         </span>
<span class="w"> </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">tie</span><span class="o">∊</span><span class="nf">⎕FNUMS</span><span class="w">                 </span>
<span class="w">     </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">temp</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">Name</span><span class="w"> </span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="nv">tie</span>
<span class="w">     </span><span class="bp">:</span><span class="nv">Else</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">tie</span><span class="w">        </span>
<span class="w">     </span><span class="bp">:</span><span class="nv">EndIf</span><span class="w">                     </span>
<span class="w"> </span><span class="bp">:</span><span class="nv">EndIf</span><span class="w">                         </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-unsqueezed-type">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-unsqueezed-type-header">Unsqueezed Type</h3><div class="command">R←181⌶Y</div></div>
<p><code>Y</code> is any array.</p>
<p>The result <code>R</code> is an integer scalar containing an integer value which indicates the type of the array.
 For further information see <a class="internal-link" href="#system-functions-data-representation-monadic">Section 4.6.32</a>.</p>
<p><code>181⌶</code> is functionally identical to monadic <code>⎕DR</code>, except that no attempt is made to squeeze the data into smaller data types. <code>⎕DR</code> always attempts to squeeze the data; <code>181⌶</code> does not, but if a workspace compaction occurs during execution of <code>181⌶</code>, the data may still be squeezed before the type is identified.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕dr</span><span class="w"> </span><span class="m">1</span><span class="o">↑</span><span class="m">1</span><span class="w"> </span><span class="m">1000</span>
<span class="m">11</span>
<span class="w">      </span><span class="p">(</span><span class="m">181</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="o">↑</span><span class="m">1</span><span class="w"> </span><span class="m">1000</span>
<span class="m">163</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-syntax-colouring">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-syntax-colouring-header">Syntax Colouring</h3><div class="command">R←200⌶Y</div></div>
<p>This function obtains syntax colouring information for a function.</p>
<p><code>Y</code> is a vector of character vectors containing the <code>⎕NR</code> representation of a function or operator.</p>
<p><code>R</code> is a vector of integer vectors with the same shape and structure of <code>Y</code> in which each number identifies the syntax colour element associated with the corresponding character in <code>Y</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">foo</span><span class="bp">∇</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="sr">;</span><span class="nv">local</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">global</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">local</span><span class="kd">←</span><span class="o">⍴⍴</span><span class="s1">'hello'</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="nf">⎕NR</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="w">  </span><span class="nv">foo</span><span class="sr">;</span><span class="nv">local</span><span class="w">   </span><span class="nv">global</span><span class="w">   </span><span class="nv">local</span><span class="kd">←</span><span class="o">⍴⍴</span><span class="s1">'hello'</span><span class="w"> </span>

<span class="w">     </span><span class="kt">{</span><span class="p">(</span><span class="o">↑</span><span class="bp">⍵</span><span class="p">)</span><span class="o">,↑</span><span class="m">200</span><span class="na">⌶</span><span class="bp">⍵</span><span class="kt">}</span><span class="nf">⎕NR</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="w"> </span><span class="nv">foo</span><span class="sr">;</span><span class="nv">local</span><span class="w">       </span><span class="m">3</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span><span class="nv">global</span><span class="w">          </span><span class="m">3</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span><span class="nv">local</span><span class="kd">←</span><span class="o">⍴⍴</span><span class="s1">'hello'</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">34</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">23</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">4</span>
</code></pre></div>
<p>In this example:</p>
<table>
<tbody>
<tr>
<td>21</td>
<td>is the syntax identifier for "character constant"</td>
</tr>
<tr>
<td>19</td>
<td>is the syntax identifier for "primitive"</td>
</tr>
<tr>
<td>3</td>
<td>is the syntax identifier for "white space"</td>
</tr>
<tr>
<td>34</td>
<td>is the syntax identifier for "local name"</td>
</tr>
<tr>
<td>7</td>
<td>is the syntax identifier for "global name"</td>
</tr>
<tr>
<td>23</td>
<td>is the syntax identifier for "idiom"</td>
</tr>
</tbody>
</table>
<p>The list of syntax colour elements supported by the current interpreter is given by <code>201⌶</code>. It is important to note that the values may change within a release, and are very likely to change across releases .. you should always call <code>201⌶</code> rather than relying the results from a different interpreter. See <a class="internal-link" href="#the-i-beam-operator-syntax-colour-tokens">Section 3.2.7</a>.</p>
</article>
<article id="the-i-beam-operator-syntax-colour-tokens">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-syntax-colour-tokens-header">Syntax Colour Tokens</h3><div class="command">R←201⌶Y</div></div>
<p>This function provides a description of the syntax colour tokens reported by <code>200⌶</code>. See <a class="internal-link" href="#the-i-beam-operator-syntax-colouring">Section 3.2.6</a>.</p>
<p><code>Y</code> is <code>⍬</code> (zilde).</p>
<p><code>R</code> is a 4-column matrix that describes the syntax colouring tokens as follows:</p>
<table>
<tbody>
<tr>
<td><code>R[;1]</code></td>
<td>Token type</td>
</tr>
<tr>
<td><code>R[;2]</code></td>
<td>Token Value</td>
</tr>
<tr>
<td><code>R[;3]</code></td>
<td>Internal description</td>
</tr>
<tr>
<td><code>R[;4]</code></td>
<td>Colour index</td>
</tr>
</tbody>
</table>
<p>The 4th column is intended for the benefit of non-Windows users using the tty interface and indicates the video/foreground/background colour index. These indices appear in the output translate tables found in <code>$DYALOG/apltrans</code>, and are used to define the colours used in the tty interface.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="m">201</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="m">207</span><span class="w"> </span><span class="m">4</span>
<span class="w">     </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">↑</span><span class="m">201</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="err">┌────────────┬─┬────────────┬───┐</span>
<span class="err">│</span><span class="nv">Global</span><span class="w"> </span><span class="nv">token</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="nv">MINI_NULL</span><span class="w">   </span><span class="err">│</span><span class="m">129</span><span class="err">│</span>
<span class="err">├────────────┼─┼────────────┼───┤</span>
<span class="err">│</span><span class="nv">Global</span><span class="w"> </span><span class="nv">token</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">MINI_COMMENT</span><span class="err">│</span><span class="m">137</span><span class="err">│</span>
<span class="err">├────────────┼─┼────────────┼───┤</span>
<span class="err">│</span><span class="nv">Global</span><span class="w"> </span><span class="nv">token</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="nv">MINI_UCC</span><span class="w">    </span><span class="err">│</span><span class="m">129</span><span class="err">│</span>
<span class="err">└────────────┴─┴────────────┴───┘</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-compress-vector-of-short-integers">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-compress-vector-of-short-integers-header">Compress Vector of Short Integers</h3><div class="command">R←X(219⌶)Y</div></div>
<p>In this section, the term <em>sint_vector</em> is used to refer to a simple integer vector whose items are all in the range <code>¯128</code> to <code>127</code> i.e. they are type 83. 
 For further information see <a class="internal-link" href="#system-functions-data-representation-monadic">Section 4.6.32</a>.</p>
<p>In most cases this I-Beam functionality will be used in conjunction with <code>220⌶</code> (Serialise/Deserialise Array). However, it may be possible to pass the raw compressed data to and from other applications.</p>
<p><code>X</code> specifies the operation to be performed, either compression or decompression, the compression library to be used, and any  optional parameters. <code>Y</code> contains the data to be operated on.</p>
<h5>Compression</h5>
<p><code>Y</code> must be a <em>sint_vector</em>.</p>
<p><code>R</code> is a two item vector, each of which is a <em>sint_vector</em>. <code>R[1]</code> describes the compression, and <code>R[2]</code> contains the raw data which is the result of applying the compression library to the input data <code>Y</code>.</p>
<p><code>X</code> is specified as follows:</p>
<table>
<tbody>
<tr>
<td><code>X[1]</code></td>
<td><code>X[2]</code></td>
<td>Compression Library</td>
</tr>
<tr>
<td>1</td>
<td>n/a</td>
<td>LZ4</td>
</tr>
<tr>
<td>2</td>
<td>0 .. 9</td>
<td>zlib</td>
</tr>
<tr>
<td>3</td>
<td>0 .. 9</td>
<td>gzip</td>
</tr>
<tr>
<td>4</td>
<td>n/a</td>
<td>LZ4 with frames (compresses arrays &gt;2GB)</td>
</tr>
</tbody>
</table>
<p>If LZ4 compression is required, then <code>X</code> must either be a scalar or a one element vector. Otherwise, <code>X[2]</code>, if present, specifies the compression level; higher numbers produce better compression, but take longer.</p>
<h5>Decompression</h5>
<p><code>R</code> is a <em>sint_vector</em>, containing the output of applying the decompression library to the input data, <code>Y</code>.</p>
<p>If <code>X</code> is a scalar or a one item vector, and has the value 0, then <code>Y</code> must be a vector of two items which is the result of previously calling <code>219⌶</code> to compress a <em>sint_vector</em>.</p>
<p>Otherwise, <code>X</code> is a scalar or one or two element vector and <code>Y</code> must be a <em>sint_vector</em>.</p>
<p>The first element of <code>X</code> must be one of the following values.</p>
<table>
<tbody>
<tr>
<td><code>X[1]</code></td>
<td>Compression Library</td>
</tr>
<tr>
<td><code>¯1</code></td>
<td>LZ4</td>
</tr>
<tr>
<td><code>¯2</code></td>
<td>zlib</td>
</tr>
<tr>
<td><code>¯3</code></td>
<td>gzip</td>
</tr>
</tbody>
</table>
<p>The second, optional, element of <code>X</code> specifies the length of the uncompressed data. Its presence results in a more efficient use of the compression library.</p>
<p><code>X</code> may not be a two item vector whose first item has the value 0.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">sint</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵</span><span class="o">-</span><span class="m">256</span><span class="o">×</span><span class="bp">⍵</span><span class="o">&gt;</span><span class="m">127</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">utf8</span><span class="kd">←</span><span class="s1">'UTF-8'</span><span class="na">∘</span><span class="nf">⎕ucs</span>
<span class="w">      </span><span class="nv">str</span><span class="kd">←</span><span class="s1">'empty←⍬'</span>
<span class="w">      </span><span class="o">⊣</span><span class="nv">v</span><span class="kd">←</span><span class="nv">sint</span><span class="w"> </span><span class="nv">utf8</span><span class="w">  </span><span class="nv">str</span>
<span class="m">101</span><span class="w"> </span><span class="m">109</span><span class="w"> </span><span class="m">112</span><span class="w"> </span><span class="m">116</span><span class="w"> </span><span class="m">121</span><span class="w"> </span><span class="m">¯30</span><span class="w"> </span><span class="m">¯122</span><span class="w"> </span><span class="m">¯112</span><span class="w"> </span><span class="m">¯30</span><span class="w"> </span><span class="m">¯115</span><span class="w"> </span><span class="m">¯84</span><span class="w">          </span>
<span class="w">      </span><span class="o">⊣</span><span class="nv">comp</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">219</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">v</span>
<span class="m">8</span><span class="w"> </span><span class="m">¯55</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">11</span><span class="w">  </span><span class="m">¯80</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">109</span><span class="w"> </span><span class="m">112</span><span class="w"> </span><span class="m">116</span><span class="w"> </span><span class="m">121</span><span class="w"> </span><span class="m">¯30</span><span class="w"> </span><span class="m">¯122</span><span class="w"> </span><span class="m">¯112</span><span class="w"> </span><span class="m">¯30</span><span class="w"> </span><span class="m">¯115</span><span class="w"> </span><span class="m">¯84</span><span class="w">          </span>

<span class="w">      </span><span class="nv">utf8</span><span class="w"> </span><span class="m">256</span><span class="o">|</span><span class="w"> </span><span class="m">0</span><span class="p">(</span><span class="m">219</span><span class="na">⌶</span><span class="p">)</span><span class="nv">comp</span>
<span class="nv">empty</span><span class="kd">←</span><span class="no">⍬</span>
<span class="w">      </span><span class="nv">utf8</span><span class="w"> </span><span class="m">256</span><span class="o">|</span><span class="w"> </span><span class="m">¯1</span><span class="p">(</span><span class="m">219</span><span class="na">⌶</span><span class="p">)</span><span class="m">2</span><span class="o">⊃</span><span class="nv">comp</span>
<span class="nv">empty</span><span class="kd">←</span><span class="no">⍬</span><span class="w">                   </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-serialise-array">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-serialise-array-header">Serialise/Deserialise Array</h3><div class="command">R←X(220⌶)Y</div></div>
<p>In this section, the term <em>sint_vector</em> is used to refer to a simple integer vector whose items are all in the range <code>¯128</code> to <code>127</code> i.e. they are type 83. 
 For further information see <a class="internal-link" href="#system-functions-data-representation-monadic">Section 4.6.32</a>.</p>
<p>It is expected that in many cases this I-Beam functionality will be used in conjunction with <code>219⌶</code> - Compress/Decompress vector of short integers. It would also be possible to encrypt the serialised form and write to a file (either component or native), and reverse the process at a later date.</p>
<p><code>X</code> is a scalar which can take the value 0 or 1.</p>
<p>When <code>X</code> is 1, <code>Y</code> can be any array. The result <code>R</code> is the serialised form of the array, presented as a <em>sint_vector</em>.</p>
<p>When <code>X</code> is 0, <code>Y</code> must be a <em>sint_vector</em>. The result <code>R</code> is an array whose serialised form is represented by <code>Y</code>.</p>
<p>Typically it is not possible to construct a vector which can be deserialised; it is expected that the only source of a vector which can be deserialised is the result of using <code>1(220⌶)</code> to serialise an array.</p>
<p>The result of <code>1(220⌶)</code> will differ between interpreters of differing widths and editions, but the resulting vector can be deserialised in other interpreters, with the exception that, like arrays in component files, it may not be possible to deserialise an array which was serialised in a later interpreter</p>
<p>The following identity holds true:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="o">≡</span><span class="w"> </span><span class="m">0</span><span class="p">(</span><span class="m">220</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="m">0</span><span class="p">(</span><span class="m">219</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="p">(</span><span class="m">219</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="p">(</span><span class="m">220</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">A</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="s1">'ab'</span>
<span class="w">      </span><span class="nv">b</span><span class="kd">←</span><span class="m">1</span><span class="p">(</span><span class="m">220</span><span class="na">⌶</span><span class="p">)</span><span class="nv">a</span>
<span class="w">      </span><span class="nv">b</span>
<span class="m">¯33</span><span class="w"> </span><span class="m">¯108</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">39</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">97</span><span class="w"> </span><span class="m">98</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">c</span><span class="kd">←</span><span class="m">0</span><span class="p">(</span><span class="m">220</span><span class="na">⌶</span><span class="p">)</span><span class="nv">b</span>
<span class="w">      </span><span class="nv">c</span><span class="o">≡</span><span class="nv">a</span>
<span class="m">1</span><span class="w">    </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-compiler-control">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-compiler-control-header">Compiler Control</h3><div class="command">R←{X}(400⌶)Y</div></div>
<p>Controls the actions of the Compiler. For further information, see 
Compiler User Guide</p>
<p>.</p>
<p>The optional left-argument <code>X</code> must be one of the following:</p>
<table>
<thead>
<tr>
<th><code>X</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Set automatic compilation options (default)</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Determine whether the function/operator <code>Y</code> has been successfully compiled</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Compile the function/operator <code>Y</code></td>
</tr>
<tr>
<td><code>3</code></td>
<td>Discard compiled form of the function/operator <code>Y</code></td>
</tr>
<tr>
<td><code>4</code></td>
<td>Show bytecode for the compiled function/operator <code>Y</code></td>
</tr>
<tr>
<td><code>nsref</code></td>
<td>Compile the function/operator <code>Y</code> using user-defined callbacks in this namespace to provide information about global names</td>
</tr>
</tbody>
</table>
<p>The nature of <code>Y</code> and <code>R</code> depend on the value of <code>X</code> as follows:</p>
<h5><code>X=0</code> : Control Automatic Compilation (default)</h5>
<p><code>Y</code> must be an integer 0, 1, 2, or 3.</p>
<table>
<thead>
<tr>
<th><code>Y</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>disable automatic compilation (initial setting)</td>
</tr>
<tr>
<td><code>1</code></td>
<td>compile functions when they are fixed (with <code>⎕FX</code> or from the function editor)</td>
</tr>
<tr>
<td><code>2</code></td>
<td>compile operators the first time they are executed</td>
</tr>
<tr>
<td><code>3</code></td>
<td>compile functions when they are fixed (with <code>⎕FX</code> or from the function editor) and compile operators the first time they are executed</td>
</tr>
</tbody>
</table>
<p>The result <code>R</code> is the previous value of <code>Y</code>.</p>
<p>The automatic compilation setting is maintained within the workspace, and is saved and loaded with the workspace.</p>
<h5><code>X=1</code>: Query Compilation State</h5>
<p><code>Y</code> must be a character vector, matrix or vector of vectors specifying the name of a function or operator or a list of such names.</p>
<p>The result <code>R</code> is a Boolean scalar or vector, with the value 1 if the corresponding function/operator has been successfully compiled or 0 if it has not.</p>
<h5><code>X=2</code>: Compile</h5>
<p><code>Y</code> must be a character vector, matrix or vector of vectors specifying the name of a function or operator or a list of such names that should be compiled.</p>
<p>The result <code>R</code> is a matrix of diagnostic information or, if <code>Y</code> was either a matrix or a vector of vectors, a vector of such matrices. Each row of the matrix describes a problem that caused the compilation to fail, with four columns corresponding to:</p>
<ol>
<li>the APL error number</li>
<li>the line number in the function/operator</li>
<li>the column number (currently always 0)</li>
<li>the error message</li>
</ol>
<p>If the matrix <code>R</code> has zero rows then the compilation was successful.</p>
<p>If this mechanism is used to compile operators, then the compiled bytecode will assume that the operator's operands are functions rather than arrays. At run time, the operands will be checked – if they are functions then the compiled bytecode will be used, otherwise the operator will be interpreted.</p>
<h5><code>X=3</code>: Discard Compiled Form</h5>
<p>If <code>Y</code> is empty, discard any compiled bytecode for all functions and operators in the workspace. If <code>Y</code> is a character vector, matrix or vector of vectors specifying the name of a function or operator or a list of such names, discard any compiled bytecode for the name(s) specified by <code>Y</code>. <code>R</code> is always 0</p>
<h5><code>X=4</code>: Show Bytecode</h5>
<p><code>Y</code> must be a character vector, matrix or vector of vectors specifying the name of a function or operator or a list of such names.</p>
<p>The result <code>R</code> is a multi-line string (that is, a character vector with embedded newlines) or, if <code>Y</code> was either a matrix or a vector of vectors, a vector of such strings. Each string is a human-readable representation of the bytecode of a compiled function or operator.</p>
<p><strong>This functionality is provided for information and diagnostic purposes only. The human-readable form of the bytecode is subject to change at any time.</strong></p>
<h5><code>X</code> is a namespace reference: Compile With Callbacks</h5>
<p><code>Y</code> must be a character vector, matrix or vector of vectors specifying the name of a function or operator or a list of such names. The specified functions or operators are compiled in the same way as when <code>X</code> = 2  except that the compiler uses the user-defined callback functions in the namespace <code>X</code> to obtain information about global names. The namespace <code>X</code> can contain any or all of following callback functions:</p>
<table>
<thead>
<tr>
<th>Callback</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>quadNC</code></td>
<td>analogous to the system function <code>⎕NC</code> . When applied monadically to an enclosed character vector it should return the detailed name class of that name. For example, given the name of a global dfn it should return the value 3.2.</td>
</tr>
<tr>
<td><code>quadAT</code></td>
<td>analogous to the system function <code>⎕AT</code> . When applied monadically to an enclosed character vector it should return a 1 by 4 matrix whose first item is a vector of 3 integers describing (respectively) the result, function valence and operator valence of the name.</td>
</tr>
<tr>
<td><code>getValue</code></td>
<td>used to obtain the value of global constants. When applied monadically to a character vector that is a global constant it should return the enclose of the constant value, otherwise it returns <code>⍬</code> .</td>
</tr>
</tbody>
</table>
<p>Each of these callback functions returns information about names that should be guaranteed to exist when the compiled functions are executed. The compiler assumes that the information returned by the callbacks is correct, and generates bytecode accordingly. In the case of <code>quadNC</code> and <code>quadAT</code>, if the information returned by the callbacks turns out not to be correct when the compiled function is executed, then a runtime error is generated.</p>
<p>The result <code>R</code> is a matrix of diagnostic information or, if <code>Y</code> was either a matrix or a vector of vectors, a vector of such matrices. Each row of the matrix describes a problem that caused the compilation to fail, with four columns corresponding to:</p>
<ol>
<li>the APL error number</li>
<li>the line number in the function/operator</li>
<li>the column number (currently always 0)</li>
<li>the error message</li>
</ol>
<p>If the matrix <code>R</code> has zero rows then the compilation was successful.</p>
</article>
<article id="the-i-beam-operator-trap-control">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-trap-control-header">Trap Control</h3><div class="command">R←600⌶Y</div></div>
<p>This function is used to temporarily disable the error trapping mechanism used by <code>:Trap</code> and <code>⎕TRAP</code>. This can be useful in debugging applications.</p>
<p><code>Y</code> is an integer 0, 1 or 2 as shown in the following table.</p>
<p><code>R</code> is the previous value (0, 1, or 2) of the trap state.</p>
<table>
<thead>
<tr>
<th><code>Y</code></th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Enable all traps.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Disable all traps.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Disable traps in suspended functions from triggering when an error is generated in the Session.</td>
</tr>
</tbody>
</table>
<p>Note that the <em>Disable traps in session</em> option of the Session <em>Options</em> menu performs the same tasks as <code>(600⌶0)</code> and <code>(600⌶2)</code>.</p>
<p>For  error-guards in dfns <code>600⌶0</code> and <code>600⌶2</code> are equivalent; in neither case is an error generated in the session caught by an error guard in a suspended dfn.</p>
</article>
<article id="the-i-beam-operator-case-convert">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-case-convert-header">Case Convert</h3><div class="command">R←{X}(819⌶)Y</div></div>
<h5>Note</h5>
<p>This i-beam function has been replaced by a system function and is deprecated. See <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
<p>Converts character data in <code>Y</code> to upper or lower-case. This function is considerably faster than any comparable function coded in APL, especially on nested arrays.</p>
<p><code>Y</code> may be any array of arbitrary depth so long as all the elements are characters.</p>
<p>The optional left-argument <code>X</code> is 0 (convert to lower-case) or 1 (convert to upper-case). If omitted, the default is 0.</p>
<p>The result <code>R</code> has the same structure as  <code>Y</code> but each character element is case folded to upper or lower case.</p>
<p>Characters are converted per the default case mappings specified by The Unicode Consortium, described at:
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">ftp</span><span class="bp">:</span><span class="na">//</span><span class="nv">ftp</span><span class="na">.</span><span class="nv">unicode</span><span class="na">.</span><span class="nv">org</span><span class="na">/</span><span class="nv">Public</span><span class="na">/</span><span class="m">3.0</span><span class="o">-</span><span class="nv">Update</span><span class="na">/</span><span class="nv">UnicodeData</span><span class="o">-</span><span class="m">3.0.0</span><span class="na">.</span><span class="nv">html</span>
</code></pre></div></p>
<p>and using the table at:
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">http</span><span class="bp">:</span><span class="na">//</span><span class="nv">unicode</span><span class="na">.</span><span class="nv">org</span><span class="na">/</span><span class="nv">Public</span><span class="na">/</span><span class="nv">UNIDATA</span><span class="na">/</span><span class="nv">UnicodeData</span><span class="na">.</span><span class="nv">txt</span>
</code></pre></div></p>
<p>If conversion is being used to do case-insensitive character comparisons then converting everything to lower case is generally preferable to converting everything to upper. This is because converting to lower case can be faster.</p>
<p>This I-beam is supported in Classic Edition  using the same code as the Unicode Edition. This means that any case-folding defined in the input translate tables is ignored, and that <code>TRANSLATION ERROR</code>s will be generated if the folded characters do not appear in <code>⎕AV</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">819</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'How many Roads must a man walk down'</span>
<span class="nv">how</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">roads</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">man</span><span class="w"> </span><span class="nv">walk</span><span class="w"> </span><span class="nv">down</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">819</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'How many Roads must a man walk down'</span>
<span class="nv">HOW</span><span class="w"> </span><span class="nv">MANY</span><span class="w"> </span><span class="nv">ROADS</span><span class="w"> </span><span class="nv">MUST</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">MAN</span><span class="w"> </span><span class="nv">WALK</span><span class="w"> </span><span class="nv">DOWN</span>

<span class="w">      </span><span class="nv">data</span><span class="kd">←</span><span class="m">1000</span><span class="o">⍴⊂</span><span class="s1">'Hello there.'</span>
<span class="w">      </span><span class="nv">lc_data</span><span class="kd">←</span><span class="m">819</span><span class="na">⌶</span><span class="w"> </span><span class="nv">data</span>
<span class="w">      </span><span class="m">4</span><span class="o">↑</span><span class="nv">lc_data</span>
<span class="w"> </span><span class="nv">hello</span><span class="w"> </span><span class="nv">there</span><span class="na">.</span><span class="w">  </span><span class="nv">hello</span><span class="w"> </span><span class="nv">there</span><span class="na">.</span><span class="w">  </span><span class="nv">hello</span><span class="w"> </span><span class="nv">there</span><span class="na">.</span><span class="w">  </span><span class="nv">hello</span><span class="w"> </span><span class="nv">there</span><span class="na">.</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-called-monadically">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-called-monadically-header">Called Monadically</h3><div class="command">R←900⌶Y</div></div>
<p>Identifies how the current function was called. It reports whether the nearest tradfn on the stack was called without a left argument or not.</p>
<p><code>Y</code> may be any array.</p>
<p>The result <code>R</code> is Boolean. 1 means that the nearest tradfn was called monadically; 0 means that it wasn't. If there is no function on the stack, the result is 0.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="kt">{</span><span class="nv">left</span><span class="kt">}</span><span class="nv">foo</span><span class="w"> </span><span class="nv">right</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="m">900</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">10</span>
<span class="m">1</span>
<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="m">10</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-temporary-directory">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-temporary-directory-header">Temporary Directory</h3><div class="command">R←739⌶Y</div></div>
<p>Returns the name of a system temporary directory suitable for user files, as a character vector. The name reported does not include a trailing directory separator</p>
<p><code>Y</code> is 0.</p>
<p>The result <code>R</code> is a character vector.</p>
<h5>Example (Windows)</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">739</span><span class="na">⌶</span><span class="m">0</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="nv">AppData</span><span class="na">/</span><span class="nv">Local</span><span class="na">/</span><span class="nv">Temp</span>
</code></pre></div>
<h5>Example (non-Windows)</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">739</span><span class="na">⌶</span><span class="m">0</span>
<span class="na">/</span><span class="nv">tmp</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-loaded-libraries">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-loaded-libraries-header">Loaded Libraries</h3><div class="command">R←950⌶Y</div></div>
<p>Reports the names of the dynamic link libraries that are currently loaded as a result of executing <code>⎕NA</code>.</p>
<p><code>Y</code> is an empty vector.</p>
<p>The result <code>R</code> is a vector of character vectors containing  the names of all the DLLs or shared libraries that have been explicitly loaded by <code>⎕NA</code> and are still loaded by virtue of the presence of at least one external function reference.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">clear</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="s1">'Aloc'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32∣GlobalAlloc U4 P'</span>
<span class="w">      </span><span class="s1">'Free'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32∣GlobalFree P'</span>
<span class="w">      </span><span class="s1">'Lock'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32∣GlobalLock P'</span>
<span class="w">      </span><span class="s1">'Ulok'</span><span class="nf">⎕NA</span><span class="s1">'U4 kernel32∣GlobalUnlock P'</span>
<span class="w">      </span><span class="s1">'Valu'</span><span class="nf">⎕NA</span><span class="s1">'U4 version∣VerQueryValue* P &lt;0T &gt;U4 &gt;U4'</span>
<span class="w">      </span><span class="s1">'copy'</span><span class="nf">⎕NA</span><span class="s1">'P msvcrt∣memcpy &gt;U4[] P U4'</span>

<span class="w">      </span><span class="m">950</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="w"> </span><span class="nv">KERNEL32</span><span class="na">.</span><span class="nv">DLL</span><span class="w">  </span><span class="nv">VERSION</span><span class="na">.</span><span class="nv">DLL</span><span class="w">  </span><span class="nv">MSVCRT</span><span class="na">.</span><span class="nv">DLL</span><span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">fns</span>
<span class="nv">Aloc</span><span class="w">    </span><span class="nv">Free</span><span class="w">    </span><span class="nv">Lock</span><span class="w">    </span><span class="nv">Ulok</span><span class="w">    </span><span class="nv">Valu</span><span class="w">    </span><span class="nv">copy</span>

<span class="w">      </span><span class="p">)</span><span class="nv">erase</span><span class="w"> </span><span class="nv">Aloc</span><span class="w">    </span><span class="nv">Free</span><span class="w">    </span><span class="nv">Lock</span><span class="w">    </span><span class="nv">Valu</span><span class="w"> </span>
<span class="w">      </span><span class="m">950</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="w"> </span><span class="nv">KERNEL32</span><span class="na">.</span><span class="nv">DLL</span><span class="w">  </span><span class="nv">MSVCRT</span><span class="na">.</span><span class="nv">DLL</span><span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">fns</span>
<span class="nv">Ulok</span><span class="w">    </span><span class="nv">copy</span>

<span class="w">      </span><span class="p">)</span><span class="nv">erase</span><span class="w"> </span><span class="nv">Ulok</span>
<span class="w">      </span><span class="m">950</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="w"> </span><span class="nv">MSVCRT</span><span class="na">.</span><span class="nv">DLL</span><span class="w"> </span>

<span class="w">      </span><span class="p">)</span><span class="nv">clear</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="m">950</span><span class="na">⌶</span><span class="no">⍬</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-set-shell-script-debug-options">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-set-shell-script-debug-options-header">Set Shell Script Debug Options</h3><div class="command">R←{X}(1010⌶)Y</div></div>
<p><code>Y</code> is an integer that selects options as follows.</p>
<p>If <code>Y</code> is 1, the lines in the script to be echoed to stderr before they are executed.. The optional left argument <code>X</code> specifies a character scalar of vector that prefixes each line of output. If <code>X</code> is omitted, the default is <code>'+'</code>.</p>
<p>If <code>Y</code> is 2, the effect is as if <code>⎕TRACE</code> was set for every line of every function in the script. In this case the left argument (if any) is ignored.</p>
<p>If <code>Y</code> is 3, it specifies a combination of the above.</p>
<p>The result <code>R</code> is the previous value of the debug options.</p>
</article>
<article id="the-i-beam-operator-number-of-threads">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-number-of-threads-header">Number of Threads</h3><div class="command">R←1111⌶Y</div></div>
<p>Specifies how many threads are to be used for parallel execution.</p>
<p>If <code>Y</code> has the value <code>⍬</code>, <code>R</code> is the number of virtual processors in the machine.</p>
<p>Otherwise, <code>Y</code> is an integer that specifies the number of threads that are to be used henceforth for parallel execution. Prior to this call, the default number of threads is specified by the parameter  <code>APL_MAX_THREADS</code>. See <i> APL_MAX_THREADS</i>.</p>
<p>Note that whatever the value of <code>Y</code>, Dyalog limits the number of threads to 64. So the effective number of threads is <code>Y⌊64</code>.</p>
<p><code>R</code> is the previous value.</p>
<p>To set the number of threads to be the same as the number of virtual processors, execute the stamement:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{}</span><span class="m">1111</span><span class="na">⌶</span><span class="w"> </span><span class="m">1111</span><span class="na">⌶</span><span class="no">⍬</span>
</code></pre></div></p>
<p>See <i>Parallel Execution
        </i> and <a class="internal-link" href="#the-i-beam-operator-parallel-execution-threshold">Section 3.2.18</a>.</p>
</article>
<article id="the-i-beam-operator-parallel-execution-threshold">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-parallel-execution-threshold-header">Parallel Execution Threshold</h3><div class="command">R←1112⌶Y</div></div>
<p><code>Y</code> is an integer that specifies the array size threshold at which parallel execution takes place. If a parallel-enabled function is invoked on an array whose number of elements is equal to or greater than this threshold, execution takes place in parallel. If not, it doesn't.</p>
<p>Prior to this call, the default value of the threshold is specified by an environment variable named <code>APL_MIN_PARALLEL</code>. If this variable is not set, the default is 32768.</p>
<p><code>R</code> is the previous value.</p>
<p>See <i>Parallel Execution
        </i> and <a class="internal-link" href="#the-i-beam-operator-number-of-threads">Section 3.2.17</a>.</p>
</article>
<article id="the-i-beam-operator-update-function-timestamp">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-update-function-timestamp-header">Update Function Timestamp</h3><div class="command">{R}←X(1159⌶)Y</div></div>
<p><code>Y</code> is an array of function names in the same format as the right argument of <code>⎕AT</code>. For further information, see <a class="internal-link" href="#system-functions-fcreate">Section 4.6.45</a>.</p>
<p><code>X</code> is an array of function attributes in the same format as the output of <code>⎕AT</code>.</p>
<p>The shy result <code>R</code> is a vector of numeric items, one per each specified function containing the following values:</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>No change was made; the name is not that of a function, or the function was locked</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The time and user stamp were updated</td>
</tr>
</tbody>
</table>
<p>Note that the last item of the function timestamp must be set to 0 otherwise <code>1159 ⌶</code> will generate a <code>DOMAIN ERROR</code>. Additionally, the timestamp must be greater than <code>1970 1 1 0 0 0 0</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">disp</span><span class="w"> </span><span class="nf">⎕AT</span><span class="s1">'Christmas'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────┬───────────────────┬─┬───────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">2013</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">58</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="nv">Richard</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">───</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">─────────────────</span><span class="kd">→</span><span class="err">┴─┴───────┘</span>

<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="nf">⎕AT</span><span class="w"> </span><span class="s1">'Christmas'</span>
<span class="w">      </span><span class="nv">x</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="sr">]</span><span class="kd">←</span><span class="p">(</span><span class="m">2012</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)(</span><span class="s1">'Santa'</span><span class="p">)</span>
<span class="w">      </span><span class="nv">x</span><span class="w"> </span><span class="p">(</span><span class="m">1159</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'Christmas'</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">disp</span><span class="w"> </span><span class="nf">⎕AT</span><span class="s1">'Christmas'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────┬────────────────────┬─┬─────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">2012</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="nv">Santa</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">───</span><span class="kd">→</span><span class="err">┴</span><span class="o">~</span><span class="err">──────────────────</span><span class="kd">→</span><span class="err">┴─┴────</span><span class="kd">→</span><span class="err">┘</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-format-datetime">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-format-datetime-header">Format Date-time</h3><div class="command">R←X(1200⌶)Y</div></div>
<p><code>Y</code> is a numeric array of any shape, where every element contains a Dyalog Date Number that represents a date between 1
January 0001 and 31 December 9999 in the <a href="https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar">Proleptic Gregorian Calendar</a>.</p>
<p><code>X</code> is a character scalar or vector specifying a pattern with which the elements in <code>Y</code> should be formatted.</p>
<p><code>R</code> is an array of the same shape as <code>Y</code>, whose elements are enclosed character vectors.</p>
<h5>Formatting Pattern in <code>X</code></h5>
<p>The formatting pattern allows a time number to be converted to a highly user-configurable, plain text format. When a
time number is formatted, elements in the result are copies of the format pattern with format sequences replaced by the
elements they represent.</p>
<p>The format sequences are intended to be visually reminiscent of the generated text. They use alphabetic characters
easily associated with the substitution (e.g. <code>D</code>, <code>M</code> and <code>Y</code> for Day, Month and Year respectively) repeated one or
more times to indicate format. As noted below, some sequences allow the first character to be replaced by a <code>_</code>, or the casing to be altered.</p>
<table>
<thead>
<tr>
<th class="text-left">letter</th>
<th class="text-left">Length</th>
<th class="text-left">Meaning</th>
<th class="text-left">Variations</th>
<th class="text-left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>Y</ins>ear</td>
<td class="Dyalog">YY</td>
<td>Without century</td>
<td class="Dyalog">YY</td>
<td class="Dyalog">19</td>
</tr>
<tr>
<td class="Dyalog">YYYY</td>
<td>With century</td>
<td class="Dyalog">YYYY</td>
<td class="Dyalog">2019</td>
</tr>
<tr>
<td rowspan="4" style="vertical-align: middle;">
<ins>M</ins>onth</td>
<td class="Dyalog">M</td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">M</td>
<td class="Dyalog">3</td>
</tr>
<tr>
<td class="Dyalog">MM</td>
<td>2 character numeric</td>
<td class="Dyalog">MM<br/>_M</td>
<td class="Dyalog">03<br/>3</td>
</tr>
<tr>
<td class="Dyalog">MMM</td>
<td>Abbreviated name</td>
<td class="Dyalog">MMM<br/>Mmm<br/>mmm<br/>_mm</td>
<td class="Dyalog">MAR<br/>Mar<br/>mar<br/>Mar</td>
</tr>
<tr>
<td class="Dyalog">MMMM </td>
<td>Full name </td>
<td class="Dyalog">MMMM<br/>Mmmm<br/>mmmm<br/>_mmm</td>
<td class="Dyalog">MARCH<br/>March<br/>march<br/>March</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>D</ins>ay of month</td>
<td class="Dyalog">D</td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">D</td>
<td class="Dyalog">4</td>
</tr>
<tr>
<td class="Dyalog">DD</td>
<td>2 character numeric</td>
<td class="Dyalog">DD<br/>_D</td>
<td class="Dyalog">04<br/>4</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>h</ins>ours</td>
<td class="Dyalog">h</td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">h</td>
<td class="Dyalog">8</td>
</tr>
<tr>
<td class="Dyalog">hh</td>
<td>2 character numeric</td>
<td class="Dyalog">hh<br/>_h</td>
<td class="Dyalog">08<br/>8</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>m</ins>inutes</td>
<td class="Dyalog">m </td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">m</td>
<td class="Dyalog">5</td>
</tr>
<tr>
<td class="Dyalog">mm</td>
<td>2 character numeric</td>
<td class="Dyalog">mm<br/>_m</td>
<td class="Dyalog">05<br/>5</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>s</ins>econds</td>
<td class="Dyalog">s</td>
<td>1 or 2 digit numeric </td>
<td class="Dyalog">s</td>
<td class="Dyalog">0</td>
</tr>
<tr>
<td class="Dyalog">ss </td>
<td>2 character numeric </td>
<td class="Dyalog">ss<br/>_s</td>
<td class="Dyalog">00<br/>0</td>
</tr>
<tr>
<td rowspan="6" style="vertical-align: middle;">
<ins>f</ins>ractional seconds</td>
<td class="Dyalog">f</td>
<td>1 digit precision</td>
<td class="Dyalog">f</td>
<td class="Dyalog">5</td>
</tr>
<tr>
<td class="Dyalog">ff</td>
<td>2 digit precision</td>
<td class="Dyalog">ff</td>
<td class="Dyalog">55</td>
</tr>
<tr>
<td class="Dyalog">fff</td>
<td>3 digit precision</td>
<td class="Dyalog">fff</td>
<td class="Dyalog">555</td>
</tr>
<tr>
<td class="Dyalog">ffff</td>
<td>4 digit precision</td>
<td class="Dyalog">ffff</td>
<td class="Dyalog">5555</td>
</tr>
<tr>
<td class="Dyalog">fffff</td>
<td>5 digit precision</td>
<td class="Dyalog">fffff</td>
<td class="Dyalog">55555</td>
</tr>
<tr>
<td class="Dyalog">ffffff</td>
<td>6 digit precision</td>
<td class="Dyalog">ffffff</td>
<td class="Dyalog">555555</td>
</tr>
<tr>
<td rowspan="3" style="vertical-align: middle;">
<ins>d</ins>ay of week</td>
<td class="Dyalog">d </td>
<td>Numeric (1-7)</td>
<td class="Dyalog">d</td>
<td class="Dyalog">1</td>
</tr>
<tr>
<td class="Dyalog">ddd</td>
<td>Abbreviated name</td>
<td class="Dyalog">DDD<br/>Ddd<br/>ddd<br/>_dd</td>
<td class="Dyalog">MON<br/>Mon<br/>mon<br/>Mon</td>
</tr>
<tr>
<td class="Dyalog">dddd</td>
<td>Full name</td>
<td class="Dyalog">DDDD<br/>Dddd<br/>dddd<br/>_ddd</td>
<td class="Dyalog">MONDAY<br/>Monday<br/>monday<br/>Monday</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">ISO <ins>w</ins>eek number</td>
<td class="Dyalog">w</td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">w</td>
<td class="Dyalog">10</td>
</tr>
<tr>
<td class="Dyalog">ww</td>
<td>2 character numeric</td>
<td class="Dyalog">ww<br/>_w</td>
<td class="Dyalog">10<br/>10</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">year of ISO<br/><ins>W</ins>eek<br/>number</td>
<td class="Dyalog">WW</td>
<td>Without century</td>
<td class="Dyalog">WW</td>
<td class="Dyalog">19</td>
</tr>
<tr>
<td class="Dyalog">WWWW</td>
<td>With century</td>
<td class="Dyalog">WWWW</td>
<td class="Dyalog">2019</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">day of <ins>y</ins>ear</td>
<td class="Dyalog">y</td>
<td>1 to 3 digit numeric</td>
<td class="Dyalog">y</td>
<td class="Dyalog">63</td>
</tr>
<tr>
<td class="Dyalog">yy</td>
<td>3 character numeric</td>
<td class="Dyalog">yy<br/>_y</td>
<td class="Dyalog">063<br/>63</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">
<ins>O</ins>rdinal indicator<br/>for day of month</td>
<td class="Dyalog">O</td>
<td>Short</td>
<td class="Dyalog">O<br/>o</td>
<td class="Dyalog">T<br/>t</td>
</tr>
<tr>
<td class="Dyalog">OO</td>
<td>Full</td>
<td class="Dyalog">OO<br/>Oo<br/>oo</td>
<td class="Dyalog">TH<br/>Th<br/>th</td>
</tr>
<tr>
<td rowspan="2" style="vertical-align: middle;">hours in <ins>t</ins>welve<br/>hour clock</td>
<td class="Dyalog">t</td>
<td>1 or 2 digit numeric</td>
<td class="Dyalog">t</td>
<td class="Dyalog">8</td>
</tr>
<tr>
<td class="Dyalog">tt</td>
<td>2 character numeric</td>
<td class="Dyalog">tt<br/>_t</td>
<td class="Dyalog">08<br/></td>
</tr>
<tr>
<td rowspan="2">AM/<ins>P</ins>M Indicator</td>
<td class="Dyalog">P</td>
<td>Short</td>
<td class="Dyalog">P<br/>p</td>
<td class="Dyalog">A<br/>a</td>
</tr>
<tr>
<td class="Dyalog">PP</td>
<td>Full</td>
<td class="Dyalog">PP<br/>pp</td>
<td class="Dyalog">AM<br/>am<br/></td>
</tr>
</tbody>
</table>
<p>The upper and lower case letters, underscore <code>_</code>, dollar <code>$</code> and percent <code>%</code> are all reserved for introducing format
sequences, even though not all currently have meaning. The remaining, non-reserved, characters are copied to the result
unchanged, thus the format string <code>hh:mm</code> represents the hour of the day and minute of the hour with a colon between (
e.g. <code>12:00</code>). All characters or sequences of characters may be delimited by <code>"</code> or <code>'</code> at any point in the format
string to prevent them being interpreted as a part of a format sequence, and, within these delimiters, two adjacent
delimiter characters produce a single delimiter.</p>
<p>Note: The characters <code>AaaaBbbb</code> consist of two adjacent format sequences because there is a sequence of As followed by a
sequence of Bs. The characters <code>AaaaAaaa</code> consist of one format sequence because it only contains <code>A</code>s. It can be
separated into two format sequences by insering an empty <code>"</code> or <code>'</code> - delimited string, e.g. <code>Aaaa""Aaaa</code>.</p>
<h5>Language</h5>
<p>Unless overridden, English is used for text substitutions. Different languages may be selected using the Language
variant option and/or the use of language specifiers within the format pattern. In either case, the language is
specified as either a two letter ISO 639-1 language code in lower case (e.g. en) or as a five character language with an
additional underscore and two character region in upper case (e.g. en_GB). Within the format pattern, <strong>xx</strong> (where xx
is the two or five character specifier) will switch the language of the subsequent generated text. Dictionaries for the
following languages are built in:</p>
<table>
<thead>
<tr>
<th>ISO 639-1</th>
<th>Language</th>
</tr>
</thead>
<tbody>
<tr>
<td>da</td>
<td>Danish</td>
</tr>
<tr>
<td>de</td>
<td>German</td>
</tr>
<tr>
<td>el</td>
<td>Greek</td>
</tr>
<tr>
<td>en</td>
<td>English</td>
</tr>
<tr>
<td>es</td>
<td>Spanish</td>
</tr>
<tr>
<td>fi</td>
<td>Finnish</td>
</tr>
<tr>
<td>fr</td>
<td>French</td>
</tr>
<tr>
<td>it</td>
<td>Italian</td>
</tr>
<tr>
<td>ja</td>
<td>Japanese</td>
</tr>
<tr>
<td>nb</td>
<td>Norwegian Bokmål</td>
</tr>
<tr>
<td>nl</td>
<td>Dutch</td>
</tr>
<tr>
<td>nn</td>
<td>Norwegian Nynorsk</td>
</tr>
<tr>
<td>pl</td>
<td>Polish</td>
</tr>
<tr>
<td>pt</td>
<td>Portuguese</td>
</tr>
<tr>
<td>ru</td>
<td>Russian</td>
</tr>
<tr>
<td>sv</td>
<td>Swedish</td>
</tr>
<tr>
<td>zh</td>
<td>Chinese</td>
</tr>
</tbody>
</table>
<h5>Predefined patterns</h5>
<p>Any pattern can contain (in part or in whole) a named predefined pattern, which allows common date and time formats to
be specified in abbreviated form. Predefined patterns may be specified on a per-language basis, allowing patterns to be
tailored for the selected language.</p>
<p>Predefined patterns are included in a pattern using <code>%</code> delimiters. For example, <code>%ISO%</code> includes the named predefined
pattern <code>ISO</code>.</p>
<p>The following global predefined pattern is built in:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Substitutes as</th>
</tr>
</thead>
<tbody>
<tr>
<td>ISO</td>
<td>YYYY-MM-DD"T"hh:mm:ss</td>
</tr>
</tbody>
</table>
<p>This list may be expanded in future.</p>
<p>Additional predefined patterns may be defined using the Dictionary variant option. Predefined patterns must not contain
references to other predefined patterns.</p>
<h5>Variant Options</h5>
<p>The Language variant option specifies the language used for formatting datetimes and defaults to <code>'en'</code> (English). The
option value is a two or five character name (e.g. <code>'en'</code> or <code>'en_GB'</code>). The setting may be explicitly overridden in the
format pattern.</p>
<p>The Dictionary variant option specifies a namespace which contains additional or replacement names for the months etc.
and/or predefined patterns, for languages and language regions.</p>
<p>At the top level there may be zero or more sub-namespaces with two or five character names, according to the rules for
language and language regions. Within each of these, month names etc. are defined as follows:</p>
<table>
<thead>
<tr>
<th>Named item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MonthNames</td>
<td>A twelve-element vector of character vectors containing the full names corresponding to January to December, respectively.</td>
</tr>
<tr>
<td>ShortMonthNames</td>
<td>A twelve-element vector of character vectors containing the short names corresponding to Jan to Dec, respectively.</td>
</tr>
<tr>
<td>WeekdayNames</td>
<td>A seven-element vector of character vectors containing the full names corresponding to Monday to Sunday, respectively.</td>
</tr>
<tr>
<td>ShortWeekdayNames</td>
<td>A seven-element vector of character vectors containing the full names corresponding to Mon to Sun, respectively.</td>
</tr>
<tr>
<td>MorningAfternoon</td>
<td>A two-element vector of character vectors containing the names corresponding to AM and PM, respectively.</td>
</tr>
<tr>
<td>Ordinals</td>
<td>A character vector containing the one ordinal used for all numbers in the range 1 to 31, or a thirty one-element vector of character vectors containing the ordinals for 1 to 31, respectively.</td>
</tr>
</tbody>
</table>
<p>Also at the top level of the dictionary namespace there may be a sub-namespace named Patterns and within this further
sub-namespaces named <code>Global</code> and/or two or five character language names, containing definitions of predefined
patterns. Predefined patterns are defined in the same way as the formatting pattern except that they may not contain
references to other predefined patterns.</p>
<p>If the namespace contains a definition which is supplied built into the interpreter, it replaces the built-in one.</p>
<p>If a dictionary is incomplete (e.g. is missing one of the expected named items, or one of the named items contains too
few elements) an error is signalled only if the missing content would actually be needed.</p>
<h5>Example dictionary</h5>
<p>The following creates a dictionary defined by the namespace <code>dict</code> using JSON text. See the formatting examples below
for uses of this dictionary.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dict_json</span>
<span class="kt">{</span>
<span class="w">  </span><span class="s2">"Patterns"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">    </span><span class="s2">"Global"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">      </span><span class="s2">"ISOweek"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"YYYY-'W'ww"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"DateCompact"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"D-MMM-YYYY"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"DateVerbose"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"'the date is' DD _mm YYYY"</span>
<span class="w">    </span><span class="kt">}</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"fr"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">      </span><span class="s2">"DateVerbose"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"'la date est le' DD mmm YYYY"</span>
<span class="w">    </span><span class="kt">}</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"en_US"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">      </span><span class="s2">"DateVerbose"</span><span class="bp">:</span><span class="w"> </span><span class="s2">"'the date is' Mmm DD, YYYY"</span>
<span class="w">    </span><span class="kt">}</span>
<span class="w">  </span><span class="kt">}</span><span class="o">,</span>
<span class="w">  </span><span class="s2">"en_US"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">    </span><span class="s2">"ShortMonthNames"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"Jan."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Feb."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mar."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Apr."</span><span class="o">,</span><span class="w"> </span><span class="s2">"May"</span><span class="o">,</span><span class="w"> </span><span class="s2">"June"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"July"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Aug."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Sept."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Oct."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Nov."</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dec."</span>
<span class="w">    </span><span class="sr">]</span>
<span class="w">  </span><span class="kt">}</span><span class="o">,</span>
<span class="w">  </span><span class="s2">"cy"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">    </span><span class="s2">"MonthNames"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"Ionawr"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Chwefror"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mawrth"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Ebrill"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mai"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mehefin"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"Gorffennaf"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Awst"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Medi"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Hydref"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Tachwedd"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Rhagfyr"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"ShortMonthNames"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"Ion"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Chw"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Maw"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Ebr"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mai"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Meh"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"Gor"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Awst"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Medi"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Hyd"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Tach"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Rhag"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"WeekdayNames"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"Dydd Sul"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dydd Llun"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dydd Mawrth"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dydd Mercher"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"Dydd Iau"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dydd Gwener"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Dydd Sadwrn"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"ShortWeekdayNames"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"Sul"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Llun"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Maw"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Mer"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Iau"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Gwen"</span><span class="o">,</span><span class="w"> </span><span class="s2">"Sad"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"MorningAfternoon"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"yb"</span><span class="o">,</span><span class="w"> </span><span class="s2">"yh"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"Ordinals"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">      </span><span class="s2">"af"</span><span class="o">,</span><span class="w"> </span><span class="s2">"il"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ydd"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ydd"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"eg"</span><span class="o">,</span><span class="w"> </span><span class="s2">"fed"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span><span class="o">,</span><span class="w"> </span><span class="s2">"ain"</span>
<span class="w">    </span><span class="sr">]</span>
<span class="w">  </span><span class="kt">}</span>
<span class="kt">}</span>
<span class="w">      </span><span class="nv">dict</span><span class="kd">←</span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">dict_json</span>
</code></pre></div>
<h5>Note the following</h5>
<ul>
<li>In the example, the predefined pattern <code>ISOweek</code> is defined globally and is not redefined. It therefore has the same
  value for all languages. Similarly, <code>DateCompact</code> has the same value for all languages, but although the definition is
  global, it contains the pattern <code>MMM</code> and this will be substituted with the month name in the selected language.</li>
<li>The predefined patterns <code>DateVerbose</code> is defined globally, and redefined for languages <code>fr</code> and <code>en_US</code>. The global
  definition will be used when any language other than <code>fr</code> and <code>en_US</code> is selected. If there was not global definition
  it would only be defined for <code>fr</code>, all regional variations of <code>fr</code>, and <code>en_US</code>.</li>
<li>There is no explicit definition of patterns or names for language region <code>en_GB</code>. If this language is selected the
  definitions for <code>en</code> will be used.</li>
<li>There is an explicit definition for <code>ShortMonthNames</code> for language region <code>en_US</code>. If this language is selected the
  definition of <code>ShortMonthNames</code> is as defined, and as for <code>en</code> for other names. As <code>en</code> is not defined in the
  dictionary, the built-in defaults are used.</li>
</ul>
<p>In the following examples:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tn</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="m">2019</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">56</span>
<span class="w">      </span><span class="nv">tn</span>
<span class="m">43508.42843</span>
</code></pre></div>
<h5>English</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'Dddd, DDoo Mmmm YYYY; hh:mm:ss'</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">Wednesday</span><span class="o">,</span><span class="w"> </span><span class="m">13</span><span class="nv">th</span><span class="w"> </span><span class="nv">February</span><span class="w"> </span><span class="m">2019</span><span class="sr">;</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span>

<span class="w">      </span><span class="s1">'__en__Dddd, DDoo Mmmm YYYY; hh:mm:ss'</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">Wednesday</span><span class="o">,</span><span class="w"> </span><span class="m">13</span><span class="nv">th</span><span class="w"> </span><span class="nv">February</span><span class="w"> </span><span class="m">2019</span><span class="sr">;</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span>

<span class="w">      </span><span class="s1">'"ISO date": %ISO%'</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">ISO</span><span class="w"> </span><span class="nv">date</span><span class="bp">:</span><span class="w"> </span><span class="m">2019</span><span class="o">-</span><span class="m">02</span><span class="o">-</span><span class="m">13</span><span class="nv">T10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span>

<span class="w">      </span><span class="s1">'%DateVerbose%'</span><span class="p">(</span><span class="m">1200</span><span class="na">⌶⍠</span><span class="s1">'Dictionary'</span><span class="nv">dict</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="nv">Feb</span><span class="w"> </span><span class="m">2019</span>
</code></pre></div>
<h5>English (US)</h5>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">fmt</span><span class="kd">←</span><span class="s1">'%DateVerbose%'</span>
<span class="w">     </span><span class="nv">fmt</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶⍠</span><span class="p">(</span><span class="s1">'Dictionary'</span><span class="nv">dict</span><span class="p">)(</span><span class="s1">'Language'</span><span class="w"> </span><span class="s1">'en_US'</span><span class="p">))</span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">Feb</span><span class="na">.</span><span class="w"> </span><span class="m">13</span><span class="o">,</span><span class="w"> </span><span class="m">2019</span><span class="w"> </span>
</code></pre></div>
<h5>Danish</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'__da__Dddd, DDoo mmmm YYYY; hh:mm:ss'</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">Onsdag</span><span class="o">,</span><span class="w"> </span><span class="m">13</span><span class="na">.</span><span class="w"> </span><span class="nv">februar</span><span class="w"> </span><span class="m">2019</span><span class="sr">;</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span>

<span class="w">      </span><span class="nv">fmt</span><span class="kd">←</span><span class="s1">'Dddd, DDoo mmmm YYYY; hh:mm:ss'</span>
<span class="w">      </span><span class="nv">fmt</span><span class="p">(</span><span class="m">1200</span><span class="na">⌶⍠</span><span class="s1">'Language'</span><span class="w"> </span><span class="s1">'da'</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">Onsdag</span><span class="o">,</span><span class="w"> </span><span class="m">13</span><span class="na">.</span><span class="w"> </span><span class="nv">februar</span><span class="w"> </span><span class="m">2019</span><span class="sr">;</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span><span class="w"> </span>
</code></pre></div>
<h5>Welsh (using the dictionary defined above)</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">fmt</span><span class="kd">←</span><span class="s1">'__cy__Dddd, DDoo mmmm YYYY; hh:mm:ss'</span><span class="w"> </span>
<span class="w">      </span><span class="nv">fmt</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶⍠</span><span class="s1">'Dictionary'</span><span class="w"> </span><span class="nv">dict</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">Dydd</span><span class="w"> </span><span class="nv">Mercher</span><span class="o">,</span><span class="w"> </span><span class="m">13</span><span class="nv">eg</span><span class="w"> </span><span class="nv">chwefror</span><span class="w"> </span><span class="m">2019</span><span class="sr">;</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">16</span><span class="bp">:</span><span class="m">56</span><span class="w"> </span>


<span class="w">      </span><span class="s1">'__cy__%DateVerbose%'</span><span class="w"> </span><span class="p">(</span><span class="m">1200</span><span class="na">⌶⍠</span><span class="s1">'Dictionary'</span><span class="w"> </span><span class="nv">dict</span><span class="p">)</span><span class="w"> </span><span class="nv">tn</span>
<span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="nv">Chw</span><span class="w"> </span><span class="m">2019</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-set-aplcore-parameters">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-set-aplcore-parameters-header">Set aplcore Parameters</h3><div class="command">R←1302⌶Y</div></div>
<p>Sets the aplcore parameters <strong>AplCoreName</strong> and/or <strong>MaxAplCores</strong> for the current process.</p>
<p><code>Y</code> may be:</p>
<ul>
<li>a simple character vector that specifies AplCoreName</li>
<li>a simple integer that specifies MaxAplCores </li>
<li>a 2-element nested vector containing new values for AplCoreName and MaxAplCores in that order</li>
<li>an empty vector</li>
</ul>
<p><code>R</code> is a 2-element nested vector containing the old values.</p>
<p>If <code>Y</code> is empty, the function simply returns the values of these parameters without changing them.</p>
<p>See also: <i>AplCoreName</i> and <i>MaxAplCores.</i></p>
</article>
<article id="the-i-beam-operator-hash-array">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-hash-array-header">Hash Array</h3><div class="command">R←{X}1500⌶Y</div></div>
<p>This function creates a hashed array, returns an unhashed copy of an array or reports the state of hashing of an array.</p>
<p><code>Y</code> may be any array.</p>
<p>If <code>X</code> is omitted, the result <code>R</code> is a copy of <code>Y</code> that has been invisibly marked as hashed. <code>R</code> behaves the same as <code>Y</code> in all respects. The only difference is that dyadic <code>⍳</code> and related functions are expected to run faster when applied to a hashed array. The <em>hash</em> will be created the first time the array is used as an argument to <code>⍳</code> or other set functions. The <em>hashed</em> property is preserved across assignments and argument passing, but in general is not preserved by any primitive functions.</p>
<p>If <code>X</code> is 1, the result <code>R</code> returns an indication of whether <code>Y</code> has been marked for hashing or whether the hash has been created:</p>
<table>
<thead>
<tr>
<th><code>R</code></th>
<th>State of <code>Y</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td><code>Y</code> has not been marked for hashing</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>Y</code> has been marked for hashing, but the hash tables has not yet been created</td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>Y</code> has a hash table</td>
</tr>
</tbody>
</table>
<p>If <code>X</code> is 2, the result <code>R</code> is the unhashed form of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="m">1500</span><span class="na">⌶</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">    </span><span class="c1">⍝ R is marked for hashing</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1500</span><span class="na">⌶</span><span class="p">)</span><span class="nv">R</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">S</span><span class="kd">←</span><span class="nv">R</span><span class="w">             </span><span class="c1">⍝ S is marked for hashing</span>
<span class="w">      </span><span class="kt">{</span><span class="bp">⍵</span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="kt">}</span><span class="nv">R</span><span class="w">      </span><span class="c1">⍝ R is now hashed</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1500</span><span class="na">⌶</span><span class="p">)</span><span class="nv">R</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">U</span><span class="kd">←</span><span class="p">(</span><span class="o">⍴</span><span class="nv">R</span><span class="p">)</span><span class="o">⍴</span><span class="nv">R</span><span class="w">        </span><span class="c1">⍝ U is not hashed</span>
<span class="w">      </span><span class="nv">U</span><span class="kd">←</span><span class="o">⊃⊂</span><span class="nv">R</span><span class="w">           </span><span class="c1">⍝   ditto</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="m">1500</span><span class="na">⌶</span><span class="p">)</span><span class="nv">U</span>
<span class="m">0</span>
</code></pre></div>
<p>If <code>R</code> is a hashed array then certain forms of modified assignment will preserve and efficiently update the hash table:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">R</span><span class="o">,</span><span class="kd">←</span><span class="nv">Y</span><span class="w">    </span><span class="c1">⍝ only for scalar or vector R</span>
<span class="w">      </span><span class="nv">R</span><span class="o">⍪</span><span class="kd">←</span><span class="nv">Y</span>
<span class="w">      </span><span class="nv">R</span><span class="o">↓</span><span class="na">⍨</span><span class="kd">←</span><span class="nv">Y</span><span class="w">   </span><span class="c1">⍝ only for negative singleton Y</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="m">1500</span><span class="na">⌶</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ R is hashed</span>

<span class="w">      </span><span class="nv">R</span><span class="o">,</span><span class="kd">←</span><span class="m">5</span><span class="w">    </span><span class="c1">⍝ ,← preserves and updates</span>
<span class="w">              </span><span class="c1">⍝ the hash table</span>
<span class="w">      </span><span class="nv">R</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="nv">R</span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nv">R</span><span class="o">↓</span><span class="na">⍨</span><span class="kd">←</span><span class="m">¯2</span><span class="w">  </span><span class="c1">⍝ ↓⍨← preserves and updates</span>
<span class="w">              </span><span class="c1">⍝ the hash table</span>
<span class="w">      </span><span class="nv">R</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="nv">R</span><span class="o">⍳</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<p>The <em>hashed</em> property survives <code>)SAVE</code>/<code>)LOAD</code> and <code>)SAVE</code>/<code>)COPY</code>. It does not currently survive writing to a component file and reading back again.</p>
</article>
<article id="the-i-beam-operator-memory-manager-statistics">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-memory-manager-statistics-header">Memory Manager Statistics</h3><div class="command">R←{X}(2000⌶)Y</div></div>
<p>This function returns information about the state of the workspace and provides a means to reset certain statistics and to control workspace allocation. This I-Beam is provided for performance tuning and is VERY LIKELY to change in the next release. See also <i>Workspace Management</i>.</p>
<p><code>Y</code> is a simple integer scalar or vector containing values listed in the table below.</p>
<p>If <code>X</code> is omitted, the result <code>R</code> is an array with the same structure as <code>Y</code>, but with values in <code>Y</code> replaced by the following statistics.  For any value in <code>Y</code> outside those listed below, the result is undefined.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Workspace available (a "quick" <code>⎕WA</code> ).</td>
</tr>
<tr>
<td>1</td>
<td>Workspace used.</td>
</tr>
<tr>
<td>2</td>
<td>Number of compactions since the workspace was loaded.</td>
</tr>
<tr>
<td>3</td>
<td>Number of garbage collections that found garbage.</td>
</tr>
<tr>
<td>4</td>
<td>Current number of garbage pockets in the workspace.</td>
</tr>
<tr>
<td>9</td>
<td>Current number of free pockets in the workspace.</td>
</tr>
<tr>
<td>10</td>
<td>Current number of used pockets in the workspace.</td>
</tr>
<tr>
<td>12</td>
<td>Sediment size.</td>
</tr>
<tr>
<td>13</td>
<td>Current workspace allocation, i.e. the amount of memory that is actually being used.</td>
</tr>
<tr>
<td>14</td>
<td>Workspace allocation high-water mark, i.e. the maximum amount of memory that has been allocated since the workspace was loaded or since this count was reset.</td>
</tr>
<tr>
<td>15</td>
<td>Limit on minimum workspace allocation.</td>
</tr>
<tr>
<td>16</td>
<td>Limit on maximum workspace allocation.</td>
</tr>
<tr>
<td>19</td>
<td>The number of calls to <code>⎕WA</code> or <code>2002⌶</code> since the last time <code>2000⌶</code> was called, or when the process started.</td>
</tr>
<tr>
<td>20</td>
<td>The requested size of the <code>WS Full Buffer</code> , i.e. the amount of workspace requested for handling <code>WS FULL</code> errors.</td>
</tr>
<tr>
<td>21</td>
<td>The actual size of the <code>WS Full Buffer</code> .</td>
</tr>
<tr>
<td>22</td>
<td>The number of <code>WS FULL</code> handlers that are currently running.</td>
</tr>
<tr>
<td>23</td>
<td>The total number of <code>WS FULL</code> errors that have occurred.</td>
</tr>
<tr>
<td>24</td>
<td>The total number of <code>WS FULL</code> errors that have been trapped.</td>
</tr>
</tbody>
</table>
<p>Note: While all other operations are relatively fast, the operation to count the number of garbage pockets (4) may take a noticeable amount of time, depending upon the size and state of the workspace.</p>
<p>See also <a class="internal-link" href="#the-i-beam-operator-specify-workspace-available">Section 3.2.24</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2000</span><span class="na">⌶</span><span class="m">0</span>
<span class="m">55414796</span>
<span class="w">      </span><span class="m">2000</span><span class="na">⌶</span><span class="m">0</span><span class="o">,⍳</span><span class="m">16</span><span class="w">   </span><span class="c1">⍝ with MAXWS=95G</span>
<span class="m">1.02004292E11</span><span class="w"> </span><span class="m">1181312</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">78</span><span class="w"> </span><span class="m">13280</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">1180800</span><span class="w"> </span><span class="m">1595016496</span><span class="w"> </span><span class="m">1595042464</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1.020054733E11</span>
</code></pre></div>
<p>If <code>X</code> is specified, it must be either a simple integer scalar, or a vector of the same length as <code>Y</code>, and the result <code>R</code> is <code>⍬</code>. In this case, the value in <code>Y</code> specifies the item to be set and <code>X</code> specifies its new value according to the table below.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>0 resets the compaction count; no other values allowed.</td>
</tr>
<tr>
<td>3</td>
<td>0 resets the count of garbage collections that found garbage; no other values allowed.</td>
</tr>
<tr>
<td>14</td>
<td>0 resets the workspace allocation high-water mark; no other values allowed. This should be called following a call to <code>⎕WA</code> (which compacts the workspace and returns unused memory to the operating system).</td>
</tr>
<tr>
<td>15</td>
<td>Sets the minimum workspace allocation to the corresponding value in <code>X</code> ; must be between 0 and the current workspace allocation.</td>
</tr>
<tr>
<td>16</td>
<td>Sets the maximum workspace allocation to the corresponding value in <code>X</code> ; 0 implies <strong>MAXWS</strong> otherwise must be between the current workspace allocation and <strong>MAXWS</strong> .</td>
</tr>
<tr>
<td>19</td>
<td>0 resets the compaction count; no other values allowed.</td>
</tr>
<tr>
<td>20</td>
<td>Sets the requested size of the <code>WS Full Buffer</code> to the value specified by <code>X</code> . The actual space allocated may be less than that requested.</td>
</tr>
</tbody>
</table>
<h5>Notes</h5>
<ul>
<li>The workspace allocation high-water mark indicates a minimum value for <strong>MAXWS</strong>.</li>
<li>Limiting the maximum workspace allocation can be used to prevent code that reserves as much workspace as it can from skewing the peak usage result.</li>
<li>Limiting the minimum workspace allocation can avoid repeatedly committing and releasing memory to the Operating System when memory usage is fluctuating.</li>
</ul>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2000</span><span class="na">⌶</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">6</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">33216252</span>
<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Reset compaction count</span>

<span class="w">      </span><span class="m">2000</span><span class="na">⌶</span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="m">30000000</span><span class="w"> </span><span class="m">40000000</span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="c1">⍝ Restrict min/max ws</span>

<span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">30000000</span><span class="w"> </span><span class="m">40000000</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">15</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="c1">⍝ Reset min/max ws</span>

<span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">15</span><span class="w"> </span><span class="m">16</span>
<span class="m">0</span><span class="w"> </span><span class="m">65536000</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Current, peak WS allocation</span>
<span class="m">4072532</span><span class="w"> </span><span class="m">4072532</span>

<span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="m">10e6</span><span class="o">⍴</span><span class="s1">'x'</span><span class="w"> </span><span class="c1">⍝ Increase WS allocation</span>

<span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Current, peak WS allocation</span>
<span class="m">15108580</span><span class="w"> </span><span class="m">15108580</span>

<span class="w">      </span><span class="nf">⎕ex</span><span class="w"> </span><span class="s1">'a'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kt">{}</span><span class="nf">⎕wa</span><span class="w"> </span><span class="c1">⍝ Decrease current WS allocation</span>

<span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Current, peak WS allocation</span>
<span class="m">1962856</span><span class="w"> </span><span class="m">15108580</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Reset High-water mark</span>

<span class="w">      </span><span class="p">(</span><span class="m">2000</span><span class="na">⌶</span><span class="p">)</span><span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="c1">⍝ Current, peak WS allocation</span>
<span class="m">1962856</span><span class="w"> </span><span class="m">1962856</span>
</code></pre></div></p>
<h5>WS Full Handling</h5>
<p>Potentially, a <code>WS FULL</code> error represents a terminal condition that would prevent a program from continuing because the process has, quite literally, run out of memory.</p>
<p>To alleviate the problem,. Dyalog reserves a special <em>WS Full Buffer</em> for handling <code>WS FULL</code> errors. The default size of this buffer is <code>(1MB)⌊(0.01×⎕WA)</code>.</p>
<p>In simple terms, when a <code>WS FULL</code> error occurs that triggers a handler, i.e. an expression executed via <code>⎕TRAP</code> or <code>:Trap</code>,  the reserved workspace in the <em>WS Full Buffer</em> is released to provide additional memory space for that expression to execute. When the expression terminates, the system removes the memory that it had previously released, reserving it once more for another potential <code>WS FULL</code>.</p>
<p>Note that until a <code>WS FULL</code> handler starts, the memory allocated to the <em>WS Full Buffer</em> is unavailable and inaccessible for any other purpose, thereby reducing the amount of active workspace available (<code>⎕WA</code>).</p>
<p>Further considerations are:</p>
<ul>
<li>Multiple <code>WS FULL</code> handlers can run concurrently as a result of muti-threading or nesting (when a <code>WS FULL</code> handler itself generates a <code>WS FULL</code> error).</li>
<li>When the <code>WS Full Buffer</code> is restored when the handler (more accurately, the last handler) terminates, or when a saved workspace is re-loaded, there may be insufficient memory available. In these circumstances, the system allocates a reduced amount, without reporting an error. However, the system will later try to reclaim more (up to the desired amount), if more workspace has become free. The desired and actual sizes of the <code>WS Full Buffer</code> are reported by <code>(2000⌶)20</code> and <code>(2000⌶)21</code> respectively.</li>
<li>When a <code>WS FULL</code> handler is activated and the <code>WS Full Buffer</code> is freed, <code>(2000⌶)21</code> will return 0 until the handler terminates.</li>
</ul>
</article>
<article id="the-i-beam-operator-specify-workspace-available">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-specify-workspace-available-header">Specify Workspace Available</h3><div class="command">R←2002⌶Y</div></div>
<p>This function is identical to the system function <code>⎕WA</code> except that it provides the means to specify the amount of memory <span class="footnote">The term memory here means virtual memory which includes memory mapped to disk.</span>  that is <em>committed</em> for the workspace rather than have it assigned by the internal algorithm. Committed memory is memory that is allocated to a specific process and thereby reduces the amount of memory available for other applications. See also <i>Workspace Management</i>.</p>
<p>Like <code>⎕WA</code>,  <code>2002⌶</code> compacts the workspace so that it occupies the minimum number of bytes possible, adds an <em>extra amount</em>, and then de-commits all the remaining memory that it is currently using, allowing it to be allocated by the operating system for use by other applications.</p>
<p>The argument <code>Y</code> is an integer which specifies the size, in bytes, of this <em>extra amount</em>.</p>
<p>The purpose of the <em>extra amount</em> is to reduce the likelihood that APL will immediately have to ask the operating system to re-commit memory that it has just de-committed, something that would have a deleterious effect on performance. At the same time, if the <em>extra amount</em> were to be excessively large, APL could  starve other applications of memory which itself could reduce the effective performance of the system. Whereas <code>⎕WA</code> calculates the size of the <em>extra amount</em> using a simple internal algorithm,  <code>2002⌶</code> uses a value specified by the programmer.</p>
<p><code>R</code> is an integer which reports the size in bytes of the memory committed  for the workspace, and is the sum of the minimum amount required  by the workspace itself and the argument <code>Y</code>.</p>
<p>If the size of the committed workspace would be smaller than the minimum value (specified by <code>2000⌶</code>) or larger than the maximum value (which defaults to <code>MAXWS</code>), a <code>DOMAIN ERROR</code> is signalled.</p>
<p>See also <a class="internal-link" href="#the-i-beam-operator-memory-manager-statistics">Section 3.2.23</a>.</p>
<p>Note that this function does not change the size of the <em>extra amount</em> that will be applied subsequently by <code>⎕WA</code> or by an automatic compaction.</p>
</article>
<article id="the-i-beam-operator-disable-global-triggers">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-disable-global-triggers-header">Disable Global Triggers</h3><div class="command">R←2007⌶Y</div></div>
<p>This function is used to temporarily disable and re-enable <i>Global Triggers</i>.</p>
<p><code>Y</code> is Boolean.</p>
<p><code>R</code> is the previous value setting.</p>
<table>
<thead>
<tr>
<th><code>Y</code></th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Enable Global Triggers.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Disable Global Triggers.</td>
</tr>
</tbody>
</table>
<p>This function has effect only in the current thread and its effect is immediate. If there are pending triggers when triggers are disabled, those pending will be queued and fired when triggers are re-enabled.</p>
</article>
<article id="the-i-beam-operator-update-datatable">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-update-datatable-header">Update DataTable</h3><div class="command">R←{X}2010⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>This function performs a <em>block update</em> of an instance of the ADO.NET object System.Data.DataTable. This object may only be updated using an explicit row-wise loop, which is slow at the APL level. <code>2010⌶</code> implements an <em>internal</em> row-wise loop which is much faster on large arrays. Furthermore, the function handles NULL values and the conversion of internal APL data to the appropriate .NET datatype in a more efficient manner than can be otherwise achieved. These 3 factors together mean that the function provides a significant improvement in performance compared to calling the row-wise programming interface directly at the APL level.</p>
<p><code>Y</code> is a 2, 3 or 4-item array containing:</p>
<ol>
<li>A reference to an instance of System.Data.DataTable.</li>
<li>A matrix with the same number of columns as the table specified by <code>Y[1]</code>.</li>
<li>An optional vector which specifies for each column in the DataTable the values in <code>Y[2]</code>which should be converted to a System.DBNull.</li>
<li>An optional vector which specifies the indices (in zero origin) of the rows of the DataTable which are to be updated. If omitted, the matrix specified by <code>Y[2]</code> will be <em>appended</em> to the DataTable.</li>
</ol>
<p>The optional argument <code>X</code> is  Boolean vector, where a 1 indicates that the corresponding column of  <code>Y[2]</code> is a string from which the new values  should be converted according to that column's data type.</p>
<p class="example">Example</p>
<p>Shown firstly for comparison is the type of code that is required to update a DataTable by looping:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span><span class="w"> </span><span class="s1">'System.Data,system.data.dll'</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DataTable</span>
<span class="w">      </span><span class="nv">ac</span><span class="kd">←</span><span class="kt">{</span><span class="nv">dt</span><span class="na">.</span><span class="nv">Columns</span><span class="na">.</span><span class="nv">Add</span><span class="w"> </span><span class="bp">⍺</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="s1">'S1'</span><span class="w"> </span><span class="s1">'S2'</span><span class="w"> </span><span class="s1">'I1'</span><span class="w"> </span><span class="s1">'D1'</span><span class="w"> </span><span class="nv">ac</span><span class="na">¨</span><span class="nv">String</span><span class="w"> </span><span class="nv">String</span><span class="w"> </span><span class="nv">Int32</span><span class="w"> </span><span class="nv">DateTime</span>
<span class="w"> </span><span class="nv">S1</span><span class="w">  </span><span class="nv">S2</span><span class="w">  </span><span class="nv">I1</span><span class="w">  </span><span class="nv">D1</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">NextYear</span><span class="kd">←</span><span class="nv">DateTime</span><span class="na">.</span><span class="nv">Now</span><span class="o">+</span><span class="kt">{</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">TimeSpan</span><span class="w"> </span><span class="p">(</span><span class="m">4</span><span class="o">↑</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="na">¨</span><span class="o">⍳</span><span class="nv">n</span><span class="kd">←</span><span class="m">365</span>
<span class="w">      </span><span class="nv">data</span><span class="kd">←</span><span class="p">(</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="nv">n</span><span class="o">⍴</span><span class="s1">'odd'</span><span class="w"> </span><span class="s1">'even'</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="m">10</span><span class="o">|⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,⍪</span><span class="nv">NextYear</span>
<span class="w">      </span><span class="m">¯2</span><span class="w"> </span><span class="m">4</span><span class="o">↑</span><span class="nv">data</span>
<span class="w"> </span><span class="m">364</span><span class="w">  </span><span class="nv">even</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">18</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2011</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">03</span><span class="bp">:</span><span class="m">29</span><span class="w"> </span>
<span class="w"> </span><span class="m">365</span><span class="w">  </span><span class="nv">odd</span><span class="w">   </span><span class="m">5</span><span class="w">  </span><span class="m">19</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2011</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">03</span><span class="bp">:</span><span class="m">29</span><span class="w"> </span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">ar</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="nv">row</span><span class="kd">←</span><span class="nv">dt</span><span class="na">.</span><span class="nv">NewRow</span><span class="p">)</span><span class="na">.</span><span class="nv">ItemArray</span><span class="kd">←</span><span class="bp">⍵</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">dt</span><span class="na">.</span><span class="nv">Rows</span><span class="na">.</span><span class="nv">Add</span><span class="w"> </span><span class="nv">row</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕ai</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">ar</span><span class="na">¨</span><span class="o">↓</span><span class="nv">data</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕ai</span><span class="p">)</span><span class="o">-</span><span class="nv">t</span>
<span class="m">449</span>
</code></pre></div></p>
<p>This result shows that this code can only insert roughly 800 rows per second (<code>3⊃⎕AI</code> returns elapsed time in milliseconds), because of the need to loop on each row and perform a noticeable amount of work each time around the loop.</p>
<p><code>2010⌶</code> does all the looping in compiled code:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dt</span><span class="na">.</span><span class="nv">Rows</span><span class="na">.</span><span class="nv">Clear</span><span class="w"> </span><span class="c1">⍝ Delete the rows inserted above</span>
<span class="w">      </span><span class="nv">SetDT</span><span class="kd">←</span><span class="m">2010</span><span class="na">⌶</span>
<span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="p">)</span><span class="o">-</span><span class="nv">t</span>
<span class="m">4</span>
</code></pre></div></p>
<p>So in this case, using <code>2010⌶</code> achieves over 90,000 rows per second.</p>
<h5>DateTime columns</h5>
<p>Creating large arrays of DateTime objects in the workspace takes additional resources, and unless the data is already stored that way, it is not necessary to convert it to .NET objects. Data in <code>⎕TS</code> format (7-element integer vector) or in a suitable character format may be used directly. The former is a specific Dyalog optimisation; the latter a feature of .NET Version 4.0. The following examples use numeric and character data for the dates:
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nv">months</span><span class="kd">←</span><span class="m">12</span><span class="o">⍴</span><span class="m">31</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">months</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="sr">]</span><span class="kd">←</span><span class="m">29</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span>
<span class="w">   </span><span class="nv">n</span><span class="kd">←</span><span class="o">⍴</span><span class="nv">NextYear</span><span class="kd">←</span><span class="m">7</span><span class="o">↑</span><span class="na">¨</span><span class="o">⊃,</span><span class="na">/</span><span class="p">(</span><span class="o">⍳</span><span class="m">12</span><span class="p">)</span><span class="kt">{</span><span class="p">(</span><span class="o">⊂</span><span class="m">2016</span><span class="o">,</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="na">¨</span><span class="o">⍳</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="nv">months</span>
<span class="w">   </span><span class="nv">data</span><span class="kd">←</span><span class="p">(</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="nv">n</span><span class="o">⍴</span><span class="s1">'odd'</span><span class="w"> </span><span class="s1">'even'</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="m">10</span><span class="o">|⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,⍪</span><span class="nv">NextYear</span>
<span class="w">   </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">data</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nv">n</span><span class="kd">←</span><span class="o">⍴</span><span class="nv">NextYear</span><span class="kd">←</span><span class="o">⊃,</span><span class="na">/</span><span class="p">(</span><span class="o">⍳</span><span class="m">12</span><span class="p">)</span><span class="kt">{</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'2016/'</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">'/'</span><span class="p">)</span><span class="o">,</span><span class="na">∘</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="nv">months</span>
<span class="w">   </span><span class="nv">data</span><span class="kd">←</span><span class="p">(</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="nv">n</span><span class="o">⍴</span><span class="s1">'odd'</span><span class="w"> </span><span class="s1">'even'</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="m">10</span><span class="o">|⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,⍪</span><span class="nv">NextYear</span>
<span class="w">   </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">data</span>
</code></pre></div></p>
<h5>Using Strings</h5>
<p>In circumstances where .NET fails to accept character data automatically, it is possible to force conversion from character format to the corresponding .NET type.</p>
<p>If specified, the optional left argument <code>X</code> instructs the system to pass the corresponding columns of data to the Parse() method of the data type for those columns prior to performing the update.</p>
<p>In the following example, the left argument is not strictly necessary using .NET Version 4.0, but  forces parsing for the data in the 4th column:
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nv">months</span><span class="kd">←</span><span class="m">12</span><span class="o">⍴</span><span class="m">31</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">months</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="sr">]</span><span class="kd">←</span><span class="m">29</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">30</span>
<span class="w">   </span><span class="nv">n</span><span class="kd">←</span><span class="o">⍴</span><span class="nv">NextYear</span><span class="kd">←</span><span class="o">⊃,</span><span class="na">/</span><span class="p">(</span><span class="o">⍳</span><span class="m">12</span><span class="p">)</span><span class="kt">{</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'2016/'</span><span class="o">,</span><span class="p">(</span><span class="o">⍕</span><span class="bp">⍺</span><span class="p">)</span><span class="o">,</span><span class="s1">'/'</span><span class="p">)</span><span class="o">,</span><span class="na">∘</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="nv">months</span>
<span class="w">   </span><span class="nv">data</span><span class="kd">←</span><span class="p">(</span><span class="o">⍕</span><span class="na">¨</span><span class="o">⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="nv">n</span><span class="o">⍴</span><span class="s1">'odd'</span><span class="w"> </span><span class="s1">'even'</span><span class="p">)</span><span class="o">,</span><span class="p">(</span><span class="m">10</span><span class="o">|⍳</span><span class="nv">n</span><span class="p">)</span><span class="o">,⍪</span><span class="nv">NextYear</span>
<span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">data</span>
</code></pre></div></p>
<h5>Handling Nulls</h5>
<p>If applicable, <code>Y[3]</code>  is a vector with as many elements as the DataTable has columns, indicating the value that should be converted to <code>System.DBNull</code> as data is written. For example, using the same DataTable as above:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">t</span>
<span class="w"> </span><span class="o">&lt;</span><span class="nv">null</span><span class="o">&gt;</span><span class="w">  </span><span class="nv">odd</span><span class="w">    </span><span class="m">1</span><span class="w">  </span><span class="m">21</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2010</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">50</span><span class="bp">:</span><span class="m">19</span><span class="w"> </span>
<span class="w"> </span><span class="nv">two</span><span class="w">     </span><span class="nv">even</span><span class="w">   </span><span class="m">2</span><span class="w">  </span><span class="m">22</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2010</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">50</span><span class="bp">:</span><span class="m">19</span><span class="w"> </span>
<span class="w"> </span><span class="nv">three</span><span class="w">   </span><span class="nv">odd</span><span class="w">   </span><span class="m">99</span><span class="w">  </span><span class="m">23</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2010</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">50</span><span class="bp">:</span><span class="m">19</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">dt</span><span class="na">.</span><span class="nv">Rows</span><span class="na">.</span><span class="nv">Clear</span><span class="w"> </span><span class="c1">⍝ Clear the contents of dt</span>
<span class="w">      </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="p">(</span><span class="s1">'&lt;null&gt;'</span><span class="w"> </span><span class="s1">'even'</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="s1">''</span><span class="p">)</span>
</code></pre></div></p>
<p>Above, we have declared that the string <code>'&lt;null&gt;'</code> should be considered to be a null value in the first column, <code>'even'</code> in the second column, and the integer <code>99</code> in the third.</p>
<h5>Updating Selected Rows</h5>
<p>Sometimes, you may have read a very large number of rows from a DataTable, but only want to update a single row, or a very small number of rows. Row indices can be provided as the fourth element of the argument to <code>2010⌶</code>. If you are not using <code>Y[3]</code> explicitly, you can just use an empty vector as a placeholder. Continuing from the example above, we could replace the first row in our DataTable using:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">SetDT</span><span class="kd">←</span><span class="m">2010</span><span class="na">⌶</span>
<span class="w">      </span><span class="nv">SetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'one'</span><span class="w"> </span><span class="s1">'odd'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">DateTime</span><span class="na">.</span><span class="nv">Now</span><span class="p">)</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Note</h5>
<ul>
<li><code>Y[2]</code> must be provided as a matrix, even if you only want to update a single row, </li>
<li>
<p><code>Y[4]</code> specifies row indices using zero origin (the first row has number 0).</p>
</li>
<li>
<p><code>Y[2]</code> must be provided as a matrix, even if you only want to update a single row, </p>
</li>
<li><code>Y[4]</code> specifies row indices using zero origin (the first row has number 0).</li>
</ul>
<h6>Warning</h6>
<p>If you are experimenting with writing to a DataTable, note that you should call <code>dt.Rows.Clear</code> each time to clear the current contents of the table. Otherwise you will end up with a very large number of rows after a while.</p>
</article>
<article id="the-i-beam-operator-read-datatable">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-read-datatable-header">Read DataTable</h3><div class="command">R←{X}2011⌶Y</div></div>
<p>This function performs a <em>block read</em> from an instance of the ADO.NET object System.Data.DataTable. This object may only be read using an explicit row-wise loop, which is slow at the APL level. <code>2011⌶</code> implements an <em>internal</em> row-wise loop which is much faster on large arrays. Furthermore, the function handles NULL values and the conversion of .NET datatypes to the appropriate internal APL form in a more efficient manner than can otherwise be achieved. These 3 factors together mean that the function provides a significant improvement in performance compared to calling the row-wise programming interface directly at the APL level.</p>
<p><code>Y</code> is a scalar or a 1 or 2-item array containing:</p>
<ol>
<li>A reference to an instance of System.Data.DataTable.</li>
<li>An optional vector which specifies the values to which a System.DBNull should be mapped in the corresponding columns of the result </li>
</ol>
<p>The result <code>R</code> depends upon the value of the  Variant option Invert. This the primary option with a default value of 0.</p>
<h5>Invert Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The result <code>R</code> is a matrix with the same shape as the DataTable referenced by <code>⊃Y</code> .</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The result <code>R</code> is vector whose length is the same as the number of columns in the DataTable referenced by <code>⊃Y</code> .</td>
</tr>
</tbody>
</table>
<p>The optional left argument <code>X</code> is a numeric vector with the same length as the number of columns in the result in the DataTable referenced by <code>⊃Y</code>:</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Specifies that the corresponding column of the result  should be converted to a string using the <code>ToString</code> method of the data type of column in question.</td>
</tr>
<tr>
<td>2</td>
<td>Specifies that numbers of type System.Int64 in the corresponding column of the result  should be converted to DECFs (NOT into .NET objects, which is the default)</td>
</tr>
<tr>
<td>4</td>
<td>Specifies that if the type of the corresponding column is System.String the entire column should be returned as a character matrix rather than a vector of character vectors. Any nulls will be replaced with a row of spaces. This applies only when <strong>Invert</strong> is 1.</td>
</tr>
<tr>
<td>5</td>
<td>Combines 1 and 4.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">''</span><span class="w"> </span><span class="s1">'System.Data,system.data.dll'</span>

<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DataTable</span>

<span class="w">      </span><span class="nv">add_col</span><span class="kd">←</span><span class="kt">{</span><span class="nv">col</span><span class="kd">←</span><span class="bp">⍺</span><span class="na">.</span><span class="nv">Columns</span><span class="na">.</span><span class="nv">Add</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">col</span><span class="na">.</span><span class="nv">DataType</span><span class="kd">←</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">dt</span><span class="w"> </span><span class="nv">add_col</span><span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">String</span><span class="w">          </span>
<span class="w">      </span><span class="nv">dt</span><span class="w"> </span><span class="nv">add_col</span><span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">Int32</span><span class="w">            </span>
<span class="w">      </span><span class="nv">dt</span><span class="w"> </span><span class="nv">add_col</span><span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">Int64</span><span class="w">             </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">in</span><span class="kd">←</span><span class="o">⍉↑</span><span class="p">(</span><span class="s1">'One'</span><span class="w"> </span><span class="s1">'Two'</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">6401</span><span class="w"> </span><span class="m">6402</span><span class="p">)</span>
<span class="w">      </span><span class="m">2010</span><span class="na">⌶</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="nv">in</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">out</span><span class="kd">←</span><span class="m">2011</span><span class="na">⌶</span><span class="w"> </span><span class="nv">dt</span><span class="w">                              </span>
<span class="err">┌───┬─┬──────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="w"> </span><span class="m">6401</span><span class="w"> </span><span class="err">│</span>
<span class="err">├───┼─┼──────┤</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="m">6402</span><span class="w"> </span><span class="err">│</span>
<span class="err">└───┴─┴──────┘</span>
<span class="w">      </span><span class="nv">out</span><span class="sr">[;</span><span class="m">3</span><span class="sr">]</span><span class="na">.</span><span class="nv">GetType</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">Int64</span><span class="w">  </span><span class="nv">System</span><span class="na">.</span><span class="nv">Int64</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="p">(</span><span class="m">2011</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="c1">⍝ Convert 3rd col to DECF</span>
<span class="err">┌───┬─┬────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">6401</span><span class="err">│</span>
<span class="err">├───┼─┼────┤</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">6402</span><span class="err">│</span>
<span class="err">└───┴─┴────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">(</span><span class="m">2011</span><span class="na">⌶</span><span class="p">)</span><span class="nv">dt</span><span class="w"> </span><span class="c1">⍝ Convert all values to text</span>
<span class="err">┌───┬─┬────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">6401</span><span class="err">│</span>
<span class="err">├───┼─┼────┤</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">6402</span><span class="err">│</span>
<span class="err">└───┴─┴────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">((</span><span class="m">2011</span><span class="na">⌶</span><span class="p">)</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Invert'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="nv">dt</span>
<span class="err">┌─────────┬───┬────────────┐</span>
<span class="err">│┌───┬───┐│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="m">6401</span><span class="w">  </span><span class="m">6402</span><span class="w"> </span><span class="err">│</span>
<span class="err">││</span><span class="nv">One</span><span class="err">│</span><span class="nv">Two</span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="w">            </span><span class="err">│</span>
<span class="err">│└───┴───┘│</span><span class="w">   </span><span class="err">│</span><span class="w">            </span><span class="err">│</span>
<span class="err">└─────────┴───┴────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">((</span><span class="m">2011</span><span class="na">⌶</span><span class="p">)</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Invert'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="nv">dt</span>
<span class="err">┌───┬───┬────────────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="w"> </span><span class="m">6401</span><span class="w">  </span><span class="m">6402</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">            </span><span class="err">│</span>
<span class="err">└───┴───┴────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">5</span><span class="p">((</span><span class="m">2011</span><span class="na">⌶</span><span class="p">)</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Invert'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="nv">dt</span><span class="w"> </span><span class="c1">⍝ Convert to cmats</span>
<span class="err">┌───┬─┬────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">6401</span><span class="err">│</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">6402</span><span class="err">│</span>
<span class="err">└───┴─┴────┘</span>
</code></pre></div></p>
<h5>Handling Nulls</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2010</span><span class="na">⌶</span><span class="nv">dt</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="nf">⎕NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">⍝ Add a row of nulls</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">out</span><span class="kd">←</span><span class="m">2011</span><span class="na">⌶</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span>
<span class="err">┌───┬──┬──────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">6401</span><span class="w"> </span><span class="err">│</span>
<span class="err">├───┼──┼──────┤</span>
<span class="err">│</span><span class="nv">Two</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">6402</span><span class="w"> </span><span class="err">│</span>
<span class="err">├───┼──┼──────┤</span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">      </span><span class="err">│</span>
<span class="err">└───┴──┴──────┘</span>
<span class="w">      </span><span class="nv">out</span><span class="sr">[</span><span class="m">3</span><span class="sr">;]</span><span class="na">.</span><span class="nv">GetType</span>
<span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">DBNull</span><span class="w">  </span><span class="nv">System</span><span class="na">.</span><span class="nv">DBNull</span><span class="w">  </span><span class="nv">System</span><span class="na">.</span><span class="nv">DBNull</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2011</span><span class="na">⌶</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="p">(</span><span class="s1">'this is null'</span><span class="w"> </span><span class="s1">'this too'</span><span class="w"> </span><span class="s1">'and this'</span><span class="p">)</span>
<span class="err">┌────────────┬────────┬────────┐</span>
<span class="err">│</span><span class="nv">One</span><span class="w">         </span><span class="err">│</span><span class="m">1</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="m">6401</span><span class="w">   </span><span class="err">│</span>
<span class="err">├────────────┼────────┼────────┤</span>
<span class="err">│</span><span class="nv">Two</span><span class="w">         </span><span class="err">│</span><span class="m">2</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="m">6402</span><span class="w">   </span><span class="err">│</span>
<span class="err">├────────────┼────────┼────────┤</span>
<span class="err">│</span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">null</span><span class="err">│</span><span class="nv">this</span><span class="w"> </span><span class="nv">too</span><span class="err">│</span><span class="nv">and</span><span class="w"> </span><span class="nv">this</span><span class="err">│</span>
<span class="err">└────────────┴────────┴────────┘</span>
</code></pre></div></p>
<h5>Performance Considerations</h5>
<p>First for comparison is shown the type of code that is required to read a DataTable by looping:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">data1</span><span class="kd">←</span><span class="o">↑</span><span class="p">(</span><span class="o">⌷</span><span class="nv">dt</span><span class="na">.</span><span class="nv">Rows</span><span class="p">)</span><span class="na">.</span><span class="nv">ItemArray</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="p">)</span><span class="o">-</span><span class="nv">t</span>
<span class="m">191</span>
</code></pre></div></p>
<p>The above expression turns the <code>dt.Rows</code> collection into an array using <code>⌷</code>, and <em>mixes</em> the ItemArray properties to produce the result. Although here there is no explicit loop, involved, there is an implicit loop required to reference each item of the collection in succession. This operation performs at about 200 rows/sec.</p>
<p><code>2011⌶</code> does the looping entirely in compiled code and is significantly faster:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">GetDT</span><span class="kd">←</span><span class="m">2011</span><span class="na">⌶</span>
<span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">data2</span><span class="kd">←</span><span class="nv">GetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="p">)</span><span class="o">-</span><span class="nv">t</span>
<span class="m">25</span>
</code></pre></div></p>
<p>In the first case, <code>2011⌶</code> created 365 instances of System.DateTime objects in the workspace. If we are willing to receive the timestamps in the form of strings, we can read the data almost an order of magnitude faster:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">data3</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">GetDT</span><span class="w"> </span><span class="nv">dt</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕AI</span><span class="p">)</span><span class="o">-</span><span class="nv">t</span>
<span class="m">3</span>
</code></pre></div></p>
<p>The left argument to <code>2011⌶</code> allows you to flag columns which should be returned as the <code>ToString()</code> value of each object in the flagged columns. Although the resulting array looks identical to the original, it is not: The fourth column contains character vectors:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯2</span><span class="w"> </span><span class="m">4</span><span class="o">↑</span><span class="nv">data3</span>
<span class="w"> </span><span class="m">364</span><span class="w">  </span><span class="nv">even</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">18</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2011</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">03</span><span class="bp">:</span><span class="m">29</span>
<span class="w"> </span><span class="m">365</span><span class="w">  </span><span class="nv">odd</span><span class="w">   </span><span class="m">5</span><span class="w">  </span><span class="m">19</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">2011</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">03</span><span class="bp">:</span><span class="m">29</span>
</code></pre></div></p>
<p>Depending on your application, you may need to process the text in the fourth column in some way – but the overall performance will probably still be very much better than it would be if DateTime objects were used.</p>
</article>
<article id="the-i-beam-operator-remove-data-binding">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-remove-data-binding-header">Remove Data Binding</h3><div class="command">R←2014⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>This function disassociates a data-bound variable from its data binding source.</p>
<p><code>Y</code> is any array.</p>
<p>If <code>Y</code> or an element of <code>Y</code> is a character vector that contains the name of a data-bound variable, that variable is dissociated from its data binding source.</p>
<p>The result <code>R</code> is always 1.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2014</span><span class="na">⌶</span><span class="s1">'txtSource'</span>
<span class="m">1</span><span class="w">    </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-create-data-binding-source">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-create-data-binding-source-header">Create Data Binding Source</h3><div class="command">R←{X}2015⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>Creates an object that may be used as a data source for WPF data binding. <span class="footnote">It is beyond the scope of this document to fully explain the concepts of WPF data binding. See Microsoft Developer Network, Data Binding Overview.</span></p>
<p>This function connects a <em>Binding Target</em> to a <em>Binding Source</em>. In WPF a Binding Target is a particular property of a user interface object; for example, the Text property of a TextBox object. A Binding Source is  a <em>Path</em> to a value in a data object (which may contain other values). The value of the Binding Source determines the value of the Binding Target. If two-way binding is in place, a change in a user-interface component causes the bound data value to change accordingly. In the example of the TextBox, the value in the Binding Source changes as the user types into the TextBox.</p>
<p><code>Y</code> is a character vector containing one of the following:</p>
<ul>
<li>the name of a variable</li>
<li>the name of a  namespace containing one or more variables</li>
<li>the name of a variable containing a vector of refs to namespaces, each of which contains one or more variables.</li>
</ul>
<p>If the name specified by <code>Y</code> doesn't exist or represents neither a variable nor a namespace,  the function reports <code>DOMAIN ERROR</code>. Currently, no further validation of the structure and contents of <code>Y</code> is performed, but nothing other than the examples described herein is supported.</p>
<p>If the optional left argument <code>X</code> is given and <code>Y</code> is a variable other than a ref, <code>X</code> specifies the binding type for that variable. If <code>Y</code> specifies one or more namespaces, <code>X</code> specifies the names and binding types of each of the variables which are to be bound, contained in the namespaces specified by  <code>Y</code>.</p>
<p>The structure of <code>X</code> depends upon the structure of <code>Y</code> and is discussed later in this topic.</p>
<p>If <code>X</code> is omitted, all of the variables specified by <code>Y</code> are bound with default binding types.</p>
<p>Here the term <em>bind variable</em> refers to any variable specified by <code>X</code> and <code>Y</code> to be bound, and the term <em>binding type</em> means the .NET data type to which the value of the bind variable is converted before it is passed to the .NET interface.</p>
<p><code>2015⌶</code> creates a Binding Source object <code>R</code>. This is a .NET object which contains <em>Path</em>(s) to one or more bind variables. This object may then be assigned to a property of a WPF object or passed a s as a parameter to a WPF method that requires a Binding Source.</p>
<h5>Bind Variables and Bind Types</h5>
<p>A bind variable should be of rank 2 or less. Higher rank arrays are not supported.</p>
<p>If not specified by <code>X</code>, the  binding type of a bind variable is derived from its content  at the time <code>2015⌶</code> is executed. The binding type is then stored with the variable in the workspace. There is no mechanism to change a variable's binding type without erasing the variable and re-executing <code>2015⌶</code>. If you change the type or rank of a bind  variable while it is bound (for example from a variable to a namespace), the behaviour of the system is unpredictable.</p>
<p>The default binding type is derived as follow:</p>
<p>If the bind variable is a simple scalar number the default binding type is System.Object. At the point when the value of the variable is passed to the .NET interface this will be cast to a numeric type such as  System.Int16, System.Int32, System.Int64, or System.Double, depending upon the internal representation of the data. The .NET property to which it is bound will typically only accept a single Type (for example System.Int32), so to avoid unpredictable behaviour,  it is recommended that the left argument <code>X</code> be used to specify the binding type for numeric data.</p>
<p>If the bind variable is a character scalar or vector, the default binding type is also System.Object, but at the point  when the value of the variable is passed to the .NET interface it will always be passed as System.String, which is suitable for binding to any property that accepts a System.String, such as the Text property of a TextBox.</p>
<p>If the bind variable is a vector other than a simple character vector, such as a vector of character vectors,  a simple numeric vector, or a vector of .NET objects, the bind type will be a collection. This is suitable for binding to any property that  represents a collection (list) of items, for example the ItemsSource property of a ListBox.</p>
<p>If the bind variable is a matrix, the default binding type is System.Object.</p>
<p>All the examples that follow assume <code>⎕USING←'System'</code>.</p>
<h5>Binding Single Variables</h5>
<p>In this case, <code>Y</code> specifies the name of a variable which is one of the following:</p>
<ul>
<li>character vector (or scalar)</li>
<li>numeric scalar</li>
<li>scalar .NET object (not currently supported)</li>
<li>vector of character vectors</li>
<li>numeric vector</li>
<li>vector of .NET objects</li>
<li>matrix</li>
</ul>
<p><code>X</code> (if specified) defines the binding type for the bind variable named by <code>Y</code> and is a single .NET Type.</p>
<p>Note that in the following examples, the reason for expunging the name first is discussed in the section headed Rebinding a Variable.</p>
<h5>Binding a Character Vector</h5>
<p>This example illustrates how to bind a variable which contains a character vector.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'txtSource'</span>
<span class="w">      </span><span class="nv">txtSource</span><span class="kd">←</span><span class="nv">HELLO</span><span class="w"> </span><span class="nv">WORLD</span><span class="s1">'</span>
<span class="s1">      bindsource←2015⌶'</span><span class="nv">txtSource</span><span class="err">'</span>
</code></pre></div></p>
<p>In this example, the binding type of the variable <code>txtSource</code> will be System.String, suitable for binding to any property that accepts a String, such as the Text property of a <code>TextBox</code>.</p>
<h5>Binding a Numeric Scalar</h5>
<p>This example illustrates how to bind a variable which contains a numeric scalar value.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'sizeSource'</span>
<span class="w">      </span><span class="nv">sizeSource</span><span class="kd">←</span><span class="m">36</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">Int32</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'sizeSource'</span>
</code></pre></div></p>
<p>In this example, the left argument <code>Int32</code> specifies that the binding type for the variable sizeSource is to be System.Int32. This means that whenever APL passes the value of <code>sizeSource</code> to the control, it will first be cast to an Int32. This makes it suitable, for example, for binding to the FontSize property of a TextBox.</p>
<p>A number of controls have a Value property which must be expressed as a System.Double. The next example shows how to create a Binding Source for such a variable.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'valSource'</span>
<span class="w">      </span><span class="nv">valSource</span><span class="kd">←</span><span class="m">42</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">Double</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'valSource'</span>
</code></pre></div></p>
<h6>Binding a  Scalar .NET Object</h6>
<p>This is currently not supported.</p>
<h5>Binding a Vector of Character Vectors</h5>
<p>WPF data binding provides the means to bind controls that display lists of items, such as the ListBox, ListView, and TreeView controls, to collections of data. These controls are all based upon the ItemsControl class. To bind an ItemsControl to a collection object, you use its ItemsSource property.</p>
<p>This example illustrates how to bind a variable which contains a vector of character vectors.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'itemsSource'</span>
<span class="w">      </span><span class="nv">itemsSource</span><span class="kd">←</span><span class="s1">'beer'</span><span class="w"> </span><span class="s1">'wine'</span><span class="w"> </span><span class="s1">'water'</span>
<span class="w">      </span><span class="nv">bindsource</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'itemsSource'</span>
</code></pre></div></p>
<p>In this example, the binding type of the variable <code>itemsSource</code> will be System.Collection, suitable for binding to the ItemSource property of an ItemsControl.</p>
<h6>Binding a Numeric Vector</h6>
<p>By default, a numeric vector is bound in the same way as a vector of character vectors, i.e. as a System.Collection, suitable for binding to the ItemSource property of an ItemsControl.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'yearsSource'</span>
<span class="w">      </span><span class="nv">yearsSource</span><span class="kd">←</span><span class="m">2000</span><span class="o">+⍳</span><span class="m">20</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'yearsSource'</span>
</code></pre></div></p>
<p>In principle, a numeric vector may alternatively be bound to a WPF property that requires a 1-dimensional numeric array, by specifying the appropriate data type (e.g. Int32, Double) for the array as the left argument. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'arraySource'</span>
<span class="w">      </span><span class="nv">arraySource</span><span class="kd">←</span><span class="m">42</span><span class="w"> </span><span class="m">24</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">Int32</span><span class="w"> </span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'arraySource'</span>
</code></pre></div></p>
<h6>Binding a Vector of .NET Objects</h6>
<p>A vector of .NET objects is bound in the same way as a vector of character vectors, i.e. as a System.Collection, suitable for binding to the ItemSource property of an ItemsControl.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="nv">Easter</span>
<span class="m">2015</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">12</span>
<span class="m">2016</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">1</span>
<span class="m">2017</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">16</span>
<span class="m">2018</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="m">8</span>
<span class="m">2019</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">28</span>
<span class="m">2020</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">19</span>
<span class="m">2021</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">2</span>
<span class="m">2022</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">24</span>
<span class="m">2023</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">16</span>
<span class="m">2024</span><span class="w"> </span><span class="m">5</span><span class="w">  </span><span class="m">5</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="kt">{</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="nv">Easter</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'dt'</span>
</code></pre></div></p>
<p>Note that, as a specific optimisation for binding DateTime data, it is not necessary to create <code>DateTime</code> objects in the workspace. Instead, the data may be represented by 7-element integer vectors (<code>⎕TS</code> format) or character strings that can be parsed by the DateTime.Parse(String) method.  However, in both cases it is necessary to explicitly specify the binding type to force the data to be converted to <code>DateTime</code>, as illustrated by the following examples:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">TSEaster</span><span class="kd">←</span><span class="m">7</span><span class="o">↑</span><span class="na">¨</span><span class="nv">Easter</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'TSEaster'</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">CharEaster</span><span class="kd">←</span><span class="s1">'2015/4/12'</span><span class="w"> </span><span class="s1">'2016/5/1'</span><span class="w"> </span><span class="s1">'2017/4/16'</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'CharEaster'</span>
</code></pre></div></p>
<h6>Binding a Matrix</h6>
<p>If the bind variable is a matrix, it is bound in a similar way to a vector of namespaces and is discussed below.</p>
<h6>Rebinding a Variable</h6>
<p>As mentioned earlier, when a variable is bound its binding type is stored with it in the workspace. If you subsequently attempt to rebind the variable there is no mechanism in place to alter the binding type. If the current binding type (whether specified by the left argument <code>X</code>, or by being the default) differs from the saved one, the function will generate a <code>DOMAIN ERROR</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">num</span><span class="kd">←</span><span class="m">42</span>
<span class="w">      </span><span class="nv">bs</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'num'</span>

<span class="w">      </span><span class="nv">bs</span><span class="kd">←</span><span class="s1">'Int32'</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'num'</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">You</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">redefine</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">binding</span><span class="w"> </span><span class="nv">types</span>
<span class="w">      </span><span class="nv">bs</span><span class="kd">←</span><span class="s1">'Int32'</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'num'</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div></p>
<p>In this example, perhaps the programmer realised after binding <code>num</code> (with a default binding type of System.Object) that the binding type should really be System.Int32, and simply was trying to correct the error. To avoid this problem, it is recommended that you expunge the name before using it.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="w"> </span><span class="s1">'num'</span>
<span class="w">      </span><span class="nv">num</span><span class="kd">←</span><span class="m">42</span>
<span class="w">      </span><span class="nv">bs</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'num'</span><span class="c1">⍝ (default) binding type System.Object</span>

<span class="w">      </span><span class="nf">⎕EX</span><span class="w"> </span><span class="s1">'num'</span>
<span class="w">      </span><span class="nv">num</span><span class="kd">←</span><span class="m">42</span>
<span class="w">      </span><span class="nv">bs</span><span class="kd">←</span><span class="nv">Int32</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'num'</span>
</code></pre></div></p>
<h6>Binding A Namespace</h6>
<p>In this case, <code>Y</code> specifies the name of a namespace that contains one or more variables. By default, each variable is bound using its default binding type as described above. Objects other than variables are ignored.</p>
<p>If it is required to specify the binding type of any of the variables, or if certain variables are to be excluded, the left argument is a 2-column matrix. The first column contains the names of the variables to be bound, and the second column their binding types.</p>
<p class="example">Example</p>
<p>The following code snippet binds a namespace containing two variables named <code>txtSource</code> and <code>sizeSource</code>. In this case, the name of each variable may be specified as the Path for a WPF property that requires a String or an Int32. For example, if bindSource were assigned to the DataContext property of a TextBox, its Text property could be bound to <code>txtSource</code> and its FontSize property to <code>sizeSource</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">src</span><span class="kd">←</span><span class="nf">⎕NS</span><span class="s1">''</span>
<span class="w">      </span><span class="nv">src</span><span class="na">.</span><span class="nv">txtSource</span><span class="kd">←</span><span class="s1">'Hello World'</span>
<span class="w">      </span><span class="nv">src</span><span class="na">.</span><span class="nv">sizeSource</span><span class="kd">←</span><span class="m">36</span>
<span class="w">      </span><span class="nv">options</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="s1">'txtSource'</span><span class="nv">String</span><span class="s1">'sizeSource'</span><span class="nv">Int32</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">options</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'src'</span>
</code></pre></div></p>
<h6>Binding a Vector of Namespaces</h6>
<p>In this case, <code>Y</code> specifies the name of a variable that contains a vector of refs to namespaces. In this case, the result <code>R</code> is of type Dyalog.Data.DataBoundCollectionHandler which is suitable for binding to a WPF property that requires  an IEnumerable implementation, such as the  ItemsSource property of the DataGrid.</p>
<p>Each namespace in <code>Y</code> represents one of a collection of  instances of an object, which exports a particular set of properties for binding purposes. For example, <code>Y</code> could specify a wine database where each namespace represents a different wine, and each namespace contains the same set of variables that contain the name, price (and so forth) of each wine.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">winelist</span><span class="kd">←</span><span class="nf">⎕NS</span><span class="na">¨</span><span class="p">(</span><span class="o">⍴</span><span class="nv">Wines</span><span class="p">)</span><span class="o">⍴⊂</span><span class="s1">''</span>
<span class="w"> </span><span class="nv">winelist</span><span class="na">.</span><span class="nv">Name</span><span class="kd">←</span><span class="nv">Wines</span>
<span class="w"> </span><span class="nv">winelist</span><span class="na">.</span><span class="nv">Price</span><span class="kd">←</span><span class="m">0.01</span><span class="o">×</span><span class="m">10000</span><span class="o">+?</span><span class="p">(</span><span class="o">⍴</span><span class="nv">Wines</span><span class="p">)</span><span class="o">⍴</span><span class="m">10000</span>

<span class="w"> </span><span class="nv">bindSource</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'winelist'</span>
</code></pre></div>
<h6>Binding a Matrix</h6>
<p>Binding a matrix is like binding a vector of namespaces. Each row of <code>Y</code> represents one of a collection of  instances of an object, which exports a particular set of properties for binding purposes. Each column of  <code>Y</code> represents one of these properties.</p>
<p>Every row in the datasource will be of the same type (which might not be the case with an array of namespaces), and so the collection is a collection of specific things. The <em>specific thing</em> is a .NET type that is created dynamically and has a unique name.</p>
<p>Unlike variables in namespaces, the columns of an APL matrix do not have names which can be exported as properties, so this information must be provided in the left argument to <code>(2015⌶)</code> which also specifies their data types. If the left argument is omitted, the default names are <code>Column1</code>, <code>Column2</code>, ... and so forth and the default data type is <code>System.Object</code>.</p>
<p>So if the right argument  of <code>(2015⌶)Y</code> is the name of a matrix, the left argument <code>X</code> is a matrix with as many rows as there are columns in <code>Y</code>. <code>X[;1]</code> contains the names by which each of the columns of <code>Y</code> will be exported as a property, and <code>X[;2]</code> their data types.</p>
<p>Values in the matrix may be scalar numbers, character scalars or vectors, or nested vectors, but each column in the matrix must be uniform.</p>
<p>The result <code>R</code> is a specific type that is created dynamically and assigned a unique name of the form Dyalog.Data.DyalogCollectionNotifyHandler`1[Dyalog.Data.DataBoundRow_nnnnnnnn]. This is suitable for binding to a WPF property that requires  an IEnumerable implementation, such as the  ItemsSource property of the DataGrid.</p>
<p class="example">Example</p>
<p><code>mat</code> is a matrix of numbers and is bound with default property/column names <code>Column1</code>, <code>Column2</code>, ... <code>Column10</code> and the default data type of <code>System.Object</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">mat</span><span class="kd">←</span><span class="o">?</span><span class="m">20</span><span class="w"> </span><span class="m">10</span><span class="o">⍴</span><span class="m">100</span>
<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="m">2015</span><span class="na">⌶</span><span class="s1">'mat'</span>
</code></pre></div>
<p class="example">Example</p>
<p><code>winelist</code> is a matrix whose first column contains a list of wines, and whose second column their prices. The left argument is a matrix. Its first column specifies the property names by which the columns will be exported (<code>'Name'</code> and <code>'Price'</code>) and its second column, their data types (<code>System.Object</code>)
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">winelist</span><span class="kd">←</span><span class="nv">Wines</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="m">0.01</span><span class="o">×</span><span class="m">10000</span><span class="o">+?</span><span class="p">(</span><span class="o">⍴</span><span class="nv">Wines</span><span class="p">)</span><span class="o">⍴</span><span class="m">10000</span>
<span class="w"> </span><span class="nv">info</span><span class="kd">←</span><span class="p">(</span><span class="o">⍪</span><span class="s1">'Name'</span><span class="w"> </span><span class="s1">'Price'</span><span class="p">)</span><span class="o">,⊂</span><span class="nv">Object</span>

<span class="w"> </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">info</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'winelist'</span>
</code></pre></div></p>
<p class="example">Example</p>
<p><code>emp</code> is a 3-column matrix which contains names,  numbers and  addresses. Each address is made up of two character vectors containing street and town
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">emp</span>
<span class="err">┌───────────────────┬──────────────────┬────────────────────┐</span>
<span class="err">│</span><span class="nv">John</span><span class="w"> </span><span class="nv">Smith</span><span class="w">         </span><span class="err">│</span><span class="nv">Mary</span><span class="w"> </span><span class="nv">White</span><span class="w">        </span><span class="err">│</span><span class="nv">T</span><span class="na">.</span><span class="nv">W</span><span class="na">.</span><span class="w"> </span><span class="nv">Penk</span><span class="w">           </span><span class="err">│</span>
<span class="err">├───────────────────┼──────────────────┼────────────────────┤</span>
<span class="err">│</span><span class="m">1</span><span class="w">                  </span><span class="err">│</span><span class="m">2</span><span class="w">                 </span><span class="err">│</span><span class="m">3</span><span class="w">                   </span><span class="err">│</span>
<span class="err">├───────────────────┼──────────────────┼────────────────────┤</span>
<span class="err">│┌─────────┬───────┐│┌──────────┬─────┐│┌──────────┬───────┐│</span>
<span class="err">││</span><span class="m">2</span><span class="w"> </span><span class="nv">East</span><span class="w"> </span><span class="nv">Rd</span><span class="err">│</span><span class="nv">Headley</span><span class="err">│││</span><span class="m">42</span><span class="w"> </span><span class="nv">High</span><span class="w"> </span><span class="nv">St</span><span class="err">│</span><span class="nv">Alton</span><span class="err">│││</span><span class="m">23</span><span class="w"> </span><span class="nv">West</span><span class="w"> </span><span class="nv">St</span><span class="err">│</span><span class="nv">Farnham</span><span class="err">││</span>
<span class="err">│└─────────┴───────┘│└──────────┴─────┘│└──────────┴───────┘│</span>
<span class="err">└───────────────────┴──────────────────┴────────────────────┘</span>
<span class="w">      </span><span class="nv">schema</span>
<span class="err">┌───────┬────────────────────────┐</span>
<span class="err">│</span><span class="nv">Name</span><span class="w">   </span><span class="err">│</span><span class="p">(</span><span class="nv">System</span><span class="na">.</span><span class="nv">Object</span><span class="p">)</span><span class="w">         </span><span class="err">│</span>
<span class="err">├───────┼────────────────────────┤</span>
<span class="err">│</span><span class="nv">Number</span><span class="w"> </span><span class="err">│</span><span class="p">(</span><span class="nv">System</span><span class="na">.</span><span class="nv">Object</span><span class="p">)</span><span class="w">         </span><span class="err">│</span>
<span class="err">├───────┼────────────────────────┤</span>
<span class="err">│</span><span class="nv">Address</span><span class="err">│┌──────┬───────────────┐│</span>
<span class="err">│</span><span class="w">       </span><span class="err">││</span><span class="nv">Street</span><span class="err">│</span><span class="p">(</span><span class="nv">System</span><span class="na">.</span><span class="nv">Object</span><span class="p">)</span><span class="err">││</span>
<span class="err">│</span><span class="w">       </span><span class="err">│├──────┼───────────────┤│</span>
<span class="err">│</span><span class="w">       </span><span class="err">││</span><span class="nv">Town</span><span class="w">  </span><span class="err">│</span><span class="p">(</span><span class="nv">System</span><span class="na">.</span><span class="nv">Object</span><span class="p">)</span><span class="err">││</span>
<span class="err">│</span><span class="w">       </span><span class="err">│└──────┴───────────────┘│</span>
<span class="err">└───────┴────────────────────────┘</span>

<span class="w">      </span><span class="nv">bindSource</span><span class="kd">←</span><span class="nv">schema</span><span class="p">(</span><span class="m">2015</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'emp'</span>
</code></pre></div></p>
<h6>Notification Events</h6>
<p>The object <code>R</code> generates notification events when the value(s) of the Binding Source are updated as the contents of the Binding Target are changed by the user. These events are generated after the data has changed and there is no mechanism to prevent the change from occurring.</p>
<p>There are two types of event; ElementChanged and CellsChanged. The CellsChanged event applies only to a data bound matrix; the ElementChanged event applies to all other types of binding.</p>
<p>The event message  supplied as the right argument to your callback function, is a 2-element vector as follows :</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Object</td>
<td>ref</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>EventArgs</td>
<td>ref</td>
</tr>
</tbody>
</table>
<p>EventArgs is an instance of the internal class <code>Dyalog.Data.ElementChangedEventArgs</code> or <code>Dyalog.Data.CellsChangedEventArgs</code> whose fields are described below:</p>
<p><code>Dyalog.Data.ElementChangedEventArgs</code> fields</p>
<table>
<tbody>
<tr>
<td><code>Indices</code></td>
<td>An indication of which member has changed. Typically this will either be <code>¯1</code> to indicate that the indices are unavailable or a scalar value indicating (origin 0), which element of an array has been modified or added.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td>The name of the variable that has been modified. This is especially useful when the datasource corresponds to a namespace.</td>
</tr>
<tr>
<td><code>Path</code></td>
<td>A path used to locate the variable that has been modified. This is especially useful when the datasource corresponds to a deeply nested namespace, where the value changed is an element of an array inside a namespace which is itself an element of an array within the datasource.</td>
</tr>
</tbody>
</table>
<p><code>Dyalog.Data.CellsChangedEventArgs</code> fields</p>
<table>
<tbody>
<tr>
<td><code>Path</code></td>
<td>Identifies the cell or row that was changed. See below.</td>
</tr>
<tr>
<td><code>SourceName</code></td>
<td>The name of the matrix that was specified as the right argument to <code>2015⌶</code> .</td>
</tr>
<tr>
<td><code>Reason</code></td>
<td>A character vector that describes what in the matrix has changed is <code>'RowDeleted'</code> , <code>'CellChanged'</code> or <code>'RowInserted'</code></td>
</tr>
<tr>
<td><code>Value</code></td>
<td>The new value in the cell or <code>⎕NULL</code></td>
</tr>
</tbody>
</table>
<p>If Reason is <code>'CellChanged'</code>, Path is the row and column number (in origin 0) of the cell that was changed and Value is its new value.</p>
<p>If Reason is <code>'RowDeleted'</code> or <code>'RowInserted'</code>, Path is the number of the row that has been added or removed (in origin 0) and Value is <code>⎕NULL</code>.</p>
</article>
<article id="the-i-beam-operator-create-net-delegate">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-create-net-delegate-header">Create .NET Delegate</h3><div class="command">R←2016⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>.NET methods (and properties) may specify a parameter to be a <em>delegate</em>. A delegate is a place holder for a function, normally with a particular signature and result type, that should be  supplied when the method is called. Sometimes the signature of a .NET method that takes a delegate as a parameter does not provide enough information for Dyalog to determine automatically what type of  delegate is required. <code>2016⌶</code> allows you to specify the type so that Dyalog can perform the necessary conversion(s) at run-time.</p>
<p><code>Y</code> is a 2-element array. The first element is a .NET type that inherits from the abstract .NET Class System.Delegate. The second item is either the name of or the <code>⎕OR</code> of an APL function which is to be invoked via a .NET method or property.</p>
<p>The result <code>R</code> is a ref to an instance of a .NET type specified by the first element of <code>Y</code>, which internally is associated with the function identified by the second element of <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">foo</span><span class="bp">∇</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="p">(</span><span class="nv">ev</span><span class="w"> </span><span class="nv">arg</span><span class="p">)</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="c1">⍝ Callback for .NET method</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">del</span><span class="kd">←</span><span class="m">2016</span><span class="na">⌶</span><span class="w"> </span><span class="nv">EventHandler</span><span class="s1">'foo'</span>
<span class="w">      </span><span class="nv">del</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">EventHandler</span>
</code></pre></div>
<p>Then, when calling a .NET method that requires a Delegate of type System.Eventhandler, but whose signature is imprecise in this respect, the object <code>del</code> should be used instead.</p>
</article>
<article id="the-i-beam-operator-identify-net-type">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-identify-net-type-header">Identify .NET Type</h3><div class="command">R←2017⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>Returns the .NET Type of a named .NET class that is loaded in the current AppDomain. Note that System.Type.GetType requires the fully qualified name, i.e. prefixed by the assembly name, whereas (<code>2017⌶</code>) does not.</p>
<p><code>Y</code> is a character string containing the name of a .NET object. Unless the fully qualified name is given, the namespaces in the current AppDomain are searched in the order they are specified by  <code>⎕USING</code> or <code>:Using</code>.</p>
<p>If the object is identified in the current AppDomain, the result <code>R</code> is its Type. If not, the function generates <code>DOMAIN ERROR</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="m">2017</span><span class="na">⌶</span><span class="s1">'DateTime'</span>
<span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-flush-session-caption">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-flush-session-caption-header">Flush Session Caption</h3><div class="command">R←2022⌶Y</div></div>
<p><strong>Windows only.</strong></p>
<p>Under Windows, the Session Caption displays information such as the name of the current workspace. The contents of the Caption can be modified: see <em>Window Captions</em> in the <em>Installation and Configuration Guide</em> for more details.</p>
<p>However, the Caption is updated only at the six-space prompt; calling <code>⎕LOAD</code> for example from within a function will not result in the Caption being updated at the end of the <code>⎕LOAD</code>.</p>
<p>This I-Beam causes the Session Caption to be updated (flushed) when called. Note that this I-Beam does not alter the contents of the Caption.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2022</span><span class="na">⌶</span><span class="m">0</span><span class="w">    </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-close-all-windows">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-close-all-windows-header">Close All Windows</h3><div class="command">R←2023⌶Y</div></div>
<p>Under Windows the option, <em>Windows -&gt; Close All Windows</em> allows the user to close all open Editor and Tracer Windows, but does not reset the <em>state indicator</em>.</p>
<p>This I-beam mimics this behaviour, thus allowing the user to write code which can close all windows before attempting to save the workspace; with the exception of calling <code>0 ⎕SAVE</code> it is not possible to save a workspace if any editor or tracer windows are open.</p>
<p>Under non-Windows operating systems this is the only mechanism for closing all such windows. This I-beam is effective in RIDE too.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2023</span><span class="na">⌶</span><span class="m">0</span><span class="w">    </span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-set-dyalog-pixel-type">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-set-dyalog-pixel-type-header">Set Dyalog Pixel Type</h3><div class="command">R←2035⌶Y</div></div>
<p><strong>Windows only.</strong></p>
<p>Determines how Coord <code>'Pixel'</code> is interpreted. This is determined initially by the value of the DYALOG_PIXEL_TYPE parameter and, when altered by this function,  applies to all subsequent GUI operations.</p>
<p><code>Y</code> is a character vector that is either <code>'ScaledPixel'</code> or <code>'RealPixel'</code>. Any other value will cause a <code>DOMAIN ERROR</code>.</p>
<p>The result <code>R</code> is the previous value.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2035</span><span class="na">⌶</span><span class="s1">'ScaledPixel'</span>
<span class="nv">RealPixel</span>
<span class="w">      </span><span class="m">2035</span><span class="na">⌶</span><span class="s1">'RealPixel'</span>
<span class="nv">ScaledPixel</span>

<span class="w">      </span><span class="m">2035</span><span class="na">⌶</span><span class="s1">'realpixel'</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="m">2035</span><span class="na">⌶</span><span class="s1">'realpixel'</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-override-com-default-value">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-override-com-default-value-header">Override COM Default Value</h3><div class="command">R←{X}(2041⌶)Y</div></div>
<p><strong>Windows only.</strong></p>
<p>Certain COM objects, for example, VT_BLOBs, cannot be represented in APL or may be in error. By default Dyalog will generate a <code>DOMAIN ERROR</code> in these cases. For COM objects of type <strong>VT_EMPTY</strong> the interpreter by default returns <code>⎕NULL</code>.</p>
<p><code>2041⌶</code> allows the APL programmer to specify what is returned by the interpreter in these cases.</p>
<p><code>Y</code> may be <code>1</code> or <code>2</code>.</p>
<p>If <code>Y</code> is <code>1</code>, then <code>X</code> specifies the value that is returned instead of <code>⎕NULL</code> when the COM object is of type <strong>VT_EMPTY</strong>.</p>
<p>If <code>Y</code> is <code>2</code>, then <code>X</code> specifies the value that is returned when the COM object is in error, or is of a type that cannot be represented in APL.</p>
<p>In both cases, omitting <code>X</code> results in the default behaviour being restored.</p>
<p><code>R</code> is the previous value specified; if there was no previous value then this function will perform its task but generate a <code>VALUE ERROR</code>.</p>
</article>
<article id="the-i-beam-operator-export-to-memory">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-export-to-memory-header">Export To Memory</h3><div class="command">R←2100⌶Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This function exports the current active workspace as an in-memory .NET Assembly.</p>
<p><code>Y</code> may be any array and is ignored.</p>
<p>The result <code>R</code> is 1 if the operation succeeded or 0 if it failed.</p>
</article>
<article id="the-i-beam-operator-close-net-appdomain">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-close-net-appdomain-header">Close .NET AppDomain</h3><div class="command">R←2101⌶Y</div></div>
<p><strong>.NET Framework only</strong></p>
<p>This function closes the current .NET AppDomain.</p>
<p><code>Y</code> may be any array and is ignored.</p>
<p>The result <code>R</code> is 0 if the operation succeeded or a non-zero integer if it failed.</p>
<p>This I-Beam is very likely to be changed in future.</p>
</article>
<article id="the-i-beam-operator-verify-net-interface">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-verify-net-interface-header">Verify .NET Interface</h3><div class="command">R←2250⌶Y</div></div>
<p>This function provides information about the Dyalog interface to .NET. The system attempts to load the Bridge DLL and reports the status of the .NET interface. It can be used to determine whether your .NET-related code can run, and also what sort of .NET support you have. It also means that you can suppress all messages that <code>⎕USING</code> would otherwise generate</p>
<p>The right argument <code>Y</code> is zero:</p>
<p>The result <code>R</code> is a 3-element nested array:</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>R[1]</code></td>
<td>Numeric. ¯1: the interface is not supported 0: the interface is not configured 1: the interface is configured to use .NET 2: the interface is configured to use the .NET Framework</td>
</tr>
<tr>
<td><code>R[2]</code></td>
<td>Boolean 0 or 1. 1 : the Bridge DLL was successfully loaded. 0 : the Bridge DLL failed to load, or was not attempted.</td>
</tr>
<tr>
<td><code>R[3]</code></td>
<td>A character vector containing error messages generated during load.</td>
</tr>
</tbody>
</table>
<h5>Examples (Windows)</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'Dyalog_NETCore'</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2250</span><span class="na">⌶</span><span class="m">0</span>
<span class="err">┌─┬─┬┐</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">1</span><span class="err">││</span>
<span class="err">└─┴─┴┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'Dyalog_NETCore'</span>
<span class="m">1</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2250</span><span class="na">⌶</span><span class="m">0</span>
<span class="err">┌─┬─┬┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">1</span><span class="err">││</span>
<span class="err">└─┴─┴┘</span>
</code></pre></div></p>
<h5>Implementation Note</h5>
<p>The underlying code is run once only and the results cached, so all subsequent calls to <code>2250⌶</code> will return the same result as the first time.</p>
</article>
<article id="the-i-beam-operator-set-workspace-save-options">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-set-workspace-save-options-header">Set Workspace Save Options</h3><div class="command">R←2400⌶Y</div></div>
<p>This function sets a flag in the workspace that determines what happens when it is saved. The flag itself is part of the workspace and is saved with it.</p>
<p>If the flag is set, all Trace, Stop and Monitor settings will be cleared whenever the workspace is saved, whether by <code>)SAVE</code>, <code>⎕SAVE</code> or by <em>File/Save</em> from the Session menubar.</p>
<p><code>Y</code> must be 1 (set the flag) or 0 (clear the flag).</p>
<p>The result <code>R</code> is the previous value of the flag.</p>
<p>This function may be extended in the future and a left-argument may be added.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">2400</span><span class="na">⌶</span><span class="p">)</span><span class="m">1</span>
<span class="m">0</span>
<span class="w">      </span><span class="p">)</span><span class="nv">SAVE</span>
<span class="m">0</span><span class="w"> </span><span class="nv">Trace</span><span class="w"> </span><span class="nv">bits</span><span class="w"> </span><span class="nv">cleared</span><span class="na">.</span>
<span class="m">3</span><span class="w"> </span><span class="nv">Stop</span><span class="w"> </span><span class="nv">bits</span><span class="w"> </span><span class="nv">cleared</span><span class="na">.</span>
<span class="m">0</span><span class="w"> </span><span class="nv">Monitor</span><span class="w"> </span><span class="nv">bits</span><span class="w"> </span><span class="nv">cleared</span><span class="na">.</span>
<span class="nv">temp</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Sat</span><span class="w"> </span><span class="nv">Apr</span><span class="w"> </span><span class="m">05</span><span class="w"> </span><span class="m">17</span><span class="bp">:</span><span class="m">01</span><span class="bp">:</span><span class="m">30</span><span class="w"> </span><span class="m">2014</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-expose-root-properties">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-expose-root-properties-header">Expose Root Properties</h3><div class="command">R←2401⌶Y</div></div>
<p>This function is used to expose or hide Root Properties, Event and Methods.</p>
<p>If <code>Y</code> is 1, Root Properties, Events and Methods are exposed.</p>
<p>If <code>Y</code> is 0, no further Root Properties, Events or Methods are exposed; however any that have already been exposed will remain so.</p>
<p>This functionality is available in Windows versions by selecting or unselecting the <em>Expose Root Properties</em> MenuItem in the <em>Options</em> Menu in the Session. Note that deselecting this MenuItem only affects future references to Root Properties, Events or Methods.</p>
<p>This function is the only mechanism available under non-Windows versions of Dyalog APL; the state of this setting is saved in the workspace, and therefore cannot be controlled by an environment variable.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">#.GetEnvironment'MAXWS'</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="c1">#.GetEnvironment'MAXWS'</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="m">2401</span><span class="na">⌶</span><span class="m">1</span>
<span class="m">0</span>
<span class="w">      </span><span class="c1">#.GetEnvironment'MAXWS'</span>
<span class="m">64</span><span class="nv">M</span>

<span class="w">      </span><span class="m">2401</span><span class="na">⌶</span><span class="m">0</span>
<span class="m">1</span>
<span class="w">      </span><span class="c1">#.GetEnvironment'MAXWS'</span>
<span class="m">64</span><span class="nv">M</span>
<span class="w">      </span><span class="c1">#.GetCommandLine</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="c1">#.GetCommandLine</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-discard-thread-on-exit">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-discard-thread-on-exit-header">Discard Thread on Exit</h3><div class="command">R←2501⌶Y</div></div>
<p>APL threads that Dyalog creates to serve incoming .NET requests are not terminated when their work is done. They persist so that if another call comes in on the same .NET thread the same APL thread can handle it. In effect the thread is <em>parked</em> until it is needed again. If the thread is not required, there is a small performance cost in maintaining it in this state.</p>
<p><code>(2501⌶0)</code>
 must be called from WITHIN one of these threads and tells the interpreter NOT to park the thread on termination, but to discard the thread completely.</p>
</article>
<article id="the-i-beam-operator-discard-parked-threads">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-discard-parked-threads-header">Discard Parked Threads</h3><div class="command">R←2502⌶Y</div></div>
<p>APL threads that Dyalog creates to serve incoming .NET requests are not terminated when their work is done. They persist so that if another call comes in on the same .NET thread the same APL thread can handle it. In effect the thread is <em>parked</em> until it is needed again. If the thread is not required, there is a small performance cost in maintaining it in this state.</p>
<p><code>(2502⌶0)</code>
 removes all parked threads from the workspace.</p>
</article>
<article id="the-i-beam-operator-mark-thread-as-uninterruptible">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-mark-thread-as-uninterruptible-header">Mark Thread as Uninterruptible</h3><div class="command">R←2503⌶Y</div></div>
<p>This function marks the current thread (the thread in which it is called) as uninterruptible, and/or determines whether or not any child threads, subsequently created by the current thread, will be uninterruptible.</p>
<p>The right argument <code>Y</code> is an integer whose value is the sum of the following (bit-wise) values:</p>
<ul>
<li>1 : mark thread as uninterruptible</li>
<li>2 : mark its children as uninterruptible</li>
</ul>
<p>The result <code>R</code> is an integer value that indicates the previous state of the thread.</p>
<p>In many multi-threaded applications a large proportion of the threads are used for communication mechanisms (<code>⎕DQ</code> on TCPSockets, Conga, isolates); but most of the "real work" is done in thread zero.</p>
<p>It is undesirable that a weak interrupt interrupts a seemingly random thread. The mechanism to prevent a thread from being (weak) interrupted allows an application to be configured so that only specific threads would respond to a weak interrupt.</p>
</article>
<article id="the-i-beam-operator-use-separate-thread-for-net">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-use-separate-thread-for-net-header">Use Separate Thread For .NET</h3><div class="command">R←2520⌶Y</div></div>
<p>This function determines the way that .NET calls are executed in APL thread 0.</p>
<p>The right argument <code>Y</code> is a Boolean value:</p>
<ul>
<li>1 : run .NET calls in a separate system thread</li>
<li>0 : run .NET calls in the same system thread</li>
</ul>
<p>The result <code>R</code> is a Boolean value which indicates the previous behaviour.</p>
<p>When an APL <strong>thread</strong> first makes a .NET call, it creates a unique system thread in which that and subsequent .NET calls are made. If a .NET call results in the creation of a message queue, that queue is associated with that same system thread. So each message queue is also unique. This strategy successfully maintains separation between multiple Windows message queues being executed in different APL threads.</p>
<p>By default, the base APL thread (thread 0) runs .NET code in the same system thread as itself. This is a different system thread to that used to run .NET code from other APL threads, so the separation between message queues associated with APL thread 0 and those associated with other APL threads is maintained. However, in certain circumstances, messages generated by .NET objects interfere with APL's internal message processing (and vice-versa), for example when handling exceptions.</p>
<p>For this reason, Dyalog recommends that APL code that creates instances of .NET objects that generate events (such as Windows Presentation Foundation objects) are run in a separate APL thread.</p>
<p>Where this is not possible, <code>2520⌶1</code> may be used to force Dyalog to use a unique system thread for .NET that is associated with APL thread 0. If so,  it is recommended that <code>2520⌶1</code> is called at application start-up time.</p>
</article>
<article id="the-i-beam-operator-continue-autosave">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-continue-autosave-header">Continue Autosave</h3><div class="command">{R}←2704⌶Y</div></div>
<p>This function enables or disables the automatic saving of a <code>CONTINUE</code> workspace when Dyalog exits. By default this is disabled when Dyalog starts and must be explicitly enabled using this function.</p>
<p><code>Y</code> is an integer defined as follows:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Disable the automatic saving of a <code>CONTINUE</code> workspace.</td>
</tr>
<tr>
<td>1</td>
<td>Enable the automatic saving of a <code>CONTINUE</code> workspace. This setting applies only to the current session or until disabled by <code>2704⌶0</code> .</td>
</tr>
</tbody>
</table>
<p>The shy result <code>R</code> is the previous value of this setting.</p>
<p>Circumstances when Dyalog automatically saves a <code>CONTINUE</code> workspace include:</p>
<ul>
<li>a run-time violation. This is most frequently caused by an untrapped APL error which causes Dyalog to return to session-input mode (i.e. an application programming fault).</li>
<li>a hang-up signal.</li>
</ul>
</article>
<article id="the-i-beam-operator-disable-component-checksum-validation">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-disable-component-checksum-validation-header">Disable Component Checksum Validation</h3><div class="command">{R}←3002⌶Y</div></div>
<p>Checksums allow component files to be validated and repaired using <a class="internal-link" href="#system-functions-fchk">Section 4.6.43</a>.</p>
<p>From Version 13.1 onwards, components which contain checksums are also validated on every component read.</p>
<p>Although not recommended, applications which favour performance over security may disable checksum validation by <code>⎕FREAD</code> using this function.</p>
<p><code>Y</code> is an integer defined as follows:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><code>⎕FREAD</code> will not validate checksums.</td>
</tr>
<tr>
<td>1</td>
<td><code>⎕FREAD</code> will validate checksums when they are present. This is the default.</td>
</tr>
</tbody>
</table>
<p>The shy result <code>R</code> is the previous value of this setting.</p>
</article>
<article id="the-i-beam-operator-enable-compression-of-large-components">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-enable-compression-of-large-components-header">Enable Compression of Large Components</h3><div class="command">{R}←3012⌶Y</div></div>
<p>Specifies whether large components (&gt;2GB) may be compressed.</p>
<p><code>Y</code> is an integer defined as follows:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Large components will not be compressed</td>
</tr>
<tr>
<td>1</td>
<td>Large components will be compressed if Z property is 1 (see <a class="internal-link" href="#system-functions-fprops">File Properties</a> ) , but versions of Dyalog prior to 19.0 will not be able to read them.</td>
</tr>
</tbody>
</table>
<p>The shy result <code>R</code> is the previous value of this setting.</p>
</article>
<article id="the-i-beam-operator-send-text-to-ride-embedded-browser">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-send-text-to-ride-embedded-browser-header">Send Text to RIDE-embedded Browser</h3><div class="command">R←{X}(3500⌶)Y</div></div>
<p>Optionally, <code>X</code> is a simple character vector or scalar, the contents of which are used as the caption for the tab in the RIDE client that contains the embedded browser. If omitted, then the caption defaults to "<code>3500⌶</code>".</p>
<p><code>Y</code> is a simple character vector the contents of which are displayed in the embedded browser tab.</p>
<p>To include SVG content, the HTML text in <code>Y</code> must include the following:
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="o">&lt;</span><span class="nv">meta</span><span class="w"> </span><span class="nv">http</span><span class="o">-</span><span class="nv">equiv</span><span class="o">=</span><span class="s2">"X-UA-Compatible"</span><span class="w"> </span><span class="nv">content</span><span class="o">=</span><span class="s2">"IE=9"</span><span class="w"> </span><span class="o">&gt;</span><span class="na">.</span>
</code></pre></div></p>
<p>The result <code>R</code> identifies whether the write to the RIDE was successful. Possible values are:</p>
<ul>
<li><code>0</code> : the write to the RIDE client was successful</li>
<li><code>¯1</code> : the write to the RIDE client was not successful</li>
</ul>
</article>
<article id="the-i-beam-operator-connected-to-the-ride">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-connected-to-the-ride-header">Connected to the RIDE</h3><div class="command">R←(3501⌶)Y</div></div>
<p><code>Y</code> can be any value and is ignored.</p>
<p>The result <code>R</code> identifies whether the Dyalog Session is running through the RIDE. Possible values are:</p>
<ul>
<li><code>0</code> : the Session is not running through the RIDE</li>
<li><code>1</code> : the Session is running through the RIDE</li>
</ul>
<p>This I-Beam may be extended in future.</p>
</article>
<article id="the-i-beam-operator-manage-ride-connections">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-manage-ride-connections-header">Manage RIDE Connections</h3><div class="command">R←3502⌶Y</div></div>
<p><code>3502⌶</code> gives control over RIDE connections to the interpreter. More details about RIDE can be found in the RIDE User Guide.</p>
<p><code>Y</code> may be either <code>0</code> or <code>1</code> or a simple character vector.</p>
<p><code>R</code> has the value <code>0</code> if the call to <code>3502⌶</code> was successful; if unsuccessful the value may be either a positive or negative integer.</p>
<p>If <code>Y</code> is <code>0</code>, then any active RIDE connections are disconnected, and no future connections may be made.</p>
<p>If <code>Y</code> is <code>1</code>, then the interpreter attempts to enable RIDE, using the value of the initialisation string to determine the connection details.  If the current initialisation string is ill-defined, <code>R</code> will be 64. If the Conga DLL/shared libraries are not available,  <code>R</code> will be 32. In previous versions of Dyalog there were separate RIDE and Conga DLLs/shared libraries; these have been merged into one set in 16.0.</p>
<p>If <code>Y</code> is a character vector and RIDE is currently disabled, then the current initialisation string is unconditionally replaced by the contents of <code>Y</code>. If RIDE is currently enabled, the initialisation string is not replaced, and <code>R</code> will have the value <code>¯2</code>.</p>
<p>The initialisation string has the same syntax as the value of the <strong>RIDE_INIT</strong> configuration parameter which is described in the RIDE User Guide</p>
<p>If RIDE is currently disabled, and <code>3502⌶0</code> is called or if RIDE is currently enabled and <code>3502⌶1</code> is called, no action is taken and <code>R</code> will have the value <code>¯1</code>.</p>
<p>The configuration parameter <strong>RIDE_INIT</strong> can still be used to establish the initial value of the RIDE initialisation string.</p>
<p>The runtime interpreter has RIDE disabled by default, whether or not <strong>RIDE_INIT</strong> is set; the only method of enabling RIDE in a runtime interpreter is to  call <code>3502⌶1</code>.</p>
<p>If <strong>RIDE_INIT</strong> is set when a development interpreter is called, RIDE will be enabled provided that the RIDE DLL/shared library is available and the <strong>RIDE_INIT</strong> variable is properly formed. If the connection is of type SERVE the port must not be in use.  If any of these conditions are not met, then the interpreter fails with a non-zero exit code.  If <strong>RIDE_INIT</strong> is not set then the development interpreter will start, but with RIDE disabled.</p>
<p>It is therefore possible to override the <strong>RIDE_INIT</strong> variable in the development interpreter with code similar to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="m">3502</span><span class="na">⌶</span><span class="m">0</span><span class="w">             </span><span class="c1">⍝ Stop RIDE</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="m">3502</span><span class="na">⌶</span><span class="s1">'SERVE::4511'</span><span class="w"> </span><span class="c1">⍝ Update init string</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="m">3502</span><span class="na">⌶</span><span class="m">1</span><span class="w">             </span><span class="c1">⍝ Start RIDE</span>
</code></pre></div></p>
<p>And similarly for altering the RIDE settings in an active APL session.</p>
<h5>Notes</h5>
<p>In 14.1 and earlier <code>3502⌶⍬</code> was used to enable RIDE; this value is still valid, albeit deprecated: code should call <code>3502⌶1</code> instead.</p>
<p>Enabling the RIDE to access applications that use the run-time interpreter means that the APL code of those applications can be accessed. The I-beam mechanism described above means that the APL code itself must grant the right for a RIDE client to connect to the run‑time interpreter. Although Dyalog Ltd might change the details of this mechanism, the APL code will <strong>always</strong> need to grant connection rights. In particular, no mechanism that is only dependent on configuration parameters will be implemented.</p>
</article>
<article id="the-i-beam-operator-fork-new-task">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-fork-new-task-header">Fork New Task</h3><div class="command">R←4000⌶Y</div></div>
<p>This applies to AIX only.</p>
<p><code>Y</code> must be is a simple empty vector but is ignored.</p>
<p>This function <em>forks</em> the current APL task. This means that it initiates a new separate copy of the APL program, with exactly the same APL state indicator.</p>
<p>Following the execution of this function, there will be two identical APL processes running on the machine, each with the same state indicator and set of APL objects and values. However, none of the external interfaces and resources in the parent process will exist in the newly forked child process.</p>
<p>The function will return a result in both processes.</p>
<ul>
<li>In the parent process, <code>R</code> is the process id of the child (forked) process.</li>
<li>In the child process, <code>R</code> is a scalar zero.</li>
</ul>
<p>The following external interfaces and resources that may be present in the parent process are not replicated in the child process:</p>
<ul>
<li>Component file ties</li>
<li>Native file ties</li>
<li>Mapped file associations</li>
<li>Auxiliary Processors</li>
<li>.NET objects</li>
<li>Edit windows</li>
<li>Clipboard entries</li>
<li>GUI objects (all children of <code>'.'</code>)</li>
<li>I/O to the current terminal</li>
</ul>
<p>Note that External Functions established using <code>⎕NA</code> are replicated in the child process.</p>
<p>The function will fail with a <code>DOMAIN ERROR</code> if there is more than one APL thread running.</p>
<p>The function will fail with a <code>FILE ERROR 11 Resource temporarily unavailable</code> if an attempt is made to exceed the maximum number of processes allowed per user.</p>
</article>
<article id="the-i-beam-operator-change-user">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-change-user-header">Change User</h3><div class="command">R←4001⌶Y</div></div>
<p><code>Y</code> is a character vector that specifies a valid UNIX user name. The function changes the <em>userid (uid)</em> and <em>groupid (gid)</em> of the process to values that correspond to the specified user name.</p>
<p>Note that it is only possible to change the user name if the <em>effective uid</em> is 0 (that is, the process has root privileges).</p>
<p>If the operation is successful, <code>R</code> is the user name specified in <code>Y</code>. Note that the value of <code>⎕AN</code> will not be affected, but the value of <code>⊃⎕AI</code> will be.</p>
<p>If the operation fails, the function generates a <code>FILE ERROR 1 Not Owner</code> error.</p>
<p>If the argument to <code>4001⌶</code> is other than a non-empty simple character vector, the function generates a <code>DOMAIN ERROR</code>.</p>
<p>If the argument is not the name of a valid user the function generates a <code>FILE ERROR 3 No such process</code>.</p>
<p>If the argument is the same name as the current effective user, then the function returns that name, but has no effect.</p>
<p>If the argument is a valid name other than the name of the effective user id of the current process, and that effective user id is not root the function generates a <code>FILE ERROR 1 Not owner</code>.</p>
</article>
<article id="the-i-beam-operator-reap-forked-tasks">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-reap-forked-tasks-header">Reap Forked Tasks</h3><div class="command">R←4002⌶Y</div></div>
<p>This applies to AIX only.</p>
<p>Under UNIX, when a child process terminates, it signals to its parent that it has terminated and waits for the parent to acknowledge that signal. <code>4002⌶</code> is the mechanism to allow the APL programmer to issue such acknowledgements.</p>
<p><code>Y</code> must be a simple empty vector but is ignored.</p>
<p>The result <code>R</code> is a matrix containing the list of the newly-terminated processes which have been terminated as a result of receiving the acknowledgement, along with information about each of those processes as described below.</p>
<p><code>R[;1]</code> is the process ID (PID) of the terminated child</p>
<p><code>R[;2]</code> is <code>¯1</code> if the child process terminated normally, otherwise it is the signal number which caused the child process to terminate.</p>
<p><code>R[;3]</code> is <code>¯1</code> if the child process terminated as the result of a signal, otherwise it is the exit code of the child process</p>
<p>The remaining 15 columns are the contents of the <code>rusage</code> structure returned by the underlying <code>wait3()</code> system call. Note that the two timevalstructs are each returned as a floating point number.</p>
<p>The current <code>rusage</code> structure contains:
<div class="highlight"><pre><span></span><code><span class="nv">struct</span><span class="w"> </span><span class="nv">rusage</span><span class="w"> </span><span class="kt">{</span>
<span class="w">    </span><span class="nv">struct</span><span class="w"> </span><span class="nv">timeval</span><span class="w"> </span><span class="nv">ru_utime</span><span class="sr">;</span><span class="w"> </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">struct</span><span class="w"> </span><span class="nv">timeval</span><span class="w"> </span><span class="nv">ru_stime</span><span class="sr">;</span><span class="w"> </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_maxrss</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">maximum</span><span class="w"> </span><span class="nv">resident</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_ixrss</span><span class="sr">;</span><span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">integral</span><span class="w"> </span><span class="nv">shared</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_idrss</span><span class="sr">;</span><span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">integral</span><span class="w"> </span><span class="nv">unshared</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_isrss</span><span class="sr">;</span><span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">integral</span><span class="w"> </span><span class="nv">unshared</span><span class="w"> </span><span class="nv">stack</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_minflt</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">reclaims</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_majflt</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">page</span><span class="w"> </span><span class="nv">faults</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_nswap</span><span class="sr">;</span><span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">swaps</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_inblock</span><span class="sr">;</span><span class="w">       </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">block</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nv">operations</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_oublock</span><span class="sr">;</span><span class="w">       </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">block</span><span class="w"> </span><span class="nv">output</span><span class="w"> </span><span class="nv">operations</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_msgsnd</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">messages</span><span class="w"> </span><span class="nv">sent</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_msgrcv</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">messages</span><span class="w"> </span><span class="nv">received</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_nsignals</span><span class="sr">;</span><span class="w">      </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">signals</span><span class="w"> </span><span class="nv">received</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_nvcsw</span><span class="sr">;</span><span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">voluntary</span><span class="w"> </span><span class="nv">context</span><span class="w"> </span><span class="nv">switches</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">long</span><span class="w">   </span><span class="nv">ru_nivcsw</span><span class="sr">;</span><span class="w">        </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">involuntary</span><span class="w"> </span><span class="nv">context</span><span class="w"> </span><span class="nv">switches</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="kt">}</span><span class="sr">;</span>
</code></pre></div></p>
<p><code>4002⌶</code> may return the PID of an abnormally terminated Auxiliary Processor; APL code should check that the list of processes that have been reaped is a superset of the list of processes that have been started.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">tryforks</span><span class="sr">;</span><span class="nv">pid</span><span class="sr">;</span><span class="nv">fpid</span><span class="sr">;</span><span class="nv">rpid</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">rpids</span><span class="kd">←</span><span class="nv">fpids</span><span class="kd">←</span><span class="no">⍬</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">For</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="bp">:</span><span class="nv">In</span><span class="w"> </span><span class="o">⍳</span><span class="m">5</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">        </span><span class="nv">fpid</span><span class="kd">←</span><span class="m">4000</span><span class="na">⌶</span><span class="s1">''</span><span class="w"> </span><span class="c1">⍝ fork() a process</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ if the child, hang around for a while</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">fpid</span><span class="o">=</span><span class="m">0</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">            </span><span class="nf">⎕DL</span><span class="w"> </span><span class="m">2</span><span class="o">×</span><span class="nv">i</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">            </span><span class="nf">⎕OFF</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ if the parent, save child's pid</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">           </span><span class="o">+</span><span class="nv">fpids</span><span class="o">,</span><span class="kd">←</span><span class="nv">fpid</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">12</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">EndFor</span>
<span class="sr">[</span><span class="m">13</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">14</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">For</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="bp">:</span><span class="nv">In</span><span class="w"> </span><span class="o">⍳</span><span class="m">20</span>
<span class="sr">[</span><span class="m">15</span><span class="sr">]</span><span class="w">       </span><span class="nf">⎕DL</span><span class="w"> </span><span class="m">3</span>
<span class="sr">[</span><span class="m">16</span><span class="sr">]</span><span class="w">  </span><span class="c1">⍝ get list of newly terminated child processes</span>
<span class="sr">[</span><span class="m">17</span><span class="sr">]</span><span class="w">       </span><span class="nv">rpid</span><span class="kd">←</span><span class="m">4002</span><span class="na">⌶</span><span class="s1">''</span>
<span class="sr">[</span><span class="m">18</span><span class="sr">]</span><span class="w">  </span><span class="c1">⍝ and if not empty, make note of their pids</span>
<span class="sr">[</span><span class="m">19</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="m">0</span><span class="o">≠⊃⍴</span><span class="nv">rpid</span>
<span class="sr">[</span><span class="m">20</span><span class="sr">]</span><span class="w">           </span><span class="o">+</span><span class="nv">rpids</span><span class="o">,</span><span class="kd">←</span><span class="nv">rpid</span><span class="sr">[;</span><span class="m">1</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">21</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">22</span><span class="sr">]</span><span class="w">  </span><span class="c1">⍝ if all fork()'d child processes accounted for</span>
<span class="sr">[</span><span class="m">23</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">fpids</span><span class="o">≡</span><span class="nv">fpids</span><span class="o">∩</span><span class="nv">rpids</span>
<span class="sr">[</span><span class="m">24</span><span class="sr">]</span><span class="w">           </span><span class="bp">:</span><span class="nv">Leave</span><span class="w">  </span><span class="c1">⍝ quit</span>
<span class="sr">[</span><span class="m">25</span><span class="sr">]</span><span class="w">       </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">26</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">EndFor</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-signal-counts">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-signal-counts-header">Signal Counts</h3><div class="command">R←4007⌶Y</div></div>
<p><code>Y</code> must be a simple empty vector but is ignored.</p>
<p>The result <code>R</code> is an integer vector of signal counts. The length of the vector is system dependent. On AIX 32-bit it is 63 on AIX 64-bit it is 256 but code should not rely on the length.</p>
<p>Each element is a count of the number of signals that have been generated since the last call to this function, or since the start of the process. <code>R[1]</code> is the number of occurrences of signal 1 (SIGHUP), <code>R[2]</code> the number of occurrences of signal 2, and so forth.</p>
<p>Each time the function is called it zeros the counts; it is therefore inadvisable to call it in more than one APL thread.</p>
<p>Currently, only SIGHUP, SIGINT, SIGQUIT, SIGTERM and SIGWINCH are counted and all other corresponding elements of <code>R</code> are 0.</p>
</article>
<article id="the-i-beam-operator-discard-source-information">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-discard-source-information-header">Discard Source Information</h3><div class="command">R←5171⌶Y</div></div>
<p>This function discards source code and file information for scripted objects, namespaces, classes, functions, and operators that is saved in the workspace. See also <a class="internal-link" href="#the-i-beam-operator-discard-source-code">Section 3.2.56</a>.</p>
<p><code>Y</code> is a vector or scalar containing zero or more references to <code>#</code> or <code>⎕SE</code>, and specifies from which namespaces the information is removed.</p>
<p><code>R</code> is an integer. A non-zero value indicates that some information was removed. 0 means nothing was discarded.</p>
<ul>
<li>The expression <code>5171⌶ #</code> discards source code and file information from the workspace, but not from  <code>⎕SE</code>.</li>
<li><code>5171⌶⎕SE</code> discards source code and file information from <code>⎕SE</code> but not from the workspace.</li>
<li><code>5171⌶ # ⎕SE</code> discards source code and file information from the workspace and from  <code>⎕SE</code>.</li>
</ul>
<p>For further information, see <i>Source as Typed</i>.</p>
</article>
<article id="the-i-beam-operator-discard-source-code">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-discard-source-code-header">Discard Source Code</h3><div class="command">R←5172⌶Y</div></div>
<p>This specifies whether source code is discarded for functions and operators when they are created by the editor or by <code>⎕FIX</code>. See also <a class="internal-link" href="#the-i-beam-operator-discard-source-information">Section 3.2.55</a>.</p>
<p><code>Y</code> is 0 or 1.</p>
<p>If <code>Y</code> is 0 (the default), source code is retained in the workspace when an object is fixed.</p>
<p>If <code>Y</code> is 1, source code is not retained in the workspace when an object is fixed (source code already retained in the workspace is not discarded).</p>
<p>In all case the result <code>R</code> is the previous setting (0 or 1).</p>
<p>For further information, see <i>Source as Typed</i>.</p>
</article>
<article id="the-i-beam-operator-list-loaded-files">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-list-loaded-files-header">List Loaded Files</h3><div class="command">R←5176⌶Y</div></div>
<p>The editor may be used to edit Dyalog script files (<em>.dyalog</em> files) and general text files and to save the contents in the workspace. Additionally <code>⎕FIX</code> can be used to fix scripts held in files. This I-Beam returns a list of all of the files which are associated with objects in the workspace, together with information about each file.</p>
<p><code>Y</code> may be any value.</p>
<p><code>R</code> is a vector of vectors, one element per associated file. Each element is a 5 element vector:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>File name</td>
</tr>
<tr>
<td>2</td>
<td>Encoding</td>
</tr>
<tr>
<td>3</td>
<td>Checksum</td>
</tr>
<tr>
<td>4</td>
<td>Newline</td>
</tr>
<tr>
<td>5</td>
<td>Flags</td>
</tr>
</tbody>
</table>
<p>Encoding, newline and flags are defined the same as for <code>⎕NGET</code>. See <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>. Checksum is an 8-character hexadecimal value, see <i>GetBuildID</i>  for more information.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="p">(</span><span class="s1">''</span><span class="w"> </span><span class="s1">''</span><span class="w"> </span><span class="p">(</span><span class="m">8</span><span class="o">⍴</span><span class="s1">' '</span><span class="p">)</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="o">≡⊃</span><span class="m">5176</span><span class="na">⌶</span><span class="s1">''</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">dyalog</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'DYALOG'</span><span class="w"> </span>
<span class="w">      </span><span class="nv">aedit</span><span class="kd">←</span><span class="s1">'/SALT/spice/aedit.dyalog'</span>
<span class="w">      </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">'file:///'</span><span class="o">,</span><span class="nv">dyalog</span><span class="o">,</span><span class="nv">aedit</span>
<span class="c1">#.arrayeditor</span>

<span class="w">      </span><span class="m">1</span><span class="o">↓⊃</span><span class="m">5176</span><span class="na">⌶</span><span class="no">⍬</span><span class="w">      </span><span class="c1">⍝ Ignore filename</span>
<span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="o">-</span><span class="nv">BOM</span><span class="w">  </span><span class="m">18507</span><span class="nv">aa6</span><span class="w">  </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w">  </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-list-loaded-file-objects">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-list-loaded-file-objects-header">List Loaded File Objects</h3><div class="command">R←5177⌶Y</div></div>
<p>The editor may be used to edit Dyalog script files (<em>.dyalog</em> files) and general text files and to save the contents in the workspace. Additionally <code>⎕FIX</code> can be used to fix scripts held in files. This I-Beam returns details about all of the objects in the workspace that are associated with such files.</p>
<p><code>Y</code> must be an empty array.</p>
<p><code>R</code> is a vector of 8-element vectors, one vector per object in the workspace that is associated with a file.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Object name or ref (refs are returned for all types of namespace)</td>
</tr>
<tr>
<td>2</td>
<td>Parent namespace</td>
</tr>
<tr>
<td>3</td>
<td>Name class (see <code>⎕NC</code> )</td>
</tr>
<tr>
<td>4</td>
<td>File name</td>
</tr>
<tr>
<td>5</td>
<td>Start line (first line in file, 0 origin, of the object)</td>
</tr>
<tr>
<td>6</td>
<td>Line count (number of lines in file occupied by the object)</td>
</tr>
<tr>
<td>7</td>
<td>File Checksum</td>
</tr>
<tr>
<td>8</td>
<td>File modification time ( <code>⎕TS</code> format)</td>
</tr>
</tbody>
</table>
<p>If an object occupies a file in its entirety, both <em>Start line</em> and <em>Line count</em> will be 0.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="o">⊃</span><span class="m">5177</span><span class="na">⌶</span><span class="no">⍬</span>
<span class="err">┌┬──────┬─┬┬─┬─┬────────┬─────────────┐</span>
<span class="err">││</span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="err">│</span><span class="m">0</span><span class="err">││</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└┴──────┴─┴┴─┴─┴────────┴─────────────┘</span>

<span class="w">      </span><span class="nv">dyalog</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'DYALOG'</span><span class="w"> </span>
<span class="w">      </span><span class="nv">aedit</span><span class="kd">←</span><span class="s1">'/SALT/spice/aedit.dyalog'</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">'file://'</span><span class="o">,</span><span class="nv">dyalog</span><span class="o">,</span><span class="nv">aedit</span>
<span class="c1">#.arrayeditor</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="o">↑</span><span class="m">5177</span><span class="na">⌶</span><span class="no">⍬</span><span class="w"> </span><span class="c1">⍝remove file names for brevity</span>
<span class="err">┌─────────────┬─────────────┬─┬──┬──┬────────┬──────────────────┐</span>
<span class="err">│</span><span class="nv">Run</span><span class="w">          </span><span class="err">│</span><span class="c1">#.arrayeditor│3│38│4 │008fe4ed│2018 5 11 8 5 10 0│</span>
<span class="err">├─────────────┼─────────────┼─┼──┼──┼────────┼──────────────────┤</span>
<span class="err">│</span><span class="nv">Help</span><span class="w">         </span><span class="err">│</span><span class="c1">#.arrayeditor│3│28│9 │008fe4ed│2018 5 11 8 5 10 0│</span>
<span class="err">├─────────────┼─────────────┼─┼──┼──┼────────┼──────────────────┤</span>
<span class="err">│</span><span class="nv">List</span><span class="w">         </span><span class="err">│</span><span class="c1">#.arrayeditor│3│22│5 │008fe4ed│2018 5 11 8 5 10 0│</span>
<span class="err">├─────────────┼─────────────┼─┼──┼──┼────────┼──────────────────┤</span>
<span class="err">│</span><span class="nv">DESC</span><span class="w">         </span><span class="err">│</span><span class="c1">#.arrayeditor│3│10│11│008fe4ed│2018 5 11 8 5 10 0│</span>
<span class="err">├─────────────┼─────────────┼─┼──┼──┼────────┼──────────────────┤</span>
<span class="err">│</span><span class="c1">#.arrayeditor│#            │9│0 │0 │008fe4ed│2018 5 11 8 5 10 0│</span>
<span class="err">└─────────────┴─────────────┴─┴──┴──┴────────┴──────────────────┘</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-remove-loaded-file-object-info">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-remove-loaded-file-object-info-header">Remove Loaded File Object Info</h3><div class="command">R←5178⌶Y</div></div>
<p>The editor may be used to edit Dyalog script files (<em>.dyalog</em> files) and general text files and to save the contents in the workspace. Additionally <code>⎕FIX</code> can be used to fix scripts held in files. This I-Beam removes the information held about an object in the workspace specified by <code>Y</code> that is associated with such a file.</p>
<p><code>Y</code> is a character vector that specifies the name of a workspace object or a ref to an object.</p>
<p><code>R</code> is Boolean. 1 means that the information was removed; 0 that it wasn't.</p>
<p>Note that the workspace object itself remains in the workspace; just the information about its associated file is removed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dyalog</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'DYALOG'</span><span class="w"> </span>
<span class="w">      </span><span class="nv">aedit</span><span class="kd">←</span><span class="s1">'/SALT/spice/aedit.dyalog'</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">'file://'</span><span class="o">,</span><span class="nv">dyalog</span><span class="o">,</span><span class="nv">aedit</span>
<span class="c1">#.arrayeditor</span>
<span class="w">      </span><span class="m">5178</span><span class="na">⌶</span><span class="s1">'arrayeditor'</span>
<span class="m">1</span>
<span class="w">      </span><span class="m">5178</span><span class="na">⌶</span><span class="s1">'xyz'</span><span class="w"> </span><span class="c1">⍝ unused name</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-loaded-file-object-info">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-loaded-file-object-info-header">Loaded File Object Info</h3><div class="command">R←5179⌶Y</div></div>
<p>The editor may be used to edit Dyalog script files (<em>.dyalog</em> files) and general text files and to save the contents in the workspace. Additionally <code>⎕FIX</code> can be used to fix scripts held in files. This I-Beam returns details about an object in the workspace specified by <code>Y</code> that is associated with such a file.</p>
<p><code>Y</code> is a character vector that specifies the name of a workspace object or a ref to an object.</p>
<p><code>R</code> is an 8-element vector containing the following information pertaining to the object and</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Object name or ref ( <code>Y</code> )</td>
</tr>
<tr>
<td>2</td>
<td>Parent namespace</td>
</tr>
<tr>
<td>3</td>
<td>Name class (see <code>⎕NC</code> )</td>
</tr>
<tr>
<td>4</td>
<td>File name</td>
</tr>
<tr>
<td>5</td>
<td>Start line (first line in file, 0 origin, of the object)</td>
</tr>
<tr>
<td>6</td>
<td>Line count (number of lines in file occupied by the object)</td>
</tr>
<tr>
<td>7</td>
<td>File Checksum</td>
</tr>
<tr>
<td>8</td>
<td>File modification time ( <code>⎕TS</code> format)</td>
</tr>
</tbody>
</table>
<p>If an object occupies a file in its entirety, both <em>Start line</em> and <em>Line count</em> are 0.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dyalog</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'DYALOG'</span><span class="w"> </span>
<span class="w">      </span><span class="nv">aedit</span><span class="kd">←</span><span class="s1">'/SALT/spice/aedit.dyalog'</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">'file://'</span><span class="o">,</span><span class="nv">dyalog</span><span class="o">,</span><span class="nv">aedit</span>
<span class="c1">#.arrayeditor</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="w"> </span><span class="m">5179</span><span class="na">⌶</span><span class="s1">'arrayeditor'</span>
<span class="err">┌─────────────┬─┬─┬─┬─┬────────┬───────────────────┐</span>
<span class="err">│</span><span class="c1">#.arrayeditor│#│9│0│0│008fe4ed│2018 5 11 8 56 10 0│</span>
<span class="err">└─────────────┴─┴─┴─┴─┴────────┴───────────────────┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="na">/</span><span class="w"> </span><span class="m">5179</span><span class="na">⌶</span><span class="s1">'arrayeditor.List'</span>
<span class="err">┌────┬─────────────┬─┬──┬─┬────────┬───────────────────┐</span>
<span class="err">│</span><span class="nv">List</span><span class="err">│</span><span class="c1">#.arrayeditor│3│22│5│008fe4ed│2018 5 11 8 56 10 0│</span>
<span class="err">└────┴─────────────┴─┴──┴─┴────────┴───────────────────┘</span>
<span class="w">      </span><span class="m">5179</span><span class="na">⌶</span><span class="s1">'xyz'</span><span class="w"> </span><span class="c1">⍝ unused name</span>
<span class="err">┌┬────────┬─┬┬─┬─┬────────┬─────────────┐</span>
<span class="err">││</span><span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span><span class="err">│</span><span class="m">0</span><span class="err">││</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└┴────────┴─┴┴─┴─┴────────┴─────────────┘</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-json-translate-name">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-json-translate-name-header">JSON Translate Name</h3><div class="command">R←X(7162⌶)Y</div></div>
<p>Converts between JSON names and APL names.</p>
<p>When <code>⎕JSON</code> imports an entity from JSON text whose name would be an invalid APL name, the function converts the invalid name into a valid APL name using a <em>name mangling</em> algorithm. When <code>⎕JSON</code> exports an APL namespace as JSON text, the process is reversed.</p>
<p>This function performs the same <em>name mangling</em> allowing the programmer to identify JSON entities as APL names, and vice-versa.</p>
<p><code>Y</code> is a character vector or scalar.</p>
<p><code>X</code> is a scalar numeric value which must be 1 or 0.</p>
<p>When <code>X</code> is 0, <code>R</code> is the name in <code>Y</code> converted, if necessary, so that it is a valid APL name. It performs the same translation of JSON object names to APL names that is performed when importing JSON.</p>
<p>When <code>X</code> is 1, <code>R</code> is the name in <code>Y</code> which, if mangled, is converted back to the original form.. It performs the same translation of APL names to JSON object names that is performed when exporting JSON.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'2a'</span>
<span class="nv">⍙2a</span>
<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'⍙2a'</span>
<span class="m">2</span><span class="nv">a</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'foo'</span>
<span class="nv">foo</span>
<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'foo'</span>
<span class="nv">foo</span>
</code></pre></div></p>
<p>Note that the algorithm can be applied, even when mangling is not required. So:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'⍙97'</span>
<span class="nv">a</span>
</code></pre></div></p>
<p>For further details, see <a class="internal-link" href="#system-functions-json-name-manglling">Section 4.6.72.2</a>.</p>
</article>
<article id="the-i-beam-operator-singular-value-decomposition">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-singular-value-decomposition-header">Singular Value Decomposition</h3><div class="command">R←(8415⌶)Y</div></div>
<p><code>Y</code> is a simple numeric matrix. <code>⎕FR</code> must be 645.</p>
<p>The result <code>R</code> is a 4 element vector whose elements are as follows.</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td><code>U</code></td>
<td>a unitary matrix</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td><code>S</code></td>
<td>a diagonal matrix</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td><code>V</code></td>
<td>a unitary matrix</td>
</tr>
<tr>
<td><code>[4]</code></td>
<td><code>f</code></td>
<td>a Boolean flag indicating whether the algorithm converged (1)or not (0)</td>
</tr>
</tbody>
</table>
<p>This function computes a factorisation of the matrix <code>Y</code> such that:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span><span class="w"> </span><span class="o">≡</span><span class="w"> </span><span class="nv">U</span><span class="w"> </span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="w"> </span><span class="o">⍉+</span><span class="nv">V</span>
</code></pre></div></p>
<p>This can be useful for analysing matrices for which <code>⌹</code> cannot compute an inverse, because they are singular or nearly singular.</p>
<p>For further information, see <a href="https://en.wikipedia.org/wiki/Singular_value_decomposition">https://en.wikipedia.org/wiki/Singular_value_decomposition</a>.</p>
<h5>Note</h5>
<p>This function signals <code>DOMAIN ERROR</code> if <code>⎕FR</code> is 1287. See <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
</article>
<article id="the-i-beam-operator-externalise-array">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-externalise-array-header">Externalise Array</h3><div class="command">R←8674⌶Y</div></div>
<p>This function creates an externalised array.</p>
<p><code>Y</code> may be any array.</p>
<p>The result <code>R</code> is a copy of <code>Y</code> that has been created in a separate area of memory to that allocated to the active workspace.</p>
<p>This is an experimental function that may  improve the overall performance of an application by reducing workspace management activity.</p>
<p>Externalising an array isolates it from the dynamic workspace management process that occurs constantly as objects are created, modified and destroyed. Moving data around in memory consumes computing power. Removing a <strong>large nested constant</strong> from this  managed area guarantees that it will not be subjected to such movement and potentially reduces the amount of data shuffling entailed during a compaction which in turn may improve overall performance.</p>
<p>There is no link between <code>Y</code> and the externalised copy of <code>Y</code>. If <code>Y</code> is erased, the copy of <code>Y</code> referenced via <code>R</code> still exists, but outside the workspace. Indeed, there is no benefit to be gained by using this function unless the original array <code>Y</code> is expunged from in the workspace.</p>
<h5>Notes</h5>
<ul>
<li>This function is experimental and its effect is likely to be application dependent. There is no guarantee that it will  improve performance in every application.</li>
<li>Little or no benefit is obtained by externalising small or simple arrays as they will typically become part of the sediment, a collection of objects in the workspace that  remains relatively stable.</li>
<li>There is no benefit obtained in externalising an array that is going to change; indeed there will probably be a dis-benefit. There is a cost associated with externalising an array and a cost associated with changing an externalised array.</li>
</ul>
<p>The <em>externalised</em> property of the array does survive <code>)SAVE</code>/<code>)LOAD</code> but not <code>0 ⎕SAVE</code>, <code>⎕CY</code>, <code>)COPY</code> or <code>)PCOPY</code>. Nor does it survive writing to a component file and reading back again.</p>
</article>
<article id="the-i-beam-operator-hash-table-size">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-hash-table-size-header">Hash Table Size</h3><div class="command">{R}←8468⌶Y</div></div>
<p>Increases the amount of workspace allocated to internal hash tables. These tables are created when a set primitive is executed or by the Hash Array function (<code>1500⌶</code>).</p>
<h5>Note</h5>
<p><strong>The purpose of this function is to allow the user to evaluate potential side-effects of the proposed increase in table size in the next major version of Dyalog.</strong></p>
<p><code>Y</code> may be ⍬, or an integer 0, 1, 2, or 3.</p>
<p>If <code>Y</code> is 1, 2 or 3 the hash table size is increased by the factor <code>2*Y</code>. If <code>Y</code> is 0, the hash table size is reset to its default value. In these cases, the shy result <code>R</code> is the previous value of the scale factor.</p>
<p>If <code>Y</code> is ⍬ the size is unaffected and the (non-shy) result is the current value of the scale factor.</p>
<p>It is recommended that users test their code using the maximum value 3.</p>
<p>For more information, see <i>Search Functions and Hash Tables</i> and <a class="internal-link" href="#the-i-beam-operator-hash-array">Section 3.2.22</a>.</p>
</article>
<article id="the-i-beam-operator-lookup-table-size">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-lookup-table-size-header">Lookup Table Size</h3><div class="command">R←8469⌶Y</div></div>
<p>Increases the maximum amount of workspace allocated to internal lookup tables. These tables are created when a set primitive is executed. Lookup tables are faster than hash tables, and are used when hashing is not required.</p>
<h5>Note</h5>
<p><strong>The purpose of this function is to allow the user to evaluate potential side-effects of the proposed increase in table size in the next major version of Dyalog.</strong></p>
<p><code>Y</code> may be ⍬, or an integer from 0 to 16777216.</p>
<p>If <code>Y</code> is between 1 and 16777216 the function sets the lookup table size in bytes to that value. If <code>Y</code> is 0, the lookup table size is reset to its default value. In both cases, the shy result <code>R</code> is the previous value of the table size.</p>
<p>If <code>Y</code> is ⍬ the size is unaffected and the (non-shy) result is the current value of the scale factor.</p>
<p>It is recommended that users test their code using the maximum value.</p>
<p>For more information, see <i>Search Functions and Hash Tables</i> and <a class="internal-link" href="#the-i-beam-operator-hash-array">Section 3.2.22</a>.</p>
</article>
<article id="the-i-beam-operator-sample-probability-distribution">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-sample-probability-distribution-header">Sample Probability Distribution</h3><div class="command">R←X(16808⌶)Y</div></div>
<p>This function generates an array of random numbers from a named probability distribution.  Note that this is not currently implemented for AIX.</p>
<p><code>Y</code> is a 2-item vector containing the name of the probability distribution from those listed in the table below, and the shape of the result.</p>
<p><code>X</code> is a scalar or 1 or 2 element numeric vector that specifies parameters.</p>
<p>For example to get an array with shape (3 5 7) of uniform random numbers for the interval from ¯17.3 to 12.7, you’d enter
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯17.3</span><span class="w"> </span><span class="m">12.7</span><span class="w"> </span><span class="p">(</span><span class="m">16808</span><span class="w"> </span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'Uniform'</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span><span class="p">)</span>
</code></pre></div></p>
<p>If you wanted a vector of 100,000 uniform random numbers for that interval, you’d enter
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯17.3</span><span class="w"> </span><span class="m">12.7</span><span class="w"> </span><span class="p">(</span><span class="m">16808</span><span class="w"> </span><span class="na">⌶</span><span class="p">)</span><span class="w"> </span><span class="s1">'Uniform'</span><span class="w"> </span><span class="m">100000</span>
</code></pre></div></p>
<p>The domain rules for the distributions currently  implemented are as follows:</p>
<table>
<thead>
<tr>
<th>Distribution</th>
<th>X[1]</th>
<th>X[2]</th>
<th>Domain Rules</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>'Uniform'</code></td>
<td>a</td>
<td>b</td>
<td>a &lt; b ; A numeric interval. Example: 1.0 7.6</td>
</tr>
<tr>
<td><code>'Beta'</code></td>
<td>a</td>
<td>b</td>
<td>a &gt; 0  AND b &gt; 0</td>
</tr>
<tr>
<td><code>'Bernoulli'</code></td>
<td>probability</td>
<td> </td>
<td>probability ≥ 0 AND probability ≤ 1</td>
</tr>
<tr>
<td><code>'Binomial'</code></td>
<td>trials</td>
<td>probability</td>
<td>trials is an integer ≥ 0;  probability ≥ 0 AND probability ≤ 1</td>
</tr>
<tr>
<td><code>'Cauchy'</code></td>
<td>location</td>
<td>scale</td>
<td>location unrestricted; scale &gt; 0</td>
</tr>
<tr>
<td><code>'Chi Squared'</code></td>
<td>degree of freedom</td>
<td> </td>
<td>degree of freedom ≥ 0</td>
</tr>
<tr>
<td><code>'Exponential'</code></td>
<td>rate</td>
<td> </td>
<td>rate  ≥ 0</td>
</tr>
<tr>
<td><code>'F'</code></td>
<td>a</td>
<td>b</td>
<td>a ≥  eps AND b ≥ eps; where eps is smallest non-zero positive float number</td>
</tr>
<tr>
<td><code>'Gamma'</code></td>
<td>a</td>
<td>b</td>
<td>a ≥ 0 AND b ≥eps; where eps is smallest non-zero positive float number</td>
</tr>
<tr>
<td><code>'Inverse Gamma'</code></td>
<td>a</td>
<td>b</td>
<td>a ≥ 0 AND b ≥ 0</td>
</tr>
<tr>
<td><code>'Laplace'</code></td>
<td>location</td>
<td>scale</td>
<td>location unrestricted; scale ≥ 0</td>
</tr>
<tr>
<td><code>'Logistic'</code></td>
<td>location</td>
<td>scale</td>
<td>location unrestricted; scale ≥ 0</td>
</tr>
<tr>
<td><code>'Log Normal'</code></td>
<td>location</td>
<td>scale</td>
<td>location unrestricted; scale ≥ 0</td>
</tr>
<tr>
<td><code>'Normal'</code></td>
<td>location</td>
<td>scale</td>
<td>location unrestricted; scale ≥ 0</td>
</tr>
<tr>
<td><code>'Poisson'</code></td>
<td>rate</td>
<td> </td>
<td>rate ≥ 0</td>
</tr>
<tr>
<td><code>'Student T'</code></td>
<td>degree of freedom</td>
<td> </td>
<td>degree of freedom ≥eps where eps is smallest non-zero positive float number</td>
</tr>
<tr>
<td><code>'Weibull'</code></td>
<td>a</td>
<td>b</td>
<td>a ≥  eps AND b ≥ eps ; eps is smallest non-zero positive float number</td>
</tr>
</tbody>
</table>
<p>Each of those distributions has a corresponding Wikipedia entry with a description of its theoretical foundation and usually graphs of the probability density functions and cumulative distribution functions for interesting sets of parameter values.</p>
<p class="example">Example</p>
<p>The probability density function for the Beta distribution (see ) with the parameter vector (2 5) has an interesting shape.</p>
<p><code>BucketCount</code> counts random numbers that fall into a sequence of evenly distributed bucket intervals:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">BucketCounts</span><span class="kd">←</span><span class="kt">{</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">        </span><span class="nv">ir</span><span class="kd">←</span><span class="o">⌊</span><span class="bp">⍵</span><span class="o">÷÷</span><span class="bp">⍺</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">        </span><span class="nv">kir</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍺</span><span class="p">(</span><span class="o">≢</span><span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span><span class="na">⌸</span><span class="nv">ir</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">        </span><span class="nv">kir</span><span class="sr">[;</span><span class="nf">⎕IO</span><span class="sr">]</span><span class="o">÷</span><span class="kd">←</span><span class="bp">⍺</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nv">kir</span><span class="sr">[</span><span class="o">⍋</span><span class="nv">kir</span><span class="sr">[;</span><span class="nf">⎕IO</span><span class="sr">];]</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="kt">}</span>
</code></pre></div></p>
<p>So then we can create 100,000 samples and calculate values for a density graph with 1,000 evenly spaced buckets by:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">rv</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">(</span><span class="m">16808</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'Beta'</span><span class="w"> </span><span class="m">100000</span>
<span class="w">      </span><span class="nv">bc</span><span class="kd">←</span><span class="m">1000</span><span class="w"> </span><span class="nv">BucketCounts</span><span class="w"> </span><span class="nv">rv</span>
</code></pre></div></p>
<p>Using the Chart Wizard <img alt="sharpplot icon" src="img/sharpplot-icon.png"/> we can plot <code>(⊂2)⌷⍉bc</code> against <code>(⊂1)⌷⍉bc</code> to get the graph:</p>
<p><img alt="beta distribution" src="img/beta-distribution.png"/></p>
</article>
<article id="the-i-beam-operator-line-count">
<div class="heading-container"><h3 class="heading" id="the-i-beam-operator-line-count-header">Line Count</h3><div class="command">R←50100⌶Y</div></div>
<p>This function is a compact version of the system function <code>⎕LC</code>. If an expression requires only the  most recent line(s) in the function calling stack, this is a more efficient alternative to using <code>⎕LC</code>.</p>
<p><code>Y</code> may be an integer specifying the depth of the function calling stack that is required in the result.</p>
<p>The result R is the same as <code>⎕LC</code>, but truncated to the number of stack levels specified by <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">          </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Foo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="m">4</span><span class="o">=⍴</span><span class="nf">⎕LC</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">1</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">2</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">3</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">4</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">        </span><span class="m">50100</span><span class="na">⌶</span><span class="m">5</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">        </span><span class="kd">→</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">       </span><span class="nv">Foo</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">Foo</span>

<span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">10</span>
<span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>
<span class="m">6</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>
<span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>
</code></pre></div>
</article>
<article id="the-i-beam-operator-supplementary-i-beam-functions">
<h3 id="the-i-beam-operator-supplementary-i-beam-functions-header"> Other I-Beams</h3>
<p>Dyalog APL includes a number of  I-Beams which exist in order to support experimental features or features which are documented elsewhere.</p>
<p>The following table lists those I-Beams, together with the document which contains a description of them:</p>
<p>Table: Experimental and other I-Beams</p>
<table>
<thead>
<tr>
<th>A</th>
<th>Purpose</th>
<th>Where documented</th>
<th> </th>
<th> </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>8659</code></td>
<td>Shared Code Files. These are supported only in 64-bit Unicode interpreters, and were previously known as External Workspaces</td>
<td>Shared Code Files User Guide</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>8666</code></td>
<td> </td>
<td colspan="3"> </td>
</tr>
<tr>
<td><code>8667</code></td>
<td> </td>
<td colspan="3"> </td>
</tr>
</tbody>
</table>
</article>
</section>
</section>
<section data-chapter-seq="4" id="system-functions-and-variables">
<h1 class="chapter" id="system-functions-and-variables-header">System Functions and Variables</h1>
<article id="system-functions-summary-tables-introduction">
<h2 id="system-functions-summary-tables-introduction-header"> Introduction</h2>
<p>Dyalog includes a collection of built-in facilities which provide various services related to both the APL and the external environment. They have distinguished case-insensitive names beginning with the <code>⎕</code> symbol and are implicitly available in a clear workspace. Collectively, these  facilities are  referred to as System <em>Functions</em> but  they are variously implemented as constants, variables, functions, operators, and in one case, as a namespace.</p>
<p>Note that Dyalog may extend any of these facilities by, for example, adding extra elements, rows or columns to a result, so code should take this possibility into account.</p>
</article>
<article id="system-functions-summary-tables-system-functions-and-variables-print">
<h2 id="system-functions-summary-tables-system-functions-and-variables-print-header"> System Functions and Variables (A-Z)</h2>
<table>
<tbody>
<tr>
<td><code>⎕A</code></td>
<td><code>⎕AI</code></td>
<td><code>⎕AN</code></td>
<td><code>⎕ARBIN</code></td>
<td><code>⎕ARBOUT</code></td>
</tr>
<tr>
<td><code>⎕AT</code></td>
<td><code>⎕ATX</code></td>
<td><code>⎕AV</code></td>
<td><code>⎕AVU</code></td>
<td><code>⎕BASE</code></td>
</tr>
<tr>
<td><code>⎕C</code></td>
<td><code>⎕CLASS</code></td>
<td><code>⎕CLEAR</code></td>
<td><code>⎕CMD</code></td>
<td><code>⎕CR</code></td>
</tr>
<tr>
<td><code>⎕CS</code></td>
<td><code>⎕CSV</code></td>
<td><code>⎕CT</code></td>
<td><code>⎕CY</code></td>
<td><code>⎕D</code></td>
</tr>
<tr>
<td><code>⎕DCT</code></td>
<td><code>⎕DF</code></td>
<td><code>⎕DIV</code></td>
<td><code>⎕DL</code></td>
<td><code>⎕DM</code></td>
</tr>
<tr>
<td><code>⎕DMX</code></td>
<td><code>⎕DQ</code></td>
<td><code>⎕DR</code></td>
<td><code>⎕DT</code></td>
<td><code>⎕ED</code></td>
</tr>
<tr>
<td><code>⎕EM</code></td>
<td><code>⎕EN</code></td>
<td><code>⎕EX</code></td>
<td><code>⎕EXCEPTION</code></td>
<td><code>⎕EXPORT</code></td>
</tr>
<tr>
<td><code>⎕FAPPEND</code></td>
<td><code>⎕FAVAIL</code></td>
<td><code>⎕FCHK</code></td>
<td><code>⎕FCOPY</code></td>
<td><code>⎕FCREATE</code></td>
</tr>
<tr>
<td><code>⎕FDROP</code></td>
<td><code>⎕FERASE</code></td>
<td><code>⎕FHIST</code></td>
<td><code>⎕FHOLD</code></td>
<td><code>⎕FIX</code></td>
</tr>
<tr>
<td><code>⎕FLIB</code></td>
<td><code>⎕FMT</code></td>
<td><code>⎕FNAMES</code></td>
<td><code>⎕FNUMS</code></td>
<td><code>⎕FPROPS</code></td>
</tr>
<tr>
<td><code>⎕FR</code></td>
<td><code>⎕FRDAC</code></td>
<td><code>⎕FRDCI</code></td>
<td><code>⎕FREAD</code></td>
<td><code>⎕FRENAME</code></td>
</tr>
<tr>
<td><code>⎕FREPLACE</code></td>
<td><code>⎕FRESIZE</code></td>
<td><code>⎕FSIZE</code></td>
<td><code>⎕FSTAC</code></td>
<td><code>⎕FSTIE</code></td>
</tr>
<tr>
<td><code>⎕FTIE</code></td>
<td><code>⎕FUNTIE</code></td>
<td><code>⎕FX</code></td>
<td><code>⎕INSTANCES</code></td>
<td><code>⎕IO</code></td>
</tr>
<tr>
<td><code>⎕JSON</code></td>
<td><code>⎕KL</code></td>
<td><code>⎕LC</code></td>
<td><code>⎕LOAD</code></td>
<td><code>⎕LOCK</code></td>
</tr>
<tr>
<td><code>⎕LX</code></td>
<td><code>⎕MAP</code></td>
<td><code>⎕MKDIR</code></td>
<td><code>⎕ML</code></td>
<td><code>⎕MONITOR</code></td>
</tr>
<tr>
<td><code>⎕NA</code></td>
<td><code>⎕NAPPEND</code></td>
<td><code>⎕NC</code></td>
<td><code>⎕NCOPY</code></td>
<td><code>⎕NCREATE</code></td>
</tr>
<tr>
<td><code>⎕NDELETE</code></td>
<td><code>⎕NERASE</code></td>
<td><code>⎕NEW</code></td>
<td><code>⎕NEXISTS</code></td>
<td><code>⎕NGET</code></td>
</tr>
<tr>
<td><code>⎕NINFO</code></td>
<td><code>⎕NL</code></td>
<td><code>⎕NLOCK</code></td>
<td><code>⎕NMOVE</code></td>
<td><code>⎕NNAMES</code></td>
</tr>
<tr>
<td><code>⎕NNUMS</code></td>
<td><code>⎕NPARTS</code></td>
<td><code>⎕NPUT</code></td>
<td><code>⎕NQ</code></td>
<td><code>⎕NR</code></td>
</tr>
<tr>
<td><code>⎕NREAD</code></td>
<td><code>⎕NRENAME</code></td>
<td><code>⎕NREPLACE</code></td>
<td><code>⎕NRESIZE</code></td>
<td><code>⎕NS</code></td>
</tr>
<tr>
<td><code>⎕NSI</code></td>
<td><code>⎕NSIZE</code></td>
<td><code>⎕NTIE</code></td>
<td><code>⎕NULL</code></td>
<td><code>⎕NUNTIE</code></td>
</tr>
<tr>
<td><code>⎕NXLATE</code></td>
<td><code>⎕OFF</code></td>
<td><code>⎕OPT</code></td>
<td><code>⎕OR</code></td>
<td><code>⎕PATH</code></td>
</tr>
<tr>
<td><code>⎕PFKEY</code></td>
<td><code>⎕PP</code></td>
<td><code>⎕PROFILE</code></td>
<td><code>⎕PW</code></td>
<td><code>⎕R</code></td>
</tr>
<tr>
<td><code>⎕REFS</code></td>
<td><code>⎕RL</code></td>
<td><code>⎕RSI</code></td>
<td><code>⎕RTL</code></td>
<td><code>⎕S</code></td>
</tr>
<tr>
<td><code>⎕SAVE</code></td>
<td><code>⎕SD</code></td>
<td><code>⎕SE</code></td>
<td><code>⎕SH</code></td>
<td><code>⎕SHADOW</code></td>
</tr>
<tr>
<td><code>⎕SI</code></td>
<td><code>⎕SIGNAL</code></td>
<td><code>⎕SIZE</code></td>
<td><code>⎕SM</code></td>
<td><code>⎕SR</code></td>
</tr>
<tr>
<td><code>⎕SRC</code></td>
<td><code>⎕STACK</code></td>
<td><code>⎕STATE</code></td>
<td><code>⎕STOP</code></td>
<td><code>⎕SVC</code></td>
</tr>
<tr>
<td><code>⎕SVO</code></td>
<td><code>⎕SVQ</code></td>
<td><code>⎕SVR</code></td>
<td><code>⎕SVS</code></td>
<td><code>⎕TALLOC</code></td>
</tr>
<tr>
<td><code>⎕TC</code></td>
<td><code>⎕TCNUMS</code></td>
<td><code>⎕TGET</code></td>
<td><code>⎕THIS</code></td>
<td><code>⎕TID</code></td>
</tr>
<tr>
<td><code>⎕TKILL</code></td>
<td><code>⎕TNAME</code></td>
<td><code>⎕TNUMS</code></td>
<td><code>⎕TPOOL</code></td>
<td><code>⎕TPUT</code></td>
</tr>
<tr>
<td><code>⎕TRACE</code></td>
<td><code>⎕TRAP</code></td>
<td><code>⎕TREQ</code></td>
<td><code>⎕TS</code></td>
<td><code>⎕TSYNC</code></td>
</tr>
<tr>
<td><code>⎕UCS</code></td>
<td><code>⎕USING</code></td>
<td><code>⎕VFI</code></td>
<td><code>⎕VR</code></td>
<td><code>⎕WA</code></td>
</tr>
<tr>
<td><code>⎕WC</code></td>
<td><code>⎕WG</code></td>
<td><code>⎕WN</code></td>
<td><code>⎕WS</code></td>
<td><code>⎕WSID</code></td>
</tr>
<tr>
<td><code>⎕WX</code></td>
<td><code>⎕XML</code></td>
<td><code>⎕XSI</code></td>
<td><code>⎕XT</code></td>
<td><code>⎕Á</code></td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-summary-tables-system-functions-categorised">
<h2 id="system-functions-summary-tables-system-functions-categorised-header"> System Functions Categorised</h2>
<p>The following tables list the system functions divided into appropriate categories.</p>
<h4>Settings Affecting Behaviour of Primitive Functions</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕CT</code></td>
<td>Comparison Tolerance</td>
</tr>
<tr>
<td><code>⎕DCT</code></td>
<td>Decimal Comp Tolerance</td>
</tr>
<tr>
<td><code>⎕DIV</code></td>
<td>Division Method</td>
</tr>
<tr>
<td><code>⎕FR</code></td>
<td>Floating-Point Representation</td>
</tr>
<tr>
<td><code>⎕IO</code></td>
<td>Index Origin</td>
</tr>
<tr>
<td><code>⎕ML</code></td>
<td>Migration Level</td>
</tr>
<tr>
<td><code>⎕PP</code></td>
<td>Print Precision</td>
</tr>
<tr>
<td><code>⎕RL</code></td>
<td>Random Link</td>
</tr>
</tbody>
</table>
<p>The following table describes the dependencies that exist between functions, operators and these system variables.</p>

<table id="Implicit_Arguments"><caption style="caption-side:top"><strong>Table 4-1:</strong> Implicit Arguments</caption>
<thead>
<tr>
<th>System Variable</th>
<th>Monadic Functions</th>
<th>Dyadic Functions</th>
<th>Operators</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕CT, ⎕DCT</code></td>
<td><code>⌈ ⌊ ∪</code></td>
<td><code>~ &lt; ≤ = ≥ &gt; ≠ ≡ ≢ ⍳ ∊ ∪ ∩ ⍷ | ∨ ∧</code></td>
<td><code>⌸</code></td>
</tr>
<tr>
<td><code>⎕DIV</code></td>
<td><code>÷</code></td>
<td><code>÷</code></td>
<td> </td>
</tr>
<tr>
<td><code>⎕FR   ⍝ 1</code></td>
<td><code>÷ * ⍟ ! ○ ⌹</code></td>
<td><code>+ - × ÷ * ⍟ | ! ○ ∨ ∧ ⊥ ⊤ ⌹</code></td>
<td> </td>
</tr>
<tr>
<td><code>⎕FR   ⍝ 2</code></td>
<td><code>⌈ ⌊ ∪</code></td>
<td><code>~ &lt; ≤ = ≥ &gt; ≠ ≡ ≢ ⍳ ∊ ∪ ∩ ⍷</code></td>
<td><code>⌸</code></td>
</tr>
<tr>
<td><code>⎕FR   ⍝ 3</code></td>
<td><code>⍒ ⍋</code></td>
<td><code>⌈ ⌊ ⍒ ⍋ ⍸</code></td>
<td> </td>
</tr>
<tr>
<td><code>⎕IO</code></td>
<td><code>⍳ ? ⍒ ⍋ ⍸</code></td>
<td><code>⍳ ? ⍒ ⍋ ⍉ ⊃ ⌷ ⍸</code></td>
<td><code>⌸ @ []</code></td>
</tr>
<tr>
<td><code>⎕ML</code></td>
<td><code>∊ ↑ ⊃ ≡</code></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>⎕PP</code></td>
<td><code>⍕</code></td>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>⎕RL</code></td>
<td><code>?</code></td>
<td><code>?</code></td>
<td> </td>
</tr>
</tbody>
</table>
<p>where, for <code>⎕FR</code>, <code>1</code> indicates functions that compute real numbers and whose precision depends on <code>⎕FR</code>, <code>2</code> indicates functions that perform tolerant comparisons and <code>3</code> indicates functions that perform tolerant comparisons.</p>
<p>NOTE: Tolerant comparisons depend on <code>⎕FR</code> to select which of <code>⎕CT</code> and <code>⎕DCT</code> is used; <code>⎕FR</code> also determines the precision of the comparison computation that can affect results. However, even primitives involving intolerant comparison (including the tolerant ones with all comparison tolerances set to 0) can depend on <code>⎕FR</code> if the argument contains DECFs. This is because DECFs must be converted to doubles for comparison. If two DECFs are different but correspond to the same double, then they will be treated as intolerantly unequal when <code>⎕FR</code> is <code>1287</code> but equal when it is <code>645</code>.</p>
<h4>Session Information/Management</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕AI</code></td>
<td>Account Information</td>
</tr>
<tr>
<td><code>⎕AN</code></td>
<td>Account Name</td>
</tr>
<tr>
<td><code>⎕CLEAR</code></td>
<td>Clear workspace (WS)</td>
</tr>
<tr>
<td><code>⎕CY</code></td>
<td>Copy objects into active WS</td>
</tr>
<tr>
<td><code>⎕DL</code></td>
<td>Delay execution</td>
</tr>
<tr>
<td><code>⎕LOAD</code></td>
<td>Load a saved WS</td>
</tr>
<tr>
<td><code>⎕OFF</code></td>
<td>End the session</td>
</tr>
<tr>
<td><code>⎕PATH</code></td>
<td>Search Path</td>
</tr>
<tr>
<td><code>⎕SAVE</code></td>
<td>Save the active WS</td>
</tr>
<tr>
<td><code>⎕TS</code></td>
<td>Timestamp</td>
</tr>
</tbody>
</table>
<h4>Constants</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕A</code></td>
<td>Alphabetic upper case characters</td>
</tr>
<tr>
<td><code>⎕D</code></td>
<td>Digits</td>
</tr>
<tr>
<td><code>⎕NULL</code></td>
<td>Null Item</td>
</tr>
</tbody>
</table>
<h4>Tools and Access to External Utilities</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕C</code></td>
<td>Case Convert</td>
</tr>
<tr>
<td><code>⎕CMD</code></td>
<td>Execute the Windows Command Processor or another program</td>
</tr>
<tr>
<td><code>⎕CMD</code></td>
<td>Start a Windows AP</td>
</tr>
<tr>
<td><code>⎕CSV</code></td>
<td>Comma Separated Values</td>
</tr>
<tr>
<td><code>⎕DR</code></td>
<td>Data Representation (Monadic)</td>
</tr>
<tr>
<td><code>⎕DR</code></td>
<td>Data Representation (Dyadic)</td>
</tr>
<tr>
<td><code>⎕DT</code></td>
<td>Datetime</td>
</tr>
<tr>
<td><code>⎕FMT</code></td>
<td>Resolve display</td>
</tr>
<tr>
<td><code>⎕FMT</code></td>
<td>Format array</td>
</tr>
<tr>
<td><code>⎕JSON</code></td>
<td>JSON Convert</td>
</tr>
<tr>
<td><code>⎕MAP</code></td>
<td>Map a file</td>
</tr>
<tr>
<td><code>⎕NA</code></td>
<td>Declare a DLL function</td>
</tr>
<tr>
<td><code>⎕R</code></td>
<td>Replace</td>
</tr>
<tr>
<td><code>⎕S</code></td>
<td>Search</td>
</tr>
<tr>
<td><code>⎕SH</code></td>
<td>Execute a UNIX command or another program</td>
</tr>
<tr>
<td><code>⎕SH</code></td>
<td>Start a UNIX AP</td>
</tr>
<tr>
<td><code>⎕UCS</code></td>
<td>Unicode Convert</td>
</tr>
<tr>
<td><code>⎕USING</code></td>
<td>Microsoft .NET Search Path</td>
</tr>
<tr>
<td><code>⎕VFI</code></td>
<td>Verify and Fix numeric</td>
</tr>
<tr>
<td><code>⎕XML</code></td>
<td>XML Convert</td>
</tr>
</tbody>
</table>
<h4>Manipulating Functions and Operators</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕AT</code></td>
<td>Object Attributes</td>
</tr>
<tr>
<td><code>⎕CR</code></td>
<td>Canonical Representation</td>
</tr>
<tr>
<td><code>⎕ED</code></td>
<td>Edit one or more objects</td>
</tr>
<tr>
<td><code>⎕EX</code></td>
<td>Expunge objects</td>
</tr>
<tr>
<td><code>⎕FX</code></td>
<td>Fix definition</td>
</tr>
<tr>
<td><code>⎕LOCK</code></td>
<td>Lock a function</td>
</tr>
<tr>
<td><code>⎕MONITOR</code></td>
<td>Monitor set</td>
</tr>
<tr>
<td><code>⎕MONITOR</code></td>
<td>Monitor query</td>
</tr>
<tr>
<td><code>⎕OR</code></td>
<td>Object Representation</td>
</tr>
<tr>
<td><code>⎕NR</code></td>
<td>Nested Representation</td>
</tr>
<tr>
<td><code>⎕PROFILE</code></td>
<td>Profile Application</td>
</tr>
<tr>
<td><code>⎕REFS</code></td>
<td>Local References</td>
</tr>
<tr>
<td><code>⎕STOP</code></td>
<td>Set Stop vector</td>
</tr>
<tr>
<td><code>⎕STOP</code></td>
<td>Query Stop vector</td>
</tr>
<tr>
<td><code>⎕TRACE</code></td>
<td>Set Trace vector</td>
</tr>
<tr>
<td><code>⎕TRACE</code></td>
<td>Query Trace vector</td>
</tr>
<tr>
<td><code>⎕VR</code></td>
<td>Vector Representation</td>
</tr>
</tbody>
</table>
<h4>Namespaces and Objects</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕BASE</code></td>
<td>Base Class</td>
</tr>
<tr>
<td><code>⎕CLASS</code></td>
<td>Class</td>
</tr>
<tr>
<td><code>⎕CS</code></td>
<td>Change Space</td>
</tr>
<tr>
<td><code>⎕DF</code></td>
<td>Display Format</td>
</tr>
<tr>
<td><code>⎕FIX</code></td>
<td>Fix</td>
</tr>
<tr>
<td><code>⎕INSTANCES</code></td>
<td>Instances</td>
</tr>
<tr>
<td><code>⎕NEW</code></td>
<td>New Instance</td>
</tr>
<tr>
<td><code>⎕NS</code></td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕SRC</code></td>
<td>Source</td>
</tr>
<tr>
<td><code>⎕THIS</code></td>
<td>This</td>
</tr>
</tbody>
</table>
<h4>Input/Output</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕</code></td>
<td>Evaluated Input/Output</td>
</tr>
<tr>
<td><code>⍞</code></td>
<td>Character Input/Output</td>
</tr>
<tr>
<td><code>⎕ARBIN</code></td>
<td>Arbitrary Input</td>
</tr>
<tr>
<td><code>⎕ARBOUT</code></td>
<td>Arbitrary Output</td>
</tr>
<tr>
<td><code>⎕RTL</code></td>
<td>Response Time Limit</td>
</tr>
</tbody>
</table>
<h4>Component Files</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕FAPPEND</code></td>
<td>Append a component to File</td>
</tr>
<tr>
<td><code>⎕FAVAIL</code></td>
<td>File system Availability</td>
</tr>
<tr>
<td><code>⎕FCHK</code></td>
<td>File Check and Repair</td>
</tr>
<tr>
<td><code>⎕FCOPY</code></td>
<td>Copy a File</td>
</tr>
<tr>
<td><code>⎕FCREATE</code></td>
<td>Create a File</td>
</tr>
<tr>
<td><code>⎕FDROP</code></td>
<td>Drop a block of components</td>
</tr>
<tr>
<td><code>⎕FERASE</code></td>
<td>Erase a File</td>
</tr>
<tr>
<td><code>⎕FHIST</code></td>
<td>File History</td>
</tr>
<tr>
<td><code>⎕FHOLD</code></td>
<td>File Hold</td>
</tr>
<tr>
<td><code>⎕FLIB</code></td>
<td>List File Library</td>
</tr>
<tr>
<td><code>⎕FNAMES</code></td>
<td>Names of tied Files</td>
</tr>
<tr>
<td><code>⎕FNUMS</code></td>
<td>Tie Numbers of tied Files</td>
</tr>
<tr>
<td><code>⎕FPROPS</code></td>
<td>File Properties</td>
</tr>
<tr>
<td><code>⎕FRDAC</code></td>
<td>Read File Access matrix</td>
</tr>
<tr>
<td><code>⎕FRDCI</code></td>
<td>Read Component Information</td>
</tr>
<tr>
<td><code>⎕FREAD</code></td>
<td>Read a component from File</td>
</tr>
<tr>
<td><code>⎕FRENAME</code></td>
<td>Rename a File</td>
</tr>
<tr>
<td><code>⎕FREPLACE</code></td>
<td>Replace a component on File</td>
</tr>
<tr>
<td><code>⎕FRESIZE</code></td>
<td>File Resize</td>
</tr>
<tr>
<td><code>⎕FSIZE</code></td>
<td>File Size</td>
</tr>
<tr>
<td><code>⎕FSTAC</code></td>
<td>Set File Access matrix</td>
</tr>
<tr>
<td><code>⎕FSTIE</code></td>
<td>Share-Tie a File</td>
</tr>
<tr>
<td><code>⎕FTIE</code></td>
<td>Tie a File exclusively</td>
</tr>
<tr>
<td><code>⎕FUNTIE</code></td>
<td>Untie Files</td>
</tr>
</tbody>
</table>
<h4>Native Files</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕MKDIR</code></td>
<td>Create a directory</td>
</tr>
<tr>
<td><code>⎕NAPPEND</code></td>
<td>Append to File</td>
</tr>
<tr>
<td><code>⎕NCOPY</code></td>
<td>Copy files and directories</td>
</tr>
<tr>
<td><code>⎕NCREATE</code></td>
<td>Create a File</td>
</tr>
<tr>
<td><code>⎕NDELETE</code></td>
<td>Delete a File or Directory</td>
</tr>
<tr>
<td><code>⎕NERASE</code></td>
<td>Erase a File</td>
</tr>
<tr>
<td><code>⎕NEXISTS</code></td>
<td>Discover whether or not a file or directory exists</td>
</tr>
<tr>
<td><code>⎕NGET</code></td>
<td>Read Text File</td>
</tr>
<tr>
<td><code>⎕NINFO</code></td>
<td>Obtain information about one or more files and/or directories</td>
</tr>
<tr>
<td><code>⎕NLOCK</code></td>
<td>Lock a region of a file</td>
</tr>
<tr>
<td><code>⎕NMOVE</code></td>
<td>Move files and directories</td>
</tr>
<tr>
<td><code>⎕NNAMES</code></td>
<td>Names of tied Files</td>
</tr>
<tr>
<td><code>⎕NNUMS</code></td>
<td>Tie Numbers of tied Files</td>
</tr>
<tr>
<td><code>⎕NPARTS</code></td>
<td>Split a file name into its constituent parts.</td>
</tr>
<tr>
<td><code>⎕NPUT</code></td>
<td>Write Text File</td>
</tr>
<tr>
<td><code>⎕NREAD</code></td>
<td>Read from File</td>
</tr>
<tr>
<td><code>⎕NRENAME</code></td>
<td>Rename a File</td>
</tr>
<tr>
<td><code>⎕NREPLACE</code></td>
<td>Replace data on File</td>
</tr>
<tr>
<td><code>⎕NRESIZE</code></td>
<td>File Resize</td>
</tr>
<tr>
<td><code>⎕NSIZE</code></td>
<td>File Size</td>
</tr>
<tr>
<td><code>⎕NTIE</code></td>
<td>Tie a File exclusively</td>
</tr>
<tr>
<td><code>⎕NUNTIE</code></td>
<td>Untie Files</td>
</tr>
<tr>
<td><code>⎕NXLATE</code></td>
<td>Specify Translation Table</td>
</tr>
</tbody>
</table>
<h4>Threads</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕TALLOC</code></td>
<td>Allocate Token Range</td>
</tr>
<tr>
<td><code>⎕TCNUMS</code></td>
<td>Thread Child Numbers</td>
</tr>
<tr>
<td><code>⎕TID</code></td>
<td>Current Thread Identity</td>
</tr>
<tr>
<td><code>⎕TKILL</code></td>
<td>Kill Threads</td>
</tr>
<tr>
<td><code>⎕TNAME</code></td>
<td>Current Thread Name</td>
</tr>
<tr>
<td><code>⎕TNUMS</code></td>
<td>Thread Numbers</td>
</tr>
<tr>
<td><code>⎕TSYNC</code></td>
<td>Wait for Threads to Terminate</td>
</tr>
</tbody>
</table>
<h4>Synchronisation</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕TALLOC</code></td>
<td>Allocate Token Range</td>
</tr>
<tr>
<td><code>⎕TGET</code></td>
<td>Get Tokens</td>
</tr>
<tr>
<td><code>⎕TKILL</code></td>
<td>Kill Threads</td>
</tr>
<tr>
<td><code>⎕TPOOL</code></td>
<td>Token Pool</td>
</tr>
<tr>
<td><code>⎕TPUT</code></td>
<td>Put Tokens</td>
</tr>
<tr>
<td><code>⎕TREQ</code></td>
<td>Token Requests</td>
</tr>
</tbody>
</table>
<h4>Error Handling</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕DM</code></td>
<td>Diagnostic Message</td>
</tr>
<tr>
<td><code>⎕DMX</code></td>
<td>Extended Diagnostic Message</td>
</tr>
<tr>
<td><code>⎕EM</code></td>
<td>Event Messages</td>
</tr>
<tr>
<td><code>⎕EN</code></td>
<td>Event Number</td>
</tr>
<tr>
<td><code>⎕EXCEPTION</code></td>
<td>Reports the most recent Microsoft .NET Exception</td>
</tr>
<tr>
<td><code>⎕SIGNAL</code></td>
<td>Signal event</td>
</tr>
<tr>
<td><code>⎕TRAP</code></td>
<td>Event Trap</td>
</tr>
</tbody>
</table>
<h4>Stack and Workspace Information</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕LC</code></td>
<td>Line Count</td>
</tr>
<tr>
<td><code>⎕LX</code></td>
<td>Latent Expression</td>
</tr>
<tr>
<td><code>⎕NC</code></td>
<td>Name Classification</td>
</tr>
<tr>
<td><code>⎕NL</code></td>
<td>Name List</td>
</tr>
<tr>
<td><code>⎕NSI</code></td>
<td>Namespace Indicator</td>
</tr>
<tr>
<td><code>⎕RSI</code></td>
<td>Space Indicator</td>
</tr>
<tr>
<td><code>⎕SI</code></td>
<td>State Indicator</td>
</tr>
<tr>
<td><code>⎕SHADOW</code></td>
<td>Shadow names</td>
</tr>
<tr>
<td><code>⎕SIZE</code></td>
<td>Size of objects</td>
</tr>
<tr>
<td><code>⎕STACK</code></td>
<td>Report Stack</td>
</tr>
<tr>
<td><code>⎕STATE</code></td>
<td>Return State of an object</td>
</tr>
<tr>
<td><code>⎕WA</code></td>
<td>Workspace Available</td>
</tr>
<tr>
<td><code>⎕WSID</code></td>
<td>Workspace Identification</td>
</tr>
<tr>
<td><code>⎕XSI</code></td>
<td>Extended State Indicator</td>
</tr>
</tbody>
</table>
<h4>Shared Variables</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕SVC</code></td>
<td>Set access Control</td>
</tr>
<tr>
<td><code>⎕SVC</code></td>
<td>Query access Control</td>
</tr>
<tr>
<td><code>⎕SVO</code></td>
<td>Shared Variable Offer</td>
</tr>
<tr>
<td><code>⎕SVO</code></td>
<td>Query degree of coupling</td>
</tr>
<tr>
<td><code>⎕SVQ</code></td>
<td>Shared Variable Query</td>
</tr>
<tr>
<td><code>⎕SVR</code></td>
<td>Retract offer</td>
</tr>
<tr>
<td><code>⎕SVS</code></td>
<td>Query Shared Variable State</td>
</tr>
</tbody>
</table>
<h4>GUI and COM Support</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕DQ</code></td>
<td>Await and process events</td>
</tr>
<tr>
<td><code>⎕EXPORT</code></td>
<td>Export objects</td>
</tr>
<tr>
<td><code>⎕NQ</code></td>
<td>Place an event on the Queue</td>
</tr>
<tr>
<td><code>⎕WC</code></td>
<td>Create GUI object</td>
</tr>
<tr>
<td><code>⎕WG</code></td>
<td>Get GUI object properties</td>
</tr>
<tr>
<td><code>⎕WN</code></td>
<td>Query GUI object Names</td>
</tr>
<tr>
<td><code>⎕WS</code></td>
<td>Set GUI object properties</td>
</tr>
<tr>
<td><code>⎕WX</code></td>
<td>Expose GUI property names</td>
</tr>
</tbody>
</table>
<h4>Miscellaneous</h4>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕Á</code></td>
<td>Underscored Alphabetic Characters</td>
</tr>
<tr>
<td><code>⎕AV</code></td>
<td>Atomic Vector</td>
</tr>
<tr>
<td><code>⎕AVU</code></td>
<td>Atomic Vector - Unicode</td>
</tr>
<tr>
<td><code>⎕KL</code></td>
<td>Key Labels</td>
</tr>
<tr>
<td><code>⎕PFKEY</code></td>
<td>Programmable Function Keys</td>
</tr>
<tr>
<td><code>⎕SD</code></td>
<td>Screen Dimensions</td>
</tr>
<tr>
<td><code>⎕SM</code></td>
<td>Screen Map</td>
</tr>
<tr>
<td><code>⎕SR</code></td>
<td>Screen Read</td>
</tr>
<tr>
<td><code>⎕OPT</code></td>
<td>Variant Operator</td>
</tr>
<tr>
<td><code>⎕TC</code></td>
<td>Terminal Control</td>
</tr>
<tr>
<td><code>⎕XT</code></td>
<td>Associate External variable</td>
</tr>
<tr>
<td><code>⎕XT</code></td>
<td>Query External variable</td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-summary-tables-system-variables">
<h2 id="system-functions-summary-tables-system-variables-header"> System Variables</h2>
<p>System variables retain information used by the system in some way. Many system variables affect the behaviour of primitive functions and operators to which they act as <em>implicit arguments</em> For further information, see <i>System Settings</i>.</p>
<p>System variables may be localised by inclusion in the header line of a defined function or in the argument list of the system function <code>⎕SHADOW</code>. When a system variable is localised, it retains its previous value until it is assigned a new one. This feature is known as "pass-through localisation".  The exception to this rule is <code>⎕TRAP</code>.</p>
<p>A system variable can never be undefined. Default values are assigned to all system variables in a clear workspace.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Scope</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕AVU</code></td>
<td>Atomic Vector – Unicode</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕CT</code></td>
<td>Comparison Tolerance</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕DCT</code></td>
<td>Decimal Comp Tolerance</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕DIV</code></td>
<td>Division Method</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕FR</code></td>
<td>Floating-Point Representation</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕IO</code></td>
<td>Index Origin</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕LX</code></td>
<td>Latent Expression</td>
<td>Workspace</td>
</tr>
<tr>
<td><code>⎕ML</code></td>
<td>Migration Level</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕PATH</code></td>
<td>Search Path</td>
<td>Session</td>
</tr>
<tr>
<td><code>⎕PP</code></td>
<td>Print Precision</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕PW</code></td>
<td>Print Width</td>
<td>Session</td>
</tr>
<tr>
<td><code>⎕RL</code></td>
<td>Random Link</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕RTL</code></td>
<td>Response Time Limit</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕SM</code></td>
<td>Screen Map</td>
<td>Workspace</td>
</tr>
<tr>
<td><code>⎕TNAME</code></td>
<td>Thread Name</td>
<td>Workspace</td>
</tr>
<tr>
<td><code>⎕TRAP</code></td>
<td>Event Trap</td>
<td>Workspace</td>
</tr>
<tr>
<td><code>⎕USING</code></td>
<td>Microsoft .NET Search Path</td>
<td>Namespace</td>
</tr>
<tr>
<td><code>⎕WSID</code></td>
<td>Workspace ID</td>
<td>Workspace</td>
</tr>
<tr>
<td><code>⎕WX</code></td>
<td>Window Expose</td>
<td>Namespace</td>
</tr>
</tbody>
</table>
<p>In other words,  <code>⎕PATH</code> and <code>⎕PW</code> relate to the session.  <code>⎕LX</code>, <code>⎕SM</code>, <code>⎕TRAP</code> and <code>⎕WSID</code> relate to the active workspace.  All the other system variables relate to the current namespace.</p>
<table>
<thead>
<tr>
<th>Session</th>
<th>Workspace</th>
<th>Namespace</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>⎕PATH</code></td>
<td><code>⎕LX</code></td>
<td><code>⎕AVU</code></td>
</tr>
<tr>
<td><code>⎕PW</code></td>
<td><code>⎕SM</code></td>
<td><code>⎕CT</code></td>
</tr>
<tr>
<td> </td>
<td><code>⎕TRAP</code></td>
<td><code>⎕DCT</code></td>
</tr>
<tr>
<td> </td>
<td><code>⎕WSID</code></td>
<td><code>⎕DIV</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕FR</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕IO</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕ML</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕PP</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕RL</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕RTL</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕USING</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
<td><code>⎕WX</code></td>
</tr>
</tbody>
</table>
<p>Note that the value assigned to a system variable must be appropriate; otherwise an error will be reported immediately.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">3</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">3</span>
<span class="w">      </span><span class="err">^</span>
</code></pre></div>
</article>
<article id="system-functions-summary-tables-functions-a-z">
<h2 id="system-functions-summary-tables-functions-a-z-header"> Functions (A-Z)</h2>
<p>The remainder of this Chapter describes the system functions, constants and variables one-by-one, in alphabetical order of their descriptive names.</p>
</article>
<section id="system-functions-and-variables-system-functions-a-z-">
<h2 id="system-functions-and-variables-system-functions-a-z--header">System Functions (A-Z)</h2>
<article id="system-functions-character-input-output">
<div class="heading-container"><h3 class="heading" id="system-functions-character-input-output-header">Character Input/Output</h3><div class="command">⍞</div></div>
<p><code>⍞</code> is a variable which communicates between the user's terminal and APL.  Its behaviour depends on whether it is being assigned or referenced.</p>
<p>When <code>⍞</code> is assigned with a vector or a scalar, the array is displayed without the normal ending new-line character.  Successive assignments of vectors or scalars to <code>⍞</code> without any intervening input or output cause the arrays to be displayed on the same output line.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'2+2'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'='</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="m">4</span>
<span class="m">2</span><span class="o">+</span><span class="m">2</span><span class="o">=</span><span class="m">4</span>
</code></pre></div>
<p>Output through <code>⍞</code> is independent of the print width in <code>⎕PW</code>.  The way in which lines exceeding the print width of the terminal are treated is dependent on the characteristics of the terminal.  Numeric output is formatted in the same manner as direct output (see <i>Programmer's Guide: Display of Arrays</i>).</p>
<p>When <code>⍞</code> is assigned with a higher-rank array, the output is displayed in the same manner as for direct output except that the print width <code>⎕PW</code> is ignored.</p>
<p>When <code>⍞</code> is referenced, terminal input is expected without any specific prompt, and the response is returned as a character vector.</p>
<p>If the <code>⍞</code> request was preceded by one or more assignments to <code>⍞</code> without any intervening input or output, the last (or only) line of the output characters are returned as part of the response.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">mat</span><span class="kd">←</span><span class="o">↑⌽</span><span class="vg">⍞⍞⍞⍞⍞</span>
</code></pre></div>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'OPTION : '</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
<span class="nv">OPTION</span><span class="w"> </span><span class="bp">:</span><span class="w"> </span><span class="nv">INPUT</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">R</span>
<span class="nv">OPTION</span><span class="w"> </span><span class="bp">:</span><span class="w"> </span><span class="nv">INPUT</span>
<span class="w"> </span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">R</span>
<span class="m">14</span>
</code></pre></div>
<p>The output of simple arrays of rank greater than 1 through <code>⍞</code> includes a new-line character at the end of each line.  Input through <code>⍞</code> includes the preceding output through <code>⍞</code> since the last new-line character.</p>
<p>A soft interrupt causes an <code>INPUT INTERRUPT</code> error if entered while <code>⍞</code> is awaiting input, and execution is then suspended (unless the interrupt is trapped):</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
</code></pre></div>
<p>(Interrupt)
<div class="highlight"><pre><span></span><code><span class="nv">INPUT</span><span class="w"> </span><span class="nv">INTERRUPT</span>
</code></pre></div></p>
<p>A time limit is imposed on input through <code>⍞</code> if <code>⎕RTL</code> is set to a non-zero value:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RTL</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'PASSWORD ? '</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
<span class="nv">PASSWORD</span><span class="w"> </span><span class="o">?</span>
<span class="nv">TIMEOUT</span>
<span class="w">      </span><span class="nf">⎕RTL</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'PASSWORD : '</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
<span class="w">                                   </span><span class="err">^</span>
</code></pre></div></p>
<p>The <code>TIMEOUT</code> interrupt is a trappable event.</p>
</article>
<article id="system-functions-evaluated-input-output">
<div class="heading-container"><h3 class="heading" id="system-functions-evaluated-input-output-header">Evaluated Input/Output</h3><div class="command">⎕</div></div>
<p><code>⎕</code> is a variable which communicates between the user's terminal and APL.  Its behaviour depends on whether it is being assigned or referenced.</p>
<p>When <code>⎕</code> is assigned an array, the array is displayed at the terminal in exactly the same form as is direct output (see <i>Programmer's Guide: Display of Arrays</i>).</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="o">+⍳</span><span class="m">5</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
<span class="w"> </span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'WINEMART'</span>
<span class="nv">WINE</span>
<span class="nv">MART</span>
</code></pre></div>
<p>When <code>⎕</code> is referenced, a prompt (<code>⎕:</code>) is displayed at the terminal, and input is requested.  The response is evaluated and an array is returned if the result is valid.  If an error occurs in the evaluation, the error is reported as normal (unless trapped by a <code>⎕TRAP</code> definition) and the prompt (<code>⎕:</code>) is again displayed for input.  An EOF interrupt reports <code>INPUT INTERRUPT</code> and the prompt (<code>⎕:</code>) is again displayed for input.  A soft interrupt is ignored and a hard interrupt reports <code>INTERRUPT</code> and the prompt (<code>⎕:</code>) is redisplayed for input.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="o">×</span><span class="vg">⎕</span><span class="o">+</span><span class="m">2</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="o">⍳</span><span class="m">3</span>
<span class="m">30</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">50</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">2</span><span class="o">+</span><span class="vg">⎕</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="nv">X</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nv">X</span>
<span class="w">     </span><span class="err">^</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="m">2</span><span class="o">+⍳</span><span class="m">3</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span>
</code></pre></div>
<p>A system command may be entered.  The system command is effected and the prompt is displayed again (unless the system command changes the environment):
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="m">3</span><span class="o">,</span><span class="vg">⎕</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="p">)</span><span class="nv">WSID</span>
<span class="nv">WS</span><span class="na">/</span><span class="nv">MYWORK</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="vg">⎕</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">CLEAR</span><span class="w"> </span><span class="nv">WS</span>
</code></pre></div></p>
<p>If the response to a <code>⎕:</code> prompt is an abort statement (<code>→</code>), the execution will be aborted:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">⎕</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="kd">→</span>
</code></pre></div></p>
<p>A trap definition on interrupt events set for the system variable <code>⎕TRAP</code> in the range 1000-1008 has no effect whilst awaiting input in response to a <code>⎕:</code> prompt.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="p">(</span><span class="m">11</span><span class="w"> </span><span class="s1">'C'</span><span class="w"> </span><span class="s1">'''ERROR'''</span><span class="p">)(</span><span class="m">1000</span><span class="w"> </span><span class="s1">'C'</span><span class="w"> </span><span class="s1">'''STOP'''</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">2</span><span class="o">+</span><span class="vg">⎕</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="p">(</span><span class="nv">Interrupt</span><span class="w"> </span><span class="nv">Signal</span><span class="p">)</span>
<span class="nv">INTERRUPT</span>
<span class="vg">⎕</span><span class="bp">:</span>
<span class="w">      </span><span class="s1">'C'</span><span class="o">+</span><span class="m">2</span>
<span class="nv">ERROR</span>
</code></pre></div>
<p>A time limit set in system variable <code>⎕RTL</code> has no effect whilst awaiting input in response to a <code>⎕:</code> prompt.</p>
</article>
<article id="system-functions-underscored-alphabetic-characters">
<div class="heading-container"><h3 class="heading" id="system-functions-underscored-alphabetic-characters-header">Underscored Alphabetic Characters</h3><div class="command">R←⎕Ⓐ</div></div>
<p><code>⎕Ⓐ</code> is a deprecated feature. Dyalog <strong>strongly</strong> recommends that you move away from the use of <code>⎕Ⓐ</code> and of the underscored alphabet itself, as these symbols now constitute the sole remaining non-standard use of characters in Dyalog applications.</p>
<p>In Versions of Dyalog APL prior to Version 11.0, <code>⎕Ⓐ</code> was a simple character vector, composed of the letters of the alphabet with underscores. If the Dyalog Alt font was in use, these symbols displayed as additional National Language characters.</p>
<h5>Version 10.1 and Earlier</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="err">Ⓐ</span>
<span class="err">ⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ</span>
</code></pre></div>
<p>For compatibility with previous versions of Dyalog APL, functions that contain references to <code>⎕Ⓐ</code> will continue to return characters with the same <em>index</em> in <code>⎕AV</code> as before. However, the display of <code>⎕Ⓐ</code> is now <code>⎕Á</code>, and the old underscored symbols appear as they did in previous Versions when the Dyalog Alt font was in use.</p>
<h5>Current Version</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="err">Á</span>
<span class="err">ÁÂÃÇÈÊËÌÍÎÏÐÒÓÔÕÙÚÛÝþãìðòõ</span>
</code></pre></div>
</article>
<article id="system-functions-a">
<div class="heading-container"><h3 class="heading" id="system-functions-a-header">Alphabetic Characters</h3><div class="command">R←⎕A</div></div>
<p>This is a simple character vector, composed of the letters of the alphabet.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕A</span>
<span class="nv">ABCDEFGHIJKLMNOPQRSTUVWXYZ</span>
</code></pre></div>
</article>
<article id="system-functions-ai">
<div class="heading-container"><h3 class="heading" id="system-functions-ai-header">Account Information</h3><div class="command">R←⎕AI</div></div>
<p>This is a simple integer vector, whose four elements are:</p>
<table>
<tbody>
<tr>
<td><code>⎕AI[1]</code></td>
<td>user identification. <span class="footnote">Under Windows, this is the aplnid (network ID from configuration dialog box). Under UNIX and Linux this is the effective UID of the account whereas ⎕AN returns the real name.</span></td>
</tr>
<tr>
<td><code>⎕AI[2]</code></td>
<td>compute time for the APL session in milliseconds.</td>
</tr>
<tr>
<td><code>⎕AI[3]</code></td>
<td>connect time for the APL session in milliseconds.</td>
</tr>
<tr>
<td><code>⎕AI[4]</code></td>
<td>keying time for the APL session in milliseconds.</td>
</tr>
</tbody>
</table>
<p>Elements beyond 4 are not defined but reserved.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nf">⎕AI</span>
<span class="m">52</span><span class="w"> </span><span class="m">7396</span><span class="w"> </span><span class="m">2924216</span><span class="w"> </span><span class="m">2814831</span>
</code></pre></div>
</article>
<article id="system-functions-an">
<div class="heading-container"><h3 class="heading" id="system-functions-an-header">Account Name</h3><div class="command">R←⎕AN</div></div>
<p>This is a simple character vector containing the user (login) name. Under UNIX and Linux this is the real user name, whereas <code>⎕AI</code> returns the effective user id.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕AN</span>
<span class="nv">Pete</span>

<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕AN</span>
<span class="m">4</span>
</code></pre></div>
</article>
<article id="system-functions-arbin">
<div class="heading-container"><h3 class="heading" id="system-functions-arbin-header">Arbitrary Input</h3><div class="command">R←X ⎕ARBIN Y</div></div>
<p>This transmits a stream of 8-bit codes in <code>Y</code> to an output device specified by <code>X</code> prior to reading from an input device specified by <code>X</code>.</p>
<p><code>Y</code> may be a scalar or a simple vector of integer numbers in the range 0-255.</p>
<p><code>X</code> may take several forms:</p>
<table>
<tbody>
<tr>
<td><code>terminate (input output)</code></td>
<td><code>⎕ARBIN</code></td>
<td><code>codes</code></td>
</tr>
<tr>
<td><code>terminate input</code></td>
<td><code>⎕ARBIN</code></td>
<td><code>codes</code></td>
</tr>
</tbody>
</table>
<h5>terminate</h5>
<p>This is a numeric scalar or vector that specifies how the read operation should be terminated.</p>
<ul>
<li>If it is a numeric scalar, it defines the number of bytes to be read.</li>
<li>If it is a numeric vector, it defines a set of terminating bytes.</li>
<li>If it is the null vector, the read terminates on Newline (10).</li>
</ul>
<h5>input</h5>
<p>This is a simple numeric scalar that specifies the input device.</p>
<ul>
<li>If it is positive or zero, it represents a file descriptor that must have been associated by the command that started Dyalog APL.</li>
<li>If it is negative, it represents the tie number of a file opened by <code>⎕NTIE</code> or <code>⎕NCREATE</code>.</li>
</ul>
<h5>output</h5>
<p>If specified, this is a simple numeric integer that identifies the output device.</p>
<ul>
<li>If it is positive or zero, it represents a file descriptor that must have been associated by the command that started Dyalog APL.</li>
<li>If it is negative, it represents the tie number of a file opened by <code>⎕NTIE</code> or <code>⎕NCREATE</code>.</li>
</ul>
<p>The result <code>R</code> is a simple numeric vector.  Each item of <code>R</code> is the numeric representation of an 8-bit code in the range 0 to 255 received from the input device.  The meaning of the code is dependent on the characteristics of the input device.  If a set of delimiters was defined by <code>terminate</code>, the last code returned will belong to that set.</p>
<p><code>⎕RTL</code> (Response Time Limit) is an implicit argument of <code>⎕ARBIN</code>.  This allows a time limit to be imposed on input.  If the time limit is reached, <code>⎕ARBIN</code> returns with the codes read up to that point. This does not apply under Windows.</p>
<p>The operation will fail with a <code>DOMAIN ERROR</code> if  <code>Y</code> contains anything other than numbers in the range 0-255, or  if the current process does not have permission to read from or write to the specified device(s).</p>
<h5>Examples (UNIX)</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">sh</span><span class="w"> </span><span class="nv">mkfifo</span><span class="w"> </span><span class="na">./</span><span class="nv">fifo</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">in</span><span class="kd">←</span><span class="s1">'./fifo'</span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">out</span><span class="kd">←</span><span class="s1">'./fifo'</span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="p">(</span><span class="nv">in</span><span class="w"> </span><span class="nv">out</span><span class="p">))</span><span class="nf">⎕ARBIN</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="nf">⎕D</span>
<span class="m">48</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">55</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">57</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="no">⍬</span><span class="w"> </span><span class="p">(</span><span class="nv">in</span><span class="w"> </span><span class="nv">out</span><span class="p">))</span><span class="nf">⎕ARBIN</span><span class="w"> </span><span class="m">10</span>
<span class="m">10</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">⍝ cope with parity on line ending 10</span>
<span class="w">      </span><span class="p">((</span><span class="m">10</span><span class="o">+</span><span class="m">0</span><span class="w"> </span><span class="m">128</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">in</span><span class="w"> </span><span class="nv">out</span><span class="p">))</span><span class="nf">⎕ARBIN</span><span class="w"> </span><span class="m">10</span>
<span class="m">10</span>
</code></pre></div></p>
</article>
<article id="system-functions-arbout">
<div class="heading-container"><h3 class="heading" id="system-functions-arbout-header">Arbitrary Output</h3><div class="command">{R}←X ⎕ARBOUT Y</div></div>
<p><code>Y</code> may be a scalar or a simple vector of integer numbers in the range 0-255.</p>
<p><code>X</code> is a simple numeric integer that specifies the output device.</p>
<ul>
<li>(Non-Windows platforms only) If <code>X</code> is positive or zero, it represents a file descriptor that must have been associated by the command that started Dyalog APL.</li>
<li>If <code>X</code> is negative, it represents the tie number of a file opened by <code>⎕NTIE</code> or <code>⎕NCREATE</code>.</li>
</ul>
<p>If <code>Y</code> is an empty vector, no codes are sent to the output device.</p>
<p>The shy result <code>R</code> is <code>⍬</code>.</p>
<p>The operation will fail with a <code>DOMAIN ERROR</code> if  <code>Y</code> contains anything other than numbers in the range 0-255 or tie numbers associated with currently open native files, or  if the current process does not have permission to write to the specified device.</p>
<p class="example">Examples</p>
<p>Write ASCII digits <code>'123'</code> to  stream 9:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">9</span><span class="w"> </span><span class="nf">⎕ARBOUT</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">51</span>
</code></pre></div></p>
<p>Write ASCII characters <code>'ABC'</code> to <code>MYFILE</code>:
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="s1">'MYFILE'</span><span class="w"> </span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">¯1</span>
<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕ARBOUT</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">67</span>
</code></pre></div></p>
<p>Append the string <code>'Κάλο Πάσχα'</code> to the same file, and close it:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕ARBOUT</span><span class="w"> </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="s1">'Κάλο Πάσχα'</span><span class="w"> </span>
<span class="w">      </span><span class="nf">⎕NUNTIE</span><span class="w"> </span><span class="m">¯1</span>
</code></pre></div></p>
</article>
<article id="system-functions-at">
<div class="heading-container"><h3 class="heading" id="system-functions-at-header">Attributes</h3><div class="command">R←{X} ⎕AT Y</div></div>
<p><code>Y</code> can be a simple character scalar, vector or matrix, or a vector of character vectors representing the names of 0 or more defined functions or operators. Used dyadically, this function closely emulates the APL2 implementation. Used monadically, it returns information that is more appropriate for Dyalog APL.</p>
<p><code>Y</code> specifies one or more names. If <code>Y</code> specifies a single name as a character scalar, a character vector, or as a scalar enclosed character vector, the result <code>R</code> is a vector. If <code>Y</code> specifies one or more names as a character matrix or as a vector of character vectors <code>R</code> is a matrix with one row per name in <code>Y</code>.</p>
<h5>Monadic Use</h5>
<p>If <code>X</code> is omitted, <code>R</code> is a 4-element vector or a 4 column matrix with the same number of rows as names in <code>Y</code> containing the following attribute information:</p>
<p><code>R[1]</code> or <code>R[;1]</code>: Each item is a 3-element integer vector representing the function header syntax:</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Function result</td>
<td>0 if the function has no result 1 if the function has an explicit result <code>¯1</code> if the function has a shy result</td>
</tr>
<tr>
<td>2</td>
<td>Function valence</td>
<td>0 if the object is a niladic function or not a function 1 if the object is a monadic function 2 if the object is a dyadic function <code>¯2</code> if the object is an ambivalent              function</td>
</tr>
<tr>
<td>3</td>
<td>Operator valence</td>
<td>0 if the object is not an operator 1 if the object is a monadic operator 2 if the object is a dyadic operator</td>
</tr>
</tbody>
</table>
<p>The following values correspond to the syntax shown alongside:
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">FOO</span>
<span class="w">        </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Z</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="w">       </span><span class="m">¯1</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="kt">{</span><span class="nv">Z</span><span class="kt">}</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="w">        </span><span class="m">0</span><span class="w"> </span><span class="m">¯2</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="kt">{</span><span class="nv">A</span><span class="kt">}</span><span class="w"> </span><span class="nv">FOO</span><span class="w"> </span><span class="nv">B</span>
<span class="w">       </span><span class="m">¯1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="kt">{</span><span class="nv">Z</span><span class="kt">}</span><span class="kd">←</span><span class="p">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">OP</span><span class="w"> </span><span class="nv">G</span><span class="p">)</span><span class="nv">B</span>
</code></pre></div></p>
<p><code>R[2]</code> or <code>R[;2]</code>: Each item is the (<code>⎕TS</code> form) timestamp of the time the function was last fixed.</p>
<p><code>R[3]</code> or <code>R[;3]</code>: Each item is an integer reporting the current <code>⎕LOCK</code> state of the function:</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>Not locked</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Cannot display function</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Cannot suspend function</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Cannot display or suspend</td>
</tr>
</tbody>
</table>
<p><code>R[4]</code> or <code>R[;4]</code>: Each item is a character vector - the network ID of the user who last fixed (edited) the function.</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="kt">{</span><span class="nv">z</span><span class="kt">}</span><span class="kd">←</span><span class="kt">{</span><span class="nv">l</span><span class="kt">}</span><span class="p">(</span><span class="nv">fn</span><span class="w"> </span><span class="nv">myop</span><span class="p">)</span><span class="nv">r</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="na">...</span>

<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">z</span><span class="kd">←</span><span class="nv">foo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="na">...</span>

<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">z</span><span class="kd">←</span><span class="kt">{</span><span class="nv">larg</span><span class="kt">}</span><span class="nv">util</span><span class="w"> </span><span class="nv">rarg</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="na">...</span>

<span class="w">      </span><span class="nf">⎕LOCK</span><span class="s1">'foo'</span>

<span class="w">      </span><span class="nv">util2</span><span class="kd">←</span><span class="nv">util</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nf">⎕AT</span><span class="w"> </span><span class="s1">'myop'</span><span class="w"> </span><span class="s1">'foo'</span><span class="w"> </span><span class="s1">'util'</span><span class="w"> </span><span class="s1">'util2'</span>
<span class="na">.</span><span class="kd">→</span><span class="o">--------------------------------------------</span><span class="na">.</span>
<span class="o">↓</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">------</span><span class="na">.</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">-----------------</span><span class="na">.</span><span class="w">     </span><span class="na">.</span><span class="kd">→</span><span class="o">---</span><span class="na">.</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">1</span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">1996</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="nv">john</span><span class="o">|</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'~------'</span><span class="w"> </span><span class="s1">'~-----------------'</span><span class="w">     </span><span class="s1">'----'</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">----</span><span class="na">.</span><span class="w">   </span><span class="na">.</span><span class="kd">→</span><span class="o">------------</span><span class="na">.</span><span class="w">          </span><span class="na">.</span><span class="o">⊖</span><span class="na">.</span><span class="w">      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">   </span><span class="o">|</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">        </span><span class="m">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'~----'</span><span class="w">   </span><span class="s1">'~------------'</span><span class="w">          </span><span class="s1">'-'</span><span class="w">      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">-----</span><span class="na">.</span><span class="w">  </span><span class="na">.</span><span class="kd">→</span><span class="o">------------------</span><span class="na">.</span><span class="w">    </span><span class="na">.</span><span class="kd">→</span><span class="o">---</span><span class="na">.</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">  </span><span class="o">|</span><span class="m">1996</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="nv">pete</span><span class="o">|</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'~-----'</span><span class="w">  </span><span class="s1">'~------------------'</span><span class="w">    </span><span class="s1">'----'</span><span class="w">   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">-----</span><span class="na">.</span><span class="w">  </span><span class="na">.</span><span class="kd">→</span><span class="o">-------------------</span><span class="na">.</span><span class="w">   </span><span class="na">.</span><span class="kd">→</span><span class="o">-----</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w">  </span><span class="o">|</span><span class="m">1998</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">0</span><span class="o">|</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="nv">graeme</span><span class="o">|</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'~-----'</span><span class="w">  </span><span class="s1">'~-------------------'</span><span class="w">   </span><span class="s1">'------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊--------------------------------------------'</span>
</code></pre></div></p>
<h5>Dyadic Use</h5>
<p>The dyadic form of <code>⎕AT</code> emulates APL2. It returns the same rank and shape result containing information that matches the APL2 implementation as closely as possible.</p>
<p>The number of elements or columns in <code>R</code> and their meaning depends upon the value of <code>X</code> which may be 1, 2, 3 or 4.</p>
<p>If <code>X</code> is 1, <code>R</code> specifies <em>valences</em> and contains 3 elements (or columns) whose meaning is as follows:</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Explicit result</td>
<td>1 if the object has an explicit result or is a variable 0 otherwise</td>
</tr>
<tr>
<td>2</td>
<td>Function valence</td>
<td>0 if the object is a niladic function or not a function 1 if the object is a monadic function 2 if the object is an ambivalent function</td>
</tr>
<tr>
<td>3</td>
<td>Operator valence</td>
<td>0 if the object is not an operator 1 if the object is a monadic operator 2 if the object is a dyadic operator</td>
</tr>
</tbody>
</table>
<p>If <code>X</code> is 2, <code>R</code> specifies <em>fix times</em> (the time the object was last updated) for functions and operators named in <code>Y</code>. The time is reported as 7 integer elements (or columns) whose meaning is as follows. The fix time reported for names in <code>Y</code> which are not defined functions or operators is 0.</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Year</td>
</tr>
<tr>
<td>2</td>
<td>Month</td>
</tr>
<tr>
<td>3</td>
<td>Day</td>
</tr>
<tr>
<td>4</td>
<td>Hour</td>
</tr>
<tr>
<td>5</td>
<td>Minute</td>
</tr>
<tr>
<td>6</td>
<td>Second</td>
</tr>
<tr>
<td>7</td>
<td>Milliseconds (this is always reported as 0)</td>
</tr>
</tbody>
</table>
<p>If <code>X</code> is 3, <code>R</code> specifies <em>execution properties</em> and contains 4 elements (or columns) whose meaning is as follows:</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Displayable</td>
<td>0 if the object is displayable 1 if the object is not displayable</td>
</tr>
<tr>
<td>2</td>
<td>Suspendable</td>
<td>0 if execution will suspend in the object 1 if execution will not suspend in the object</td>
</tr>
<tr>
<td>3</td>
<td>Weak Interrupt behaviour</td>
<td>0 if the object responds to interrupt 1 if the object ignores interrupt</td>
</tr>
<tr>
<td>4</td>
<td> </td>
<td>(always 0)</td>
</tr>
</tbody>
</table>
<p>If <code>X</code> is 4, <code>R</code> specifies <em>object size</em> and contains 2 elements (or columns) which both report the <code>⎕SIZE</code> of the object.</p>
</article>
<article id="system-functions-atx">
<div class="heading-container"><h3 class="heading" id="system-functions-atx-header">Extended Attributes</h3><div class="command">R←X ⎕ATX Y</div></div>
<p>This function provides information about a name in a workspace, including its usage, history, restrictions, role and origin.</p>
<p>Note: To retrieve this information for an unnamed value, wrap <code>⎕ATX</code> in a dfn and use the name <code>⍵</code>, for example <code>{60⎕ATX'⍵'}</code></p>
<p><code>Y</code> can be a simple character scalar, a simple or enclosed character vector, or a vector of character scalars and vectors  (as least one must be a character vector) of the name(s) for which information is required.</p>
<p><code>X</code> can be a scalar or a vector indicating the information required:</p>
<table>
<thead>
<tr>
<th>Group</th>
<th><code>X</code></th>
<th>Meaning</th>
<th>Default</th>
<th> </th>
</tr>
</thead>
<tbody>
<tr>
<td>Identity</td>
<td>0</td>
<td>Name</td>
<td><code>''</code></td>
<td> </td>
</tr>
<tr>
<td>Syntax</td>
<td>10</td>
<td>Function result ( <code>0</code> : none or not a function, <code>1</code> : explicit, <code>¯1</code> : shy)</td>
<td><code>0</code></td>
<td> </td>
</tr>
<tr>
<td>11</td>
<td>Function valence ( <code>0</code> : niladic, <code>1</code> : monadic, <code>2</code> : dyadic, <code>¯2</code> : ambivalent)</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>12</td>
<td>Operator valence: ( <code>0</code> : not an operator, <code>1</code> : monadic, <code>2</code> : dyadic)</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>Last edit</td>
<td>20</td>
<td>Author of last edit</td>
<td><code>''</code></td>
<td> </td>
</tr>
<tr>
<td>21</td>
<td>Number of days passed between 1899-12-31 at 00:00 UTC and last edit (includes fractional days)</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>22</td>
<td>Local timestamp at last edit (format is the 7-item vector described by <code>⎕TS</code> . See <a class="internal-link" href="#system-functions-nparts">Timestamp</a> )</td>
<td><code>⍬</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>23</td>
<td>Number of bytes required for storage without sharing</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>Restrictions</td>
<td>30</td>
<td>Source can be displayed</td>
<td><code>¯1</code></td>
<td> </td>
</tr>
<tr>
<td>31</td>
<td>Execution can be suspended mid-execution</td>
<td><code>¯1</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>32</td>
<td>Responds to weak interrupt</td>
<td><code>¯1</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>Class*</td>
<td>40</td>
<td>Syntactic supra-class ( <code>¯1</code> : invalid name, <code>0</code> : undefined, <code>1</code> : label, <code>2</code> : variable, <code>3</code> : function, <code>4</code> : operator, <code>8</code> : event, <code>9</code> : object)</td>
<td><code>¯1</code></td>
<td> </td>
</tr>
<tr>
<td>41</td>
<td>Syntactic sub-class ( <code>0</code> : none, <code>1</code> : traditional/plain, <code>2</code> : field/dynamic/instance, <code>3</code> : property/derived/primitive, <code>4</code> : class, <code>5</code> : interface, <code>6</code> : external, <code>7</code> : external interface)</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>42</td>
<td>Full syntactic class (sum of supra- and sub-class)</td>
<td><code>¯1</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>Source</td>
<td>50</td>
<td>File name</td>
<td><code>''</code></td>
<td> </td>
</tr>
<tr>
<td>51</td>
<td>File encoding</td>
<td><code>''</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>52</td>
<td>File checksum</td>
<td><code>''</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>53</td>
<td>File line separators ( <code>13</code> : Carriage Return, <code>10</code> : Line Feed, <code>13 10</code> : Carriage Return followed by Line Feed, <code>133</code> : New Line, <code>11</code> : Vertical Tab, <code>12</code> : Form Feed, <code>8232</code> : Line Separator, <code>8233</code> : Paragraph Separator)</td>
<td><code>⍬</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>54</td>
<td>Definition's offset from top</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>55</td>
<td>Number of lines in definition</td>
<td><code>0</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>Definition</td>
<td>60</td>
<td>Verbatim source (as typed)</td>
<td><code>0⍴⊂''</code></td>
<td> </td>
</tr>
<tr>
<td>61</td>
<td>Normalised source (with AUTOFORMAT=1 and TABSTOPS=4)</td>
<td><code>0⍴⊂''</code></td>
<td colspan="2"> </td>
</tr>
<tr>
<td>62</td>
<td>Most precise available source (verbatim with fallback to normalised)</td>
<td><code>0⍴⊂''</code></td>
<td colspan="2"> </td>
</tr>
</tbody>
</table>
<ul>
<li>Names in the Class group that can return <code>¯1</code> (meaning "invalid name") might return a different value in future versions of Dyalog, including values that are not currently possible and ones that deviate from the current <code>⎕NC</code> values.</li>
</ul>
<p><code>R</code> depends on the combination of <code>X</code> and <code>Y</code>:</p>
<table>
<thead>
<tr>
<th colspan="2"></th>
<th colspan="2"><code>X</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Scalar</td>
<td colspan="3">Vector</td>
</tr>
<tr>
<td><code>Y</code></td>
<td>Simple character scalar/vector</td>
<td>Requested value (not enclosed)</td>
<td>Vector of requested values</td>
</tr>
<tr>
<td>Enclosed character vector</td>
<td>Requested value (enclosed)</td>
<td colspan="2">Scalar containing vector of requested values</td>
</tr>
<tr>
<td>Vector of character scalars/vectors</td>
<td>Vector of requested values</td>
<td colspan="2">Outer shape from <code>⍴⍺</code> , inner shape from <code>⍴⍵</code></td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Att</span>
<span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">23</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">41</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">51</span><span class="w"> </span><span class="m">52</span><span class="w"> </span><span class="m">53</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">55</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">foo</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span>
<span class="w">      </span><span class="nv">Att</span><span class="w"> </span><span class="nf">⎕ATX</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="err">┌─┬──┬─┬┬───┬──┬──┬──┬─┬─┬───┬┬┬┬┬─┬─┐</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">¯2</span><span class="err">│</span><span class="m">0</span><span class="err">││</span><span class="m">616</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">3.2</span><span class="err">│││││</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span>
<span class="err">└─┴──┴─┴┴───┴──┴──┴──┴─┴─┴───┴┴┴┴┴─┴─┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="m">42</span>
<span class="w">      </span><span class="nv">Att</span><span class="w"> </span><span class="nf">⎕ATX</span><span class="w"> </span><span class="s1">'x'</span>
<span class="err">┌─┬─┬─┬┬──┬──┬──┬──┬─┬─┬───┬┬┬┬┬─┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">││</span><span class="m">32</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="m">2.1</span><span class="err">│││││</span><span class="m">0</span><span class="err">│</span><span class="m">0</span><span class="err">│</span>
<span class="err">└─┴─┴─┴┴──┴──┴──┴──┴─┴─┴───┴┴┴┴┴─┴─┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">41</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="nf">⎕ATX</span><span class="w"> </span><span class="s1">'x'</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="err">┌───┬────┬───┬─────┬─────┬─────┬───┬───┬───────┐</span>
<span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">¯2</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">2.1</span><span class="w"> </span><span class="m">3.2</span><span class="err">│</span>
<span class="err">└───┴────┴───┴─────┴─────┴─────┴───┴───┴───────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕FIX</span><span class="s1">'foo ← {'</span><span class="w"> </span><span class="s1">'⍵ ⍵ }'</span>
<span class="w">      </span><span class="m">60</span><span class="w"> </span><span class="m">61</span><span class="w"> </span><span class="nf">⎕ATX</span><span class="w"> </span><span class="s1">'foo'</span>
<span class="err">┌───────────────┬──────────────────┐</span>
<span class="err">│┌───────┬─────┐│┌──────┬─────────┐│</span>
<span class="err">││</span><span class="nv">foo</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="err">│</span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="kt">}</span><span class="err">│││</span><span class="w"> </span><span class="nv">foo</span><span class="kd">←</span><span class="kt">{</span><span class="err">│</span><span class="w">     </span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="err">││</span>
<span class="err">│└───────┴─────┘│└──────┴─────────┘│</span>
<span class="err">└───────────────┴──────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">src</span><span class="kd">←</span><span class="s1">':namespace c'</span><span class="w"> </span><span class="s1">':endnamespace'</span><span class="w"> </span><span class="s1">''</span><span class="w"> </span><span class="s1">'range←{⍺↓⍳⍵}'</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="nv">src</span>
<span class="w">      </span><span class="m">55</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="nf">⎕ATX</span><span class="s1">'c'</span><span class="w"> </span><span class="s1">'range'</span>
<span class="err">┌───┬───┐</span>
<span class="err">│</span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="err">│</span>
<span class="err">└───┴───┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="o">↑</span><span class="na">¨</span><span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="o">↓</span><span class="na">¨</span><span class="o">⊂</span><span class="nv">src</span>
<span class="err">┌────────────────────────────┬──────────────┐</span>
<span class="err">│┌────────────┬─────────────┐│┌────────────┐│</span>
<span class="err">││</span><span class="bp">:</span><span class="nv">namespace</span><span class="w"> </span><span class="nv">c</span><span class="err">│</span><span class="bp">:</span><span class="nv">endnamespace</span><span class="err">│││</span><span class="nv">range</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍺</span><span class="o">↓⍳</span><span class="bp">⍵</span><span class="kt">}</span><span class="err">││</span>
<span class="err">│└────────────┴─────────────┘│└────────────┘│</span>
<span class="err">└────────────────────────────┴──────────────┘</span>
</code></pre></div></p>
</article>
<article id="system-functions-av">
<div class="heading-container"><h3 class="heading" id="system-functions-av-header">Atomic Vector</h3><div class="command">R←⎕AV</div></div>
<p><code>⎕AV</code> is a deprecated feature and is replaced by <code>⎕UCS</code>.</p>
<p>This is a simple character vector of all 256 characters in the Classic Dyalog APL character.</p>
<p>In the Classic Edition the contents of <code>⎕AV</code> are defined by the Output Translate Table.</p>
<p>In the Unicode Edition, the contents of <code>⎕AV</code> are defined by the system variable <code>⎕AVU</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕AV</span><span class="sr">[</span><span class="m">48</span><span class="o">+⍳</span><span class="m">10</span><span class="sr">]</span>
<span class="m">0123456789</span>

<span class="w">      </span><span class="m">5</span><span class="w"> </span><span class="m">52</span><span class="o">⍴</span><span class="m">12</span><span class="o">↓</span><span class="nf">⎕av</span><span class="err">%</span><span class="s1">'⍺⍵_abcdefghijklmnopqrstuvwxyz¯.⍬0123456789⊢¥$£¢</span>
<span class="s1">∆ABCDEFGHIJKLMNOPQRSTUVWXYZý·⍙ÁÂÃÇÈÊËÌÍÎÏÐÒÓÔÕÙÚÛ</span>
<span class="s1">Ýþãìðòõ{€}⊣⌷¨ÀÄÅÆ⍨ÉÑÖØÜßàáâäåæçèéêëíîïñ[/⌿\⍀&lt;≤=≥&gt;≠∨∧</span>
<span class="s1">-+÷×?∊⍴~↑↓⍳○*⌈⌊∇∘(⊂⊃∩∪⊥⊤|;,⍱⍲⍒⍋⍉⌽⊖⍟⌹!⍕⍎⍫⍪≡≢óôöø"#&amp;´</span>
<span class="s1">┘┐┌└┼─├┤┴┬│@ùúû^ü`∣¶:⍷¿¡⋄←→⍝)] §⎕⍞⍣%'</span><span class="bp">⍺⍵</span><span class="nv">_abcdefghijk</span>
</code></pre></div>
</article>
<article id="system-functions-avu">
<div class="heading-container"><h3 class="heading" id="system-functions-avu-header">Atomic Vector - Unicode</h3><div class="command">⎕AVU</div></div>
<p><code>⎕AVU</code> specifies the contents of the atomic vector, <code>⎕AV</code>, and is used to translate data between Unicode and non-Unicode character formats when required, for example when:</p>
<ul>
<li>Unicode Edition loads or copies a Classic Edition workspace or a workspace saved by a Version prior to Version 12.0.</li>
<li>Unicode Edition reads character data from a non-Unicode component file, or receives data type 82 from a TCP socket.</li>
<li>Unicode Edition writes data to a non-Unicode component file</li>
<li>Unicode Edition reads or writes data from or to a Native File using conversion code 82.</li>
<li>Classic Edition loads or copies a Unicode Edition workspace</li>
<li>Classic Edition reads character data from a Unicode component file, or receives data type 80, 160, or 320 from a TCP socket.</li>
<li>Classic Edition writes data to a Unicode component file.</li>
</ul>
<p><code>⎕AVU</code> is an integer vector with 256 elements, containing the Unicode code points which define the characters in <code>⎕AV</code>. <code>⎕AVU</code> has Namespace scope.</p>
<h5>Note</h5>
<p>In Versions of Dyalog prior to Version 12.0 and in the Classic Edition, a character is stored internally as an index into the atomic vector, <code>⎕AV</code>. When a character is displayed or printed, the index in <code>⎕AV</code> is translated to a number in the range 0-255 which represents the index of the character in an Extended ASCII font. This mapping is done by the Output Translate Table which is user-configurable. Note that although ASCII fonts typically all contain the same symbols in the range 0-127, there are a number of different Extended ASCII font layouts, including proprietary APL fonts, which provide different symbols in positions 128-255. The actual symbol that appears on the screen or on the printed page is therefore a function of the Output Translate Table and the font in use. Classic Edition provides two different fonts (and thus two different <code>⎕AV</code> layouts) for use with the Development Environment, named <em>Dyalog Std</em> (with APL underscores) and <em>Dyalog Alt</em> (without APL underscores).</p>
<p>The default value of <code>⎕AVU</code> corresponds to the use of the <strong>Dyalog Alt</strong> Output Translate Table and font in the Classic Edition or in earlier versions of Dyalog APL.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="o">⍴</span><span class="nf">⎕AVU</span><span class="sr">[</span><span class="m">97</span><span class="o">+⍳</span><span class="m">26</span><span class="sr">]</span>
<span class="m">193</span><span class="w"> </span><span class="m">194</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">199</span><span class="w"> </span><span class="m">200</span><span class="w"> </span><span class="m">202</span><span class="w"> </span><span class="m">203</span><span class="w"> </span><span class="m">204</span><span class="w"> </span><span class="m">205</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="m">207</span><span class="w"> </span><span class="m">208</span><span class="w"> </span><span class="m">210</span>
<span class="m">211</span><span class="w"> </span><span class="m">212</span><span class="w"> </span><span class="m">213</span><span class="w"> </span><span class="m">217</span><span class="w"> </span><span class="m">218</span><span class="w"> </span><span class="m">219</span><span class="w"> </span><span class="m">221</span><span class="w"> </span><span class="m">254</span><span class="w"> </span><span class="m">227</span><span class="w"> </span><span class="m">236</span><span class="w"> </span><span class="m">240</span><span class="w"> </span><span class="m">242</span><span class="w"> </span><span class="m">245</span>
<span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="o">⍴</span><span class="nf">⎕AVU</span><span class="sr">[</span><span class="m">97</span><span class="o">+⍳</span><span class="m">26</span><span class="sr">]</span>
<span class="err">ÁÂÃÇÈÊËÌÍÎÏÐÒ</span>
<span class="err">ÓÔÕÙÚÛÝþãìðòõ</span>
</code></pre></div></p>
<p><code>⎕AVU</code> can be localised, in order to make it straightforward to write access functions which receive or read data from systems with varying atomic vectors. If you have been using Dyalog Alt for most things but have some older code which uses underscores, you can bring this code together in the same workspace and have it all look "as it should" by using the Alt and Std definitions for <code>⎕AVU</code> as you copy each part of the code into the same Unicode Edition workspace.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">avu</span><span class="na">.</span><span class="nv">dws</span><span class="w"> </span><span class="nv">Std</span><span class="na">.</span><span class="nf">⎕AVU</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Program</span><span class="w"> </span><span class="nv">Files</span><span class="na">\</span><span class="nv">Dyalog</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="w"> </span><span class="m">12.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="na">\</span><span class="nv">ws</span><span class="na">\</span><span class="nv">avu</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Thu</span><span class="w"> </span><span class="nv">Dec</span><span class="w"> </span><span class="m">06</span><span class="w"> </span><span class="m">11</span><span class="bp">:</span><span class="m">24</span><span class="bp">:</span><span class="m">32</span><span class="w"> </span><span class="m">2007</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="o">⍴</span><span class="nf">⎕AVU</span><span class="sr">[</span><span class="m">97</span><span class="o">+⍳</span><span class="m">26</span><span class="sr">]</span>
<span class="m">9398</span><span class="w"> </span><span class="m">9399</span><span class="w"> </span><span class="m">9400</span><span class="w"> </span><span class="m">9401</span><span class="w"> </span><span class="m">9402</span><span class="w"> </span><span class="m">9403</span><span class="w"> </span><span class="m">9404</span><span class="w"> </span><span class="m">9405</span><span class="w"> </span><span class="m">9406</span><span class="w"> </span><span class="m">9407</span><span class="w"> </span><span class="m">9408</span><span class="w"> </span><span class="m">9409</span><span class="w"> </span><span class="m">9410</span>
<span class="m">9411</span><span class="w"> </span><span class="m">9412</span><span class="w"> </span><span class="m">9413</span><span class="w"> </span><span class="m">9414</span><span class="w"> </span><span class="m">9415</span><span class="w"> </span><span class="m">9416</span><span class="w"> </span><span class="m">9417</span><span class="w"> </span><span class="m">9418</span><span class="w"> </span><span class="m">9419</span><span class="w"> </span><span class="m">9420</span><span class="w"> </span><span class="m">9421</span><span class="w"> </span><span class="m">9422</span><span class="w"> </span><span class="m">9423</span>
<span class="w">       </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="o">⍴</span><span class="nf">⎕AVU</span><span class="sr">[</span><span class="m">97</span><span class="o">+⍳</span><span class="m">26</span><span class="sr">]</span>
<span class="err">ⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂ</span>
<span class="err">ⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ</span>
</code></pre></div></p>
<h5>Rules for Conversion on Import</h5>
<p>When the Unicode Edition imports APL objects from a non-Unicode source, function comments and character data of type 82 are converted to Unicode. When the Classic Edition imports APL objects from a Unicode source, this translation is performed in reverse.</p>
<p>If the objects are imported from a Version 12.0 (or later) workspace (i.e. from a workspace that contains its own value of <code>⎕AVU</code>) the value of <code>#.⎕AVU</code> (the value of <code>⎕AVU</code> in the root) in the <em>source</em> workspace is used. Otherwise, such as when APL objects are imported from a pre-Version 12 workspace, from a component file, or from a TCP socket, the local value of <code>⎕AVU</code> in the <em>target</em> workspace is used.</p>
<h5>Rules for Conversion on Export</h5>
<p>When the Unicode Edition exports APL objects to a non-Unicode destination, such as a non-Unicode Component File or non-Unicode TCPSocket Object, function comments (in <code>⎕OR</code>s) and character data of type 82 are converted to <code>⎕AV</code> indices using the local value of <code>⎕AVU</code>.</p>
<p>When the Classic Edition exports APL objects to a Unicode destination, such as a Unicode Component File or Unicode TCPSocket Object, function comments (in <code>⎕OR</code>s) and character data of type 82 are converted to Unicode using the local value of <code>⎕AVU</code>.</p>
<p>In all cases, if a character to be translated is not defined in <code>⎕AVU</code>, a <code>TRANSLATION ERROR</code> (event number 92) will be signalled.</p>
</article>
<article id="system-functions-base">
<div class="heading-container"><h3 class="heading" id="system-functions-base-header">Base Class</h3><div class="command">R←⎕BASE.Y</div></div>
<p><code>⎕BASE</code> is used to access the base class implementation of the name specified by <code>Y</code>.</p>
<p><code>Y</code> must be the name of a Public member (Method, Field or Property) that is provided by the Base Class of the current Class or Instance.</p>
<p><code>⎕BASE</code> is typically used to call a method in the Base Class which has been <em>superseded</em> by a Method in the current Class.</p>
<p>Note that <code>⎕BASE.Y</code> is <em>special syntax</em> and any direct reference to <code>⎕BASE</code> on its own or in any other context, is meaningless and causes <code>SYNTAX ERROR</code>.</p>
<p>In the following example, Class <code>DomesticParrot</code> derives from Class <code>Parrot</code> and supersedes its <code>Speak</code> method. <code>DomesticParrot.Speak</code> calls the <code>Speak</code> method in its Base Class <code>Parrot</code>, via <code>⎕BASE</code>.
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Parrot</span><span class="bp">:</span><span class="w"> </span><span class="nv">Bird</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">Speak</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="s1">'Squark!'</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Parrot</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">DomesticParrot</span><span class="bp">:</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">Speak</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="nv">R</span><span class="kd">←</span><span class="nf">⎕BASE</span><span class="na">.</span><span class="nv">Speak</span><span class="o">,</span><span class="s1">' Who''s a pretty boy, then!'</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ DomesticParrot</span>

<span class="w">      </span><span class="nv">Maccaw</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w">      </span><span class="nv">Maccaw</span><span class="na">.</span><span class="nv">Speak</span>
<span class="nv">Squark</span><span class="o">!</span>

<span class="w">      </span><span class="nv">Polly</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DomesticParrot</span>
<span class="w">      </span><span class="nv">Polly</span><span class="na">.</span><span class="nv">Speak</span>
<span class="nv">Squark</span><span class="o">!</span><span class="w"> </span><span class="nv">Who</span><span class="err">'</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pretty</span><span class="w"> </span><span class="nv">boy</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="o">!</span>
</code></pre></div></p>
</article>
<article id="system-functions-c">
<div class="heading-container"><h3 class="heading" id="system-functions-c-header">Case Convert</h3><div class="command">R←{X}⎕C Y</div></div>
<p><code>Y</code> is any array. <code>R</code> is an identical array except that character arrays within it are either folded for case-less comparison, or mapped to upper or lower case.</p>
<p>For a discussion of case folding and case conversion (mapping), see <a href="https://unicode.org/faq/casemap_charprop.html">https://unicode.org/faq/casemap_charprop.html</a>.</p>
<p>If the optional left-argument <code>X</code> is omitted, <code>R</code> is a copy of <code>Y</code> with character arrays folded, for case-less comparison.</p>
<p>If <code>X</code> is specified, the following cases are supported:</p>
<table>
<thead>
<tr>
<th>X</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>R</code> is a copy of <code>Y</code> with character arrays mapped to upper case.</td>
</tr>
<tr>
<td><code>¯1</code></td>
<td><code>R</code> is a copy of <code>Y</code> with character arrays mapped to lower case.</td>
</tr>
<tr>
<td><code>¯3</code></td>
<td><code>R</code> is a copy of <code>Y</code> with character arrays folded, for case-less comparison (this is equivalent to monadic use).</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕C</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="s1">'Pete'</span><span class="w"> </span><span class="s1">'Πέτρος'</span>
<span class="m">42</span><span class="w">  </span><span class="nv">pete</span><span class="w">  </span><span class="err">πέτροσ</span><span class="w"> </span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕C</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="s1">'Pete'</span><span class="w"> </span><span class="s1">'Πέτρος'</span>
<span class="m">42</span><span class="w">  </span><span class="nv">PETE</span><span class="w">  </span><span class="err">ΠΈΤΡΟΣ</span><span class="w"> </span>
<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕C</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="s1">'Pete'</span><span class="w"> </span><span class="s1">'Πέτρος'</span>
<span class="m">42</span><span class="w">  </span><span class="nv">pete</span><span class="w">  </span><span class="err">πέτρος</span>

<span class="w">      </span><span class="p">(</span><span class="o">⊂</span><span class="s1">'pete'</span><span class="p">)</span><span class="kt">{</span><span class="bp">⍺</span><span class="o">≡</span><span class="nf">⎕C</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">¨</span><span class="s1">'PETE'</span><span class="w"> </span><span class="s1">'Pete'</span><span class="w"> </span><span class="s1">'pEte'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p class="example">Example</p>
<p>Greek has two forms of lower-case Sigma, namely "σ" and "ς" but a single upper-case Sigma "Σ". Each lower-case form remains unchanged when mapped to lower-case, but both fold to "σ", while "Σ" is mapped to lower-case "σ" .
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕C</span><span class="w"> </span><span class="s1">'ίσως'</span>
<span class="err">ίσωσ</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕C</span><span class="w"> </span><span class="s1">'ίσως'</span>
<span class="err">ΊΣΩΣ</span>
<span class="w">      </span><span class="m">¯1</span><span class="nf">⎕C</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕C</span><span class="w"> </span><span class="s1">'ίσως'</span>
<span class="err">ίσωσ</span>
</code></pre></div></p>
<h5>Note</h5>
<p>Refs in <code>Y</code> are not followed but just returned unchanged.</p>
</article>
<article id="system-functions-class">
<div class="heading-container"><h3 class="heading" id="system-functions-class-header">Class</h3><div class="command">R←{X}⎕CLASS Y</div></div>
<h5>Monadic Case</h5>
<p>Monadic <code>⎕CLASS</code> returns a list of references to Classes and Interfaces that specifies the class hierarchy for the Class or Instance specified by <code>Y</code>.</p>
<p><code>Y</code> must be a reference to a Class or to an Instance of a Class.</p>
<p><code>R</code> is a vector of vectors whose items represent nodes in the Class hierarchy of <code>Y</code>. Each item of <code>R</code> is a vector whose first item is a Class reference and whose subsequent items (if any) are references to the Interfaces supported by that Class.</p>
<h5>Example 1</h5>
<p>This example illustrates a simple inheritance tree or Class hierarchy. There are 3 Classes, namely:
<div class="highlight"><pre><span></span><code><span class="nv">Animal</span>
<span class="w">    </span><span class="nv">Bird</span><span class="w"> </span><span class="p">(</span><span class="nv">derived</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Animal</span><span class="p">)</span>
<span class="w">        </span><span class="nv">Parrot</span><span class="w"> </span><span class="p">(</span><span class="nv">derived</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Bird</span><span class="p">)</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Animal</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Animal</span>
<span class="w"> </span>
<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Bird</span><span class="bp">:</span><span class="w"> </span><span class="nv">Animal</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Bird</span>
<span class="w"> </span>
<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Parrot</span><span class="bp">:</span><span class="w"> </span><span class="nv">Bird</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Parrot</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Eeyore</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">  </span><span class="c1">#.Animal  </span>
<span class="w">       </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Robin</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Bird</span>
<span class="w">  </span><span class="c1">#.Bird    #.Animal  </span>
<span class="w">       </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Polly</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w">  </span><span class="c1">#.Parrot    #.Bird    #.Animal</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕CLASS</span><span class="na">¨</span><span class="w"> </span><span class="nv">Parrot</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">   </span><span class="c1">#.Parrot    #.Bird    #.Animal      #.Animal</span>
</code></pre></div></p>
<h6>Example 2</h6>
<p>The Penguin Class example (see<i>Programmer's Guide: Penguin Class Example</i>) illustrates the use of Interfaces.</p>
<p>In this case, the <code>Penguin</code> Class derives from <code>Animal</code> (as above) but additionally supports the <code>BirdBehaviour</code> and <code>FishBehaviour</code> Interfaces, thereby inheriting members from both.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Pingo</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Penguin</span>
<span class="w">      </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span>
<span class="w">  </span><span class="c1">#.Penguin  #.FishBehaviour  #.BirdBehaviour    #.Animal</span>
</code></pre></div></p>
<h5>Dyadic Case</h5>
<p>If <code>X</code> is specified, <code>Y</code> must be a reference to an Instance of a Class and <code>X</code> is a reference to an Interface that is supported by Instance <code>Y</code> or to a Class upon which Instance <code>Y</code> is based.</p>
<p>In this case, <code>R</code> is a reference to the implementation of Interface <code>X</code> by Instance <code>Y</code>, or to the implementation of (Base) Class <code>X</code> by Instance <code>Y</code>, and is used as a <em>cast</em> in order to access members of <code>Y</code> that correspond to members of Interface of (Base) Class <code>X</code>.</p>
<h6>Example 1</h6>
<p>Once again, the Penguin Class example (see<i>Programmer's Guide: Penguin Class Example</i>) is used to illustrate the use of Interfaces.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Pingo</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Penguin</span>
<span class="w">      </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span>
<span class="w">  </span><span class="c1">#.Penguin  #.FishBehaviour  #.BirdBehaviour    #.Animal</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="nv">FishBehaviour</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span><span class="p">)</span><span class="na">.</span><span class="nv">Swim</span>
<span class="nv">I</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">dive</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">swim</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fish</span>
<span class="w">      </span><span class="p">(</span><span class="nv">BirdBehaviour</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span><span class="p">)</span><span class="na">.</span><span class="nv">Fly</span>
<span class="nv">Although</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">am</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">bird</span><span class="o">,</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">fly</span>
<span class="w">      </span><span class="p">(</span><span class="nv">BirdBehaviour</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span><span class="p">)</span><span class="na">.</span><span class="nv">Lay</span>
<span class="nv">I</span><span class="w"> </span><span class="nv">lay</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">egg</span><span class="w"> </span><span class="nv">every</span><span class="w"> </span><span class="nv">year</span><span class="w">          </span>
<span class="w">      </span><span class="p">(</span><span class="nv">BirdBehaviour</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Pingo</span><span class="p">)</span><span class="na">.</span><span class="nv">Sing</span>
<span class="nv">Croak</span><span class="o">,</span><span class="w"> </span><span class="nv">Croak</span><span class="o">!</span><span class="w">           </span>
</code></pre></div></p>
<h6>Example 2</h6>
<p>This example illustrates the use of dyadic <code>⎕CLASS</code> to cast an Instance to a lower Class and thereby access a member in the lower Class that has been superseded by another Class higher in the tree.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Polly</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DomesticParrot</span>
<span class="w">      </span><span class="nv">Polly</span><span class="na">.</span><span class="nv">Speak</span>
<span class="nv">Squark</span><span class="o">!</span><span class="w"> </span><span class="nv">Who</span><span class="err">'</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pretty</span><span class="w"> </span><span class="nv">boy</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="o">!</span>
<span class="w"> </span>
</code></pre></div></p>
<p>Note that the <code>Speak</code> method invoked above is the <code>Speak</code> method defined by Class <code>DomesticParrot</code>, which supersedes the <code>Speak</code> methods of sub-classes <code>Parrot</code> and <code>Bird</code>.</p>
<p>You may use a cast to access the (superseded) <code>Speak</code> method in the sub-classes <code>Parrot</code> and <code>Bird</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">Parrot</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Polly</span><span class="p">)</span><span class="na">.</span><span class="nv">Speak</span>
<span class="nv">Squark</span><span class="o">!</span>
<span class="w">      </span><span class="p">(</span><span class="nv">Bird</span><span class="w"> </span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nv">Polly</span><span class="p">)</span><span class="na">.</span><span class="nv">Speak</span>
<span class="nv">Tweet</span><span class="o">,</span><span class="w"> </span><span class="nv">tweet</span><span class="o">!</span>
</code></pre></div></p>
</article>
<article id="system-functions-clear">
<div class="heading-container"><h3 class="heading" id="system-functions-clear-header">Clear Workspace</h3><div class="command">⎕CLEAR</div></div>
<p>A clear workspace is activated, having the name <code>CLEAR WS</code>.  The active workspace is lost.  All system variables assume their default values.  The maximum size of workspace is available.</p>
<p>Apart from .NET objects, the contents of the session namespace <code>⎕SE</code> are not affected. .NET objects in <code>⎕SE</code> are disconnected from .NET because <code>⎕CLEAR</code> closes the current .NET AppDomain.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CLEAR</span>
<span class="w">      </span><span class="nf">⎕WSID</span>
<span class="nv">CLEAR</span><span class="w"> </span><span class="nv">WS</span>
</code></pre></div>
</article>
<article id="system-functions-execute-windows-command">
<div class="heading-container"><h3 class="heading" id="system-functions-execute-windows-command-header">Execute Windows Command</h3><div class="command">{R}←⎕CMD Y</div></div>
<p><code>⎕CMD</code> executes the Windows Command Processor or UNIX shell or starts another Windows application program.  <code>⎕CMD</code> is a synonym of <code>⎕SH</code>.  Either system function may be used in either environment (Windows or UNIX) with exactly the same effect.  <code>⎕CMD</code> is probably more natural for the Windows user.  This section describes the behaviour of <code>⎕CMD</code> and <code>⎕SH</code> under Windows. See <a class="internal-link" href="#system-functions-execute-unix-command">Section 4.6.131</a> for a discussion of the behaviour of these system functions under UNIX.</p>
<p>The system commands <a class="internal-link" href="#system-commands-sh">Section 5.2.25</a> and <a class="internal-link" href="#system-commands-cmd">Section 5.2.3</a> provide similar facilities. For further information, see <a class="internal-link" href="#system-commands-sh">Section 5.2.25</a> and <a class="internal-link" href="#system-commands-cmd">Section 5.2.3</a>.</p>
<h5>Executing the Windows Command Processor</h5>
<p>If <code>Y</code> is a simple character vector, <code>⎕CMD</code> invokes the Windows Command Processor (normally <code>cmd.exe</code>) and passes the command specified by character vector <code>Y</code> to it for execution. The term command means here an instruction recognised by the Command Processor, or the pathname of a program (with optional parameters) to be executed by it. In either case, APL waits for the command to finish and then returns the result <code>R</code>,  a vector of character vectors containing its result. Each element in <code>R</code> corresponds to a line of output produced by the command.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Z</span><span class="kd">←</span><span class="nf">⎕CMD</span><span class="s1">'dir'</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">Z</span>
<span class="m">12</span>
<span class="w">      </span><span class="o">↑</span><span class="nv">Z</span>
<span class="w"> </span><span class="nv">Volume</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">drive</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">OS</span>
<span class="w"> </span><span class="nv">Volume</span><span class="w"> </span><span class="nv">Serial</span><span class="w"> </span><span class="nv">Number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">B438</span><span class="o">-</span><span class="m">9</span><span class="nv">B76</span>

<span class="w"> </span><span class="nv">Directory</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\</span><span class="nv">Pete</span><span class="na">\</span><span class="nv">Documents</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span>

<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">15</span><span class="bp">:</span><span class="m">59</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">DIR</span><span class="o">&gt;</span><span class="w">          </span><span class="na">.</span>
<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">15</span><span class="bp">:</span><span class="m">59</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">DIR</span><span class="o">&gt;</span><span class="w">          </span><span class="na">..</span>
<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">14</span><span class="bp">:</span><span class="m">53</span><span class="w">           </span><span class="m">181</span><span class="o">,</span><span class="m">488</span><span class="w"> </span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="m">13</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">20</span><span class="bp">:</span><span class="m">13</span><span class="w">         </span><span class="m">1</span><span class="o">,</span><span class="m">262</span><span class="o">,</span><span class="m">296</span><span class="w"> </span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span>
<span class="m">14</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">14</span><span class="bp">:</span><span class="m">36</span><span class="w">           </span><span class="m">108</span><span class="o">,</span><span class="m">976</span><span class="w"> </span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
<span class="w">               </span><span class="m">3</span><span class="w"> </span><span class="nv">File</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span><span class="w">      </span><span class="m">1</span><span class="o">,</span><span class="m">552</span><span class="o">,</span><span class="m">760</span><span class="w"> </span><span class="nv">bytes</span>
<span class="w">               </span><span class="m">2</span><span class="w"> </span><span class="nv">Dir</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span><span class="w">  </span><span class="m">101</span><span class="o">,</span><span class="m">371</span><span class="o">,</span><span class="m">097</span><span class="o">,</span><span class="m">088</span><span class="w"> </span><span class="nv">bytes</span><span class="w"> </span><span class="nv">free</span>
</code></pre></div>
<p>If the command specified in <code>Y</code> already contains the redirection symbol (<code>&gt;</code>) the capture of output through a pipe is avoided and the result <code>R</code> is empty.  If the command specified by <code>Y</code> issues prompts and expects user input, it is <strong>ESSENTIAL</strong> to explicitly redirect input and output to the console.</p>
<p>If this is done, APL detects the presence of a "<code>&gt;</code>" in the command line, runs the command processor in a <strong>visible</strong> window, and does not direct output to the pipe.  If you fail to do this your system will appear to hang because there is no mechanism for you to receive or respond to the prompt.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'DATE &lt;CON &gt;CON'</span>
</code></pre></div>
<p>(Command Prompt window appears)</p>
<p><code>Current date is Wed 19-07-1995</code></p>
<p><code>Enter new date (dd-mm-yy): 20-07-95</code></p>
<p>(COMMAND PROMPT window disappears)</p>
<h6>Spaces in pathnames</h6>
<p>If <code>Y</code> specifies a program (with or without parameters) and the pathname to the program  contains spaces, you must enclose the string in double-quotes.</p>
<p>For example, to start a version of Excel to which the pathname is:
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Program</span><span class="w"> </span><span class="nv">Files</span><span class="na">\</span><span class="nv">Microsoft</span><span class="w"> </span><span class="nv">Office</span><span class="na">\</span><span class="nv">OFFICE11</span><span class="na">\</span><span class="nv">excel</span><span class="na">.</span><span class="nv">exe</span>
</code></pre></div></p>
<p>the argument to <code>⎕CMD</code> should be:
<div class="highlight"><pre><span></span><code><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'"c:\program files\microsoft office\office11\excel.exe"'</span>
</code></pre></div></p>
<h6>Double-Quote Restriction</h6>
<p>The Windows Command Processor does not permit more than one set of double-quotes in a command string.</p>
<p>The following statements are all valid:
<div class="highlight"><pre><span></span><code><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'c:\windows\system32\notepad.exe c:\myfile.txt'</span><span class="w">  </span>
<span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'c:\windows\system32\notepad.exe "c:\myfile.txt"'</span>
<span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'"c:\windows\system32\notepad.exe" c:\myfile.txt'</span>
</code></pre></div></p>
<p>Whereas the next statement, which contains two sets of double-quotes, will fail:
<div class="highlight"><pre><span></span><code><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'"c:\windows\system32\notepad.exe" "c:\myfile.txt"'</span>
</code></pre></div></p>
<p>Such a statement can however be executed using the second form of <code>⎕CMD</code>(where the argument is a 2-element vector of character vectors) which does not use the Windows Command Processor and is not subject to this restriction. However, the call to <code>⎕CMD</code> will return immediately, and no output from the command will be returned.
<div class="highlight"><pre><span></span><code><span class="nf">⎕CMD</span><span class="s1">'"c:\windows\system32\notepad.exe" "c:\myfile.txt"'</span><span class="w"> </span><span class="s1">''</span>
</code></pre></div></p>
<h6>Implementation Notes</h6>
<p>The right argument of <code>⎕CMD</code> is simply passed to the appropriate command processor for execution and its output is received using an <em>unnamed pipe</em>.</p>
<p>By default, <code>⎕CMD</code> will execute the string <code>('cmd.exe /c',Y)</code>; where <code>Y</code> is the argument given to <code>⎕CMD</code>.  However, the implementation permits the use of alternative command processors as follows:</p>
<p>Before execution, the argument is prefixed and postfixed with strings defined by the APL parameters CMD_PREFIX and CMD_POSTFIX.  The former specifies the name of your command processor and any parameters that it requires.  The latter specifies a string which may be required.  If CMD_PREFIX is not defined, it defaults to the name defined by the environment variable COMSPEC followed by  "/c".  If COMSPEC is not defined, it defaults to <code>cmd.exe</code>.  If CMD_POSTFIX is not defined, it defaults to an empty vector.</p>
<p><code>⎕CMD</code> treats certain characters as having special meaning as follows:</p>
<table>
<tbody>
<tr>
<td><code>#</code></td>
<td>marks the start of a trailing comment,</td>
</tr>
<tr>
<td><code>;</code></td>
<td>divides the command into sub-commands,</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>if found within the last sub-command, causes <code>⎕CMD</code> to use a visible window.</td>
</tr>
</tbody>
</table>
<p>If you simply wish to open a Command Prompt window, you may execute the command as a Windows Program (see below).  For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'cmd.exe'</span><span class="w"> </span><span class="s1">''</span>
</code></pre></div></p>
<h5>Starting a Windows Program</h5>
<p>If <code>Y</code> is a 2-element vector of character vectors, <code>⎕CMD</code> starts the executable program named by <code>Y[1]</code> with the initial window parameter specified by <code>Y[2]</code>.  The shy result is an integer scalar containing the window handle allocated by the window manager. Note that in this case APL does not wait for the program specified by <code>Y</code> to finish, but returns immediately. The shy result <code>R</code> is the process identifier (PID).</p>
<p><code>Y[1]</code> must specify the name or complete pathname of an executable program.  If the name alone is specified, Windows will search the following directories:</p>
<ol>
<li>the current directory,</li>
<li>the Windows directory,</li>
<li>the Windows system directory,</li>
<li>the directories specified by the PATH variable,</li>
<li>the list of directories mapped in a network.</li>
</ol>
<p>Note that <code>Y[1]</code> may contain the complete command line, including any suitable parameters for starting the program.  If Windows fails to find the executable program, <code>⎕CMD</code> will fail and report <code>FILE ERROR 2</code>.</p>
<p><code>Y[2]</code> specifies the window parameter and may be one of the following.  If not, a <code>DOMAIN ERROR</code> is reported.</p>
<table>
<tbody>
<tr>
<td><code>'Normal'''</code></td>
<td>Application is started in a normal window, which is given the input focus</td>
</tr>
<tr>
<td><code>'Unfocused'</code></td>
<td>Application is started in a normal window, which is NOT given the input focus</td>
</tr>
<tr>
<td><code>'Hidden'</code></td>
<td>Application is run in an invisible window</td>
</tr>
<tr>
<td><code>'Minimized''Minimised'</code></td>
<td>Application is started as an icon which is NOT given the input focus</td>
</tr>
<tr>
<td><code>'Maximized''Maximised'</code></td>
<td>Application is started maximized (full screen) and is given the input focus</td>
</tr>
</tbody>
</table>
<p>There is no way to terminate an application started by <code>⎕CMD</code> from APL; it will run until it completes or is terminated by an external mechanism. Furthermore, if the window parameter is HIDDEN, the user is unaware of the application (unless it makes itself visible) and has no means to close it.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Path</span><span class="kd">←</span><span class="s1">'c:\Program Files\Microsoft Office\Office\'</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕CMD</span><span class="w"> </span><span class="p">(</span><span class="nv">Path</span><span class="o">,</span><span class="s1">'excel.exe'</span><span class="p">)</span><span class="w"> </span><span class="s1">''</span>
<span class="m">33</span>
<span class="w">      </span><span class="nf">⎕CMD</span><span class="w"> </span><span class="p">(</span><span class="nv">Path</span><span class="o">,</span><span class="s1">'winword /mMyMacro'</span><span class="p">)</span><span class="w"> </span><span class="s1">'Minimized'</span>
</code></pre></div>
<h6>Executing Programs</h6>
<p>Either form of <code>⎕CMD</code> may be used to execute a program. The difference is that when the program is executed via the Command Processor, APL waits for it to complete and returns any result that the program would have displayed in the Command Window had it been executed from a Command Window. In the second case, APL starts the program (in parallel).</p>
<h6>Note</h6>
<p>This function is disabled and instead generates a <code>DOMAIN ERROR</code> if the RIDE_SPAWNED parameter is non-zero. This is designed to prevent it being invoked from a RIDE session which does not support this type of user interface. For further details, see the <em>RIDE User Guide</em>.</p>
</article>
<article id="system-functions-start-windows-auxiliary-processor">
<div class="heading-container"><h3 class="heading" id="system-functions-start-windows-auxiliary-processor-header">Start Windows Auxiliary Processor</h3><div class="command">{R}←X ⎕CMD Y</div></div>
<p>Used dyadically, <code>⎕CMD</code> starts an Auxiliary Processor.  The effect, as far as the APL workspace is concerned, is identical under both Windows and UNIX, although the method of implementation differs.  <code>⎕CMD</code> is a synonym of <code>⎕SH</code>.  Either function may be used in either environment (Windows or UNIX) with exactly the same effect.  <code>⎕CMD</code> is probably more natural for the Windows user.  This section describes the behaviour of <code>⎕CMD</code> and <code>⎕SH</code> under Windows.  See <a class="internal-link" href="#system-functions-start-unix-auxiliary-processor">Section 4.6.132</a> for a discussion of the behaviour of these system functions under UNIX.</p>
<p><code>X</code> must be a simple character vector containing the name (or pathname) of a Dyalog APL Auxiliary Processor (AP). Although it is possible for users to create their own APs, Dyalog recommends that user write their own DLLs/shared libraries instead.</p>
<p><code>Y</code> may be a simple character scalar or vector, or a vector of character vectors.  Under Windows the contents of <code>Y</code> are ignored.</p>
<p><code>⎕CMD</code> loads the Auxiliary Processor into memory.  If no other APs are currently running, <code>⎕CMD</code> also allocates an area of memory for communication between APL and its APs.</p>
<p>The shy result <code>R</code> is the process id of the Auxiliary Processor task.</p>
<p>The effect of starting an AP is that one or more <strong>external functions</strong> are defined in the workspace.  These appear as locked functions and may be used in exactly the same way as regular defined functions.</p>
<p>When an external function is used in an expression, the argument(s) (if any) are passed to the AP for processing via the communications area described above.  APL halts whilst the AP is processing, and waits for a result.  Under Windows, unlike under UNIX, it is not possible for external functions to run in parallel with APL.</p>
<p>Although it is still possible for users to create their own APs, Dyalog strongly recommends creating shared libraries/DLLs instead.</p>
</article>
<article id="system-functions-cr">
<div class="heading-container"><h3 class="heading" id="system-functions-cr-header">Canonical Representation</h3><div class="command">R←⎕CR Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which represents the name of a defined function or operator.</p>
<p>If <code>Y</code> is a name of a defined function or operator, <code>R</code> is a simple character matrix.  The first row of <code>R</code> is the function or operator header.  Subsequent rows are lines of the function or operator.  <code>R</code> contains no unnecessary blanks, except for leading indentation of control structures, trailing blanks that pad each row, and the blanks in comments.  If <code>Y</code> is the name of a variable, a locked function or operator, an external function, or is undefined, <code>R</code> is an empty matrix whose shape is <code>0 0</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Arithmetic mean</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">  </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">  </span><span class="bp">∇</span>
<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕CR</span><span class="s1">'MEAN'</span>
<span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Arithmetic mean</span>
<span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">2</span><span class="w"> </span><span class="m">30</span>
</code></pre></div>
<p>The definition of <code>⎕CR</code> has been extended to names assigned to functions by specification (<code>←</code>), and to local names of functions used as operands to defined operators.</p>
<p>If <code>Y</code> is a name assigned to a primitive function, <code>R</code> is a one-element vector containing the corresponding function symbol.  If <code>Y</code> is a name assigned to a system function, <code>R</code> is a one element nested array containing the name of the system function.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">PLUS</span><span class="kd">←</span><span class="o">+</span>
<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕CR</span><span class="s1">'PLUS'</span>
<span class="o">+</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">C</span><span class="kd">←</span><span class="nf">⎕CR</span>
<span class="w">      </span><span class="nv">C</span><span class="s1">'C'</span>
<span class="w"> </span><span class="nf">⎕CR</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">C</span><span class="s1">'C'</span>
<span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">CONDITION</span><span class="w"> </span><span class="p">(</span><span class="nv">FN1</span><span class="w"> </span><span class="nv">ELSE</span><span class="w"> </span><span class="nv">FN2</span><span class="p">)</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="kd">→</span><span class="nv">CONDITION</span><span class="na">/</span><span class="nv">L1</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FN2</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">  </span><span class="nv">L1</span><span class="bp">:</span><span class="nv">R</span><span class="kd">←</span><span class="nv">FN1</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="bp">∇</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'ELSE'</span>
<span class="w">      </span><span class="p">(</span><span class="nv">X</span><span class="o">≥</span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">⌊</span><span class="w"> </span><span class="nv">ELSE</span><span class="w"> </span><span class="o">⌈</span><span class="w"> </span><span class="nv">X</span><span class="kd">←</span><span class="m">¯2.5</span>

<span class="nv">ELSE</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span>
<span class="w">       </span><span class="nv">X</span>
<span class="m">¯2.5</span>
<span class="w">       </span><span class="nf">⎕CR</span><span class="s1">'FN2'</span>
<span class="o">⌈</span>
<span class="w">       </span><span class="kd">→</span><span class="nf">⎕LC</span>
<span class="m">¯2</span>
</code></pre></div></p>
<p>If <code>Y</code> is a name assigned to a derived function, <code>R</code> is a vector whose elements represent the arrays, functions, and operators from which <code>Y</code> was constructed.  Constituent functions are represented by their own <code>⎕CR</code>s, so in this respect the definition of <code>⎕CR</code> is recursive.  Primitive operators are treated like primitive functions, and are represented by their corresponding symbols.  Arrays are represented by themselves.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">BOX</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="na">∘</span><span class="o">⍴</span>
<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕CR</span><span class="s1">'BOX'</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="na">∘</span><span class="o">⍴</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">3</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">F</span>
<span class="na">.</span><span class="kd">→</span><span class="o">----------</span><span class="na">.</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">--</span><span class="na">.</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">|</span><span class="w"> </span><span class="na">∘</span><span class="w"> </span><span class="o">⍴</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'~--'</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊----------'</span>
</code></pre></div>
<p>If <code>Y</code> is a name assigned to a defined function, <code>R</code> is the <code>⎕CR</code> of the defined function.  In particular, the name that appears in the function header is the name of the original defined function, not the assigned name <code>Y</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">AVERAGE</span><span class="kd">←</span><span class="nv">MEAN</span>
<span class="w">      </span><span class="nf">⎕CR</span><span class="s1">'AVERAGE'</span>
<span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Arithmetic mean</span>
<span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
</code></pre></div>
</article>
<article id="system-functions-cs">
<div class="heading-container"><h3 class="heading" id="system-functions-cs-header">Change Space</h3><div class="command">{R}←{X}⎕CS Y</div></div>
<p><code>Y</code> must be namespace reference (ref) or a simple character scalar or vector identifying the name of a namespace.</p>
<p>If specified, <code>X</code> is a simple character scalar, vector, matrix or a nested vector of character vectors identifying zero or more workspace objects to be <em>exported</em> into the namespace <code>Y</code>.</p>
<p>The identifiers in <code>X</code> and <code>Y</code> may be simple names or compound names separated by <code>'.'</code> and including the names of the special namespaces <code>'⎕SE'</code>, <code>'#'</code>, and <code>'##'</code>.</p>
<p>The result <code>R</code> is the full name (starting <code>#.</code>) of the space in which the function or operator was executing prior to the <code>⎕CS</code>.</p>
<p><code>⎕CS</code> changes the space in which the current function or operator is running to the namespace <code>Y</code> and returns the original space, in which the function was previously running, as a shy result.  <strong>After the</strong> <code>⎕CS</code>, references to <em>global</em> names (with the exception of those specified in <code>X</code>) are taken to be references to <em>global</em> names in <code>Y</code>.  References to <em>local</em> names (i.e. those local to the current function or operator) are, with the exception of those with name class 9, unaffected. Local names with name class  9 are however no longer visible.</p>
<p>When the function or operator terminates, the calling function resumes execution in its original space.</p>
<p>The names listed in <code>X</code> are temporarily <em>exported</em> to the namespace <code>Y</code>.  If objects with the same name exist in <code>Y</code>, these objects are effectively <em>shadowed</em> and are inaccessible. Note that Dyadic <code>⎕CS</code> may be used only if there is a traditional function in the state indicator (stack). Otherwise there would be no way to retract the export. In this case (for example in a clear workspace) <code>DOMAIN ERROR</code> is reported.</p>
<p>Note that calling <code>⎕CS</code> with an empty argument <code>Y</code> obtains the namespace in which a function is currently executing.</p>
<p class="example">Example</p>
<p>This simple example illustrates how <code>⎕CS</code> may be used to avoid typing long pathnames when building a tree of GUI objects.  Note that the objects <code>NEW</code> and <code>OPEN</code> are created as children of the <code>FILE</code> menu as a result of using <code>⎕CS</code> to change into the <code>F.MB.FILE</code> namespace.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">MAKE_FORM</span><span class="sr">;</span><span class="nv">F</span><span class="sr">;</span><span class="nv">OLD</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="s1">'F.MB'</span><span class="nf">⎕WC</span><span class="s1">'MenuBar'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="s1">'F.MB.FILE'</span><span class="nf">⎕WC</span><span class="s1">'Menu'</span><span class="w"> </span><span class="s1">'&amp;File'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="nv">OLD</span><span class="kd">←</span><span class="nf">⎕CS</span><span class="s1">'F.MB.FILE'</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="s1">'NEW'</span><span class="nf">⎕WC</span><span class="s1">'MenuItem'</span><span class="w"> </span><span class="s1">'&amp;New'</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">    </span><span class="s1">'OPEN'</span><span class="nf">⎕WC</span><span class="s1">'MenuItem'</span><span class="w"> </span><span class="s1">'&amp;Open'</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕CS</span><span class="w"> </span><span class="nv">OLD</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">   </span><span class="s1">'F.MB.EDIT'</span><span class="nf">⎕WC</span><span class="s1">'Menu'</span><span class="w"> </span><span class="s1">'&amp;Edit'</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">12</span><span class="sr">]</span><span class="w">   </span><span class="nv">OLD</span><span class="kd">←</span><span class="nf">⎕CS</span><span class="s1">'F.MB.EDIT'</span>
<span class="sr">[</span><span class="m">13</span><span class="sr">]</span><span class="w">   </span><span class="s1">'UNDO'</span><span class="nf">⎕WC</span><span class="s1">'MenuItem'</span><span class="w"> </span><span class="s1">'&amp;Undo'</span>
<span class="sr">[</span><span class="m">14</span><span class="sr">]</span><span class="w">   </span><span class="s1">'REDO'</span><span class="nf">⎕WC</span><span class="s1">'MenuItem'</span><span class="w"> </span><span class="s1">'&amp;Redo'</span>
<span class="sr">[</span><span class="m">15</span><span class="sr">]</span><span class="w">   </span><span class="nf">⎕CS</span><span class="w"> </span><span class="nv">OLD</span>
<span class="sr">[</span><span class="m">16</span><span class="sr">]</span><span class="w">   </span><span class="na">...</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>Suppose a form <code>F1</code> contains buttons <code>B1</code> and <code>B2</code>. Each button maintains a count of the number of times it has been pressed, and the form maintains a count of the total number of button presses. The single callback function <code>PRESS</code> and its subfunction <code>FMT</code> can reside in the form itself
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">F1</span>
<span class="c1">#.F1</span>
<span class="w">      </span><span class="c1">⍝ Note that both instances reference</span>
<span class="w">      </span><span class="c1">⍝ the same callback function</span>
<span class="w">      </span><span class="s1">'B1'</span><span class="nf">⎕WS</span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="s1">'PRESS'</span>
<span class="w">      </span><span class="s1">'B2'</span><span class="nf">⎕WS</span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="s1">'PRESS'</span>

<span class="w">      </span><span class="c1">⍝ Initialise total and instance counts.</span>
<span class="w">      </span><span class="nv">TOTAL</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">B1</span><span class="na">.</span><span class="nv">COUNT</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">B2</span><span class="na">.</span><span class="nv">COUNT</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">PRESS</span><span class="w"> </span><span class="nv">MSG</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="s1">'FMT'</span><span class="w"> </span><span class="s1">'TOTAL'</span><span class="nf">⎕CS</span><span class="o">⊃</span><span class="nv">MSG</span><span class="w"> </span><span class="c1">⍝     Switch to instance space</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="p">(</span><span class="nv">TOTAL</span><span class="w"> </span><span class="nv">COUNT</span><span class="p">)</span><span class="o">+</span><span class="kd">←</span><span class="m">1</span><span class="w">   </span><span class="c1">⍝    Incr total &amp; instance count</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nf">⎕WS</span><span class="s1">'Caption'</span><span class="p">(</span><span class="nv">COUNT</span><span class="w"> </span><span class="nv">FMT</span><span class="w"> </span><span class="nv">TOTAL</span><span class="p">)</span><span class="c1">⍝ Set instance caption</span>
<span class="w">    </span><span class="bp">∇</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">CAPT</span><span class="kd">←</span><span class="nv">INST</span><span class="w"> </span><span class="nv">FMT</span><span class="w"> </span><span class="nv">TOTL</span><span class="w">      </span><span class="c1">⍝ Format button caption.</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">CAPT</span><span class="kd">←</span><span class="p">(</span><span class="o">⍕</span><span class="nv">INST</span><span class="p">)</span><span class="o">,</span><span class="s1">'/'</span><span class="o">,⍕</span><span class="nv">TOTL</span><span class="w">  </span><span class="c1">⍝ E.g. 40/100.</span>
<span class="w">    </span><span class="bp">∇</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>This example uses <code>⎕CS</code> to explore a namespace tree and display the structure.  Note that it must export its own name (tree) each time it changes space, because the name tree is global.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">tabs</span><span class="w"> </span><span class="nv">tree</span><span class="w"> </span><span class="nv">space</span><span class="sr">;</span><span class="nv">subs</span><span class="w">     </span><span class="c1">⍝ Display namespace tree</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">tabs</span><span class="o">,</span><span class="nv">space</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="s1">'tree'</span><span class="nf">⎕CS</span><span class="w"> </span><span class="nv">space</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="p">(</span><span class="o">⍴</span><span class="nv">subs</span><span class="kd">←</span><span class="o">↓</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="o">↓</span><span class="m">0</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="p">(</span><span class="nv">tabs</span><span class="o">,</span><span class="s1">'.   '</span><span class="p">)</span><span class="na">∘</span><span class="nv">tree</span><span class="na">¨</span><span class="nv">subs</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span>

<span class="w">      </span><span class="p">)</span><span class="nv">ns</span><span class="w"> </span><span class="nv">x</span><span class="na">.</span><span class="nv">y</span>
<span class="c1">#.x.y</span>
<span class="w">      </span><span class="p">)</span><span class="nv">ns</span><span class="w"> </span><span class="nv">z</span>
<span class="c1">#.z</span>
<span class="w">      </span><span class="s1">''</span><span class="nv">tree</span><span class="w"> </span><span class="s1">'#'</span>
<span class="c1">#</span>
<span class="na">.</span><span class="w">   </span><span class="nv">x</span>
<span class="na">.</span><span class="w">   </span><span class="na">.</span><span class="w">   </span><span class="nv">y</span>
<span class="na">.</span><span class="w">   </span><span class="nv">z</span>
</code></pre></div></p>
<h5>Note</h5>
<p><code>⎕CS</code> is not permitted in a dfn or dop. If used therein it will cause a <code>NONCE ERROR</code>.</p>
</article>
<article id="system-functions-csv">
<div class="heading-container"><h3 class="heading" id="system-functions-csv-header">Comma Separated Values</h3><div class="command">{R}←{X} ⎕CSV Y</div></div>
<p>This function imports and exports Comma Separated Value (CSV) data.</p>
<p>Monadic <code>⎕CSV</code> imports data from a CSV file or converts data from CSV format to an internal format. Dyadic <code>⎕CSV</code> exports data to a CSV file or converts data from internal format to a CSV format.</p>
<h5>Internal Format</h5>
<p>Arrays that result from importing CSV data or arrays that are suitable for exporting as CSV data are represented by 3 possible structures:</p>
<ul>
<li>A table (a matrix whose elements are character vectors or scalars, or numbers).</li>
<li>A vector, each of whose items contain field (column) values. Character field values are character matrices; numeric field values are numeric vectors.</li>
<li>A vector, each of whose items contain field (column) values. Character field values are vectors of character vectors; numeric field values are numeric vectors.</li>
</ul>
<p>Note that when importing CSV data, all fields are assumed to be character fields unless otherwise specified (see <em>Column Types</em> below). A field that contains only "numbers" will not be converted to numeric data unless specified as being numeric.</p>
<h5>MetaCharacters</h5>
<p>Some characters in a CSV file are metacharacters which define the structure of the data; for example, the field separator character between fields. Characters which are not metacharacters are literal characters. The  variant options QuoteChar, EscapeChar and DoubleQuote make it possible to interpret metacharacters as literal characters and thus permit fields to contain field separator characters, leading and trailing spaces, and line-endings.</p>
<p>Fixed-width fields do not require these options and they are ignored if fixed-width fields are being processed.</p>
<h4>Monadic <code>⎕CSV</code></h4>
<p><code>R←⎕CSV Y</code></p>
<p><code>Y</code> is an array that specifies just the source of the CSV data (see below) or a 1,2,3 or 4-element vector containing:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Source of CSV Data</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Description of the CSV data</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>Column Types</td>
</tr>
<tr>
<td><code>[4]</code></td>
<td>Header Row Indicator</td>
</tr>
</tbody>
</table>
<p><em>Source</em> may be one of:</p>
<ul>
<li>a character vector or scalar containing a file name</li>
<li>a native tie number</li>
<li>a character vector or scalar containing CSV data with embedded newline characters. To avoid this source being interpreted as a file name, <code>Y[2]</code> must be specified as <code>'S'</code>. </li>
<li>a vector of character vectors and/or scalars containing CSV data with implicit newlines after each character vector or scalar</li>
</ul>
<p><em>Description</em></p>
<p>If <code>Y[1]</code>  is a file name or tie number <em>Description</em> may be one of:</p>
<ul>
<li>a character vector specifying the file encoding such as <code>'UTF-8'</code> (see <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>).</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>
<p>If omitted or empty, the file encoding is deduced (see below).</p>
<p>If <code>Y[1]</code> is a character array containing CSV data <em>Description</em> is a character scalar <code>'S'</code> (simple) or <code>'N'</code> (nested). The default is <code>'N'</code></p>
<p><em>Column Types</em></p>
<p>This is a scalar numeric code or vector of numeric codes that specifies the field types from the list below. If <em>Column Types</em> is zilde or omitted, the default is 1 (all fields are character).</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>The field is ignored.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The field contains character data.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>The field is to be interpreted as being numeric. Empty cells and cells which cannot be converted to numeric values are not tolerated and cause an error to be signalled.</td>
</tr>
<tr>
<td><code>3</code></td>
<td>The field is to be interpreted as being numeric but invalid numeric values are tolerated. Empty fields and fields which cannot be converted to numeric values are replaced with the  Fill variant option (default 0).</td>
</tr>
<tr>
<td><code>4</code></td>
<td>The field is to be interpreted numeric data but invalid numeric data is tolerated. Empty fields and fields which cannot be converted to numeric values are returned instead as character data; this type is disallowed when variant option Invert is set to 1.</td>
</tr>
<tr>
<td><code>5</code></td>
<td>The field is to be interpreted as being numeric but empty fields are tolerated and are replaced with the Fill variant option (default 0). Non-empty cells which cannot be converted to numeric values are not tolerated and cause an error to be signalled.</td>
</tr>
</tbody>
</table>
<p>Note that if <em>Column Types</em> is specified by a scalar 4, all numeric data in all fields will be converted to numbers.</p>
<p><em>Header Row Indicator</em></p>
<p>This is a Boolean value (default 0) to specify whether or not the first record in a CSV file is  a list of column labels. If  <em>Header Row Indicator</em> is 1, the first record (the <em>header row</em>) is treated differently from other records. It is assumed to contain character data (labels) regardless of <code>Y[3]</code> and is returned separately in the result.</p>
<h5>Variant options</h5>
<p>Monadic <code>⎕CSV</code> may be applied using the  Variant operator with the following options. The Principal option is Invert.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>Invert</td>
<td>0, 1 or 2 (see below)</td>
<td><code>0</code></td>
</tr>
<tr>
<td>Separator</td>
<td>The field separator, any single character. If Widths  is other than <code>⍬</code> , Separator is ignored.</td>
<td><code>','</code></td>
</tr>
<tr>
<td>Widths</td>
<td>A vector of numeric values describing the width (in  characters) of the corresponding columns in the CSV source, or <code>⍬</code> for variable width delimited fields</td>
<td><code>⍬</code></td>
</tr>
<tr>
<td>Decimal</td>
<td>The decimal mark in numeric fields - one of <code>'.'</code> or <code>','</code></td>
<td><code>'.'</code></td>
</tr>
<tr>
<td>Thousands</td>
<td>The thousands separator in numeric fields, which may be  specified as an empty character vector (meaning no separator is defined) or a  character scalar</td>
<td><code>''</code></td>
</tr>
<tr>
<td>Trim</td>
<td>A Boolean specifying whether undelimited/unescaped  whitespace is trimmed at the beginning and end of fields</td>
<td><code>1</code></td>
</tr>
<tr>
<td>Ragged</td>
<td>A Boolean specifying whether records with varying numbers  of fields are allowed; see notes below</td>
<td><code>0</code></td>
</tr>
<tr>
<td>Fill</td>
<td>The numeric value substituted for invalid numeric data in  columns of type 3</td>
<td><code>0</code></td>
</tr>
<tr>
<td>Records</td>
<td>The maximum number of records to process or 0 for no limit. This applies only to a file specified by a tie number.</td>
<td><code>0</code></td>
</tr>
<tr>
<td>QuoteChar</td>
<td>The field quote character (delimiter), which may be specified as an empty character vector (meaning none is defined) or a character scalar</td>
<td><code>"</code></td>
</tr>
<tr>
<td>EscapeChar</td>
<td>The escape character, which may be specified as an empty character vector (meaning none is defined) or a character scalar</td>
<td><code>''</code></td>
</tr>
<tr>
<td>DoubleQuote</td>
<td>A Boolean which indicates whether (1) or not (0) a quote character within a quoted field is represented by two consecutive quote characters</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<p>The Separator, QuoteChar and EscapeChar characters, when defined, must be different.</p>
<p>Other options defined for export are also accepted but ignored.</p>
<h5>Invert Option</h5>
<p>This option specifies how the CSV data should be returned as follows:</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>A table (a matrix whose elements are character vectors or scalars or numbers).</td>
</tr>
<tr>
<td><code>1</code></td>
<td>A vector, each of whose items contain field (column) values. Character field values are character matrices; numeric field values are numeric vectors.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>A vector, each of whose items contain field (column) values. Character field values are vectors of character vectors; numeric field values are numeric vectors.</td>
</tr>
</tbody>
</table>
<h5>QuoteChar, EscapeChar and DoubleQuote Options</h5>
<p>If EscapeChar is set then any character may be prefixed by the escape character. The escape character is typically defined as <code>'\'</code>. The escape character immediately followed by the character <code>c</code> is the literal character <code>c</code> even if <code>c</code> alone would have been a metacharacter.</p>
<p>If QuoteChar is set then fields may be delimited by the specified quote character. Within quoted fields all characters except the quote character, and the escape character if defined, are literal characters.</p>
<p>If DoubleQuote is set to 1 then two consecutive quote characters within a quoted field are interpreted as the single literal quote character.</p>
<h5>Result</h5>
<p>The result <code>R</code> contains the imported data.</p>
<p>If <code>Y[4]</code> does not specify that the data contains a header then <code>R</code> contains the entire data in the form specified by the Invert variant option.</p>
<p>If <code>Y[4]</code> does specify that the data contains a header then <code>R</code> is a 2-element vector where:</p>
<ul>
<li><code>R[1]</code> is the imported data excluding the header.</li>
<li><code>R[2]</code> is a vector of character vectors containing the header record.</li>
</ul>
<p class="example">Examples</p>
<p><img alt="csv_excel" src="img/csv-excel.png"/>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="nf">⎕NGET</span><span class="w"> </span><span class="nv">CSVFile</span><span class="kd">←</span><span class="s1">'c:\Dyalog16.0\sales.csv'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="nv">Product</span><span class="o">,</span><span class="nv">Sales</span><span class="w">                                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="nv">Widgets</span><span class="o">,</span><span class="m">1912</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                         </span><span class="nv">Gimlets</span><span class="o">,</span><span class="m">205</span><span class="w">            </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                    </span><span class="nv">Dingbats</span><span class="o">,</span><span class="m">189</span><span class="err">│</span>
<span class="err">│</span><span class="w">                                                </span><span class="err">│</span>
<span class="err">└────────────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Product</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="nv">Sales</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Widgets</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">1912</span><span class="err">│</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">└────┘</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">205</span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">└───┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">189</span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile</span><span class="s1">''</span><span class="w"> </span><span class="no">⍬</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ Header row</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Widgets</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">1912</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Product</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Sales</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">  </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">205</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">  </span><span class="err">└───┘</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">189</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────┘</span><span class="w">                       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile</span><span class="s1">''</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ Fields are Char, Num</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Widgets</span><span class="err">│</span><span class="w">  </span><span class="m">1912</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Product</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Sales</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="err">│</span><span class="w">  </span><span class="m">205</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">       </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w">      </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w"> </span><span class="m">189</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w">      </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────────┘</span><span class="w">                       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕CSV</span><span class="na">⍠</span><span class="s1">'Invert'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="nv">CSVFile</span><span class="s1">''</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w">    </span><span class="c1">⍝ Invert 1</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="nv">Widgets</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1912</span><span class="w"> </span><span class="m">205</span><span class="w"> </span><span class="m">189</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Product</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Sales</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">───────────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w">                </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w">                </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────┘</span><span class="w">                       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="p">(</span><span class="nf">⎕CSV</span><span class="na">⍠</span><span class="s1">'Invert'</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="nv">CSVFile</span><span class="s1">''</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="m">1</span><span class="w">    </span><span class="c1">⍝ Invert 2</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">1912</span><span class="w"> </span><span class="m">205</span><span class="w"> </span><span class="m">189</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Widgets</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">~</span><span class="err">───────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">│</span><span class="w">                </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">───────────────────────────────┘</span><span class="w">                </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────────────────────────┘</span>
</code></pre></div></p>
<h5>Notes</h5>
<ul>
<li>When <code>Y</code> specifies just the source of the CSV data, it does not need to be enclosed or ravelled to create a 1-element vector.</li>
<li><code>Y[2]</code>, the description of the source, distinguishes an otherwise ambiguous character vector source (which could contain either CSV data or a file name). The other source forms are unambiguous but the description, when given, must still match the given source type.</li>
<li>Tab-separated fields may be imported by specifying <code>'Separator' (⎕UCS 9)</code>.</li>
<li>Fields containing embedded new lines are supported (they must, of course, appear in quotes or be prefixed by the escape character). On import, line endings are always converted to a single line feed character.</li>
<li>If Ragged is not set then all records must have the same number of fields (character delimited format) or same number of characters (fixed width field format).</li>
<li>If Ragged is set:</li>
<li>The expected number of columns must be specified using the Widths variant option and/or the column types in <code>Y[3]</code>.</li>
<li>In character delimited format, all processed records are implicitly extended or truncated as required so that they contain the expected number of fields; implicitly added fields will be empty.</li>
<li>In fixed width format, all processed records are implicitly extended with spaces or truncated as required so that they contain as many characters as are specified in the Widths option declaration.</li>
</ul>
<h6>File handling</h6>
<p>Data may be read from a named file or a tied native file. A tied native file may be read in sections by repeatedly invoking <code>⎕CSV</code> for a specified maximum number of records (specified by the Records variant) until no more data is read.</p>
<p>In all cases the files must contain text using one of the supported encodings. See <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>. The method used to determine the file encoding is as follows:</p>
<ul>
<li>If a Byte Order Mark (BOM) is encountered at the start of the file, it is used regardless of <code>Y[2]</code> (if specified). Note, however, that the BOM can only be encountered if the file is read from the start - specifically, if a native file is read in sections, any BOM present will only be encountered when the first section is read.</li>
<li>Otherwise, the file will be read and decoded according to the file encoding in <code>Y[2]</code> if specified.</li>
<li>Otherwise:    Native files will be decoded as if <code>'UTF-8'</code> had been specified.    Files specified by name will be examined and the likely file encoding will be deduced using the same heuristics performed by <code>⎕NGET</code>.</li>
<li>Native files will be decoded as if <code>'UTF-8'</code> had been specified.</li>
<li>Files specified by name will be examined and the likely file encoding will be deduced using the same heuristics performed by <code>⎕NGET</code>.</li>
</ul>
<h5>Note also</h5>
<ul>
<li>Native files are read from the current file position. On successful completion, the file position will be at the first unprocessed character (end of file if the Records variant option is not specified). If an error is signalled the file position is undefined.</li>
<li>The result does not report the file encoding or line ending type as it does with <code>⎕NGET</code>. If this information is required then it must be obtained by other means.</li>
</ul>
<h6>Dyadic <code>⎕CSV</code></h6>
<p><code>{R}←X ⎕CSV Y</code></p>
<p>The left argument <code>X</code> is either:</p>
<ul>
<li>a matrix or a vector of vectors/matrices  containing the data to be converted to CSV format.</li>
<li>or a 2-element vector containing a matrix or vector of vectors/matrices containing the data to be converted to CSV format, and a vector of character vectors containing the header record.</li>
</ul>
<p><code>Y</code> is a 1 or 2-element vector containing:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Destination of CSV Data (see below)</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Description of the CSV data (see below)</td>
</tr>
</tbody>
</table>
<p><em>Destination</em> - may be one of:</p>
<ul>
<li>a character vector or scalar containing a file name</li>
<li>a native tie number</li>
<li>an empty character vector, indicating that the CSV data is to be returned in the result <code>R</code></li>
</ul>
<p><em>Description</em></p>
<p>If <code>Y[1]</code>  is a file name or tie number, <em>Description</em> may be:</p>
<ul>
<li>a character vector specifying the file encoding such as <code>'UTF-8'</code> (see <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>).</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>
<p>If <code>Y[1]</code> is empty, <em>Description</em> may be a character scalar <code>'S'</code> (simple) or <code>'N'</code> (nested). If omitted, the default is <code>'S'</code></p>
<h6>Variant options</h6>
<p>Dyadic <code>⎕CSV</code> may be applied using the  Variant operator with the following options.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>IfExists</td>
<td>a character vector <code>'Error'</code> or <code>'Replace'</code> which specifies, when creating a named file  which already exists, whether to overwrite it ( <code>'Replace'</code> ) or signal an error ( <code>'Error'</code> )</td>
<td><code>'Error'</code></td>
</tr>
<tr>
<td>Separator</td>
<td>the field separator, any single character. If Widths is other than <code>⍬</code> , Separator is ignored.</td>
<td><code>','</code></td>
</tr>
<tr>
<td>Widths</td>
<td>a vector of numeric values describing the width (in  characters) of the corresponding columns in the CSV source, or <code>⍬</code> for variable width delimited fields</td>
<td><code>⍬</code></td>
</tr>
<tr>
<td>Decimal</td>
<td>the decimal mark in numeric fields - one of <code>'.'</code> or <code>','</code></td>
<td><code>'.'</code></td>
</tr>
<tr>
<td>Thousands</td>
<td>the thousands separator in numeric fields, which may be  specified as an empty character vector (meaning no separator is defined) or a  character scalar</td>
<td><code>''</code></td>
</tr>
<tr>
<td>Trim</td>
<td>a Boolean specifying whether whitespace is trimmed at the  beginning and end of character fields</td>
<td><code>1</code></td>
</tr>
<tr>
<td>LineEnding</td>
<td>the line ending sequence - see <a class="internal-link" href="#system-functions-nget">Line separators:</a></td>
<td>(13 10) on Windows; 10 on other platforms</td>
</tr>
<tr>
<td>QuoteChar</td>
<td>The field quote character (delimiter), which may be specified as an empty character vector (meaning none is defined) or a character scalar</td>
<td><code>"</code></td>
</tr>
<tr>
<td>EscapeChar</td>
<td>The escape character, which may be specified as an empty character vector (meaning none is defined) or a character scalar</td>
<td><code>''</code></td>
</tr>
<tr>
<td>DoubleQuote</td>
<td>A Boolean which indicates whether (1) or not (0) a quote character within a quoted field is represented by two consecutive quote characters</td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<p>The Separator, QuoteChar and EscapeChar characters, when defined, must be different. Other options defined for import are also accepted but ignored.</p>
<p>The Overwrite variant option (Boolean) from Version 16.0 remains supported but is deprecated in favour of IfExists.</p>
<h6>QuoteChar, EscapeChar and DoubleQuote options</h6>
<ul>
<li>The CSV text will be generated such that it can be read back according to the corresponding rules for import.</li>
<li>If these options do not permit this (for example, a field contains the quote character and neither DoubleQuote or EscapeChar are set) an error is signalled.</li>
<li>Quoting and Escaping is used as conservatively as possible.</li>
<li>If both QuoteChar and EscapeChar are set, quoting is favoured.</li>
</ul>
<p>If <code>Y</code> specifies that the CSV data is written to a file then <code>R</code> is the number of bytes (not characters) written, and is shy.</p>
<p>Otherwise, <code>R</code> is the CSV data in the format specified in Y, and is not shy.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">CSVFile</span><span class="kd">←</span><span class="s1">'c:\Dyalog16.0\sales.csv'</span>
<span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="kd">←</span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile</span><span class="s1">''</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="m">1</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Widgets</span><span class="err">│</span><span class="w">  </span><span class="m">1912</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Product</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Sales</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w"> </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">──────────────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Gimlets</span><span class="err">│</span><span class="w">  </span><span class="m">205</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└───────┘</span><span class="w">       </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w">      </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">Dingbats</span><span class="err">│</span><span class="w"> </span><span class="m">189</span><span class="w">  </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└────────┘</span><span class="w">      </span><span class="err">│</span><span class="w">                       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────────┘</span><span class="w">                       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">DATA</span><span class="o">⍪</span><span class="kd">←</span><span class="s1">'Gizmos'</span><span class="w"> </span><span class="m">23</span>
<span class="w">      </span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="w"> </span><span class="nf">⎕CSV</span><span class="s1">''</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span>
<span class="err">│</span><span class="nv">Product</span><span class="o">,</span><span class="nv">Sales</span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Widgets</span><span class="o">,</span><span class="m">1912</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Gimlets</span><span class="o">,</span><span class="m">205</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Dingbats</span><span class="o">,</span><span class="m">189</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="nv">Gizmos</span><span class="o">,</span><span class="m">23</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">│</span><span class="w">             </span><span class="err">│</span>
<span class="err">└─────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">CSVFile1</span><span class="kd">←</span><span class="s1">'c:\Dyalog16.0\sales1.csv'</span>
<span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="w"> </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile1</span>

<span class="m">67</span>
<span class="w">       </span><span class="nv">DATA</span><span class="o">⍪</span><span class="kd">←</span><span class="s1">'Gimbals'</span><span class="w"> </span><span class="m">123</span>
<span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="w"> </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile1</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Unable</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="p">(</span><span class="s2">"The file exists."</span><span class="p">)</span>
<span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="w"> </span><span class="nf">⎕CSV</span><span class="w"> </span><span class="nv">CSVFile1</span>
<span class="w">      </span><span class="o">∧</span>
<span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">DATA</span><span class="w"> </span><span class="nv">HDR</span><span class="p">(</span><span class="nf">⎕CSV</span><span class="na">⍠</span><span class="s1">'IfExists'</span><span class="w"> </span><span class="s1">'Replace'</span><span class="p">)</span><span class="nv">CSVFile1</span>

<span class="m">80</span><span class="w"> </span>
</code></pre></div></p>
<p><img alt="csv_excel1" src="img/csv-excel1.png"/></p>
<h6>Notes</h6>
<ul>
<li>When <code>Y</code> contains only the destination of the CSV data (i.e. omits the description in its second element) it does not have to be enclosed to form a single element vector.</li>
<li>Native files are written from the current file position. On successful completion, the file position will be at the end of the written data. If an error is signalled the amount of data written is undefined.</li>
<li>If the file encoding specifies that a BOM is required and output is to a native file, it will only be written if the file position is initially at 0 - that is, the start of the file is being written.</li>
<li>When fixed width fields are written, character data shorter than the specified width is padded with spaces to the right and character data longer than the specified width signals an error. Numeric data is converted to character data as far as possible so that it fits into the specified width. If this is not possible, an error is signalled.</li>
<li>Tab-separated fields may be exported by specifying <code>'Separator' (⎕UCS 9)</code>.</li>
<li>Fields containing a single embedded new line are supported.  On export, line feed characters are mapped back to the defined line ending sequence.</li>
</ul>
</article>
<article id="system-functions-ct">
<div class="heading-container"><h3 class="heading" id="system-functions-ct-header">Comparison Tolerance</h3><div class="command">⎕CT</div></div>
<p>The value of <code>⎕CT</code> determines the precision with which two numbers are judged to be equal.  Two numbers, <code>X</code> and <code>Y</code>, are judged to be equal if <code>(|X-Y)≤⎕CT×(|X)⌈|Y</code>where <code>≤</code> is applied without tolerance.</p>
<p>Thus <code>⎕CT</code> is not used as an absolute value in comparisons, but rather specifies a relative value that is dependent on the magnitude of the number with the greater magnitude. It then follows that <code>⎕CT</code> has no effect when either of the numbers is zero.</p>
<p><code>⎕CT</code> may be assigned any value in the range from <code>0</code> to  <code>2*¯32</code>  (about <code>2.3E¯10</code>). A value of <code>0</code> ensures exact comparison.  The value in a clear workspace is <code>1E¯14</code>. <code>⎕CT</code> has Namespace scope.</p>
<p>If <code>⎕FR</code> is 1287, the system uses <code>⎕DCT</code>. See <a class="internal-link" href="#system-functions-dct">Section 4.6.25</a>.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments of the monadic primitive functions Ceiling (<code>⌈</code>), Floor (<code>⌊</code>) and Unique (<code>∪</code>), and of the dyadic functions Equal (<code>=</code>), Excluding (<code>~</code>), Find (<code>⍷</code>), Greater (<code>&gt;</code>), Greater or Equal (<code>≥</code>), Greatest Common Divisor (<code>∨</code>), Index of (<code>⍳</code>), Intersection (<code>∩</code>), Less (<code>&lt;</code>), Less or Equal (<code>≤</code>), Lowest Common Multiple (<code>∧</code>), Match (<code>≡</code>), Membership (<code>∊</code>), Not Match (<code>≢</code>), Not Equal (<code>≠</code>), Residue (<code>|</code>) and Union (<code>∪</code>), as well as <code>⎕FMT</code> O-format.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">1E¯10</span>
<span class="w">      </span><span class="m">1.00000000001</span><span class="w"> </span><span class="m">1.0000001</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-cy">
<div class="heading-container"><h3 class="heading" id="system-functions-cy-header">Copy Workspace</h3><div class="command">{R}←{X}⎕CY Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector identifying a saved workspace (or Session file).  <code>X</code> is optional.  If present, it must be a simple character scalar, vector or matrix or a vector of character vectors that specifies one or more APL names.</p>
<p>Each name in <code>X</code> is taken to be the name of an active object in the workspace identified by <code>Y</code>.  If <code>X</code> is omitted, the names of all defined active objects in that workspace are implied (defined functions and operators, variables, labels and namespaces).</p>
<p>Each object named in <code>X</code> (or implied) is copied from the workspace identified by <code>Y</code> to become the active object referenced by that name in the active workspace if the object can be copied.  A copied label is re-defined to be a variable of numeric type.  If the name of the copied object has an active referent in the active workspace, the name is disassociated from its value and the copied object becomes the active referent to that name.  In particular, a function in the state indicator which is disassociated may be executed whilst it remains in the state indicator, but it ceases to exist for other purposes, such as editing.</p>
<p>The shy result <code>R</code> is <code>0⍴⊂''</code>.</p>
<p>You may copy an object from a namespace by specifying its full pathname.  The object will be copied to the current namespace in the active workspace, losing its original parent and gaining a new one in the process.  You may only copy a GUI object into a namespace that is a suitable parent for that object.  For example, you could only copy a Group object from a saved workspace if the current namespace in the active workspace is itself a Form, SubForm or Group.</p>
<p>See <a class="internal-link" href="#system-commands-pcopy">Section 5.2.21</a> for further information and, in particular, the manner in which dependent and referenced objects are copied, and copying objects from Session (.dse) files.</p>
<p>A <code>DOMAIN ERROR</code> is reported in any of the following cases:</p>
<ul>
<li><code>Y</code> is ill-formed, or is not the name of a workspace with access authorised for the active user account.</li>
<li>Any name in <code>X</code> is ill-formed.</li>
<li>An object named in <code>X</code> does not exist as an active object in workspace named in <code>Y</code>.</li>
</ul>
<p>An object being copied has the same name as an active label.</p>
<p>When copying data between Classic and Unicode Editions, <code>⎕</code>CY will fail and a <code>TRANSLATION ERROR</code> will be reported if <em>any</em> object in workspace <code>Y</code> fails conversion between Unicode and <code>⎕AV</code> indices, whether or not that object is specified by <code>X</code>. See <a class="internal-link" href="#system-functions-avu">Section 4.6.12</a> for further details.</p>
<p>A <code>WS FULL</code> is reported if the active workspace becomes full during the copying process.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'FOO'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="s1">'FOO'</span><span class="w"> </span><span class="nf">⎕CY</span><span class="w"> </span><span class="s1">'BACKUP'</span>
<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'FOO'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span><span class="o">×</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<p>System variables are copied if explicitly included in the left argument, but not if the left argument is omitted.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕LX</span>

<span class="w">      </span><span class="p">(</span><span class="s1">'⎕LX'</span><span class="w"> </span><span class="s1">'X'</span><span class="p">)</span><span class="nf">⎕CY</span><span class="s1">'WS/CRASH'</span>
<span class="w">      </span><span class="nf">⎕LX</span>
<span class="kd">→</span><span class="nv">RESTART</span>
</code></pre></div>
<p>A copied object may have the same name as an object being executed.  If so, the name is disassociated from the existing object, but the existing object remains defined in the workspace until its execution is completed.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FOO[1]*</span>

<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'FOO'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="s1">'FOO'</span><span class="nf">⎕CY</span><span class="s1">'WS/MYWORK'</span>

<span class="w">      </span><span class="nv">FOO</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FOO[1]*</span>
<span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>
<span class="m">10</span>
</code></pre></div>
</article>
<article id="system-functions-d">
<div class="heading-container"><h3 class="heading" id="system-functions-d-header">Digits</h3><div class="command">R←⎕D</div></div>
<p>This is a simple character vector of the digits from 0 to 9.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕D</span>
<span class="m">0123456789</span>
</code></pre></div>
</article>
<article id="system-functions-dct">
<div class="heading-container"><h3 class="heading" id="system-functions-dct-header">Decimal Comparison Tolerance</h3><div class="command">⎕DCT</div></div>
<p>The value of <code>⎕DCT</code> determines the precision with which two numbers are judged to be equal when the value of <code>⎕FR</code> is 1287. If <code>⎕FR</code> is 645, the system uses <code>⎕CT</code>.</p>
<p><code>⎕DCT</code> may be assigned any value in the range from <code>0</code> to <code>2*¯32</code> (about <code>2.3283064365386962890625E¯10</code>). A value of <code>0</code> ensures exact comparison. The value in a clear workspace is <code>1E¯28</code>. <code>⎕DCT</code> has Namespace scope.</p>
<p><code>⎕CT</code> and <code>⎕DCT</code> are implicit arguments of the monadic primitive functions Ceiling (<code>⌈</code>), Floor (<code>⌊</code>) and Unique (<code>∪</code>), and of the dyadic functions Equal (<code>=</code>), Excluding (<code>~</code>), Find (<code>⍷</code>), Greater (<code>&gt;</code>), Greater or Equal (<code>≥</code>), Greatest Common Divisor (<code>∨</code>), Index of (<code>⍳</code>), Intersection (<code>∩</code>), Less (<code>&lt;</code>), Less or Equal (<code>≤</code>), Lowest Common Multiple (<code>∧</code>), Match (<code>≡</code>), Membership (<code>∊</code>), Not Match (<code>≢</code>), Not Equal (<code>≠</code>), Residue (<code>|</code>) and Union (<code>∪</code>), as well as <code>⎕FMT</code> O-format.</p>
<p>For further information, see <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕DCT</span><span class="kd">←</span><span class="m">1E¯10</span>
<span class="w">      </span><span class="m">1.00000000001</span><span class="w"> </span><span class="m">1.0000001</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-df">
<div class="heading-container"><h3 class="heading" id="system-functions-df-header">Display Form</h3><div class="command">{R}←⎕DF Y</div></div>
<p><code>⎕DF</code> sets the <em>Display Form</em> of a namespace, a GUI object, a Class, or an Instance of a Class.</p>
<p><code>Y</code> must be <code>⎕NULL</code> or a simple character array that specifies the display form of a namespace. If defined, this array will be returned by the <em>format</em> functions and <code>⎕FMT</code> instead of the default for the object in question. This also applies to the string that is displayed when the name is referenced but not assigned (the <em>default display</em>). If <code>Y</code> is  <code>⎕NULL</code>, <code>⎕DF</code> resets the Display Form to the default.</p>
<p>The result <code>R</code> is the previous value of the Display Form which initially is <code>⎕NULL</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="o">⍕</span><span class="nv">F</span>
<span class="c1">#.F</span>
<span class="w">      </span><span class="o">⍴⍕</span><span class="nv">F</span>
<span class="m">3</span>
<span class="w">      </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">F</span>
<span class="c1">#.F</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">F</span>
<span class="m">1</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="nv">F</span><span class="w"> </span><span class="c1">⍝ default display uses ⍕</span>
<span class="c1">#.F</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'Pete''s Form'</span>
<span class="w">      </span><span class="o">⍕</span><span class="nv">F</span>
<span class="nv">Pete</span><span class="s1">'s Form</span>
<span class="s1">      ⍴⍕F</span>
<span class="s1">11</span>
<span class="s1">      ⎕FMT F</span>
<span class="s1">Pete'</span><span class="nv">s</span><span class="w"> </span><span class="nv">Form</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">F</span>
<span class="m">1</span><span class="w"> </span><span class="m">11</span>
</code></pre></div>
<p>Notice that <code>⎕DF</code> will accept any character array, but <code>⎕FMT</code> always returns a matrix.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="nf">⎕A</span>
<span class="w">      </span><span class="nv">F</span>
<span class="nv">ABCDE</span>
<span class="nv">FGHIJ</span>

<span class="nv">KLMNO</span>
<span class="nv">PQRST</span>
<span class="w">      </span><span class="o">⍴⍕</span><span class="nv">F</span>
<span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">F</span>
<span class="nv">ABCDE</span>
<span class="nv">FGHIJ</span>

<span class="nv">KLMNO</span>
<span class="nv">PQRST</span>
<span class="m">5</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<p>Note that <code>⎕DF</code> defines the Display Form statically, rather than dynamically.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span><span class="w"> </span><span class="s1">'This is the Caption'</span>
<span class="w">      </span><span class="nv">F</span>
<span class="c1">#.F</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="p">(</span><span class="nf">⎕DF</span><span class="w"> </span><span class="nv">Caption</span><span class="p">)</span><span class="c1">⍝ set display form to current caption</span>
<span class="w">      </span><span class="nv">F</span>
<span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Caption</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nv">Caption</span><span class="kd">←</span><span class="s1">'New Caption'</span><span class="w"> </span><span class="c1">⍝ changing caption does not</span>
<span class="w">                              </span><span class="c1">⍝ change the display form</span>
<span class="w">      </span><span class="nv">F</span>
<span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Caption</span>
</code></pre></div></p>
<p>You may use the Constructor function to assign the Display Form to an Instance of a Class. For example:
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Make</span><span class="w"> </span><span class="nv">arg</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Constructor</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="nv">arg</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ MyClass</span>

<span class="w">      </span><span class="nv">PD</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">MyClass</span><span class="w"> </span><span class="s1">'Pete'</span>
<span class="w">      </span><span class="nv">PD</span>
<span class="nv">Pete</span>
</code></pre></div></p>
<p>It is possible to set the Display Form for the Root and for <code>⎕SE</code>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="c1">#</span>
<span class="c1">#</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="nf">⎕WSID</span>
<span class="w">      </span><span class="c1">#</span>
<span class="nv">CLEAR</span><span class="w"> </span><span class="nv">WS</span>

<span class="w">      </span><span class="nf">⎕SE</span>
<span class="nf">⎕SE</span>
<span class="w">      </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'Session'</span>
<span class="w">      </span><span class="nf">⎕SE</span>
<span class="nv">Session</span>
</code></pre></div></p>
<p>Note that <code>⎕DF</code> applies directly to the object in question and is not automatically applied in a hierarchical fashion.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'X'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">X</span>
<span class="c1">#.X</span>

<span class="w">      </span><span class="s1">'Y'</span><span class="nv">X</span><span class="na">.</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">X</span><span class="na">.</span><span class="nv">Y</span>
<span class="c1">#.X.Y</span>
<span class="w">      </span><span class="nv">X</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'This is X'</span>
<span class="w">      </span><span class="nv">X</span>
<span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">X</span>

<span class="w">      </span><span class="nv">X</span><span class="na">.</span><span class="nv">Y</span>
<span class="c1">#.X.Y</span>
</code></pre></div></p>
</article>
<article id="system-functions-div">
<div class="heading-container"><h3 class="heading" id="system-functions-div-header">Division Method</h3><div class="command">⎕DIV</div></div>
<p>The value of <code>⎕DIV</code> determines how division by zero is to be treated.  If <code>⎕DIV=0</code>, division by 0 produces a <code>DOMAIN ERROR</code> except that the special case of <code>0÷0</code> returns 1.</p>
<p>If <code>⎕DIV=1</code>, division by 0 returns 0.</p>
<p><code>⎕DIV</code> may be assigned the value 0 or 1.  The value in a clear workspace is 0.</p>
<p><code>⎕DIV</code> is an implicit argument of the monadic function Reciprocal (<code>÷</code>) and the dyadic function Divide (<code>÷</code>). <code>⎕DIV</code> has Namespace scope.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕DIV</span><span class="kd">←</span><span class="m">0</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="m">0.5</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="o">÷</span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="o">÷</span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="err">^</span>

<span class="w">      </span><span class="nf">⎕DIV</span><span class="kd">←</span><span class="m">1</span>

<span class="w">      </span><span class="o">÷</span><span class="m">0</span><span class="w"> </span><span class="m">2</span>
<span class="m">0</span><span class="w"> </span><span class="m">0.5</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">÷</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0.5</span>
</code></pre></div>
</article>
<article id="system-functions-dl">
<div class="heading-container"><h3 class="heading" id="system-functions-dl-header">Delay</h3><div class="command">{R}←⎕DL Y</div></div>
<p><code>Y</code> must be a simple non-negative single numeric value (of any rank).  A pause of approximately <code>Y</code> seconds is caused.</p>
<p>The shy result <code>R</code> is a scalar numeric value indicating the length of the pause in seconds.</p>
<p>The pause may be interrupted by a weak or strong interrupt.</p>
</article>
<article id="system-functions-dm">
<div class="heading-container"><h3 class="heading" id="system-functions-dm-header">Diagnostic Message</h3><div class="command">R←⎕DM</div></div>
<p>This niladic function returns the last reported APL error as a three-element vector, giving error message, line in error and position of caret pointer.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="o">÷</span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="m">2</span><span class="o">÷</span><span class="m">0</span>
<span class="w">     </span><span class="err">^</span>

<span class="w">      </span><span class="nf">⎕DM</span>
<span class="w"> </span><span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="w">        </span><span class="m">2</span><span class="o">÷</span><span class="m">0</span><span class="w">       </span><span class="err">^</span>
</code></pre></div>
<p>Note: <code>⎕SIGNAL</code> can be used to reset the value of this system constant.</p>
</article>
<article id="system-functions-dmx">
<div class="heading-container"><h3 class="heading" id="system-functions-dmx-header">Extended Diagnostic Message</h3><div class="command">R←⎕DMX</div></div>
<p><code>⎕DMX</code> is a system object that provides information about the last reported APL error. <code>⎕DMX</code> has <em>thread scope</em>, i.e. its value differs according to the thread from which it is referenced. In a multi-threaded application therefore, each thread has its own value of <code>⎕DMX</code>.</p>
<p><code>⎕DMX</code> contains the following Properties (name class 2.6). Note that this list is likely to change. Your code should not assume that this list will remain unchanged. You should also not assume that the display form of <code>⎕DMX</code> will remain unchanged.</p>
<table>
<tbody>
<tr>
<td><code>Category</code></td>
<td>character vector</td>
<td>The category of the error</td>
</tr>
<tr>
<td><code>DM</code></td>
<td>nested vector</td>
<td>Diagnostic message. This is the same as <code>⎕DM</code> , but thread safe</td>
</tr>
<tr>
<td><code>EM</code></td>
<td>character vector</td>
<td>Event message; this is the same as <code>⎕EM ⎕EN</code></td>
</tr>
<tr>
<td><code>EN</code></td>
<td>integer</td>
<td>Error number. This is the same as <code>⎕EN</code> , but thread safe</td>
</tr>
<tr>
<td><code>ENX</code></td>
<td>integer</td>
<td>Sub-error number</td>
</tr>
<tr>
<td><code>HelpURL</code></td>
<td>character vector</td>
<td>URL of a web page that will provide help for this error. APL identifies and has a handler for URLs starting with <em>http:</em> , <em>https:</em> , <em>mailto:</em> and <em>www.</em> This list may be extended in future</td>
</tr>
<tr>
<td><code>InternalLocation</code></td>
<td>nested vector</td>
<td>Identifies the line of interpreter source code (file name and line number) which raised the error. This information may be useful to Dyalog support when investigating an issue</td>
</tr>
<tr>
<td><code>Message</code></td>
<td>character vector</td>
<td>Further information about the error</td>
</tr>
<tr>
<td><code>OSError</code></td>
<td>see below</td>
<td>If applicable, identifies the error generated by the Operating System or by a child process</td>
</tr>
<tr>
<td><code>Vendor</code></td>
<td>character vector</td>
<td>For system generated errors, <code>Vendor</code> will always contain the character vector <code>'Dyalog'</code> . This value can be set using <code>⎕SIGNAL</code></td>
</tr>
</tbody>
</table>
<p>OSError is a 3-element vector whose items are as follows:</p>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td>integer</td>
<td>This indicates how an error from the operating system or a child process was retrieved. 0 = by the C-library <code>errno()</code> function 1 = by the Windows <code>GetLastError()</code> function 2 = as the exit status of a child process</td>
</tr>
<tr>
<td><code>2</code></td>
<td>integer</td>
<td>Error code. The error number returned by the operating system using <code>errno()</code> or <code>GetLastError()</code> as above</td>
</tr>
<tr>
<td><code>3</code></td>
<td>character vector</td>
<td>The description of the error returned by the operating system</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="o">÷</span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="m">1</span><span class="o">÷</span><span class="m">0</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="nf">⎕DMX</span>
<span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="w">                              </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">  </span><span class="nv">Divide</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span><span class="w">                            </span>

<span class="w">      </span><span class="nf">⎕DMX</span><span class="na">.</span><span class="nv">InternalLocation</span>
<span class="w"> </span><span class="nv">arith_su</span><span class="na">.</span><span class="nv">c</span><span class="w">  </span><span class="m">554</span>
</code></pre></div>
<h5>Isolation of Handled Errors</h5>
<p><code>⎕DMX</code> cannot be explicitly localised in the header of a function. However, for all trapped errors, the interpreter creates an environment which effectively makes the current instance of <code>⎕DMX</code> local to, and available only for the duration of, the trap-handling code.</p>
<p>With the exception of <code>⎕TRAP</code> with Cutback,  <code>⎕DMX</code> is implicitly localised within:</p>
<ul>
<li>Any function which explicitly localises <code>⎕TRAP</code></li>
<li>The <code>:Case[List]</code> or <code>:Else</code> clause of a <code>:Trap</code> control structure.</li>
<li>The right hand side of a D-function Error-Guard.</li>
</ul>
<p>and is implicitly un-localised when:</p>
<ul>
<li>A function which has explicitly localised <code>⎕TRAP</code> terminates (even if the trap definition has been inherited from a function further up the stack).</li>
<li>The <code>:EndTrap</code> of the current <code>:Trap</code> control structure is reached.</li>
<li>A D-function Error-Guard exists.</li>
</ul>
<p>During this time, if an error occurs then the localised <code>⎕DMX</code> is updated to reflect the values generated by the error.</p>
<p>The same is true for <code>⎕TRAP</code> with Cutback, with the exception that  if the cutback trap event is triggered, the updated values for <code>⎕DMX</code> are preserved until the function that set the cutback trap terminates.</p>
<p>The benefit of the localisation strategy is that code which uses error trapping as a standard operating procedure (such as a file utility which traps <code>FILE NAME ERROR</code> and creates missing files when required) will not pollute the environment with irrelevant error information.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">NewFile</span><span class="w"> </span><span class="nv">name</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Trap</span><span class="w"> </span><span class="m">22</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">        </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nf">⎕DMX</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">        </span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="nv">tie</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">        </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">EndTrap</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">tie</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<p><code>⎕DMX</code> is cleared by  <code>)RESET</code>:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">reset</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nf">⎕DMX</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Note: <code>⎕SIGNAL</code> can be used to reset the value of this system constant.</p>
<p>The first time we run <code>NewFile 'pete'</code>, the file doesn't exist and  the <code>⎕FCREATE</code> in <code>NewFile[2]</code> succeeds.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">NewFile</span><span class="w"> </span><span class="s1">'pete'</span>
<span class="m">1</span>
</code></pre></div></p>
<p>If we run the function again, the <code>⎕FCREATE</code> in <code>NewFile[2]</code>generates an error which triggers the <code>:Else</code> clause of the :<code>Trap</code>.  On entry to the <code>:Else</code> clause, the values in <code>⎕DMX</code> reflect the error generated by <code>⎕FCREATE</code>. The file is then tied, erased and  recreated.
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="w">                                       </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">  </span><span class="nv">File</span><span class="w"> </span><span class="nv">exists</span>
</code></pre></div></p>
<p>After exiting the <code>:Trap</code> control structure, the shadowed value of <code>⎕DMX</code> is discarded, revealing the original value that it shadowed.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nf">⎕DMX</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>The <code>EraseFile</code> function also uses a <code>:Trap</code> in order to ignore the situation when the file doesn't exist.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">EraseFile</span><span class="w"> </span><span class="nv">name</span><span class="sr">;</span><span class="nv">tie</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Trap</span><span class="w"> </span><span class="m">22</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">        </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">        </span><span class="nv">name</span><span class="w"> </span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="nv">tie</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="nf">⎕DMX</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">EndTrap</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
<p>The first time we run the function, it succeeds in tieing and then erasing the file.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">EraseFile</span><span class="w"> </span><span class="s1">'pete'</span>
</code></pre></div></p>
<p>The second time, the <code>⎕FTIE</code> fails. On entry to the <code>:Else</code> clause, the values in <code>⎕DMX</code> reflect this error.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">EraseFile</span><span class="w"> </span><span class="s1">'pete'</span>
<span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="w">                                        </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">  </span><span class="nv">Unable</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">open</span><span class="w"> </span><span class="nv">file</span><span class="w">                                    </span>
<span class="w"> </span><span class="nv">OSError</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="nv">The</span><span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">specified</span><span class="na">.</span><span class="w">        </span>
</code></pre></div></p>
<p>Once again, the local value of <code>⎕DMX</code> is discarded on exit from the <code>:Trap</code>, revealing the shadowed value as before.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nf">⎕DMX</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>In this example only the error number (<code>EN</code>) property of <code>⎕DMX</code> is displayed in order to simplify the output:
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="nv">n</span><span class="sr">;</span><span class="nf">⎕TRAP</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="s1">'Start foo'</span><span class="nf">⎕DMX</span><span class="na">.</span><span class="nv">EN</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'→err'</span><span class="p">)(</span><span class="m">11</span><span class="w"> </span><span class="s1">'C'</span><span class="w"> </span><span class="s1">'→err'</span><span class="p">)</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="nv">goo</span><span class="w"> </span><span class="nv">n</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">err</span><span class="bp">:</span><span class="s1">'End foo:'</span><span class="nf">⎕DMX</span><span class="na">.</span><span class="nv">EN</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">goo</span><span class="w"> </span><span class="nv">n</span><span class="sr">;</span><span class="nf">⎕TRAP</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'→err'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="o">⍎</span><span class="nv">n</span><span class="o">⊃</span><span class="s1">'÷0'</span><span class="w"> </span><span class="s1">'1 2+1 2 3'</span><span class="w"> </span><span class="s1">'∘'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">err</span><span class="bp">:</span><span class="s1">'goo:'</span><span class="nf">⎕DMX</span><span class="na">.</span><span class="nv">EN</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
<p>In the first case a <code>DOMAIN ERROR</code> (11) is generated on <code>goo[2]</code>. This error is not included in the definition of <code>⎕TRAP</code> in <code>goo</code>, but rather  the Cutback <code>⎕TRAP</code> definition in <code>foo</code>. The error causes the stack to be cut back to <code>foo</code>, and then execution branches to <code>foo[4]</code>.  Thus <code>⎕DMX.EN</code> in <code>foo</code> retains the value set when the error occurred in <code>goo</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span><span class="nv">Start</span><span class="w"> </span><span class="nv">foo</span><span class="w">  </span><span class="m">0</span>
<span class="w"> </span><span class="nv">End</span><span class="w"> </span><span class="nv">foo</span><span class="bp">:</span><span class="w">  </span><span class="m">11</span>
</code></pre></div></p>
<p>In the second case a <code>LENGTH ERROR</code> (5) is raised on <code>goo[2]</code>.   This error is included in the definition of <code>⎕TRAP</code> in <code>goo</code> so the value <code>⎕DMX.EN</code> while in <code>goo</code> is 5, but when <code>goo</code> terminates and <code>foo</code> resumes execution the value of <code>⎕DMX.EN</code> localised in <code>goo</code> is lost.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">2</span>
<span class="w"> </span><span class="nv">Start</span><span class="w"> </span><span class="nv">foo</span><span class="w">  </span><span class="m">0</span>
<span class="w"> </span><span class="nv">goo</span><span class="bp">:</span><span class="w">  </span><span class="m">5</span>
<span class="w"> </span><span class="nv">End</span><span class="w"> </span><span class="nv">foo</span><span class="bp">:</span><span class="w">  </span><span class="m">0</span>
</code></pre></div></p>
<p>In the third case a <code>SYNTAX ERROR</code> (2) is raised on <code>goo[2]</code>. Since the <code>⎕TRAP</code> statement is handled within <code>goo</code> (although the applicable <code>⎕TRAP</code> is defined in <code>foo</code>), the value <code>⎕DMX.EN</code> while in <code>goo</code> is 2, but when <code>goo</code> terminates and <code>foo</code> resumes execution the value of <code>⎕DMX.EN</code> localised in <code>goo</code> is lost.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="nv">Start</span><span class="w"> </span><span class="nv">foo</span><span class="w">  </span><span class="m">0</span>
<span class="w"> </span><span class="nv">goo</span><span class="bp">:</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span><span class="nv">End</span><span class="w"> </span><span class="nv">foo</span><span class="bp">:</span><span class="w">  </span><span class="m">0</span>
</code></pre></div></p>
</article>
<article id="system-functions-dq">
<div class="heading-container"><h3 class="heading" id="system-functions-dq-header">Dequeue Events</h3><div class="command">{R}←⎕DQ Y</div></div>
<p><strong>Windows only.</strong></p>
<p><code>⎕DQ</code> awaits and processes events.  <code>Y</code> specifies the GUI objects(s) for which events are to be processed.  Objects are identified by their names, as character scalars/vectors, or by namespace references. These may be objects of type Root, Form, Locator, FileBox, MsgBox, PropertySheet, TCPSocket, Timer, Clipboard and pop-up Menu. Sub-objects (children) of those named in <code>Y</code> are also included.  However, any objects which exist, but are not named in <code>Y</code>, are effectively disabled (do not respond to the user).</p>
<p>If <code>Y</code> is <code>#</code>, <code>'#'</code>, or <code>'.'</code>, all objects currently owned and subsequently created by the current thread are included in the <code>⎕DQ</code>. Note that because the Root object is owned by thread 0, events on Root are reported only to thread 0.</p>
<p>If <code>Y</code> is empty it specifies the object associated with the current namespace and is only valid if the current space is one of the objects listed above.</p>
<p>Otherwise, <code>Y</code> contains the name(s) of or reference(s) to the objects for which events are to be processed.  Effectively, this is the list of objects with which the user may interact.  A <code>DOMAIN ERROR</code> is reported if an element of <code>Y</code> refers to anything other than an existing "top-level" object.</p>
<p>Associated with every object is a set of events.  For every event there is defined an "action" which specifies how that event is to be processed by <code>⎕DQ</code>.  The "action" may be a number with the value <code>0</code>, <code>1</code> or <code>¯1</code>,  a character vector containing the name of a "callback function", or a character vector containing the name of a callback function coupled with an arbitrary array.  Actions can be defined in a number of ways, but the following examples will illustrate the different cases.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">OBJ</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">OBJ</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">OBJ</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">OBJ</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="s1">'FOO'</span><span class="w"> </span><span class="m">10</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">OBJ</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Select'</span><span class="w"> </span><span class="s1">'FOO&amp;'</span>
</code></pre></div></p>
<p>These are treated as follows:</p>
<h5>Action = 0 (the default)</h5>
<p><code>⎕DQ</code> performs "standard" processing appropriate to the object and type of event.  For example, the standard processing for a KeyPress event in an Edit object is to action the key press, i.e. to echo the character on the screen.</p>
<h5>Action = <code>¯</code>1</h5>
<p>This disables the event.  The "standard" processing appropriate to the object and type of event is <strong>not</strong> performed, or in some cases is reversed.  For example, if the "action code" for a KeyPress event (22) is set to <code>¯1</code>,  <code>⎕DQ</code> simply ignores all keystrokes for the object in question.</p>
<h5>Action = 1</h5>
<p><code>⎕DQ</code> terminates and returns information pertaining to the event (the <strong>event message</strong>) in <code>R</code> as a nested vector whose first two elements are the name of the object (that generated the event) and the event code.  <code>R</code> may contain additional elements depending upon the type of event that occurred.</p>
<h5 larg="larg">Action = fn</h5>
<p><code>fn</code> is a character vector containing the name of a <em>callback</em> function.  This function is automatically invoked by <code>⎕DQ</code> whenever the event occurs, and <strong>prior</strong> to the standard processing for the event.  The callback is supplied the <strong>event message</strong> (see above) as its right argument, and, if specified, the array <code>larg</code> as its left argument.  If the callback function fails to return a result, or returns the scalar value 1,  <code>⎕DQ</code> then performs the standard processing appropriate to the object and type of event.  If the callback function returns a scalar 0, the standard processing is not performed or in some cases is reversed.</p>
<p>If the callback function returns its event message with some of the parameters changed, these changes are incorporated into the standard processing.  An example would be the processing of a keystroke message where the callback function substitutes upper case for lower case characters. The exact nature of this processing is described in the reference section on each event type.</p>
<h5>Action = <code>⍎</code>expr</h5>
<p>If <code>Action</code> is set to a character vector whose first element is the execute symbol (<code>⍎</code>) the remaining string will be executed automatically whenever the event occurs.  The default processing for the event is performed first and may not be changed or inhibited in any way.</p>
<h5 larg="larg">Action = fn&amp;</h5>
<p><code>fn</code> is a character vector containing the name of a <em>callback</em> function.  The function is executed in a new thread. The default processing for the event is performed first and may not be changed or inhibited in any way.</p>
<h4>The Result of <code>⎕DQ</code></h4>
<p><code>⎕DQ</code> terminates, returning the shy result <code>R</code>, in one of four instances.</p>
<p>Firstly, <code>⎕DQ</code> terminates when an event occurs whose "action code" is 1.  In this case, its result is a nested vector containing the <strong>event message</strong> associated with the event.  The structure of an event message varies according to the event type (see <em>Object Reference</em>).  However, an event message has at least two elements of which the first is a ref to the object or a character vector containing the name of the object, and the second is a character vector or numeric code which identifies the event type.</p>
<p><code>⎕DQ</code> also terminates if all of the objects named in <code>Y</code> have been deleted.  In this case, the result is an empty character vector.  Objects are deleted either using <code>⎕EX</code>, or on exit from a defined function or operator if the names are localised in the header, or on closing a form using the system menu.</p>
<p>Thirdly, <code>⎕DQ</code> terminates if the object named in its right argument is a special <em>modal</em> object, such as a <code>MsgBox</code>, <code>FileBox</code> or <code>Locator</code>, and the user has finished interacting with the object (e.g. by pressing an "OK" button).  The return value of <code>⎕DQ</code> in this case depends on the action code of the event.</p>
<p>Finally, <code>⎕DQ</code> terminates with a <code>VALUE ERROR</code> if it attempts to execute a callback function that is undefined.</p>
</article>
<article id="system-functions-data-representation-monadic">
<div class="heading-container"><h3 class="heading" id="system-functions-data-representation-monadic-header">Data Representation (Monadic)</h3><div class="command">R←⎕DR Y</div></div>
<p>Monadic <code>⎕DR</code> returns the type of its argument <code>Y</code>.  The result <code>R</code> is an integer scalar containing one of the following values. Note that the internal representation and data types for character data differ between the Unicode and Classic Editions.</p>
<p>Table: Unicode Edition</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>1 bit Boolean</td>
</tr>
<tr>
<td>80</td>
<td>8 bits character</td>
</tr>
<tr>
<td>83</td>
<td>8 bits signed integer</td>
</tr>
<tr>
<td>160</td>
<td>16 bits character</td>
</tr>
<tr>
<td>163</td>
<td>16 bits signed integer</td>
</tr>
<tr>
<td>320</td>
<td>32 bits character</td>
</tr>
<tr>
<td>323</td>
<td>32 bits signed  integer</td>
</tr>
<tr>
<td>326</td>
<td>Pointer (32-bit or 64-bit as appropriate)</td>
</tr>
<tr>
<td>645</td>
<td>64 bits Floating</td>
</tr>
<tr>
<td>1287</td>
<td>128 bits Decimal</td>
</tr>
<tr>
<td>1289</td>
<td>128 bits Complex</td>
</tr>
</tbody>
</table>
<p>Table: Classic Edition</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>1 bit Boolean</td>
</tr>
<tr>
<td>82</td>
<td>8 bits character</td>
</tr>
<tr>
<td>83</td>
<td>8 bits signed integer</td>
</tr>
<tr>
<td>163</td>
<td>16 bits signed integer</td>
</tr>
<tr>
<td>323</td>
<td>32 bits signed integer</td>
</tr>
<tr>
<td>326</td>
<td>Pointer  (32-bit or 64-bit as appropriate)</td>
</tr>
<tr>
<td>645</td>
<td>64 bits Floating</td>
</tr>
<tr>
<td>1287</td>
<td>128 bits Decimal</td>
</tr>
<tr>
<td>1289</td>
<td>128 bits Complex</td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-data-representation-dyadic">
<div class="heading-container"><h3 class="heading" id="system-functions-data-representation-dyadic-header">Data Representation (Dyadic)</h3><div class="command">R←X ⎕DR Y</div></div>
<p>Dyadic <code>⎕DR</code> converts the data type of its argument <code>Y</code> according to the type specification <code>X</code>. See <a class="internal-link" href="#system-functions-data-representation-monadic">Section 4.6.32</a> for a list of data types but note that 1287 is not a permitted value in <code>X</code>.</p>
<h5>Case 1</h5>
<p><code>X</code> is a single integer value. The bits in the right argument are interpreted as elements of an array of type <code>X</code>. The shape of the resulting new array will typically be changed along the last axis. For example, a character array interpreted as Boolean will have 8 times as many elements along the last axis.</p>
<h5>Case 2</h5>
<p><code>X</code> is a 2-element integer value. <code>Y</code> is any array.</p>
<p><code>X[1]</code> is either 0 or a data type. If <code>X[1]</code> is 0, <code>Y</code> is converted to data type <code>X[2]</code>. If <code>X[1]</code> is non-zero, the bits in <code>Y</code> are first interpreted as being of type <code>X[1]</code> before being converted to type <code>X[2]</code>. If <code>Y</code> is a scalar it is ravelled. Conversion of <code>Y</code> from one internal data type to another is performed so as to preserve its values without loss of precision.</p>
<p>The result <code>R</code> is a two element nested array comprised of:</p>
<ol>
<li>The converted elements or a fill element (0 or blank) where the conversion failed</li>
<li>A Boolean array of the same shape indicating which elements were successfully converted.</li>
</ol>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">bits</span><span class="kd">←</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="m">80</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="nv">bits</span>
<span class="nv">HK</span>
<span class="w">      </span><span class="m">83</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="nv">bits</span>
<span class="m">72</span><span class="w"> </span><span class="m">75</span>
<span class="w">      </span><span class="m">163</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="nv">bits</span>
<span class="m">19272</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">645</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">75</span>
<span class="err">┌─────┬───┐</span>
<span class="err">│</span><span class="m">72</span><span class="w"> </span><span class="m">75</span><span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="err">│</span>
<span class="err">└─────┴───┘</span>
<span class="w">      </span><span class="m">163</span><span class="w"> </span><span class="m">645</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">72</span><span class="w"> </span><span class="m">75</span>
<span class="err">┌─────┬─┐</span>
<span class="err">│</span><span class="m">19272</span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">└─────┴─┘</span>
</code></pre></div>
<h5>Case 3: Classic Edition Only</h5>
<p><code>X</code> is a 3-element integer value and <code>X[2 3]</code> is <code>163 82</code>. The bits in the right argument are interpreted as elements of an array of type <code>X[1]</code>. The system then converts them to the character representation of the corresponding 16 bit integers. This case is provided primarily for compatibility with APL*PLUS. For new applications, the use of the [conv] field with <code>⎕NAPPEND</code> and <code>⎕NREPLACE</code> is recommended.</p>
<p>Conversion to and from character (data type 82) uses the translate vector given by <code>⎕NXLATE 0</code>. By default this is the mapping defined by the current output translate table (usually WIN.DOT).</p>
<h5>Notes</h5>
<ul>
<li>The internal representation of data may be modified during workspace compaction. For example, numeric arrays and (in the Unicode Edition) character arrays will, if possible, be squeezed to occupy the least possible amount of memory. However, the internal representation of the result <code>R</code> is guaranteed to remain unmodified until it is re-assigned (or partially re-assigned) with the result of any function.</li>
<li>The precise operation of dyadic <code>⎕DR</code> depends upon the byte-ordering scheme of the computer system.</li>
</ul>
</article>
<article id="system-functions-dt-print">
<div class="heading-container"><h3 class="heading" id="system-functions-dt-print-header">Date-time</h3><div class="command">R←X ⎕DT Y</div></div>
<p><code>Y</code> is an array of any shape whose elements contain a timestamp, time number or military time zone character, in any combination.</p>
<p><code>X</code> may be a single integer value or a 2-element integer vector.</p>
<p>When <code>X</code> is a 2-element integer vector, <code>X[1]</code> is a date-time code that explicitly specifies the date-time representation of the numeric elements in <code>Y</code>. <code>X[2]</code> is  either 0 or a date-time code listed in the tables below. 0 specifies that the elements of <code>Y</code> are to be validated. A non-zero value specifies the date-time representation to which the elements of <code>Y</code> are to be converted.</p>
<p>Character scalars in <code>Y</code> are always interpreted as meaning "now".</p>
<p><code>R</code> is an array of the same shape as <code>Y</code>, where each element is either a timestamp, time number or Boolean value as determined by the second or only element in <code>X</code>.</p>
<p>Note: time numbers in <code>R</code> may be of type DECF even if <code>⎕FR</code> is 645 if their magnitude can be too great to store precisely in a double. See the table below for the type numbers where this is so.</p>
<h5>Time Numbers</h5>
<p>If a value in <code>X</code> is positive it indicates that a time number type is expected in <code>Y</code> or generated in <code>R</code>, as follows. Note that the last column indicated whether (Yes) or not (No) negative numbers are allowed.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Category</th>
<th>Epoch<sup>1</sup></th>
<th>Neg<sup>8</sup></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Dyalog Date Number</td>
<td>Day count with fractional part</td>
<td>1899-12-31 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>2</td>
<td>Dyalog component file time</td>
<td>Tick count 1÷60<sup>th</sup> ticks<sup>2</sup></td>
<td>1970-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>10</td>
<td>J (J nanosecond time)</td>
<td>Tick count 1ns ticks <sup>2</sup></td>
<td>2000-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>11</td>
<td>Shakti K7</td>
<td>Tick count 1ms ticks <sup>2</sup></td>
<td>2024-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>12</td>
<td>JavaScript / D / Q</td>
<td>Tick count 1ms ticks <sup>2</sup></td>
<td>1970-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>13</td>
<td>R (R chron format)</td>
<td>Day count with fractional part</td>
<td>1970-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>14</td>
<td>Shakti K9</td>
<td>Tick count 1ms ticks <sup>2</sup></td>
<td>2001-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>20</td>
<td>Unix time</td>
<td>Tick count 1s ticks <sup>2</sup></td>
<td>1970-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>30</td>
<td>Microsoft DOS date/time</td>
<td>Encoded broken-down time 2s resolution</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>31</td>
<td>Microsoft Win32 FILETIME</td>
<td>Tick count <sup>3</sup> 100ns ticks</td>
<td>1601-01-01 00:00</td>
<td>No</td>
</tr>
<tr>
<td>32</td>
<td>Microsoft CLR DateTime (.NET)(Ticks property thereof)</td>
<td>Tick count <sup>3</sup> 100ns ticks</td>
<td>0001-01-01 00:00</td>
<td>No</td>
</tr>
<tr>
<td>33</td>
<td>Microsoft OLE Automation Date(also known as Variant Time)</td>
<td>Day count with fractional part</td>
<td>1899-12-30 00:00</td>
<td>Yes <sup>7</sup></td>
</tr>
<tr>
<td>40</td>
<td>Excel (1900 Date System)<sup>4</sup> / Lotus 1-2-3</td>
<td>Day count with fractional part<sup>5</sup></td>
<td>1899-12-31 00:00<sup>6</sup></td>
<td>No</td>
</tr>
<tr>
<td>41</td>
<td>Excel (1904 Date System)<sup>4</sup></td>
<td>Day count with fractional part</td>
<td>1904-01-01 00:00</td>
<td>No</td>
</tr>
<tr>
<td>42</td>
<td>Stata statistics package</td>
<td>Tick count 1ms ticks<sup>2</sup></td>
<td>1960-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>43</td>
<td>SPSS statistics package</td>
<td>Tick count 1s ticks<sup>2</sup></td>
<td>1582-10-14 00:00</td>
<td>No</td>
</tr>
<tr>
<td>44</td>
<td>SAS</td>
<td>Tick count 1s ticks<sup>2</sup></td>
<td>1960-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>50</td>
<td>Julian Date</td>
<td>Day count with fractional part</td>
<td>¯4717-11-24 12:00</td>
<td>No</td>
</tr>
<tr>
<td>51</td>
<td>J (J dayno)</td>
<td>Day count with fractional part</td>
<td>1800-01-01 00:00</td>
<td>No</td>
</tr>
<tr>
<td>52</td>
<td>Reduced Julian Date</td>
<td>Day count with fractional part</td>
<td>1858-11-16 12:00</td>
<td>Yes</td>
</tr>
<tr>
<td>53</td>
<td>Modified Julian Date</td>
<td>Day count with fractional part</td>
<td>1858-11-17 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>54</td>
<td>Dublin Julian Date</td>
<td>Day count with fractional part</td>
<td>1899-12-31 12:00</td>
<td>Yes</td>
</tr>
<tr>
<td>55</td>
<td>CNES Julian Date</td>
<td>Day count with fractional part</td>
<td>1950-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>56</td>
<td>CCSDS Julian Date</td>
<td>Day count with fractional part</td>
<td>1958-01-01 00:00</td>
<td>Yes</td>
</tr>
<tr>
<td>60</td>
<td>Floating-point decimal encoded format<sup>9</sup> Digits take the form yyyymmdd.hhmmss</td>
<td>Encoded broken-down time 1s resolution</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td>61</td>
<td>Integer decimal encoded format<sup>9</sup> Digits take the form yyyymmddhhmmss(J digit time)</td>
<td>Encoded broken-down time 1s resolution</td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td colspan="5">{: .bigtable }</td>
</tr>
</tbody>
</table>
<p class="example">Footnotes</p>
<ol>
<li>In the Proleptic Gregorian Calendar.</li>
<li>There are the same number of ticks per day regardless of leap seconds.</li>
<li>Generated as DECF values regardless of the setting of <code>⎕FR</code> due to their magnitude.</li>
<li>Excel supports two time number conventions. On Windows the 1900 Date System is the default and on macOS the 1904 Date
   System is the default. Both systems can use either convention and the convention in use is stored in the worksheet so
   that the platforms interoperate.</li>
<li>Count includes the invalid date 1900-02-29.</li>
<li>Microsoft Excel converts day 0 to the invalid date 1900-01-00.</li>
<li>For negative numbers, the integral part counts backward from 1899-12-30 and the fractional part counts forward from  the date so reached.</li>
<li>No date-time may represent a date earlier than ¯4713-01-01 00:00.</li>
<li>Decimal encoded formats encode human-readable dates and times into a single number with the most significant part in
   the most significant decimal digit, for example 2020/01/23 (year/month/day) is encoded as 20200123, and 13:17:56 (
   hour:minute:second) is encoded as 131756. The date must be between 1 January 0001 and 31 December 9999 in the
   Proleptic Gregorian Calendar.</li>
</ol>
<h5>Time Stamps</h5>
<p>If a value in <code>X</code> is negative it indicates that a timestamp type is expected in <code>Y</code> or generated in <code>R</code>, as follows:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Max elements</th>
<th>Element contents<sup>1</sup></th>
<th>Elided element implicit values (in Y)<sup>3</sup></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>¯1</code></td>
<td>Millisecond precision (<code>⎕TS</code>)</td>
<td>7</td>
<td>Year, month, day-of-month, hour, minute, second, millisecond</td>
<td><code>1 1 1 0 0 0 0</code></td>
</tr>
<tr>
<td><code>¯2</code></td>
<td>Microsecond precision</td>
<td>7</td>
<td>Year, month, day-of-month, hour, minute, second, microsecond</td>
<td><code>1 1 1 0 0 0 0</code></td>
</tr>
<tr>
<td><code>¯3</code></td>
<td>Nanosecond precision (J expanded digit time)</td>
<td>7</td>
<td>Year, month, day-of-month, hour, minute, second, nanosecond</td>
<td><code>1 1 1 0 0 0 0</code></td>
</tr>
<tr>
<td><code>¯10</code></td>
<td>ISO day-of-year components</td>
<td>6</td>
<td>Year, day-of-year, hour, minute, second, microsecond</td>
<td><code>1 1 0 0 0 0 0</code></td>
</tr>
<tr>
<td><code>¯11</code></td>
<td>ISO day-of-week components</td>
<td>7</td>
<td>Year, week, day-of-week, hour, minute, second, microsecond</td>
<td><code>1 1 0 0 0 0</code></td>
</tr>
<tr>
<td><code>¯20</code></td>
<td>Decimal encoded date and time<sup>2</sup></td>
<td>2</td>
<td>Decimal encoded date, decimal encoded time</td>
<td><code>1 0 1 0 1 0</code></td>
</tr>
<tr>
<td><code>¯30</code></td>
<td>DateTime format</td>
<td>7</td>
<td>International Day Number, hour, minute, second</td>
<td><code>1 1 1 0 0 0</code></td>
</tr>
</tbody>
</table>
<p class="example">Footnotes</p>
<ol>
<li>All dates must be between 1 January 0001 and 28 February 4000 in the Proleptic Gregorian Calendar.</li>
<li>Decimal encoded formats encode human-readable dates and times into a single number with the most significant part in
   the most significant decimal digit, for example 2020/01/23 (year/month/day) is encoded as 20200123, and 13:17:56 (
   hour:minute:second) is encoded as 131756.</li>
<li>If a timestamp has fewer than the maximum number of elements, the remaining elements take the default values shown.</li>
</ol>
<h5>Military time zone characters</h5>
<p>Any element in <code>Y</code> may be specified as a military time zone character and is implicitly replaced by the current time in the time zone they represent. The time zones are as follows:</p>
<table>
<thead>
<tr>
<th>Character</th>
<th>Time zone name</th>
<th>Time zone</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Alpha</td>
<td>UTC +1</td>
</tr>
<tr>
<td>B</td>
<td>Bravo</td>
<td>UTC +2</td>
</tr>
<tr>
<td>C</td>
<td>Charlie</td>
<td>UTC +3</td>
</tr>
<tr>
<td>D</td>
<td>Delta</td>
<td>UTC +4</td>
</tr>
<tr>
<td>E</td>
<td>Echo</td>
<td>UTC +5</td>
</tr>
<tr>
<td>F</td>
<td>Foxtrot</td>
<td>UTC +6</td>
</tr>
<tr>
<td>G</td>
<td>Golf</td>
<td>UTC +7</td>
</tr>
<tr>
<td>H</td>
<td>Hotel</td>
<td>UTC +8</td>
</tr>
<tr>
<td>I</td>
<td>India</td>
<td>UTC +9</td>
</tr>
<tr>
<td>J</td>
<td>Juliet</td>
<td>Local time</td>
</tr>
<tr>
<td>K</td>
<td>Kilo</td>
<td>UTC +10</td>
</tr>
<tr>
<td>L</td>
<td>Lima</td>
<td>UTC +11</td>
</tr>
<tr>
<td>M</td>
<td>Mike</td>
<td>UTC +12</td>
</tr>
<tr>
<td>N</td>
<td>November</td>
<td>UTC -1</td>
</tr>
<tr>
<td>O</td>
<td>Oscar</td>
<td>UTC -2</td>
</tr>
<tr>
<td>P</td>
<td>Papa</td>
<td>UTC -3</td>
</tr>
<tr>
<td>Q</td>
<td>Quebec</td>
<td>UTC -4</td>
</tr>
<tr>
<td>R</td>
<td>Romeo</td>
<td>UTC -5</td>
</tr>
<tr>
<td>S</td>
<td>Sierra</td>
<td>UTC -6</td>
</tr>
<tr>
<td>T</td>
<td>Tango</td>
<td>UTC -7</td>
</tr>
<tr>
<td>U</td>
<td>Uniform</td>
<td>UTC -8</td>
</tr>
<tr>
<td>V</td>
<td>Victor</td>
<td>UTC -9</td>
</tr>
<tr>
<td>W</td>
<td>Whisky</td>
<td>UTC -10</td>
</tr>
<tr>
<td>X</td>
<td>X-ray</td>
<td>UTC -11</td>
</tr>
<tr>
<td>Y</td>
<td>Yankee</td>
<td>UTC -12</td>
</tr>
<tr>
<td>Z</td>
<td>Zulu</td>
<td>UTC +0</td>
</tr>
</tbody>
</table>
<p>Note that the resolutions of system clocks vary by platform.</p>
<h5>Examples</h5>
<p class="example">Timestamp to time number conversion</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="nf">⎕TS</span>
<span class="m">43886.48039</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="nf">⎕TS</span>
<span class="m">43886.48039</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="nf">⎕TS</span><span class="w"> </span><span class="s1">'J'</span>
<span class="m">43886.48039</span><span class="w"> </span><span class="m">43886.48039</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="no">⍬</span><span class="w"> </span><span class="c1">⍝ cf Elided element implicit values</span>
<span class="m">¯693594</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">¯693594</span>
<span class="w">       </span><span class="m">¯30</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="o">⊂</span><span class="p">(</span><span class="m">44217</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">54</span><span class="p">)</span>
<span class="m">44217.63465</span>
</code></pre></div>
<p class="example">Time number to timestamp conversion</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">43508.42843</span>
<span class="err">┌──────────────────┬──────────────────────┐</span>
<span class="err">│</span><span class="m">1899</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">2019</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">352</span><span class="err">│</span>
<span class="err">└──────────────────┴──────────────────────┘</span>
<span class="w">      </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">43508.42843</span>
<span class="err">┌──────────────────┬──────────────────────┐</span>
<span class="err">│</span><span class="m">1899</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span><span class="m">2019</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">56</span><span class="w"> </span><span class="m">352</span><span class="err">│</span>
<span class="err">└──────────────────┴──────────────────────┘</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕FRDCI</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="err">┌──────────────────────┐</span>
<span class="err">│</span><span class="m">2020</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">33</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">466</span><span class="err">│</span>
<span class="err">└──────────────────────┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">¯30</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="m">44217.63465</span>
<span class="err">┌──────────────┐</span>
<span class="err">│</span><span class="m">44217</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">53</span><span class="err">│</span>
<span class="err">└──────────────┘</span>
</code></pre></div>
<p class="example">Time number to time number conversion</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕FRDCI</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">43886.48188</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="s1">'J'</span>
<span class="m">43886.48371</span>
<span class="w">      </span><span class="c1">⍝ Local time is UTC-05:00</span>
<span class="w">      </span><span class="m">3600</span><span class="o">÷</span><span class="na">⍨</span><span class="o">-</span><span class="na">/</span><span class="m">20</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="s1">'JZ'</span>
<span class="m">¯5</span>
</code></pre></div>
<p class="example">Timestamp to timestamp conversions</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">¯30</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="o">⊂</span><span class="nf">⎕TS</span>
<span class="err">┌─────────────┐</span>
<span class="err">│</span><span class="m">44216</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">46</span><span class="err">│</span>
<span class="err">└─────────────┘</span>

<span class="w">      </span><span class="m">¯30</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕DT</span><span class="o">⊂</span><span class="m">32000</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span>
<span class="err">┌───────────────────┐</span>
<span class="err">│</span><span class="m">1987</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="err">│</span>
<span class="err">└───────────────────┘</span>
</code></pre></div>
<p class="example">Validation</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕DT</span><span class="w"> </span><span class="nf">⎕TS</span><span class="w"> </span><span class="p">(</span><span class="m">2020</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'J'</span><span class="w"> </span><span class="s1">'DT'</span><span class="w"> </span><span class="c1">#</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="m">¯30</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕DT</span><span class="o">⊂</span><span class="m">32000</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-ed">
<div class="heading-container"><h3 class="heading" id="system-functions-ed-header">Edit Object</h3><div class="command">{R}←{X}⎕ED Y</div></div>
<p><code>⎕ED</code> invokes the Editor.  <code>Y</code> is a simple character vector, a simple character matrix, or a vector of character vectors, containing the name(s) of objects to be edited.  The optional left argument <code>X</code> is  a character scalar or character vector which specifies the type(s) of the corresponding (new) object(s) named in <code>Y</code>, where:</p>
<table>
<tbody>
<tr>
<td><code>∇</code></td>
<td>function/operator</td>
</tr>
<tr>
<td><code>→</code></td>
<td>simple character vector</td>
</tr>
<tr>
<td><code>∊</code></td>
<td>vector of character vectors</td>
</tr>
<tr>
<td><code>-</code></td>
<td>character matrix</td>
</tr>
<tr>
<td><code>⍟</code></td>
<td>Namespace script</td>
</tr>
<tr>
<td><code>○</code></td>
<td>Class script</td>
</tr>
<tr>
<td><code>∘</code></td>
<td>Interface</td>
</tr>
</tbody>
</table>
<p>If an object named in <code>Y</code> already exists, the type specification in <code>X</code> is ignored for that name.</p>
<p>If <code>⎕ED</code> is called from the Session, it opens Edit windows for the object(s) named in <code>Y</code> and returns a null result.  The cursor is positioned in the first of the Edit windows opened by <code>⎕ED</code>, but may be moved to the Session or to any other window which is currently open.  The effect is almost identical to using <code>)ED</code>.</p>
<p>If <code>⎕ED</code> is called from a defined function or operator, its behaviour is different. On asynchronous terminals, the Edit windows are automatically displayed in "full-screen" mode (ZOOMED). In all implementations, the user is restricted to those windows named in <code>Y</code>. The user may not skip to the Session even though the Session may be visible.</p>
<p><code>⎕ED</code> terminates and returns a result ONLY when the user explicitly closes all the windows for the named objects. In this case the result contains the names of any objects which have been newly (re)fixed in the workspace as a result of the <code>⎕ED</code>, and has the same structure as <code>Y</code>.</p>
<p>Objects named in <code>Y</code> that cannot be edited are silently ignored. Objects qualified with a namespace path are (e.g. <code>a.b.c.foo</code>) are silently ignored if the namespace does not exist.</p>
<h5>Variants of Edit Object</h5>
<p>The behaviour of <code>⎕ED</code> may be modified using the variant operator <code>⍠</code> with the following options:</p>
<ul>
<li><code>'ReadOnly'</code> - 0 or 1</li>
<li><code>'EditName'</code> - <code>'Default'</code>, <code>'Allow'</code> or <code>'Disallow'</code>.</li>
</ul>
<p>If <code>ReadOnly</code> is set to 1, the edit window and all edit windows opened from it will be read-only. Note that setting <code>ReadOnly</code> to 0 will have no effect if the edit window is inherently read-only due to the nature of its content.</p>
<p>The <code>'EditName'</code> option determines whether or not the user may open another edit window by clicking a name, and its values are interpreted as follows:</p>
<table>
<thead>
<tr>
<th>EditName</th>
<th><code>⎕ED</code> called from session</th>
<th><code>⎕ED</code> called from function</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>'Default'</code></td>
<td>Allow</td>
<td>Disallow</td>
</tr>
<tr>
<td><code>'Allow'</code></td>
<td>Allow</td>
<td>Allow</td>
</tr>
<tr>
<td><code>'Disallow'</code></td>
<td>Disallow</td>
<td>Disallow</td>
</tr>
</tbody>
</table>
<p>There is no Principal Option.</p>
<p class="example">Examples</p>
<p>In the first example, <code>⎕ED</code> will display the contents of <code>A</code> as an editable character array which the user may change. The user can double-click on <em>Hello</em> to open an edit window on an object named <code>Hello</code> (which will be a new function if <code>Hello</code> is currently undefined). Furthermore, the user can enter any arbitrary name and double-click to edit it. This may be undesirable in an application.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">11</span><span class="o">⍴</span><span class="s1">'Hello World'</span>
</code></pre></div></p>
<p>In the second example, the Edit window will display the contents of <code>A</code> as a ReadOnly Character array. The user can still open a new edit by double-clicking <em>Hello</em> or <em>World</em> but nothing else.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕ED</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'ReadOnly'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'A'</span>
</code></pre></div></p>
<p>In the final example, the Edit window will display the contents of <code>A</code> as a ReadOnly Character array and the user cannot open a new edit window.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕ED</span><span class="w"> </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'ReadOnly'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'EditName'</span><span class="w"> </span><span class="s1">'Disallow'</span><span class="p">))</span><span class="s1">'A'</span>
</code></pre></div></p>
</article>
<article id="system-functions-em">
<div class="heading-container"><h3 class="heading" id="system-functions-em-header">Event Message</h3><div class="command">R←⎕EM Y</div></div>
<p><code>Y</code> must be a simple non-negative integer scalar or vector of event codes.  If <code>Y</code> is a scalar, <code>R</code> is a simple character vector containing the associated event message.  If <code>Y</code> is a vector, <code>R</code> is a vector of character vectors containing the corresponding event messages.</p>
<p>If <code>Y</code> refers to an undefined error code "<code>n</code>", the event message returned is "<code>ERROR NUMBER n</code>".</p>
<p>See <i>APL Error Messages</i></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EM</span><span class="w"> </span><span class="m">11</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div>
</article>
<article id="system-functions-en">
<div class="heading-container"><h3 class="heading" id="system-functions-en-header">Event Number</h3><div class="command">R←⎕EN</div></div>
<p>This simple integer scalar reports the identification number for the most recent event which occurred, caused by an APL action or by an interrupt or by the <code>⎕SIGNAL</code> system function.  Its value in a clear workspace is <code>0</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Divide</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span>
<span class="w">      </span><span class="o">÷</span><span class="m">0</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="nf">⎕EN</span>
<span class="m">11</span>
</code></pre></div>
<p>See <i>APL Error Messages</i></p>
<p>Note: <code>⎕SIGNAL</code> can be used to reset the value of this system constant.</p>
</article>
<article id="system-functions-exception">
<div class="heading-container"><h3 class="heading" id="system-functions-exception-header">Exception</h3><div class="command">R←⎕EXCEPTION</div></div>
<p>This is a system object that identifies the most recent <em>Exception</em> thrown by a Microsoft .NET object.</p>
<p><code>⎕EXCEPTION</code> derives from the Microsoft .NET class System.Exception. Among its properties are the following, all of which are strings:</p>
<table>
<tbody>
<tr>
<td><code>Source</code></td>
<td>The name of the .NET namespace in which the exception was generated</td>
</tr>
<tr>
<td><code>StackTrace</code></td>
<td>The calling stack</td>
</tr>
<tr>
<td><code>Message</code></td>
<td>The error message</td>
</tr>
</tbody>
</table>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">DT</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">100000</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="nv">EXCEPTION</span><span class="bp">:</span><span class="w"> </span><span class="nv">Year</span><span class="o">,</span><span class="w"> </span><span class="nv">Month</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Day</span><span class="w"> </span><span class="nv">parameters</span><span class="w"> </span><span class="nv">describe</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">un</span><span class="o">-</span><span class="nv">representable</span><span class="w"> </span><span class="nv">DateTime</span><span class="na">.</span>
<span class="w">      </span><span class="nv">DT</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="p">(</span><span class="m">100000</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="nf">⎕EN</span>
<span class="m">90</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EXCEPTION</span><span class="na">.</span><span class="nv">Message</span>
<span class="nv">Year</span><span class="o">,</span><span class="w"> </span><span class="nv">Month</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Day</span><span class="w"> </span><span class="nv">parameters</span><span class="w"> </span><span class="nv">describe</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">un</span><span class="o">-</span><span class="nv">representable</span><span class="w"> </span><span class="nv">DateTime</span><span class="na">.</span>

<span class="w">      </span><span class="nf">⎕EXCEPTION</span><span class="na">.</span><span class="nv">Source</span>
<span class="nv">mscorlib</span>

<span class="w">      </span><span class="nf">⎕EXCEPTION</span><span class="na">.</span><span class="nv">StackTrace</span>
<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span><span class="na">.</span><span class="nv">DateToTicks</span><span class="p">(</span><span class="nv">Int32</span><span class="w"> </span><span class="nv">year</span><span class="o">,</span>
<span class="w">                                  </span><span class="nv">Int32</span><span class="w"> </span><span class="nv">month</span><span class="o">,</span><span class="w"> </span><span class="nv">Int32</span><span class="w"> </span><span class="nv">day</span><span class="p">)</span>

<span class="w">   </span><span class="nv">at</span><span class="w"> </span><span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span><span class="na">..</span><span class="nv">ctor</span><span class="p">(</span><span class="nv">Int32</span><span class="w"> </span><span class="nv">year</span><span class="o">,</span>
<span class="w">                            </span><span class="nv">Int32</span><span class="w"> </span><span class="nv">month</span><span class="o">,</span><span class="w"> </span><span class="nv">Int32</span><span class="w"> </span><span class="nv">day</span><span class="p">)</span>
</code></pre></div></p>
<p>Similarly to GUI objects, <code>⎕EXCEPTION</code> is not preserved across a save/load cycle if the workspace is loaded in a different interpreter.</p>
<p>Note: <code>⎕SIGNAL</code> can be used to reset the value of this system constant.</p>
</article>
<article id="system-functions-ex">
<div class="heading-container"><h3 class="heading" id="system-functions-ex-header">Expunge Object</h3><div class="command">{R}←⎕EX Y</div></div>
<p><code>Y</code> must be a simple character scalar, vector or matrix, or a vector of character vectors containing a list of names. <code>R</code> is a simple Boolean vector with one element per name in <code>Y</code>.</p>
<p>Each name in <code>Y</code> is disassociated from its value if the active referent for the name is a defined function, operator, variable or namespace.</p>
<p>The value of an element of <code>R</code> is 1 if the corresponding name in <code>Y</code> is now available for use.  This does not necessarily mean that the existing value was erased for that name.  A value of  0 is returned for an ill-formed name or for a distinguished name in <code>Y</code>.  The result is suppressed if not used or assigned.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'VAR'</span>
<span class="w">      </span><span class="o">+</span><span class="nf">⎕EX</span><span class="s1">'FOO'</span><span class="w"> </span><span class="s1">'⎕IO'</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="s1">'123'</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>If a named object is being executed the existing value will continue to be used until its execution is completed.  However, the name becomes available immediately for other use.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FOO[1]*</span>

<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'FOO'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="o">+</span><span class="nf">⎕EX</span><span class="s1">'FOO'</span>
<span class="m">1</span>
<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FOO[1]*</span>

<span class="w">     </span><span class="bp">∇</span><span class="nv">FOO</span><span class="sr">[</span><span class="vg">⎕</span><span class="sr">]</span>
<span class="nv">defn</span><span class="w"> </span><span class="nv">error</span>

<span class="w">      </span><span class="nv">FOO</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>
<span class="m">10</span>
<span class="w">      </span><span class="nv">FOO</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<p>If a named object is an external variable, the external array is disassociated from the name:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕XT</span><span class="s1">'F'</span>
<span class="nv">FILES</span><span class="na">/</span><span class="nv">COSTS</span>
<span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'F'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕XT</span><span class="s1">'F'</span>
</code></pre></div></p>
<p>If the named object is a GUI object, the object and all its children are deleted and removed from the screen. The expression <code>⎕EX'.'</code> deletes all GUI objects owned by the current thread in the Root namespace <strong>but not</strong> those in sub-namespaces. In addition, if this expression is executed by thread 0, it resets all the properties of  <code>'.'</code> to their default values. Furthermore, any unprocessed events in the event queue are discarded.</p>
<p>If the named object is a shared variable, the variable is retracted.</p>
<p>If the named object is the last remaining external function of an auxiliary process, the AP is terminated.</p>
<p>If the named object is the last reference into a dynamic link library, the DLL is freed.</p>
</article>
<article id="system-functions-export">
<div class="heading-container"><h3 class="heading" id="system-functions-export-header">Export Object</h3><div class="command">{R}←{X}⎕EXPORT Y</div></div>
<p><code>⎕EXPORT</code> is used to set or query the export type of a defined function (or operator) referenced by the <code>⎕PATH</code> mechanism.</p>
<p><code>Y</code> is a character matrix or vector-of-vectors representing the names of functions and operators whose export type is to be set or queried.</p>
<p><code>X</code> is an integer scalar or vector (one per name in the namelist) indicating the export type.  <code>X</code> can currently be one of the values:</p>
<ul>
<li>0 - not exported.</li>
<li>1 - exported (default).</li>
</ul>
<p>A scalar or 1-element-vector type is replicated to conform with a multi-name list.</p>
<p>The result <code>R</code> is a vector that reports the export type of the functions and operators named in <code>Y</code>.  When used dyadically to set export type, the result is shy.</p>
<p>When the path mechanism locates a referenced function (or operator) in the list of namespaces in the <code>⎕PATH</code> system variable, it examines the function's export type:</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>This instance of the function is ignored and the search is resumed at the next namespace in the <code>⎕PATH</code> list.  Type-0 is typically used for functions residing in a utility namespace which are not themselves utilities, for example the private sub-function of a utility function.</td>
</tr>
<tr>
<td>1</td>
<td>This instance of the function is executed in the namespace in which it was found and the search terminated.  The effect is exactly as if the function had been referenced by its full path name.</td>
</tr>
</tbody>
</table>
<p>Warning: The left domain of <code>⎕EXPORT</code> may be extended in future to include extra types 2, 3,... (for example, to change the behaviour of the function).  This means that, while <code>⎕EXPORT</code> returns a Boolean result in the first version, this may not be the case in the future.  If you need a Boolean result, use <code>0≠</code> or an equivalent.
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="p">(</span><span class="m">0</span><span class="o">≠</span><span class="nf">⎕EXPORT</span><span class="w"> </span><span class="nf">⎕nl</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="na">⌿</span><span class="nf">⎕nl</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="c1">⍝ list of exported</span>
<span class="w">                                </span><span class="c1">⍝ functions and ops.</span>
</code></pre></div></p>
<p><code>⎕EXPORT</code> does not support derived functions and will not be extended to support them; nor will it be extended to support other types of functions that may be developed in the future. <code>⎕EXPORT</code> may therefore be considered an archaic feature.</p>
</article>
<article id="system-functions-fappend">
<div class="heading-container"><h3 class="heading" id="system-functions-fappend-header">File Append Component</h3><div class="command">{R}←X ⎕FAPPEND Y</div></div>
<h5>Access code 8</h5>
<p><code>Y</code> must be a simple integer scalar or a 1 or 2 element vector containing the file tie number followed by an optional passnumber.  If the passnumber is omitted it is assumed to be zero. Subject to a few restrictions, <code>X</code> may be any array.</p>
<p>The shy result <code>R</code> is the number of the component to which <code>X</code> is written, and is 1 greater than the previously highest component number in the file, or 1 if the file is new.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">1000</span><span class="o">?</span><span class="m">1000</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="s1">'Geoff'</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕OR</span><span class="s1">'FOO'</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span>
<span class="m">12</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="na">¨</span><span class="m">1</span>
<span class="m">13</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span>

<span class="nv">Dump</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="nv">tie</span><span class="kd">←</span><span class="bp">⍺</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span><span class="w">              </span><span class="c1">⍝ create file.</span>
<span class="w">    </span><span class="p">(</span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">tie</span><span class="p">)</span><span class="kt">{}</span><span class="bp">⍵</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="c1">⍝ append and untie.</span>
<span class="kt">}</span>
</code></pre></div>
</article>
<article id="system-functions-favail">
<div class="heading-container"><h3 class="heading" id="system-functions-favail-header">File System Available</h3><div class="command">R←⎕FAVAIL</div></div>
<p><code>⎕FAVAIL</code> returns the Boolean scalar value 1. This function is provided only for compatibility with other implementations of APL.</p>
</article>
<article id="system-functions-fchk">
<div class="heading-container"><h3 class="heading" id="system-functions-fchk-header">File Check and Repair</h3><div class="command">R←{X} ⎕FCHK Y</div></div>
<p><code>⎕FCHK</code> validates and repairs component files, and validates files associated with external variables, following an abnormal termination of the APL process or operating system.</p>
<p><code>Y</code> must be a simple character scalar or vector which specifies the name of the file to be exclusively checked or repaired. For component files, the file must be named in accordance with the operating system's conventions, and may be a relative or absolute pathname. The file must exist and must not be tied. If no file extension is supplied, the set of extensions specified by the  <strong>CFEXT</strong> parameter are tried one after another until the file is found or the set of extensions is exhausted. See <i> CFEXT</i>.</p>
<p>For files associated with external variables, any filename extension must be specified even if <code>⎕XT</code> would not require it. The file must exist and must not currently be associated with an external variable.</p>
<p>Options for <code>⎕FCHK</code> are specified using the Variant operator <code>⍠</code> or by the optional left argument <code>X</code>. The former is recommended but the older mechanism using the left argument is still supported.</p>
<p>In either case, the default behaviour is as follows:</p>
<ol>
<li>If the file appears to have been cleanly untied previously, return <code>⍬</code>, i.e. report that the file is good.</li>
<li>Otherwise, validate the file and return the appropriate result. If the file is corrupt, no attempt is made to repair it.</li>
</ol>
<p>The result <code>R</code> is a vector of the numbers of missing or damaged components. <code>R</code> may include non-positive numbers of "pseudo components" that indicate damage to parts of the file other than in specific components:</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>ACCESS MATRIX.</td>
</tr>
<tr>
<td><code>¯1</code></td>
<td>Free-block tree.</td>
</tr>
<tr>
<td><code>¯2</code></td>
<td>Component index tree.</td>
</tr>
</tbody>
</table>
<p>Other negative numbers represent damage to the file metadata; this set may be extended in the future.</p>
<h5>Specifying options using Variant</h5>
<p>Using Variant, the options are as follows:</p>
<ul>
<li>Task</li>
<li>Repair</li>
<li>Force</li>
</ul>
<p><em>Rebuild</em> causes the <em>file indices</em> to be discarded and rebuilt. <em>Repair</em> only takes place on files which have been checked and found to be damaged. It involves a rebuild, but that only takes place if it is needed. Note that Repair and Force only apply if Task is <code>'Scan'</code>.</p>
<h6>Task</h6>
<table>
<tbody>
<tr>
<td>Scan</td>
<td>causes the file to be checked and optionally repaired (see <code>'Repair'</code> below)</td>
</tr>
<tr>
<td><code>Rebuild</code></td>
<td>causes the file to be unconditionally rebuilt</td>
</tr>
</tbody>
</table>
<h6>Repair (principle option)</h6>
<table>
<tbody>
<tr>
<td>0</td>
<td>do not repair</td>
</tr>
<tr>
<td><code>1</code></td>
<td>causes the file to be repaired if damage is found</td>
</tr>
</tbody>
</table>
<h6>Force</h6>
<table>
<tbody>
<tr>
<td>0</td>
<td>do not validate the file if it appears to have been properly closed</td>
</tr>
<tr>
<td><code>1</code></td>
<td>validate the file even if it appears to have been properly closed</td>
</tr>
</tbody>
</table>
<p>Default values are highlighted thus in the above tables.</p>
<p class="example">Examples</p>
<p>To check a file and attempt to fix it if damage is found:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕FCHK</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'suspect.dcf'</span>
</code></pre></div></p>
<p>To forcibly check a file and attempt to fix it if damage is found:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕FCHK</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="p">(</span><span class="s1">'Repair'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Force'</span><span class="m">1</span><span class="p">))</span><span class="s1">'suspect.dcf'</span>
</code></pre></div></p>
<h6>Specifying options using a left argument</h6>
<p>Using the optional left-argument, <code>X</code> must be a vector of zero or more character vectors from among <code>'force'</code>, <code>'repair'</code> and <code>'rebuild'</code>, which determine the detailed operation of the function. Note that these options are case-insensitive.</p>
<ul>
<li>If <code>X</code> contains <code>'force'</code>, <code>⎕FCHK</code> will validate the file even if it appears to have been cleanly untied.</li>
<li>If <code>X</code> contains <code>'repair'</code>, <code>⎕FCHK</code> will repair the file, following validation, if it appears to be damaged. This option may be used in conjunction with <code>'force'</code>.</li>
<li>
<p>If <code>X</code> contains <code>'rebuild'</code>, <code>⎕FCHK</code> will repair the file unconditionally.</p>
</li>
<li>
<p>If <code>X</code> contains <code>'force'</code>, <code>⎕FCHK</code> will validate the file even if it appears to have been cleanly untied.</p>
</li>
<li>If <code>X</code> contains <code>'repair'</code>, <code>⎕FCHK</code> will repair the file, following validation, if it appears to be damaged. This option may be used in conjunction with <code>'force'</code>.</li>
<li>If <code>X</code> contains <code>'rebuild'</code>, <code>⎕FCHK</code> will repair the file unconditionally.</li>
</ul>
<p>Following a <em>check</em> of the file, a non-null result indicates that the file is damaged.</p>
<p>Following a <em>repair</em> of the file, the result indicates those components that could not be recovered. Un-recovered components will give a <code>FILE COMPONENT DAMAGED</code> error if read but may be replaced without error.</p>
<p>Repair can recover only check-summed components from the file, i.e. only those components that were written with the checksum option enabled (see <a class="internal-link" href="#system-functions-fprops">Section 4.6.56</a>).</p>
<p>Following an operating system crash, repair may result in one or more individual components being rolled back to a previous version or not recovered at all, unless Journaling levels 2 or 3 were also set when these components were written.</p>
</article>
<article id="system-functions-fcopy">
<div class="heading-container"><h3 class="heading" id="system-functions-fcopy-header">File Copy</h3><div class="command">R←X ⎕FCOPY Y</div></div>
<h5>Access Code: 4609</h5>
<p><code>Y</code> must be a simple integer scalar or 1 or 2-element vector containing the file tie number and optional passnumber. The file need not be tied exclusively.</p>
<p><code>X</code> is a character vector containing the name of a new file to be copied to. If no file extension is supplied, the first extension specified by the   <strong>CFEXT</strong> parameter will be added. See <i> CFEXT</i>.</p>
<p><code>⎕FCOPY</code> creates a copy of the tied file specified by <code>Y</code>, named <code>X</code>.</p>
<p>The new file <code>X</code> will have the same  component level information, including the user number and update time as the original. The operating system file creation, modification and access times will be set to the time at which the copy occurred.</p>
<p>Unless otherwise specified (see File Properties below) the new file <code>X</code> will have the same file properties as the original, except that it will be a large-span file regardless of the span of the original.</p>
<p>The result <code>R</code> is the file tie number associated with the new file <code>X</code>.</p>
<p>Note that the Access Code is 4609, which is the sum of the Access Codes for <code>⎕FREAD</code> (1), <code>⎕FRDCI</code> (512) and <code>⎕FRDAC</code> (4096).</p>
<p>Note also that although the file need not be tied exclusively, the <code>⎕FCOPY</code> function will not yield the file to other APL processes while it is running, and it may take some considerable time to run in the case of a large component file.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">told</span><span class="kd">←</span><span class="s1">'oldfile32'</span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="s1">'S'</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">told</span>
<span class="m">32</span>
<span class="w">      </span><span class="nv">tnew</span><span class="kd">←</span><span class="s1">'newfile64'</span><span class="w"> </span><span class="nf">⎕FCOPY</span><span class="w"> </span><span class="nv">told</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'S'</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">tnew</span>
<span class="m">64</span>
</code></pre></div>
<p>If <code>X</code> specifies the name of an existing file, the operation fails with a <code>FILE NAME ERROR</code>.</p>
<p>Note: This operation is atomic. If an error occurs during the copy operation (such as disk full) or if a strong interrupt is issued, the copy will be aborted and the new file <code>X</code> will not be created.</p>
<h5>File Properties</h5>
<p><code>⎕FCOPY</code> allows you to specify properties for the new file via the variant operator <code>⍠</code> used with the following options:</p>
<ul>
<li><code>'J'</code> - journaling level; a numeric value.</li>
<li><code>'C'</code> - checksum level; 0 or 1.</li>
<li><code>'Z'</code> - compression; 0 or 1.</li>
<li><code>'U'</code> - Unicode; 0 or 1</li>
<li><code>'S'</code> - File Size (span); 64</li>
</ul>
<p>The Principal Option is  as follows:</p>
<ul>
<li>0 - sets <code>('J' 0) ('C' 0)</code></li>
<li>1 - sets <code>('J' 1) ('C' 1)</code></li>
<li>2 - sets <code>('J' 2) ('C' 1)</code></li>
<li>3 - sets <code>('J' 3) ('C' 1)</code></li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">newfid</span><span class="kd">←</span><span class="s1">'newfile'</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕FCOPY</span><span class="w"> </span><span class="na">⍠</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="s1">'SEUJCZ'</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">newfid</span>
<span class="m">64</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>Alternatively:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">JFCOPY</span><span class="kd">←</span><span class="nf">⎕FCOPY</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>will name a variant of <code>⎕FCREATE</code> which will create component file with level 3 journaling, and checksum enabled. Then:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">newfid</span><span class="kd">←</span><span class="s1">'newfile'</span><span class="w"> </span><span class="nv">JFCOPY</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<p>Note: Setting <code>('U' 0)</code> (no Unicode support) is discouraged as it may cause the copy to fail with a <code>TRANSLATION ERROR</code>. Similarly using a Classic interpreter to <code>⎕FCOPY</code> files may result in <code>TRANSLATION ERROR</code>s.</p>
</article>
<article id="system-functions-fcreate">
<div class="heading-container"><h3 class="heading" id="system-functions-fcreate-header">File Create</h3><div class="command">{R}←X ⎕FCREATE Y</div></div>
<p><code>Y</code> must be a simple integer scalar or a 1 or 2 element vector. The first element is the <em>file tie number</em>. The second element, if specified, must be 64<span class="footnote">This element sets the span of the file which in earlier Versions of Dyalog APL could be 32 or 64. Small-span (32-bit) component files may no longer be created and this element is retained only for backwards compatibility of code.</span>.</p>
<p>The <em>file tie number</em> must not be the tie number associated with another tied file.</p>
<p><code>X</code> must be either:</p>
<ol>
<li>a simple character scalar or vector which specifies the name of the file to be created. If no file extension is supplied, the first extension specified by the   <strong>CFEXT</strong> parameter will be added. See <i> CFEXT</i>.</li>
<li>a vector of length 1 or 2 whose items are:- a simple character scalar or vector as above.</li>
<li>an integer scalar specifying the file size limit in bytes.</li>
</ol>
<p>The newly created file is tied for exclusive use.</p>
<p>The shy result of <code>⎕FCREATE</code> is the tie number of the new file.</p>
<h5>Automatic Tie Number Allocation</h5>
<p>A tie number of 0 as argument to a create or tie operation, allocates, and returns as an explicit result, the first (closest to zero) available tie number. This allows you to simplify code. For example:</p>
<p>from:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="m">1</span><span class="o">+⌈</span><span class="na">/</span><span class="m">0</span><span class="o">,</span><span class="nf">⎕FNUM</span><span class="w">     </span><span class="c1">⍝ With next available number,</span>
<span class="w">      </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="nv">tie</span><span class="w">   </span><span class="c1">⍝ ... create file.</span>
</code></pre></div></p>
<p>to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Create with first available..</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'..\BUDGET\SALES'</span><span class="w">    </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">2</span><span class="w">    </span><span class="c1">⍝ Windows</span>
<span class="w">      </span><span class="s1">'../budget/SALES.85'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">2</span><span class="w">    </span><span class="c1">⍝ UNIX</span>

<span class="w">      </span><span class="s1">'COSTS'</span><span class="w"> </span><span class="m">200000</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">4</span><span class="w">         </span><span class="c1">⍝ max size 200000</span>
</code></pre></div>
<h5>File Properties</h5>
<p><code>⎕FCREATE</code> allows you to specify properties for the newly created file via the variant operator <code>⍠</code> used with the following options:</p>
<ul>
<li><code>'J'</code> - journaling level; a numeric value</li>
<li><code>'C'</code> - checksum level; 0 or 1</li>
<li><code>'Z'</code> - compression; 0 or 1</li>
<li><code>'U'</code> - Unicode; 0 or 1</li>
<li><code>'S'</code> - File Size (span); 64</li>
</ul>
<p>The Principal Option is  as follows:</p>
<ul>
<li>0 - sets <code>('J' 0) ('C' 0)</code></li>
<li>1 - sets <code>('J' 1) ('C' 1)</code></li>
<li>2 - sets <code>('J' 2) ('C' 1)</code></li>
<li>3 - sets <code>('J' 3) ('C' 1)</code></li>
</ul>
<p>See also: <a class="internal-link" href="#system-functions-fprops">Section 4.6.56</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'newfile'</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕FCREATE</span><span class="na">⍠</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span>
<span class="w">      </span><span class="s1">'SEUJCZ'</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="m">1</span>
<span class="m">64</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>Alternatively:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">JFCREATE</span><span class="kd">←</span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>will name a variant of <code>⎕FCREATE</code> which will create component file with level 3 journaling, and checksum enabled. Then:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'newfile'</span><span class="nv">JFCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span>
</code></pre></div></p>
</article>
<article id="system-functions-fdrop">
<div class="heading-container"><h3 class="heading" id="system-functions-fdrop-header">File Drop Component</h3><div class="command">{R}←⎕FDROP Y</div></div>
<h5>Access code 32</h5>
<p><code>Y</code> must be a simple integer vector of length 2 or 3 whose elements are:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>a file tie number</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>a number specifying the position and number of components to be dropped.  A positive value indicates that components are to be removed from the beginning of the file; a negative value indicates that components are to be removed from the end of the file</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>an optional passnumber which if omitted is assumed to be zero</td>
</tr>
</tbody>
</table>
<p>The shy result of a <code>⎕FDROP</code> is a vector of the numbers of the dropped components. This is analogous to <code>⎕FAPPEND</code> in that the result is potentially useful for updating some sort of dictionary:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">cnos</span><span class="o">,</span><span class="kd">←</span><span class="nv">vec</span><span class="w"> </span><span class="nf">⎕FAPPEND</span><span class="na">¨</span><span class="nv">tie</span><span class="w"> </span><span class="c1">⍝ Append index to dictionary</span>

<span class="w">      </span><span class="nv">cnos</span><span class="o">~</span><span class="kd">←</span><span class="nf">⎕FDROP</span><span class="w"> </span><span class="nv">tie</span><span class="o">,-⍴</span><span class="nv">vec</span><span class="w"> </span><span class="c1">⍝ Remove index from dict.</span>
</code></pre></div></p>
<p>Note that the result vector, though potentially large, is generated only on request.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">5436</span><span class="w"> </span><span class="m">4294967295</span>

<span class="w">      </span><span class="nf">⎕FDROP</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">4</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">5436</span><span class="w"> </span><span class="m">4294967295</span>

<span class="w">      </span><span class="nf">⎕FDROP</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯2</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">4</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">5436</span><span class="w"> </span><span class="m">4294967295</span>
</code></pre></div>
</article>
<article id="system-functions-ferase">
<div class="heading-container"><h3 class="heading" id="system-functions-ferase-header">File Erase</h3><div class="command">{R}←X ⎕FERASE Y</div></div>
<h5>Access code 4</h5>
<p><code>Y</code> must be a simple integer scalar or 1 or 2 element vector containing the file tie number followed by an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  <code>X</code> must be a character scalar or vector containing the name of the file associated with the tie number <code>Y</code>.  This name must be identical with the name used to tie the file (except that the directory delimiters <code>/</code> and <code>\</code> are treated as being the same) and the file must be exclusively tied.  The file named in <code>X</code> is erased and untied.</p>
<p>The shy result of <code>⎕FERASE</code> is the tie number of the erased file.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'SALES'</span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="s1">'SALES'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'./temp'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="s1">'temp'</span><span class="w"> </span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="m">1</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="s1">'temp'</span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="s1">'.\temp'</span><span class="nf">⎕FERASE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ Works with / or \</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-fhist">
<div class="heading-container"><h3 class="heading" id="system-functions-fhist-header">File History</h3><div class="command">R←⎕FHIST Y</div></div>
<h5>Access code 16384</h5>
<p><code>Y</code> must be a simple integer vector of length 1 or 2 containing the file tie number and an optional passnumber. If the passnumber is omitted it is assumed to be zero.</p>
<p>The result is a numeric matrix with shape (5 2) whose rows represent the most recent occurrence of the following events.</p>
<ol>
<li>File creation (see note)</li>
<li>Undefined, currently <code>(0 0)</code></li>
<li>Last update of the access matrix</li>
<li>Undefined, currently <code>(0 0)</code></li>
<li>Last update performed by <code>⎕FAPPEND</code>, <code>⎕FCREATE</code>, <code>⎕FDROP</code> or <code>⎕FREPLACE</code></li>
</ol>
<p>For each event, the first column contain the user number and the second a timestamp. Like the timestamp reported by <code>⎕FRDCI</code> this is measured in 60<sup>th</sup>s of a second since 1st January 1970 (UTC).</p>
<p><strong>Note:</strong> <code>⎕FHIST</code> collects information only if journaling and/or checksum is in operation. If neither is in use, the collection of data for <code>⎕FHIST</code> is disabled and its result is entirely 0. If a file has both journaling and checksum disabled, and then either is  enabled, the collection of data for <code>⎕FHIST</code> is enabled too. In this case, the information in row 1 of <code>⎕FHIST</code> relates to the most recent enabling <code>⎕FPROPS</code> operation rather than the original <code>⎕FCREATE</code>.</p>
<p>In the examples that follow, the <code>FHist</code> function is used below to format the result of <code>⎕FHIST</code>.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">FHist</span><span class="w"> </span><span class="nv">tn</span><span class="sr">;</span><span class="nv">cols</span><span class="sr">;</span><span class="nv">rows</span><span class="sr">;</span><span class="nv">fhist</span><span class="sr">;</span><span class="nv">fmt</span><span class="sr">;</span><span class="nv">ToTS</span><span class="sr">;</span><span class="nv">I2D</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">rows</span><span class="kd">←</span><span class="s1">'Created'</span><span class="w"> </span><span class="s1">'Undefined'</span><span class="w"> </span><span class="s1">'Last ⎕FSTAC'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">rows</span><span class="o">,</span><span class="kd">←</span><span class="s1">'Undefined'</span><span class="w"> </span><span class="s1">'Last Updated'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="nv">cols</span><span class="kd">←</span><span class="s1">'User'</span><span class="w"> </span><span class="s1">'TimeStamp'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="nv">fmt</span><span class="kd">←</span><span class="s1">'ZI4,2(⊂-⊃,ZI2),⊂ ⊃,ZI2,2(⊂:⊃,ZI2)'</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="nv">I2D</span><span class="kd">←</span><span class="kt">{</span><span class="o">+</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'IDNToDate'</span><span class="bp">⍵</span><span class="kt">}</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="nv">ToTS</span><span class="kd">←</span><span class="kt">{</span><span class="nv">d</span><span class="w"> </span><span class="nv">t</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="o">⊂⍉⌊</span><span class="m">0</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">60</span><span class="o">⊤</span><span class="bp">⍵</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">        </span><span class="o">↓</span><span class="nv">fmt</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="o">↓↑</span><span class="nv">I2D</span><span class="na">¨</span><span class="m">25568</span><span class="o">+,</span><span class="nv">d</span><span class="p">)</span><span class="o">,</span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="o">↓</span><span class="nv">t</span><span class="kt">}</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">    </span><span class="nv">fhist</span><span class="kd">←</span><span class="nf">⎕FHIST</span><span class="w"> </span><span class="nv">tn</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">    </span><span class="nv">fhist</span><span class="sr">[;</span><span class="m">2</span><span class="sr">]</span><span class="kd">←</span><span class="nv">ToTS</span><span class="w"> </span><span class="nv">fhist</span><span class="sr">[;</span><span class="m">2</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">   </span><span class="nv">fhist</span><span class="sr">[;</span><span class="m">1</span><span class="sr">]</span><span class="kd">←</span><span class="o">⍕</span><span class="na">¨</span><span class="nv">fhist</span><span class="sr">[;</span><span class="m">1</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span><span class="w">   </span><span class="nv">r</span><span class="kd">←</span><span class="p">((</span><span class="o">⊂</span><span class="s1">''</span><span class="p">)</span><span class="o">,</span><span class="nv">rows</span><span class="p">)</span><span class="o">,</span><span class="nv">cols</span><span class="o">⍪</span><span class="nv">fhist</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="s1">'c:\temp'</span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">FHist</span><span class="w"> </span><span class="m">1</span>
<span class="w">               </span><span class="nv">User</span><span class="w">  </span><span class="nv">TimeStamp</span><span class="w">            </span>
<span class="w"> </span><span class="nv">Created</span><span class="w">       </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nf">⎕FSTAC</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nv">Updated</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span>

<span class="w">      </span><span class="p">(</span><span class="o">⍳</span><span class="m">10</span><span class="p">)</span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="p">⋄</span><span class="w"> </span><span class="nv">FHist</span><span class="w"> </span><span class="m">1</span>
<span class="w">               </span><span class="nv">User</span><span class="w">  </span><span class="nv">TimeStamp</span><span class="w">            </span>
<span class="w"> </span><span class="nv">Created</span><span class="w">       </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nf">⎕FSTAC</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nv">Updated</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">55</span><span class="w"> </span>

<span class="w">      </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="s1">'c:\temp'</span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">FHist</span><span class="w"> </span><span class="m">1</span>
<span class="w">               </span><span class="nv">User</span><span class="w">  </span><span class="nv">TimeStamp</span><span class="w">            </span>
<span class="w"> </span><span class="nv">Created</span><span class="w">       </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nf">⎕FSTAC</span><span class="w">   </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">53</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Undefined</span><span class="w">     </span><span class="m">0</span><span class="w">     </span><span class="m">1970</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">01</span><span class="w"> </span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="bp">:</span><span class="m">00</span><span class="w">  </span>
<span class="w"> </span><span class="nv">Last</span><span class="w"> </span><span class="nv">Updated</span><span class="w">  </span><span class="m">0</span><span class="w">     </span><span class="m">2012</span><span class="o">-</span><span class="m">01</span><span class="o">-</span><span class="m">14</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">29</span><span class="bp">:</span><span class="m">55</span><span class="w">  </span>
</code></pre></div>
</article>
<article id="system-functions-fhold">
<div class="heading-container"><h3 class="heading" id="system-functions-fhold-header">File Hold</h3><div class="command">{R}←{X} ⎕FHOLD Y</div></div>
<h5>Access code 2048</h5>
<p>This function holds component file(s) and/or external variable(s). It is used  to synchronise access to resources shared between multiple cooperating Dyalog processes. It is not intended to synchronise access between Dyalog threads; for this purpose you should use  <code>:Hold</code>.</p>
<p>For a  multi-threaded and multi-process application, a single <code>⎕FHOLD</code> is used to synchronise inter-process access, while <code>:Hold</code> is used in multiple threads to synchronise access between  threads in the same process. See also <i>Hold Statement</i>.</p>
<p>If applied to component files, then <code>Y</code> is an integer scalar, vector, or one-row matrix of file tie numbers, or a two-row matrix whose first row contains file tie numbers and whose second row contains passnumbers.</p>
<p>If applied to external variables, then <code>Y</code> is a simple scalar character, a character vector, a non-simple scalar character vector, or a vector of character vectors that specifies one or more names of external variable(s) (NOT the file names associated with those variables). Note that when <code>Y</code> is simple, each character in <code>Y</code> is interpreted as a  variable name. If applied to component files <strong>and</strong> external variables, <code>Y</code> is a vector whose elements are either integer scalars representing tie numbers, or character scalars or vectors containing names of external variables.</p>
<p>The effect is as follows:</p>
<ol>
<li><strong>All</strong> of the user's preceding holds (if any) are released, whether referenced in <code>Y</code> or not.</li>
<li>Execution is suspended until the designated files are free of holds by any other task.</li>
<li>When all the designated files are free, execution proceeds.  Until the hold is released, other tasks using <code>⎕FHOLD</code> on any of the designated files will wait.</li>
</ol>
<p>The optional left argument <code>X</code> is a non-negative integer that specifies a time-out in milliseconds. If step 2 (see above) does not complete before the time-out value specified by <code>X</code>, <code>⎕FHOLD</code> times out and signals a <code>TIMEOUT</code> error (1006) after releasing any holds that have succeeded.</p>
<p>A time-out value of 0 indicates that the <code>⎕FHOLD</code> should time out at once without waiting if it cannot immediately acquire all holds. If <code>X</code> is <code>¯1</code>, <code>⎕FHOLD</code> behaves as the monadic case, and does not time out.</p>
<p>If <code>Y</code> is empty, all of the user's preceding holds (if any) are released, and execution continues.</p>
<p>A hold is released by any of the following:</p>
<ul>
<li>Another <code>⎕FHOLD</code></li>
<li>Untying or retying all the designated files.  If some but not all are untied or retied, they become free for another task but the hold persists for those that remain tied.</li>
<li>Termination of APL.</li>
<li>Any untrapped error or interrupt.</li>
<li>A return to immediate execution mode.</li>
</ul>
<p>Note that a hold is not released by a request for input through <code>⎕</code> or <code>⍞</code>.</p>
<p><code>⎕FHOLD</code> is generally useful only when called from a defined function, as holds set in immediate execution (desk calculator) mode are released immediately.</p>
<p>If <code>Y</code> is a matrix, the shy result <code>R</code> is <code>Y[1;]</code>. Otherwise, the  shy result <code>R</code> is <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="no">⍬</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'XTVAR'</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="o">,</span><span class="sr">[</span><span class="m">0.5</span><span class="sr">]</span><span class="m">0</span><span class="w"> </span><span class="m">16385</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">'XTVAR'</span>

<span class="w">      </span><span class="m">3000</span><span class="w"> </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="m">1</span>
<span class="nv">TIMEOUT</span>
<span class="w">      </span><span class="m">3000</span><span class="w"> </span><span class="nf">⎕FHOLD</span><span class="w"> </span><span class="m">1</span>
<span class="w">           </span><span class="o">∧</span>
</code></pre></div>
</article>
<article id="system-functions-fix">
<div class="heading-container"><h3 class="heading" id="system-functions-fix-header">Fix Script</h3><div class="command">{R}←{X}⎕FIX Y</div></div>
<p><code>⎕FIX</code> establishes Namespaces, Classes, Interfaces and functions from the script specified by <code>Y</code> in the workspace.</p>
<p>In this section, the term <em>namespace</em> covers scripted Namespaces, Classes and Interfaces.</p>
<p><code>Y</code> may be a simple character vector, or  a vector of character vectors or character scalars. The value of <code>X</code> determines what <code>Y</code> may contain.</p>
<p>If <code>Y</code> is a simple character vector, it must start with <code>file://</code>, followed by the name of a file which must exist. The contents of the file must follow the same rules that apply to <code>Y</code> when <code>Y</code> is a vector of character vectors or scalars. The file name can be relative or absolute; when considering cross-platform portability, using "/" as the directory delimiter is recommended, although "\" is also valid under Windows.</p>
<p>If specified, <code>X</code> must be a numeric scalar. It may currently take the value <code>0</code>, <code>1</code> or <code>2</code>. If not specified, the value is assumed to be <code>1</code>.</p>
<p>If <code>X</code> is <code>0</code>, <code>Y</code> must specify a single valid <em>namespace</em> which may or may not be named, or a file containing such a definition. If so, the shy result <code>R</code> contains a reference to the <em>namespace</em>. Even if the <em>namespace</em> is named, it is not established <em>per se</em>, although it will exist for as long as at least one reference to it exists.</p>
<p>If <code>X</code> is <code>1</code>, <code>Y</code> must specify a single valid <em>namespace</em> which may or may not be named, or a file containing such a definition.  If so, the shy result <code>R</code> contains a reference to the <em>namespace</em>. If <code>Y</code> contains the definition of a named <em>namespace</em>, the <em>namespace</em> is established in the workspace.</p>
<p>If <code>X</code> is <code>2</code>, <code>Y</code> is either a character vector containing the name of a script file, or a vector of character vectors that represents a script.</p>
<p><code>Y</code> may specify a series of <strong>named</strong> <em>namespaces</em> or function definitions,   or a combination of functions and namespaces.</p>
<ul>
<li>If the script contains more than one item,  tradfn definitions must be delimited by <code>∇</code>symbols.</li>
<li>Derived and assigned functions may be specified only within namespaces.</li>
</ul>
<p>In this case,  the shy result <code>R</code> is a vector of character vectors, containing the names of all of the objects that have been established in the workspace; the order of the names in <code>R</code> is not defined. Currently <code>2 ⎕FIX</code> is not certain to be an atomic operation, although this might change in future versions.</p>
<h5>Example 1</h5>
<p>In the first example, the Class specified by <code>Y</code> is <em>named</em> (<code>MyClass</code>) but the result of <code>⎕FIX</code> is discarded. The end-result is that <code>MyClass</code> is established in the workspace as a Class.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">':Class MyClass'</span><span class="w"> </span><span class="s1">':EndClass'</span>
<span class="c1">#.MyClass</span>
</code></pre></div></p>
<h5>Example 2</h5>
<p>In the second example, the Class specified by <code>Y</code> is <em>named</em> (<code>MyClass</code>) and the result of <code>⎕FIX</code> is assigned to a different name (<code>MYREF</code>). The end-result is that a Class named <code>MyClass</code> is established in the workspace, and <code>MYREF</code> is a reference to it.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MYREF</span><span class="kd">←</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">':Class MyClass'</span><span class="w"> </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLASSES</span>
<span class="nv">MyClass</span><span class="w"> </span><span class="nv">MYREF</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'MyClass'</span><span class="w"> </span><span class="s1">'MYREF'</span>
<span class="m">9.4</span><span class="w"> </span><span class="m">9.4</span>
<span class="w">      </span><span class="nv">MYREF</span>
<span class="c1">#.MyClass</span>
<span class="w">      </span><span class="nv">MYREF</span><span class="o">≡</span><span class="nv">MyClass</span>
<span class="m">1</span>
</code></pre></div></p>
<h5>Example 3</h5>
<p>In the third example, the left-argument of <code>0</code> causes the named Class <code>MyClass</code> to be visible only via the reference to it (<code>MYREF</code>). It is there, but hidden.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MYREF</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">':Class MyClass'</span><span class="w"> </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLASSES</span>
<span class="nv">MYREF</span>
<span class="w">      </span><span class="nv">MYREF</span>
<span class="c1">#.MyClass</span>
</code></pre></div></p>
<h5>Example 4</h5>
<p>The fourth example illustrates the use of un-named Classes.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">src</span><span class="kd">←</span><span class="s1">':Class'</span><span class="w"> </span><span class="s1">'∇Make n'</span>
<span class="w">      </span><span class="nv">src</span><span class="o">,</span><span class="kd">←</span><span class="s1">'Access Public'</span><span class="w"> </span><span class="s1">'Implements Constructor'</span>
<span class="w">      </span><span class="nv">src</span><span class="o">,</span><span class="kd">←</span><span class="s1">'⎕DF n'</span><span class="w"> </span><span class="s1">'∇'</span><span class="w"> </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="nv">MYREF</span><span class="kd">←</span><span class="nf">⎕FIX</span><span class="w"> </span><span class="nv">src</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLASSES</span>
<span class="nv">MYREF</span>
<span class="w">      </span><span class="nv">MYINST</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">MYREF</span><span class="s1">'Pete'</span>
<span class="w">      </span><span class="nv">MYINST</span>
<span class="nv">Pete</span>
</code></pre></div></p>
<h5>Example 5</h5>
<p>In the final example, the left argument of <code>2</code> allows a script containing multiple objects to be fixed:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">src</span><span class="kd">←</span><span class="s1">':Namespace andys'</span><span class="w"> </span><span class="s1">'∇foo'</span><span class="w"> </span><span class="s1">'2'</span><span class="w"> </span><span class="s1">'∇'</span>
<span class="w">      </span><span class="nv">src</span><span class="o">,</span><span class="kd">←</span><span class="s1">':EndNamespace'</span><span class="w"> </span><span class="s1">'dfn←{⍺ ⍵}'</span><span class="w"> </span><span class="s1">'∇r←tfn'</span>
<span class="w">      </span><span class="nv">src</span><span class="o">,</span><span class="kd">←</span><span class="s1">'r←33'</span><span class="w"> </span><span class="s1">'∇'</span><span class="w"> </span><span class="s1">':Class c1'</span><span class="w"> </span><span class="s1">'∇goo'</span><span class="w"> </span><span class="s1">'1'</span>
<span class="w">      </span><span class="nv">src</span><span class="o">,</span><span class="kd">←</span><span class="s1">'∇'</span><span class="w"> </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="o">≢</span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="nf">⎕fix</span><span class="w"> </span><span class="nv">src</span>
<span class="w"> </span><span class="nv">c1</span><span class="w">  </span><span class="nv">tfn</span><span class="w">  </span><span class="nv">dfn</span><span class="w">  </span><span class="nv">andys</span><span class="w"> </span>
<span class="m">4</span>
</code></pre></div>
<h5>Restriction</h5>
<p><code>⎕FIX</code> is unable to fix a namespace from <code>Y</code> when <code>Y</code> specifies a multi-line dfn which is preceded by a <code>⋄</code> (diamond separator).
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FIX</span><span class="s1">':Namespace iaK'</span><span class="w"> </span><span class="s1">'a←1 ⋄ adfn←{'</span><span class="w"> </span><span class="s1">'⍵'</span><span class="w"> </span><span class="s1">' }'</span><span class="w"> </span><span class="s1">':EndNamespace'</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">errors</span><span class="w"> </span><span class="nv">processing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">script</span>
<span class="w">      </span><span class="nf">⎕FIX</span><span class="s1">':Namespace iaK'</span><span class="w"> </span><span class="s1">'a←1 ⋄ adfn←{'</span><span class="w"> </span><span class="s1">'⍵'</span><span class="w"> </span><span class="s1">' }'</span><span class="w"> </span><span class="s1">':EndNamespace'</span>
<span class="w">      </span><span class="o">∧</span>
</code></pre></div></p>
<h5>Variant Options</h5>
<p><code>⎕FIX</code> may be applied using the  Variant operator with the options Quiet, FixWithErrors,  AllowLateBinding and InjectReferences. These options apply only to namespaces and classes specified by the script. There is no principal option.</p>
<h5>Quiet Option</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>If the script contains errors, these are displayed in the Status Window.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>If the script contains errors, the errors are not shown  in the Status Window.</td>
</tr>
</tbody>
</table>
<h5>FixWithErrors Option</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>If the script contains errors, <code>⎕FIX</code> fails with <code>DOMAIN ERROR</code> .</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>⎕FIX</code> fixes all the namespaces and classes in the script regardless of any errors they may contain.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>If the script contains errors, <code>⎕FIX</code> displays a message box prompting the user to choose whether or not to fix all the offending namespaces and classes in the script.</td>
</tr>
</tbody>
</table>
<h5>AllowLateBinding Option</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td><code>⎕FIX</code> will only fix a Class whose Base class (if specified) is defined in the script or is present in the workspace.</td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>⎕FIX</code> will fixes a Class whose Base class is neither defined in the script nor present in the workspace.</td>
</tr>
</tbody>
</table>
<h5>InjectReferences Option</h5>
<table>
<tbody>
<tr>
<td><code>'All'</code></td>
<td>In order to implement lexical scope, <code>⎕FIX</code> will insert internal references into all objects in the script.</td>
</tr>
<tr>
<td>'InClasses'</td>
<td>In order to implement lexical scope, <code>⎕FIX</code> will insert internal references ONLY into Classes and sub-classes in the script, but not into namespaces.</td>
</tr>
<tr>
<td><code>'None'</code></td>
<td>No internal references are inserted and lexical scope does not apply.</td>
</tr>
</tbody>
</table>
<p>See <i>Lexical Scope in Scripts</i>.</p>
<p>The following examples illustrate how different values of the InjectReferences option affect the scope of objects in scripts. The examples are based on the following family tree:</p>
<p><img alt="family tree for fix" src="img/family-tree-for-fix.png"/></p>
<p>Two scripts are defined to map this tree onto a structure of Classes and Namespaces. In this scheme, female family members are represented by Classes and male family members by Namespaces.</p>
<p>So the scripted tree for <code>Pete</code> has a parent Namespace:
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">Pete</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">Andy</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Aisha</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Endclass</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndNamespace</span>

<span class="w">    </span><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Katherine</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">Woody</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">EndNamespace</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">George</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">EndNamespace</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndClass</span>
<span class="bp">:</span><span class="nv">EndNamespace</span>
</code></pre></div></p>
<p>While the scripted tree for <code>Jill</code> has a parent Class:
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Jill</span>
<span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">Andy</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Aisha</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Endclass</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndNamespace</span>

<span class="w">    </span><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Katherine</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">Woody</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">EndNamespace</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">Namespace</span><span class="w"> </span><span class="nv">George</span>
<span class="w">        </span><span class="bp">:</span><span class="nv">EndNamespace</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndClass</span>
<span class="bp">:</span><span class="nv">EndClass</span>
</code></pre></div></p>
<p>Using the <code>Pete</code> Namespace, after executing the expression:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="p">(</span><span class="nf">⎕FIX</span><span class="na">⍠</span><span class="s1">'InjectReferences'</span><span class="w"> </span><span class="s1">'All'</span><span class="p">)</span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">Pete</span>
</code></pre></div></p>
<ul>
<li>Code in <code>Pete</code> may refer to <code>Aisha</code>    , <code>Andy</code>     , <code>George</code>   , <code>Katherine</code>, and <code>Woody</code></li>
<li>Code in <code>Andy</code> may refer to <code>Aisha</code>    and <code>Katherine</code></li>
<li>... and so forth.</li>
</ul>
<p>But after executing:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">2</span><span class="p">(</span><span class="nf">⎕FIX</span><span class="na">⍠</span><span class="s1">'InjectReferences'</span><span class="w"> </span><span class="s1">'InClasses'</span><span class="p">)</span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">Pete</span>
</code></pre></div></p>
<ul>
<li>Code in <code>Pete</code> may refer only to <code>Andy</code> and  <code>Katherine</code></li>
<li>Code in <code>Andy</code> may refer only to <code>Aisha</code></li>
<li>... and so forth.</li>
</ul>
<p>The following tables show which objects in Namespace <code>Pete</code> can <em>see</em> (i.e. refer to) which other objects representing members of the family, in each case; <code>All</code>, <code>InClasses</code> and <code>None</code>.</p>
<table>
<thead>
<tr>
<th>'All'</th>
<th>Pete</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pete</td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>✔</td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>'InClasses'</th>
<th>Pete</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pete</td>
<td> </td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>'None'</th>
<th>Pete</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pete</td>
<td> </td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table>
<p>Whilst the next set of tables show the same for Class <code>Jill</code>.</p>
<table>
<thead>
<tr>
<th>'All'</th>
<th>Jill</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jill</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>✔</td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>'InClasses'</th>
<th>Jill</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jill</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td>✔</td>
<td>✔</td>
<td> </td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>'None'</th>
<th>Jill</th>
<th>Andy</th>
<th>Aisha</th>
<th>Katherine</th>
<th>Woody</th>
<th>George</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jill</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Andy</td>
<td> </td>
<td> </td>
<td>✔</td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Aisha</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Katherine</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>Woody</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
<tr>
<td>George</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-flib">
<div class="heading-container"><h3 class="heading" id="system-functions-flib-header">Component File Library</h3><div class="command">R←⎕FLIB Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which specifies the name of the directory whose APL component files are to be listed.  If <code>Y</code> is empty, the current working directory is assumed.</p>
<p>The result <code>R</code> is a character matrix containing the names of the component files in the directory with one row per file.  The number of columns is given by the longest file name.  Each file name is prefixed by <code>Y</code> followed by a directory delimiter character.  The ordering of the rows is not defined.</p>
<p>If there are no APL component files accessible to the user in the directory in question, the result is an empty character matrix with 0 rows and 0 columns.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FLIB</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">SALESFILE</span>
<span class="nv">COSTS</span>

<span class="w">      </span><span class="nf">⎕FLIB</span><span class="w"> </span><span class="s1">'.'</span>
<span class="na">./</span><span class="nv">SALESFILE</span>
<span class="na">./</span><span class="nv">COSTS</span>

<span class="w">      </span><span class="nf">⎕FLIB</span><span class="w"> </span><span class="s1">'../budget'</span>
<span class="na">../</span><span class="nv">budget</span><span class="na">/</span><span class="nv">SALES</span><span class="m">.85</span>
<span class="na">../</span><span class="nv">budget</span><span class="na">/</span><span class="nv">COSTS</span><span class="m">.85</span>
</code></pre></div>
</article>
<article id="system-functions-format-monadic">
<div class="heading-container"><h3 class="heading" id="system-functions-format-monadic-header">Format (Monadic)</h3><div class="command">R←⎕FMT Y</div></div>
<p><code>Y</code> may be any array.  <code>R</code> is a simple character matrix which appears the same as the default display of <code>Y</code>.  If <code>Y</code> contains control characters from <code>⎕TC</code>, they will be resolved.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="s1">'∩'</span><span class="w"> </span><span class="o">,</span><span class="nf">⎕TC</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">,</span><span class="s1">'∘'</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">A</span>
<span class="c1">⍝</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="nf">⎕VR</span><span class="w"> </span><span class="s1">'FOO'</span>

<span class="w">      </span><span class="nv">A</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">A</span>
<span class="m">31</span>
<span class="w">      </span><span class="nv">B</span><span class="kd">←</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">A</span>

<span class="w">      </span><span class="nv">B</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">B</span>
<span class="m">3</span><span class="w"> </span><span class="m">12</span>
</code></pre></div>
</article>
<article id="system-functions-format-dyadic">
<div class="heading-container"><h3 class="heading" id="system-functions-format-dyadic-header">Format (Dyadic)</h3><div class="command">R←X ⎕FMT Y</div></div>
<p><code>Y</code> must be a simple array of rank not exceeding two, or a non-simple scalar or vector whose items are simple arrays of rank not exceeding two.  The simple arrays in <code>Y</code> must be homogeneous, either character or numeric. All numeric values in <code>Y</code> must be simple; if <code>Y</code> contains any complex numbers, dyadic <code>⎕FMT</code> will generate a <code>DOMAIN ERROR</code>. <code>X</code> must be a simple character vector.  <code>R</code> is a simple character matrix.</p>
<p><code>X</code> is a format specification that defines how columns of the simple arrays in <code>Y</code> are to appear.  A simple scalar in <code>Y</code> is treated as a one-element matrix.  A simple vector in <code>Y</code> is treated as a one-column matrix.  Each column of the simple arrays in <code>Y</code> is formatted in left-to-right order according to the format specification in <code>X</code> taken in left-to-right order and used cyclically if necessary.</p>
<p><code>R</code> has the same number of rows as the longest column (or implied column) in <code>Y</code>, and the number of columns is determined from the format specification.</p>
<p>The <strong>format specification</strong> consists of a series of control phrases, with adjacent phrases separated by a single comma, selected from the following:</p>
<table>
<tbody>
<tr>
<td><code>rAw</code></td>
<td>Alphanumeric format</td>
</tr>
<tr>
<td><code>rEw.s</code></td>
<td>Scaled format</td>
</tr>
<tr>
<td><code>rqFw.d</code></td>
<td>Decimal format</td>
</tr>
<tr>
<td><code>rqG⍞pattern⍞</code></td>
<td>Pattern</td>
</tr>
<tr>
<td><code>rqIw</code></td>
<td>Integer format</td>
</tr>
<tr>
<td><code>Tn</code></td>
<td>Absolute tabulation</td>
</tr>
<tr>
<td><code>Xn</code></td>
<td>Relative tabulation</td>
</tr>
<tr>
<td><code>⍞t⍞</code></td>
<td>Text insertion</td>
</tr>
</tbody>
</table>
<p>(Alternative surrounding pairs for Pattern or Text insertion are   <code>&lt; &gt;, ⊂ ⊃, ⎕ ⎕</code>  or <code>¨ ¨</code>.)</p>
<h5>where</h5>
<table>
<tbody>
<tr>
<td><code>r</code></td>
<td>is an optional repetition factor indicating that the format phrase is to be applied to r columns of <code>Y</code></td>
</tr>
<tr>
<td><code>q</code></td>
<td>is an optional usage of qualifiers or affixtures from those described below.</td>
</tr>
<tr>
<td><code>w</code></td>
<td>is an integer value specifying the total field width per column of <code>Y</code> , including any affixtures.</td>
</tr>
<tr>
<td><code>s</code></td>
<td>is an integer value specifying the number of significant digits in Scaled format; <code>s</code> must be less than <code>w-1</code></td>
</tr>
<tr>
<td><code>d</code></td>
<td>is an integer value specifying the number of places of decimal in Decimal format; <code>d</code> must be less than <code>w</code> .</td>
</tr>
<tr>
<td><code>n</code></td>
<td>is an integer value specifying a tab position relative to the notional left margin (for <code>T</code> -format) or relative to the last formatted position (for <code>X</code> -format) at which to begin the next format.</td>
</tr>
<tr>
<td><code>t</code></td>
<td>is any arbitrary text excluding the surrounding character pair.  Double quotes imply a single quote in the result.</td>
</tr>
<tr>
<td><code>pattern</code></td>
<td>see following section <strong>G format</strong></td>
</tr>
</tbody>
</table>
<h5>Qualifiers q are as follows</h5>
<table>
<tbody>
<tr>
<td><code>B</code></td>
<td>leaves the field blank if the result would otherwise be zero.</td>
</tr>
<tr>
<td><code>C</code></td>
<td>inserts commas between triads of digits starting from the rightmost digit of the integer part of the result.</td>
</tr>
<tr>
<td><code>Km</code></td>
<td>scales numeric values by <code>1Em</code> where m is an integer; negation may be indicated by <code>¯</code> or - preceding the number.</td>
</tr>
<tr>
<td><code>L</code></td>
<td>left justifies the result in the field width.</td>
</tr>
<tr>
<td><code>Ov⍞t⍞</code></td>
<td>replaces specific numeric value <code>v</code> with the text <code>t</code> .</td>
</tr>
<tr>
<td><code>S⍞p⍞</code></td>
<td>substitutes standard characters.  p is a string of pairs of symbols enclosed between any of the Text Insertion delimiters.  The first of each pair is the standard symbol and the second is the symbol to be substituted.  Standard symbols are: <code>*</code> overflow fill character <code>.</code> decimal point <code>,</code> triad separator for <code>C</code> qualifier <code>0</code> fill character for <code>Z</code> qualifier <code>_</code> loss of precision character <code>¯</code> high minus symbol</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>fills unused leading positions in the result with zeros (and commas if <code>C</code> is also specified).</td>
</tr>
<tr>
<td><code>9</code></td>
<td>digit selector</td>
</tr>
</tbody>
</table>
<h5>Affixtures are as follows</h5>
<table>
<tbody>
<tr>
<td><code>M⍞t⍞</code></td>
<td>prefixes negative results with the text t instead of the negative sign.</td>
</tr>
<tr>
<td><code>N⍞t⍞</code></td>
<td>post-fixes negative results with the text <code>t</code></td>
</tr>
<tr>
<td><code>P⍞t⍞</code></td>
<td>prefixes positive or zero results with the text <code>t</code> .</td>
</tr>
<tr>
<td><code>Q⍞t⍞</code></td>
<td>post-fixes positive or zero results with the text <code>t</code> .</td>
</tr>
<tr>
<td><code>R⍞t⍞</code></td>
<td>presets the field with the text <code>t</code> which is repeated as necessary to fill the field.  The text will be replaced in parts of the field filled by the result, including the effects of other qualifiers and affixtures except the <code>B</code> qualifier</td>
</tr>
</tbody>
</table>
<p>The surrounding affixture delimiters may be replaced by the alternative pairs described for Text Insertion.</p>
<p class="example">Examples</p>
<p>A vector is treated as a column:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'I5'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span>
<span class="w">   </span><span class="m">10</span>
<span class="w">   </span><span class="m">20</span>
<span class="w">   </span><span class="m">30</span>
</code></pre></div></p>
<p>The format specification is used cyclically to format the columns of the right argument:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'I3,F5.2'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">8</span>
<span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2.00</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4.00</span>
<span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">6.00</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">8.00</span>
</code></pre></div></p>
<p>The columns of the separate arrays in the items of a non-simple right argument are formatted in order.  Rows in a formatted column beyond the length of the column are left blank:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'2I4,F7.1'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">4</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴</span><span class="w"> </span><span class="m">0.1</span><span class="o">×⍳</span><span class="m">4</span><span class="p">)</span>
<span class="w">   </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">    </span><span class="m">0.2</span>
<span class="w">   </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="w">    </span><span class="m">0.4</span>
<span class="w">   </span><span class="m">3</span>
<span class="w">   </span><span class="m">4</span>
</code></pre></div></p>
<p>Characters are right justified within the specified field width, unless the <code>L</code> qualifier is specified:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'A2'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="o">⍴</span><span class="s1">'SPACED'</span>
<span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="nv">D</span>
</code></pre></div></p>
<p>If the result is too wide to fit within the specified width, the field is filled with asterisks:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F5.2'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">0.1</span><span class="o">×</span><span class="m">5</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="m">¯100</span>
<span class="w">  </span><span class="m">0.50</span>
<span class="o">*****</span>
<span class="o">*****</span>
</code></pre></div></p>
<p>Relative tabulation (<code>X</code>-format) identifies the starting position for the next format phrase relative to the finishing position for the previous format, or the notional left margin if none.  Negative values are permitted providing that the starting position is not brought back beyond the left margin.  Blanks are inserted in the result, if necessary:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'I2,X3,3A1'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="p">(</span><span class="o">⍳</span><span class="m">3</span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'TOPCAT'</span><span class="p">)</span>
<span class="w"> </span><span class="m">1</span><span class="w">   </span><span class="nv">TOP</span>
<span class="w"> </span><span class="m">2</span><span class="w">   </span><span class="nv">CAT</span>
<span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>Absolute tabulation (<code>T</code>-format) specifies the starting position for the next format relative to the notional left margin.  If position 0 is specified, the next format starts at the next free position as viewed so far.  Blanks are inserted into the result as required.  Over-written columns in the result contain the most recently formatted array columns taken in left-to-right order:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="s1">'6I1,T5,A1,T1,3A1,T7,F5.1'</span>

<span class="w">      </span><span class="nv">X</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="o">⍴⍳</span><span class="m">6</span><span class="p">)(</span><span class="s1">'*'</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'ABC'</span><span class="p">)(</span><span class="m">22.2</span><span class="p">)</span>
<span class="nv">ABC4</span><span class="o">*</span><span class="m">6</span><span class="w"> </span><span class="m">22.2</span>
</code></pre></div></p>
<p>If the number of specified significant digits exceeds the internal precision, low order digits are replaced by the symbol _:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F20.1'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">1E18</span><span class="o">÷</span><span class="m">3</span>
<span class="m">3333333333333333</span><span class="nv">__</span><span class="na">.</span><span class="nv">_</span>
</code></pre></div></p>
<p>The Text Insertion format phrase inserts the given text repeatedly in all rows of the result:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MEN</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="s1">'FRED BILL JAMES'</span>
<span class="w">      </span><span class="nv">WOMEN</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">5</span><span class="o">⍴</span><span class="s1">'MARY JUNE '</span>

<span class="w">      </span><span class="s1">'5A1,&lt;|&gt;'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="nv">MEN</span><span class="w"> </span><span class="nv">WOMEN</span>
<span class="nv">FRED</span><span class="w"> </span><span class="o">|</span><span class="nv">MARY</span><span class="w"> </span><span class="o">|</span>
<span class="nv">BILL</span><span class="w"> </span><span class="o">|</span><span class="nv">JUNE</span><span class="w"> </span><span class="o">|</span>
<span class="nv">JAMES</span><span class="o">|</span><span class="w">     </span><span class="o">|</span>
</code></pre></div></p>
<p>The last example also illustrates that a Text Insertion phrase is used even though the data is exhausted.</p>
<p>The following example illustrates effects of the various qualifiers:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="s1">'F5.1,BF6.1,X1,ZF5.1,X1,LF5.1,K3CS&lt;.,,.&gt;F10.1'</span>

<span class="w">      </span><span class="nv">X</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="o">⍉</span><span class="m">5</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">¯1.5</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">25</span>
<span class="w"> </span><span class="m">¯1.5</span><span class="w">  </span><span class="m">¯1.5</span><span class="w"> </span><span class="m">¯01.5</span><span class="w"> </span><span class="m">¯1.5</span><span class="w">   </span><span class="m">¯1.500</span><span class="o">,</span><span class="m">0</span>
<span class="w">  </span><span class="m">0.0</span><span class="w">       </span><span class="m">000.0</span><span class="w"> </span><span class="m">0.0</span><span class="w">         </span><span class="m">0</span><span class="o">,</span><span class="m">0</span>
<span class="w"> </span><span class="m">25.0</span><span class="w">  </span><span class="m">25.0</span><span class="w"> </span><span class="m">025.0</span><span class="w"> </span><span class="m">25.0</span><span class="w">   </span><span class="m">25.000</span><span class="o">,</span><span class="m">0</span>
</code></pre></div></p>
<p>Affixtures allow text to be included within a field.  The field width is not extended by the inclusion of affixtures.  <code>N</code> and <code>Q</code> affixtures shift the result to the left by the number of characters in the text specification.  Affixtures may be used to enclose negative results in parentheses in accordance with common accounting practice:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'M&lt;(&gt;N&lt;)&gt;Q&lt; &gt;F9.2'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">150.3</span><span class="w"> </span><span class="m">¯50.25</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1114.9</span>
<span class="w">  </span><span class="m">150.30</span>
<span class="w">  </span><span class="p">(</span><span class="m">50.25</span><span class="p">)</span>
<span class="w">    </span><span class="m">0.00</span>
<span class="w"> </span><span class="m">1114.90</span>
</code></pre></div></p>
<p>One or more format phrases may be surrounded by parentheses and preceded by an optional repetition factor.  The format phrases within parentheses will be re-used the given number of times before the next format phrase is used.  A Text Insertion  phrase will not be re-used if the last data format phrase is preceded by a closing parenthesis:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'I2,2(&lt;/&gt;,ZI2)'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⌽</span><span class="m">100</span><span class="o">|</span><span class="m">3</span><span class="o">↑</span><span class="nf">⎕TS</span>
<span class="m">20</span><span class="na">/</span><span class="m">07</span><span class="na">/</span><span class="m">89</span>
</code></pre></div></p>
<h5>G  Format</h5>
<p>Only the <code>B</code>, <code>K</code>, <code>S</code> and <code>O</code> qualifiers are valid with the <code>G</code> option</p>
<p><code>⍞pattern⍞</code> is an arbitrary string of characters, excluding the delimiter characters.  Characters '9' and '<code>Z</code>' (unless altered with the <code>S</code> qualifier) are special and are known as <strong>digit selectors</strong>.</p>
<p>The result of a <code>G</code> format will have length equal to the length of the pattern.</p>
<p>The data is rounded to the nearest integer (after possible scaling). Each digit of the rounded data replaces one digit selector in the result.  If there are fewer data digits than digit selectors, the data digits are padded with leading zeros.  If there are more data digits than digit selectors, the result will be filled with asterisks.</p>
<p>A '9' digit selector causes a data digit to be copied to the result.</p>
<p>A 'Z' digit selector causes a non-zero data digit to be copied to the result.  A zero data digit is copied if and only if digits appear on each side of it.  Otherwise a blank appears.  Similarly text between digit selectors appears only if digits appear on each side of the text.  Text appearing before the first digit selector or after the last will always appear in the result.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'G⊂99/99/99⊃'</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="o">⊥</span><span class="m">8</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">89</span>
<span class="m">08</span><span class="na">/</span><span class="m">07</span><span class="na">/</span><span class="m">89</span>

<span class="w">      </span><span class="s1">'G⊂ZZ/ZZ/ZZ⊃'</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">80789</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span><span class="m">8</span><span class="na">/</span><span class="m">07</span><span class="na">/</span><span class="m">89</span>
<span class="w"> </span><span class="m">8</span><span class="na">/</span><span class="m">07</span><span class="na">/</span><span class="m">9</span>

<span class="w">      </span><span class="s1">'G⊂Andy ZZ Pauline ZZ⊃'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">2721.499</span><span class="w"> </span><span class="m">2699.5</span>
<span class="nv">Andy</span><span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="nv">Pauline</span><span class="w"> </span><span class="m">21</span>
<span class="nv">Andy</span><span class="w"> </span><span class="m">27</span>

<span class="w">      </span><span class="o">⍴</span><span class="vg">⎕</span><span class="kd">←</span><span class="s1">'K2G⊂DM Z.ZZZ.ZZ9,99⊃'</span><span class="w"> </span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">1234567.89</span><span class="w"> </span><span class="m">1234.56</span>
<span class="nv">DM</span><span class="w"> </span><span class="m">1.234.567</span><span class="o">,</span><span class="m">89</span>
<span class="nv">DM</span><span class="w">     </span><span class="m">1.234</span><span class="o">,</span><span class="m">56</span>
<span class="m">2</span><span class="w"> </span><span class="m">15</span>
</code></pre></div>
<p>An error will be reported if:</p>
<ul>
<li>Numeric data is matched against an <code>A</code> control phrase.</li>
<li>Character data is matched against other than an <code>A</code> control phrase.</li>
<li>The format specification is ill-formed.</li>
<li>For an F control phrase, <code>d&gt;w-2</code></li>
<li>For an E control phrase, <code>s&gt;w-2</code></li>
</ul>
<h5>O  Format Qualifier</h5>
<p>The O format qualifier replaces a specific numeric value with a text string and may be used in conjunction with the E, F, I and G format phrases.</p>
<p>An O-qualifier consists of the letter "O" followed by the optional numeric value which is to be substituted (if omitted, the default is 0) and then the text string within pairs of symbols such as "<code>&lt;&gt;</code>". For example:</p>
<table>
<tbody>
<tr>
<td><code>O - qualifier</code></td>
<td>Description</td>
</tr>
<tr>
<td><code>O&lt;nil&gt;</code></td>
<td>Replaces the value 0 with the text "nil"</td>
</tr>
<tr>
<td><code>O42&lt;N/A&gt;</code></td>
<td>Replaces the value 42 with the text "N/A"</td>
</tr>
<tr>
<td><code>O0.001&lt;1/1000&gt;</code></td>
<td>Replaces the value 0.001 with the text "1/1000"</td>
</tr>
</tbody>
</table>
<p>The replacement text is inserted into the field in place of the numeric value. The text is normally right-aligned in the field, but will be left-aligned if the L qualifier is also specified.</p>
<p>It is permitted to specify more than one O-qualifier within a single phrase.</p>
<p>The O-qualifier is <code>⎕CT</code> sensitive.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'O&lt;NIL&gt;F7.2'</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">12.3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">42.5</span>
<span class="w">  </span><span class="m">12.30</span>
<span class="w">    </span><span class="nv">NIL</span>
<span class="w">  </span><span class="m">42.50</span>

<span class="w">      </span><span class="s1">'O&lt;NIL&gt;LF7.2'</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">12.3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">42.5</span>
<span class="m">12.30</span><span class="w"> </span>
<span class="nv">NIL</span><span class="w"> </span>
<span class="m">42.50</span><span class="w"> </span>

<span class="w">      </span><span class="s1">'O&lt;NIL&gt;O42&lt;N/A&gt;I6'</span><span class="nf">⎕FMT</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">13</span>
<span class="w">    </span><span class="m">12</span>
<span class="w">   </span><span class="nv">NIL</span>
<span class="w">   </span><span class="nv">N</span><span class="na">/</span><span class="nv">A</span>
<span class="w">    </span><span class="m">13</span>

<span class="w">      </span><span class="s1">'O99&lt;replace&gt;F20.2'</span><span class="nf">⎕fmt</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">101</span>
<span class="w">             </span><span class="nv">replace</span>
<span class="w">              </span><span class="m">100.00</span>
<span class="w">              </span><span class="m">101.00</span>
</code></pre></div>
<p><code>⎕CT</code> and <code>⎕DCT</code> are  implicit arguments of <code>⎕FMT</code> with the O format qualifier.</p>
</article>
<article id="system-functions-fnames">
<div class="heading-container"><h3 class="heading" id="system-functions-fnames-header">File Names</h3><div class="command">R←⎕FNAMES</div></div>
<p>The result is a character matrix containing the names of all tied files, with one file name per row.  The number of columns is that required by the longest file name.</p>
<p>A file name is returned precisely as it was specified when the file was tied, except that the directory delimiter <code>\</code> is replaced by <code>/</code>.  If no files are tied, the result is a character matrix with 0 rows and 0 columns.  The rows of the result are in the order in which the files were tied.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'/usr/pete/SALESFILE'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">16</span>

<span class="w">      </span><span class="s1">'..\budget\COSTFILE'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="s1">'PROFIT'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">5</span>

<span class="w">       </span><span class="nf">⎕FNAMES</span>
<span class="na">/</span><span class="nv">usr</span><span class="na">/</span><span class="nv">pete</span><span class="na">/</span><span class="nv">SALESFILE</span>
<span class="na">../</span><span class="nv">budget</span><span class="na">/</span><span class="nv">COSTFILE</span>
<span class="nv">PROFIT</span>

<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FNAMES</span>
<span class="m">3</span><span class="w"> </span><span class="m">19</span>
<span class="w">      </span><span class="nf">⎕FNUMS</span><span class="o">,</span><span class="nf">⎕FNAMES</span>
<span class="m">16</span><span class="w"> </span><span class="na">/</span><span class="nv">usr</span><span class="na">/</span><span class="nv">pete</span><span class="na">/</span><span class="nv">SALESFILE</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="na">../</span><span class="nv">budget</span><span class="na">/</span><span class="nv">COSTFILE</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="nv">PROFIT</span>
</code></pre></div>
</article>
<article id="system-functions-fnums">
<div class="heading-container"><h3 class="heading" id="system-functions-fnums-header">File Numbers</h3><div class="command">R←⎕FNUMS</div></div>
<p>The result is an integer vector of the <em>file tie number</em> of all tied files.  If no files are tied, the result is empty.  The elements of the result are in the order in which the files were tied.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'/home/pete/SALESFILE'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">16</span>

<span class="w">      </span><span class="s1">'../budget/COSTFILE'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="s1">'PROFIT'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nf">⎕FNUMS</span>
<span class="m">16</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="nf">⎕FNUMS</span><span class="o">,</span><span class="nf">⎕FNAMES</span>
<span class="m">16</span><span class="w"> </span><span class="na">/</span><span class="nv">home</span><span class="na">/</span><span class="nv">pete</span><span class="na">/</span><span class="nv">SALESFILE</span>
<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="na">../</span><span class="nv">budget</span><span class="na">/</span><span class="nv">COSTFILE</span>
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="nv">PROFIT</span>

<span class="w">      </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nf">⎕FNUMS</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕FNUMS</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-fprops">
<div class="heading-container"><h3 class="heading" id="system-functions-fprops-header">File Properties</h3><div class="command">R←X ⎕FPROPS Y</div></div>
<h5>Access Code 1 (to read) or 8192 (to change properties)</h5>
<p><code>⎕FPROPS</code> reports and sets the properties of a component file.</p>
<p><code>Y</code> must be a simple integer scalar or  1 or 2-element vector containing the file tie number followed by an optional passnumber. If the passnumber is omitted, it is assumed to be 0.</p>
<p><code>X</code> must be a simple character scalar or vector containing one or more valid Identifiers listed in the table below, or a 2-element nested vector which specifies an Identifier and a (new) value for that property. To set new values for more than one property, <code>X</code> must be is a vector of 2-element vectors, each of which contains an Identifier and a (new) value for that property.</p>
<p>If the left argument is a simple character array, the result <code>R</code> contains the current values for the properties identified by <code>X</code>. If the left argument is nested, the result <code>R</code> contains the previous values for the properties identified by <code>X</code>.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Property</th>
<th>Description / Legal Values</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>S</code></td>
<td>File Size (read only)</td>
<td>32 = Small-span Component Files (&lt;4GB) 64 = Large-span Component Files</td>
</tr>
<tr>
<td><code>E</code></td>
<td>Endian-ness (read only)</td>
<td>0 = Little-endian 1 = Big-endian</td>
</tr>
<tr>
<td><code>U</code></td>
<td>Unicode</td>
<td>0 = Characters will be written as type 82 arrays 1 = Characters will be written as Unicode arrays</td>
</tr>
<tr>
<td><code>J</code></td>
<td>Journaling</td>
<td>0 = Disable Journaling 1 = Enable <em>APL crash proof</em> Journaling 2 = Enable <em>System crash proof</em> Journaling; repair needed on recovery 3 = Enable full <em>System crash proof</em> Journaling</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Checksum</td>
<td>0 = Disable checksum 1 = Enable checksum</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>Compression</td>
<td>0 = Disable compression 1 = Enable compression</td>
</tr>
</tbody>
</table>
<p>The default properties for a newly created file are as follows:</p>
<ul>
<li>S = 64</li>
<li>U = 1 (in Unicode Edition) or 0 (in Classic Edition)</li>
<li>J = 1</li>
<li>C = 1</li>
<li>Z = 0</li>
<li>E depends upon the computer architecture.</li>
</ul>
<p>Note that the defaults for C and J can be overridden by calling <code>⎕FCREATE</code> via the Variant operator <code>⍠</code>. For further information, see <a class="internal-link" href="#system-functions-fcreate">Section 4.6.45</a>.</p>
<h4>Journaling Levels</h4>
<p><strong>Level 1</strong> journaling (APL crash-proof) automatically protects a component file from damage in the event of abnormal termination of the APL process. The file state will be implicitly committed between updates and an incomplete update will automatically be rolled forward or back when the file is re-tied. In the event of an operating system crash the file may be more seriously damaged. If checksum was also enabled it may be repaired using <code>⎕FCHK</code> but some components may be restored to a previous state or not restored at all.</p>
<p><strong>Level 2</strong> journaling (system crash-proof – repair needed on recovery) extends level 1 by ensuring that a component file is fully repairable using <code>⎕FCHK</code> with no component loss in the event of an operating system failure. If an update was in progress when the system crashed the affected component will be rolled back to the previous state. Tying and modifying such a file without first running <code>⎕FCHK</code> may however render it un-repairable.</p>
<p><strong>Level 3</strong> journaling (system crash-proof) extends level 2 by protecting a component file from damage in the event of abnormal termination of the APL process and also the operating system. Rollback of an incomplete update will be automatic and no explicit repair will be needed.</p>
<p>Enabling journaling on a component file will reduce performance of file updates; higher journaling levels have a greater impact.</p>
<p>Journaling levels 2 and 3 cannot be set unless the checksum option is also enabled.</p>
<p>The default level of journaling may be changed using the <strong>APL_FCREATE_PROPS_J</strong> parameter (see <em>Dyalog for Microsoft Windows Installation and Configuration Guide: Configuration Parameters</em> for more information).</p>
<h5>Checksum Option</h5>
<p>The checksum option is enabled by default. This  enables a damaged file to be repaired using <code>⎕FCHK</code>. It will however  reduce the performance of file updates slightly and result in larger component files. The default may be changed using the <strong>APL_FCREATE_PROPS_C</strong> parameter (See User Guide).</p>
<p>Enabling the checksum option on an existing non-empty component file will result in all previously written components without a checksum  being check-summed and converted. This operation which will take place when <code>⎕FPROPS</code> is changed, may not therefore be instantaneous.</p>
<p>Journaling and checksum settings may be changed at any time a file is exclusively tied.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tn</span><span class="kd">←</span><span class="s1">'myfile64'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="s1">'SEUJ'</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">tn</span>
<span class="m">64</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>The following expression disables Unicode and switches Journaling on. The function returns the previous settings:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'U'</span><span class="w"> </span><span class="m">0</span><span class="p">)(</span><span class="s1">'J'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">tn</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Note that to set the value of just a single property, the following two statements are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'J'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">tn</span>
<span class="w">      </span><span class="p">(</span><span class="o">,⊂</span><span class="s1">'J'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FPROPS</span><span class="w"> </span><span class="nv">tn</span>
</code></pre></div></p>
<p>Properties may be read by a task with <code>⎕FREAD</code> permission (access code 1), and set by a task with <code>⎕FSTAC</code> access (8192). To set the value of the Journaling property, the file must be exclusively tied.</p>
<h5>Recommendation</h5>
<p>It is recommended that all component files are protected by  a minimum of Level 1 Journalling and have Checksum enabled.</p>
<p>Unprotected files  should only be used:</p>
<ul>
<li>for temporary work files where speed is paramount and integrity a secondary issue</li>
<li>or where compatibility with Versions of Dyalog prior to Version 12.0 is required</li>
</ul>
<p>This recommendation is given for the following reasons:</p>
<ul>
<li>Unprotected files are easily damaged by abnormal termination of the interpreter</li>
<li>They cannot be repaired using <code>⎕FCHK</code></li>
<li>They do not support <code>⎕FHIST</code></li>
<li>They are not well supported by the Dyalog File Server (DFS)</li>
<li>They do not support compression of components</li>
<li>Additional features added in future may not be supported</li>
</ul>
<h5>Compression Option</h5>
<p>Components are compressed using the <em>LZ4</em> compressor which delivers a medium level of compression, but is considered to be very fast compared to other algorithms.</p>
<p>Compression is intended to deliver a performance gain reading and writing large components on fast computers with slow (e.g. network) file access. Conversely, on a slow computer with fast file access compression may actually reduce read/write performance. For this reason it is optional at the component level.</p>
<p>The default for the <code>'Z'</code> property is 0 which means no compression; 1 means compression. When written, components are compressed or not according to the current value of the <code>'Z'</code> property. Changing this property does not change any components already in the file.</p>
<p>A component file may therefore contain a mixture of normal and compressed components. Note that only the data in file components are compressed, the file access matrix and other header information is not compressed.</p>
<p>When read, compressed components are decompressed regardless of the value of the <code>'Z'</code> property.</p>
<p>An exclusive tie is not needed to change the file property.</p>
<p>Compression is not supported for files in which both Journalling and Checksum are disabled.</p>
</article>
<article id="system-functions-fr">
<div class="heading-container"><h3 class="heading" id="system-functions-fr-header">Floating-Point Representation</h3><div class="command">⎕FR</div></div>
<p>The value of <code>⎕FR</code> determines the way that floating-point operations are performed.</p>
<p>If <code>⎕FR</code> is 645, all floating-point calculations are performed using IEEE 754 64-bit floating-point operations and the results of these operations are represented internally using <em>binary64</em><span class="footnote">http://en.wikipedia.org/wiki/Double_precision_floating-point_format</span> floating-point format.</p>
<p>If <code>⎕FR</code> is 1287, all floating-point calculations are performed using IEEE 754-2008 128-bit decimal floating-point operations and the results of these operations are represented internally using <em>decimal128</em><span class="footnote">http://en.wikipedia.org/wiki/Decimal128_floating-point_format</span> format.</p>
<p>Note that when you change <code>⎕FR</code>, its new value only affects subsequent floating-point operations and results. Existing floating-point values stored in the workspace remain unchanged.</p>
<p>The default value of <code>⎕FR</code> (its value in a <code>clear ws</code>) is configurable.</p>
<p><code>⎕FR</code>  has namespace scope but may be localised. If so, like most other system variables, it inherits its initial value from the global environment.</p>
<p><strong>However:</strong> Although <code>⎕FR</code> <em>can</em> vary, the system is <em>not designed</em> to allow "seamless" modification during the running of an application and the dynamic alteration of is not recommended.  Strange effects may occur. For example, the type of a constant contained in a line of code (in a function or class), will depend on the value of <code>⎕FR</code> <em>when the function is fixed</em>.</p>
<p>Also note:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">1287</span>
<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="m">1</span><span class="o">÷</span><span class="m">3</span>

<span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">645</span>
<span class="w">      </span><span class="nv">x</span><span class="o">=</span><span class="m">1</span><span class="o">÷</span><span class="m">3</span>
<span class="m">1</span>
</code></pre></div></p>
<p>The decimal number has 17 more 3's. Using the tolerance which applies to binary floats (type 645), the numbers are equal. However, the "reverse" experiment yields 0, as tolerance is much narrower in the decimal universe:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">645</span>
<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="m">1</span><span class="o">÷</span><span class="m">3</span>
<span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">1287</span>
<span class="w">      </span><span class="nv">x</span><span class="o">=</span><span class="m">1</span><span class="o">÷</span><span class="m">3</span>
<span class="m">0</span>
</code></pre></div></p>
<p>Since <code>⎕FR</code> can vary, it will be possible for a single workspace to contain floating-point values of both types (existing variables are not converted when <code>⎕FR</code> is changed). For example, an array that has just been brought into the workspace from external storage may have a different type from <code>⎕FR</code> in the current namespace. Conversion (if necessary) will only take place when a <em>new</em> floating-point array is generated as the result of "a calculation". The result of a computation returning a floating-point result will <em>not</em> depend on the type of the arrays involved in the expression: <code>⎕FR</code> at the time when a computation is performed decides the result type, alone.</p>
<p>Structural functions generally do NOT change the type, for example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">1287</span>
<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="m">1.1</span><span class="w"> </span><span class="m">2.2</span><span class="w"> </span><span class="m">3.3</span>

<span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">645</span>
<span class="w">      </span><span class="nf">⎕DR</span><span class="w"> </span><span class="nv">x</span>
<span class="m">1287</span>
<span class="w">      </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">2</span><span class="o">↑</span><span class="nv">x</span>
<span class="m">1287</span>
</code></pre></div></p>
<p>128-bit decimal numbers not only have greater precision (roughly 34 decimal digits); they also have significantly larger range – from <code>¯1E6145</code> to <code>1E6145</code>. Loss of precision is accepted on conversion from 645 to 1287, but the magnitude of a number may make the conversion impossible, in which case a <code>DOMAIN ERROR</code> is issued:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">1287</span>
<span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="m">1E1000</span>
<span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">645</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">x</span><span class="o">+</span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div></p>
<p>When experimenting with <code>⎕FR</code> it is important to note that numeric constants entered into the Session are evaluated (and assigned a data type) before the line is actually executed. This means that constants are evaluated according to the value of <code>⎕FR</code> that pertained before the line was entered. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">645</span>
<span class="w">      </span><span class="nf">⎕FR</span>
<span class="m">645</span>

<span class="w">      </span><span class="nf">⎕FR</span><span class="kd">←</span><span class="m">1287</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">0.1</span>
<span class="m">645</span>
<span class="w">      </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">0.1</span>
<span class="m">1287</span>
</code></pre></div></p>
<p>WARNING: The use of COMPLEX numbers when <code>⎕FR</code> is 1287 is not recommended, because:</p>
<ul>
<li>any 128-bit decimal array into which a complex number is inserted or appended will be forced in its entirety into complex representation, potentially losing precision.</li>
<li>All comparisons are done using <code>⎕DCT</code> when <code>⎕FR</code> is 1287, and the default value of <code>1E¯28</code> is equivalent to 0 for complex numbers.</li>
</ul>
</article>
<article id="system-functions-frdac">
<div class="heading-container"><h3 class="heading" id="system-functions-frdac-header">File Read Access</h3><div class="command">R←⎕FRDAC Y</div></div>
<h5>Access code 4096</h5>
<p><code>Y</code> must be a simple integer scalar or 1 or 2 element vector containing the file tie number followed by an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  The result is the access matrix for the designated file.</p>
<p>For details see <i>File Access Control</i>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FRDAC</span><span class="w"> </span><span class="m">1</span>
<span class="m">28</span><span class="w"> </span><span class="m">2105</span><span class="w"> </span><span class="m">16385</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2073</span><span class="w"> </span><span class="m">16385</span>
<span class="m">31</span><span class="w">   </span><span class="m">¯1</span><span class="w">     </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-frdci">
<div class="heading-container"><h3 class="heading" id="system-functions-frdci-header">File Read Component Information</h3><div class="command">R←⎕FRDCI Y</div></div>
<h5>Access code 512</h5>
<p><code>Y</code> must be a simple integer vector of length 2 or 3 containing the file tie number, component number and an optional passnumber.  If the passnumber is omitted it is assumed to be zero.</p>
<p>The result is a 3 element numeric vector containing the following information:</p>
<ol>
<li>the size of the component in bytes (i.e. how much disk space it occupies).</li>
<li>the user number of the user who last updated the component.</li>
<li>the time of the last update in 60ths of a second since 1st January 1970 (UTC).</li>
</ol>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FRDCI</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">13</span>
<span class="m">2200</span><span class="w"> </span><span class="m">207</span><span class="w"> </span><span class="m">3.702094494E10</span>
</code></pre></div>
</article>
<article id="system-functions-fread">
<div class="heading-container"><h3 class="heading" id="system-functions-fread-header">File Read Components</h3><div class="command">R←⎕FREAD Y</div></div>
<h5>Access code 1</h5>
<p><code>Y</code> is a  2 or 3 item  vector containing the file tie number, the component number(s), and an optional passnumber.  If the passnumber is omitted it is assumed to be zero. All elements of <code>Y</code> must be integers.</p>
<p>The second item in <code>Y</code> may be scalar which specifies a single component number or a vector of component numbers. If it is a scalar, the result is the value of the array that is stored in the specified component on the tied file. If it is a vector, the result is a vector of such arrays.</p>
<p>Note that any invocation of  <code>⎕FREAD</code> is an atomic operation.  Thus if <code>compnos</code> is a vector, the statement:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="nv">compnos</span><span class="w"> </span><span class="nv">passno</span>
</code></pre></div></p>
<p>will return the same result as:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{</span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="nv">passno</span><span class="kt">}</span><span class="na">¨</span><span class="nv">compnos</span>
</code></pre></div></p>
<p>However, the first statement will, in the case of a share-tied file,  prevent any potential intervening file access from another user (without the need for a  <code>⎕FHOLD</code>). It will also perform slightly faster, especially when reading from a share-tied file.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">SALES</span><span class="kd">←</span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">241</span>
<span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">12</span>

<span class="nv">GetFile</span><span class="kd">←</span><span class="kt">{</span><span class="nf">⎕io</span><span class="kd">←</span><span class="m">0</span><span class="w">                </span><span class="c1">⍝ Extract contents.</span>
<span class="w">    </span><span class="nv">tie</span><span class="kd">←</span><span class="bp">⍵</span><span class="w"> </span><span class="nf">⎕fstie</span><span class="w"> </span><span class="m">0</span><span class="w">            </span><span class="c1">⍝ new tie number.</span>
<span class="w">    </span><span class="nv">fm</span><span class="w"> </span><span class="nv">to</span><span class="kd">←</span><span class="m">2</span><span class="o">↑</span><span class="nf">⎕fsize</span><span class="w"> </span><span class="nv">tie</span><span class="w">        </span><span class="c1">⍝ first and next component.</span>
<span class="w">    </span><span class="nv">cnos</span><span class="kd">←</span><span class="nv">fm</span><span class="o">+⍳</span><span class="nv">to</span><span class="o">-</span><span class="nv">fm</span><span class="w">            </span><span class="c1">⍝ vector of component nos.</span>
<span class="w">    </span><span class="nv">cvec</span><span class="kd">←</span><span class="nf">⎕fread</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="nv">cnos</span><span class="w">      </span><span class="c1">⍝ vector of components.</span>
<span class="w">    </span><span class="nv">cvec</span><span class="o">⊣</span><span class="nf">⎕funtie</span><span class="w"> </span><span class="nv">tie</span><span class="w">        </span><span class="c1">⍝ ... untie and return.</span>
<span class="kt">}</span>
</code></pre></div>
</article>
<article id="system-functions-frename">
<div class="heading-container"><h3 class="heading" id="system-functions-frename-header">File Rename</h3><div class="command">{R}←X ⎕FRENAME Y</div></div>
<h5>Access code 128</h5>
<p><code>Y</code> must be a simple 1 or 2 element integer vector containing a file tie number and an optional passnumber.  If the passnumber is omitted it is assumed to be zero.</p>
<p><code>X</code> must be a simple character scalar or vector containing the new name of the file.  This name must be in accordance with the operating system's conventions, and may be specified with a relative or absolute pathname. If no file extension is supplied, the first extension specified by the   <strong>CFEXT</strong> parameter will be added. See <i> CFEXT</i>.</p>
<p>The file being renamed must be tied exclusively.</p>
<p>The shy result of <code>⎕FRENAME</code> is the tie number of the file.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'SALES'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="s1">'PROFIT'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">2</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕FNAMES</span>
<span class="nv">SALES</span>
<span class="nv">PROFIT</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'SALES.85'</span><span class="w"> </span><span class="nf">⎕FRENAME</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="s1">'../profits/PROFITS.85'</span><span class="w"> </span><span class="nf">⎕FRENAME</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FNAMES</span>
<span class="nv">SALES</span><span class="m">.85</span>
<span class="na">../</span><span class="nv">profits</span><span class="na">/</span><span class="nv">PROFITS</span><span class="m">.85</span>
<span class="w"> </span>
<span class="nv">Rename</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="nv">fm</span><span class="w"> </span><span class="nv">to</span><span class="kd">←</span><span class="bp">⍵</span>
<span class="w">    </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nf">⎕FRENAME</span><span class="w"> </span><span class="nv">fm</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="kt">}</span>
</code></pre></div></p>
</article>
<article id="system-functions-freplace">
<div class="heading-container"><h3 class="heading" id="system-functions-freplace-header">File Replace Component</h3><div class="command">{R}←X ⎕FREPLACE Y</div></div>
<h5>Access code 16</h5>
<p><code>Y</code> must be a simple 2 or 3 element integer vector containing the file tie number, the component number, and an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  The component number specified must lie within the file's component number limits.</p>
<p><code>X</code> is any array (including, for example, the <code>⎕OR</code> of a namespace), and overwrites the value of the specified component.  The component information (see <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>) is also updated.</p>
<p>The shy result of <code>⎕FREPLACE</code> is the file index (component number of replaced record).</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">SALES</span><span class="kd">←</span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">241</span>

<span class="w">      </span><span class="p">(</span><span class="nv">SALES</span><span class="o">×</span><span class="m">1.1</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FREPLACE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">241</span>
</code></pre></div>
<p>Define a function to replace (index, value) pairs in a component file JMS.DCF:
<div class="highlight"><pre><span></span><code><span class="nv">Frep</span><span class="kd">←</span><span class="kt">{</span>
<span class="w">    </span><span class="nv">tie</span><span class="kd">←</span><span class="bp">⍺</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="nv">_</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="nf">⎕FREPLACE</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="bp">⍺</span><span class="kt">}</span><span class="na">/¨</span><span class="bp">⍵</span>
<span class="w">    </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nv">tie</span>
<span class="kt">}</span><span class="w"> </span>

<span class="w">      </span><span class="s1">'jms'</span><span class="nv">Frep</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="s1">'abc'</span><span class="p">)(</span><span class="m">29</span><span class="w"> </span><span class="s1">'xxx'</span><span class="p">)(</span><span class="m">7</span><span class="w"> </span><span class="s1">'yyy'</span><span class="p">)</span>
</code></pre></div></p>
</article>
<article id="system-functions-fresize">
<div class="heading-container"><h3 class="heading" id="system-functions-fresize-header">File Resize</h3><div class="command">{R}←{X}⎕FRESIZE Y</div></div>
<h5>Access code 1024</h5>
<p><code>Y</code> must be a simple integer scalar or 1 or 2 element vector containing the file tie number followed by an optional passnumber.  If the passnumber is omitted it is assumed to be zero.</p>
<p><code>X</code> is an integer that specifies the maximum permitted size of the file in bytes. The value 0 means the maximum possible size of file.</p>
<p>An attempt to update a component file that would cause it to exceed its maximum size will fail with a <code>FILE FULL</code> error (21). A side effect of <code>⎕FRESIZE</code> is to cause the file to be compacted. This process removes any gaps in the file caused by replacing a component with a shorter array. Any interrupt entered at the keyboard during the compaction is ignored. Note that if the left argument is omitted, the file is simply compacted and the maximum file size remains unchanged.</p>
<p>During compaction, the file is restructured by reordering the components and by amalgamating the free areas at the end of the file. The file is then truncated and excess disk space is released back to the operating system. For a large file with many components, this process may take a significant time.</p>
<p>The shy result of <code>⎕FRESIZE</code> is the tie number of the file.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'test'</span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">1.844674407E19</span>
<span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">1000</span><span class="o">⍴</span><span class="m">1.1</span><span class="p">)</span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">80288</span><span class="w"> </span><span class="m">1.844674407E19</span>

<span class="w">      </span><span class="m">100000</span><span class="w"> </span><span class="nf">⎕FRESIZE</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ Limit size to 100000 bytes</span>

<span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">1000</span><span class="o">⍴</span><span class="m">1.1</span><span class="p">)</span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">FULL</span>
<span class="w">      </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">1000</span><span class="o">⍴</span><span class="m">1.1</span><span class="p">)</span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="nf">⎕FRESIZE</span><span class="w"> </span><span class="m">1</span><span class="w">      </span><span class="c1">⍝ Force file compaction.</span>
</code></pre></div>
</article>
<article id="system-functions-fsize">
<div class="heading-container"><h3 class="heading" id="system-functions-fsize-header">File Size</h3><div class="command">R←⎕FSIZE Y</div></div>
<p><code>Y</code> must be a simple integer scalar or 1 or 2 element vector containing the file tie number followed by an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  The result is a 4 element numeric vector containing the following:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>the number of first component</td>
</tr>
<tr>
<td>2</td>
<td>1 + the number of the last component, (i.e. the result of the next <code>⎕FAPPEND</code> )</td>
</tr>
<tr>
<td>3</td>
<td>the current size of the file in bytes</td>
</tr>
<tr>
<td>4</td>
<td>the file size limit in bytes</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FSIZE</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">65271</span><span class="w"> </span><span class="m">4294967295</span>
</code></pre></div>
</article>
<article id="system-functions-fstac">
<div class="heading-container"><h3 class="heading" id="system-functions-fstac-header">File Set Access</h3><div class="command">{R}←X ⎕FSTAC Y</div></div>
<h5>Access code 8192</h5>
<p><code>Y</code> must be a simple integer scalar or 1 or 2 element vector containing the file tie number followed by an optional passnumber. If the passnumber is omitted it is assumed to be zero.</p>
<p><code>X</code> must be a valid access matrix, i.e. a 3-column integer matrix with any number of rows.  The function sets access control for a set of specific users (1<sup>st</sup> column) and file operations (2<sup>nd</sup> column) with specified passnumbers ( 3<sup>rd</sup> column). Note that a 0 in the 1<sup>st</sup> column specifies <strong>all</strong> users, a <code>¯1</code> in the 2<sup>nd</sup> column specifies <strong>all</strong> file operations, and a <code>0</code> in the 3<sup>rd</sup> column specifies that <strong>no</strong> passnumber is required. For further details, see <i>File Access Control</i>.</p>
<p>The shy result of <code>⎕FSTAC</code> is the tie number of the file.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'SALES'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">28</span><span class="w"> </span><span class="m">2105</span><span class="w"> </span><span class="m">16385</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">2073</span><span class="w"> </span><span class="m">16385</span><span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FSTAC</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="p">((</span><span class="nf">⎕FRDAC</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="o">⍪</span><span class="m">21</span><span class="w"> </span><span class="m">2105</span><span class="w"> </span><span class="m">16385</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕FSTAC</span><span class="w"> </span><span class="m">1</span>

<span class="w">       </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="m">0</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="nf">⎕FSTAC</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1">⍝ Let everyone do anything</span>
</code></pre></div>
</article>
<article id="system-functions-fstie">
<div class="heading-container"><h3 class="heading" id="system-functions-fstie-header">File Share Tie</h3><div class="command">{R}←X ⎕FSTIE Y</div></div>
<p><code>Y</code> must be 0 or a simple 1 or 2 element integer vector containing an available file tie number to be associated with the file for further file operations, and an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  The tie number must not already be associated with a tied file.</p>
<p><code>X</code> must be a simple character scalar or vector which specifies the name of the file to be tied.  The file must be named in accordance with the operating system's conventions, and may be specified with a relative or absolute pathname. If no file extension is supplied, the set of extensions specified by the  <strong>CFEXT</strong> parameter are tried one after another until the file is found or the set of extensions is exhausted. See <i> CFEXT</i>.</p>
<p>The file must exist and be accessible by the user.  If it is already tied by another task, it must not be tied exclusively.</p>
<p>The shy result of <code>⎕FSTIE</code> is the tie number of the file.</p>
<h5>Automatic Tie Number Allocation</h5>
<p>A tie number of 0 as argument to a create, share tie or exclusive tie operation, allocates the first (closest to zero) available tie number and returns it as an explicit result. This allows you to simplify code. For example:</p>
<p>from:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="m">1</span><span class="o">+⌈</span><span class="na">/</span><span class="m">0</span><span class="o">,</span><span class="nf">⎕FNUMS</span><span class="w">  </span><span class="c1">⍝ With next available number,</span>
<span class="w">      </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="nv">tie</span><span class="w">   </span><span class="c1">⍝ ... share tie file.</span>
</code></pre></div></p>
<p>to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Tie with 1st available number.</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'SALES'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'../budget/COSTS'</span><span class="w"> </span><span class="nf">⎕FSTIE</span><span class="w"> </span><span class="m">2</span>
</code></pre></div>
</article>
<article id="system-functions-ftie">
<div class="heading-container"><h3 class="heading" id="system-functions-ftie-header">Exclusive File Tie</h3><div class="command">{R}←X ⎕FTIE Y</div></div>
<h5>Access code 2</h5>
<p><code>Y</code> must be 0 or a simple 1 or 2 element integer vector containing an available file tie number to be associated with the file for further file operations, and an optional passnumber.  If the passnumber is omitted it is assumed to be zero.  The tie number must not already be associated with a share tied or exclusively tied file.</p>
<p><code>X</code> must be a simple character scalar or vector which specifies the name of the file to be exclusively tied.  The file must be named in accordance with the operating system's conventions, and may be a relative or absolute pathname. If no file extension is supplied, the set of extensions specified by the  <strong>CFEXT</strong> parameter are tried one after another until the file is found or the set of extensions is exhausted. See <i> CFEXT</i>.</p>
<p>The file must exist and  the user must have write access to it.  It may not already be tied by another user.</p>
<h4>Automatic Tie Number Allocation</h4>
<p>A tie number of 0 as argument to a create, share tie or exclusive tie operation, allocates the first (closest to zero) available tie number, and returns it as an explicit result. This allows you to simplify code. For example:</p>
<p>from:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="m">1</span><span class="o">+⌈</span><span class="na">/</span><span class="m">0</span><span class="o">,</span><span class="nf">⎕FNUMS</span><span class="w"> </span><span class="c1">⍝ With next available number,</span>
<span class="w">      </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="nv">tie</span><span class="w">   </span><span class="c1">⍝ ... tie file.</span>
</code></pre></div></p>
<p>to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Tie with first available number.</span>
</code></pre></div></p>
<p>The shy result of <code>⎕FTIE</code> is the tie number of the file.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'SALES'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'../budget/COSTS'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w">  </span><span class="m">2</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'../budget/expenses'</span><span class="w"> </span><span class="nf">⎕FTIE</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span>
</code></pre></div>
</article>
<article id="system-functions-funtie">
<div class="heading-container"><h3 class="heading" id="system-functions-funtie-header">File Untie</h3><div class="command">{R}←⎕FUNTIE Y</div></div>
<p><code>Y</code> must be a simple integer scalar or vector (including Zilde).  Files whose tie numbers occur in <code>Y</code> are untied.  Other elements of <code>Y</code> have no effect.</p>
<p>If <code>Y</code> is empty, no files are untied, but all the interpreter's internal file buffers are flushed and the operating system is asked to flush all file updates  to disk.  This special facility allows the programmer to add extra security (at the expense of performance) for application data files.</p>
<p>The shy result of <code>⎕FUNTIE</code> is a vector of tie numbers of the files <strong>actually untied</strong>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="nf">⎕FNUMS</span><span class="w"> </span><span class="c1">⍝ Unties all tied files</span>

<span class="w">      </span><span class="nf">⎕FUNTIE</span><span class="w"> </span><span class="no">⍬</span><span class="w">      </span><span class="c1">⍝ Flushes all buffers to disk</span>
</code></pre></div>
</article>
<article id="system-functions-fx">
<div class="heading-container"><h3 class="heading" id="system-functions-fx-header">Fix Definition</h3><div class="command">{R}←⎕FX Y</div></div>
<p><code>Y</code> is the representation form of a function or operator which may be:</p>
<ul>
<li>its canonical representation form similar to that produced by <code>⎕CR</code> except that redundant blanks are permitted other than within names and constants, and the first and last rows may start with a del symbol (<code>∇</code>).</li>
<li>its nested representation form similar to that produced by <code>⎕NR</code> except that redundant blanks are permitted other than within names and constants, and the first and last items may be del (<code>∇</code>) symbols.</li>
<li>its object representation form produced by <code>⎕OR</code>.</li>
<li>its vector representation form similar to that produced by <code>⎕VR</code> except that additional blanks are permitted other than within names and constants.</li>
</ul>
<p><code>⎕FX</code> attempts to create (fix) a function or operator in the workspace or current namespace from the definition given by <code>Y</code>.  <code>⎕IO</code> is an implicit argument of <code>⎕FX</code>. Note that <code>⎕FX</code> does not update the source of a scripted namespace, or of class or instance; the only two methods of updating the source of scripted objects is via the Editor, or by calling <code>⎕FIX</code>.</p>
<p>If the function or operator is successfully fixed, <code>R</code> is a simple character vector containing its name and the result is shy. Otherwise <code>R</code> is an integer scalar containing the (<code>⎕IO</code> dependent) index of the row of the canonical representation form in which the first error preventing its definition is detected. In this case the result <code>R</code> is <strong>not shy</strong>.</p>
<p>Functions and operators which are pendent, that is, in the state indicator without a suspension mark (<code>*</code>), retain their original definition until they complete, or are cleared from the state indicator.  All other occurrences of the function or operator assume the new definition.  The function or operator will fail to fix if it has the same name as an existing variable, or a visible label.</p>
</article>
<article id="system-functions-instances">
<div class="heading-container"><h3 class="heading" id="system-functions-instances-header">Instances</h3><div class="command">R←⎕INSTANCES Y</div></div>
<p><code>⎕INSTANCES</code> returns a list all the current instances of the Class specified by <code>Y</code>.</p>
<p><code>Y</code> must be a reference.</p>
<p>If <code>Y</code> is a reference to a Class, <code>R</code> is a vector of references to all existing Class Instances of  <code>Y</code>. Otherwise, <code>R</code> is empty.</p>
<p class="example">Examples</p>
<p>This example illustrates a simple inheritance tree or Class hierarchy. There are 3 Classes, namely:
<div class="highlight"><pre><span></span><code><span class="nv">Animal</span>
<span class="w">    </span><span class="nv">Bird</span><span class="w"> </span><span class="p">(</span><span class="nv">derived</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Animal</span><span class="p">)</span>
<span class="w">        </span><span class="nv">Parrot</span><span class="w"> </span><span class="p">(</span><span class="nv">derived</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Bird</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Animal</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Animal</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Bird</span><span class="bp">:</span><span class="w"> </span><span class="nv">Animal</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Bird</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Parrot</span><span class="bp">:</span><span class="w"> </span><span class="nv">Bird</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Parrot</span>
</code></pre></div></p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Eeyore</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">      </span><span class="nv">Robin</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Bird</span>
<span class="w">      </span><span class="nv">Polly</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Parrot</span>

<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w"> </span><span class="c1">#.[Parrot] </span>
<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Bird</span>
<span class="w"> </span><span class="c1">#.[Bird]  #.[Parrot] </span>
<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w"> </span><span class="c1">#.[Animal]  #.[Bird]  #.[Parrot] </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Eeyore</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'eeyore'</span>
<span class="w">      </span><span class="nv">Robin</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'robin'</span>
<span class="w">      </span><span class="nv">Polly</span><span class="na">.</span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'polly'</span>

<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w"> </span><span class="nv">polly</span>
<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Bird</span>
<span class="w"> </span><span class="nv">robin</span><span class="w">  </span><span class="nv">polly</span><span class="w"> </span>
<span class="w">      </span><span class="nf">⎕INSTANCES</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w"> </span><span class="nv">eeyore</span><span class="w">  </span><span class="nv">robin</span><span class="w">  </span><span class="nv">polly</span><span class="w"> </span>
</code></pre></div></p>
</article>
<article id="system-functions-io">
<div class="heading-container"><h3 class="heading" id="system-functions-io-header">Index Origin</h3><div class="command">⎕IO</div></div>
<p><code>⎕IO</code> determines the index of the first element of a non-empty vector.</p>
<p><code>⎕IO</code> may be assigned the value 0 or 1.  The value in a clear workspace is 1. <code>⎕IO</code> has Namespace scope.</p>
<p><code>⎕IO</code> is an implicit argument of any function derived from the Axis operator (<code>[K]</code>), of the monadic functions Fix (<code>⎕FX</code>), Grade Down (<code>⍒</code>), Grade Up (<code>⍋</code>), Index Generator (<code>⍳</code>), Roll (<code>?</code>), and of the dyadic functions Deal (<code>?</code>), Grade Down (<code>⍒</code>), Grade Up (<code>⍋</code>), Index (<code>⌷</code>), Index Of (<code>⍳</code>), Indexed Assignment, Indexing, Pick (<code>⊃</code>) and Transpose (<code>⍉</code>).</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span>
<span class="w">        </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">        </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span>
<span class="w">        </span><span class="o">⍳</span><span class="m">5</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>

<span class="w">        </span><span class="o">+</span><span class="na">/</span><span class="sr">[</span><span class="m">0</span><span class="sr">]</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴⍳</span><span class="m">6</span>
<span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">7</span>

<span class="w">        </span><span class="s1">'ABC'</span><span class="o">,</span><span class="sr">[</span><span class="m">¯.5</span><span class="sr">]</span><span class="s1">'='</span>
<span class="nv">ABC</span>
<span class="o">===</span>
</code></pre></div>
</article>
<section id="system-functions-and-variables-system-functions-a-z--json-convert">
<h3 id="system-functions-and-variables-system-functions-a-z--json-convert-header">JSON Convert</h3>
<article id="system-functions-json">
<div class="heading-container"><h4 class="heading" id="system-functions-json-header">JSON Convert</h4><div class="command">R←{X}⎕JSON Y</div></div>
<p>This function imports and exports data in <a href="https://www.json.org/json-en.html">JavaScript Object Notation</a> (JSON) Data Interchange Format<span class="footnote">IETF RFC 7159. The JavaScript Object Notation (JSON) Data Interchange Format is a widely supported, text based data interchange format for the portable representation of structured data; any application which conforms to the standard may exchange data with any other.</span>.</p>
<p>JSON supports a limited number of data types and there is not a direct correspondence between JSON and APL data structures. In particular:</p>
<ul>
<li>JSON does not support arrays with rank &gt;1.</li>
<li>JSON standard includes Boolean values true and false which are distinct from numeric values 1 and 0, and have no direct APL equivalent.</li>
<li>The <a href="https://json5.org/">JSON5</a> standard includes numeric constants <code>Infinity</code>, <code>-Infinity</code>, <code>NaN</code> and <code>-NaN</code> which have no direct APL equivalent.</li>
<li>JSON object members are named and these names might not be valid names in APL.</li>
</ul>
<p>These differences are catered for in various ways as discussed below.</p>
<p>If specified, <code>X</code> must be a numeric scalar with the value <code>0</code> (import JSON) or <code>1</code> (export JSON). If <code>X</code> is not specified and <code>Y</code> is a character array, <code>X</code> is assumed to be <code>0</code> (import); otherwise it is assumed to be 1 (export).</p>
<p>Although this system function was designed with an optional left argument, it is strongly recommended that the argument should always be used.</p>
<p>Other options for <code>⎕JSON</code> are <code>Format</code>, <code>Compact</code>, <code>Null</code>, <code>HighRank</code>, <code>Charset</code> and <code>Dialect</code> which are specified using the <a class="internal-link" href="#primitive-operators-variant">Section 2.4.29</a>, <code>⍠</code>. The Principal Option is <code>Format</code>.</p>
<p>The <code>Dialect</code> Variant option is either <code>'JSON'</code> (the default) or<code>'JSON5'</code>. The latter enables <a href="https://json5.org/">JSON5</a> extensions on import and export<span class="footnote">JSON5 ("JSON5 Data Interchange Format") is an extension of JSON that extends the subset of JavaScript syntax to include
optional trailing commas, unquoted object keys, single quoted and multiline strings, additional number formats, and
comments.</span>.</p>
<p>See also: <a class="internal-link" href="#system-functions-json-name-manglling">Section 4.6.72.2</a>.</p>
<details class="info">
<summary>JSON Import (<code>X</code> is <code>0</code>)</summary>
<p><code>Y</code> is a character vector or matrix in JSON format. There is an implied newline character between each row of a matrix.</p>
<p>The content of the result <code>R</code> depends upon the <code>Format</code> variant, which can be<code>'D'</code> (the default) or<code>'M'</code>. </p>
<p>If <code>Format</code> is<code>'D'</code> (which stands for "data") the JSON described by <code>Y</code> is converted to APL object(s) and <code>R</code> is an array or a namespace containing arrays and sub-namespaces.</p>
<ul>
<li>JSON objects are created as APL namespaces.</li>
<li>JSON null is converted to  the value specified by the <code>Null</code> variant, which may be either <code>⊂'null'</code> (the default) or <code>⎕NULL</code>.</li>
<li>JSON true and false and the JSON5 numeric constants <code>Infinity</code>, <code>-Infinity</code>, <code>NaN</code> and <code>-NaN</code> are converted to enclosed character vectors <code>⊂'true'</code>,<code>⊂'false'</code> and so forth.</li>
<li>If the JSON source contains object names which are not valid APL names they are converted to APL objects with mangled names. See <a class="internal-link" href="#system-functions-json-name-manglling">Section 4.6.72.2</a>. <code>7162⌶</code> can be used to obtain the original name. See <a href="#the-i-beam-operator-json-translate-name">JSON Translate Name</a></li>
</ul>
<p>If <code>Format</code> is<code>'M'</code> (which stands for "matrix") the result <code>R</code> is a matrix whose columns contain the following:
<table>
<tr>
<td>[;1]</td>
<td>depth</td>
</tr>
<tr>
<td>[;2]</td>
<td>name (for JSON object members)</td>
</tr>
<tr>
<td>[;3]</td>
<td>value</td>
</tr>
<tr>
<td>[;4]</td>
<td>JSON type (integer: see below)</td>
</tr>
</table></p>
<ul>
<li>The representation of null, true and false are the same as for<code>Format 'D'</code>.</li>
<li>Object names are reported as specified in the JSON text; they are not mangled as they are for<code>Format 'D'</code>.</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Object</td>
</tr>
<tr>
<td>2</td>
<td>Array</td>
</tr>
<tr>
<td>3</td>
<td>Numeric</td>
</tr>
<tr>
<td>4</td>
<td>String</td>
</tr>
<tr>
<td>5</td>
<td>Null</td>
</tr>
<tr>
<td>6</td>
<td>No APL equivalent (represented by character string)</td>
</tr>
<tr>
<td>7</td>
<td>JavaScript Object (export only)</td>
</tr>
</tbody>
</table>
<p><strong>Duplicate Names</strong></p>
<p>The JSON standard says that members of a JSON object should have unique names and that different implementations behave differently when there are duplicates. Dyalog handles duplicate names as follows:</p>
<ul>
<li>No error is generated.</li>
<li>For<code>Format 'D'</code>, the last member encountered is used and  all previous members with the same name are discarded.</li>
<li>For<code>Format 'M'</code> all duplicate members are recorded in the result matrix.</li>
</ul>
<p><strong>Examples</strong></p>
<div class="highlight"><pre><span></span><code><span class="m">18</span><span class="w"> </span><span class="m">19</span>
<span class="w">      </span><span class="nv">JSON</span>
<span class="kt">{</span><span class="w">                  </span>
<span class="w">  </span><span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span><span class="w">           </span>
<span class="w">    </span><span class="s2">"b"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span><span class="w">         </span>
<span class="w">      </span><span class="s2">"string 1"</span><span class="o">,</span>
<span class="w">      </span><span class="s2">"string 2"</span>
<span class="w">    </span><span class="sr">]</span><span class="o">,</span>
<span class="w">    </span><span class="s2">"c"</span><span class="bp">:</span><span class="w"> </span><span class="nv">true</span><span class="o">,</span><span class="w">     </span>
<span class="w">    </span><span class="s2">"d"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span><span class="w">         </span>
<span class="w">      </span><span class="s2">"e"</span><span class="bp">:</span><span class="w"> </span><span class="nv">false</span><span class="o">,</span><span class="w">  </span>
<span class="w">      </span><span class="s2">"f⍺"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span><span class="w">       </span>
<span class="w">        </span><span class="s2">"string 3"</span><span class="o">,</span>
<span class="w">        </span><span class="m">123</span><span class="o">,</span><span class="w">       </span>
<span class="w">        </span><span class="m">1000.2</span><span class="o">,</span><span class="w">    </span>
<span class="w">        </span><span class="nv">null</span><span class="w">       </span>
<span class="w">      </span><span class="sr">]</span><span class="w">            </span>
<span class="w">    </span><span class="kt">}</span><span class="w">              </span>
<span class="w">  </span><span class="kt">}</span><span class="w">                </span>
<span class="kt">}</span>
</code></pre></div>
<details class="info">
<summary>Import as Data (<code>Format 'D'</code>)</summary>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">j</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">JSON</span>
<span class="w">      </span><span class="nv">j</span>
<span class="c1">#.[JSON object]</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">9</span>
<span class="nv">a</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span>
<span class="nv">b</span>
<span class="nv">c</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nv">b</span>
<span class="err">┌────────┬────────┐</span>
<span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">2</span><span class="err">│</span>
<span class="err">└────────┴────────┘</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nv">c</span>
<span class="err">┌────┐</span>
<span class="err">│</span><span class="nv">true</span><span class="err">│</span>
<span class="err">└────┘</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">9</span>
<span class="nv">d</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nv">d</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="c1">⍝ Note that f⍺ is an invalid APL name</span>
<span class="nv">e</span><span class="w">       </span>
<span class="nv">⍙f⍙9082⍙</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nv">d</span><span class="na">.</span><span class="nv">e</span>
<span class="err">┌─────┐</span>
<span class="err">│</span><span class="nv">false</span><span class="err">│</span>
<span class="err">└─────┘</span>
<span class="w">      </span><span class="nv">j</span><span class="na">.</span><span class="nv">a</span><span class="na">.</span><span class="nv">d</span><span class="na">.</span><span class="nv">⍙f⍙9082⍙</span>
<span class="err">┌────────┬───┬──────┬──────┐</span>
<span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">123</span><span class="err">│</span><span class="m">1000.2</span><span class="err">│┌────┐│</span>
<span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">      </span><span class="err">││</span><span class="nv">null</span><span class="err">││</span>
<span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">      </span><span class="err">│└────┘│</span>
<span class="err">└────────┴───┴──────┴──────┘</span>
</code></pre></div>
<p><strong>Performance Warning</strong></p>
<p>Extracting part of a namespace created by <code>⎕JSON</code> can lead to poor application performance. For example, if you are only interested in an array of records contained as child namespaces that are nested within data that you receive via <code>⎕JSON</code>, you might write something like:</p>
<div class="highlight"><pre><span></span><code><span class="nv">data</span><span class="kd">←</span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊃</span><span class="nf">⎕NGET</span><span class="w"> </span><span class="nv">filename</span><span class="p">)</span><span class="na">.</span><span class="nv">records</span>
</code></pre></div>
<p>This expression actually creates a temporary namespace <code>(0 ⎕JSON ⊃⎕NGET filename)</code> (lets call it <code>temp</code> for now), extracts the sub-namespace <code>records</code>, and then discards its parent namespace <code>temp</code>. The result <code>data</code> however contains pointers to <code>temp</code>, so although it is not visible (it is unnamed), it is retained internally in the workspace. This can lead to poor performance due to the behaviour of the memory manager in this situation. This issue will be resolved in the next release of Dyalog. In the meantime, the situation can be avoided by assigning a name to the  top-level namespace. Instead of the expression above, you could write:</p>
<div class="highlight"><pre><span></span><code><span class="nv">dataset</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊃</span><span class="nf">⎕NGET</span><span class="w"> </span><span class="nv">filename</span>
<span class="nv">data</span><span class="kd">←</span><span class="nv">dataset</span><span class="na">.</span><span class="nv">records</span>
</code></pre></div>
<p>Giving a name to the top-level namespace effectively avoids the performance issue.</p>
</details>
<details class="info">
<summary>Import as Matrix (<code>Format 'M'</code>)</summary>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'M'</span><span class="p">)</span><span class="nv">JSON</span>
<span class="err">┌─┬──┬────────┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">a</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="nv">b</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">2</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">1</span><span class="err">│</span><span class="m">4</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">2</span><span class="err">│</span><span class="m">4</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="nv">c</span><span class="w"> </span><span class="err">│┌────┐</span><span class="w">  </span><span class="err">│</span><span class="m">6</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">││</span><span class="nv">true</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│└────┘</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="nv">d</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="nv">e</span><span class="w"> </span><span class="err">│┌─────┐</span><span class="w"> </span><span class="err">│</span><span class="m">6</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">││</span><span class="nv">false</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="nv">f</span><span class="bp">⍺</span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="m">2</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="nv">string</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">4</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">123</span><span class="w">     </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="m">1000.2</span><span class="w">  </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">├─┼──┼────────┼─┤</span>
<span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="w">  </span><span class="err">│┌────┐</span><span class="w">  </span><span class="err">│</span><span class="m">5</span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">││</span><span class="nv">null</span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">  </span><span class="err">│└────┘</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">└─┴──┴────────┴─┘</span>
</code></pre></div>
</details>
</details>
<details class="info">
<summary>JSON Export (<code>X</code> is <code>1</code>)</summary>
<p><code>Y</code> is the data to be exported as JSON and may be an array, a namespace or a matrix representation of JSON such as would have been produced by JSON Import with <code>Format 'M'</code>.<code>Y</code> is interpreted according to the <code>Format</code> variant which may be<code>'D'</code> (the default) or<code>'M'</code>.</p>
<p><code>⎕JSON</code> will signal <code>DOMAIN ERROR</code> if <code>Y</code> is incompatible with the specified (or implied) value of <code>Format</code>.</p>
<p>If <code>Format</code> is<code>M</code>, the data values in <code>Y[;3]</code> must correspond precisely with the JSON types specified in<code>Y[;4]</code>as specified in the following table.</p>
<table>
<thead>
<tr>
<th><code>Y[;4]</code> (Type)</th>
<th><code>Y[;3]</code> (Value)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Empty array</td>
</tr>
<tr>
<td>2</td>
<td>Empty array</td>
</tr>
<tr>
<td>3</td>
<td>Numeric scalar</td>
</tr>
<tr>
<td>4</td>
<td>Character vector</td>
</tr>
<tr>
<td>5</td>
<td>Null</td>
</tr>
<tr>
<td>6</td>
<td>Enclosed character vector</td>
</tr>
<tr>
<td>7</td>
<td>Enclose character vector</td>
</tr>
</tbody>
</table>
<p><code>R</code> is a character vector whose content depends upon the value of the <code>Compact</code> variant.</p>
<table>
<thead>
<tr>
<th>Compact</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>The JSON text is padded with spaces and new lines for readability.</td>
</tr>
<tr>
<td>1</td>
<td>The JSON text is compacted into its minimal form.</td>
</tr>
</tbody>
</table>
<p>The <code>Charset</code> variant option may be used to restrict the output to ASCII characters. </p>
<table>
<thead>
<tr>
<th>Charset</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Unicode'</td>
<td>All Unicode characters in <code>Y</code> are passed unchanged in the result <code>R</code>.</td>
</tr>
<tr>
<td>'ASCII'</td>
<td>Non-ASCII characters are converted to an encoded string of the form "\uNNNN" where "NNNN" is the upper-case hexadecimal value of the character in the Unicode system. For example, é (e-acute) is converted to "\u00E9". Furthermore, if the Dialect is JSON5, values less than hex 100 are converted to the form \xNN.</td>
</tr>
</tbody>
</table>
<p>The <code>HighRank</code> variant option may be used to instruct <code>⎕JSON</code> to pre-process higher rank arrays into a form that can be represented by JSON. Note that if necessary, the transformation is applied recursively throughout the high-rank array(s) specified by <code>Y</code>.</p>
<table>
<thead>
<tr>
<th>HighRank</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Split'</td>
<td>High rank data is split into nested vectors.</td>
</tr>
<tr>
<td>'Error'</td>
<td>Higher rank data is rejected (<code>DOMAIN ERROR</code>)</td>
</tr>
</tbody>
</table>
<p>The name of any namespace member that begins with <code>⍙</code> and otherwise conforms to the conversion format used for JSON object names will be demangled.</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">j</span><span class="w">             </span><span class="c1">⍝ See above</span>
<span class="c1">#.[JSON object]</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">JS</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">j</span>
<span class="m">94</span>
<span class="w">      </span><span class="nv">JS</span>
<span class="kt">{</span><span class="s2">"a"</span><span class="bp">:</span><span class="kt">{</span><span class="s2">"b"</span><span class="bp">:</span><span class="sr">[</span><span class="s2">"string 1"</span><span class="o">,</span><span class="s2">"string 2"</span><span class="sr">]</span><span class="o">,</span><span class="s2">"c"</span><span class="bp">:</span><span class="nv">true</span><span class="o">,</span><span class="s2">"d"</span><span class="bp">:</span><span class="kt">{</span><span class="s2">"e"</span><span class="bp">:</span><span class="nv">false</span><span class="o">,</span><span class="s2">"f⍺"</span><span class="bp">:</span><span class="sr">[</span><span class="s2">"string 3"</span><span class="o">,</span><span class="m">123</span><span class="o">,</span><span class="m">1000.2</span><span class="o">,</span><span class="nv">null</span><span class="sr">]</span><span class="kt">}}}</span>

<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'Compact'</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="nv">j</span>

<span class="kt">{</span>
<span class="w">    </span><span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">        </span><span class="s2">"b"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">            </span><span class="s2">"string 1"</span><span class="o">,</span>
<span class="w">            </span><span class="s2">"string 2"</span>
<span class="w">        </span><span class="sr">]</span><span class="o">,</span>
<span class="w">        </span><span class="s2">"c"</span><span class="bp">:</span><span class="w"> </span><span class="nv">true</span><span class="o">,</span>
<span class="w">        </span><span class="s2">"d"</span><span class="bp">:</span><span class="w"> </span><span class="kt">{</span>
<span class="w">            </span><span class="s2">"e"</span><span class="bp">:</span><span class="w"> </span><span class="nv">false</span><span class="o">,</span>
<span class="w">            </span><span class="s2">"f⍺"</span><span class="bp">:</span><span class="w"> </span><span class="sr">[</span>
<span class="w">                </span><span class="s2">"string 3"</span><span class="o">,</span>
<span class="w">                </span><span class="m">123</span><span class="o">,</span>
<span class="w">                </span><span class="m">1000.2</span><span class="o">,</span>
<span class="w">                </span><span class="nv">null</span>
<span class="w">            </span><span class="sr">]</span>
<span class="w">        </span><span class="kt">}</span>
<span class="w">    </span><span class="kt">}</span>
<span class="kt">}</span>
</code></pre></div>
<p>If there are any mis-matches between the values in <code>Y[;3]</code> and the types in <code>Y[;4]</code>, <code>⎕JSON</code> will signal <code>DOMAIN ERROR</code> and report the first row where there is a mis-match (<code>⎕IO</code> sensitive) as illustrated in the following example.</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">M</span><span class="kd">←</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)</span><span class="s1">'{"values": [ 75, 300 ]}'</span>
<span class="w">      </span><span class="nv">M</span>
<span class="err">┌─┬──────┬───┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">values</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">2</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="m">75</span><span class="w"> </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="m">300</span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">└─┴──────┴───┴─┘</span>

<span class="w">      </span><span class="nv">M</span><span class="sr">[</span><span class="m">3</span><span class="sr">;</span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'75'</span><span class="w"> </span><span class="c1">⍝ character not numeric</span>

<span class="w">      </span><span class="nv">M</span><span class="w">            </span><span class="c1">⍝ but looks the same as before</span>

<span class="err">┌─┬──────┬───┬─┐</span>
<span class="err">│</span><span class="m">0</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">1</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">1</span><span class="err">│</span><span class="nv">values</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="m">2</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="m">75</span><span class="w"> </span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">├─┼──────┼───┼─┤</span>
<span class="err">│</span><span class="m">2</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="m">300</span><span class="err">│</span><span class="m">3</span><span class="err">│</span>
<span class="err">└─┴──────┴───┴─┘</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)</span><span class="nv">M</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Value</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">specified</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">row</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'Format'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)</span><span class="nv">M</span>
<span class="w">        </span><span class="o">∧</span>
</code></pre></div>
<p><strong>Charset Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ns</span><span class="kd">←</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="nv">d</span><span class="err">é</span><span class="kd">←</span><span class="s1">'DÉ'</span>
<span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="nv">d</span><span class="err">é</span>
<span class="nv">D</span><span class="err">É</span>
<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">ns</span>
<span class="kt">{</span><span class="s2">"dé"</span><span class="bp">:</span><span class="s2">"DÉ"</span><span class="kt">}</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'Charset'</span><span class="w"> </span><span class="s1">'ASCII'</span><span class="p">)</span><span class="nv">ns</span>
<span class="kt">{</span><span class="s2">"d\u00E9"</span><span class="bp">:</span><span class="s2">"D\u00C9"</span><span class="kt">}</span>
</code></pre></div>
<p><strong>High Rank Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">d</span>
<span class="err">┌─────┬─────────────────────────┐</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="err">│</span><span class="nv">ABC</span><span class="w">                      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w">  </span><span class="err">│</span><span class="nv">DEF</span><span class="w">                      </span><span class="err">│</span>
<span class="err">├─────┼─────────────────────────┤</span>
<span class="err">│</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="err">│</span><span class="m">1</span><span class="w">            </span><span class="m">0.5</span><span class="w">         </span><span class="err">│</span>
<span class="err">│</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="err">│</span><span class="m">0.3333333333</span><span class="w"> </span><span class="m">0.25</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="m">0.2</span><span class="w">          </span><span class="m">0.1666666667</span><span class="err">│</span>
<span class="err">│</span><span class="w">     </span><span class="err">│</span><span class="m">0.1428571429</span><span class="w"> </span><span class="m">0.125</span><span class="w">       </span><span class="err">│</span>
<span class="err">└─────┴─────────────────────────┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">d</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">JSON</span><span class="w"> </span><span class="nv">export</span><span class="bp">:</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">converted</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕IO</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">d</span>
<span class="w">        </span><span class="o">∧</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕JSON</span><span class="na">⍠</span><span class="s1">'HighRank'</span><span class="w"> </span><span class="s1">'Split'</span><span class="p">)</span><span class="w"> </span><span class="nv">d</span>
<span class="sr">[[[[</span><span class="m">1</span><span class="o">,</span><span class="m">2</span><span class="sr">]</span><span class="o">,</span><span class="s2">"AB"</span><span class="sr">]</span><span class="o">,</span><span class="sr">[</span><span class="s2">"ABC"</span><span class="o">,</span><span class="s2">"DEF"</span><span class="sr">]]</span><span class="o">,</span><span class="sr">[[[</span><span class="m">1</span><span class="o">,</span><span class="m">2</span><span class="o">,</span><span class="m">3</span><span class="sr">]</span><span class="o">,</span><span class="sr">[</span><span class="m">4</span><span class="o">,</span><span class="m">5</span><span class="o">,</span><span class="m">6</span><span class="sr">]]</span><span class="o">,</span><span class="na">...</span>
</code></pre></div>
<details class="info">
<summary>Raw Text</summary>
<p>An enclosed character vector is inserted into the result of JSON export as raw text. This feature may be used to export special JSON values such as <code>null</code>, <code>true</code> and <code>false</code>. Without the extra enclosure, the character vectors are exported as strings:</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="s1">'null'</span><span class="w"> </span><span class="s1">'true'</span><span class="w"> </span><span class="s1">'false'</span>
<span class="sr">[</span><span class="s2">"null"</span><span class="o">,</span><span class="s2">"true"</span><span class="o">,</span><span class="s2">"false"</span><span class="sr">]</span>
<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊂</span><span class="na">¨</span><span class="s1">'null'</span><span class="w"> </span><span class="s1">'true'</span><span class="w"> </span><span class="s1">'false'</span>
<span class="sr">[</span><span class="nv">null</span><span class="o">,</span><span class="nv">true</span><span class="o">,</span><span class="nv">false</span><span class="sr">]</span>
</code></pre></div>
<p>The same mechanism may be used to inject any raw text, although unless this is valid JSON it cannot then be re-imported.</p>
<p>The following example illustrates how JavaScript objects may be exported. In the example, the object is a JavaScript function which is specified by the contents of an enclosed character vector.</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'Slider'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">Slider</span><span class="na">.</span><span class="nv">range</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'true'</span><span class="w">         </span><span class="c1">⍝ Note the ⊂</span>
<span class="w">      </span><span class="nv">Slider</span><span class="na">.</span><span class="nv">min</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="nv">Slider</span><span class="na">.</span><span class="nv">max</span><span class="kd">←</span><span class="m">500</span>
<span class="w">      </span><span class="nv">Slider</span><span class="na">.</span><span class="nv">values</span><span class="kd">←</span><span class="m">75</span><span class="w"> </span><span class="m">300</span>

<span class="w">      </span><span class="nv">fn1</span><span class="kd">←</span><span class="s1">' function( event, ui ) {'</span>
<span class="w">      </span><span class="nv">fn2</span><span class="kd">←</span><span class="s1">'$( "#amount" ).val( "$" + ui.values[ 0 ] +'</span>
<span class="w">      </span><span class="nv">fn2</span><span class="o">,</span><span class="kd">←</span><span class="s1">' " - $" + ui.values[ 1 ] );}'</span>

<span class="w">      </span><span class="nv">Slider</span><span class="na">.</span><span class="nv">slide</span><span class="kd">←</span><span class="o">,</span><span class="na">/</span><span class="nv">fn1</span><span class="w"> </span><span class="nv">fn2</span><span class="w"> </span><span class="c1">⍝ Enclosed character vec</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">JS</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">Slider</span>
<span class="m">159</span>
<span class="w">      </span><span class="nv">JS</span>
<span class="kt">{</span><span class="s2">"max"</span><span class="bp">:</span><span class="m">500</span><span class="o">,</span><span class="s2">"min"</span><span class="bp">:</span><span class="m">0</span><span class="o">,</span><span class="s2">"range"</span><span class="bp">:</span><span class="nv">true</span><span class="o">,</span><span class="s2">"slide"</span><span class="bp">:</span><span class="w"> </span><span class="nv">function</span><span class="p">(</span><span class="w"> </span><span class="nv">event</span><span class="o">,</span><span class="w"> </span><span class="nv">ui</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="kt">{</span><span class="err">$</span><span class="p">(</span><span class="w"> </span><span class="na">\</span><span class="s2">"#amount\"</span><span class="w"> </span><span class="p">)</span><span class="na">.</span><span class="nv">val</span><span class="p">(</span><span class="w"> </span><span class="na">\</span><span class="s2">"$\"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">ui</span><span class="na">.</span><span class="nv">values</span><span class="sr">[</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="sr">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="na">\</span><span class="s2">" - $\"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">ui</span><span class="na">.</span><span class="nv">values</span><span class="sr">[</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="sr">]</span><span class="p">)</span><span class="sr">;</span><span class="kt">}</span><span class="o">,</span><span class="s2">"values"</span><span class="bp">:</span><span class="sr">[</span><span class="m">75</span><span class="o">,</span><span class="m">300</span><span class="sr">]</span><span class="kt">}</span>
</code></pre></div>
</details>
<details class="info">
<summary>Wrappers</summary>
<p>A wrapper is an enclosed vector of the form:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="nv">code</span><span class="w"> </span><span class="nv">special</span>
</code></pre></div>
<p>The nature of the <code>special</code> data structure is identified within the wrapper by a leading numeric code. Code 1 is used to identify JSON values such as <code>null</code>, <code>true</code> and <code>false</code>. Codes 2, 3 and 4 are used to identify different forms of datasets.</p>
<p>This wrapper mechanism has been chosen to identify special treatment because a scalar enclosure cannot be represented in JSON/JavaScript.</p>
<p>A wrapper may be specified directly in the right argument to <code>⎕JSON</code> and/or as part of the array structure specified by the right argument, as a sub-array or in a namespace. This allows a special array to be processed appropriately as part of a general data structure that is to be rendered in JSON notation.</p>
<p><strong>Wrappers for special JSON values</strong></p>
<p>Wrappers may be used to export JSON special values such as <code>null</code>, <code>true</code> and <code>false</code> using code 1. This mechanism is supplementary to the use of enclosed character vectors. See <strong>RawText</strong> above.</p>
<p><strong>Example</strong></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="o">⊂</span><span class="na">¨</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="s1">'null'</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="s1">'true'</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="s1">'false'</span><span class="p">)</span>
<span class="sr">[</span><span class="nv">null</span><span class="o">,</span><span class="nv">true</span><span class="o">,</span><span class="nv">false</span><span class="sr">]</span>
</code></pre></div>
<p><strong>Datasets</strong></p>
<p>The term dataset is used here to mean a collection of data, usually presented in tabular form. Each named column represents a particular variable. Each row corresponds to a given member of the dataset in question. It lists values for each of the variables, such as height and weight of an object.</p>
<p>Datasets are often represented in APL as a collection of variables.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Fields</span><span class="kd">←</span><span class="s1">'Item'</span><span class="w"> </span><span class="s1">'Price'</span><span class="w"> </span><span class="s1">'Qty'</span>
<span class="w">      </span><span class="nv">Items</span><span class="kd">←</span><span class="s1">'Knife'</span><span class="w"> </span><span class="s1">'Fork'</span>
<span class="w">      </span><span class="nv">Price</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="nv">Qty</span><span class="kd">←</span><span class="m">23</span><span class="w"> </span><span class="m">45</span>
</code></pre></div>
<p>As an aside, note that using this scheme each variable represents an inverted index into the dataset and enables rapid searches.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">Price</span><span class="o">&lt;</span><span class="m">4</span><span class="p">)</span><span class="na">/</span><span class="nv">Items</span>
<span class="err">┌─────┐</span>
<span class="err">│</span><span class="nv">Knife</span><span class="err">│</span>
<span class="err">└─────┘</span>
</code></pre></div>
<p>A conventional way to represent this dataset is as a matrix:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Fields</span><span class="o">⍪⍉↑</span><span class="w"> </span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span>

<span class="err">┌─────┬─────┬───┐</span>
<span class="err">│</span><span class="nv">Item</span><span class="w"> </span><span class="err">│</span><span class="nv">Price</span><span class="err">│</span><span class="nv">Qty</span><span class="err">│</span>
<span class="err">├─────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Knife</span><span class="err">│</span><span class="w">   </span><span class="m">3</span><span class="w"> </span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="err">│</span>
<span class="err">├─────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Fork</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="m">4</span><span class="w"> </span><span class="err">│</span><span class="m">45</span><span class="w"> </span><span class="err">│</span>
<span class="err">└─────┴─────┴───┘</span>
</code></pre></div>
<p>Another is as a 2-item vector containing the names of the fields and a matrix of their values:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">Fields</span><span class="w"> </span><span class="p">(</span><span class="o">⍉↑</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">))</span>

<span class="err">┌────────────────┬────────────┐</span>
<span class="err">│┌────┬─────┬───┐│┌─────┬─┬──┐│</span>
<span class="err">││</span><span class="nv">Item</span><span class="err">│</span><span class="nv">Price</span><span class="err">│</span><span class="nv">Qty</span><span class="err">│││</span><span class="nv">Knife</span><span class="err">│</span><span class="m">3</span><span class="err">│</span><span class="m">23</span><span class="err">││</span>
<span class="err">│└────┴─────┴───┘│├─────┼─┼──┤│</span>
<span class="err">│</span><span class="w">                </span><span class="err">││</span><span class="nv">Fork</span><span class="w"> </span><span class="err">│</span><span class="m">4</span><span class="err">│</span><span class="m">45</span><span class="err">││</span>
<span class="err">│</span><span class="w">                </span><span class="err">│└─────┴─┴──┘│</span>
<span class="err">└────────────────┴────────────┘</span>
</code></pre></div>
<p>A third way retains the inverted nature of the data structure, storing the values as a vector. The advantage of this structure is that it consumes significantly less memory compared to the matrix forms, because numeric columns are stored as simple numeric vectors.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nv">Fields</span><span class="w"> </span><span class="p">(</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">))</span>

<span class="err">┌────────────────┬────────────────────────┐</span>
<span class="err">│┌────┬─────┬───┐│┌────────────┬───┬─────┐│</span>
<span class="err">││</span><span class="nv">Item</span><span class="err">│</span><span class="nv">Price</span><span class="err">│</span><span class="nv">Qty</span><span class="err">│││┌─────┬────┐│</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="m">45</span><span class="err">││</span>
<span class="err">│└────┴─────┴───┘│││</span><span class="nv">Knife</span><span class="err">│</span><span class="nv">Fork</span><span class="err">││</span><span class="w">   </span><span class="err">│</span><span class="w">     </span><span class="err">││</span>
<span class="err">│</span><span class="w">                </span><span class="err">││└─────┴────┘│</span><span class="w">   </span><span class="err">│</span><span class="w">     </span><span class="err">││</span>
<span class="err">│</span><span class="w">                </span><span class="err">│└────────────┴───┴─────┘│</span>
<span class="err">└────────────────┴────────────────────────┘</span>
</code></pre></div>
<p>In JSON, these three data structures are all expressed as follows:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"Item"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Knife"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"Price"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"Qty"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">"Item"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fork"</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"Price"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">        </span><span class="nt">"Qty"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p><div class="example-block" markdown="1">
<strong>Examples</strong></div></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Fields</span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">↑</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span>

<span class="err">┌─────┬─────┬───┐</span>
<span class="err">│</span><span class="nv">Item</span><span class="w"> </span><span class="err">│</span><span class="nv">Price</span><span class="err">│</span><span class="nv">Qty</span><span class="err">│</span>
<span class="err">├─────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Knife</span><span class="err">│</span><span class="m">3</span><span class="w">    </span><span class="err">│</span><span class="m">23</span><span class="w"> </span><span class="err">│</span>
<span class="err">├─────┼─────┼───┤</span>
<span class="err">│</span><span class="nv">Fork</span><span class="w"> </span><span class="err">│</span><span class="m">4</span><span class="w">    </span><span class="err">│</span><span class="m">45</span><span class="w"> </span><span class="err">│</span>
<span class="err">└─────┴─────┴───┘</span>
<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊂</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">(</span><span class="nv">Fields</span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">↑</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span>
<span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">3</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="o">,</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Fork"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">4</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">45</span><span class="kt">}</span><span class="sr">]</span>
</code></pre></div>
<p>Note that if you omit the wrapper the operation fails:</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">Fields</span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">↑</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span>

<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">JSON</span><span class="w"> </span><span class="nv">export</span><span class="bp">:</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">converted</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕IO</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">Fields</span><span class="o">,</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">↑</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span>
<span class="o">∧</span>
</code></pre></div>
<div class="example-block" markdown="1">
<strong>Further Examples</strong></div></p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊂</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">((</span><span class="o">↑</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span><span class="nv">Fields</span><span class="p">)</span>
<span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">3</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="o">,</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Fork"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">4</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">45</span><span class="kt">}</span><span class="sr">]</span>

<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="o">⊂</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">((</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span><span class="nv">Fields</span><span class="p">)</span>
<span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">3</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="o">,</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Fork"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">4</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">45</span><span class="kt">}</span><span class="sr">]</span>
</code></pre></div>
<p>Note that if you omit the wrapper, the operation generates a different result.</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="p">((</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span><span class="nv">Fields</span><span class="p">)</span>
<span class="sr">[[[</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Fork"</span><span class="sr">]</span><span class="o">,</span><span class="sr">[</span><span class="m">3</span><span class="o">,</span><span class="m">4</span><span class="sr">]</span><span class="o">,</span><span class="sr">[</span><span class="m">23</span><span class="o">,</span><span class="m">45</span><span class="sr">]]</span><span class="o">,</span><span class="sr">[</span><span class="s2">"Item"</span><span class="o">,</span><span class="s2">"Price"</span><span class="o">,</span><span class="s2">"Qty"</span><span class="sr">]]</span>
</code></pre></div>
</p>
<p><strong>Selection</strong></p>
<p>For codes 2, 3 and 4 the extension also provides the facility to optionally select elements of the dataset, so the array may contain 2, 3 or 4 items:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊂</span><span class="p">(</span><span class="nv">code</span><span class="w"> </span><span class="nv">dataset</span><span class="w"> </span><span class="kt">{</span><span class="nv">records</span><span class="kt">}</span><span class="w"> </span><span class="kt">{</span><span class="nv">fields</span><span class="kt">}</span><span class="p">)</span>
</code></pre></div>
<p>where records and fields are integer indices that select which fields and which records are to be exported. The following example selects the first record and the first and third fields (Items and Qty)</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕JSON</span><span class="o">⊂</span><span class="m">4</span><span class="w"> </span><span class="p">((</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)</span><span class="nv">Fields</span><span class="p">)</span><span class="m">1</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
<span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="sr">]</span>
</code></pre></div>
<p><strong>Namespaces and Sub-Arrays</strong></p>
<p>Wrappers in namespaces and sub-arrays are recognised for special treatment.</p>
<p><div class="example-block" markdown="1">
<strong>Example</strong></div></p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="nv">Items</span><span class="kd">←</span><span class="s1">'Fork'</span><span class="w"> </span><span class="s1">'Knife'</span>
<span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="nv">Price</span><span class="kd">←</span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="nv">Qty</span><span class="kd">←</span><span class="m">23</span><span class="w"> </span><span class="m">45</span>
<span class="w">      </span><span class="nv">ns</span><span class="na">.</span><span class="p">(</span><span class="nv">ds</span><span class="kd">←</span><span class="o">⊂</span><span class="m">4</span><span class="p">(</span><span class="o">⌽</span><span class="p">(</span><span class="s1">'Item'</span><span class="w"> </span><span class="s1">'Price'</span><span class="w"> </span><span class="s1">'Qty'</span><span class="p">)(</span><span class="nv">Items</span><span class="w"> </span><span class="nv">Price</span><span class="w"> </span><span class="nv">Qty</span><span class="p">)))</span>
<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">ns</span>
<span class="kt">{</span><span class="s2">"Items"</span><span class="bp">:</span><span class="sr">[</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Fork"</span><span class="sr">]</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="sr">[</span><span class="m">3</span><span class="o">,</span><span class="m">4</span><span class="sr">]</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="sr">[</span><span class="m">23</span><span class="o">,</span><span class="m">45</span><span class="sr">]</span><span class="o">,</span><span class="s2">"ds"</span><span class="bp">:</span><span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">3</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="o">,</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Fork"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">4</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">45</span><span class="kt">}</span><span class="sr">]</span><span class="kt">}</span>

<span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="s1">'the'</span><span class="w"> </span><span class="s1">'answer'</span><span class="w"> </span><span class="s1">'is'</span><span class="w"> </span><span class="m">42</span>
<span class="w">      </span><span class="nv">a</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="nv">ns</span><span class="na">.</span><span class="nv">ds</span>
<span class="w">      </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nv">a</span>
<span class="sr">[</span><span class="s2">"the"</span><span class="o">,</span><span class="s2">"answer"</span><span class="o">,</span><span class="sr">[</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Knife"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">3</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">23</span><span class="kt">}</span><span class="o">,</span><span class="kt">{</span><span class="s2">"Item"</span><span class="bp">:</span><span class="s2">"Fork"</span><span class="o">,</span><span class="s2">"Price"</span><span class="bp">:</span><span class="m">4</span><span class="o">,</span><span class="s2">"Qty"</span><span class="bp">:</span><span class="m">45</span><span class="kt">}</span><span class="sr">]</span><span class="o">,</span><span class="m">42</span><span class="sr">]</span>
</code></pre></div>
</p>
</details>
</details>
</article>
<article id="system-functions-json-name-manglling">
<h4 id="system-functions-json-name-manglling-header"> JSON Name Mangling</h4>
<p>When Dyalog converts from JSON to APL data, and a member of a JSON object has a name which is not a valid APL name, it is renamed.</p>
<p class="example">Example</p>
<p>In this example, the JSON describes an object containing two numeric items, one named <em>a</em> (which is a valid APL name) and the other named <em>2a</em> (which is not):
<div class="highlight"><pre><span></span><code><span class="kt">{</span><span class="s2">"a"</span><span class="bp">:</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="s2">"2a"</span><span class="bp">:</span><span class="w"> </span><span class="m">2</span><span class="kt">}</span>
</code></pre></div></p>
<p>When this JSON is imported as an APL namespace using <code>⎕JSON</code>, Dyalog converts the name <em>2a</em> to a valid APL name. The <em>name mangling</em> algorithm creates a name beginning with <code>⍙</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕JSON</span><span class="s1">'{"a": 1, "2a": 2}'</span><span class="p">)</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span>
<span class="nv">a</span><span class="w">  </span>
<span class="nv">⍙2a</span>
</code></pre></div></p>
<p>When Dyalog exports JSON it performs the reverse <em>name mangling</em>, so:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="w"> </span><span class="nf">⎕JSON</span><span class="s1">'{"a": 1, "2a": 2}'</span>
<span class="kt">{</span><span class="s2">"a"</span><span class="bp">:</span><span class="m">1</span><span class="o">,</span><span class="s2">"2a"</span><span class="bp">:</span><span class="m">2</span><span class="kt">}</span>
</code></pre></div></p>
<p>Should you need to create and decode these names directly,<code>7162⌶</code> provides the same name mangling and un-mangling operations. See <a class="internal-link" href="#the-i-beam-operator-json-translate-name">Section 3.2.61</a>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">0</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'2a'</span>
<span class="nv">⍙2a</span>
<span class="w">      </span><span class="m">1</span><span class="p">(</span><span class="m">7162</span><span class="na">⌶</span><span class="p">)</span><span class="s1">'⍙2a'</span>
<span class="m">2</span><span class="nv">a</span>
</code></pre></div></p>
</article>
</section>
<article id="system-functions-kl">
<div class="heading-container"><h3 class="heading" id="system-functions-kl-header">Key Label</h3><div class="command">R←⎕KL Y</div></div>
<p><code>Y</code> is a simple character vector or a vector of character vectors containing Input Codes for Keyboard Shortcuts. In the Classic Edition, keystrokes are associated with Keyboard Shortcuts by the Input Translate Table.</p>
<p><code>R</code> is a simple character vector or a vector of character vectors containing the labels associated with the codes.  If <code>Y</code> specifies codes that are not defined, the corresponding elements of <code>R</code> are the codes in <code>Y</code>.</p>
<p><code>⎕KL</code> provides the information required to build device-independent help messages into applications, particularly full-screen applications using <code>⎕SM</code> and <code>⎕SR</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕KL</span><span class="w"> </span><span class="s1">'RC'</span>
<span class="nv">Right</span>

<span class="w">      </span><span class="nf">⎕KL</span><span class="w"> </span><span class="s1">'ER'</span><span class="w"> </span><span class="s1">'EP'</span><span class="w"> </span><span class="s1">'QT'</span><span class="w"> </span><span class="s1">'F1'</span><span class="w"> </span><span class="s1">'F13'</span>
<span class="w">  </span><span class="nv">Enter</span><span class="w">  </span><span class="nv">Esc</span><span class="w">  </span><span class="nv">Shift</span><span class="o">+</span><span class="nv">Esc</span><span class="w">  </span><span class="nv">F1</span><span class="w">  </span><span class="nv">Shift</span><span class="o">+</span><span class="nv">F1</span>
</code></pre></div>
</article>
<article id="system-functions-lc">
<div class="heading-container"><h3 class="heading" id="system-functions-lc-header">Line Count</h3><div class="command">R←⎕LC</div></div>
<p>This is a simple vector of line numbers drawn from the state indicator (See <i>The State Indicator</i>).  The most recently activated line is shown first.  If a value corresponds to a defined function in the state indicator, it represents the current line number where the function is either suspended or pendent.</p>
<p>The value of <code>⎕LC</code> changes immediately upon completion of the most recently activated line, or upon completion of execution within <code>⍎</code> or <code>⎕</code>.  If a <code>⎕STOP</code> control is set, <code>⎕LC</code> identifies the line on which the stop control is effected.  In the case where a stop control is set on line 0 of a defined function, the first entry in <code>⎕LC</code> is 0 when the control is effected.</p>
<p>The value of <code>⎕LC</code> in a clear workspace is the null vector.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.TASK1[5]*</span>
<span class="o">⍎</span>
<span class="c1">#.BEGIN[3]</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕LC</span>
<span class="m">5</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>
<span class="w">      </span><span class="nf">⎕LC</span>
<span class="w"> </span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕LC</span>
<span class="m">0</span>
</code></pre></div></p>
</article>
<article id="system-functions-load">
<div class="heading-container"><h3 class="heading" id="system-functions-load-header">Load Workspace</h3><div class="command">⎕LOAD Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector containing the name of a file that contains a saved workspace. . If no file extension is given it is implied. See <i>WSEXT</i>.</p>
<p>If <code>Y</code> is ill-formed or does not identify a saved workspace or the user account does not have access permission to the workspace, a <code>DOMAIN ERROR</code> is reported.</p>
<p>Otherwise, the active workspace is replaced by the workspace identified in <code>Y</code>.  The active workspace is lost.  If the loaded workspace was saved by the <code>)SAVE</code> system command, the latent expression (<code>⎕LX</code>) is immediately executed, unless APL was invoked with the -x option.  If the loaded workspace was saved by the <code>⎕SAVE</code> system function, execution resumes from the point of exit from the <code>⎕SAVE</code> function, with the result of the <code>⎕SAVE</code> function being 0, running in the same namespace in which the <code>⎕SAVE</code> was executed.</p>
<p>The workspace identification and time-stamp when saved is not displayed.</p>
<p>If the workspace contains any GUI objects whose <code>Visible</code> property is 1, these objects will be displayed.  If the workspace contains a non-empty <code>⎕SM</code> but does not contain an SM GUI object, the form defined by <code>⎕SM</code> will be displayed in a window on the screen.</p>
<p>The system switches to the namespace that was the current namespace when the workspace was saved.</p>
</article>
<article id="system-functions-lock">
<div class="heading-container"><h3 class="heading" id="system-functions-lock-header">Lock Definition</h3><div class="command">{R}←{X}⎕LOCK Y</div></div>
<p><code>Y</code> must be a simple character scalar, or vector which is taken to be the name of a defined function or operator in the active workspace. <code>⎕LOCK</code> does not apply to dfns or derived functions.</p>
<p>The active referent to the name in the workspace is locked.  Stop, trace and monitor settings, established by the <code>⎕STOP</code>, <code>⎕TRACE</code> and <code>⎕MONITOR</code> functions, are cancelled.</p>
<p>The optional left argument <code>X</code> specifies to what extent the function code is hidden. <code>X</code> may be 1, 2 or 3 (the default) with the following meaning:</p>
<ol>
<li>The object may not be displayed and you may not obtain its character form using <code>⎕CR</code>, <code>⎕VR</code> or <code>⎕NR</code>.</li>
<li>If an error or exception occurs that would normally cause a suspension of execution within the locked function or operator, the state indicator is cut back to the statement that called it and the suspension is triggered there instead.</li>
<li>Both 1 and 2 apply. You can neither display the locked object nor suspend execution within it.</li>
</ol>
<p>Locks are additive, so that
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕LOCK</span><span class="s1">'FOO'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕LOCK</span><span class="s1">'FOO'</span><span class="w">     </span>
</code></pre></div></p>
<p>is equivalent to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">3</span><span class="w"> </span><span class="nf">⎕LOCK</span><span class="s1">'FOO'</span><span class="w"> </span>
</code></pre></div></p>
<p>The shy result <code>R</code> is the lock state (1,2 or 3) of <code>Y</code>.</p>
<p>A <code>DOMAIN ERROR</code> is reported if <code>Y</code> is ill-formed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FX</span><span class="s1">'r←foo'</span><span class="w"> </span><span class="s1">'r←10'</span>
<span class="w">      </span><span class="nf">⎕NR</span><span class="s1">'foo'</span><span class="w">  </span>
<span class="w">  </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="m">10</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕NR</span><span class="s1">'foo'</span>
<span class="m">2</span>
<span class="w">      </span><span class="nf">⎕LOCK</span><span class="s1">'foo'</span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕NR</span><span class="s1">'foo'</span>
<span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-lx">
<div class="heading-container"><h3 class="heading" id="system-functions-lx-header">Latent Expression</h3><div class="command">⎕LX</div></div>
<p>This may be a character vector or scalar representing an APL expression.  The expression is executed automatically when the workspace is loaded.  If APL is invoked using the  <code>-x</code>  flag, this execution is suppressed.</p>
<p>The value of <code>⎕LX</code> in a clear workspace is <code>''</code>. <code>⎕LX</code> has workspace scope.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕LX</span><span class="kd">←</span><span class="s1">'''GOOD MORNING PETE'''</span>

<span class="w">      </span><span class="p">)</span><span class="nv">SAVE</span><span class="w"> </span><span class="nv">GREETING</span>
<span class="nv">GREETING</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Tue</span><span class="w"> </span><span class="nv">Sep</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">49</span><span class="bp">:</span><span class="m">29</span><span class="w"> </span><span class="m">1998</span>

<span class="w">      </span><span class="p">)</span><span class="nv">LOAD</span><span class="w"> </span><span class="nv">GREETING</span>
<span class="na">./</span><span class="nv">GREETING</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Tue</span><span class="w"> </span><span class="nv">Sep</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">49</span><span class="bp">:</span><span class="m">29</span><span class="w"> </span><span class="m">1998</span>
<span class="nv">GOOD</span><span class="w"> </span><span class="nv">MORNING</span><span class="w"> </span><span class="nv">PETE</span>
</code></pre></div>
</article>
<article id="system-functions-map">
<div class="heading-container"><h3 class="heading" id="system-functions-map-header">Map File</h3><div class="command">R←{X}⎕MAP Y</div></div>
<p><code>⎕MAP</code> function associates a mapped file with an APL array in the workspace.</p>
<p>Two types of mapped files are supported; <em>APL</em> and <em>raw</em>. An <em>APL</em> mapped file contains the binary representation of a Dyalog APL array, including its header. A file of this type must be created using the  utility function <code>∆MPUT</code> (supplied in the <code>util</code> workspace). When you map an APL file, the rank, shape and data type of the array is obtained from the information on the file.</p>
<p>A <em>raw</em> mapped file is an arbitrary collection of bytes. When you map a raw file, you must specify the characteristics of the APL array to be associated with this data. In particular, the data type and its shape.</p>
<p>The type of mapping is determined by the presence (raw) or absence (APL) of the left argument to <code>⎕MAP</code>.</p>
<p>The right argument <code>Y</code> specifies the name of the file to be mapped and, optionally, the access type and a start byte in the file. <code>Y</code> may be a simple character vector, or a 2 or 3-element nested vector containing:</p>
<ol>
<li>file name (character scalar/vector)</li>
<li>access code (character scalar/vector) : one of : <code>'R'</code> or <code>'r'</code> (read-only access), <code>'W'</code> or <code>'w'</code> (read-write access). If not specified, the file is mapped  read-only.</li>
<li>start byte offset (integer scalar/vector). This is only applicable for read-only access and is not supported for read-write access. It must be a multiple of the word size (4 on 32-bit systems, 8 on 64-bit systems). The default is 0.</li>
</ol>
<p>If you map a file with read-only access you may modify the corresponding array in the workspace, however your changes are not written back to the file.</p>
<p>If <code>X</code> is specified, it defines the type and shape to be associated with <em>raw</em> data on file. <code>X</code> must be an integer scalar or vector. The first item of <code>X</code> specifies the data type and must be one of the following values:</p>
<table>
<tbody>
<tr>
<td>Classic Edition</td>
<td>11, 82, 83, 163, 323 or 645</td>
</tr>
<tr>
<td>Unicode Edition</td>
<td>11, 80, 83, 160, 163, 320, 323 or 645</td>
</tr>
</tbody>
</table>
<p>The values are more fully explained in <a class="internal-link" href="#system-functions-data-representation-monadic">Section 4.6.32</a>.</p>
<p>Following items determine the shape of the mapped array. A value of <code>¯1</code> on any (but normally the first) axis in the shape is replaced by the system to mean: read as many complete records from the file as possible. Only one axis may be specified in this way. Note that if    <code>X</code> is a singleton, the data on the file is mapped as a scalar and only the first value on the file is accessible.</p>
<p>If no left argument is given, file is assumed to contain a simple APL array, complete with header information (type, rank, shape, etc.). Such mapped files may only be updated by changing the associated array using indexed/pick assignment: <code>var[a]←b</code>, the new values must be of the same type as the originals.</p>
<p>Note that a <em>raw</em> mapped file may be updated <em>only</em> if its <em>file offset</em> is 0. Note also that Windows does not support mapped files of zero length.</p>
<p class="example">Examples</p>
<p>Map raw file as a read-only <em>vector</em> of doubles:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">vec</span><span class="kd">←</span><span class="m">645</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕MAP</span><span class="s1">'c:\myfile'</span>
</code></pre></div></p>
<p>Map raw file as a 20-column read-write <em>matrix</em> of 1-byte integers:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">mat</span><span class="kd">←</span><span class="m">83</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="nf">⎕MAP</span><span class="s1">'c:\myfile'</span><span class="w"> </span><span class="s1">'W'</span><span class="w"> </span>
</code></pre></div></p>
<p>Replace some items in mapped file:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">mat</span><span class="sr">[</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="sr">;</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">⍴⍳</span><span class="m">4</span>
</code></pre></div></p>
<p>Map bytes 100-160 in raw file as a <code>5×2</code> read-only matrix of doubles:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dat</span><span class="kd">←</span><span class="m">645</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕MAP</span><span class="s1">'c:\myfile'</span><span class="w"> </span><span class="s1">'R'</span><span class="w"> </span><span class="m">80</span>
</code></pre></div></p>
<p>Put simple 4-byte integer array on disk ready for mapping:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊃</span><span class="m">83</span><span class="w"> </span><span class="m">323</span><span class="w"> </span><span class="nf">⎕DR</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">24</span><span class="p">)</span><span class="nv">∆MPUT</span><span class="s1">'c:\myvar'</span>
</code></pre></div></p>
<p>Then, map a read-write variable:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">var</span><span class="kd">←</span><span class="nf">⎕MAP</span><span class="s1">'c:\myvar'</span><span class="w"> </span><span class="s1">'w'</span><span class="w"> </span>
</code></pre></div></p>
<p>Note that a mapped array need not be <em>named</em>. In the following example, a 'raw' file is mapped, summed and released, all in a single expression:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="m">163</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="nf">⎕MAP</span><span class="s1">'c:\shorts.dat'</span>
<span class="m">42</span>
</code></pre></div></p>
<p>If you fail to specify the shape of the data, the data on file will be mapped as a scalar and only the first value in the file will be accessible:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">83</span><span class="w"> </span><span class="nf">⎕MAP</span><span class="w"> </span><span class="s1">'myfile'</span><span class="w">   </span><span class="c1">⍝ map FIRST BYTE of file.</span>
<span class="m">¯86</span>
</code></pre></div></p>
<h5>Compatibility between Editions</h5>
<p>In the Unicode Edition <code>⎕MAP</code> will fail with a <code>TRANSLATION ERROR</code> (event number 92) if you attempt to map an APL file which contains character data type 82.</p>
<p>In order for the Unicode Edition to correctly interpret data in a raw file that was written using data type 82, the file may be mapped with data type 83 and the characters extracted by indexing into <code>⎕AVU</code>.</p>
</article>
<article id="system-functions-mkdir">
<div class="heading-container"><h3 class="heading" id="system-functions-mkdir-header">Make Directory</h3><div class="command">{R}←{X}⎕MKDIR Y</div></div>
<p>This function creates new directories.</p>
<p><code>Y</code> is a character vector or scalar containing a single directory name, or a vector of character vectors containing zero or more directory names. Names must conform to the naming rules of the host Operating System.</p>
<p>By default, for each file in <code>Y</code> the path must exist and the base name must not exist (see <a class="internal-link" href="#system-functions-nparts">Section 4.6.99</a>), otherwise an error is signalled.</p>
<p>The optional left argument <code>X</code> is the numeric scalar 0, 1, 2 or 3 which amends this behaviour as shown in the following table. If omitted, it is assumed to be 0.</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>Default behaviour.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>No action is taken if a directory specified by <code>Y</code> already exists. The return value may be used to determine whether a new directory was created or not.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Any part of the <em>paths</em> specified in <code>Y</code> which does not already exist will be created in preparation of creating the corresponding directory.</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Combination of 1 and 2.</td>
</tr>
</tbody>
</table>
<p>If <code>Y</code> specifies a single name, the shy result <code>R</code> is a scalar 1 if a directory was created or 0 if not. If <code>Y</code> is a vector of character vectors, <code>R</code> is a vector of 1s and 0s with the same length as <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NEXISTS</span><span class="w"> </span><span class="s1">'/Users/Pete/Documents/temp'</span>
<span class="m">0</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'/Users/Pete/Documents/temp'</span>
<span class="m">1</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'/Users/Pete/Documents/temp'</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Directory</span><span class="w"> </span><span class="nv">exists</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="s1">'/Users/Pete/Documents/temp'</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Unable</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">directory</span><span class="w"> </span><span class="p">(</span><span class="s2">"The system cannot find the path specified."</span><span class="p">)</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕MKDIR</span><span class="s1">'temp1'</span><span class="w"> </span><span class="s1">'temp2'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<h5>Note</h5>
<p>When multiple names are specified they are processed in the order given. If an error occurs at any point whilst creating directories, processing will immediately stop and an error will be signalled. The operation is not atomic; some directories may be created before this happens. In the event of an error there will be no result and therefore no indication of how many directories were created before the error occurred.</p>
</article>
<article id="system-functions-ml">
<div class="heading-container"><h3 class="heading" id="system-functions-ml-header">Migration Level</h3><div class="command">⎕ML</div></div>
<p><code>⎕ML</code> determines the degree of migration of the Dyalog APL language towards IBM's APL2.  Setting this variable to other than its default value of <code>1</code> changes the interpretation of certain symbols and language constructs. <code>⎕ML</code> has Namespace scope.</p>
<table>
<tbody>
<tr>
<td><code>⎕ML←0</code></td>
<td> </td>
<td>Original Native Dyalog</td>
</tr>
<tr>
<td><code>⎕ML←1</code></td>
<td><code>Z←∊R</code></td>
<td>Monadic <code>'∊'</code> is interpreted as 'enlist' rather than 'type'.</td>
</tr>
<tr>
<td><code>⎕ML←2</code></td>
<td><code>Z←↑R</code></td>
<td>Monadic <code>'↑'</code> is interpreted as 'first' rather than 'mix'.</td>
</tr>
<tr>
<td> </td>
<td><code>Z←⊃R</code></td>
<td>Monadic <code>'⊃'</code> is interpreted as 'mix' rather than 'first'.</td>
</tr>
<tr>
<td> </td>
<td><code>Z←≡R</code></td>
<td>Monadic <code>'≡'</code> returns a positive rather than a negative value, if its argument has non-uniform depth.</td>
</tr>
<tr>
<td><code>⎕ML←3</code></td>
<td><code>R←X⊂[K]Y</code></td>
<td>Dyadic <code>'⊂'</code> follows the APL2 (rather than the original Dyalog APL) convention.</td>
</tr>
<tr>
<td> </td>
<td><code>⎕TC</code></td>
<td>The order of the elements of <code>⎕TC</code> is the same as in APL2.</td>
</tr>
</tbody>
</table>
<p>Subsequent versions of Dyalog APL may provide further migration levels.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="m">2</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>

<span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="o">∊</span><span class="nv">X</span>
<span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="o">↑</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⊃</span><span class="nv">X</span>
<span class="m">2</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">X</span>
<span class="m">¯2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">1</span>
<span class="w">      </span><span class="o">∊</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">↑</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">⊃</span><span class="nv">X</span>
<span class="m">2</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">X</span>
<span class="m">¯2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">2</span>
<span class="w">      </span><span class="o">∊</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">↑</span><span class="nv">X</span>
<span class="m">2</span>
<span class="w">      </span><span class="o">⊃</span><span class="nv">X</span>
<span class="m">2</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">X</span>
<span class="m">2</span>
</code></pre></div></p>
</article>
<article id="system-functions-set-monitor">
<div class="heading-container"><h3 class="heading" id="system-functions-set-monitor-header">Set Monitor</h3><div class="command">{R}←X ⎕MONITOR Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.</p>
<p>Note that <code>⎕MONITOR</code> does not apply to  dfns or dops.</p>
<p><code>X</code> must be a simple non-negative integer scalar or vector.  <code>R</code> is a simple integer vector of non-negative elements.</p>
<p><code>X</code> identifies the numbers of lines in the function or operator named by <code>Y</code> on which a monitor is to be placed.  Numbers outside the range of line numbers in the function or operator (other than <code>0</code>) are ignored.  The number <code>0</code> indicates that a monitor is to be placed on the function or operator as a whole.  The value of <code>X</code> is independent of <code>⎕IO</code>.</p>
<p><code>R</code> is a vector of numbers on which a monitor has been placed in ascending order.  The result is suppressed unless it is explicitly used or assigned. <code>R</code> will be empty for dfns and dops.</p>
<p>The effect of <code>⎕MONITOR</code> is to accumulate timing statistics for the lines for which the monitor has been set.  See <a class="internal-link" href="#system-functions-query-monitor">Section 4.6.82</a> for details.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕MONITOR</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div>
<p>Existing monitors are cancelled before new ones are set:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕MONITOR</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">1</span>
</code></pre></div></p>
<p>All monitors may be cancelled by supplying an empty vector:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="no">⍬</span><span class="w"> </span><span class="nf">⎕MONITOR</span><span class="w"> </span><span class="s1">'FOO'</span>
</code></pre></div></p>
<p>Monitors may be set on a locked function or operator, but no information will be reported.  Monitors are saved with the workspace.</p>
</article>
<article id="system-functions-query-monitor">
<div class="heading-container"><h3 class="heading" id="system-functions-query-monitor-header">Query Monitor</h3><div class="command">R←⎕MONITOR Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.</p>
<p>Note that <code>⎕MONITOR</code> does not apply to  dfns or dops.</p>
<p><code>R</code> is a simple non-negative integer matrix of 5 columns with one row for each line in the function or operator <code>Y</code> which has the monitor set, giving:</p>
<table>
<tbody>
<tr>
<td>Column 1</td>
<td>Line number</td>
</tr>
<tr>
<td>Column 2</td>
<td>Number of times the line was executed</td>
</tr>
<tr>
<td>Column 3</td>
<td>CPU time in milliseconds</td>
</tr>
<tr>
<td>Column 4</td>
<td>Elapsed time in milliseconds</td>
</tr>
<tr>
<td>Column 5</td>
<td>Reserved</td>
</tr>
</tbody>
</table>
<p>The value of <code>0</code> in column one indicates that the monitor is set on the function or operator as a whole. <code>R</code> will be empty for dfns and dops.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">A</span><span class="kd">←</span><span class="o">?</span><span class="m">25</span><span class="w"> </span><span class="m">25</span><span class="o">⍴</span><span class="m">100</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">B</span><span class="kd">←</span><span class="o">⌹</span><span class="nv">A</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">C</span><span class="kd">←</span><span class="o">⌹</span><span class="nv">B</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">R1</span><span class="kd">←</span><span class="o">⌊</span><span class="m">0.5</span><span class="o">+</span><span class="nv">A</span><span class="o">+</span><span class="na">.</span><span class="o">×</span><span class="nv">B</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">   </span><span class="nv">R2</span><span class="kd">←</span><span class="nv">A</span><span class="o">=</span><span class="nv">C</span>
<span class="w">      </span><span class="bp">∇</span>

<span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕MONITOR</span><span class="w"> </span><span class="s1">'FOO'</span><span class="w"> </span><span class="c1">⍝ Set monitor</span>

<span class="w">      </span><span class="nv">FOO</span><span class="w">                   </span><span class="c1">⍝ Run function</span>

<span class="w">      </span><span class="nf">⎕MONITOR</span><span class="w"> </span><span class="s1">'FOO'</span><span class="w">        </span><span class="c1">⍝ Monitor query</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1418</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">   </span><span class="m">83</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">400</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">3</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">397</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">467</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="m">0</span>
<span class="m">5</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">100</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-na">
<p>The DLL may be part of the standard operating system software, a library purchased from a third party supplier, or one that you have written yourself.</p>
<p>The right argument <code>Y</code> is a character vector that identifies the name and syntax of the function to be associated. The left argument <code>X</code> is a character vector that contains the name to be associated with the external function. If the <code>⎕NA</code> is successful, a function (name class 3) is established in the active workspace with name <code>X</code>. If <code>X</code> is omitted, the name of the external function itself is used for the association.</p>
<p>The shy result <code>R</code> is a character vector containing the name of the external function that was fixed.</p>
<p>For example, <code>math.dll</code> might be a library of mathematical functions containing a function <code>divide</code>.</p>
<p>In a compiled language such as C, the types of arguments and results of functions must be declared explicitly. Typically, these types will be published with the documentation that accompanies the DLL. For example, function <code>divide</code> might be declared:
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="nv">double</span><span class="w"> </span><span class="nv">divide</span><span class="p">(</span><span class="nv">int32_t</span><span class="o">,</span><span class="w"> </span><span class="nv">int32_t</span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p>which means that it expects two long (4-byte) integer arguments and returns a double (8-byte) floating point result. Notice the correspondence between the C declaration and the right argument of <code>⎕NA</code>:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nv">C</span><span class="bp">:</span><span class="w">             </span><span class="nv">double</span><span class="w">    </span><span class="nv">divide</span><span class="w">       </span><span class="p">(</span><span class="nv">int32_t</span><span class="o">,</span><span class="w">  </span><span class="nv">int32_t</span><span class="p">)</span><span class="sr">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nv">APL</span><span class="bp">:</span><span class="w">  </span><span class="s1">'div'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'F8    math|divide       I4        I4 '</span>
</code></pre></div></p>
<p>So to associate the APL name <code>div</code> with this external function:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'div'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'F8 math|divide I4 I4'</span>
</code></pre></div></p>
<p>where <code>F8</code> and <code>I4</code>, specify the types of the result and arguments expected by <code>divide</code>. The association has the effect of establishing a new function: <code>div</code> in the workspace, which when called, passes its arguments to <code>divide</code> and returns the result.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">fns</span>
<span class="nv">div</span>
<span class="w">      </span><span class="nv">div</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">4</span>
<span class="m">2.5</span>
</code></pre></div></p>
<p>It is imperative that care be taken when coding type declarations. A DLL <em>cannot</em> check types of data passed from APL. A wrong type declaration will lead to erroneous results or may even cause the workspace to become corrupted and crash. During development, you may wish to prevent this happening. See: <i> ErrorOnExternalException</i>.</p>
<p>The full syntax for the right argument of <code>⎕NA</code> is:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="sr">[</span><span class="nv">result</span><span class="sr">]</span><span class="w"> </span><span class="nv">library</span><span class="o">|</span><span class="nv">function</span><span class="w"> </span><span class="sr">[</span><span class="nv">arg1</span><span class="sr">]</span><span class="w"> </span><span class="sr">[</span><span class="nv">arg2</span><span class="sr">]</span><span class="w"> </span><span class="na">...</span>
</code></pre></div></p>
<p>Note that functions associated with DLLs are never dyadic. All arguments are passed as items of a (possibly nested) vector on the right of the function.</p>
<h3 id="system-functions-na-header"> Locating the DLL</h3>
<p>The DLL may be specified using a full pathname, file extension, and function type.</p>
<h4>Be aware</h4>
<p>A 32-bit interpreter can only load 32-bit DLLs/shared libraries; a 64-bit interpreter can only load 64-bit DLLs/shared libraries.</p>
<p>If a DLL/shared library has a missing dependency, the error generated by the operating system, and therefore reported by Dyalog will suggest that the DLL/shared library that was explicitly called in the <code>⎕NA</code> call is missing.</p>
<h4>Pathname</h4>
<p>APL uses the <code>LoadLibrary()</code> system function under Windows or <code>dlopen()</code> under UNIX, Linux and macOS to load the DLL. If a full or relative pathname is omitted, these functions search a list of directories determined by the operating system. This list always includes the directory which contains the Dyalog program, and on all non-Windows platforms, $DYALOG/lib. For further details, see the operating system documentation about these functions.</p>
<p>Alternatively, a full or relative pathname may be supplied in the usual way:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'... c:\mydir\mydll|foo ...'</span>
</code></pre></div></p>
<h4>Errors</h4>
<p>If the specified DLL (or a dependent DLL) fails to load it will generate:
<div class="highlight"><pre><span></span><code><span class="nv">FILE</span><span class="w"> </span><span class="nv">ERROR</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="nv">No</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">directory</span>
</code></pre></div></p>
<p>It is frequently the case that this error is a result of a missing dependency; operating systems do not return error codes which allow the interpreter to generate a more specific error.</p>
<p>If the DLL loads successfully, but the specified library function is not accessible, it will generate:
<div class="highlight"><pre><span></span><code><span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div></p>
<h4>File Extension</h4>
<p>Under Windows, if the file extension is omitted, <strong>.dll</strong> is assumed. Note that some DLLs are in fact <strong>.exe</strong> files, and in this case the extension must be specified explicitly:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'... mydll.exe|foo ...'</span>
</code></pre></div></p>
<h4>libc.a on Non-Windows Platforms</h4>
<p>On non-Windows platforms many of the most useful system library functions appear in <code>libc.a</code>. The <code>quadna</code> workspace includes the function <code>NonWindows.Setup</code> which has code which will locate <code>libc.a</code> on each platform.</p>
<h4>Data Type Coding Scheme</h4>
<p>The type coding scheme introduced above is of the form:</p>
<p>[direction] [special] type [width] [array][[count]]</p>
<p>The options are summarised in the following table and their functions detailed below.</p>
<table>
<thead>
<tr>
<th>Description</th>
<th>Symbol</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Direction</td>
<td><code>&lt;</code></td>
<td>Pointer to array <em>input</em> to DLL function.</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td colspan="2">Pointer to array <em>output</em> from DLL function</td>
</tr>
<tr>
<td><code>=</code></td>
<td colspan="2">Pointer to input/output array.</td>
</tr>
<tr>
<td>Special</td>
<td><code>0</code></td>
<td>Null-terminated string.</td>
</tr>
<tr>
<td><code>#</code></td>
<td colspan="2">Byte-counted string</td>
</tr>
<tr>
<td>Type</td>
<td><code>I</code></td>
<td>int</td>
</tr>
<tr>
<td><code>U</code></td>
<td colspan="2">unsigned int</td>
</tr>
<tr>
<td><code>C</code></td>
<td colspan="2">char</td>
</tr>
<tr>
<td><code>T</code></td>
<td colspan="2">char <span class="footnote">Classic Edition:  - translated to/from ANSI</span></td>
</tr>
<tr>
<td><code>F</code></td>
<td colspan="2">float</td>
</tr>
<tr>
<td><code>D</code></td>
<td colspan="2">decimal</td>
</tr>
<tr>
<td><code>J</code></td>
<td colspan="2">complex</td>
</tr>
<tr>
<td><code>P</code></td>
<td colspan="2">uintptr-t <span class="footnote">equivalent to U4 on 32-bit versions and U8 on 64-bit versions</span></td>
</tr>
<tr>
<td><code>A</code></td>
<td colspan="2">APL array</td>
</tr>
<tr>
<td><code>Z</code></td>
<td colspan="2">APL array with header (as passed to a TCP/IP socket)</td>
</tr>
<tr>
<td>Width</td>
<td><code>1</code></td>
<td>1-byte</td>
</tr>
<tr>
<td><code>2</code></td>
<td colspan="2">2-byte</td>
</tr>
<tr>
<td><code>4</code></td>
<td colspan="2">4-byte</td>
</tr>
<tr>
<td><code>8</code></td>
<td colspan="2">8-byte</td>
</tr>
<tr>
<td><code>16</code></td>
<td colspan="2">16-byte (128-bit)</td>
</tr>
<tr>
<td>Array</td>
<td><code>[n]</code></td>
<td>Array of length <em>n</em> elements</td>
</tr>
<tr>
<td><code>[]</code></td>
<td colspan="2">Array, length determined at call-time</td>
</tr>
<tr>
<td>Structure</td>
<td><code>{...}</code></td>
<td>Structure.</td>
</tr>
<tr>
<td>Count</td>
<td><code>[int]</code></td>
<td>Rather than explicitly declaring multiple adjacent occurrences of the same the count option may be used</td>
</tr>
</tbody>
</table>
<p>In the Classic Edition, <code>C</code> specifies untranslated character, whereas <code>T</code> specifies that the character data will be translated to/from <code>⎕AV</code>.</p>
<p>In the Unicode Edition, C and T are identical (no translation of character data is performed) except that for C the default width is 1 and for T the default width is "wide" (2 bytes under Windows, 4 bytes under UNIX, Linux or macOS).</p>
<p>The use of T with default width is recommended to ensure portability between Editions.</p>
<h4>Direction</h4>
<p>C functions accept data arguments either by <em>value</em> or by <em>address</em>. This distinction is indicated by the presence of a '<code>*</code>' or '<code>[]</code>' in the argument declaration:
<div class="highlight"><pre><span></span><code><span class="nv">int</span><span class="w">  </span><span class="nv">num1</span><span class="sr">;</span><span class="w">       </span><span class="na">//</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">num1</span><span class="w"> </span><span class="nv">passed</span><span class="na">.</span>
<span class="nv">int</span><span class="w"> </span><span class="o">*</span><span class="nv">num2</span><span class="sr">;</span><span class="w">       </span><span class="na">//</span><span class="w"> </span><span class="nv">Address</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">num2</span><span class="w"> </span><span class="nv">passed</span><span class="na">.</span>
<span class="nv">int</span><span class="w"> </span><span class="nv">num3</span><span class="sr">[];</span><span class="w">      </span><span class="na">//</span><span class="w"> </span><span class="nv">Address</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">num3</span><span class="w"> </span><span class="nv">passed</span><span class="na">.</span>
</code></pre></div></p>
<p>An argument (or result) of an external function of type pointer, must be matched in the <code>⎕NA</code> call by a declaration starting with one of the characters: <code>&lt;</code>, <code>&gt;</code>, or <code>=</code>.</p>
<p>In C, when an address is passed, the corresponding value can be used as either an <em>input</em> or an <em>output</em> variable. An output variable means that the C function overwrites values at the supplied address. Because APL is a call-by-value language, and doesn't have pointer types, we accommodate this mechanism by distinguishing output variables, and having them returned explicitly as part of the result of the call.</p>
<p>This means that where the C function indicates a <em>pointer type</em>, we must code this as starting with one of the characters: <code>&lt;</code>, <code>&gt;</code> or <code>=</code>.</p>
<table>
<tbody>
<tr>
<td><code>&lt;</code></td>
<td>indicates that the address of the argument will be used by C as an input variable and values at the address will <em>not</em> be over-written.</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>indicates that C will use the address as an output variable. In this case, APL must allocate an output array over which C can write values. After the call, this array will be included in the nested result of the call to the external function.</td>
</tr>
<tr>
<td><code>=</code></td>
<td>indicates that C will use the address for both input and output. In this case, APL duplicates the argument array into an output buffer whose address is passed to the external function. As in the case of an output only array, the newly modified copy will be included in the nested result of the call to the external function.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<table>
<tbody>
<tr>
<td><code>&lt;I2</code></td>
<td>Pointer to 2-byte integer - <em>input</em> to external function</td>
</tr>
<tr>
<td><code>&gt;C</code></td>
<td>Pointer to character <em>output</em> from external function.</td>
</tr>
<tr>
<td><code>=T</code></td>
<td>Pointer to character <em>input</em> to and <em>output</em> from function.</td>
</tr>
<tr>
<td><code>=A</code></td>
<td>Pointer to APL array <em>modified</em> by function.</td>
</tr>
</tbody>
</table>
<h4>Special</h4>
<p>In C it is common to represent character strings as <em>null-terminated</em> or <em>byte counted</em> arrays. These special data types are indicated by inserting the symbol <code>0</code> (null-terminated) or <code>#</code> (byte counted) between the direction indicator (<code>&lt;</code>, <code>&gt;</code>, <code>=</code>) and the type (<code>T</code> or <code>C)</code> specification. For example, a pointer to a null-terminated input character string is coded as <code>&lt;0T[]</code>, and an output one coded as <code>&gt;0T[]</code>.</p>
<p>Note that while appending the array specifier '<code>[]</code>' is formally correct, because the presence of the special qualifier (<code>0</code> or <code>#</code>) <em>implies</em> an array, the '<code>[]</code>' may be omitted: <code>&lt;0T</code>, <code>&gt;0T</code>, <code>=#C</code>, etc.</p>
<p>Note also that the 0 and # specifiers may be used with data of all types (excluding <code>A</code> and <code>Z</code>) and widths. For example, in the Classic Edition, <code>&lt;0U2</code> may be useful for dealing with Unicode.</p>
<h5>Type</h5>
<p>The data type of the argument may be one of the following characters and  may be specified in lower or upper case:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>I</code></td>
<td>Integer</td>
<td>The value is interpreted as a 2s complement signed integer</td>
</tr>
<tr>
<td><code>U</code></td>
<td>Unsigned integer</td>
<td>The value is interpreted as an unsigned integer</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Character</td>
<td>The value is interpreted as a character. In the Unicode Edition, the value maps directly onto a Unicode code point. In the Classic Edition, the value is interpreted as an index into <code>⎕AV</code> . This means that <code>⎕AV</code> <em>positions</em> map onto corresponding ANSI <em>positions</em> . For example, with <code>⎕IO=0</code> : <code>⎕AV[35] = 's'</code> , maps to <code>ANSI[35] = '</code></td>
</tr>
<tr>
<td><code>T</code></td>
<td>Translated character</td>
<td>The value is interpreted as a character. In the Unicode Edition, the value maps directly onto a Unicode code point. In the Classic Edition, the value is <em>translated</em> using standard Dyalog <code>⎕AV</code> to ANSI translation. This means that <code>⎕AV</code> <em>characters</em> map onto corresponding ANSI <em>characters</em> . For example, with <code>⎕IO=0</code> : <code>⎕AV[35] = 's'</code> maps to <code>ANSI[115] = 's'</code></td>
</tr>
<tr>
<td><code>UTF</code></td>
<td>Unicode encoded</td>
<td><code>&gt;0UTF8[]</code> will translate to a UTF-8 encoded string <code>&lt;0UTF16[]</code> will translate from a UTF-16LE encoded string</td>
</tr>
<tr>
<td><code>F</code></td>
<td>Float</td>
<td>The value is interpreted as an IEEE 754-2008 binary64 floating point number</td>
</tr>
<tr>
<td><code>D</code></td>
<td>Decimal</td>
<td>The value is interpreted as an IEEE 754-2008 decimal128 floating point number (DPD format on AIX, BID format on other platforms)</td>
</tr>
<tr>
<td><code>J</code></td>
<td>Complex</td>
<td> </td>
</tr>
<tr>
<td><code>P</code></td>
<td>uintptr-t</td>
<td>This is equivalent to U4 on 32-bit versions and U8 on 64-bit versions</td>
</tr>
<tr>
<td><code>∇</code></td>
<td>Function pointer</td>
<td>This allows the passing of an APL function for the function to call</td>
</tr>
<tr>
<td><code>A</code></td>
<td>APL array</td>
<td>This is the same format as is used to transmit APL arrays to an Auxiliary Processor (AP)</td>
</tr>
<tr>
<td><code>Z</code></td>
<td>APL array with header</td>
<td>This is the same format as is used to transmit APL arrays over TCP/IP Sockets</td>
</tr>
</tbody>
</table>
<h5>Width</h5>
<p>The type specifier may be followed by the width of the value in bytes. For example:</p>
<table>
<tbody>
<tr>
<td><code>I4</code></td>
<td>4-byte signed integer.</td>
</tr>
<tr>
<td><code>U2</code></td>
<td>2-byte unsigned integer.</td>
</tr>
<tr>
<td><code>F8</code></td>
<td>8-byte floating point number.</td>
</tr>
<tr>
<td><code>F4</code></td>
<td>4-byte floating point number.</td>
</tr>
<tr>
<td><code>D16</code></td>
<td>16-byte decimal floating-point number</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Type</th>
<th>Possible values for Width</th>
<th>Default value for Width</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>I</code></td>
<td>1, 2, 4, 8</td>
<td>4</td>
</tr>
<tr>
<td><code>U</code></td>
<td>1, 2, 4, 8</td>
<td>4</td>
</tr>
<tr>
<td><code>C</code></td>
<td>1,2,4</td>
<td>1</td>
</tr>
<tr>
<td><code>T</code></td>
<td>1,2,4</td>
<td>wide character(see below)</td>
</tr>
<tr>
<td><code>UTF</code></td>
<td>8,16</td>
<td>none</td>
</tr>
<tr>
<td><code>F</code></td>
<td>4, 8</td>
<td>8</td>
</tr>
<tr>
<td><code>D</code></td>
<td>16</td>
<td>16</td>
</tr>
<tr>
<td><code>J</code></td>
<td>16</td>
<td>16</td>
</tr>
<tr>
<td><code>P</code></td>
<td>Not applicable</td>
<td> </td>
</tr>
<tr>
<td><code>∇</code></td>
<td>Not applicable</td>
<td> </td>
</tr>
<tr>
<td><code>A</code></td>
<td>Not applicable</td>
<td> </td>
</tr>
<tr>
<td><code>Z</code></td>
<td>Not applicable</td>
<td> </td>
</tr>
</tbody>
</table>
<p>In the Unicode Edition, the default width is the width of a <em>wide character</em> according to the convention of the host operating system. This translates to T2 under Windows and T4 under UNIX, Linux or macOS.</p>
<p>Note that 32-bit versions can support 64-bit integer <em>arguments</em>, but not 64-bit integer <em>results</em>.</p>
<p class="example">Examples</p>
<table>
<tbody>
<tr>
<td><code>I2</code></td>
<td>16-bit integer</td>
</tr>
<tr>
<td><code>&lt;I4</code></td>
<td>Pointer to input 4-byte integer</td>
</tr>
<tr>
<td><code>U</code></td>
<td>Default width unsigned integer</td>
</tr>
<tr>
<td><code>=F4</code></td>
<td>Pointer to input/output 4-byte floating point number.</td>
</tr>
</tbody>
</table>
<h5>Arrays</h5>
<p>Arrays are specified by following the basic data type with <code>[n]</code> or <code>[]</code>, where <code>n</code> indicates the number of elements in the array. In the C declaration, the number of elements in an array may be specified explicitly at compile time, or determined dynamically at runtime. In the latter case, the size of the array is often passed along with the array, in a separate argument. In this case, <code>n</code>, the number of elements is omitted from the specification. Note that C deals only in scalars and rank 1 (vector) arrays.
<div class="highlight"><pre><span></span><code><span class="nv">int</span><span class="w"> </span><span class="nv">vec</span><span class="sr">[</span><span class="m">10</span><span class="sr">];</span><span class="w">               </span><span class="na">//</span><span class="w"> </span><span class="nv">explicit</span><span class="w"> </span><span class="nv">vector</span><span class="w"> </span><span class="nv">length</span><span class="na">.</span>
<span class="nv">unsigned</span><span class="w"> </span><span class="nv">size</span><span class="o">,</span><span class="w"> </span><span class="nv">list</span><span class="sr">[];</span><span class="w">     </span><span class="na">//</span><span class="w"> </span><span class="nv">undetermined</span><span class="w"> </span><span class="nv">length</span><span class="na">.</span><span class="w"> </span>
</code></pre></div></p>
<p>could be coded as:</p>
<table>
<tbody>
<tr>
<td><code>I[10]</code></td>
<td>vector of 10 ints.</td>
</tr>
<tr>
<td><code>U U[]</code></td>
<td>unsigned integer followed by an array of unsigned integers.</td>
</tr>
</tbody>
</table>
<p>Confusion sometimes arises over a difference in the declaration syntax between C and <code>⎕NA</code>. In C, an argument declaration may be given to receive a pointer to either a single scalar item, or to the first element of an array. This is because in C, the address of an array is deemed to be the address of its first element.
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nv">void</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="p">(</span><span class="nv">char</span><span class="w"> </span><span class="o">*</span><span class="nv">string</span><span class="p">)</span><span class="sr">;</span>
<span class="w">   </span><span class="nv">char</span><span class="w"> </span><span class="nv">ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'a'</span><span class="o">,</span><span class="w"> </span><span class="nv">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"abc"</span><span class="sr">;</span>
<span class="w">   </span><span class="nv">foo</span><span class="p">(</span><span class="na">&amp;</span><span class="nv">ch</span><span class="p">)</span><span class="sr">;</span><span class="na">//</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">scalar</span><span class="na">.</span>
<span class="w">   </span><span class="nv">foo</span><span class="p">(</span><span class="nv">ptr</span><span class="p">)</span><span class="sr">;</span><span class="na">//</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">array</span><span class="na">.</span>
</code></pre></div></p>
<p>However, from APL's point of view, these two cases are distinct and if the function is to be called with the address of (pointer to) a <em>scalar</em>, it must be declared: <code>'&lt;T'</code>. Otherwise, to be called with the address of an <em>array</em>, it must be declared: <code>'&lt;T[]'</code>. Note that it is perfectly acceptable in such circumstances to define more than one name association to the same DLL function specifying different argument types:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'FooScalar'</span><span class="nf">⎕NA</span><span class="s1">'mydll|foo &lt;T'</span><span class="w">   </span><span class="p">⋄</span><span class="w"> </span><span class="nv">FooScalar</span><span class="s1">'a'</span>
<span class="w">      </span><span class="s1">'FooVector'</span><span class="nf">⎕NA</span><span class="s1">'mydll|foo &lt;T[]'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">FooVector</span><span class="s1">'abc'</span>
</code></pre></div></p>
<h6>Structures</h6>
<p>Arbitrary data structures, which are akin to nested arrays, are specified using the symbols <code>{}</code>. For example, the code <code>{F8 I2}</code> indicates a structure comprised of an 8-byte <em>float</em> followed by a 2-byte <em>int</em>. Furthermore, the code <code>&lt;{F8 I2}[3]</code> means an input pointer to an array of 3 such structures.</p>
<p>For example, this structure might be defined in C thus:
<div class="highlight"><pre><span></span><code><span class="nv">typedef</span><span class="w"> </span><span class="nv">struct</span>
<span class="kt">{</span>
<span class="w">    </span><span class="nv">double</span><span class="w">  </span><span class="nv">f</span><span class="sr">;</span>
<span class="w">    </span><span class="nv">short</span><span class="w">   </span><span class="nv">i</span><span class="sr">;</span>
<span class="kt">}</span><span class="w"> </span><span class="nv">mystruct</span><span class="sr">;</span>
</code></pre></div></p>
<p>A function defined to receive a count followed by an <em>input</em> pointer to an array of such structures:
<div class="highlight"><pre><span></span><code><span class="nv">void</span><span class="w"> </span><span class="nv">foo</span><span class="p">(</span><span class="nv">unsigned</span><span class="w"> </span><span class="nv">count</span><span class="o">,</span><span class="w"> </span><span class="nv">mystruct</span><span class="w"> </span><span class="o">*</span><span class="nv">str</span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p>An appropriate <code>⎕NA</code> declaration would be:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'mydll.foo U &lt;{F8 I2}[]'</span><span class="w"> </span>
</code></pre></div></p>
<p>A call on the function with two arguments - a count followed by a vector of structures:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">4</span><span class="o">,⊂</span><span class="p">(</span><span class="m">1.4</span><span class="w"> </span><span class="m">3</span><span class="p">)(</span><span class="m">5.9</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="m">6.5</span><span class="w"> </span><span class="m">2</span><span class="p">)(</span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</code></pre></div></p>
<p>Notice that for the above call, APL converts the two Boolean <code>(0 0)</code> elements to an 8-byte float and a 2-byte int, respectively.</p>
<p>Note that if the C compiler would add extra space for alignment within a structure the <code>⎕NA</code> syntax will need to code that explicitly. For example:
<div class="highlight"><pre><span></span><code><span class="nv">typedef</span><span class="w"> </span><span class="nv">struct</span>
<span class="kt">{</span>
<span class="w">    </span><span class="nv">short</span><span class="w"> </span><span class="nv">i</span><span class="sr">;</span>
<span class="w">    </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">compilers</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="nv">bytes</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">alignment</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>
<span class="w">    </span><span class="nv">double</span><span class="w"> </span><span class="nv">d</span><span class="sr">;</span>
<span class="kt">}</span><span class="w"> </span><span class="nv">mystruct</span><span class="sr">;</span>
</code></pre></div></p>
<p>An appropriate <code>⎕NA</code> declaration would be:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'mydll.foo U &lt;{I2  {I1[6]} F8}[]'</span>
</code></pre></div></p>
<p>A call on the function with two arguments - a count followed by a vector of structures:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">pad</span><span class="kd">←</span><span class="o">⊂</span><span class="m">6</span><span class="o">⍴</span><span class="m">0</span>
<span class="w">      </span><span class="nv">foo</span><span class="w"> </span><span class="m">4</span><span class="o">,⊂</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="nv">pad</span><span class="w"> </span><span class="m">1.4</span><span class="p">)(</span><span class="m">1</span><span class="w"> </span><span class="nv">pad</span><span class="w"> </span><span class="m">5.9</span><span class="w"> </span><span class="p">)(</span><span class="m">2</span><span class="w"> </span><span class="nv">pad</span><span class="w"> </span><span class="m">6.5</span><span class="w"> </span><span class="p">)(</span><span class="m">0</span><span class="w"> </span><span class="nv">pad</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</code></pre></div></p>
<p>A library designer tries to avoid defining structures that induce padding.</p>
<h6>Count</h6>
<p>If a definition includes multiple adjacent occurrences of the same item, the count syntax may be used rather than explicitly repeating the same definition.</p>
<p>For example:</p>
<p><code>&gt;I8[3]</code> rather than <code>&gt;I8 &gt;I8 &gt;I8</code></p>
<p><code>{I8 U8 I8 P}[2]</code> rather than <code>{I8 U8 I8 P} {I8 U8 I8 P}</code></p>
<h6>Using a Function</h6>
<p>A DLL function may or may not return a result, and may take zero or more arguments. This syntax is reflected in the coding of the right argument of <code>⎕NA</code>. However, notice that the corresponding associated APL function is a result-returning niladic (if it takes no arguments) or monadic function. It cannot be dyadic and it must <em>always</em> return a vector result - a null one if there is no output from the DLL function. See Result Vector section below. Examples of the various combinations are:</p>
<h6>DLL function Non-result-returning</h6>
<div class="highlight"><pre><span></span><code><span class="nf">⎕NA</span><span class="w">    </span><span class="s1">'mydll|fn1'</span><span class="w">          </span><span class="c1">⍝ Niladic</span>
<span class="nf">⎕NA</span><span class="w">    </span><span class="s1">'mydll|fn2 &lt;0T'</span><span class="w">      </span><span class="c1">⍝ Monadic - 1-element arg</span>
<span class="nf">⎕NA</span><span class="w">    </span><span class="s1">'mydll|fn3 =0T &lt;0T'</span><span class="w">  </span><span class="c1">⍝ Monadic - 2-element arg</span>
</code></pre></div>
<h6>DLL function Result-returning</h6>
<div class="highlight"><pre><span></span><code><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I4 mydll|fn4'</span><span class="w">          </span><span class="c1">⍝ Niladic</span>
<span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I4 mydll|fn5 F8'</span><span class="w">       </span><span class="c1">⍝ Monadic - 1-element arg</span>
<span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I4 mydll|fn6 &gt;I4[] &lt;0T'</span><span class="c1">⍝ Monadic - 2-element arg</span>
</code></pre></div>
<p>When the external function is called, the number of elements in the argument must match the number defined in the <code>⎕NA</code> definition. Using the examples above:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">fn1</span><span class="w">                   </span><span class="c1">⍝ Niladic Function.</span>
<span class="w">      </span><span class="nv">fn2</span><span class="o">,</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'Single String'</span><span class="w"> </span><span class="c1">⍝ 1-element arg</span>
<span class="w">      </span><span class="nv">fn3</span><span class="w"> </span><span class="s1">'This'</span><span class="w"> </span><span class="s1">'That'</span><span class="w">     </span><span class="c1">⍝ 2-element arg</span>
</code></pre></div></p>
<p>Note in the second example, that you must enclose the argument string to produce a single item (nested) array in order to match the declaration. Dyalog converts the type of a numeric argument if necessary, so for example in <code>fn5</code> defined above, a Boolean value would be converted to double floating point (F8) prior to being passed to the DLL function.</p>
<h6>Multi-Threading</h6>
<p>Appending the '<code>&amp;</code>' character to the function name causes the external function to be run in its own system thread. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'... mydll|foo&amp; ...'</span>
</code></pre></div></p>
<p>This means that other APL threads can run concurrently with the one that is calling the <code>⎕NA</code> function.</p>
<h6>Name Mangling</h6>
<p>C++ and some other languages will by default mangle (or decorate) function names which are exported from a DLL file. The given external function name must exactly match the exported name, either by matching the name mangling or by ensuring the names exported from the library are not mangled.</p>
<h6>Call by Ordinal Number</h6>
<p>Under Windows, a DLL may associate an <em>ordinal number</em> with any of its functions. This number may then be used to call the function as an alternative to calling it by name. Using <code>⎕NA</code> to call by ordinal number uses the same syntax but with the function name replaced with its ordinal number. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'... mydll|57 ...'</span>
</code></pre></div></p>
<h6>Pointer Arguments</h6>
<p>When passing pointer arguments there are three cases to consider.</p>
<h6><code>&lt;</code> Input pointer</h6>
<p>In this case you must supply the data array itself as argument to the function. A pointer to its first element is then passed to the DLL function.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">fn2</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'hello'</span>
</code></pre></div></p>
<h6><code>&gt;</code> Output pointer</h6>
<p>Here, you must supply the <strong>number of elements</strong> that the output will need in order for APL to allocate memory to accommodate the resulting array.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">fn6</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="s1">'world'</span><span class="w">  </span><span class="c1">⍝ 1st arg needs space for 10 ints.</span>
</code></pre></div></p>
<p>Note that if you were to reserve fewer elements than the DLL function actually used, the DLL function would write beyond the end of the reserved array and may cause the interpreter to crash with a System Error (syserror 999 on Windows or SIGSEGV on UNIX, Linux or macOS).</p>
<h6><code>=</code>  Input/Output</h6>
<p>As with the input-only case, a pointer to the first element of the argument is passed to the DLL function. The DLL function then overwrites some or all of the elements of the array, and the new value is passed back as part of the result of the call. As with the output pointer case, if the input array were too short, so that the DLL wrote beyond the end of the array, the interpreter would almost certainly crash.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">fn3</span><span class="w"> </span><span class="s1">'.....'</span><span class="w"> </span><span class="s1">'hello'</span>
</code></pre></div></p>
<h6>Specifying Pointers Explicitly</h6>
<p><code>⎕NA</code> syntax enables APL to pass arguments to DLL functions by <em>value</em> or <em>address</em> as appropriate. For example if a function requires an integer followed by a <em>pointer</em> to an integer:
<div class="highlight"><pre><span></span><code><span class="nv">void</span><span class="w"> </span><span class="nv">fun</span><span class="p">(</span><span class="nv">int</span><span class="w"> </span><span class="nv">valu</span><span class="o">,</span><span class="w"> </span><span class="nv">int</span><span class="w"> </span><span class="o">*</span><span class="nv">addr</span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p>You might declare and call it:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="s1">'mydll|fun I &lt;I'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">fun</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">42</span>
</code></pre></div></p>
<p>The interpreter passes the <em>value</em> of the first argument and the <em>address</em> of the second one.</p>
<p>Two common cases occur where it is necessary to pass a pointer explicitly. The first is if the DLL function requires a <em>null pointer</em>, and the second is where you want to pass on a pointer which itself is a result from a DLL function.</p>
<p>In both cases, the pointer argument should be coded as <code>P</code>. This causes APL to pass the pointer unchanged, <em>by value</em>, to the DLL function.</p>
<p>In the previous example, to pass a null pointer, (or one returned from another DLL function), you must code a separate <code>⎕NA</code> definition.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'fun_null'</span><span class="nf">⎕NA</span><span class="s1">'mydll|fun I P'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">fun_null</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Now APL passes the <em>value</em> of the second argument (in this case 0 - the null pointer), rather than its address.</p>
<p>Note that by using P, which is 4-byte for 32-bit processes and 8-byte for 64-bit processes, you will ensure that the code will run unchanged under both 32-bit and 64-bit versions of Dyalog APL.</p>
<h6>Result Vector</h6>
<p>In APL, a function cannot overwrite its arguments. This means that any output from a DLL function must be returned as part of the explicit result, and this includes output via 'output' or 'input/output' pointer arguments.</p>
<p>The general form of the result from calling a DLL function is a nested vector. The first item of the result is the defined explicit result of the external function, and subsequent items are implicit results from output, or input/output pointer arguments.</p>
<p>The length of the result vector is therefore: 1 (if the function was declared to return an explicit result) + the number of output or input/output arguments.</p>
<table>
<thead>
<tr>
<th><code>⎕NA</code> Declaration</th>
<th>Result</th>
<th>Output Arguments</th>
<th>Result Length</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mydll|fn1</code></td>
<td><code>0</code></td>
<td> </td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>mydll|fn2 &lt;0T</code></td>
<td><code>0</code></td>
<td><code>0</code></td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>mydll|fn3 =0T &lt;0T</code></td>
<td><code>0</code></td>
<td><code>1 0</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>I4 mydll|fn4</code></td>
<td><code>1</code></td>
<td> </td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>I4 mydll|fn5 F8</code></td>
<td><code>1</code></td>
<td><code>0</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>I4 mydll|fn6 &gt;I4[] &lt;0T</code></td>
<td><code>1</code></td>
<td><code>1 0</code></td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
<p>Note that the result vector from a function that is declared <code>void()</code> and has no output parameters is <code>⍬</code> (zilde).</p>
<p>As a convenience, if the result would otherwise be a 1-item vector, it is disclosed. Using the third example above:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">fn3</span><span class="w"> </span><span class="s1">'.....'</span><span class="w"> </span><span class="s1">'abc'</span>
<span class="m">5</span>
</code></pre></div></p>
<p><code>fn3</code> has no explicit result; its first argument is input/output pointer; and its second argument is input pointer. Therefore as the length of the result would be 1, it has been disclosed.</p>
<h6>64 bit integer results</h6>
<p>When a 64 bit integer result is returned it is converted into 128 bit decimal floating point, because this is the only APL data type that can fully preserve all 64 bits of the result. If you wish to perform arithmetic with this value, you must set  <code>⎕FR</code>  to 1287 in order to preserve the same precision. If this is not done then the precision will be 53 bits which might not be enough.</p>
<h6>Callbacks (<code>∇</code>)</h6>
<p>Currently, support for a <code>⎕NA</code> function to call an APL function is limited to the use of the NAG (National Algorithms Group) library of functions. This library is a FORTRAN library and FORTRAN passes arguments by reference (address) rather than by value. The expression:
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="bp">∇</span><span class="nv">f8</span><span class="kd">←</span><span class="p">(</span><span class="nv">P</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">P</span><span class="p">)</span>
</code></pre></div></p>
<p>declares a callback function that returns a double and takes 4 pointer arguments. The result can be any of the normal results. It is not possible to return a pointer. The arguments can be from 0 to 16 P values.</p>
<p>The argument when passed can be the name of an APL function or the <code>⎕OR</code> of a function.</p>
<p>The function when called can then decode the pointer arguments appropriately using a <code>⎕NA</code> of <code>MEMCPY()</code>.</p>
<h6>ANSI /Unicode Versions of Library Calls</h6>
<p>Under Windows, most library functions that take character arguments, or return character results have two forms: one Unicode (Wide) and one ANSI. For example, a function such as <code>MessageBox()</code>, has two forms <code>MessageBoxA()</code> and <code>MessageBoxW()</code>. The <code>A</code> stands for ANSI (1-byte) characters, and the <code>W</code> for wide (2-byte Unicode) characters.</p>
<p>It is essential that you associate the form of the library function that is appropriate for the Dyalog Edition you are using, i.e. <code>MessageBoxA()</code> for the Classic Edition, but <code>MessageBoxW()</code> for the Unicode Edition.</p>
<p>Whilst this is convenient it is not complete. It is adequate for character arrays that consist of characters from UCS-2 (i.e. those that will fit in an array with a <code>⎕DR</code> of 80 or 160). If a more complete support is required then the W form of the function would be required and explicit use of UTF16 specified.</p>
<p>To simplify writing portable code for both Editions, you may specify the character <code>*</code> instead of <code>A</code> or <code>W</code> at the end of a function name. This will be replaced by <code>A</code> in the Classic Edition and <code>W</code> in the Unicode Edition.</p>
<p>The default name of the associated function (if no left argument is given to <code>⎕NA</code>), will be without the trailing letter (<code>MessageBox</code>).</p>
<h6>Type Definitions</h6>
<p>The C language encourages the assignment of defined names to primitive and complex data types using its <code>#define</code> and <code>typedef</code> mechanisms. Using such abstractions enables the C programmer to write code that will be portable across many operating systems and hardware platforms.</p>
<p>Windows software uses many such names and Microsoft documentation will normally refer to the type of function arguments using defined names such as <code>HANDLE</code> or <code>LPSTR</code> rather than their equivalent C primitive types: <code>int</code> or <code>char*</code>.</p>
<p>It is beyond the scope of this manual to list <em>all</em> the Microsoft definitions and their C primitive equivalents, and indeed, DLLs from sources other than Microsoft may well employ their own distinct naming conventions.</p>
<p>In general, you should consult the documentation that accompanies the DLL in order to convert typedefs to primitive C types and thence to <code>⎕NA</code> declarations. The documentation may well refer you to the 'include' files which are part of the Software Development Kit, and in which the types are defined.</p>
<p>The following table of some commonly encountered Windows typedefs and their <code>⎕NA</code> equivalents might prove useful.</p>
<table>
<thead>
<tr>
<th>Windows typedef</th>
<th><code>⎕NA</code> equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td>HWND</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HANDLE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>GLOBALHANDLE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>LOCALHANDLE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>DWORD</td>
<td><code>U4</code></td>
</tr>
<tr>
<td>WORD</td>
<td><code>U2</code></td>
</tr>
<tr>
<td>BYTE</td>
<td><code>U1</code></td>
</tr>
<tr>
<td>LPSTR</td>
<td><code>=0T[] (note 1)</code></td>
</tr>
<tr>
<td>LPCSTR</td>
<td><code>&lt;0T[] (note 2)</code></td>
</tr>
<tr>
<td>WPARAM</td>
<td><code>U (note 3)</code></td>
</tr>
<tr>
<td>LPARAM</td>
<td><code>U4 (note 3)</code></td>
</tr>
<tr>
<td>LRESULT</td>
<td><code>I4</code></td>
</tr>
<tr>
<td>BOOL</td>
<td><code>I</code></td>
</tr>
<tr>
<td>UINT</td>
<td><code>U</code></td>
</tr>
<tr>
<td>ULONG</td>
<td><code>U4</code></td>
</tr>
<tr>
<td>ATOM</td>
<td><code>U2</code></td>
</tr>
<tr>
<td>HDC</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HBITMAP</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HBRUSH</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HFONT</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HICON</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HMENU</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HPALETTE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HMETAFILE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HMODULE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>HINSTANCE</td>
<td><code>P</code></td>
</tr>
<tr>
<td>COLORREF</td>
<td><code>{U1[4]}</code></td>
</tr>
<tr>
<td>POINT</td>
<td><code>{I I}</code></td>
</tr>
<tr>
<td>POINTS</td>
<td><code>{I2 I2}</code></td>
</tr>
<tr>
<td>RECT</td>
<td><code>{I I I I}</code></td>
</tr>
<tr>
<td>CHAR</td>
<td><code>T or C</code></td>
</tr>
</tbody>
</table>
<h6>Notes</h6>
<ol>
<li><code>LPSTR</code> is a pointer to a null-terminated string. The definition does not indicate whether this is input or output, so the safest coding would be <code>=0T[]</code> (providing the vector you supply for input is long enough to accommodate the result). You may be able to improve simplicity or performance if the documentation indicates that the pointer is 'input only' (&lt;<code>0T[]</code>) or 'output only' (&gt;<code>0T[]</code>). See Direction above.</li>
<li><code>LPCSTR</code> is a pointer to a <em>constant</em> null-terminated string and therefore coding <code>&lt;0T[]</code> is safe.</li>
<li>
<p><code>WPARAM</code> is an unsigned value, <code>LPARAM</code> is signed.
They are 32 bit values in a 32-bit APL, and 64-bit in a 64 bit APL.
You should consult the documentation for the specific function that you intend to call to determine what type they represent</p>
</li>
<li>
<p>The use of type T with default width ensures portability of code between Classic and Unicode Editions. In the Classic Edition, T (with no width specifier) implies 1-byte characters which are translated between <code>⎕AV</code> and ASCII, while in the Unicode Edition, T (with no width specifier) implies 2-byte (Unicode) characters.</p>
</li>
</ol>
<h6>The Dyalog DLL</h6>
<p>The Dyalog DLL (see <i>Run-Time Applications and Components</i>) contains three functions: MEMCPY, STRNCPY and STRLEN.</p>
<h6>MEMCPY</h6>
<p><code>MEMCPY</code> is an extremely versatile function used for moving arbitrary data between memory buffers.</p>
<p>Its C definition is:
<div class="highlight"><pre><span></span><code><span class="nv">void</span><span class="w"> </span><span class="o">*</span><span class="nv">MEMCPY</span><span class="p">(</span><span class="w">       </span><span class="na">//</span><span class="w"> </span><span class="nv">copy</span><span class="w"> </span><span class="nv">memory</span>
<span class="w">      </span><span class="nv">void</span><span class="w"> </span><span class="o">*</span><span class="nv">to</span><span class="o">,</span><span class="w">     </span><span class="na">//</span><span class="w"> </span><span class="nv">target</span><span class="w"> </span><span class="nv">address</span>
<span class="w">      </span><span class="nv">void</span><span class="w"> </span><span class="o">*</span><span class="nv">fm</span><span class="o">,</span><span class="w">     </span><span class="na">//</span><span class="w"> </span><span class="nv">source</span><span class="w"> </span><span class="nv">address</span>
<span class="w">      </span><span class="nv">size_t</span><span class="w"> </span><span class="nv">size</span><span class="w">   </span><span class="na">//</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">bytes</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">copy</span>
<span class="w">      </span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p><code>MEMCPY</code> copies <code>size</code> bytes starting from source address <code>fm</code>, to destination address <code>to</code>. The source and destination areas should not overlap; if they do the behaviour is undefined and the result is the first argument.</p>
<p><code>MEMCPY</code>'s versatility stems from being able to associate to it using many different type declarations.</p>
<p class="example">Example</p>
<p>Suppose a global buffer (at address: <code>addr</code>) contains (<code>numb</code>) double floating point numbers. To copy these to an APL array, we could define the association:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'doubles'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'dyalog32|MEMCPY &gt;F8[] I4 U4'</span>
<span class="w">      </span><span class="nv">doubles</span><span class="w"> </span><span class="nv">numb</span><span class="w"> </span><span class="nv">addr</span><span class="w"> </span><span class="p">(</span><span class="nv">numb</span><span class="o">×</span><span class="m">8</span><span class="p">)</span>
</code></pre></div></p>
<p>Notice that:</p>
<ul>
<li>As the first argument to <code>doubles</code> is an output argument, we must supply the number of elements to reserve for the output data.</li>
<li><code>MEMCPY</code> is defined to take the number of <em>bytes</em> to copy, so we must multiply the number of elements by the element size in bytes.</li>
</ul>
<p class="example">Example</p>
<p>Suppose that a database application requires that we construct a record in global memory prior to writing it to file. The record structure might look like this:
<div class="highlight"><pre><span></span><code><span class="nv">typedef</span><span class="w"> </span><span class="nv">struct</span><span class="w"> </span><span class="kt">{</span>
<span class="w">        </span><span class="nv">int</span><span class="w"> </span><span class="nv">empno</span><span class="sr">;</span><span class="na">//</span><span class="w"> </span><span class="nv">employee</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span>
<span class="w">        </span><span class="nv">float</span><span class="w"> </span><span class="nv">salary</span><span class="sr">;</span><span class="na">//</span><span class="w"> </span><span class="nv">salary</span><span class="na">.</span>
<span class="w">        </span><span class="nv">char</span><span class="w"> </span><span class="nv">name</span><span class="sr">[</span><span class="m">20</span><span class="sr">];</span><span class="na">//</span><span class="w"> </span><span class="nv">name</span><span class="na">.</span>
<span class="w">        </span><span class="kt">}</span><span class="w"> </span><span class="nv">person</span><span class="sr">;</span>
</code></pre></div></p>
<p>Then, having previously allocated memory (<code>addr</code>) to receive the record, we can define:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'prec'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'dyalog64|MEMCPY P &lt;{P F4 T[20]} P'</span>
<span class="w">      </span><span class="nv">prec</span><span class="w"> </span><span class="nv">addr</span><span class="p">(</span><span class="m">99</span><span class="w"> </span><span class="m">12345.60</span><span class="w"> </span><span class="s1">'Charlie Brown'</span><span class="p">)(</span><span class="m">4</span><span class="o">+</span><span class="m">4</span><span class="o">+</span><span class="m">20</span><span class="p">)</span>
</code></pre></div></p>
<h6>STRNCPY</h6>
<p><code>STRNCPY</code> is used to copy null-terminated strings between memory buffers.</p>
<p>Its C definition is:
<div class="highlight"><pre><span></span><code><span class="nv">void</span><span class="w"> </span><span class="o">*</span><span class="nv">STRNCPY</span><span class="p">(</span><span class="na">//</span><span class="w"> </span><span class="nv">copy</span><span class="w"> </span><span class="nv">null</span><span class="o">-</span><span class="nv">terminated</span><span class="w"> </span><span class="nv">string</span>
<span class="w">        </span><span class="nv">char</span><span class="w"> </span><span class="o">*</span><span class="nv">to</span><span class="o">,</span><span class="na">//</span><span class="w"> </span><span class="nv">target</span><span class="w"> </span><span class="nv">address</span>
<span class="w">        </span><span class="nv">char</span><span class="w"> </span><span class="o">*</span><span class="nv">fm</span><span class="o">,</span><span class="na">//</span><span class="w"> </span><span class="nv">source</span><span class="w"> </span><span class="nv">address</span>
<span class="w">        </span><span class="nv">size_t</span><span class="w"> </span><span class="nv">size</span><span class="na">//</span><span class="w"> </span><span class="nv">MAX</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">chars</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">copy</span>
<span class="w">        </span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p><code>STRNCPY</code> copies a maximum of <code>size</code> characters from the null-terminated source string at address <code>fm</code>, to the destination address <code>to</code>. If the source and destination strings overlap, the result is the first argument.</p>
<p>If the source string is shorter than <code>size</code>, a null character is appended to the destination string.</p>
<p>If the source string (including its terminating null) is longer than <code>size</code>, only <code>size</code> characters are copied and the resulting destination string is not null-terminated</p>
<p class="example">Example</p>
<p>Suppose that a database application returns a pointer (<code>addr</code>) to a structure that contains two (max 20-char) null-terminated strings.
<div class="highlight"><pre><span></span><code><span class="nv">typedef</span><span class="w"> </span><span class="nv">struct</span><span class="w"> </span><span class="kt">{</span><span class="w">  </span><span class="na">//</span><span class="w"> </span><span class="nv">null</span><span class="o">-</span><span class="nv">terminated</span><span class="w"> </span><span class="nv">strings</span><span class="bp">:</span>
<span class="w">        </span><span class="nv">char</span><span class="w"> </span><span class="nv">first</span><span class="sr">[</span><span class="m">20</span><span class="sr">];</span><span class="w">  </span><span class="na">//</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">max</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="nv">chars</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">null</span><span class="p">)</span><span class="na">.</span>
<span class="w">        </span><span class="nv">char</span><span class="w"> </span><span class="nv">last</span><span class="sr">[</span><span class="m">20</span><span class="sr">];</span><span class="w">   </span><span class="na">//</span><span class="w"> </span><span class="nv">last</span><span class="w"> </span><span class="nv">name</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">max</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="nv">chars</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">null</span><span class="p">)</span><span class="na">.</span>
<span class="w">        </span><span class="kt">}</span><span class="w"> </span><span class="nv">name</span><span class="sr">;</span>
</code></pre></div></p>
<p>To copy the names <em>from</em> the structure:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'get'</span><span class="nf">⎕NA</span><span class="s1">'dyalog64|STRNCPY &gt;0T1[] P U4'</span>
<span class="w">      </span><span class="nv">get</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="nv">addr</span><span class="w"> </span><span class="m">20</span>
<span class="nv">Charlie</span>
<span class="w">      </span><span class="nv">get</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="p">(</span><span class="nv">addr</span><span class="o">+</span><span class="m">20</span><span class="p">)</span><span class="w"> </span><span class="m">20</span>
<span class="nv">Brown</span>
</code></pre></div></p>
<p>Note that (as this is a 64-bit example), <code>⎕FR</code> must be 1287 for the addition to be reliable.</p>
<p>To copy data <em>from</em> the workspace <em>into</em> an already allocated (<code>new</code>) structure:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'put'</span><span class="nf">⎕NA</span><span class="s1">'dyalog32|STRNCPY I4 &lt;0T[] U4'</span>
<span class="w">      </span><span class="nv">put</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="s1">'Bo'</span><span class="w"> </span><span class="m">20</span>
<span class="w">      </span><span class="nv">put</span><span class="w"> </span><span class="p">(</span><span class="nv">new</span><span class="o">+</span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="s1">'Peep'</span><span class="w"> </span><span class="m">20</span>
</code></pre></div></p>
<p>Notice in this example that you must ensure that names no longer than 19 characters are passed to <code>put</code>. More than 19 characters would not leave STRNCPY enough space to include the trailing null, which would probably cause the application to fail.</p>
<h6>STRNCPYA</h6>
<p>This is a synonym for STRNCPY. It is there so that STRNCPY* (on Windows) selects between STRNCPYA and STRNCPYW.</p>
<h6>STRNCPYW</h6>
<p>This is a cover for the C standard function <code>wcsncpy()</code>. It is named this way so that (on Windows) STRNCPY* will behave helpfully.</p>
<h6>STRLEN</h6>
<p><code>STRLEN</code> calculates the length of a C string (a 0-terminated string of bytes in memory). Its C declaration is:
<div class="highlight"><pre><span></span><code><span class="nv">size_t</span><span class="w"> </span><span class="nv">STRLEN</span><span class="p">(</span><span class="w">         </span><span class="na">//</span><span class="w"> </span><span class="nv">calculate</span><span class="w"> </span><span class="nv">length</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">string</span>
<span class="w">        </span><span class="nv">const</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="o">*</span><span class="nv">s</span><span class="w">    </span><span class="na">//</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">string</span>
<span class="w">        </span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p class="example">Example</p>
<p>Suppose that a database application returns a pointer (<code>addr</code>) to a null-terminated string and you do not know the upper bound on the length of the string.</p>
<p>To copy the string into the workspace:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'len'</span><span class="nf">⎕NA</span><span class="s1">'P dyalog32|STRLEN P'</span>
<span class="w">      </span><span class="s1">'cpy'</span><span class="nf">⎕NA</span><span class="s1">'dyalog32|MEMCPY &gt;T[] P P'</span>
<span class="w">      </span><span class="nv">cpy</span><span class="w"> </span><span class="nv">l</span><span class="w"> </span><span class="nv">addr</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="kd">←</span><span class="nv">len</span><span class="w"> </span><span class="nv">addr</span><span class="p">)</span>
<span class="nv">Bartholemew</span>
</code></pre></div></p>
<p><h7 class="example">Examples</h7></p>
<p>The following examples all use functions from the Microsoft Windows <code>user32.dll</code>.</p>
<p>This DLL should be located in a standard Windows directory, so you should not normally need to give the full path name of the library. However if trying these examples results in the error message <code>FILE ERROR 1 No such file or directory</code>, you must locate the DLL and supply the full path name (and possibly extension).</p>
<h6>Example 1: GetCaretBlinkTime()</h6>
<p>The Windows function <code>GetCaretBlinkTime</code> retrieves the caret blink rate.  It takes no arguments and returns an unsigned <em>int</em> and is declared as follows:</p>
<p><code>UINT GetCaretBlinkTime(void);</code></p>
<p>The following statements would provide access to this routine through an APL function of the same name.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'U user32|GetCaretBlinkTime'</span>
<span class="w">      </span><span class="nv">GetCaretBlinkTime</span>
<span class="m">530</span>
</code></pre></div></p>
<p>The following statement would achieve the same thing, but using an APL function called <code>BLINK</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'BLINK'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'U user32|GetCaretBlinkTime'</span>
<span class="w">      </span><span class="nv">BLINK</span>
<span class="m">530</span>
</code></pre></div></p>
<h6># Example 2: SetCaretBlinkTime()</h6>
<p>The Windows function <code>SetCaretBlinkTime</code> sets the caret blink rate.  It takes a single unsigned <em>int</em> argument, does not return a result and is declared as follows:</p>
<p><code>void SetCaretBlinkTime(UINT);</code></p>
<p>The following statements would provide access to this routine through an APL function of the same name:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'user32|SetCaretBlinkTime U'</span>
<span class="w">      </span><span class="nv">SetCaretBlinkTime</span><span class="w"> </span><span class="m">1000</span>
</code></pre></div></p>
<h6># Example 3: MessageBox()</h6>
<p>The Windows function <code>MessageBox</code> displays a standard dialog box on the screen and awaits a response from the user.  It takes 4 arguments.  The first is the window handle for the window that owns the message box.  This is declared as an unsigned <em>int</em>.  The second and third arguments are both pointers to null-terminated strings containing the message to be displayed in the Message Box and the caption to be used in the window title bar.  The 4th argument is an unsigned <em>int</em> that specifies the Message Box type.  The result is an <em>int</em> which indicates which of the buttons in the message box the user has pressed.  The function is declared as follows:
<div class="highlight"><pre><span></span><code><span class="nv">int</span><span class="w"> </span><span class="nv">MessageBox</span><span class="p">(</span><span class="nv">HWND</span><span class="o">,</span><span class="w"> </span><span class="nv">LPCSTR</span><span class="o">,</span><span class="w"> </span><span class="nv">LPCSTR</span><span class="o">,</span><span class="w"> </span><span class="nv">UINT</span><span class="p">)</span><span class="sr">;</span>
</code></pre></div></p>
<p>The following statements provide access to this routine through an APL function of the same name. Note that the 2nd and 3rd arguments are both coded as input pointers to type T null-terminated character arrays which ensures portability between Editions.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I user32|MessageBox* P &lt;0T &lt;0T U'</span>
</code></pre></div></p>
<p>The following statement displays a Message Box with a stop sign icon together with 2 push buttons labelled OK and Cancel (this is specified by the value 19).
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MessageBox</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s1">'Message'</span><span class="w"> </span><span class="s1">'Title'</span><span class="w"> </span><span class="m">19</span>
</code></pre></div></p>
<p>The function works equally well in the Unicode Edition because the &lt;0T specification is portable.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MessageBox</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s1">'Το Μήνυμα'</span><span class="w"> </span><span class="s1">'Ο Τίτλος'</span><span class="w"> </span><span class="m">19</span>
</code></pre></div></p>
<p>Note that a simpler, portable (and safer) method for displaying a Message Box is to use Dyalog APL's primitive <code>MsgBox</code> object.</p>
<h6># Example 4: FindWindow()</h6>
<p>The Windows function <code>FindWindow</code> obtains the window handle of a window which has a given character string in its title bar.  The function takes two arguments.  The first is a pointer to a null-terminated character string that specifies the window's class name. However, if you are not interested in the class name, this argument should be a NULL pointer.  The second is a pointer to a character string that specifies the title that identifies the window in question.  This is an example of a case described above where two instances of the function must be defined to cater for the two different types of argument.  However, in practice this function is most often used without specifying the class name.  The function is declared as follows:</p>
<p><code>HWND FindWindow(LPCSTR, LPCSTR);</code></p>
<p>The following statement associates the APL function <code>FW</code> with the second variant of the FindWindow call, where the class name is specified as a NULL pointer.  To indicate that APL is to pass the <em>value</em> of the NULL pointer, rather than its address, we need to code this argument as <code>I4</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'FW'</span><span class="w"> </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'P user32|FindWindow* P &lt;0T'</span>
</code></pre></div></p>
<p>To obtain the handle of the window entitled "CLEAR WS - Dyalog APL/W":
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">HNDL</span><span class="kd">←</span><span class="nv">FW</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="s1">'CLEAR WS - Dyalog APL/W'</span>
<span class="m">59245156</span>
</code></pre></div></p>
<h6># Example 5: GetWindowText()</h6>
<p>The Windows function <code>GetWindowText</code> retrieves the caption displayed in a window's title bar.  It takes 3 arguments.  The first is an unsigned <em>int</em> containing the window handle.  The second is a pointer to a buffer to receive the caption as a null-terminated character string.  This is an example of an output array.  The third argument is an <em>int</em> which specifies the maximum number of characters to be copied into the output buffer.  The function returns an <em>int</em> containing the actual number of characters copied into the buffer and is declared as follows:</p>
<p><code>int GetWindowText(HWND, LPSTR, int);</code></p>
<p>The following associates the "<code>GetWindowText</code>" DLL function with an APL function of the same name.  Note that the second argument is coded as "<code>&gt;0T</code>" indicating that it is a pointer to a character output array.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I user32|GetWindowText* P &gt;0T I'</span>
</code></pre></div></p>
<p>Now change the Session caption using <code>)WSID</code> :
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">WSID</span><span class="w"> </span><span class="nv">MYWS</span>
<span class="nv">was</span><span class="w"> </span><span class="nv">CLEAR</span><span class="w"> </span><span class="nv">WS</span>
</code></pre></div></p>
<p>Then retrieve the new caption (max length 255) using window handle <code>HNDL</code> from the previous example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">GetWindowText</span><span class="w"> </span><span class="nv">HNDL</span><span class="w"> </span><span class="m">255</span><span class="w"> </span><span class="m">255</span>
<span class="na">.</span><span class="kd">→</span><span class="o">-------------------------</span><span class="na">.</span>
<span class="o">|</span><span class="w">    </span><span class="na">.</span><span class="kd">→</span><span class="o">------------------</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="o">|</span><span class="nv">MYWS</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="na">/</span><span class="nv">W</span><span class="o">|</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="s1">'-------------------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊-------------------------'</span>
</code></pre></div></p>
<p>There are three points to note.</p>
<ol>
<li>Firstly, the number 255 is supplied as the second argument.  This instructs APL to allocate a buffer large enough for a 255-element character vector into which the DLL routine will write.</li>
<li>Secondly, the result of the APL function is a nested vector of 2 elements.  The first element is the result of the DLL function.  The second element is the output character array. </li>
<li>Finally, notice that although we reserved space for 255 elements, the result reflects the length of the actual text (19).</li>
</ol>
<p>An alternative way of coding and using this function is to treat the second argument as an input/output array.</p>
<p>e.g.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'I User32|GetWindowText* P =0T I'</span>
<span class="w"> </span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">GetWindowText</span><span class="w"> </span><span class="nv">HNDL</span><span class="w"> </span><span class="p">(</span><span class="m">255</span><span class="o">⍴</span><span class="s1">' '</span><span class="p">)</span><span class="w"> </span><span class="m">255</span>
<span class="na">.</span><span class="kd">→</span><span class="o">-------------------------</span><span class="na">.</span>
<span class="o">|</span><span class="w">    </span><span class="na">.</span><span class="kd">→</span><span class="o">------------------</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="o">|</span><span class="nv">MYWS</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="na">/</span><span class="nv">W</span><span class="o">|</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="s1">'-------------------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊-------------------------'</span>
</code></pre></div></p>
<p>In this case, the second argument is coded as <code>=0T</code>, so when the function is called an array of the appropriate size must be supplied.  This method uses more space in the workspace, although for small arrays (as in this case) the real impact of doing so is negligible.</p>
<h6># Example 6: GetCharWidth()</h6>
<p>The function <code>GetCharWidth</code> returns the width of each character in a given range. Its first argument is a device context (handle).  Its second and third arguments specify font positions (start and end).  The third argument is the resulting integer vector that contains the character widths (this is an example of an output array).  The function returns a Boolean value to indicate success or failure.  The function is defined as follows.  Note that this function is provided in the library: <code>gdi32.dll</code>.</p>
<p><code>BOOL GetCharWidth(HDC, UINT, UINT, LPINT);</code></p>
<p>The following statements provide access to this routine through an APL function of the same name:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NA</span><span class="w"> </span><span class="s1">'U4 gdi32|GetCharWidth* P U U &gt;I[]'</span>
<span class="w"> </span>
<span class="w">     </span><span class="s1">'Prin'</span><span class="nf">⎕WC</span><span class="s1">'Printer'</span>
<span class="w"> </span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">GetCharWidth</span><span class="w"> </span><span class="p">(</span><span class="s1">'Prin'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Handle'</span><span class="p">)</span><span class="w"> </span><span class="m">65</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>
<span class="na">.</span><span class="kd">→</span><span class="o">-------------</span><span class="na">.</span>
<span class="o">|</span><span class="w">   </span><span class="na">.</span><span class="kd">→</span><span class="o">-------</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">|</span><span class="m">50</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">50</span><span class="o">|</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">   </span><span class="s1">'~-------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊-------------'</span>
</code></pre></div></p>
<p>Note: <code>'Prin'⎕WG'Handle'</code> returns a handle which is represented as a number. The number will be in the range (0 - 2<em>32] on a 32-bit version and (0 - 2</em>64] on a 64-bit version. These can be passed to a P type parameter. Older versions used a 32-bit signed integer.</p>
<h6># Example 7: quadna workspace</h6>
<p>The following example from the supplied workspace: quadna.dws. <code>quadna</code> illustrates several techniques which are important in advanced <code>⎕NA</code> programming. Function <code>DllVersion</code> returns the major and minor version number for a given DLL. Note that this example assumes that the computer is running the 64-bit version of Dyalog.</p>
<p>In advanced DLL programming, it is often necessary to administer memory outside APL's workspace. In general, the procedure for such use is:</p>
<ol>
<li>Allocate global memory.</li>
<li>Lock the memory.</li>
<li>Copy any DLL input information from workspace into memory.</li>
<li>Call the DLL function.</li>
<li>Copy any DLL output information from memory to workspace.</li>
<li>Unlock the memory.</li>
<li>Free the memory.</li>
</ol>
<p>Notice that steps 1 and 7 and steps 2 and 6 complement each other. That is, if you allocate global system memory, you must free it after you have finished using it. If you continue to use global memory without freeing it, your system will gradually run out of resources. Similarly, if you lock memory (which you must do before using it), then you should unlock it before freeing it. Although on some versions of Windows, freeing the memory will include unlocking it, in the interests of good style, maintaining the symmetry is probably a good thing.
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">version</span><span class="kd">←</span><span class="nv">DllVersion</span><span class="w"> </span><span class="nv">file</span><span class="sr">;</span><span class="nv">Alloc</span><span class="sr">;</span><span class="nv">Free</span><span class="sr">;</span><span class="nv">Lock</span><span class="sr">;</span><span class="nv">Unlock</span><span class="sr">;</span><span class="nv">Size</span>
<span class="w">                  </span><span class="sr">;</span><span class="nv">Info</span><span class="sr">;</span><span class="nv">Value</span><span class="sr">;</span><span class="nv">Copy</span><span class="sr">;</span><span class="nv">size</span><span class="sr">;</span><span class="nv">hndl</span><span class="sr">;</span><span class="nv">addr</span><span class="sr">;</span><span class="nv">buff</span><span class="sr">;</span><span class="nv">ok</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">  </span><span class="s1">'Alloc'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32|GlobalAlloc U4 P'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="s1">'Free'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32|GlobalFree P'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="s1">'Lock'</span><span class="nf">⎕NA</span><span class="s1">'P kernel32|GlobalLock P'</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="s1">'Unlock'</span><span class="nf">⎕NA</span><span class="s1">'U4 kernel32|GlobalUnlock P'</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">  </span><span class="s1">'Size'</span><span class="nf">⎕NA</span><span class="s1">'U4 version|GetFileVersionInfoSize* &lt;0T &gt;U4'</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">  </span><span class="s1">'Info'</span><span class="nf">⎕NA</span><span class="s1">'U4 version|GetFileVersionInfo*&lt;0T U4 U4 P'</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w"> </span><span class="s1">'Value'</span><span class="nf">⎕NA</span><span class="s1">'U4 version|VerQueryValue* P &lt;0T &gt;P &gt;U4'</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">11</span><span class="sr">]</span><span class="w"> </span><span class="s1">'Copy'</span><span class="nf">⎕NA</span><span class="s1">'dyalog64|MEMCPY &gt;U4[] P P'</span>
<span class="sr">[</span><span class="m">12</span><span class="sr">]</span>
<span class="sr">[</span><span class="m">13</span><span class="sr">]</span><span class="w">  </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="o">×</span><span class="nv">size</span><span class="kd">←</span><span class="o">⊃</span><span class="nv">Size</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="m">0</span><span class="w">               </span><span class="c1">⍝ Size of info</span>
<span class="sr">[</span><span class="m">14</span><span class="sr">]</span><span class="w">  </span><span class="bp">:</span><span class="nv">AndIf</span><span class="w"> </span><span class="o">×</span><span class="nv">hndl</span><span class="kd">←</span><span class="nv">Alloc</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">size</span><span class="w">            </span><span class="c1">⍝ Alloc memory</span>
<span class="sr">[</span><span class="m">15</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="o">×</span><span class="nv">addr</span><span class="kd">←</span><span class="nv">Lock</span><span class="w"> </span><span class="nv">hndl</span><span class="w">                </span><span class="c1">⍝ Lock memory</span>
<span class="sr">[</span><span class="m">16</span><span class="sr">]</span><span class="w">      </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="o">×</span><span class="nv">Info</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">size</span><span class="w"> </span><span class="nv">addr</span><span class="w">       </span><span class="c1">⍝ Version info</span>
<span class="sr">[</span><span class="m">17</span><span class="sr">]</span><span class="w">        </span><span class="nv">ok</span><span class="w"> </span><span class="nv">buff</span><span class="w"> </span><span class="nv">size</span><span class="kd">←</span><span class="nv">Value</span><span class="w"> </span><span class="nv">addr</span><span class="s1">'\'</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Version value</span>
<span class="sr">[</span><span class="m">18</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">ok</span>
<span class="sr">[</span><span class="m">19</span><span class="sr">]</span><span class="w">          </span><span class="nv">buff</span><span class="kd">←</span><span class="nv">Copy</span><span class="p">(</span><span class="nv">size</span><span class="o">÷</span><span class="m">4</span><span class="p">)</span><span class="nv">buff</span><span class="w"> </span><span class="nv">size</span><span class="w">   </span><span class="c1">⍝ Copy info</span>
<span class="sr">[</span><span class="m">20</span><span class="sr">]</span><span class="w">          </span><span class="nv">version</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="na">/</span><span class="m">2</span><span class="o">*</span><span class="m">16</span><span class="p">)</span><span class="o">⊤⊃</span><span class="m">2</span><span class="o">↓</span><span class="nv">buff</span><span class="w">     </span><span class="c1">⍝ Split version</span>
<span class="sr">[</span><span class="m">21</span><span class="sr">]</span><span class="w">        </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">22</span><span class="sr">]</span><span class="w">      </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">23</span><span class="sr">]</span><span class="w">      </span><span class="nv">ok</span><span class="kd">←</span><span class="nv">Unlock</span><span class="w"> </span><span class="nv">hndl</span><span class="w">                   </span><span class="c1">⍝ Unlock memory</span>
<span class="sr">[</span><span class="m">24</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="sr">[</span><span class="m">25</span><span class="sr">]</span><span class="w">    </span><span class="nv">ok</span><span class="kd">←</span><span class="nv">Free</span><span class="w"> </span><span class="nv">hndl</span><span class="w">                       </span><span class="c1">⍝ Free memory</span>
<span class="sr">[</span><span class="m">26</span><span class="sr">]</span><span class="w">  </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="w">    </span><span class="bp">∇</span>
</code></pre></div></p>
<p>Lines [2-11] associate APL function names with the DLL functions that will be used.</p>
<p>Lines [2-5] associate functions to administer global memory.</p>
<p>Lines [7-9] associate functions to extract version information from a DLL.</p>
<p>Line[11] associates <code>Copy</code> with <code>MEMCPY</code> function from <strong>dyalog64.dll</strong>.</p>
<p>Lines [13-26] call the DLL functions.</p>
<p>Line [13] requests the size of buffer required to receive version information for the DLL. A size of 0 will be returned if the DLL does not contain version information.</p>
<p><strong>Notice that</strong> care is taken to balance memory allocation and release:</p>
<p>On line [14], the :If clause is taken only if the global memory allocation is successful, in which case (and only then) a corresponding Free is called on line [25].</p>
<p>Unlock on line[23] is called if  and only if the call to Lock on line [15] succeeds.</p>
<p>A result is returned from the function <em>only</em> if all the calls are successful Otherwise, the calling environment will sustain a <code>VALUE ERROR</code>.</p>
<h6># More Examples</h6>
<div class="highlight"><pre><span></span><code><span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegCloseKey          P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegCreateKeyEx*      P &lt;0T U4 &lt;0T U4 U4 P &gt;P &gt;U4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegEnumValue*        P U4 &gt;0T =U4 =U4 &gt;U4 &gt;0T =U4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegOpenKey*          P &lt;0T &gt;P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegOpenKeyEx*        P &lt;0T U4 U4 &gt;P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegQueryValueEx*     P &lt;0T =U4 &gt;U4 &gt;0T =U4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 advapi32 |RegSetValueEx*       P &lt;0T =U4 U4 &lt;0T U4'</span>
<span class="nf">⎕NA</span><span class="s1">'P  dyalog32 |STRNCPY              P P P'</span>
<span class="nf">⎕NA</span><span class="s1">'P  dyalog32 |STRNCPYA             P P P'</span>
<span class="nf">⎕NA</span><span class="s1">'P  dyalog32 |STRNCPYW             P P P'</span>
<span class="nf">⎕NA</span><span class="s1">'P  dyalog32 |MEMCPY               P P P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 gdi32    |AddFontResource*     &lt;0T'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 gdi32    |BitBlt               P I4 I4 I4 I4 P I4 I4 U4'</span>
<span class="nf">⎕NA</span><span class="s1">'U4 gdi32    |GetPixel             P I4 I4'</span>
<span class="nf">⎕NA</span><span class="s1">'P  gdi32    |GetStockObject       I4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 gdi32    |RemoveFontResource*  &lt;0T'</span>
<span class="nf">⎕NA</span><span class="s1">'U4 gdi32    |SetPixel             P I4 I4 U4'</span>
<span class="nf">⎕NA</span><span class="s1">'   glu32    |gluPerspective       F8 F8 F8 F8'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 kernel32 |CopyFile*            &lt;0T &lt;0T I4'</span>
<span class="nf">⎕NA</span><span class="s1">'P  kernel32 |GetEnvironmentStrings'</span>
<span class="nf">⎕NA</span><span class="s1">'U4 kernel32 |GetLastError'</span>
<span class="nf">⎕NA</span><span class="s1">'U4 kernel32 |GetTempPath*         U4 &gt;0T'</span>
<span class="nf">⎕NA</span><span class="s1">'P  kernel32 |GetProcessHeap'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 kernel32 |GlobalMemoryStatusEx ={U4 U4 U8 U8 U8 U8 U8 U8}'</span>
<span class="nf">⎕NA</span><span class="s1">'P  kernel32 |HeapAlloc            P U4 P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 kernel32 |HeapFree             P U4 P'</span>
<span class="nf">⎕NA</span><span class="s1">'   opengl32 |glClearColor         F4 F4 F4 F4'</span>
<span class="nf">⎕NA</span><span class="s1">'   opengl32 |glClearDepth         F8'</span>
<span class="nf">⎕NA</span><span class="s1">'   opengl32 |glEnable             U4'</span>
<span class="nf">⎕NA</span><span class="s1">'   opengl32 |glMatrixMode         U4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |ClientToScreen       P ={I4 I4}'</span>
<span class="nf">⎕NA</span><span class="s1">'P  user32   |FindWindow*          &lt;0T &lt;0T'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |ShowWindow           P I4'</span>
<span class="nf">⎕NA</span><span class="s1">'I2 user32   |GetAsyncKeyState     I4'</span>
<span class="nf">⎕NA</span><span class="s1">'P  user32   |GetDC                P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 User32   |GetDialogBaseUnits'</span>
<span class="nf">⎕NA</span><span class="s1">'P  user32   |GetFocus'</span>
<span class="nf">⎕NA</span><span class="s1">'U4 user32   |GetSysColor          I4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |GetSystemMetrics     I4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32    |InvalidateRgn        P P I4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |MessageBox*          P &lt;0T &lt;0T U4'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |ReleaseDC            P P'</span>
<span class="nf">⎕NA</span><span class="s1">'P  user32   |SendMessage*         P U4 P P'</span>
<span class="nf">⎕NA</span><span class="s1">'P  user32   |SetFocus             P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 user32   |WinHelp*             P &lt;0T U4 P'</span>
<span class="nf">⎕NA</span><span class="s1">'I4 winnm    |sndPlaySound         &lt;0T U4'</span>
</code></pre></div>
</article>
<article id="system-functions-nappend">
<div class="heading-container"><h3 class="heading" id="system-functions-nappend-header">Native File Append</h3><div class="command">{R}←X ⎕NAPPEND Y</div></div>
<p>This function appends the ravel of its left argument <code>X</code> to the end of the designated native file.  <code>X</code> must be a simple homogeneous APL array.  <code>Y</code> is a 1- or 2-element integer vector.  <code>Y[1]</code> is a negative integer that specifies the tie number of a native file.  The optional second element <code>Y[2]</code> specifies the data type to which the array <code>X</code> is to be converted before it is written to the file.</p>
<p>The shy result is the location of the internal file pointer which will be pointing to the end of the newly written data.</p>
<p>Note that <code>8 ⎕NINFO ⊃Y</code> can be used to report the current position of the file pointer.</p>
<h5>Unicode Edition</h5>
<p>Unless you specify the data type in <code>Y[2</code>], a character array will by default be written using type 80.</p>
<p>If the data will not fit into the specified character width (bytes) <code>⎕NAPPEND</code> will fail with a <code>DOMAIN ERROR</code>.</p>
<p>As a consequence of these two rules, you must specify the data type (either 160 or 320) in order to write Unicode characters whose code-point are in the range 256-65535 and &gt;65535 respectively.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">n</span><span class="kd">←</span><span class="s1">'test'</span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="s1">'abc'</span><span class="w"> </span><span class="nf">⎕nappend</span><span class="w"> </span><span class="nv">n</span>

<span class="w">      </span><span class="s1">'ταβέρνα'</span><span class="nf">⎕nappend</span><span class="w"> </span><span class="nv">n</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="s1">'ταβέρνα'</span><span class="nf">⎕NAPPEND</span><span class="w"> </span><span class="nv">n</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="s1">'ταβέρνα'</span><span class="nf">⎕NAPPEND</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">160</span>

<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span>
<span class="nv">abc</span>
<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">160</span><span class="w"> </span><span class="m">7</span>
<span class="err">ταβέρνα</span>
</code></pre></div>
<p>To write 2 or more lines, you must insert appropriate end-of-line codes.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'hello'</span><span class="o">,</span><span class="p">(</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="o">,</span><span class="s1">'world'</span><span class="p">)</span><span class="nf">⎕nappend</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="c1">⍝ Windows</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'hello'</span><span class="o">,</span><span class="p">(</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="o">,</span><span class="s1">'world'</span><span class="p">)</span><span class="nf">⎕nappend</span><span class="w"> </span><span class="m">¯1</span><span class="w">    </span><span class="c1">⍝ Other</span>
</code></pre></div></p>
</article>
<article id="system-functions-nc">
<div class="heading-container"><h3 class="heading" id="system-functions-nc-header">Name Classification</h3><div class="command">R←⎕NC Y</div></div>
<p><code>Y</code> must be a simple  character scalar, vector, matrix, or vector of vectors that specifies a list of names. <code>R</code> is a simple numeric vector containing one element per name in <code>Y</code>. Each element of <code>R</code> is the name class of the active referent to the object named in <code>Y</code>.</p>
<p>If <code>Y</code> is <strong>simple</strong>, a name class may be:</p>
<table>
<thead>
<tr>
<th>Name Class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>¯1</code></td>
<td>invalid name</td>
</tr>
<tr>
<td><code>0</code></td>
<td>undefined name</td>
</tr>
<tr>
<td><code>1</code></td>
<td>Label</td>
</tr>
<tr>
<td><code>2</code></td>
<td>Variable</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Function</td>
</tr>
<tr>
<td><code>4</code></td>
<td>Operator</td>
</tr>
<tr>
<td><code>8</code></td>
<td>Event</td>
</tr>
<tr>
<td><code>9</code></td>
<td>Object (GUI, namespace, COM, .NET)</td>
</tr>
</tbody>
</table>
<p>If <code>Y</code> is <strong>nested</strong> a more precise analysis of name class is obtained whereby different types  are identified by a decimal extension. For example, defined functions have name class 3.1, dfns have name class 3.2, and so forth. The complete set of name classification is as follows:</p>
<table>
<thead>
<tr>
<th> </th>
<th>Array (2)</th>
<th>Function (3)</th>
<th>Operator (4)</th>
<th>Namespace (9)</th>
</tr>
</thead>
<tbody>
<tr>
<td>n.1</td>
<td>Variable</td>
<td>Traditional</td>
<td>Traditional</td>
<td>Created by <code>⎕NS</code> , <code>)NS</code> or <code>:Namespace</code></td>
</tr>
<tr>
<td>n.2</td>
<td>Field</td>
<td>dfn</td>
<td>dop</td>
<td>Instance</td>
</tr>
<tr>
<td>n.3</td>
<td>Property</td>
<td>Derived or Primitive</td>
<td>Derived or Primitive</td>
<td> </td>
</tr>
<tr>
<td>n.4</td>
<td> </td>
<td> </td>
<td> </td>
<td>Class</td>
</tr>
<tr>
<td>n.5</td>
<td> </td>
<td> </td>
<td> </td>
<td>Interface</td>
</tr>
<tr>
<td>n.6</td>
<td>External Shared</td>
<td>External</td>
<td> </td>
<td>External Class</td>
</tr>
<tr>
<td>n.7</td>
<td> </td>
<td> </td>
<td> </td>
<td>External Interface</td>
</tr>
</tbody>
</table>
<p>In addition, values in <code>R</code> are negative to identify names of methods, properties and events that are inherited through the <em>class hierarchy</em> of the current class or instance.</p>
<h5>Variable (Name-Class 2.1)</h5>
<p>Conventional APL arrays have name-class 2.1.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">NUM</span><span class="kd">←</span><span class="m">88</span>
<span class="w">      </span><span class="nv">CHAR</span><span class="kd">←</span><span class="s1">'Hello World'</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="o">↑</span><span class="s1">'NUM'</span><span class="w"> </span><span class="s1">'CHAR'</span>
<span class="m">2</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'NUM'</span><span class="w"> </span><span class="s1">'CHAR'</span>
<span class="m">2.1</span><span class="w"> </span><span class="m">2.1</span>

<span class="w">      </span><span class="s1">'MYSPACE'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">MYSPACE</span><span class="na">.</span><span class="nv">VAR</span><span class="kd">←</span><span class="m">10</span>
<span class="w">      </span><span class="nv">MYSPACE</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'VAR'</span>
<span class="m">2</span>
<span class="w">      </span><span class="nv">MYSPACE</span><span class="na">.</span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'VAR'</span>
<span class="m">2.1</span>
</code></pre></div></p>
<h5>Field (Name-Class 2.2)</h5>
<p>Fields defined by APL Classes have name-class 2.2.
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">nctest</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Field</span><span class="w"> </span><span class="nv">Public</span><span class="w"> </span><span class="nv">pubFld</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Field</span><span class="w"> </span><span class="nv">pvtFld</span>

<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">NameClass</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span><span class="w"> </span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕NC</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ nctest       </span>

<span class="w">      </span><span class="nv">ncinst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">nctest</span>
</code></pre></div></p>
<p>The name-class of a Field, whether Public or Private, viewed from a Method that is executing within the Instance Space, is 2.2.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nv">NameClass</span><span class="s1">'pubFld'</span><span class="w"> </span><span class="s1">'pvtFld'</span>
<span class="m">2.2</span><span class="w"> </span><span class="m">2.2</span>
</code></pre></div></p>
<p>Note that an internal Method sees both Public and Private Fields in the Class Instance. However, when viewed from <em>outside</em> the instance, only public fields are visible
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'ncinst.pubFld'</span><span class="w"> </span><span class="s1">'ncinst.pvtFld'</span>
<span class="m">¯2.2</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>In this case, the name-class is negative to indicate that the name has been exposed by the class hierarchy, rather than existing in the associated namespace which APL has created to contain the instance. The same result is returned if <code>⎕NC</code> is executed inside this space:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'pubFld'</span><span class="w"> </span><span class="s1">'pvtFld'</span>
<span class="m">¯2.2</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Note that the names of Fields are reported as being <em>unused</em> if the argument to <code>⎕NC</code> is simple.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="o">⍴</span><span class="s1">'pubFldpvtFld'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Property (Name-Class 2.3)</h5>
<p>Properties defined by APL Classes have name-class 2.3.
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">nctest</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Field</span><span class="w"> </span><span class="nv">pvtFld</span><span class="kd">←</span><span class="m">99</span>

<span class="w">    </span><span class="bp">:</span><span class="nv">Property</span><span class="w"> </span><span class="nv">pubProp</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">        </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">get</span>
<span class="w">          </span><span class="nv">r</span><span class="kd">←</span><span class="nv">pvtFld</span>
<span class="w">        </span><span class="bp">∇</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndProperty</span>

<span class="w">    </span><span class="bp">:</span><span class="nv">Property</span><span class="w"> </span><span class="nv">pvtProp</span>
<span class="w">        </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">get</span>
<span class="w">          </span><span class="nv">r</span><span class="kd">←</span><span class="nv">pvtFld</span>
<span class="w">        </span><span class="bp">∇</span>
<span class="w">    </span><span class="bp">:</span><span class="nv">EndProperty</span>

<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">NameClass</span><span class="w"> </span><span class="nv">x</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕NC</span><span class="w"> </span><span class="nv">x</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="na">...</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ nctest       </span>

<span class="w">      </span><span class="nv">ncinst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">nctest</span>
</code></pre></div></p>
<p>The name-class of a Property, whether Public or Private, <em>viewed from a Method that is executing within the Instance Space</em>, is 2.3.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nv">NameClass</span><span class="s1">'pubProp'</span><span class="w"> </span><span class="s1">'pvtProp'</span>
<span class="m">2.3</span><span class="w"> </span><span class="m">2.3</span>
</code></pre></div></p>
<p>Note that an internal Method sees both Public and Private Properties in the Class Instance. However, when viewed from <em>outside</em> the instance, only Public Properties are visible
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'ncinst.pubProp'</span><span class="w"> </span><span class="s1">'ncinst.pvtProp'</span>
<span class="m">¯2.3</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>In this case, the name-class is negative to indicate that the name has been exposed by the class hierarchy, rather than existing in the associated namespace which APL has created to contain the instance. The same result is returned if <code>⎕NC</code> is executed inside this space:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'pubProp'</span><span class="w"> </span><span class="s1">'pvtProp'</span>
<span class="m">¯2.3</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Note that the names of Properties are reported as being <em>unused</em> if the argument to <code>⎕NC</code> is simple.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ncinst</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="o">⍴</span><span class="s1">'pubProppvtProp'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>External Property (Name-Class 2.6)</h5>
<p>Properties exposed by external objects (.NET and COM and the APL GUI) have name-class <code>¯2.6</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">2006</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="nv">dt</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'Day'</span><span class="w"> </span><span class="s1">'Month'</span><span class="w"> </span><span class="s1">'Year'</span>
<span class="m">¯2.6</span><span class="w"> </span><span class="m">¯2.6</span><span class="w"> </span><span class="m">¯2.6</span>

<span class="w">      </span><span class="s1">'ex'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'OLEClient'</span><span class="w"> </span><span class="s1">'Excel.Application'</span>
<span class="w">      </span><span class="nv">ex</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Version'</span><span class="w"> </span><span class="s1">'Visible'</span>
<span class="m">¯2.6</span><span class="w"> </span><span class="m">¯2.6</span><span class="w"> </span><span class="m">¯2.6</span>

<span class="w">     </span><span class="s1">'f'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Size'</span>
<span class="m">¯2.6</span><span class="w"> </span><span class="m">¯2.6</span>
</code></pre></div></p>
<p>Note that the names of such Properties are reported as being <em>unused</em> if the argument to <code>⎕NC</code> is simple.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="o">⍴</span><span class="s1">'CaptionSize   '</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Defined Function (Name-Class 3.1)</h5>
<p>Traditional APL defined functions have name-class 3.1.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">AVG</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="nv">AVG</span><span class="w"> </span><span class="o">⍳</span><span class="m">100</span>
<span class="m">50.5</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'AVG'</span>
<span class="m">3</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'AVG'</span>
<span class="m">3.1</span>

<span class="w">      </span><span class="s1">'MYSPACE'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">'AVG'</span>
<span class="w">       </span><span class="nv">MYSPACE</span><span class="na">.</span><span class="nv">AVG</span><span class="w"> </span><span class="o">⍳</span><span class="m">100</span>
<span class="m">50.5</span>

<span class="w">      </span><span class="nv">MYSPACE</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'AVG'</span>
<span class="m">3</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'MYSPACE.AVG'</span>
<span class="m">3.1</span>
</code></pre></div></p>
<p>Note that a function that is simply cloned from a defined function by assignment retains its name-class.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MEAN</span><span class="kd">←</span><span class="nv">AVG</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'AVG'</span><span class="w"> </span><span class="s1">'MEAN'</span>
<span class="m">3.1</span><span class="w"> </span><span class="m">3.1</span>
</code></pre></div></p>
<p>Whereas, the name of a function that amalgamates a defined function with any other functions has the name-class of a Derived Function, i.e. 3.3.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">VMEAN</span><span class="kd">←</span><span class="nv">AVG</span><span class="na">∘</span><span class="o">,</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'AVG'</span><span class="w"> </span><span class="s1">'VMEAN'</span>
<span class="m">3.1</span><span class="w"> </span><span class="m">3.3</span>
</code></pre></div></p>
<h5>Dfn (Name-Class 3.2)</h5>
<p>Dfns have name-class 3.2
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Avg</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷⍴</span><span class="bp">⍵</span><span class="kt">}</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'Avg'</span>
<span class="m">3</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'Avg'</span>
<span class="m">3.2</span>
</code></pre></div></p>
<h5>Derived Function (Name-Class 3.3)</h5>
<p>Names that reference a primitive or derived function have a name-class of 3.3.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">PLUS</span><span class="kd">←</span><span class="o">+</span>
<span class="w">      </span><span class="nv">SUM</span><span class="kd">←</span><span class="o">+</span><span class="na">/</span>
<span class="w">      </span><span class="nv">CUM</span><span class="kd">←</span><span class="nv">PLUS</span><span class="na">\</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'PLUS'</span><span class="w"> </span><span class="s1">'SUM'</span><span class="w"> </span><span class="s1">'CUM'</span>
<span class="m">3.3</span><span class="w"> </span><span class="m">3.3</span><span class="w"> </span><span class="m">3.3</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="s1">'PLUSSUM CUM '</span>
<span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>Note the difference between the name-class of a name referring to a defined function (3.1) and that of a name referring to a defined function bound with an operator to form a derived function (3.3). Trains, being derived functions, also have  nameclass 3.3.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">AVG</span><span class="w"> </span><span class="nv">X</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">MEAN</span><span class="kd">←</span><span class="nv">AVG</span>
<span class="w">      </span><span class="nv">VMEAN</span><span class="kd">←</span><span class="nv">AVG</span><span class="na">∘</span><span class="o">,</span>

<span class="w">      </span><span class="nv">negrec</span><span class="kd">←</span><span class="o">-,÷</span><span class="w"> </span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'AVG'</span><span class="w"> </span><span class="s1">'MEAN'</span><span class="w"> </span><span class="s1">'VMEAN'</span><span class="w"> </span><span class="s1">'negrec'</span>
<span class="m">3.1</span><span class="w"> </span><span class="m">3.1</span><span class="w"> </span><span class="m">3.3</span><span class="w"> </span><span class="m">3.3</span>
</code></pre></div></p>
<h5>External Function (Name-Class 3.6)</h5>
<p>Methods exposed by the Dyalog APL GUI and COM and .NET objects have name-class <code>¯3.6</code>. Methods exposed by External Functions created using <code>⎕NA</code> and <code>⎕SH</code> all have name-class <code>3.6</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'GetTextSize'</span><span class="w"> </span><span class="s1">'GetFocus'</span>
<span class="m">¯3.6</span><span class="w"> </span><span class="m">¯3.6</span>

<span class="w">      </span><span class="s1">'EX'</span><span class="nf">⎕WC</span><span class="s1">'OLEClient'</span><span class="w"> </span><span class="s1">'Excel.Application'</span>
<span class="w">      </span><span class="nv">EX</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'Wait'</span><span class="w"> </span><span class="s1">'Save'</span><span class="w"> </span><span class="s1">'Quit'</span>
<span class="m">¯3.6</span><span class="w"> </span><span class="m">¯3.6</span><span class="w"> </span><span class="m">¯3.6</span>

<span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">2006</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="nv">dt</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'AddDays'</span><span class="w"> </span><span class="s1">'AddHours'</span>
<span class="m">¯3.6</span><span class="w"> </span><span class="m">¯3.6</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'beep'</span><span class="nf">⎕NA</span><span class="s1">'user32|MessageBeep i'</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'beep'</span>
<span class="m">3</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'beep'</span>
<span class="m">3.6</span>
<span class="w">      </span><span class="s1">'xutils'</span><span class="nf">⎕SH</span><span class="s1">''</span>
<span class="w">      </span><span class="p">)</span><span class="nv">FNS</span>
<span class="nv">avx</span><span class="w">     </span><span class="nv">box</span><span class="w">     </span><span class="nv">dbr</span><span class="w">     </span><span class="nv">getenv</span><span class="w">  </span><span class="nv">hex</span><span class="w">     </span><span class="nv">ltom</span><span class="w">    </span><span class="nv">ltov</span><span class="w">    </span><span class="nv">mtol</span><span class="w">    </span><span class="nv">ss</span><span class="w">      </span><span class="nv">vtol</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'hex'</span><span class="w"> </span><span class="s1">'ss'</span>
<span class="m">3.6</span><span class="w"> </span><span class="m">3.6</span><span class="w"> </span>
</code></pre></div></p>
<p>Note that the names of such Methods are reported as being <em>unused</em> if the argument to <code>⎕NC</code> is simple.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NC</span><span class="o">↑</span><span class="s1">'GetTextSize'</span><span class="w"> </span><span class="s1">'GetFocus'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>Operator (Name-Class 4.1)</h5>
<p>Traditional Defined Operators have name-class 4.1.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">FILTER</span><span class="bp">∇</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">VEC</span><span class="kd">←</span><span class="p">(</span><span class="nv">P</span><span class="w"> </span><span class="nv">FILTER</span><span class="p">)</span><span class="nv">VEC</span><span class="w">  </span><span class="c1">⍝ Select from VEC those elts ..</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">VEC</span><span class="kd">←</span><span class="p">(</span><span class="nv">P</span><span class="na">¨</span><span class="nv">VEC</span><span class="p">)</span><span class="na">/</span><span class="nv">VEC</span><span class="w">    </span><span class="c1">⍝ for which BOOL fn P is true.</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'FILTER'</span>
<span class="m">4</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'FILTER'</span>
<span class="m">4.1</span>
</code></pre></div></p>
<h5>Dop (Name-Class 4.2)</h5>
<p>Dops have name-class 4.2.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">pred</span><span class="kd">←</span><span class="kt">{</span><span class="nf">⎕IO</span><span class="w"> </span><span class="nf">⎕ML</span><span class="kd">←</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w">   </span><span class="c1">⍝ Partitioned reduction.</span>
<span class="w">     </span><span class="o">⊃</span><span class="bp">⍺⍺</span><span class="na">/¨</span><span class="p">(</span><span class="bp">⍺</span><span class="na">/</span><span class="o">⍳⍴</span><span class="bp">⍺</span><span class="p">)</span><span class="o">⊂</span><span class="bp">⍵</span>
<span class="w">     </span><span class="kt">}</span>

<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="nv">pred</span><span class="w"> </span><span class="o">⍳</span><span class="m">10</span>
<span class="m">3</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">21</span><span class="w"> </span><span class="m">19</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'pred'</span>
<span class="m">4</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'pred'</span>
<span class="m">4.2</span>
</code></pre></div></p>
<h5>Derived Operator (Name-Class 4.3)</h5>
<p>Derived operators include:</p>
<ul>
<li>A name referring to a monadic operator.</li>
<li>A dyadic operator curried with its right-operand. </li>
</ul>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">each</span><span class="kd">←</span><span class="na">¨</span>
<span class="w">       </span><span class="nv">each</span>
<span class="na">¨</span>
<span class="w">       </span><span class="nf">⎕NC</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'each'</span>
<span class="m">4.3</span><span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">inv</span><span class="kd">←</span><span class="na">⍣</span><span class="m">¯1</span>
<span class="w">       </span><span class="nv">inv</span>
<span class="na">⍣</span><span class="w"> </span><span class="m">¯1</span>
<span class="w">       </span><span class="nf">⎕NC</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'inv'</span>
<span class="m">4.3</span>
<span class="w">       </span><span class="nv">c2f</span><span class="kd">←</span><span class="p">(</span><span class="m">32</span><span class="na">∘</span><span class="o">+</span><span class="p">)</span><span class="na">∘</span><span class="p">(</span><span class="o">×</span><span class="na">∘</span><span class="m">1.8</span><span class="p">)</span><span class="w"> </span><span class="c1">⍝ Centigrade to Fahrenheit</span>
<span class="w">       </span><span class="nv">f2c</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">100</span>
<span class="m">32</span><span class="w"> </span><span class="m">212</span>
<span class="w">       </span><span class="nv">f2c</span><span class="w"> </span><span class="nv">inv</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">212</span><span class="w">     </span><span class="c1">⍝ Fahrenheit to Centigrade</span>
<span class="m">0</span><span class="w"> </span><span class="m">100</span>
</code></pre></div></p>
<h5>External Event (Name-Class 8.6)</h5>
<p>Events exposed by Dyalog APL GUI objects, COM and .NET objects have name-class <code>¯8.6</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'Form'</span><span class="p">(</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Dyalog GUI Form'</span><span class="p">)</span>
<span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'Close'</span><span class="w"> </span><span class="s1">'Configure'</span><span class="w"> </span><span class="s1">'MouseDown'</span>
<span class="m">¯8.6</span><span class="w"> </span><span class="m">¯8.6</span><span class="w"> </span><span class="m">¯8.6</span>

<span class="w">      </span><span class="nv">xl</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'OLEClient'</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'ClassName'</span><span class="w"> </span><span class="s1">'Excel.Application'</span><span class="p">)</span>
<span class="w">      </span><span class="nv">xl</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">8</span>
<span class="w"> </span><span class="nv">NewWorkbook</span><span class="w">  </span><span class="nv">SheetActivate</span><span class="w">  </span><span class="nv">SheetBeforeDoubleClick</span><span class="w"> </span><span class="na">...</span>

<span class="w">      </span><span class="nv">xl</span><span class="na">.</span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'SheetActivate'</span><span class="w"> </span><span class="s1">'SheetCalculate'</span>
<span class="m">¯8.6</span><span class="w"> </span><span class="m">¯8.6</span>

<span class="w">    </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System.Windows.Forms,system.windows.forms.dll'</span>
<span class="w">    </span><span class="nf">⎕NC</span><span class="o">,⊂</span><span class="s1">'Form'</span>
<span class="m">9.6</span>
<span class="w">    </span><span class="nv">Form</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">8</span>
<span class="w"> </span><span class="nv">Activated</span><span class="w">  </span><span class="nv">BackgroundImageChanged</span><span class="w">  </span><span class="nv">BackColorChanged</span><span class="w"> </span><span class="na">...</span>
</code></pre></div></p>
<h5>Namespace (Name-Class 9.1)</h5>
<p>Plain namespaces created using <code>⎕</code>NS, or fixed from a <code>:Namespace</code> script, have name-class 9.1.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'MYSPACE'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'MYSPACE'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'MYSPACE'</span>
<span class="m">9.1</span>
</code></pre></div></p>
<p>Note however that a namespace created by cloning, where the right argument to <code>⎕NS</code> is a <code>⎕OR</code> of a namespace, retains the name-class of the original space.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'CopyMYSPACE'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="nf">⎕OR</span><span class="w"> </span><span class="s1">'MYSPACE'</span>
<span class="w">      </span><span class="s1">'CopyF'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="nf">⎕OR</span><span class="w"> </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'MYSPACE'</span><span class="w"> </span><span class="s1">'F'</span>
<span class="m">9.1</span><span class="w"> </span><span class="m">9.2</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'CopyMYSPACE'</span><span class="w"> </span><span class="s1">'CopyF'</span>
<span class="m">9.1</span><span class="w"> </span><span class="m">9.2</span>
</code></pre></div></p>
<p>The Name-Class of .NET namespaces (visible through <code>⎕USING</code>) is also 9.1
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">''</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'System'</span><span class="w"> </span><span class="s1">'System.IO'</span>
<span class="m">9.1</span><span class="w"> </span><span class="m">9.1</span>
</code></pre></div></p>
<h5>Instance (Name-Class 9.2)</h5>
<p>Instances of Classes created using <code>⎕NEW</code>, and GUI objects created using <code>⎕WC</code> all have name-class 9.2.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MyInst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'MyInst'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'MyInst'</span>
<span class="m">9.2</span>
<span class="w">      </span><span class="nv">UrInst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">':Class'</span><span class="w">  </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'MyInst'</span><span class="w"> </span><span class="s1">'UrInst'</span>
<span class="m">9.2</span><span class="w"> </span><span class="m">9.2</span>

<span class="w">      </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span>
<span class="w">      </span><span class="s1">'F.B'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Button'</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'F  F.B'</span>
<span class="m">9</span><span class="w"> </span><span class="m">9</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'F'</span><span class="w"> </span><span class="s1">'F.B'</span>
<span class="m">9.2</span><span class="w"> </span><span class="m">9.2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NC</span><span class="s1">'B'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NC</span><span class="o">⊂,</span><span class="s1">'B'</span>
<span class="m">9.2</span>
</code></pre></div></p>
<p>Instances of COM Objects whether created using <code>⎕WC</code> or <code>⎕NEW</code> also have name-class 9.2.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">xl</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'OLEClient'</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'ClassName'</span><span class="w"> </span><span class="s1">'Excel.Application'</span><span class="p">)</span>
<span class="w">      </span><span class="s1">'XL'</span><span class="nf">⎕WC</span><span class="s1">'OLEClient'</span><span class="w"> </span><span class="s1">'Excel.Application'</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="s1">'xl'</span><span class="w"> </span><span class="s1">'XL'</span>
<span class="m">9.2</span><span class="w"> </span><span class="m">9.2</span>
</code></pre></div></p>
<p>The same is true of Instances of .NET Classes (Types) whether created using <code>⎕NEW</code> or <code>.New</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">3</span><span class="o">↑</span><span class="nf">⎕TS</span><span class="p">)</span>
<span class="w">      </span><span class="nv">DT</span><span class="kd">←</span><span class="nv">DateTime</span><span class="na">.</span><span class="nv">New</span><span class="w"> </span><span class="m">3</span><span class="o">↑</span><span class="nf">⎕TS</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'dt'</span><span class="w"> </span><span class="s1">'DT'</span>
<span class="m">9.2</span><span class="w"> </span><span class="m">9.2</span>
</code></pre></div></p>
<p>Note that if you remove the GUI component of a GUI object, using the Detach method, it reverts to a plain namespace.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nv">Detach</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂,</span><span class="s1">'F'</span>
<span class="m">9.1</span>
</code></pre></div></p>
<p>Correspondingly, if you attach a GUI component to a plain namespace using the monadic form of <code>⎕WC</code>, it morphs into a GUI object
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'PropertySheet'</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂,</span><span class="s1">'F'</span>
<span class="m">9.2</span>
</code></pre></div></p>
<h5>Class (Name-Class 9.4)</h5>
<p>Classes created using the editor or <code>⎕FIX</code> have name-class 9.4.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">ED</span><span class="w"> </span><span class="o">○</span><span class="nv">MyClass</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">NameClass</span><span class="w"> </span><span class="nv">x</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span><span class="w"> </span><span class="nv">Shared</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕NC</span><span class="w"> </span><span class="nv">x</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ MyClass</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'MyClass'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">⊂</span><span class="s1">'MyClass'</span>
<span class="m">9.4</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="s1">':Class UrClass'</span><span class="w">  </span><span class="s1">':EndClass'</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'MyClass'</span><span class="w"> </span><span class="s1">'UrClass'</span>
<span class="m">9.4</span><span class="w"> </span><span class="m">9.4</span>
</code></pre></div></p>
<p>Note that the name of the Class is visible to a Public Method in that Class, or an Instance of that Class.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">MyClass</span><span class="na">.</span><span class="nv">NameClass</span><span class="s1">'MyClass'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nv">MyClass</span><span class="na">.</span><span class="nv">NameClass</span><span class="o">⊂</span><span class="s1">'MyClass'</span>
<span class="m">9.4</span>
</code></pre></div></p>
<h5>Interface (Name-Class 9.5)</h5>
<p>Interfaces, defined by <code>:Interface ... :EndInterface</code> clauses, have name-class 9.5.
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Interface</span><span class="w"> </span><span class="nv">IGolfClub</span>
<span class="bp">:</span><span class="nv">Property</span><span class="w"> </span><span class="nv">Club</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">get</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">set</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndProperty</span>

<span class="bp">∇</span><span class="w"> </span><span class="nv">Shank</span><span class="kd">←</span><span class="nv">Swing</span><span class="w"> </span><span class="nv">Params</span>
<span class="bp">∇</span>

<span class="bp">:</span><span class="nv">EndInterface</span><span class="w"> </span><span class="c1">⍝ IGolfClub</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'IGolfClub'</span>
<span class="m">9</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'IGolfClub'</span>
<span class="m">9.5</span>
</code></pre></div></p>
<h5>External Class (Name-Class 9.6)</h5>
<p>External Classes (Types) exposed by .NET have name-class 9.6.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span><span class="w"> </span><span class="s1">'System.IO'</span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'DateTime'</span><span class="w"> </span><span class="s1">'File'</span><span class="w"> </span><span class="s1">'DirectoryInfo'</span>
<span class="m">9.6</span><span class="w"> </span><span class="m">9.6</span><span class="w"> </span><span class="m">9.6</span>
</code></pre></div></p>
<p>Note that referencing a .NET class (type) with <code>⎕NC</code>, fixes the name of that class in the workspace and obviates the need for APL to repeat the task of searching for and loading the class when the name is next used.</p>
<h5>External Interface (Name-Class 9.7)</h5>
<p>External Interfaces exposed by .NET have name-class 9.7.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System.Web.UI,system.web.dll'</span><span class="w"> </span>

<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'IPostBackDataHandler'</span><span class="w"> </span><span class="s1">'IPostBackEventHandler'</span><span class="w"> </span>
<span class="m">9.7</span><span class="w"> </span><span class="m">9.7</span>
</code></pre></div>
<p>Note that referencing a .NET Interface with <code>⎕NC</code>, fixes the name of that Interface in the workspace and obviates the need for APL to repeat the task of searching for and loading the Interface when the name is next used.</p>
</article>
<article id="system-functions-ncopy">
<div class="heading-container"><h3 class="heading" id="system-functions-ncopy-header">Native File Copy</h3><div class="command">{R}←X ⎕NCOPY Y</div></div>
<p>This function copies native files and directories from one or more sources specified by <code>Y</code> to a destination specified by <code>X</code>. <code>⎕NCOPY</code> is similar to <code>⎕NMOVE</code> (see <a class="internal-link" href="#system-functions-nmove">Section 4.6.96</a>).</p>
<p><code>X</code> is a character vector that specifies the name of the destination.</p>
<p><code>Y</code> is a character vector that specifies the name of the source, or a vector of character vectors containing zero or more sources.</p>
<p>Source and destination path names may be full or relative (to the current working directory) path names which adhere to the operating system conventions.</p>
<p>If <code>X</code> specifies an existent directory then each source in <code>Y</code> is copied into that directory, otherwise <code>X</code> specifies the name of the copy. <code>X</code> must specify an existent directory if the source contains multiple names or if the Wildcard option is set.</p>
<p>The shy result <code>R</code> contains count(s) of top-level items copied. If <code>Y</code> is a single source name, <code>R</code> is a scalar otherwise it is a vector of the same length as <code>Y</code>.</p>
<h5>Variant Options</h5>
<p><code>⎕NCOPY</code> may be applied using the   Variant operator with the options Wildcard (the Principal option), IfExists, PreserveAttributes and ProcessCallback.</p>
<h5>Wildcard Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The name or names in <code>Y</code> identifies a specific file name.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The name or names in <code>Y</code> that specify the <em>base name</em> and <em>extension</em> (see <a class="internal-link" href="#system-functions-nparts">NParts</a> ), may also contain the wildcard characters "?" and "*". An asterisk is a substitute for any 0 or more characters in a file name or extension; a question-mark is a substitute for any single character.</td>
</tr>
</tbody>
</table>
<p>Note that when Wildcard is 1, element(s) of <code>R</code> can  be 0, 1 or <code>&gt;1</code>. If Wildcard is 0, elements of <code>R</code> are always 1.</p>
<h5>IfExists Option</h5>
<p>The IfExists variant option determines what happens when a source file is to be copied to a target file that already exists. It does not apply to directories, only to the files within them.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Error'</td>
<td>Existing files will not be overwritten and an error will be signalled. This is the default</td>
</tr>
<tr>
<td><code>'Skip'</code></td>
<td>Existing files will not be overwritten but the corresponding copy operation will be skipped (ignored).</td>
</tr>
<tr>
<td><code>'Replace'</code></td>
<td>Existing files will be overwritten.</td>
</tr>
<tr>
<td><code>'ReplaceIfNewer'</code></td>
<td>Existing files may be overwritten if, and only if, the corresponding source file is newer (more recently modified) than the existing one, otherwise it is skipped.</td>
</tr>
</tbody>
</table>
<p>The following cases cause an error to be signalled  regardless of the value of the IfExists variant.</p>
<ul>
<li>If the source specifies a directory and the destination specifies an existing file.</li>
<li>If the source specifies a file and the same base name exists as a sub-directory in the destination.</li>
</ul>
<h5>PreserveAttributes Option (Boolean)</h5>
<p>The PreserveAttributes variant option determines whether or not file attributes are preserved. It does not apply to directories, only to files.</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>file attributes are not preserved.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>where possible, copied files will be given at least the same modification time as the source. Other file attributes will be preserved as permitted by the operating system and file system.</td>
</tr>
</tbody>
</table>
<p>Note also that when files are copied across file systems, the different file systems may have different timestamp granularity and the timestamps may not be exactly the same.</p>
<p class="example">Examples</p>
<p>There are a number of possibilities which are illustrated below. In all cases,  if the source is a file, a copy of the file is created. If the source is a directory, a copy of the directory and all its contents is created.</p>
<h6>Examples (single source, Wildcard is 0)</h6>
<ul>
<li>The source name must be an existent file or directory.</li>
<li>If the destination name does not exist but its path name does exist, the source is copied to the destination name.</li>
<li>If the destination name is an existing directory the copy is created within that directory with the base name of the source.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="c1">⍝ Make a named back-up of the Session file</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'session.bak'</span><span class="w"> </span><span class="nf">⎕NCOPY</span><span class="w"> </span><span class="s1">'default.dlf'</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="w"> </span><span class="c1">⍝ Copy the Session file to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="nf">⎕NCOPY</span><span class="s1">'default.dlf'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span><span class="w">  </span>
</code></pre></div></li>
</ul>
<h6>Examples (single source, Wildcard is 1)</h6>
<ul>
<li>The source name may include wildcard characters which matches a number of existing files and/or directories. The destination name must be an existing directory.</li>
<li>The files and/or directories that match the pattern specified by the source name are copied into the destination directory. If there are no matches, zero copies are made.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="c1">⍝ Copy all files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="p">(</span><span class="nf">⎕NCOPY</span><span class="na">⍠</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'*.*'</span>
<span class="m">3</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span><span class="w">        </span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span><span class="w">         </span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
</code></pre></div></li>
</ul>
<h6>Examples (multiple sources, Wildcard is 0)</h6>
<ul>
<li>Each source name must specify a single file or directory which must exist. The destination name must be an existing directory.</li>
<li>Copies of each of the files and/or directories specified by the source base names are made in the destination directory.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="c1">⍝ Copy 2 files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="nf">⎕NCOPY</span><span class="s1">'default.dlf'</span><span class="w"> </span><span class="s1">'def_uk.dse'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span>
</code></pre></div></li>
</ul>
<h6>Examples (multiple sources, Wildcard is 1)</h6>
<ul>
<li>The destination name must be an existing directory.</li>
<li>Copies of each of the files and/or directories that match the patterns specified by the source names (if any) are made in the destination directory.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="c1">⍝ Copy files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="p">(</span><span class="nf">⎕NCOPY</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'d*'</span><span class="w"> </span><span class="s1">'UserCommand20.cache'</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
</code></pre></div></li>
</ul>
<h5>Notes</h5>
<ul>
<li>The special directories <code>.</code> and <code>..</code> can never be copied into an existing directory.</li>
<li>If any source name is a symbolic link it is dereferenced; that is, the source or directory it references is copied rather than the link itself.</li>
<li>In the result <code>R</code>, a directory together with all its contents is counted once. A directory may be partially copied if the IfExists option is set to <code>'Replace'</code> or <code>'ReplaceIfNewer'</code>).</li>
<li>If an error occurs during the copy process then processing will immediately stop and an error will be signalled. The operation is not atomic; some items may be copied before this happens. In the event of an error there will be no result and therefore no indication of how many names were copied before the error occurred.</li>
</ul>
<h6>ProgressCallback Option</h6>
<h6>Overview</h6>
<p>If this option is enabled, the system function invokes an APL callback function as the file operation (move or copy) proceeds. A system object is used to communicate between the system function and the callback. The file operation has 4 distinct stages:</p>
<ol>
<li>The start of the operation. The callback is invoked before any files are scanned or processed. This gives the application the opportunity to set parameters that control the frequency of callbacks during the operation itself.</li>
<li>The optional scan phase during which the system function enumerates the files that will be involved in the copy or move operation. The file count obtained is used to set the <code>Limit</code> field. The application may use this subsequently to indicate the degree of progress.</li>
<li>The main processing (move or copy) of the files.</li>
<li>The end of the operation.</li>
</ol>
<p>The callback function is invoked once at the start of the operation, during the (optional) scan and processing stages, and finally once at the end of the operation. During the scan and processing stages, the <code>Skip</code> and <code>Delay</code> options provide alternative ways to control the frequency with which the callback is invoked.</p>
<p>If both options are 0, the callback will be invoked after every file is processed. However, if there are a large number of small files involved, and you simply want to update a progress bar, this may prove to be unnecessarily  frequent, and will increase the total time required to complete the operation.</p>
<p>If you want to update a progress bar regularly (for example every second), the <code>Delay</code> option (1000 = 1 second) is the better choice.  In other circumstances, you might choose to use <code>Skip</code>.</p>
<p>If you use both options, the callback will be invoked when <em>both</em> apply, so if you set <code>Skip</code> to 10 and <code>Delay</code> to 5000, the callback will be invoked after at least 10 files have been processed and at least 5 seconds have elapsed since the previous invocation of the callback.</p>
<p>The value of the ProgressCallback variant option may be:</p>
<table>
<tbody>
<tr>
<td><code>fn</code></td>
<td>The name of the callback function.</td>
</tr>
<tr>
<td><code>fn data</code></td>
<td>The name of the callback function, and an array or namespace which is to be passed to the callback in its left argument.</td>
</tr>
</tbody>
</table>
<p>The right argument given to the callback function is a 3-element vector:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Function</td>
<td>Character vector which identifies the function that caused the callback to be executed; either <code>'⎕NCOPY'</code> or <code>'⎕NMOVE'.</code></td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Event</td>
<td>Character vector describing the event that lead to the callback being executed. See below.</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>Info</td>
<td>Reference to a namespace containing information about the event. See below.</td>
</tr>
</tbody>
</table>
<h6>Event</h6>
<p>Event is a character vector which indicates the stage of the copy or move operation..</p>
<table>
<tbody>
<tr>
<td><code>'Start'</code></td>
<td>Reported by the first invocation of the callback which occurs before any files are scanned or processed. This may be used to set the parameters that control the operation. See <strong>Options</strong> .</td>
</tr>
<tr>
<td><code>'Scan'</code></td>
<td>Indicates that the system function is in the initial phase of scanning the files in order to calculate <code>Limit</code> . See <strong>ScanFirst</strong> .</td>
</tr>
<tr>
<td><code>'Progress'</code></td>
<td>Indicates that the system function is at the main stage of the operation and is moving or copying the files.</td>
</tr>
<tr>
<td><code>'Done'</code></td>
<td>Indicates that all files have been processed.</td>
</tr>
</tbody>
</table>
<p>Note that there will always be at least 2 invocations of the callback, to indicate the start and end of the operation.</p>
<h6>Info</h6>
<p>Info is a ref to a namespace that contains information about the event. This namespace persists for the duration of the execution of the system function and contains the following fields:</p>
<table>
<tbody>
<tr>
<td><code>Progress</code></td>
<td>A number between <code>0</code> and <code>Limit</code> . When the event code is <code>'Start'</code> , <code>Progress</code> is <code>0</code> . Every time a file or directory is processed, <code>Progress</code> is increased by 1. Finally when the  event code is <code>'Done'</code> , <code>Progress</code> will be equal to <code>Limit</code> .</td>
</tr>
<tr>
<td><code>Limit</code></td>
<td>The maximum value of <code>Progress</code> . This value might change during the file operation if it doesn't do a full discovery first (the <code>ScanFirst</code> option is 0), or if the file structure changes between the scan and the copy/move.</td>
</tr>
<tr>
<td><code>Last</code></td>
<td>A vector of file names which have been processed since the last invocation of the callback function. The user can specify the maximum length of this vector by setting the <code>LastFileCount</code> option. The names in this list are the source names, and not the destination names. The <code>Last</code> vector is always empty when the event is <code>'Start'</code> , and it is cleared when going from the <code>'Scan'</code> phase to the <code>'Progress'</code> phase, to avoid any confusion.</td>
</tr>
<tr>
<td><code>Data</code></td>
<td>A field that is reserved for the user to store data which persists between invocations of the callback. It could for example be used to keep a sequence number, to count the number of times the callback had been run.</td>
</tr>
<tr>
<td><code>Options</code></td>
<td>This is a namespace which contains the information that controls the future execution of the callback. The options persist between the calls to the callback, so there is no need to set them again unless they should be changed. The fields and their default values are described below.</td>
</tr>
</tbody>
</table>
<h6>Options</h6>
<p>This is a namespace which contains options that control future invocations of the callback. The options persist between these invocations, so there is no need to set them again unless they should be changed. The fields and their default values are:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ScanFirst</code></td>
<td>1</td>
<td>Specifies if the file operation should do a "scan pass" before moving/copying the files. This stage just enumerates  the files to determine how many there are. This will ensure <code>Limit</code> has a realistic value when the actual processing of the files happens. The overhead is small in comparision with the time it takes to process the files. The <code>ScanFirst</code> field is only inspected right after the first invocation of the callback function, with the event code <code>'Start'</code> .</td>
</tr>
<tr>
<td><code>Delay</code></td>
<td>0</td>
<td>Specifies the number of milliseconds to wait, until the callback will be called again. If all file operations finish before this time, the callback function is called anyway, with the event code <code>'Done'</code> . If a slow file operation is happening (such as copying a big file), the actual delay before the callback is invoked might be longer than the value of <code>Delay</code> .</td>
</tr>
<tr>
<td><code>Skip</code></td>
<td>0</td>
<td>Specifies a number of files to skip between invocations of the callback function. If you are only interested in getting a callback for each 10th file, you should set this option to 9 for example.</td>
</tr>
<tr>
<td><code>LastFileCount</code></td>
<td>1</td>
<td>An integer, specifying the maximum number of the latest filenames to be stored in the <code>Last</code> field. The default is to only store the last file processed, but if <code>Delay</code> or <code>Skip</code> are non-zero, multiple files could have been processed between calls to the callback function. A value of 5 for example, will make sure that the 5 last files processed before calling the callback, will have their names in the <code>Last</code> field. The <code>Last</code> field might have fewer elements than <code>LastFileCount</code> , if the number of files processed since the last call is less than <code>LastFileCount</code> . The special value <code>¯1</code> indicates that the <code>Last</code> field should contain <strong>all</strong> the last files since the last call (no limit).</td>
</tr>
</tbody>
</table>
<p>The result of the callback function must be a Boolean scalar, indicating whether or not the <code>⎕NCOPY</code> or <code>⎕NMOVE</code> should continue or stop.</p>
<p>1: Execution should continue.</p>
<p>0: Execution should stop. In this case, an <code>INTERRUPT</code> (event 1003) is signalled.</p>
</article>
<article id="system-functions-ncreate">
<div class="heading-container"><h3 class="heading" id="system-functions-ncreate-header">Native File Create</h3><div class="command">{R}←X ⎕NCREATE Y</div></div>
<p>This function creates a new file. Under Windows the file is opened with mode 66 (see <a class="internal-link" href="#system-functions-nuntie">Section 4.6.112</a>). Under non-Windows operating systems the current umask will specify the file permissions. The name of the new file is specified by the left argument <code>X</code> which must be a simple character vector or scalar containing a valid pathname for the file.</p>
<p><code>Y</code> is 0 or a negative integer value that specifies an (unused) tie number by which the file may subsequently be referred. If <code>Y</code> is 0, the system allocates the first (closest to zero) available tie number which is returned as the result.</p>
<p>The shy result of <code>⎕NCREATE</code> is the tie number of the new file.</p>
<h5>Variant Options</h5>
<p><code>⎕NCREATE</code> may be applied using the  Variant operator with the options Unique and IfExists. There is no primary option.</p>
<h5>Unique Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>the file named by <code>X</code> will be created</td>
</tr>
<tr>
<td><code>1</code></td>
<td>a uniquely named file will be created by extending the base name (see <a class="internal-link" href="#system-functions-nparts">File Name Parts</a> ) with random characters. If a unique name cannot be created then an error will be signalled. The actual name of the file can be determined from <code>⎕NNAMES</code> or <code>⎕NINFO</code> .</td>
</tr>
</tbody>
</table>
<h5>IfExists Option (character vector)</h5>
<table>
<tbody>
<tr>
<td>Error</td>
<td><code>⎕NCREATE</code> will generate a <code>FILE NAME ERROR</code> if the file already exists</td>
</tr>
<tr>
<td><code>Replace</code></td>
<td><code>⎕NCREATE</code> will replace an existing file with an empty one of the same name.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="s1">'myfile'</span><span class="w"> </span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="m">¯1</span>
<span class="w">      </span><span class="nf">⎕NUNTIE</span><span class="w"> </span><span class="m">¯1</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'myfile'</span><span class="w"> </span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">myfile</span><span class="bp">:</span><span class="w"> </span><span class="nv">Unable</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="p">(</span><span class="s2">"The file exists."</span><span class="p">)</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'myfile'</span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="w">               </span><span class="o">∧</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="s1">'myfile'</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NCREATE</span><span class="na">⍠</span><span class="s1">'IfExists'</span><span class="w"> </span><span class="s1">'Replace'</span><span class="p">)</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">¯1</span><span class="w">    </span><span class="c1">⍝ Note that it uses same tie number as before</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="s1">'myfile'</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NCREATE</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Unique'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="m">0</span>
<span class="m">¯2</span>
<span class="w">      </span><span class="nf">⎕NNUMS</span><span class="o">,</span><span class="nf">⎕NNAMES</span>
<span class="m">¯1</span><span class="w"> </span><span class="nv">myfile</span><span class="w">      </span>
<span class="m">¯2</span><span class="w"> </span><span class="nv">myfile52c36z</span>
</code></pre></div></p>
<h5>Notes</h5>
<ul>
<li>Setting IfExists to <code>Replace</code> has no effect when Unique is 1, because the file cannot already exist.</li>
<li>The IfExists option does not affect the operation of <em>slippery ties</em>.</li>
</ul>
</article>
<article id="system-functions-ndelete">
<div class="heading-container"><h3 class="heading" id="system-functions-ndelete-header">Native File Delete</h3><div class="command">{R}←{X}⎕NDELETE Y</div></div>
<p>This function deletes files and directories.</p>
<p><code>Y</code> is a character vector or scalar containing a single file or directory name, or a vector of character vectors containing zero or more file or directory names. Names must conform to the naming rules of the host Operating System.</p>
<p>The optional left argument <code>X</code> is a numeric scalar; valid values are  shown in the following table. If omitted, its default value is 0.</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>Each file or directory with the given name must exist.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>If the file or directory with the given name does not exist then no action is taken. The result <code>R</code> may be used to determine whether the file or directory was deleted or not.</td>
</tr>
<tr>
<td><code>2</code></td>
<td>If a name identifies a non-empty directory it, and all its contents, are to be deleted.</td>
</tr>
<tr>
<td><code>3</code></td>
<td>Combination of 1 and 2.</td>
</tr>
</tbody>
</table>
<p><code>R</code> is a numeric count of top-level entities deleted when processing the corresponding name in <code>Y</code>. If <code>Y</code> specifies a single name,  <code>R</code> is a scalar. If <code>Y</code> is a vector of character vectors   <code>R</code> is a vector  with the same length as <code>Y</code>.</p>
<h5>Variant Options</h5>
<p><code>⎕NDELETE</code> may be applied using the  Variant operator with the Wildcard option.</p>
<h5>Wildcard Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The name or names in <code>Y</code> identifies a specific file name.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The name or names in <code>Y</code> that specify the <em>base name</em> and <em>extension</em> (see <a class="internal-link" href="#system-functions-nparts">NParts</a> ), may also contain the wildcard characters "?" and "*". An asterisk is a substitute for any 0 or more characters in a file name or extension; a question-mark is a substitute for any single character.</td>
</tr>
</tbody>
</table>
<p>Note that when Wildcard is 1, element(s) of <code>R</code> can  be 0 or <code>&gt;1</code>. If Wildcard is 0, elements of <code>R</code> are always 1.</p>
<p>If <code>Y</code> specifies the name of a  symbolic link, <code>⎕NDELETE</code> deletes that symbolic link;   the target of the symbolic link is unaffected.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NEXISTS</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Invalid</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">directory</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="s2">"The system cannot find the file specified."</span><span class="p">)</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NDELETE</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="w"> </span><span class="s1">'temp1'</span><span class="w"> </span><span class="s1">'temp2'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕MKDIR</span><span class="s1">'temp1'</span><span class="w"> </span><span class="s1">'temp2'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">       </span><span class="o">⊢</span><span class="p">(</span><span class="nf">⎕NDELETE</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'t*'</span>
<span class="m">2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nf">⎕MKDIR</span><span class="s1">'temp1'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'Hello World'</span><span class="w"> </span><span class="nf">⎕NPUT</span><span class="w"> </span><span class="s1">'temp1/hw.txt'</span>
<span class="m">13</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="w"> </span><span class="s1">'temp1'</span>
<span class="nv">FILE</span><span class="w"> </span><span class="nv">ACCESS</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">temp1</span><span class="bp">:</span><span class="w"> </span><span class="nv">Unable</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">delete</span><span class="w"> </span><span class="nv">directory</span><span class="w"> </span><span class="p">(</span><span class="s2">"The directory is not empty."</span><span class="p">)</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕NDELETE</span><span class="s1">'temp1'</span>
<span class="w">       </span><span class="o">∧</span>
<span class="w">      </span><span class="o">⊢</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NDELETE</span><span class="w"> </span><span class="s1">'temp1'</span>
<span class="m">1</span>
</code></pre></div></p>
<p>If the file is in use or the current user is not authorised to delete it, <code>⎕NDELETE</code> will not succeed but will instead generate a <code>FILE ACCESS ERROR</code>.</p>
<h5>Note</h5>
<p>When multiple names are specified they are processed in the order given. If an error occurs at any point whilst deleting files or directories, processing will immediately stop and an error will be signalled. The operation is not atomic; the directory contents may be partially deleted before this happens. In the event of an error there will be no result and therefore no indication of how many files were deleted before the error occurred.</p>
</article>
<article id="system-functions-nerase">
<div class="heading-container"><h3 class="heading" id="system-functions-nerase-header">Native File Erase</h3><div class="command">{R}←X ⎕NERASE Y</div></div>
<p>This function erases (deletes) a tied native file.  <code>Y</code> is a negative integer tie number associated with a tied native file.  <code>X</code> is a simple character vector or scalar containing the name of the same file and must be <strong>identical</strong> to the name used when it was opened by <code>⎕NCREATE</code> or <code>⎕NTIE</code>.</p>
<p>The shy result of <code>⎕NERASE</code> is the tie number that the erased file had.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕nerase</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕ntie</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-new">
<div class="heading-container"><h3 class="heading" id="system-functions-new-header">New Instance</h3><div class="command">R←⎕NEW Y</div></div>
<p><code>⎕NEW</code> creates a new instance of the Class, Dyalog GUI object, or .NET Type specified by <code>Y</code>.</p>
<p><code>Y</code> must be a 1- or 2-item scalar or vector. The first item is a reference to a Class or to a .NET Type, or a character vector containing the name of a Dyalog GUI object.</p>
<p>The second item, if specified, contains the argument to be supplied to the Class or Type <em>Constructor</em> or a list of property/value pairs for a Dyalog GUI object.</p>
<p>The result <code>R</code> is a reference to a new instance of Class, Dyalog GUI object, or Type <code>Y</code>.</p>
<p>For further information, see <em>Interface Guide</em>.</p>
<h5>Class Example</h5>
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Name</span><span class="w"> </span><span class="nv">nm</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Constructor</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="nv">nm</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Animal</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">Donkey</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Animal</span><span class="w"> </span><span class="s1">'Eeyore'</span>
<span class="w">      </span><span class="nv">Donkey</span>
<span class="nv">Eeyore</span>
</code></pre></div>
<p>If <code>⎕NEW</code> is called with just a Class reference (i.e. without parameters for the Constructor), the default constructor will be called. A default constructor is defined by a niladic function with the :Implements Constructor attribute. For example, the Animal Class may be redefined as:
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">NoName</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Constructor</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="s1">'Noname'</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Name</span><span class="w"> </span><span class="nv">nm</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Constructor</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="nv">nm</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ Animal</span>


<span class="w">      </span><span class="nv">Horse</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Animal</span>
<span class="w">      </span><span class="nv">Horse</span>
<span class="nv">Noname</span>
</code></pre></div></p>
<h5>.NET Examples</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span><span class="w"> </span><span class="s1">'System.Web.Mail,System.Web.dll'</span>
<span class="w">      </span><span class="nv">dt</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">DateTime</span><span class="w"> </span><span class="p">(</span><span class="m">2006</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="nv">msg</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">MailMessage</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'dt'</span><span class="w"> </span><span class="s1">'msg'</span><span class="w"> </span><span class="s1">'DateTime'</span><span class="w"> </span><span class="s1">'MailMessage'</span>
<span class="m">9.2</span><span class="w"> </span><span class="m">9.2</span><span class="w"> </span><span class="m">9.6</span><span class="w"> </span><span class="m">9.6</span>
</code></pre></div>
<p>Note that <strong>.NET Types</strong> are accessed as follows.</p>
<p>If the name specified by the first item of <code>Y</code> would otherwise generate a <code>VALUE ERROR</code>, and <code>⎕USING</code> has been set, APL attempts to load the Type specified by <code>Y</code> from the .NET assemblies (DLLs) specified in <code>⎕USING</code>. If successful, the name specified by <code>Y</code> is entered into the SYMBOL TABLE with a name-class of <code>9.6</code>. Subsequent references to that symbol (in this case <code>DateTime</code>) are resolved directly and do not involve any assembly searching.</p>
<h5>Dyalog GUI Examples</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">F</span>
<span class="c1">#.[Form]</span>
</code></pre></div>
<p>To specify the initial values of any properties, <code>Y[2]</code> must be a vector (or scalar) of items each of which is of the form (PropertyName PropertyValue); the free-form syntax implemented by <code>⎕WC</code> and <code>⎕WS</code> is not allowed.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NEW</span><span class="s1">'Form'</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Hello'</span><span class="p">)</span>
<span class="c1">#.[Form]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'Form'</span><span class="p">((</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Hello'</span><span class="p">)(</span><span class="s1">'Posn'</span><span class="w"> </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="p">)))</span>
<span class="w">      </span><span class="nv">F</span>
<span class="c1">#.[Form]</span>
</code></pre></div></p>
<p>Note that as <code>⎕NEW</code> provides no facility to <em>name</em> a GUI object, the Event property should use the <em>onEvent</em> syntax so that a callback function (or the result of <code>⎕DQ</code>) receives a ref to the object. Otherwise, without the <em>onEvent</em> syntax, the first element of the argument to a callback function will contain a character vector such as <code>'[Form].[Button]'</code> which merely describes the type of the object but does not identify the object itself.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">cap</span><span class="kd">←</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Push Me'</span>
<span class="w">      </span><span class="nv">ev</span><span class="kd">←</span><span class="w"> </span><span class="s1">'Event'</span><span class="w"> </span><span class="p">(</span><span class="s1">'onSelect'</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">)</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="p">(</span><span class="nv">B</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'Button'</span><span class="c1">#.(pos cap ev))</span>
</code></pre></div></p>
<p>Note that you may not create an instance of OCXClass using <code>⎕NEW</code>.</p>
</article>
<article id="system-functions-nexists">
<div class="heading-container"><h3 class="heading" id="system-functions-nexists-header">Native File Exists</h3><div class="command">R←⎕NEXISTS Y</div></div>
<p>This function reports whether or not file and directories exist.</p>
<p><code>Y</code> is a character vector or scalar containing a single file/directory name, or a vector of character vectors containing zero or more file/directory names.</p>
<p>If <code>Y</code> specifies a single name, the result <code>R</code> is a scalar 1 if a file or directory exists or 0 if not. If <code>Y</code> is a vector of character vectors, <code>R</code> is a vector of 1s and 0s with the same length as <code>Y</code>.</p>
<h5>Variant Options</h5>
<p><code>⎕NEXISTS</code> may be applied using the  Variant operator with the Wildcard option.</p>
<h5>Wildcard Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The name or names in <code>Y</code> identifies a specific file name.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The name or names in <code>Y</code> that specify the <em>base name</em> and <em>extension</em> (see <a class="internal-link" href="#system-functions-nparts">NParts</a> ), may also contain the wildcard characters "?" and "*". An asterisk is a substitute for any 0 or more characters in a file name or extension; a question-mark is a substitute for any single character.</td>
</tr>
</tbody>
</table>
<p>If the Wildcard option is 1, <code>R</code> indicates whether or not one or more matches to the corresponding pattern in <code>Y</code> exist.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕MKDIR</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">1</span>
<span class="w">      </span><span class="nf">⎕NEXISTS</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2'</span>
<span class="m">1</span>
<span class="w">      </span><span class="nf">⎕NEXISTS</span><span class="s1">'/Users/Pete/Documents/temp/t1/t2/pd'</span>
<span class="m">0</span>

<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕MKDIR</span><span class="s1">'temp1'</span><span class="w"> </span><span class="s1">'temp2'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nf">⎕NEXISTS</span><span class="w"> </span><span class="s1">'temp1'</span><span class="w"> </span><span class="s1">'temp2'</span><span class="w"> </span><span class="s1">'temp3'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕NEXISTS</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'t*'</span>
<span class="m">1</span>
</code></pre></div>
<h5>Note</h5>
<p>If <code>Y</code> is a symbolic link, <code>⎕NEXISTS</code> will return 1 whether or not the target of the symbolic link exists.</p>
</article>
<article id="system-functions-nget">
<div class="heading-container"><h3 class="heading" id="system-functions-nget-header">Read Text File</h3><div class="command">R←{X} ⎕NGET Y</div></div>
<p>This function reads the contents of the specified text file. See also <a class="internal-link" href="#system-functions-nput">Section 4.6.100</a>.</p>
<p><code>Y</code> is either a character vector/scalar containing the name of the file to be read, or a 2-item vector whose first item is the file name and whose second is an integer scalar specifying <code>flags</code> for the operation.</p>
<p>If <code>flags</code> is 0 (the default value if omitted) the content in the result <code>R</code> is a character vector. If <code>flags</code> is 1 the result is a nested array of character vectors corresponding to the lines in the file.</p>
<p>The optional left-argument <code>X</code> is either</p>
<ul>
<li>a character vector that specifies the file-encoding as shown in the table below.</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>

<table id="Encodings"><caption style="caption-side:top"><strong>Table 4-2:</strong> File Encodings</caption>
<thead>
<tr>
<th>Encoding</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>UTF-8</code></td>
<td>The data is encoded as UTF-8 format.</td>
</tr>
<tr>
<td><code>UTF-16LE</code></td>
<td>The data is encoded as UTF-16 little-endian format.</td>
</tr>
<tr>
<td><code>UTF-16BE</code></td>
<td>The data is encoded as UTF-16 big-endian format.</td>
</tr>
<tr>
<td><code>UTF-16</code></td>
<td>The data is encoded as UTF-16 with the endianness of the host system (currently BE on AIX platforms, LE on all others).</td>
</tr>
<tr>
<td><code>UTF-32LE</code></td>
<td>The data is encoded as UTF-32 little-endian format.</td>
</tr>
<tr>
<td><code>UTF-32BE</code></td>
<td>The data is encoded as UTF-32 big-endian format.</td>
</tr>
<tr>
<td><code>UTF-32</code></td>
<td>The data is encoded as UTF-32 with the endianness of the host system (currently BE on AIX platforms, LE on all others).</td>
</tr>
<tr>
<td><code>ASCII</code></td>
<td>The data is encoded as 7-bit ASCII format.</td>
</tr>
<tr>
<td><code>Windows-1252</code></td>
<td>The data is encoded as 8-bit Windows-1252 format.</td>
</tr>
<tr>
<td><code>ANSI</code></td>
<td>ANSI is a synonym of Windows-1252.</td>
</tr>
</tbody>
</table>
<p>The above UTF formats may be qualified with -BOM or -NOBOM (e.g. UTF-8-BOM). See <a class="internal-link" href="#system-functions-nput">Section 4.6.100</a>.</p>
<p>Whether or not <code>X</code> is specified, if the start of the file contains a recognised   Byte Order Mark (BOM), the file is decoded according to the BOM. Otherwise, if <code>X</code> is specified the file is decoded according to the value of <code>X</code>. Otherwise, the file is examined to try to decide its encoding and is decoded accordingly.</p>
<p>The result <code>R</code> is a 3-element vector comprising <code>(content) (encoding) (newline)</code>  where:</p>
<table>
<tbody>
<tr>
<td><code>content</code></td>
<td>A simple character vector, or a vector of character vectors, according to the value of <code>flags</code> .</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td>The encoding that was actually used to read the file. If this is a UTF format, it will always include the appropriate endianness (except for UTF-8 to which endianness doesn't apply) and a -BOM or -NOBOM suffix to indicate whether or not a BOM is actually present in the file. For example, UTF-16LE-BOM. If <code>X</code> specified a user-defined encoding as a 256-element numeric vector, <code>encoding</code> will be that same vector.</td>
</tr>
<tr>
<td><code>newline</code></td>
<td>Determined by the first occurrence in the file of one of the newline characters identified in the line separator table, or <code>⍬</code> if no such line separator is found.</td>
</tr>
</tbody>
</table>
<p>If <code>content</code> is simple then all its line separators (listed in the table below) are replaced by (normalised to) <code>⎕UCS 10</code>, which in the Classic Edition must be in <code>⎕AVU</code> (else <code>TRANSLATION ERROR</code>).</p>
<p>If <code>content</code> is nested, it is formed by splitting the contents of the file on the occurrence of any of the line separators  shown in the table below. These line separators are  removed.</p>
<p>The 3rd element of the result <code>newline</code> is a numeric vector from the <em>Value</em> column of the table below corresponding to the first occurrence of any of the <strong>newline characters</strong> in the file. If none of these characters are present, the value is <code>⍬</code>.</p>

<table id="Line_Separators"><caption style="caption-side:top"><strong>Table 4-3:</strong> Line separators:</caption>
<thead>
<tr>
<th>Value</th>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3">newline characters</td>
</tr>
<tr>
<td>13</td>
<td><code>CR</code></td>
<td>Carriage Return (U+000D)</td>
</tr>
<tr>
<td>10</td>
<td><code>LF</code></td>
<td>Line Feed (U+000A)</td>
</tr>
<tr>
<td>13 10</td>
<td><code>CRLF</code></td>
<td>Carriage Return followed by Line Feed</td>
</tr>
<tr>
<td>133</td>
<td><code>NEL</code></td>
<td>New Line (U+0085)</td>
</tr>
<tr>
<td colspan="3">other line separator characters</td>
</tr>
<tr>
<td>11</td>
<td><code>VT</code></td>
<td>Vertical Tab (U+000B)</td>
</tr>
<tr>
<td>12</td>
<td><code>FF</code></td>
<td>Form Feed (U+000C)</td>
</tr>
<tr>
<td>8232</td>
<td><code>LS</code></td>
<td>Line Separator (U+2028)</td>
</tr>
<tr>
<td>8233</td>
<td><code>PS</code></td>
<td>Paragraph Separator (U+2029)</td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-ninfo">
<div class="heading-container"><h3 class="heading" id="system-functions-ninfo-header">Native File Information</h3><div class="command">R←{X}⎕NINFO Y</div></div>
<p>This function returns information about one or more files or directories. <code>Y</code> may  be:</p>
<ul>
<li>a numeric scalar containing the tie number of a native file</li>
<li>a character vector or scalar containing a file or directory name that conforms to the naming rules of the host Operating System.</li>
<li>a vector of character vectors and/or tie numbers</li>
</ul>
<h5>Variant Options</h5>
<p><code>⎕NINFO</code> may be applied using the  Variant operator with the options  Wildcard (the Principal option), Recurse and Follow.</p>
<h5>Wildcard Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The name or names in <code>Y</code> identifies a specific file name.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The name or names in <code>Y</code> that specify the <em>base name</em> and <em>extension</em> (see <a class="internal-link" href="#system-functions-nparts">NParts</a> ), may also contain the wildcard characters "?" and "*". An asterisk is a substitute for any 0 or more characters in a file name or extension; a question-mark is a substitute for any single character.</td>
</tr>
</tbody>
</table>
<h5>Recurse Option</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>the name(s) in <code>Y</code> are searched for only in the corresponding specified directory.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>the name(s) in <code>Y</code> are searched for in the corresponding specified directory as well as all sub-directories. If Wildcard is also 1, the wild card search is performed recursively.</td>
</tr>
<tr>
<td><code>1 n</code></td>
<td>the name(s) in <code>Y</code> are searched for in the corresponding specified directory as well as its sub-directories to the n <sup>th</sup> -level sub-directory. If n is 0, no sub-directories are searched. If n is <code>¯1</code> all sub-directories are searched.</td>
</tr>
<tr>
<td><code>2 (n)</code></td>
<td>same as 1 but if any unreadable directories are encountered they are skipped (whereas if Recurse is <code>1 (n)</code> , <code>⎕NINFO</code> stops and generates an error).</td>
</tr>
</tbody>
</table>
<h5>Follow Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>the properties reported are those of the symbolic link itself</td>
</tr>
<tr>
<td>1</td>
<td>the properties reported for a symbolic link are those of the target of the symbolic link</td>
</tr>
</tbody>
</table>
<p>The optional left argument <code>X</code> is a simple numeric array containing values shown in the following table.</p>
<table>
<thead>
<tr>
<th><code>X</code></th>
<th>Property</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>Name of the file or directory, as a character vector. If <code>Y</code> is a tie number then this is the name which the file was tied.</td>
<td> </td>
</tr>
<tr>
<td><code>1</code></td>
<td>Type, as a numeric scalar: 0=Not known 1=Directory 2=Regular file 3=Character device 4=Symbolic link (only when Follow is 0) 5=Block device 6=FIFO (not Windows) 7=Socket (not Windows)</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>2</code></td>
<td>Size in bytes, as a numeric scalar</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>3</code></td>
<td>Last modification time, as a timestamp in <code>⎕TS</code> format</td>
<td><code>7⍴0</code></td>
</tr>
<tr>
<td><code>4</code></td>
<td>Owner user id, as a character vector – on Windows a SID, on other platforms a numeric userid converted to character format</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>5</code></td>
<td>Owner name, as a character vector</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>6</code></td>
<td>Whether the file or directory is hidden (1) or not (0), as a numeric scalar. On Windows, file properties include a "hidden" attribute; on non-Windows platforms a file or directory is implicitly considered to be hidden if its name begins with a "."</td>
<td><code>¯1</code></td>
</tr>
<tr>
<td><code>7</code></td>
<td>Target of symbolic link (when Type is 4)</td>
<td><code>''</code></td>
</tr>
<tr>
<td><code>8</code></td>
<td>Current position in the file. Always 0 if <code>Y</code> is a file name.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>9</code></td>
<td>Last access time  in <code>⎕TS</code> format, when available</td>
<td><code>7⍴0</code></td>
</tr>
<tr>
<td><code>10</code></td>
<td>Creation time if available, otherwise the time of the last file status change in <code>⎕TS</code> format</td>
<td><code>7⍴0</code></td>
</tr>
<tr>
<td><code>11</code></td>
<td>Whether the file or directory can (1) or cannot (0) be read ( <code>¯1</code> if unknown)</td>
<td><code>¯1</code></td>
</tr>
<tr>
<td><code>12</code></td>
<td>Whether the file or directory can (1) or cannot (0) be written  ( <code>¯1</code> if unknown or for a directory under Windows)</td>
<td><code>¯1</code></td>
</tr>
<tr>
<td><code>13</code></td>
<td>Last modification time, as a UTC  Dyalog Date  Number.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>14</code></td>
<td>Last access time  as a UTC Dyalog Date  Number, when available.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>15</code></td>
<td>Creation time if available, otherwise the time of the last file status change  as a UTC Dyalog Date  Number.</td>
<td><code>0</code></td>
</tr>
</tbody>
</table>
<p>Note that the current file position identifies where <code>⎕NREAD</code> will next read from or <code>⎕NAPPEND</code> will next write to and is only pertinent when the corresponding value in <code>Y</code> is a tie number rather than a name. It will be reported as 0 for named files.</p>
<p>Each value in <code>X</code> identifies a property of the file(s) or directory(ies) identified by <code>Y</code> whose value is to be returned in the result <code>R</code>. If omitted, the default value of <code>X</code> is 0. Values in <code>X</code> may be specified in any order and duplicates are allowed. A value in <code>X</code> which is not defined in the table above will not generate an error but results in a <code>⍬</code> (Zilde) in the corresponding element of <code>R</code>.</p>
<p><code>R</code> is the same shape as <code>X</code> and each element contains value(s) determined by the property specified in the corresponding element in <code>X</code>. The depth of <code>R</code> depends upon whether or not the Wildcard option is enabled. If, for any reason, the function is unable to obtain a property value, (for example, if the file is in use exclusively by another process) the default value shown in the last column is returned instead.</p>
<p>If the Wildcard option is not enabled (the default) then <code>Y</code> specifies exactly one file or directory and must exist.  In this case each element in <code>R</code> is a single property value for that file. If the name in <code>Y</code> does not exist, the function signals an error. On non-Windows platforms "<em>" and "?" are treated as normal characters. On Windows an error will be signalled since neither "</em>" nor "?" are valid characters for file or directory names.</p>
<p>If the Wildcard option is enabled,  zero or more files and/or directories may match the  pattern in <code>Y</code>. In this case each element in <code>R</code> is a vector of property values for each of the files. Note that  no error will be signalled if no files match the pattern.</p>
<p>When using the Wildcard option, matching of names is done case insensitively on Windows and macOS, and case sensitively on other platforms. The names '.' and '..' are excluded from any matches. The order in which the names match is not defined.</p>
<h5>Note</h5>
<p>On non-Windows platforms, file names are exposed by the Operating System using UTF-8 encoding which Dyalog translates internally to characters.</p>
<p>In the Unicode Edition, if the UTF-8 encoding is invalid, Dyalog replaces each offending byte with a unique Unicode symbol (in the <em>Low Surrogate Area</em> of the Unicode charts) that is mapped back to the original byte by the other system functions (including <code>⎕NTIE</code> and <code>⎕NDELETE</code>) that take native file names as arguments. The display of a file name containing these mapped bytes may appear strange.</p>
<p>In the Classic Edition, offending bytes are replaced by the <code>?</code> symbol, which means that the names reported do not accurately identify the files.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕NINFO</span><span class="w"> </span><span class="s1">'c:/Users/Pete/Documents'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────┐</span><span class="w">          </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="nv">Documents</span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">163840</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───────────────────────┘</span><span class="w">          </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span><span class="w"> </span><span class="c1">⍝ current working directory</span>
<span class="nv">c</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'D*'</span>
<span class="err">┌─────────────────────────────────────┐</span>
<span class="err">│┌───────┬─────────┬─────────┬───────┐│</span>
<span class="err">││</span><span class="nv">Desktop</span><span class="err">│</span><span class="nv">Documents</span><span class="err">│</span><span class="nv">Downloads</span><span class="err">│</span><span class="nv">Dropbox</span><span class="err">││</span>
<span class="err">│└───────┴─────────┴─────────┴───────┘│</span>
<span class="err">└─────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'Documents/*.zip'</span>
<span class="err">┌──────────────────────┐</span>
<span class="err">│┌────────────────────┐│</span>
<span class="err">││</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">zip</span><span class="err">││</span>
<span class="err">│└────────────────────┘│</span>
<span class="err">└──────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍪</span><span class="w"> </span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕NINFO</span><span class="w"> </span><span class="s1">'Documents/dyalog.zip'</span>
<span class="err">┌──────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">zip</span><span class="w">                          </span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="m">2</span><span class="w">                                             </span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="m">3429284</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="m">2016</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">43</span><span class="w"> </span><span class="m">58</span><span class="w"> </span><span class="m">0</span><span class="w">                          </span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="nv">S</span><span class="o">-</span><span class="m">1</span><span class="o">-</span><span class="m">5</span><span class="o">-</span><span class="m">21</span><span class="o">-</span><span class="m">2756282986</span><span class="o">-</span><span class="m">1198856910</span><span class="o">-</span><span class="m">2233986399</span><span class="o">-</span><span class="m">1001</span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="nv">HP</span><span class="na">/</span><span class="nv">Pete</span><span class="w">                                       </span><span class="err">│</span>
<span class="err">├──────────────────────────────────────────────┤</span>
<span class="err">│</span><span class="m">0</span><span class="w">                                             </span><span class="err">│</span>
<span class="err">└──────────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span><span class="w"> </span><span class="c1">⍝ current working directory</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">16.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'*.*'</span>
<span class="err">┌──────────────────────────────────────────────────────┐</span>
<span class="err">│┌───────────┬──────────┬─────────┬───────────────────┐│</span>
<span class="err">││</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span><span class="err">│</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span><span class="err">│</span><span class="nv">jsonx</span><span class="na">.</span><span class="nv">dws</span><span class="err">│</span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span><span class="err">││</span>
<span class="err">│└───────────┴──────────┴─────────┴───────────────────┘│</span>
<span class="err">└──────────────────────────────────────────────────────┘</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'d1'</span><span class="w"> </span><span class="s1">'d2'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="s1">'a'</span><span class="na">∘</span><span class="nf">⎕NPUT</span><span class="na">¨</span><span class="s1">'find'</span><span class="w"> </span><span class="s1">'d1/find'</span><span class="w"> </span><span class="s1">'d1/nofind'</span><span class="w"> </span><span class="s1">'d2/find'</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕ninfo</span><span class="na">⍠</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'find'</span>
<span class="err">┌──────────────────────┐</span>
<span class="err">│┌───────┬───────┬────┐│</span>
<span class="err">││</span><span class="nv">d1</span><span class="na">/</span><span class="nv">find</span><span class="err">│</span><span class="nv">d2</span><span class="na">/</span><span class="nv">find</span><span class="err">│</span><span class="nv">find</span><span class="err">││</span>
<span class="err">│└───────┴───────┴────┘│</span>
<span class="err">└──────────────────────┘</span>
</code></pre></div></p>
<p>The next set of examples, illustrate the use of the Recurse variant option to limit the sub-directory depth.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="s1">'d:\bouzouki\*.*'</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="m">0</span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="nv">Y</span>
<span class="m">355</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="m">0</span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="p">)))</span><span class="nv">Y</span>
<span class="m">355</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="m">0</span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="p">)))</span><span class="nv">Y</span>
<span class="m">1333</span>
<span class="w">      </span><span class="o">⍴⊃</span><span class="m">0</span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="p">)))</span><span class="nv">Y</span>
<span class="m">4223</span>
</code></pre></div></p>
<p>The following expression will return all Word document (<code>.docx</code> and <code>.doc</code>) in the current directory, searching recursively through any sub-directories:
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Recurse'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="s1">'*.docx'</span><span class="w"> </span><span class="s1">'*.doc'</span>
</code></pre></div></p>
<h5>Note</h5>
<p>Of the file timestamps which are reported by the operating system, only the last modification time should be considered reliable and portable. Neither the access time or creation time are well supported across all platforms. Furthermore, they may not accurately reflect the actual time that the operation occurred.</p>
</article>
<article id="system-functions-nl">
<div class="heading-container"><h3 class="heading" id="system-functions-nl-header">Name List</h3><div class="command">R←{X}⎕NL Y</div></div>
<p><code>Y</code> must be a simple numeric scalar or vector containing one or more of the values for name-class.  See also <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
<p><code>X</code> is optional. If present, it must be a simple character scalar or vector. <code>R</code> is a list of the names of active objects whose name-class is included in <code>Y</code> in standard sorted order.</p>
<p>If <em>any</em> element of <code>Y</code> is negative, positive values in <code>Y</code> are treated as if they were negative, and R is a vector of character vectors. Otherwise, <code>R</code> is simple character matrix.</p>
<p>Furthermore, if <code>⎕NL</code> is being evaluated inside the namespace associated with a Class or an Instance of a Class, and any element of <code>Y</code> is negative, <code>R</code> includes the Public names exposed by the Base Class (if any) and all other Classes in the Class hierarchy.</p>
<p>If <code>X</code> is supplied, <code>R</code> contains only those names which begin with any character of <code>X</code>. Standard sorted order is in Unicode point order for Unicode editions, and in the collation order of <code>⎕AV</code> for Classic editions.</p>
<p>If an element of <code>Y</code> is an integer, the names of all of the corresponding sub-name-classes are included in <code>R</code>. For example, if <code>Y</code> contains the value 2, the names of all variables (name-class 2.1), fields (2.2), properties (2.3) and external or shared variables (2.6) are obtained. Otherwise, only the names of members of the corresponding sub-name-class are obtained.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="nv">A</span>
<span class="nv">FAST</span>
<span class="nv">FIND</span>
<span class="nv">FOO</span>
<span class="nv">V</span>

<span class="w">      </span><span class="s1">'AV'</span><span class="w"> </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="nv">A</span>
<span class="nv">V</span>

<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">¯9</span>
<span class="w"> </span><span class="nv">Animal</span><span class="w">  </span><span class="nv">Bird</span><span class="w">  </span><span class="nv">BirdBehaviour</span><span class="w">  </span><span class="nv">Coin</span><span class="w">  </span><span class="nv">Cylinder</span><span class="w">  </span><span class="nv">DomesticParrot</span><span class="w">  </span><span class="nv">Eeyore</span><span class="w">  </span><span class="nv">FishBehaviour</span><span class="w">  </span><span class="nv">Nickel</span><span class="w">  </span><span class="nv">Parrot</span><span class="w">  </span><span class="nv">Penguin</span><span class="w">  </span><span class="nv">Polly</span><span class="w">  </span><span class="nv">Robin</span><span class="w"> </span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">¯9.3</span><span class="w"> </span><span class="c1">⍝ Instances</span>
<span class="w"> </span><span class="nv">Eeyore</span><span class="w">  </span><span class="nv">Nickel</span><span class="w">  </span><span class="nv">Polly</span><span class="w">  </span><span class="nv">Robin</span><span class="w"> </span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">¯9.4</span><span class="w"> </span><span class="c1">⍝ Classes</span>
<span class="w"> </span><span class="nv">Animal</span><span class="w">  </span><span class="nv">Bird</span><span class="w">  </span><span class="nv">Coin</span><span class="w">  </span><span class="nv">Cylinder</span><span class="w">  </span><span class="nv">DomesticParrot</span><span class="w">  </span><span class="nv">Parrot</span><span class="w">  </span><span class="nv">Penguin</span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="m">¯9.5</span><span class="w"> </span><span class="c1">⍝ Interfaces</span>
<span class="w"> </span><span class="nv">BirdBehaviour</span><span class="w">  </span><span class="nv">FishBehaviour</span>
</code></pre></div>
<p><code>⎕NL</code> can also be used to explore Dyalog GUI Objects, .NET types and COM objects.</p>
<h6>Dyalog GUI Objects</h6>
<p><code>⎕NL</code> may be used to obtain lists of the Methods, Properties and Events provided by Dyalog APL GUI Objects.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="w"> </span><span class="c1">⍝ Properties</span>
<span class="w"> </span><span class="nv">Accelerator</span><span class="w"> </span><span class="nv">AcceptFiles</span><span class="w">  </span><span class="nv">Active</span><span class="w">  </span><span class="nv">AlphaBlend</span><span class="w">  </span><span class="nv">AutoConf</span><span class="w">  </span><span class="nv">Border</span><span class="w">  </span><span class="nv">BCol</span><span class="w">  </span><span class="nv">Caption</span><span class="w"> </span><span class="na">...</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ Methods</span>
<span class="w"> </span><span class="nv">Animate</span><span class="w">  </span><span class="nv">ChooseFont</span><span class="w">  </span><span class="nv">Detach</span><span class="w">  </span><span class="nv">GetFocus</span><span class="w">  </span><span class="nv">GetTextSize</span><span class="w">  </span><span class="nv">ShowSIP</span><span class="w">  </span><span class="nv">Wait</span>

<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="c1">⍝ Events</span>
<span class="nv">Close</span><span class="w">  </span><span class="nv">Create</span><span class="w">  </span><span class="nv">DragDrop</span><span class="w">  </span><span class="nv">Configure</span><span class="w">  </span><span class="nv">ContextMenu</span><span class="w">  </span><span class="nv">DropFiles</span><span class="w">  </span><span class="nv">DropObjects</span><span class="w">  </span><span class="nv">Expose</span><span class="w">  </span><span class="nv">Help</span><span class="w"> </span><span class="na">...</span>
</code></pre></div></p>
<h6>.NET Classes (Types)</h6>
<p><code>⎕NL</code> can be used to explore .NET types.</p>
<p>When a reference is made to an undefined name, and <code>⎕USING</code> is set, APL attempts to load the Type from the appropriate .NET Assemblies. If successful, the name is entered into the symbol table with name-class 9.6.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">      </span><span class="nv">DateTime</span>
<span class="p">(</span><span class="nv">System</span><span class="na">.</span><span class="nv">DateTime</span><span class="p">)</span>
<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">9</span>
<span class="w"> </span><span class="nv">DateTime</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="o">,⊂</span><span class="s1">'DateTime'</span>
<span class="m">9.6</span>
</code></pre></div></p>
<p>The names of the Properties and Methods of a .NET Type may then be obtained using <code>⎕NL</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">DateTime</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="w"> </span><span class="c1">⍝ Properties</span>
<span class="w"> </span><span class="nv">MaxValue</span><span class="w">  </span><span class="nv">MinValue</span><span class="w">  </span><span class="nv">Now</span><span class="w">  </span><span class="nv">Today</span><span class="w">  </span><span class="nv">UtcNow</span><span class="w"> </span>

<span class="w">      </span><span class="nv">DateTime</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ Methods</span>
<span class="w"> </span><span class="nv">get_Now</span><span class="w">  </span><span class="nv">get_Today</span><span class="w">  </span><span class="nv">get_UtcNow</span><span class="w">  </span><span class="nv">op_Addition</span><span class="w">  </span><span class="nv">op_Equality</span><span class="w">  </span><span class="na">...</span>
</code></pre></div></p>
<p>In fact it is not necessary to make a separate reference first, because the expression <code>Type.⎕NL</code> (where <code>Type</code> is a .NET Type) is itself a reference to Type. So, (with <code>⎕USING</code> still set to <code>'System'</code>):
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Array</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">3</span>
<span class="w"> </span><span class="nv">BinarySearch</span><span class="w">  </span><span class="nv">Clear</span><span class="w">  </span><span class="nv">Copy</span><span class="w">  </span><span class="nv">CreateInstance</span><span class="w">  </span><span class="nv">IndexOf</span><span class="w">  </span><span class="nv">LastIndexOf</span><span class="w">  </span><span class="nv">Reverse</span><span class="w">  </span><span class="nv">Sort</span>

<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">9</span>
<span class="w"> </span><span class="nv">Array</span><span class="w">  </span><span class="nv">DateTime</span>
</code></pre></div></p>
<p>Another use for <code>⎕NL</code> is to examine .NET <em>enumerations</em>. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System.Windows.Forms,system.windows.forms.dll'</span>

<span class="w">      </span><span class="nv">FormBorderStyle</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">2</span>
<span class="nv">Fixed3D</span><span class="w">  </span><span class="nv">FixedDialog</span><span class="w">  </span><span class="nv">FixedSingle</span><span class="w">  </span><span class="nv">FixedToolWindow</span><span class="w">  </span><span class="nv">None</span><span class="w">  </span><span class="nv">Sizable</span><span class="w">  </span><span class="nv">SizableToolWindow</span><span class="w"> </span>

<span class="w">      </span><span class="nv">FormBorderStyle</span><span class="na">.</span><span class="nv">FixedDialog</span><span class="na">.</span><span class="nv">value__</span>
<span class="m">3</span>

<span class="w">      </span><span class="nv">FormBorderStyle</span><span class="na">.</span><span class="p">(</span><span class="kt">{</span><span class="bp">⍵</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="o">⍎</span><span class="na">¨</span><span class="bp">⍵</span><span class="o">,</span><span class="na">¨</span><span class="o">⊂</span><span class="s1">'.value__'</span><span class="kt">}</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">)</span>
<span class="w"> </span><span class="nv">Fixed3D</span><span class="w">            </span><span class="m">2</span>
<span class="w"> </span><span class="nv">FixedDialog</span><span class="w">        </span><span class="m">3</span>
<span class="w"> </span><span class="nv">FixedSingle</span><span class="w">        </span><span class="m">1</span>
<span class="w"> </span><span class="nv">FixedToolWindow</span><span class="w">    </span><span class="m">5</span>
<span class="w"> </span><span class="nv">None</span><span class="w">               </span><span class="m">0</span>
<span class="w"> </span><span class="nv">Sizable</span><span class="w">            </span><span class="m">4</span>
<span class="w"> </span><span class="nv">SizableToolWindow</span><span class="w">  </span><span class="m">6</span>
</code></pre></div></p>
<h6>COM Objects</h6>
<p>Once a reference to a COM object has been obtained, <code>⎕NL</code> may be used to obtain lists of its Methods, Properties and Events.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">xl</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="s1">'OLEClient'</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'ClassName'</span><span class="w"> </span><span class="s1">'Excel.Application'</span><span class="p">)</span>

<span class="w">      </span><span class="nv">xl</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="w"> </span><span class="c1">⍝ Properties</span>
<span class="w"> </span><span class="nv">_Default</span><span class="w">  </span><span class="nv">ActiveCell</span><span class="w">  </span><span class="nv">ActiveChart</span><span class="w">  </span><span class="nv">ActiveDialog</span><span class="w">  </span><span class="nv">ActiveMenuBar</span><span class="w">  </span><span class="nv">ActivePrinter</span><span class="w">  </span><span class="nv">ActiveSheet</span><span class="w">  </span><span class="nv">ActiveWindow</span><span class="w"> </span><span class="na">...</span>

<span class="w">      </span><span class="nv">xl</span><span class="na">.</span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ Methods</span>
<span class="w"> </span><span class="nv">_Evaluate</span><span class="w">  </span><span class="nv">_FindFile</span><span class="w">  </span><span class="nv">_Run2</span><span class="w">  </span><span class="nv">_Wait</span><span class="w">  </span><span class="nv">_WSFunction</span><span class="w">  </span><span class="nv">ActivateMicrosoftApp</span><span class="w">  </span><span class="nv">AddChartAutoFormat</span><span class="w">  </span><span class="nv">AddCustomList</span><span class="w">  </span><span class="nv">Browse</span><span class="w">  </span><span class="nv">Calculate</span><span class="w"> </span><span class="na">...</span>

<span class="w">      </span><span class="nf">⎕NL</span><span class="w"> </span><span class="o">-</span><span class="m">9</span>
<span class="w"> </span><span class="nv">xl</span>
</code></pre></div></p>
</article>
<article id="system-functions-nlock">
<div class="heading-container"><h3 class="heading" id="system-functions-nlock-header">Native File Lock</h3><div class="command">{R}←X ⎕NLOCK Y</div></div>
<p>This function assists the controlled update of shared native files by locking a range of bytes.</p>
<p>Locking enables controlled update of native files by co-operating users. A process requesting a lock on a region of a file will be <em>blocked</em> until that region becomes available. A <em>write-lock</em> is exclusive, whereas a <em>read-lock</em> is shared. In other words, any byte in a file may be in one of only three states:</p>
<ul>
<li>Unlocked</li>
<li>Write-locked by exactly one process.</li>
<li>Read-locked by any number of processes.</li>
</ul>
<p><code>Y</code> must be a simple integer scalar or vector containing 1, 2 or 3 items namely:</p>
<ol>
<li>Tie number</li>
<li>Offset (from 0) of first byte of region. Defaults to 0</li>
<li>Number of bytes to lock. Defaults to maximum possible file size</li>
</ol>
<p><code>X</code> must be a simple integer scalar or vector containing 1 or 2 items, namely:</p>
<ol>
<li>Type: 0: Unlock, 1:Read lock, 2:Write lock.</li>
<li>Timeout: Number of seconds to wait for lock before generating a <code>TIMEOUT</code> error. Defaults to indefinite wait.</li>
</ol>
<p>The shy result <code>R</code> is <code>Y</code>. To unlock the file, this value should subsequently be supplied in the right argument to <code>0 ⎕NLOCK</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w">        </span><span class="c1">⍝ write-lock whole file</span>
<span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w">        </span><span class="c1">⍝ unlock whole file.</span>
<span class="w">    </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w">        </span><span class="c1">⍝ read (share) lock whole file.</span>
<span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="na">¨</span><span class="nf">⎕NNUMS</span><span class="w">    </span><span class="c1">⍝ write-lock all files.</span>
<span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="na">¨</span><span class="nf">⎕NNUMS</span><span class="w">    </span><span class="c1">⍝ unlock all files.</span>

<span class="w">    </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">1</span><span class="w">   </span><span class="c1">⍝ read-lock byte 12.</span>
<span class="w">    </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w">   </span><span class="c1">⍝ read-lock first 10 bytes.</span>
<span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">20</span><span class="w">     </span><span class="c1">⍝ write-lock from byte 20 onwards.</span>
<span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">2</span><span class="w">   </span><span class="c1">⍝ write-lock 2 bytes from byte 10</span>
<span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">1</span><span class="w">   </span><span class="c1">⍝ remove lock from byte 12.</span>
</code></pre></div>
<p>To lock the region immediately beyond the end of the file prior extending it:
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">region</span><span class="kd">←</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="m">¯1</span><span class="o">,</span><span class="w"> </span><span class="nf">⎕NSIZE</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="c1">⍝ write-lock from EOF.</span>
<span class="m">¯1</span><span class="w"> </span><span class="m">1000</span><span class="w">   </span>
<span class="w">   </span><span class="na">...</span><span class="w"> </span><span class="nf">⎕NAPPEND</span><span class="w"> </span><span class="m">¯1</span><span class="w">                 </span><span class="c1">⍝ append bytes to file</span>
<span class="w">   </span><span class="na">...</span><span class="w"> </span><span class="nf">⎕NAPPEND</span><span class="w"> </span><span class="m">¯1</span><span class="w">                 </span><span class="c1">⍝ append bytes to file</span>

<span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕NLOCK</span><span class="w"> </span><span class="nv">region</span><span class="w">                 </span><span class="c1">⍝ release lock.</span>
</code></pre></div></p>
<p>The left argument may have a second optional item that specifies a <em>timeout</em> value. If a lock has not been acquired within this number of seconds, the acquisition is abandoned and a <code>TIMEOUT</code> error reported.
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="m">2</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nf">⎕nlock</span><span class="w"> </span><span class="m">¯1</span><span class="w">      </span><span class="c1">⍝ wait up to 10 seconds for lock.</span>
</code></pre></div></p>
<h5>Notes</h5>
<ul>
<li>There is no <em>per-byte</em> cost associated with region locking. It takes the same time to lock/unlock a region, irrespective of that region's size.</li>
<li>Different file servers implement locks in slightly different ways. For example on some systems, locks are <em>advisory</em>. This means that a write lock on a region precludes other locks intersecting that region, but doesn't stop reads or writes across the region. On the other hand, <em>mandatory</em> locks block both other locks <em>and</em> read/write operations. <code>⎕NLOCK</code> will just pass the server's functionality along to the APL programmer without trying to standardise it across different systems.</li>
<li>All locks on a file will be removed by <code>⎕NUNTIE</code>.</li>
<li>Blocked locking requests can be freed by a strong interrupt. Under Windows, this operation is performed from the Dyalog APL pop-up menu in the system tray.</li>
</ul>
<h6>Errors</h6>
<ul>
<li>In this release, an attempt to unlock a region that contains bytes that have not been locked results in a <code>DOMAIN ERROR</code>.</li>
<li>A <code>LIMIT ERROR</code> results if the operating system lock daemon has insufficient resources to honour the locking request.</li>
<li>Some systems support only write locks. In this case an attempt to set a read lock will generate a <code>DOMAIN ERROR</code>, and it may be appropriate for the APL programmer to trap the error and apply a write lock.</li>
<li>No attempt will be made to detect deadlock. Some servers do this and if such a condition is detected, a <code>DEADLOCK</code> error (1008) will be reported.</li>
</ul>
</article>
<article id="system-functions-nmove">
<div class="heading-container"><h3 class="heading" id="system-functions-nmove-header">Native File Move</h3><div class="command">{R}←X ⎕NMOVE Y</div></div>
<p>This function moves native files and directories from one or more sources specified by <code>Y</code> to a destination specified by  <code>X</code>. <code>⎕NMOVE</code> is similar to <code>⎕NCOPY</code> (see <a class="internal-link" href="#system-functions-ncopy">Section 4.6.86</a>).</p>
<p>When possible <code>⎕NMOVE</code> <em>renames</em> files and directories, which effects a fast move when the source and destination are on the same file system. By default (see RenameOnly option below), if <code>⎕NMOVE</code> is unable to rename files or directories, it instead copies them and deletes the originals.</p>
<p><code>X</code> is a character vector that specifies the name of the destination.</p>
<p><code>Y</code> is a character vector that specifies the name of the source, or a vector of character vectors containing zero or more sources.</p>
<p>Sources and destinations may be full or relative (to the current working directory) path names adhering to the operating system convention.</p>
<p>If <code>Y</code> specifies more than one source, <code>X</code> must be a character vector  that specifies an existent directory to which each of the sources in <code>Y</code> is to be moved.</p>
<p>The shy result <code>R</code> contains count(s) of top-level items moved. If <code>Y</code> is a single source name, <code>R</code> is a scalar otherwise it is a vector of the same length as <code>Y</code>.</p>
<h5>Variant Options</h5>
<p><code>⎕NMOVE</code> may be applied using the  Variant operator with the options Wildcard (the Principal option), IfExists, RenameOnly and ProcessCallback.</p>
<h5>Wildcard Option (Boolean)</h5>
<table>
<tbody>
<tr>
<td>0</td>
<td>The name or names in <code>Y</code> identifies a specific file name.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The name or names in <code>Y</code> that specify the <em>base name</em> and <em>extension</em> (see <a class="internal-link" href="#system-functions-nparts">NParts</a> ), may also contain the wildcard characters "?" and "*". An asterisk is a substitute for any 0 or more characters in a file name or extension; a question-mark is a substitute for any single character.</td>
</tr>
</tbody>
</table>
<p>Note that when Wildcard is 1, element(s) of <code>R</code> can  be 0 or <code>&gt;1</code>. If Wildcard is 0, elements of <code>R</code> are always 1.</p>
<h5>IfExists Option</h5>
<p>The IfExists variant option determines what happens when a source file is to be copied to a target file that already exists. It does not apply to directories, only to the files within them.</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Error'</td>
<td>Existing files will not be overwritten and an error will be signalled.</td>
</tr>
<tr>
<td><code>'Skip'</code></td>
<td>Existing files will not be overwritten but the corresponding copy operation will be skipped (ignored).</td>
</tr>
</tbody>
</table>
<p>The following cases cause an error to be signalled  regardless of the value of the IfExists variant.</p>
<ul>
<li>If the source specifies a directory and the destination specifies an existing file.</li>
<li>If the source specifies a file and the same base name exists as a sub-directory in the destination.</li>
</ul>
<h5>RenameOnly Option (Boolean)</h5>
<p>The RenameOnly option  determines what happens when it is not possible to rename the source.</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>The source will be copied and the original deleted</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The move will fail</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<p>A number of possibilities exist, illustrated by the following examples. In all cases, if the source is a file, the file is moved. If the source is a directory, the directory and all of its contents are moved.</p>
<h6>Examples (single source, Wildcard is 0)</h6>
<ul>
<li>The source name must be an existent file or directory.</li>
<li>If the destination name does not exist but its path name does exist, the source is moved to the destination name.</li>
<li>If the destination name is an existing directory the source name is moved to that directory.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="c1">⍝ Rename the Session file</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'session.dlf'</span><span class="w"> </span><span class="nf">⎕NMOVE</span><span class="w"> </span><span class="s1">'default.dlf'</span>
</code></pre></div></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="m">1</span>
<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="w"> </span><span class="c1">⍝ Move the Session file to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="nf">⎕NMOVE</span><span class="s1">'default.dlf'</span>
<span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span><span class="w">  </span>
</code></pre></div>
<h6>Examples (single source, Wildcard is 1)</h6>
<ul>
<li>The source name may include wildcard characters which matches a number of existing files and/or directories. The destination name must be an existing directory.</li>
<li>The files and/or directories that match the pattern specified by the source name are moved into the destination directory. If there are no matches, zero copies are made.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="c1">⍝ Move all files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="p">(</span><span class="nf">⎕NMOVE</span><span class="na">⍠</span><span class="s1">'Wildcard'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'*.*'</span>
<span class="m">3</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span><span class="w">        </span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span><span class="w">         </span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
</code></pre></div></li>
</ul>
<h6>Examples (multiple sources, Wildcard is 0)</h6>
<ul>
<li>Each source name must specify a single file or directory which must exist. The destination name must be an existing directory.</li>
<li>Each of the files and/or directories specified by the source base names are moved to the destination directory.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">⍝ Move 2 files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="nf">⎕NMOVE</span><span class="s1">'default.dlf'</span><span class="w"> </span><span class="s1">'def_uk.dse'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span>
</code></pre></div></li>
</ul>
<h6>Examples (multiple sources, Wildcard is 1)</h6>
<ul>
<li>The destination name must be an existing directory.</li>
<li>Each of the files and/or directories that match the patterns specified by the source names (if any) are moved to the destination directory.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span><span class="na">/</span>

<span class="w">      </span><span class="o">⊢</span><span class="w"> </span><span class="nf">⎕MKDIR</span><span class="w"> </span><span class="s1">'backups'</span><span class="w"> </span><span class="c1">⍝ Make a backups directory</span>
<span class="m">1</span>
<span class="c1">⍝ Move files to backups directory</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'backups'</span><span class="p">(</span><span class="nf">⎕NMOVE</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="s1">'d*'</span><span class="w"> </span><span class="s1">'UserCommand20.cache'</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="o">↑⊃</span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NINFO</span><span class="na">⍠</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'backups\*'</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span>
<span class="nv">backups</span><span class="na">/</span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
</code></pre></div></li>
</ul>
<h5>Note</h5>
<p>When <code>⎕NMOVE</code> copies and deletes files:</p>
<ul>
<li>The operation will take longer to complete.</li>
<li>File modification times will be preserved but other attributes such as file ownership may be changed.</li>
<li>Read permissions will be needed on all files within a directory which is moved.</li>
<li>If the operation fails at any point and an error is signalled it is possible that there may be files and/or directories left duplicated in both the source and destination. It is not possible that a file or directory may be removed from the source without having been copied to the destination.</li>
</ul>
<h6>ProgressCallback Option</h6>
<h6>Overview</h6>
<p>If this option is enabled, the system function invokes an APL callback function as the file operation (move or copy) proceeds. A system object is used to communicate between the system function and the callback. The file operation has 4 distinct stages:</p>
<ol>
<li>The start of the operation. The callback is invoked before any files are scanned or processed. This gives the application the opportunity to set parameters that control the frequency of callbacks during the operation itself.</li>
<li>The optional scan phase during which the system function enumerates the files that will be involved in the copy or move operation. The file count obtained is used to set the <code>Limit</code> field. The application may use this subsequently to indicate the degree of progress.</li>
<li>The main processing (move or copy) of the files.</li>
<li>The end of the operation.</li>
</ol>
<p>The callback function is invoked once at the start of the operation, during the (optional) scan and processing stages, and finally once at the end of the operation. During the scan and processing stages, the <code>Skip</code> and <code>Delay</code> options provide alternative ways to control the frequency with which the callback is invoked.</p>
<p>If both options are 0, the callback will be invoked after every file is processed. However, if there are a large number of small files involved, and you simply want to update a progress bar, this may prove to be unnecessarily  frequent, and will increase the total time required to complete the operation.</p>
<p>If you want to update a progress bar regularly (for example every second), the <code>Delay</code> option (1000 = 1 second) is the better choice.  In other circumstances, you might choose to use <code>Skip</code>.</p>
<p>If you use both options, the callback will be invoked when <em>both</em> apply, so if you set <code>Skip</code> to 10 and <code>Delay</code> to 5000, the callback will be invoked after at least 10 files have been processed and at least 5 seconds have elapsed since the previous invocation of the callback.</p>
<p>The value of the ProgressCallback variant option may be:</p>
<table>
<tbody>
<tr>
<td><code>fn</code></td>
<td>The name of the callback function.</td>
</tr>
<tr>
<td><code>fn data</code></td>
<td>The name of the callback function, and an array or namespace which is to be passed to the callback in its left argument.</td>
</tr>
</tbody>
</table>
<p>The right argument given to the callback function is a 3-element vector:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Function</td>
<td>Character vector which identifies the function that caused the callback to be executed; either <code>'⎕NCOPY'</code> or <code>'⎕NMOVE'.</code></td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Event</td>
<td>Character vector describing the event that lead to the callback being executed. See below.</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>Info</td>
<td>Reference to a namespace containing information about the event. See below.</td>
</tr>
</tbody>
</table>
<h6>Event</h6>
<p>Event is a character vector which indicates the stage of the copy or move operation..</p>
<table>
<tbody>
<tr>
<td><code>'Start'</code></td>
<td>Reported by the first invocation of the callback which occurs before any files are scanned or processed. This may be used to set the parameters that control the operation. See <strong>Options</strong> .</td>
</tr>
<tr>
<td><code>'Scan'</code></td>
<td>Indicates that the system function is in the initial phase of scanning the files in order to calculate <code>Limit</code> . See <strong>ScanFirst</strong> .</td>
</tr>
<tr>
<td><code>'Progress'</code></td>
<td>Indicates that the system function is at the main stage of the operation and is moving or copying the files.</td>
</tr>
<tr>
<td><code>'Done'</code></td>
<td>Indicates that all files have been processed.</td>
</tr>
</tbody>
</table>
<p>Note that there will always be at least 2 invocations of the callback, to indicate the start and end of the operation.</p>
<h6>Info</h6>
<p>Info is a ref to a namespace that contains information about the event. This namespace persists for the duration of the execution of the system function and contains the following fields:</p>
<table>
<tbody>
<tr>
<td><code>Progress</code></td>
<td>A number between <code>0</code> and <code>Limit</code> . When the event code is <code>'Start'</code> , <code>Progress</code> is <code>0</code> . Every time a file or directory is processed, <code>Progress</code> is increased by 1. Finally when the  event code is <code>'Done'</code> , <code>Progress</code> will be equal to <code>Limit</code> .</td>
</tr>
<tr>
<td><code>Limit</code></td>
<td>The maximum value of <code>Progress</code> . This value might change during the file operation if it doesn't do a full discovery first (the <code>ScanFirst</code> option is 0), or if the file structure changes between the scan and the copy/move.</td>
</tr>
<tr>
<td><code>Last</code></td>
<td>A vector of file names which have been processed since the last invocation of the callback function. The user can specify the maximum length of this vector by setting the <code>LastFileCount</code> option. The names in this list are the source names, and not the destination names. The <code>Last</code> vector is always empty when the event is <code>'Start'</code> , and it is cleared when going from the <code>'Scan'</code> phase to the <code>'Progress'</code> phase, to avoid any confusion.</td>
</tr>
<tr>
<td><code>Data</code></td>
<td>A field that is reserved for the user to store data which persists between invocations of the callback. It could for example be used to keep a sequence number, to count the number of times the callback had been run.</td>
</tr>
<tr>
<td><code>Options</code></td>
<td>This is a namespace which contains the information that controls the future execution of the callback. The options persist between the calls to the callback, so there is no need to set them again unless they should be changed. The fields and their default values are described below.</td>
</tr>
</tbody>
</table>
<h6>Options</h6>
<p>This is a namespace which contains options that control future invocations of the callback. The options persist between these invocations, so there is no need to set them again unless they should be changed. The fields and their default values are:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ScanFirst</code></td>
<td>1</td>
<td>Specifies if the file operation should do a "scan pass" before moving/copying the files. This stage just enumerates  the files to determine how many there are. This will ensure <code>Limit</code> has a realistic value when the actual processing of the files happens. The overhead is small in comparision with the time it takes to process the files. The <code>ScanFirst</code> field is only inspected right after the first invocation of the callback function, with the event code <code>'Start'</code> .</td>
</tr>
<tr>
<td><code>Delay</code></td>
<td>0</td>
<td>Specifies the number of milliseconds to wait, until the callback will be called again. If all file operations finish before this time, the callback function is called anyway, with the event code <code>'Done'</code> . If a slow file operation is happening (such as copying a big file), the actual delay before the callback is invoked might be longer than the value of <code>Delay</code> .</td>
</tr>
<tr>
<td><code>Skip</code></td>
<td>0</td>
<td>Specifies a number of files to skip between invocations of the callback function. If you are only interested in getting a callback for each 10th file, you should set this option to 9 for example.</td>
</tr>
<tr>
<td><code>LastFileCount</code></td>
<td>1</td>
<td>An integer, specifying the maximum number of the latest filenames to be stored in the <code>Last</code> field. The default is to only store the last file processed, but if <code>Delay</code> or <code>Skip</code> are non-zero, multiple files could have been processed between calls to the callback function. A value of 5 for example, will make sure that the 5 last files processed before calling the callback, will have their names in the <code>Last</code> field. The <code>Last</code> field might have fewer elements than <code>LastFileCount</code> , if the number of files processed since the last call is less than <code>LastFileCount</code> . The special value <code>¯1</code> indicates that the <code>Last</code> field should contain <strong>all</strong> the last files since the last call (no limit).</td>
</tr>
</tbody>
</table>
<p>The result of the callback function must be a Boolean scalar, indicating whether or not the <code>⎕NCOPY</code> or <code>⎕NMOVE</code> should continue or stop.</p>
<p>1: Execution should continue.</p>
<p>0: Execution should stop. In this case, an <code>INTERRUPT</code> (event 1003) is signalled.</p>
</article>
<article id="system-functions-nnames">
<div class="heading-container"><h3 class="heading" id="system-functions-nnames-header">Native File Names</h3><div class="command">R←⎕NNAMES</div></div>
<p>This niladic function reports the names of all currently open native files.  <code>R</code> is a character matrix.  Each row contains the name of a tied native file padded if necessary with blanks.  The names are <strong>identical</strong> to those that were given when opening the files with <code>⎕NCREATE</code> or <code>⎕NTIE</code>. The rows of the result are in the order in which the files were tied.</p>
</article>
<article id="system-functions-nnums">
<div class="heading-container"><h3 class="heading" id="system-functions-nnums-header">Native File Numbers</h3><div class="command">R←⎕NNUMS</div></div>
<p>This niladic function reports the tie numbers associated with all currently open native files.  <code>R</code> is an integer vector of negative tie numbers. The elements of the result are in the order in which the files were tied.</p>
</article>
<article id="system-functions-nparts">
<div class="heading-container"><h3 class="heading" id="system-functions-nparts-header">File Name Parts</h3><div class="command">R←{X} ⎕NPARTS Y</div></div>
<p>Splits a file or directory name into its constituent parts.</p>
<p><code>Y</code> is a character vector or scalar containing a single name, or a vector of character vectors containing zero or more names. Names must conform to the file-naming rules of the host Operating System.</p>
<p>The file(s) need not exist; indeed this system function makes no attempt to identify or locate it/them.</p>
<p>The optional left-argument <code>X</code> specifies whether or not the name or names specified by <code>Y</code> are <em>normalised</em> before being processed. The default value 0 means no normalisation; 1 means normalise as follows:</p>
<ul>
<li>Pathnames are made absolute.</li>
<li>On Windows, all "\" directory separators are changed to "/".</li>
<li>The resultant name is simplified by removing extraneous directory separators etc. On Windows, this includes resolving occurrences of "." and ".."  within the name. On non-Windows platforms single "." are removed. Note that ".." and symbolic links interact differently on Windows to other platforms; on other platforms they cannot be removed without reference to the file system itself and are left in place. </li>
</ul>
<p>If <code>Y</code> is a scalar or vector, the result <code>R</code> is a 3-element vector of character vectors as follows:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td><em>path</em></td>
</tr>
<tr>
<td><code>[2]</code></td>
<td><em>base name</em></td>
</tr>
<tr>
<td><code>[3]</code></td>
<td><em>extension</em></td>
</tr>
</tbody>
</table>
<p>The <em>path</em> identifies the directory in which the file exists.</p>
<p>The <em>base name</em> is the name of the file stripped of its path and extension, if any.</p>
<p>The <em>extension</em> is the file extension including the leading ".".</p>
<p>If <code>Y</code> is a vector of character vectors, <code>R</code> is a vector of 3-element character vectors and is the same length as <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CMD</span><span class="w"> </span><span class="s1">'CD'</span><span class="c1">⍝ Current working directory</span>
<span class="nv">c</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\</span><span class="nv">Pete</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">'α'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="err">│</span><span class="w"> </span><span class="err">│α│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└──────────────┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────────┘</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">'\Users\Pete\Documents\dyalog.zip'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">C</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="nv">Documents</span><span class="na">/</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">dyalog</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="na">.</span><span class="nv">zip</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────────────────────┘</span><span class="w"> </span><span class="err">└──────┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────────────────────────────────────┘</span>

<span class="w">      </span><span class="o">⊃</span><span class="s1">'.'</span><span class="nf">⎕wg</span><span class="s1">'APLVersion'</span>
<span class="nv">AIX</span><span class="o">-</span><span class="m">64</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕nparts</span><span class="s1">'/home/andys/./..'</span>
<span class="err">┌────────────┬──┬┐</span>
<span class="err">│</span><span class="na">/</span><span class="nv">home</span><span class="na">/</span><span class="nv">andys</span><span class="na">/</span><span class="err">│</span><span class="na">..</span><span class="err">││</span>
<span class="err">└────────────┴──┴┘</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'..'</span>
<span class="err">┌────────────────┬───────┐</span>
<span class="err">│┌───┬─────────┬┐│┌───┬┬┐│</span>
<span class="err">││</span><span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="err">│</span><span class="nv">Documents</span><span class="err">││││</span><span class="nv">i</span><span class="bp">:</span><span class="na">/</span><span class="err">││││</span>
<span class="err">│└───┴─────────┴┘│└───┴┴┘│</span>
<span class="err">└────────────────┴───────┘</span><span class="w">      </span>
</code></pre></div>
<p>Note that <code>⊃1 ⎕NPARTS ''</code> returns the current working directory.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NPARTS</span><span class="w"> </span><span class="s1">''</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span>
<span class="err">│</span><span class="nv">c</span><span class="bp">:</span><span class="na">/</span><span class="nv">Users</span><span class="na">/</span><span class="nv">Pete</span><span class="na">/</span><span class="err">│</span>
<span class="err">└──────────────┘</span>
</code></pre></div></p>
</article>
<article id="system-functions-nput">
<div class="heading-container"><h3 class="heading" id="system-functions-nput-header">Write Text File</h3><div class="command">{R}←X ⎕NPUT Y</div></div>
<p>This function writes character data to a text file. See also <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>.</p>
<p><code>Y</code> is either a simple character vector or scalar containing the name of the file to be written, or a 2-item vector whose first item is the file name and whose second is an integer scalar specifying <code>flags</code> for the operation.</p>
<p>If <code>flags</code> is 0 (the default value if omitted) the file will not be overwritten if it already exists and <code>⎕NPUT</code> will signal an error. If <code>flags</code> is 1 the file will be overwritten. If flags is 2 the file will be appended to; i.e.</p>
<table>
<thead>
<tr>
<th>flags</th>
<th>file does not exist</th>
<th>file exists</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td>data is written to new file</td>
<td>error signalled, file is unchanged</td>
</tr>
<tr>
<td><code>1</code></td>
<td>data is written to new file</td>
<td>file is overwritten</td>
</tr>
<tr>
<td><code>2</code></td>
<td>data is written to new file</td>
<td>data is appended to file</td>
</tr>
</tbody>
</table>
<p>The left-argument <code>X</code> is comprised of 1, 2 or 3 items which identify <code>(content) (encoding) (newline)</code> respectively.</p>
<p><code>content</code> is either a vector of character vectors, each of which represents a line in the file to be written, or a simple character vector.</p>
<p>If specified, <code>encoding</code> is either:</p>
<ul>
<li>a character vector from the first column in the table <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>.  If <code>encoding</code> specifies a UTF format, it may be qualified with -BOM  (e.g. UTF-8-BOM), which causes a Byte Order Mark (BOM) to be written at the beginning of the file or -NOBOM which does not. If the -BOM or -NOBOM suffix is omitted, UTF-8 defaults to UTF-8-NOBOM, while the other UTF formats default to -BOM.</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>
<p>If  omitted, <code>encoding</code> defaults to UTF-8-NOBOM.</p>
<p>Note: If a non-empty file is appended to:</p>
<ul>
<li>No BOM will be written, even if encoding specifies it.</li>
<li>No check is made that the existing file content is text in the same encoding format.</li>
</ul>
<p>If specified, <code>newline</code> is numeric and is either  <code>⍬</code> or a scalar or vector  from the  column labelled <em>Value</em> in the <strong>newline characters</strong> section of the table <a class="internal-link" href="#system-functions-nget">Section 4.6.92</a>. Any other value causes <code>DOMAIN ERROR</code>. If <code>newline</code> is omitted it defaults to <code>(13 10)</code> on Windows and <code>10</code> on other platforms.</p>
<p>In all cases, <code>newline</code> is appended if required to a simple vector or to each vector in a vector of vectors.</p>
<p>If content contains anything other than a character vector or scalar (or these, nested) then a <code>DOMAIN ERROR</code> is signalled.</p>
<p>If both <code>encoding</code> and <code>newline</code> are omitted <code>X</code> specifies only <code>content</code> and may be a simple character vector or a vector of character vectors.</p>
<p>The shy result <code>R</code> is the number of bytes written to the file.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">txt</span><span class="kd">←</span><span class="s1">'mene'</span><span class="w"> </span><span class="s1">'mene'</span><span class="w"> </span><span class="s1">'tekel'</span><span class="w"> </span><span class="s1">'upharsin'</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="p">(</span><span class="o">⊂</span><span class="nv">txt</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕NPUT</span><span class="w"> </span><span class="s1">'writing.txt'</span>
<span class="m">25</span>
<span class="w">      </span><span class="o">⊢</span><span class="p">(</span><span class="o">⊂</span><span class="s1">'adding'</span><span class="w"> </span><span class="s1">'3'</span><span class="w"> </span><span class="s1">'lines'</span><span class="p">)</span><span class="nf">⎕NPUT</span><span class="s1">'writing.txt'</span><span class="w"> </span><span class="m">2</span>
<span class="m">18</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">LF</span><span class="kd">←</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">10</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="s1">'adding'</span><span class="o">,</span><span class="nv">LF</span><span class="o">,</span><span class="s1">'3'</span><span class="o">,</span><span class="nv">LF</span><span class="o">,</span><span class="s1">'lines'</span><span class="o">,</span><span class="nv">LF</span>
<span class="w">      </span><span class="o">⊢</span><span class="nv">t</span><span class="w"> </span><span class="nf">⎕NPUT</span><span class="s1">'writing.txt'</span><span class="w"> </span><span class="m">2</span>
<span class="m">18</span><span class="w">                                         </span>
</code></pre></div></p>
<h5>NEOL Option</h5>
<p>The NEOL variant option specifies how embedded line separators are treated.</p>
<table>
<tbody>
<tr>
<td><code>0</code></td>
<td>embedded line separator characters are preserved as is,and a <code>newline</code> is added to the last line if required.</td>
</tr>
<tr>
<td>1</td>
<td>every embedded LF is replaced by <code>newline</code></td>
</tr>
<tr>
<td><code>2</code></td>
<td>every embedded line separator character is replaced by <code>newline</code></td>
</tr>
<tr>
<td><code>¯1</code></td>
<td>same as 0 except that a <code>newline</code> is not added to the last line</td>
</tr>
</tbody>
</table>
<h5>Embedded line-separator examples</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">LF</span><span class="w"> </span><span class="nv">CR</span><span class="kd">←</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">13</span>
<span class="w">      </span><span class="nv">t</span><span class="kd">←</span><span class="s1">'adding'</span><span class="o">,</span><span class="nv">LF</span><span class="o">,</span><span class="s1">'3'</span><span class="o">,</span><span class="nv">CR</span><span class="o">,</span><span class="s1">'lines'</span><span class="o">,</span><span class="nv">CR</span><span class="o">,</span><span class="nv">LF</span>

<span class="w">      </span><span class="o">⊢</span><span class="nv">t</span><span class="w"> </span><span class="nf">⎕NPUT</span><span class="s1">'writing.txt'</span><span class="w"> </span><span class="m">2</span><span class="w">                             </span>
<span class="m">17</span>
<span class="w">      </span><span class="o">⊢</span><span class="nv">t</span><span class="p">(</span><span class="nf">⎕NPUT</span><span class="na">⍠</span><span class="s1">'NEOL'</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="s1">'writing.txt'</span><span class="w"> </span><span class="m">2</span><span class="w">                   </span>
<span class="m">16</span>
<span class="w">      </span><span class="o">⊢</span><span class="nv">t</span><span class="p">(</span><span class="nf">⎕NPUT</span><span class="na">⍠</span><span class="s1">'NEOL'</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="s1">'writing.txt'</span><span class="w"> </span><span class="m">2</span><span class="w">                   </span>
<span class="m">18</span>
</code></pre></div>
<p><code>t</code> contains three lines each with different line endings: LF, CR and CRLF.</p>
<p>In the first example (NEOL is by default 1), only the LF is normalised so the written file contains lines ending with CRLF, CR and CRLF.</p>
<p>In the second example, none of the line endings are normalised so the written file contains lines ending with LF, CR and CRLF.</p>
<p>In the third example, all of the line endings are normalised so the written file contains lines ending with CRLF, CRLF and CRLF.</p>
<h5>Note</h5>
<p>If two or more APL processes separately write to a file using <code>⎕NPUT</code> the behaviour is undefined. In particular, if multiple APLs use <code>⎕NPUT</code> with flags set to 2 (append), it is not guaranteed that each  <code>⎕NPUT</code> operation will be atomic and all the text written to the file will be complete and/or contiguous.</p>
</article>
<article id="system-functions-nq">
<div class="heading-container"><h3 class="heading" id="system-functions-nq-header">Enqueue Event</h3><div class="command">{R}←{X}⎕NQ Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This system function generates an event or invokes a method.</p>
<p>While APL is executing, events occur "naturally" as a result of user action or of communication with other applications.  These events are added to the event queue as and when they occur, and are subsequently removed and processed one by one by <code>⎕DQ</code>.  <code>⎕NQ</code> provides an "artificial" means to generate an event and is analogous to <code>⎕SIGNAL</code>.</p>
<p>If the left argument <code>X</code> is omitted or is 0, <code>⎕NQ</code> adds the event specified by <code>Y</code> to the bottom of the event queue. The event will subsequently be processed by <code>⎕DQ</code> when it reaches the top of the queue.</p>
<p>If <code>X</code> is 1, the event is actioned <strong>immediately</strong> by <code>⎕NQ</code> itself and is processed in exactly the same way as it would be processed by <code>⎕DQ</code>.  For example, if the event has a callback function attached, <code>⎕NQ</code> will invoke it directly. See <a class="internal-link" href="#system-functions-dq">Section 4.6.31</a> for further details. If the event generates any subsidiary events (for example, a KeyPress might generate a GotFocus), the subsidiary events are added to the event queue rather than being executed immediately.</p>
<p>Note that it is not possible for one thread to use <code>1 ⎕NQ</code> to send an event to another thread.</p>
<p>If <code>X</code> is 2 and the name supplied is the name of an event, <code>⎕NQ</code> performs the default processing for the event immediately, but does <strong>not</strong> invoke a callback function if there is one attached.</p>
<p>If <code>X</code> is 2 and the name supplied is the name of a (Dyalog APL) method, <code>⎕NQ</code> invokes the method.  Its (shy) result is the result produced by the method.</p>
<p>If <code>X</code> is 3, <code>⎕NQ</code> invokes a method in an OLE Control.  The (shy) result of <code>⎕NQ</code> is the result produced by the method.</p>
<p>If <code>X</code> is 4, <code>⎕NQ</code> signals an event from an ActiveXControl object to its host application.  The (shy) result of <code>⎕NQ</code> is the result returned by the host application and depends upon the syntax of the event. This case is only applicable to ActiveXControl objects.</p>
<p><code>Y</code> is a nested vector containing an event message.  The first two elements of <code>Y</code> are:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>Object</td>
<td>ref or character vector</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Event</td>
<td>numeric scalar or character vector which specifies an event or method</td>
</tr>
</tbody>
</table>
<p><code>Y[1]</code> must specify an <em>existing</em> object.  If not, <code>⎕NQ</code> terminates with a <code>VALUE ERROR</code>.</p>
<p>If <code>Y[2]</code> specifies a standard event type, subsequent elements must conform to the structure defined for that event type.  If not, <code>⎕NQ</code> terminates with a <code>SYNTAX ERROR</code>. If additional elements (beyond those defined for the event type) are supplied this will not cause an error, but is not recommended because Dyalog may extend the event message in the future.</p>
<p>If <code>Y[2]</code> specifies a non-standard event type, <code>Y[3]</code> onwards (if present) may contain arbitrary information.  Although any event type not listed herein may be used, numbers in the range 0-1000 are reserved for future extensions.</p>
<p>If <code>⎕NQ</code> is used monadically, or with a left argument of 0, its (shy) result is always an empty character vector.  If a left argument of 1 is specified, <code>⎕NQ</code> returns <code>Y</code> unchanged or a modified <code>Y</code> if the callback function returns its modified argument as a result.</p>
<p>If the left argument is 2, <code>⎕NQ</code> returns either the value 1 or a value that is appropriate.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">⍝ Send a keystroke ("A") to an Edit Field</span>
<span class="w">      </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="nv">TEST</span><span class="na">.</span><span class="nv">ED</span><span class="w"> </span><span class="s1">'KeyPress'</span><span class="w"> </span><span class="s1">'A'</span>

<span class="w">      </span><span class="c1">⍝ Iconify all top-level Forms</span>
<span class="w">      </span><span class="kt">{</span><span class="nf">⎕NQ</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="s1">'StateChange'</span><span class="w"> </span><span class="m">1</span><span class="kt">}</span><span class="na">¨</span><span class="s1">'Form'</span><span class="nf">⎕WN</span><span class="s1">'.'</span>

<span class="w">      </span><span class="c1">⍝ Set the focus to a particular field</span>
<span class="w">      </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="nv">TEST</span><span class="na">.</span><span class="nv">ED3</span><span class="w"> </span><span class="m">40</span>

<span class="w">      </span><span class="c1">⍝ Throw a new page on a printer</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="nv">PR1</span><span class="w"> </span><span class="s1">'NewPage'</span>

<span class="w">      </span><span class="c1">⍝ Terminate ⎕DQ under program control</span>

<span class="w">      </span><span class="s1">'TEST'</span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span><span class="w"> </span><span class="na">...</span><span class="w"> </span><span class="p">(</span><span class="s1">'Event'</span><span class="w"> </span><span class="m">1001</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="na">...</span>
<span class="w">      </span><span class="nf">⎕DQ</span><span class="w"> </span><span class="s1">'TEST'</span>
<span class="w">      </span><span class="na">...</span>
<span class="w">      </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="nv">TEST</span><span class="w"> </span><span class="m">1001</span><span class="w">  </span><span class="c1">⍝ From a callback</span>

<span class="w">      </span><span class="c1">⍝ Call GetItemState method for a TreeView F.TV</span>
<span class="w">      </span><span class="o">+</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="w"> </span><span class="nv">F</span><span class="na">.</span><span class="nv">TV</span><span class="w"> </span><span class="s1">'GetItemState'</span><span class="w"> </span><span class="m">6</span>
<span class="m">96</span>

<span class="w">      </span><span class="c1">⍝ Report where APL is installed</span>
<span class="w">      </span><span class="o">+</span><span class="m">2</span><span class="w"> </span><span class="nf">⎕NQ</span><span class="s1">'.'</span><span class="w"> </span><span class="s1">'GetEnvironment'</span><span class="w"> </span><span class="s1">'DYALOG'</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Program</span><span class="w"> </span><span class="nv">Files</span><span class="na">\</span><span class="nv">Dyalog</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">15.0</span><span class="w"> </span><span class="nv">Unicode</span>
</code></pre></div>
</article>
<article id="system-functions-nr">
<div class="heading-container"><h3 class="heading" id="system-functions-nr-header">Nested Representation</h3><div class="command">R←⎕NR Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which represents the name of a function or a defined operator.</p>
<p>If <code>Y</code> is a name of a defined function or defined operator, <code>R</code> is a vector of text vectors.  The first element of <code>R</code> contains the text of the function or operator header.  Subsequent elements contain lines of the function or operator.  Elements of <code>R</code> contain no unnecessary blanks, except for leading indentation of control structures and the blanks which precede comments.</p>
<p>If <code>Y</code> is the name of a variable, a locked function or operator, an external function or a namespace, or is undefined, <code>R</code> is an empty vector.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="bp">∇</span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Average</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
<span class="w">      </span><span class="bp">∇</span>

<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕NR</span><span class="s1">'MEAN'</span>
<span class="w">  </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝Average   R←(+/X)÷⍴X</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">2</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">F</span>
<span class="na">.</span><span class="kd">→</span><span class="o">----------------------------------------</span><span class="na">.</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">---------------------</span><span class="na">.</span><span class="w">  </span><span class="na">.</span><span class="kd">→</span><span class="o">----------</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Average|  | R←(+/X)÷⍴X| |</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'----------------------'</span><span class="w">  </span><span class="s1">'-----------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊----------------------------------------'</span>
</code></pre></div>
<p>The definition of <code>⎕NR</code> has been extended to names assigned to functions by specification (<code>←</code>), and to local names of functions used as operands to defined operators.  In these cases, the result of <code>⎕NR</code> is identical to that of <code>⎕CR</code> except that the representation of defined functions and operators is as described above.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">AVG</span><span class="kd">←</span><span class="nv">MEAN</span><span class="na">∘</span><span class="o">,</span>

<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕NR</span><span class="s1">'AVG'</span>
<span class="w">   </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Average   R←(+/X)÷⍴X  ∘,</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">3</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">F</span>
<span class="na">.</span><span class="kd">→</span><span class="o">------------------------------------------------</span><span class="na">.</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">----------------------------------------</span><span class="na">.</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">---------------------</span><span class="na">.</span><span class="w">  </span><span class="na">.</span><span class="kd">→</span><span class="o">----------</span><span class="na">.</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="na">∘</span><span class="w"> </span><span class="o">,</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Average|  | R←(+/X)÷⍴X| | - - |</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'----------------------'</span><span class="w">  </span><span class="s1">'-----------'</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'∊----------------------------------------'</span><span class="w">     </span><span class="o">|</span>
<span class="s1">'∊------------------------------------------------'</span>
</code></pre></div>
</article>
<article id="system-functions-nread">
<div class="heading-container"><h3 class="heading" id="system-functions-nread-header">Native File Read</h3><div class="command">R←⎕NREAD Y</div></div>
<p>This monadic function reads data from a native file. <code>Y</code> is a 3- or 4-element integer vector whose elements are as follows:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>negative tie number,</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>conversion code (see below),</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>count. If this value is <code>¯1</code> , all of the elements defined by <code>Y[2]</code> are read from the position specified by <code>Y[4]</code> to the end of the file. This may result in the last few bytes in the file being ignored if they do not form a complete element.</td>
</tr>
<tr>
<td><code>[4]</code></td>
<td>start byte, counting from 0. If this value omitted or is <code>¯1</code> , data is read starting from the current position in the file (initially <code>0</code> ).</td>
</tr>
</tbody>
</table>
<h5>Notes</h5>
<p><code>8 ⎕NINFO ⊃Y</code> can be used to report the current position of the file pointer.</p>
<p><code>Y[2]</code> specifies conversion to an APL internal form as follows. Note that the internal formats for character arrays differ between the Unicode and Classic Editions.</p>
<p>If both <code>Y[3]</code> and <code>Y[4]</code> have the value <code>¯1</code>, then <code>⎕NREAD</code> reads data from the current position in the file to the end of the file.</p>
<p><code>⎕NREAD</code> can be used with any file. However, calling <code>⎕NREAD</code> with at least one of <code>Y[3 4]</code> set to <code>¯1</code> is intended for regular files only; using on pipes, FIFOs or other special types of file is not recommended.</p>
<p>Table: Unicode Edition: Conversion Codes</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Number of bytes read</th>
<th>Result Type</th>
<th>Result shape</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>count</td>
<td>1 bit Boolean</td>
<td>8 <code>×</code> count</td>
</tr>
<tr>
<td>80</td>
<td>count</td>
<td>8 bits character</td>
<td>count</td>
</tr>
<tr>
<td>82 <span class="footnote">Conversion code 82 is permitted in the Unicode Edition for compatibility and causes 1-byte data on file to be translated (according to ⎕NXLATE ) from ⎕AV indices into normal (Unicode) characters of type 80, 160 or 320.</span></td>
<td>count</td>
<td>8 bits character</td>
<td>count</td>
</tr>
<tr>
<td>83</td>
<td>count</td>
<td>8 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>160</td>
<td>2 <code>×</code> count</td>
<td>16-bits character</td>
<td>count</td>
</tr>
<tr>
<td>163</td>
<td>2 <code>×</code> count</td>
<td>16 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>320</td>
<td>4 <code>×</code> count</td>
<td>32-bits character</td>
<td>count</td>
</tr>
<tr>
<td>323</td>
<td>4 <code>×</code> count</td>
<td>32 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>645</td>
<td>8 <code>×</code> count</td>
<td>64 bits floating</td>
<td>count</td>
</tr>
</tbody>
</table>
<p>Table: Classic Edition: Conversion Codes</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Number of bytes read</th>
<th>Result Type</th>
<th>Result shape</th>
</tr>
</thead>
<tbody>
<tr>
<td>11</td>
<td>count</td>
<td>1 bit Boolean</td>
<td>8 <code>×</code> count</td>
</tr>
<tr>
<td>82</td>
<td>count</td>
<td>8 bits character</td>
<td>count</td>
</tr>
<tr>
<td>83</td>
<td>count</td>
<td>8 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>163</td>
<td>2 <code>×</code> count</td>
<td>16 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>323</td>
<td>4 <code>×</code> count</td>
<td>32 bits integer</td>
<td>count</td>
</tr>
<tr>
<td>645</td>
<td>8 <code>×</code> count</td>
<td>64 bits floating</td>
<td>count</td>
</tr>
</tbody>
</table>
<p>Note that types <strong>80, 160</strong> and <strong>320</strong> and <strong>83</strong> and <strong>163</strong> are exclusive to Dyalog APL.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">DATA</span><span class="kd">←</span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">160</span><span class="w"> </span><span class="p">(</span><span class="m">0.5</span><span class="o">×</span><span class="nf">⎕NSIZE</span><span class="w"> </span><span class="m">¯1</span><span class="p">)</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Unicode</span>
<span class="w">      </span><span class="nv">DATA</span><span class="kd">←</span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕NSIZE</span><span class="w"> </span><span class="m">¯1</span><span class="p">)</span><span class="w"> </span><span class="m">0</span><span class="w">      </span><span class="c1">⍝ Classic</span>
<span class="w">      </span><span class="nv">DATA</span><span class="kd">←</span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">0</span><span class="w">       </span><span class="c1">⍝ Shorter version</span>
</code></pre></div>
</article>
<article id="system-functions-nrename">
<div class="heading-container"><h3 class="heading" id="system-functions-nrename-header">Native File Rename</h3><div class="command">{R}←X ⎕NRENAME Y</div></div>
<p><code>⎕NRENAME</code> is used to rename a native file.</p>
<p><code>Y</code> is a negative integer tie number associated with a tied native file.  <code>X</code> is a simple character vector or scalar containing a valid (and unused) file name.</p>
<p>The shy result of <code>⎕NRENAME</code> is the tie number of the renamed file.</p>
</article>
<article id="system-functions-nreplace">
<div class="heading-container"><h3 class="heading" id="system-functions-nreplace-header">Native File Replace</h3><div class="command">{R}←X ⎕NREPLACE Y</div></div>
<p><code>⎕NREPLACE</code> is used to write data to a native file, replacing data which is already there.</p>
<p><code>X</code> must be a simple homogeneous APL array containing the data to be written.</p>
<p><code>Y</code> is a 2- or 3-element integer vector whose elements are as follows:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>negative tie number,</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>start byte, counting from 0, at which the data is to be written; the value <code>¯1</code> causes the data to be written from the current position in the file (initially, 0).</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>conversion code (optional).</td>
</tr>
</tbody>
</table>
<p>See <a class="internal-link" href="#system-functions-nread">Section 4.6.103</a> for a list of valid conversion codes.</p>
<p>The shy result is the location of the internal file pointer which will be pointing to the end of the newly written data. Used, for example, in:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">⍝ Replace sequentially from indx.</span>
<span class="w">      </span><span class="kt">{</span><span class="bp">⍺</span><span class="w"> </span><span class="nf">⎕NREPLACE</span><span class="w"> </span><span class="nv">tie</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="na">/</span><span class="nv">vec</span><span class="o">,</span><span class="nv">indx</span><span class="w"> </span>
</code></pre></div></p>
<p>Note that <code>8 ⎕NINFO ⊃Y</code>  can be used to report the current position of the file pointer.</p>
<h5>Unicode Edition</h5>
<p>Unless you specify the data type in <code>Y[3]</code>, a character array will by default be written using type 80.</p>
<p>If the data will not fit into the specified character width (bytes) <code>⎕NREPLACE</code> will fail with a <code>DOMAIN ERROR</code>.</p>
<p>As a consequence of these two rules, you must specify the data type (either 160 or 320) in order to write Unicode characters whose code-point is in the range 256-65535 and &gt;65535 respectively.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">n</span><span class="kd">←</span><span class="s1">'test'</span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ See "Example"</span>

<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span>
<span class="nv">abc</span>
<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">160</span><span class="w"> </span><span class="m">7</span>
<span class="err">ταβέρνα</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="s1">'εστιατόριο'</span><span class="nf">⎕NREPLACE</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">3</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="s1">'εστιατόριο'</span><span class="nf">⎕NREPLACE</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">3</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="s1">'εστιατόριο'</span><span class="nf">⎕NREPLACE</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">160</span>
<span class="m">23</span>
<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span>
<span class="nv">abc</span>
<span class="w">      </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="m">160</span><span class="w"> </span><span class="m">10</span>
<span class="err">εστιατόριο</span>
</code></pre></div>
<p>For compatibility with old files, you may specify that the data be converted to type 82 on output. The conversion (to <code>⎕AV</code> indices) will be determined by the local value of <code>⎕AVU</code>.</p>
</article>
<article id="system-functions-nresize">
<div class="heading-container"><h3 class="heading" id="system-functions-nresize-header">Native File Resize</h3><div class="command">{R}←X ⎕NRESIZE Y</div></div>
<p>This function changes the size of a native file.</p>
<p><code>Y</code> is a negative integer tie number associated with a tied native file.</p>
<p><code>X</code> is a single integer value that specifies the new size of the file in bytes.  If <code>X</code> is smaller than the current file size, the file is truncated.  If <code>X</code> is larger than the current file size, the file is extended and the value of additional bytes is undefined.</p>
<p>The shy result of <code>⎕NRESIZE</code> is the tie number of the resized file.</p>
</article>
<article id="system-functions-ns">
<div class="heading-container"><h3 class="heading" id="system-functions-ns-header">Namespace</h3><div class="command">{R}←{X}⎕NS Y</div></div>
<p>If specified, <code>X</code> must be a simple character scalar or vector identifying the name of a namespace.</p>
<p><code>Y</code> is either a character array which represents a list of names of objects to be copied into the namespace, or a ref to a namespace, or  an array produced by the <code>⎕OR</code> of a namespace.</p>
<h5>Case 1</h5>
<p>In the first case, <code>Y</code> must be a simple character scalar, vector, matrix or a nested vector of character vectors identifying zero or more workspace objects to be copied into the namespace <code>X</code>.  The identifiers in <code>X</code> and <code>Y</code> may be simple names or compound names separated by <code>'.'</code> and including the names of the special namespaces <code>'#'</code>, <code>'##'</code> and <code>'⎕SE'</code>.</p>
<p>The namespace <code>X</code> is created if it doesn't already exist.  If the name is already in use for an object other than a namespace, APL issues a <code>DOMAIN ERROR</code>.</p>
<p>If <code>X</code> is omitted, an unnamed namespace is created.</p>
<p>The objects identified in the list <code>Y</code> are copied into the namespace <code>X</code>.</p>
<p>If <code>X</code> is specified, the result <code>R</code> is the full name (starting with <code>#.</code> or <code>⎕SE.</code>) of the namespace <code>X</code>. If <code>X</code> is omitted, the result <code>R</code> is a namespace reference, or <em>ref</em>, to an unnamed namespace.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="s1">'X'</span><span class="nf">⎕NS</span><span class="s1">''</span><span class="w">               </span><span class="c1">⍝ Create namespace X.</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'X'</span><span class="nf">⎕NS</span><span class="s1">'VEC'</span><span class="w"> </span><span class="s1">'UTIL.DISP'</span><span class="c1">⍝ Copy VEC and DISP to X.</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">X</span><span class="w">                   </span><span class="c1">⍝ Change to namespace X.</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'Y'</span><span class="nf">⎕NS</span><span class="s1">'#.MAT'</span><span class="w"> </span><span class="s1">'##.VEC'</span><span class="w"> </span><span class="c1">⍝ Create #.X.Y &amp;copy in</span>
<span class="c1">#.X.Y</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'#.UTIL'</span><span class="nf">⎕NS</span><span class="s1">'Y.MAT'</span><span class="w">     </span><span class="c1">⍝ Copy MAT from Y to UTIL #.UTIL.</span>
<span class="c1">#.UTIL</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'#'</span><span class="nf">⎕NS</span><span class="s1">'Y'</span><span class="w">              </span><span class="c1">⍝ Copy namespace Y to root.</span>
<span class="c1">#</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="s1">''</span><span class="nf">⎕NS</span><span class="s1">'#.MAT'</span><span class="w">           </span><span class="c1">⍝ Copy MAT to current space.</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">''</span><span class="nf">⎕NS</span><span class="s1">''</span><span class="w">                </span><span class="c1">⍝ Display current space.</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="o">⊢</span><span class="s1">'Z'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="nf">⎕OR</span><span class="s1">'Y'</span><span class="w">          </span><span class="c1">⍝ Create nspace from ⎕OR.</span>
<span class="c1">#.X.Z</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">NONAME</span><span class="kd">←</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span><span class="w">           </span><span class="c1">⍝ Create unnamed nspace</span>
<span class="w">      </span><span class="nv">NONAME</span>
<span class="c1">#.[Namespace]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">DATA</span><span class="kd">←</span><span class="nf">⎕NS</span><span class="na">¨</span><span class="m">3</span><span class="o">⍴⊂</span><span class="s1">''</span><span class="w">         </span><span class="c1">⍝ Create 3-element vector of</span>
<span class="w">                             </span><span class="c1">⍝ distinct unnamed nspaces</span>
<span class="w">      </span><span class="nv">DATA</span>
<span class="w"> </span><span class="c1">#.[Namespace]  #.[Namespace]  #.[Namespace]</span>
</code></pre></div></p>
<h5>Case 2</h5>
<p>The second case is where <code>Y</code> is a ref to a namespace or the <code>⎕OR</code> of a namespace.</p>
<p>If <code>Y</code> is a ref to or a <code>⎕OR</code> of a <em>GUI</em> object, <code>X</code> must be a valid parent for the GUI object represented by <code>Y</code>, or the operation will fail with a <code>DOMAIN ERROR</code>.</p>
<p>Otherwise, the result of the operation depends upon the existence of <code>X</code>.</p>
<ul>
<li>If <code>X</code> does not currently exist (name class is 0), <code>X</code> is created as a complete copy (clone) of the original namespace represented by <code>Y</code>. If <code>Y</code> is a ref to or the <code>⎕OR</code> of a GUI object or of a namespace containing GUI objects, the corresponding GUI components of <code>Y</code> will be instantiated in <code>X</code>.</li>
<li>If <code>X</code> is the name of an existing namespace (name class 9), the contents of <code>Y</code>, including any GUI components, are merged into <code>X</code>. Any items in <code>X</code> with corresponding names in <code>Y</code> (names with the same path in both <code>Y</code> and <code>X</code>) will be replaced by the names in <code>Y</code>, unless they have a conflicting name class in which case the existing items in <code>X</code> will remain unchanged. However, all GUI spaces in <code>X</code> will be stripped of their GUI components prior to the merge operation.</li>
</ul>
</article>
<article id="system-functions-nsi">
<div class="heading-container"><h3 class="heading" id="system-functions-nsi-header">Namespace Indicator</h3><div class="command">R←⎕NSI</div></div>
<p><code>R</code> is a nested vector of character vectors containing the names of the spaces from which functions in the state indicator were called (<code>⍴⎕NSI←→⍴⎕RSI←→⍴⎕SI</code>).</p>
<p><code>⎕RSI</code> and <code>⎕NSI</code> are identical except that <code>⎕RSI</code> returns refs to the spaces whereas <code>⎕NSI</code> returns their names. Put another way:  <code>⎕NSI←→⍕¨⎕RSI.</code></p>
<p>Note that <code>⎕NSI</code> contains the names of spaces <em>from which</em> functions were called not those <em>in which</em> they are currently running.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">OBJECTS</span>
<span class="nv">xx</span><span class="w">      </span><span class="nv">yy</span>

<span class="w">      </span><span class="nf">⎕VR</span><span class="w"> </span><span class="s1">'yy.foo'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">goo</span>
<span class="w">     </span><span class="bp">∇</span><span class="w">                          </span>
<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'⎕SE.goo'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">goo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕SI</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="nf">⎕NSI</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">xx</span>
<span class="c1">#.xx</span>
<span class="w">      </span><span class="nv">calling</span><span class="kd">←</span><span class="c1">#.yy.foo</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">calling</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">goo</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="c1">#.yy│ │</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">foo</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="c1">#.xx│ │</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────┘</span>
</code></pre></div>
</article>
<article id="system-functions-nsize">
<div class="heading-container"><h3 class="heading" id="system-functions-nsize-header">Native File Size</h3><div class="command">R←⎕NSIZE Y</div></div>
<p>This reports the size of a native file.</p>
<p><code>Y</code> is a negative integer tie number associated with a tied native file.  The result <code>R</code> is the size of the file in bytes.</p>
</article>
<article id="system-functions-ntie">
<div class="heading-container"><h3 class="heading" id="system-functions-ntie-header">Native File Tie</h3><div class="command">{R}←X ⎕NTIE Y</div></div>
<p><code>⎕NTIE</code> opens a native file.</p>
<p><code>X</code> is a simple character vector or scalar containing a valid pathname for an existing native file.</p>
<p><code>Y</code> is a 1- or 2-element vector.</p>
<p><code>Y[1]</code> is a negative integer value that specifies an (unused) tie number by which the file may subsequently be referred.</p>
<p><code>Y[2]</code> is optional and specifies the mode in which the file is to be opened.  This is an integer value calculated as the sum of 2 codes.  The first code refers to the type of access needed from users who have already tied the native file.  The second code refers to the type of access you wish to grant to users who subsequently try to open the file while you have it open.</p>
<p>If <code>Y[2]</code> is omitted, the system tries to open the file with the default value of 66 (read and write access for this process and for any subsequent processes that attempt to access the file). If this fails, the system attempts to open the file with the value 64 (read access for this process, read and write for subsequent processes).</p>
<table>
<thead>
<tr>
<th colspan="2">Needed from existing users</th>
<th colspan="2">Granted to subsequent users</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>read access</td>
<td>0</td>
<td>see note <span class="footnote">The original meaning of this value is no longer relevant. 0 now means the same as 16 (no access).</span></td>
</tr>
<tr>
<td>1</td>
<td>write access</td>
<td>16</td>
<td>no access (exclusive)</td>
</tr>
<tr>
<td>2</td>
<td>read and write access</td>
<td>32</td>
<td>read access</td>
</tr>
<tr>
<td> </td>
<td> </td>
<td>48</td>
<td>write access</td>
</tr>
<tr>
<td> </td>
<td> </td>
<td>64</td>
<td>read and write access</td>
</tr>
</tbody>
</table>
<p>On UNIX systems, the second column has no meaning and only the first code (<code>16|mode</code>) is passed to the <code>open(2)</code> call as the access parameter. See include file <code>fcntl.h</code> for details. See also <a class="internal-link" href="#system-functions-nlock">Section 4.6.95</a> which is not platform dependent.</p>
<p><code>R</code> is the tie number by which the file may subsequently be referred. If <code>Y[1]</code> is a negative integer, then <code>R</code> is a shy result; if <code>Y[1]</code> is 0, <code>R</code> is an explicit result.</p>
<h5>Automatic Tie Number Allocation</h5>
<p>A tie number of 0 as argument to a create or tie operation, allocates, and returns as an explicit result, the first (closest to zero) available tie number. This allows you to simplify code. For example:</p>
<p>from:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="m">¯1</span><span class="o">+⌊</span><span class="na">/</span><span class="m">0</span><span class="o">,</span><span class="nf">⎕NNUMS</span><span class="w">    </span><span class="c1">⍝ With next available number,</span>
<span class="w">      </span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="nv">tie</span><span class="w">       </span><span class="c1">⍝ ... tie file.</span>
</code></pre></div></p>
<p>to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tie</span><span class="kd">←</span><span class="nv">file</span><span class="w"> </span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="m">0</span><span class="w">     </span><span class="c1">⍝ Tie with first available no.</span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="nv">ntie</span><span class="kd">←</span><span class="kt">{</span><span class="w">                  </span><span class="c1">⍝ tie file and return tie no.</span>
<span class="w">    </span><span class="bp">⍺</span><span class="kd">←</span><span class="m">2</span><span class="o">+</span><span class="m">64</span><span class="w">              </span><span class="c1">⍝ default all access.</span>
<span class="w">    </span><span class="bp">⍵</span><span class="w"> </span><span class="nf">⎕ntie</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="bp">⍺</span><span class="w">         </span><span class="c1">⍝ return new tie no.</span>
<span class="kt">}</span>
</code></pre></div>
<h5>Note</h5>
<p>If the native file is already tied, executing <code>⎕NTIE</code> with the same or a different tie number simply re-ties it with the same or the new tie number. Re-tying a file with a tie number of 0, re-ties it with the same tie number. This feature may be used to re--tie the file using a different mode.</p>
</article>
<article id="system-functions-null">
<div class="heading-container"><h3 class="heading" id="system-functions-null-header">Null Item</h3><div class="command">R←⎕NULL</div></div>
<p>This is a reference to a null item, such as may be returned across the COM interface to represent a null value. A null might be returned as the result of a .NET method or as the value of an empty cell in a spreadsheet</p>
<p><code>⎕NULL</code> may be used in any context that accepts a namespace reference, in particular:</p>
<ul>
<li>As the argument to a defined function</li>
<li>As an item of an array.</li>
<li>As the argument to those primitive functions that take character data arguments, for example: <code>=, ≠, ≡, ≢, ,, ⍴, ⊃, ⊂</code></li>
</ul>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'EX'</span><span class="nf">⎕WC</span><span class="s1">'OLEClient'</span><span class="w"> </span><span class="s1">'Excel.Application'</span>
<span class="w">      </span><span class="nv">WB</span><span class="kd">←</span><span class="nv">EX</span><span class="na">.</span><span class="nv">Workbooks</span><span class="na">.</span><span class="nv">Open</span><span class="w"> </span><span class="s1">'simple.xls'</span>

<span class="w">      </span><span class="p">(</span><span class="nv">WB</span><span class="na">.</span><span class="nv">Sheets</span><span class="na">.</span><span class="nv">Item</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="na">.</span><span class="nv">UsedRange</span><span class="na">.</span><span class="nv">Value2</span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">    </span><span class="nv">Year</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">    </span><span class="m">1999</span><span class="w">    </span><span class="m">2000</span><span class="w">    </span><span class="m">2001</span><span class="w">    </span><span class="m">2002</span><span class="w"> </span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Sales</span><span class="w">      </span><span class="m">100</span><span class="w">      </span><span class="m">76</span><span class="w">     </span><span class="m">120</span><span class="w">     </span><span class="m">150</span><span class="w"> </span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Costs</span><span class="w">       </span><span class="m">80</span><span class="w">      </span><span class="m">60</span><span class="w">     </span><span class="m">100</span><span class="w">     </span><span class="m">110</span><span class="w"> </span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w">  </span><span class="sr">[</span><span class="nv">Null</span><span class="sr">]</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Margin</span><span class="w">      </span><span class="m">20</span><span class="w">      </span><span class="m">16</span><span class="w">      </span><span class="m">20</span><span class="w">      </span><span class="m">40</span><span class="w"> </span>
</code></pre></div>
<p>To determine which of the cells are filled, you can compare the array with <code>⎕NULL</code>.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕NULL</span><span class="o">≢</span><span class="na">¨</span><span class="p">(</span><span class="nv">WB</span><span class="na">.</span><span class="nv">Sheets</span><span class="na">.</span><span class="nv">Item</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="na">.</span><span class="nv">UsedRange</span><span class="na">.</span><span class="nv">Value2</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
</article>
<article id="system-functions-nuntie">
<div class="heading-container"><h3 class="heading" id="system-functions-nuntie-header">Native File Untie</h3><div class="command">{R}←⎕NUNTIE Y</div></div>
<p>This closes one or more native files.  <code>Y</code> is a scalar or vector of negative integer tie numbers.  The files associated with elements of <code>Y</code> are closed.  Native file untie with a zero length argument (<code>⎕NUNTIE ⍬</code>) flushes all file buffers to disk - see <a class="internal-link" href="#system-functions-funtie">Section 4.6.68</a> for more explanation.</p>
<p>The shy result of <code>⎕NUNTIE</code> is a vector of tie numbers of the files <strong>actually untied</strong>.</p>
</article>
<article id="system-functions-nxlate">
<div class="heading-container"><h3 class="heading" id="system-functions-nxlate-header">Native File Translate</h3><div class="command">{R}←{X}⎕NXLATE Y</div></div>
<p>This associates a character translation vector with a native file or, if <code>Y</code> is 0, with the use by <code>⎕DR</code>.</p>
<p>A translate vector is a 256-element vector of integers from 0-255. Each element maps the corresponding <code>⎕AV</code> position onto an ANSI character code.</p>
<p>For example, to map <code>⎕AV[17+⎕IO]</code> onto ANSI 'a' (code 97), element 17 of the translate vector is set to 97.</p>
<p><code>⎕NXLATE</code> is a non-Unicode (Classic Edition) feature and is retained in the Unicode Edition only for compatibility.</p>
<p><code>Y</code> is either a negative integer tie number associated with a tied native file or 0.  If <code>Y</code> is negative, monadic <code>⎕NXLATE</code> returns the current translation vector associated with the corresponding native file. If specified, the left argument <code>X</code> is a 256-element vector of integers that specifies a new translate vector.  In this case, the old translate vector is returned as a shy result.  If <code>Y</code> is 0, it refers to the translate vector used by <code>⎕DR</code> to convert to and from character data.</p>
<p>The system treats a translate vector with value <code>(⍳256)-⎕IO</code> as meaning <em>no translation</em> and thus provides raw input/output bypassing the whole translation process.</p>
<p>The default translation vector established at <code>⎕NTIE</code> or <code>⎕NCREATE</code> time  is derived from the mapping defined in the current output translation table (normally WIN.DOT) and maps alphabetic, numeric and most other characters in <code>⎕AV</code>  to their corresponding ANSI positions. However, some characters are not resolved  by this process and it is recommended that users define translate vectors to cover all cases.</p>
<h5>Unicode Edition</h5>
<p><code>⎕NXLATE</code> is relevant in the Unicode Edition only to process Native Files that contain characters expressed as indices into <code>⎕AV</code>, such as files written by the Classic Edition.</p>
<p>In the Unicode Edition, when reading data from a Native File using conversion code 82, incoming bytes are translated first to <code>⎕AV</code> indices using the translation table specified by <code>⎕NXLATE</code>, and then to type 80, 160 or 320 using <code>⎕AVU</code>. When writing data to a Native File using conversion code 82, characters are converted using these two translation tables in reverse.</p>
</article>
<article id="system-functions-off">
<div class="heading-container"><h3 class="heading" id="system-functions-off-header">Sign Off APL</h3><div class="command">⎕OFF</div></div>
<p>This niladic system function terminates the APL session, returning to the shell command level.  The active workspace does not replace the last continuation workspace.</p>
<p>Although <code>⎕OFF</code> is niladic, you may specify an optional integer <code>I</code> to the right of the system function which will be reported to the Operating System as the exit code. If <code>I</code> is an <em>expression</em> generating an integer, you should put the expression in parentheses. <code>I</code> must be in the range 0..255, but note that on UNIX processes use values greater than 127 to indicate the signal number which was used to terminate a process, and that currently APL itself generates values 0..8; this list may be extended in future. This list is documented in the <em>Dyalog for Microsoft Windows Installation and Configuration Guide: APL Exit Codes</em>.</p>
</article>
<article id="system-functions-opt">
<div class="heading-container"><h3 class="heading" id="system-functions-opt-header">Variant</h3><div class="command">{R}←{X}(f ⎕OPT B)Y</div></div>
<p><code>⎕OPT</code> is synonymous with the Variant Operator <code>⍠</code> and can be used in both Classic and Unicode Editions - unlike <code>⍠</code> which is valid in Unicode Editions only, and <code>⎕U2360</code> which is valid in Classic Editions only.</p>
<p>See <a class="internal-link" href="#primitive-operators-variant">Section 2.4.29</a>.</p>
</article>
<article id="system-functions-or">
<div class="heading-container"><h3 class="heading" id="system-functions-or-header">Object Representation</h3><div class="command">R←⎕OR Y</div></div>
<p><code>⎕OR</code> converts a defined function, defined operator or namespace to a special form, described as its <em>object representation</em>, that may be assigned to a variable and/or stored on a component file<span class="footnote">⎕OR and GUI objects stored in workspaces or in component files are not portable between 32-bit and 64-bit versions of Dyalog nor between different implementations (platforms) and are not backwards compatible</span>. Classes and Instances are however outside the domain of <code>⎕OR</code>.</p>
<p>Taking the <code>⎕OR</code> of a defined function or operator is an extremely fast operation as it simply changes the type information in the object's header, leaving its internal structure unaltered.  Converting the object representation back to an executable function or operator using <code>⎕FX</code> is also very fast.</p>
<p>However, the saved results of <code>⎕OR</code> which were produced on a different hardware platform or using an older version of Dyalog APL may require a significant amount of processing when re-constituted using <code>⎕FX</code>.  For optimum performance, it is strongly recommended that you save <code>⎕OR</code>s using the same version of Dyalog APL and on the same hardware platform that you will use to <code>⎕FX</code> them.</p>
<p><code>⎕OR</code> may also be used to convert a namespace (either a plain namespace or a named GUI object created by <code>⎕WC</code>) into a form that can be stored in a variable or on a component file.  The namespace may be reconstructed using <code>⎕NS</code> or <code>⎕WC</code> with its original name or with a new one.  <code>⎕OR</code> may therefore be used to <em>clone</em> a namespace or GUI object.</p>
<p><code>Y</code> must be a simple character scalar or vector which contains the name of an APL object.</p>
<p>If <code>Y</code> is the name of a variable, the result <code>R</code> is its value.  In this case, <code>R←⎕OR Y</code> is identical to <code>R←⍎Y</code>.</p>
<p>Otherwise, <code>R</code> is a special form of the name <code>Y</code>, re-classified as a variable. The rank of <code>R</code> is 0 (<code>R</code> is scalar), and the depth of <code>R</code> is 1.  These unique characteristics distinguish the result of <code>⎕OR</code> from any other object.  The Type of <code>R</code> (<code>∊R</code>) is itself.  Note that although <code>R</code> is scalar, it may not be index assigned to an element of an array unless it is enclosed.</p>
<p>If <code>Y</code> is the name of a function or operator, <code>R</code> is in the domain of the monadic functions Same (<code>⊣</code> and <code>⊢</code>), Depth (<code>≡</code>), Disclose (<code>⊃</code>), Enclose (<code>⊂</code>), Rotate (<code>⌽</code>), Transpose (<code>⍉</code>), Index (<code>⌷</code>), Indexing (<code>[]</code>), Format (<code>⍕</code>), Identity (<code>+</code>), Shape (<code>⍴</code>), Type (<code>∊</code>) and Unique (<code>∪</code>), of the dyadic functions Left (<code>⊣</code>), Right (<code>⊢</code>), Without (<code>~</code>), Index Of (<code>⍳</code>), Intersection (<code>∩</code>), Match (<code>≡</code>), Membership (<code>∊</code>), Not Match (<code>≠</code>) and Union (<code>∪</code>), and of the monadic system functions Canonical Representation (<code>⎕CR</code>), Cross-Reference (<code>⎕REFS</code>), Fix (<code>⎕FX</code>), Format (<code>⎕FMT</code>), Nested Representation (<code>⎕NR</code>) and Vector Representation (<code>⎕VR</code>).</p>
<p>Note that a <code>⎕OR</code> object can be transmitted through an 'APL-style' TCP socket. This technique may be used to transfer objects including namespaces between APL sessions.</p>
<p>The object representation forms of namespaces produced by <code>⎕OR</code> may not be used as arguments to any primitive functions.  The only operations permitted for such objects (or arrays containing such objects) are <code>⎕EX</code>, <code>⎕FAPPEND</code>, <code>⎕FREPLACE</code>, <code>⎕NS</code>, and <code>⎕WC</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕OR</span><span class="w"> </span><span class="nf">⎕FX</span><span class="s1">'R←FOO'</span><span class="w"> </span><span class="s1">'R←10'</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>

<span class="w">      </span><span class="o">⍴⍴</span><span class="nv">F</span>
<span class="m">0</span>
<span class="w">      </span><span class="o">≡</span><span class="nv">F</span>
<span class="m">1</span>
<span class="w">      </span><span class="nv">F</span><span class="o">≡∊</span><span class="nv">F</span>
<span class="m">1</span>
</code></pre></div>
<p>The display of the <code>⎕OR</code> form of a function or operator is a listing of the function or operator.  If the <code>⎕OR</code> form of a function or operator has been enclosed, then the result will display as the  name preceded by the symbol <code>∇</code>.  It is permitted to apply <code>⎕OR</code> to a locked function or operator.  In this instance the result will display as for the enclosed form.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">F</span>
<span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">     </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">      </span><span class="bp">∇</span>

<span class="w">      </span><span class="o">⊂</span><span class="nv">F</span>
<span class="w"> </span><span class="bp">∇</span><span class="nv">FOO</span>

<span class="w">      </span><span class="nf">⎕LOCK</span><span class="s1">'FOO'</span>

<span class="w">      </span><span class="nf">⎕OR</span><span class="s1">'FOO'</span>
<span class="bp">∇</span><span class="nv">FOO</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="o">⍳</span><span class="m">5</span>

<span class="w">      </span><span class="nv">A</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="nv">F</span>

<span class="w">      </span><span class="nv">A</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="bp">∇</span><span class="nv">FOO</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<p>For the <code>⎕OR</code> forms of two functions or operators to be considered identical, their unlocked display forms must be the same, they must either both be locked or unlocked, and any monitors, trace and stop vectors must be the same.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕OR</span><span class="w"> </span><span class="nf">⎕FX</span><span class="w"> </span><span class="s1">'R←A PLUS B'</span><span class="w"> </span><span class="s1">'R←A+B'</span>

<span class="w">      </span><span class="nv">F</span><span class="o">≡</span><span class="nf">⎕OR</span><span class="w"> </span><span class="s1">'PLUS'</span>
<span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'PLUS'</span>

<span class="w">      </span><span class="nv">F</span><span class="o">≡</span><span class="nf">⎕OR</span><span class="w"> </span><span class="s1">'PLUS'</span>
<span class="m">0</span>
</code></pre></div>
<h5>Namespace Examples</h5>
<p>The following example sets up a namespace called <code>UTILS</code>, copies into it the contents of the <code>UTIL</code> workspace, then writes it to a component file:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="p">)</span><span class="nv">NS</span><span class="w"> </span><span class="nv">UTILS</span>
<span class="c1">#.UTILS</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">UTILS</span>
<span class="c1">#.UTILS</span>
<span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">UTIL</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">WDYALOG</span><span class="na">\</span><span class="nv">WS</span><span class="na">\</span><span class="nv">UTIL</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Fri</span><span class="w"> </span><span class="nv">Mar</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">12</span><span class="bp">:</span><span class="m">48</span><span class="bp">:</span><span class="m">06</span><span class="w"> </span><span class="m">1995</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span>
<span class="c1">#</span>
<span class="w">      </span><span class="s1">'ORTEST'</span><span class="w"> </span><span class="nf">⎕FCREATE</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="p">(</span><span class="nf">⎕OR</span><span class="s1">'UTILS'</span><span class="p">)</span><span class="nf">⎕FAPPEND</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>The namespace can be restored with <code>⎕NS</code>, using either the original name or a new one:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="s1">'UTILS'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="c1">#.UTILS</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="s1">'NEWUTILS'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="nf">⎕FREAD</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="c1">#.NEWUTILS</span>
</code></pre></div></p>
<p>This example illustrates how <code>⎕OR</code> can be used to clone a GUI object; in this case a Group containing some Button objects.  Note that <code>⎕WC</code> will accept <strong>only</strong> a <code>⎕OR</code> object as its argument (or preceded by the "Type" keyword).  You may not specify any other properties in the same <code>⎕WC</code> statement, but you must instead use <code>⎕WS</code> to reset them afterwards.
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">    </span><span class="s1">'F.G1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Group'</span><span class="w"> </span><span class="s1">'&amp;One'</span><span class="w"> </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="p">)(</span><span class="m">80</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<span class="w">    </span><span class="s1">'F.G1.B2'</span><span class="nf">⎕WC</span><span class="s1">'Button'</span><span class="w"> </span><span class="s1">'&amp;Blue'</span><span class="w"> </span><span class="p">(</span><span class="m">40</span><span class="w"> </span><span class="m">10</span><span class="p">)(</span><span class="s1">'Style'</span><span class="w"> </span><span class="s1">'Radio'</span><span class="p">)</span>
<span class="w">    </span><span class="s1">'F.G1.B3'</span><span class="nf">⎕WC</span><span class="s1">'Button'</span><span class="w"> </span><span class="s1">'&amp;Green'</span><span class="w"> </span><span class="p">(</span><span class="m">60</span><span class="w"> </span><span class="m">10</span><span class="p">)(</span><span class="s1">'Style'</span><span class="w"> </span><span class="s1">'Radio'</span><span class="p">)</span>
<span class="w">    </span><span class="s1">'F.G1.B1'</span><span class="nf">⎕WC</span><span class="s1">'Button'</span><span class="w"> </span><span class="s1">'&amp;Red'</span><span class="w"> </span><span class="p">(</span><span class="m">20</span><span class="w"> </span><span class="m">10</span><span class="p">)(</span><span class="s1">'Style'</span><span class="w"> </span><span class="s1">'Radio'</span><span class="p">)</span>
<span class="w">    </span><span class="s1">'F.G2'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="nf">⎕OR</span><span class="w"> </span><span class="s1">'F.G1'</span>
<span class="w">    </span><span class="s1">'F.G2'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="p">(</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'Two'</span><span class="p">)(</span><span class="s1">'Posn'</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">60</span><span class="p">)</span>
</code></pre></div></p>
<p>Note too that <code>⎕WC</code> and <code>⎕NS</code> may be used interchangeably to rebuild <em>pure</em> namespaces or GUI namespaces from a <code>⎕OR</code> object.  You may therefore use <code>⎕NS</code> to rebuild a Form or use <code>⎕WC</code> to rebuild a pure namespace that has no GUI components.</p>
</article>
<article id="system-functions-path">
<div class="heading-container"><h3 class="heading" id="system-functions-path-header">Search Path</h3><div class="command">⎕PATH</div></div>
<p><code>⎕PATH</code> is a simple character vector representing a blank-separated list of namespaces.  It is approximately analogous to the PATH variable in Windows or UNIX.</p>
<p>The <code>⎕PATH</code> variable can be used to identify a namespace in which commonly used utility functions reside.  Functions or operators (<strong>NOT</strong> variables) which are copied into this namespace and <em>exported</em> (see <a class="internal-link" href="#system-functions-export">Section 4.6.40</a>) can then be used directly from anywhere in the workspace without giving their full path names. <code>⎕PATH</code> has Session scope.</p>
<p class="example">Example</p>
<p>To make the <code>DISPLAY</code> function available directly from within any namespace.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">⍝ Create and reference utility namespace.</span>
<span class="w">      </span><span class="nf">⎕PATH</span><span class="kd">←</span><span class="s1">'⎕se.util'</span><span class="nf">⎕ns</span><span class="s1">''</span>
<span class="w">      </span><span class="c1">⍝ Copy DISPLAY function from UTIL into it.</span>
<span class="w">      </span><span class="s1">'DISPLAY'</span><span class="nf">⎕se</span><span class="na">.</span><span class="nv">util</span><span class="na">.</span><span class="nf">⎕cy</span><span class="s1">'UTIL'</span>
<span class="w">      </span><span class="c1">⍝ (Remember to save the session to file).  </span>
</code></pre></div></p>
<p>In detail, <code>⎕PATH</code> works as follows:</p>
<p>When a reference to a name cannot be found in the current namespace, the system searches for it from left to right in the list of namespaces indicated by <code>⎕PATH</code>.  In each namespace, if the name references a defined function (or operator) <em>and</em> the export type of that function is non-zero (see <a class="internal-link" href="#system-functions-export">Section 4.6.40</a> ), then it is used to satisfy the reference.  If the search exhausts all the namespaces in <code>⎕PATH</code> without finding a qualifying reference, the system issues a <code>VALUE ERROR</code> in the normal manner.</p>
<p>The special character <code>↑</code> stands for the list of namespace ancestors:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="c1">## ##.## ##.##.## ...</span>
</code></pre></div></p>
<p>In other words, the search is conducted upwards through enclosing namespaces, emulating the static scope rule inherent in modern block-structured languages.</p>
<p>Note that the <code>⎕PATH</code> mechanism is used ONLY if the function reference cannot be satisfied in the current namespace.  This is analogous to the case when the Windows or UNIX PATH variable begins with a <code>'.'</code>.</p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nf">⎕PATH</span><span class="w">               </span><span class="nv">Search</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="na">...</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="s1">'⎕se.util'</span><span class="w">          </span><span class="nv">Current</span><span class="w"> </span><span class="nv">space</span><span class="o">,</span><span class="w">   </span><span class="nv">then</span>
<span class="w">                       </span><span class="nf">⎕se</span><span class="na">.</span><span class="nv">util</span><span class="o">,</span><span class="w">        </span><span class="nv">then</span>
<span class="w">                       </span><span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>

<span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="s1">'↑'</span><span class="w">                 </span><span class="nv">Current</span><span class="w"> </span><span class="nv">space</span>
<span class="w">                       </span><span class="nv">Parent</span><span class="w"> </span><span class="nv">space</span><span class="bp">:</span><span class="w"> </span><span class="c1">##</span>
<span class="w">                       </span><span class="nv">Parent</span><span class="s1">'s parent space:  ##.##</span>
<span class="s1">                       ...</span>
<span class="s1">                       Root: # (or ⎕se if current space</span>
<span class="s1">                                was inside ⎕se)</span>
<span class="s1">                       VALUE ERROR</span>

<span class="s1">3. '</span><span class="nv">util</span><span class="w"> </span><span class="o">↑</span><span class="w"> </span><span class="nf">⎕se</span><span class="na">.</span><span class="nv">util</span><span class="err">'</span><span class="w">   </span><span class="nv">Current</span><span class="w"> </span><span class="nv">space</span>
<span class="w">                       </span><span class="nv">util</span><span class="w"> </span><span class="p">(</span><span class="nv">relative</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">space</span><span class="p">)</span>
<span class="w">                       </span><span class="nv">Parent</span><span class="w"> </span><span class="nv">space</span><span class="bp">:</span><span class="w"> </span><span class="c1">##</span>
<span class="w">                       </span><span class="na">...</span>
<span class="w">                       </span><span class="nv">Root</span><span class="bp">:</span><span class="w"> </span><span class="c1"># or ⎕se</span>
<span class="w">                       </span><span class="nf">⎕se</span><span class="na">.</span><span class="nv">util</span>
<span class="w">                       </span><span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div></p>
<p>Note that <code>⎕PATH</code> is a <em>session</em> variable.  This means that it is workspace-wide and survives <code>)LOAD</code> and <code>)CLEAR</code>. It can of course, be localised by a defined function or operator.</p>
<p><code>⎕PATH</code> does not support derived functions and will not be extended to support them; nor will it be extended to support other types of functions that may be developed in the future. <code>⎕PATH</code> may therefore be considered an archaic feature.</p>
</article>
<article id="system-functions-pfkey">
<div class="heading-container"><h3 class="heading" id="system-functions-pfkey-header">Program Function Key</h3><div class="command">R←{X}⎕PFKEY Y</div></div>
<p><code>⎕PFKEY</code> is a system function that sets or queries the programmable function keys.  <code>⎕PFKEY</code> associates a sequence of keystrokes with a function key.  When the user subsequently presses the key, it is as if he had typed the associated keystrokes one by one.</p>
<p>Note that RIDE does not currently support the use of <code>⎕PFKEY</code>; it is possible however to associate simple strings to function keys - see the <em>RIDE User Guide</em> for more information.</p>
<p><code>Y</code> is an integer scalar in the range 0-255 specifying a programmable function key.  If <code>X</code> is omitted the result <code>R</code> is the current setting of the key.  If the key has not been defined previously, the result is an empty character vector.</p>
<p>If <code>X</code> is specified it is a simple or nested character vector defining the new setting of the key.  The value of <code>X</code> is returned in the result <code>R</code>.</p>
<p>The elements of <code>X</code> are either character scalars or 2-element character vectors which specify keycodes. See <i>Keyboard Shortcuts</i>.</p>
<p>Programmable function keys are recognised in any of the three types of window (SESSION, EDIT and TRACE) provided by the Dyalog APL development environment. <code>⎕SR</code> operates with the 'raw' function keys and ignores programmed settings.</p>
<p>Note that key definitions can reference other function keys, such as "F1" or "F123".</p>
<p>The size of the buffer associated with <code>⎕PFKEY</code> is specified by the <em>pfkey_size</em> parameter.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="p">(</span><span class="s1">')FNS'</span><span class="o">,⊂</span><span class="s1">'ER'</span><span class="p">)</span><span class="nf">⎕PFKEY</span><span class="w"> </span><span class="m">1</span>
<span class="err">┌─┬─┬─┬─┬──┐</span>
<span class="err">│</span><span class="p">)</span><span class="err">│</span><span class="nv">F</span><span class="err">│</span><span class="nv">N</span><span class="err">│</span><span class="nv">S</span><span class="err">│</span><span class="nv">ER</span><span class="err">│</span>
<span class="err">└─┴─┴─┴─┴──┘</span>
<span class="w">       </span><span class="p">(</span><span class="s1">')VARS'</span><span class="o">,⊂</span><span class="s1">'ER'</span><span class="p">)</span><span class="nf">⎕PFKEY</span><span class="w"> </span><span class="m">2</span>
<span class="err">┌─┬─┬─┬─┬─┬──┐</span>
<span class="err">│</span><span class="p">)</span><span class="err">│</span><span class="nv">V</span><span class="err">│</span><span class="nv">A</span><span class="err">│</span><span class="nv">R</span><span class="err">│</span><span class="nv">S</span><span class="err">│</span><span class="nv">ER</span><span class="err">│</span>
<span class="err">└─┴─┴─┴─┴─┴──┘</span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="s1">'F2'</span><span class="w"> </span><span class="nf">⎕PFKEY</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ Does )FNS and )VARS</span>
<span class="err">┌──┬──┐</span>
<span class="err">│</span><span class="nv">F1</span><span class="err">│</span><span class="nv">F2</span><span class="err">│</span>
<span class="err">└──┴──┘</span>
</code></pre></div>
<p>The following expression defines the action for F12 to be "move the text to the right of the cursor to the left of the cursor".
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'Rl'</span><span class="w"> </span><span class="s1">'CT'</span><span class="w"> </span><span class="s1">'LL'</span><span class="w"> </span><span class="s1">'PT'</span><span class="nf">⎕PFKEY</span><span class="w"> </span><span class="m">12</span>
<span class="err">┌──┬──┬──┬──┐</span>
<span class="err">│</span><span class="nv">Rl</span><span class="err">│</span><span class="nv">CT</span><span class="err">│</span><span class="nv">LL</span><span class="err">│</span><span class="nv">PT</span><span class="err">│</span>
<span class="err">└──┴──┴──┴──┘</span>
</code></pre></div></p>
</article>
<article id="system-functions-pp">
<div class="heading-container"><h3 class="heading" id="system-functions-pp-header">Print Precision</h3><div class="command">⎕PP</div></div>
<p><code>⎕PP</code> is the number of significant digits in the display of numeric output. <code>⎕PP</code> may be assigned any integer value in the range 1 to 34. <code>⎕PP</code> has Namespace scope.</p>
<p><code>⎕PP</code> is used to format numbers displayed directly. It is an implicit argument of monadic function Format (<code>⍕</code>), monadic <code>⎕FMT</code> and for display of numbers via <code>⎕</code> and <code>⍞</code> output. <code>⎕PP</code> is ignored for the display of integers.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PP</span><span class="kd">←</span><span class="m">10</span>

<span class="w">      </span><span class="o">÷</span><span class="m">3</span><span class="w"> </span><span class="m">6</span>
<span class="m">0.3333333333</span><span class="w"> </span><span class="m">0.1666666667</span>

<span class="w">      </span><span class="nf">⎕PP</span><span class="kd">←</span><span class="m">3</span>

<span class="w">      </span><span class="o">÷</span><span class="m">3</span><span class="w"> </span><span class="m">6</span>
<span class="m">0.333</span><span class="w"> </span><span class="m">0.167</span>
</code></pre></div>
<p>If <code>⎕PP</code> is set to a value <code>≥17</code> (when <code>⎕FR</code> is 645) or 34 (when <code>⎕FR</code> is 1287), floating-point numbers may be converted between binary and character representation without loss of precision. Then, if  <code>⎕CT</code> is 0 (to ensure exact comparison), for any floating-point number <code>N</code> the expression <code>N=⍎⍕N</code> is true.</p>
</article>
<article id="system-functions-profile">
<div class="heading-container"><h3 class="heading" id="system-functions-profile-header">Profile Application</h3><div class="command">{R}←{X}⎕PROFILE Y</div></div>
<p><code>⎕PROFILE</code> facilitates the profiling of either CPU consumption or elapsed time for a workspace. It does so by retaining time measurements collected for APL functions/operators and function/operator lines. <code>⎕PROFILE</code> is used to both control the state of profiling and retrieve the collected profiling data.</p>
<p>See also: <a href="https://docs.dyalog.com/18.0/Application%20Tuning%20Guide.pdf">Application Tuning Guide</a>.</p>
<p><code>Y</code> specifies the action to perform and any options for that action, if applicable. <code>Y</code> is case-insensitive. Note that the result <code>R</code> is in some cases shy.</p>
<table>
<thead>
<tr>
<th>Use</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{state}←⎕PROFILE 'start' {timer}</code></td>
<td>Turn profiling on using the specified timer or resume if profiling was stopped</td>
</tr>
<tr>
<td><code>{state}←⎕PROFILE 'stop'</code></td>
<td>Suspend the collection of profiling data</td>
</tr>
<tr>
<td><code>{state}←⎕PROFILE 'clear'</code></td>
<td>Turn profiling off, if active, and discard any collected profiling data</td>
</tr>
<tr>
<td><code>{state}←⎕PROFILE 'calibrate'</code></td>
<td>Calibrate the profiling timer</td>
</tr>
<tr>
<td><code>state←⎕PROFILE 'state'</code></td>
<td>Query profiling state</td>
</tr>
<tr>
<td><code>data←⎕PROFILE 'data'</code></td>
<td>Retrieve profiling data in flat form</td>
</tr>
<tr>
<td><code>data←⎕PROFILE 'tree'</code></td>
<td>Retrieve profiling data in tree form</td>
</tr>
</tbody>
</table>
<p><code>⎕PROFILE</code> has 2 states:</p>
<ul>
<li>active – the profiler is running and profiling data is being collected. </li>
<li>inactive – the profiler is not running.</li>
</ul>
<p>For most actions, the result of <code>⎕PROFILE</code> is its current state and contains:</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>character vector indicating the <code>⎕PROFILE</code> state having one of the values <code>'active'</code> or <code>'inactive'</code></td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>character vector indicating the timer being used having one of the values <code>'CPU'</code> or <code>'elapsed'</code></td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>call time bias in milliseconds. This is the amount of time, in milliseconds, that is consumed for the system to take a time measurement</td>
</tr>
<tr>
<td><code>[4]</code></td>
<td>timer granularity in milliseconds. This is the resolution of the timer being used</td>
</tr>
</tbody>
</table>
<h5 timer="timer">{state}←⎕PROFILE 'start'</h5>
<p>Turn profiling on; <code>timer</code> is an optional case-independent character vector containing  <code>'CPU'</code> or <code>'elapsed'</code> or <code>'none'</code> or <code>'coverage'</code>. If omitted, it defaults to <code>'CPU'</code>. If <code>timer</code> is <code>'none'</code>, <code>⎕PROFILE</code>  records  just the number of times each line of code is executed without incurring the timing overhead. If <code>timer</code> is <code>'coverage'</code>, <code>⎕PROFILE</code>   only identifies which  lines of code are executed without incurring the timing or counting overhead.</p>
<p>The first time a particular timer is chosen, <code>⎕PROFILE</code> will spend 1000 milliseconds (1 second) to approximate the call time bias and granularity for that timer.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'start'</span><span class="w"> </span><span class="s1">'CPU'</span>
<span class="w"> </span><span class="nv">active</span><span class="w">  </span><span class="nv">CPU</span><span class="w">  </span><span class="m">0.0001037499999</span><span class="w"> </span><span class="m">0.0001037499999</span>
</code></pre></div></p>
<h5>{state}←⎕PROFILE 'stop'</h5>
<p>Suspends the collection of profiling data.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'stop'</span>
<span class="w"> </span><span class="nv">inactive</span><span class="w">  </span><span class="nv">CPU</span><span class="w">  </span><span class="m">0.0001037499999</span><span class="w"> </span><span class="m">0.0001037499999</span>
</code></pre></div></p>
<h5>{state}←⎕PROFILE 'clear'</h5>
<p>Clears any collected profiling data and, if profiling is active, places profiling in an inactive state.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'clear'</span>
<span class="w"> </span><span class="nv">inactive</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<h5>{state}←⎕PROFILE 'calibrate'</h5>
<p>Causes <code>⎕PROFILE</code> to perform a 1000 millisecond calibration to approximate the call time bias and granularity for the current timer. Note, a timer must have been previously selected by using <code>⎕PROFILE 'start'</code>.</p>
<p><code>⎕PROFILE</code> will retain the lesser of the current timer values compared to the new values computed by the calibration. The rationale for this is to use the smallest possible values of which we can be certain.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="nf">⎕PROFILE</span><span class="s1">'calibrate'</span>
<span class="w"> </span><span class="nv">active</span><span class="w">  </span><span class="nv">CPU</span><span class="w">  </span><span class="m">0.0001037499997</span><span class="w"> </span><span class="m">0.0001037499997</span>
</code></pre></div></p>
<h5>state←⎕PROFILE 'state'</h5>
<p>Returns the current profiling state.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">clear</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'state'</span>
<span class="w"> </span><span class="nv">inactive</span><span class="w">    </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'start'</span><span class="w"> </span><span class="s1">'CPU'</span>
<span class="w"> </span><span class="nv">active</span><span class="w">  </span><span class="nv">CPU</span><span class="w">  </span><span class="m">0.0001037499997</span><span class="w"> </span><span class="m">0.0001037499997</span>
<span class="w">      </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'state'</span>
<span class="w"> </span><span class="nv">active</span><span class="w">  </span><span class="nv">CPU</span><span class="w">  </span><span class="m">0.0001037499997</span><span class="w"> </span><span class="m">0.0001037499997</span>
</code></pre></div></p>
<h5>data←{X} ⎕PROFILE 'data'</h5>
<p>Retrieves the collected profiling data. If the optional left argument <code>X</code> is omitted, the result is a matrix with the following columns:</p>
<table>
<tbody>
<tr>
<td><code>[;1]</code></td>
<td>function name</td>
</tr>
<tr>
<td><code>[;2]</code></td>
<td>function line number or <code>⍬</code> for a whole function entry</td>
</tr>
<tr>
<td><code>[;3]</code></td>
<td>number of times the line or function was executed</td>
</tr>
<tr>
<td><code>[;4]</code></td>
<td>accumulated time (ms) for this entry exclusive of items called by this entry</td>
</tr>
<tr>
<td><code>[;5]</code></td>
<td>accumulated time (ms) for this entry inclusive of items called by this entry</td>
</tr>
<tr>
<td><code>[;6]</code></td>
<td>number of times the timer function was called for the exclusive time</td>
</tr>
<tr>
<td><code>[;7]</code></td>
<td>number of times the timer function was called for the inclusive time</td>
</tr>
</tbody>
</table>
<h5>Example: (numbers have been truncated for formatting)</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'data'</span>
<span class="c1">#.foo             1  1.04406  39347.64945   503 4080803 #.foo      1      1  0.12488     0.124887     1       1 #.foo      2    100  0.58851 39347.193900   200 4080500 #.foo      3    100  0.21340     0.213406   100     100 #.NS1.goo       100 99.44404   39346.6053 50300 4080300 #.NS1.goo  1    100  0.61679     0.616793   100     100 #.NS1.goo  2  10000 67.80292   39314.9642 20000 4050000 #.NS1.goo  3  10000 19.60274      19.6027 10000   10000</span>
</code></pre></div>
<p>If <code>X</code> is specified it must be a simple vector of column indices. In this case, the result has the same shape as <code>X</code> and is a vector of the specified column vectors:
<div class="highlight"><pre><span></span><code><span class="nv">X</span><span class="w"> </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'data'</span><span class="w"> </span><span class="kd">←→</span><span class="w"> </span><span class="o">↓</span><span class="sr">[</span><span class="nf">⎕IO</span><span class="sr">]</span><span class="p">(</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'data'</span><span class="na">.</span><span class="nv">htm</span><span class="p">)</span><span class="sr">[;</span><span class="nv">X</span><span class="sr">]</span>
</code></pre></div></p>
<p>If column 2 is included in the result, the value <code>¯1</code> is used instead of <code>⍬</code> to indicate a whole-function entry.</p>
<h5>data←{X} ⎕PROFILE 'tree'</h5>
<p>Retrieve the collected profiling data in tree format:</p>
<table>
<tbody>
<tr>
<td><code>[;1]</code></td>
<td>depth level</td>
</tr>
<tr>
<td><code>[;2]</code></td>
<td>function name</td>
</tr>
<tr>
<td><code>[;3]</code></td>
<td>function line number or <code>⍬</code> for a whole function entry</td>
</tr>
<tr>
<td><code>[;4]</code></td>
<td>number of times the line or function was executed</td>
</tr>
<tr>
<td><code>[;5]</code></td>
<td>accumulated time (ms) for this entry exclusive of items called by this entry</td>
</tr>
<tr>
<td><code>[;6]</code></td>
<td>accumulated time (ms) for this entry inclusive of items called by this entry</td>
</tr>
<tr>
<td><code>[;7]</code></td>
<td>number of times the timer function was called for the exclusive time</td>
</tr>
<tr>
<td><code>[;8]</code></td>
<td>number of times the timer function was called for the inclusive time</td>
</tr>
</tbody>
</table>
<p>The optional left argument is treated in exactly the same way as for <code>X ⎕PROFILE 'data'</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'tree'</span>
<span class="m">0</span><span class="w">  </span><span class="c1">#.foo               1     1.04406 39347.64945     503 4080803</span>
<span class="m">1</span><span class="w">  </span><span class="c1">#.foo      1        1     0.12488     0.12488       1       1</span>
<span class="m">1</span><span class="w">  </span><span class="c1">#.foo      2      100     0.58851 39347.19390     200 4080500</span>
<span class="m">2</span><span class="w">  </span><span class="c1">#.NS1.goo         100    99.44404 39346.60538   50300 4080300</span>
<span class="m">3</span><span class="w">  </span><span class="c1">#.NS1.goo  1      100     0.61679     0.61679     100     100</span>
<span class="m">3</span><span class="w">  </span><span class="c1">#.NS1.goo  2    10000    67.80292 39314.96426   20000 4050000</span>
<span class="m">4</span><span class="w">  </span><span class="c1">#.NS2.moo       10000 39247.16133 39247.16133 4030000 4030000</span>
<span class="m">5</span><span class="w">  </span><span class="c1">#.NS2.moo  1    10000    39.28315    39.28315   10000   10000</span>
<span class="m">5</span><span class="w">  </span><span class="c1">#.NS2.moo  2  1000000 36430.65236 36430.65236 1000000 1000000</span>
<span class="m">5</span><span class="w">  </span><span class="c1">#.NS2.moo  3  1000000  1645.36214  1645.36214 1000000 1000000</span>
<span class="m">3</span><span class="w">  </span><span class="c1">#.NS1.goo  3    10000    19.60274    19.60274   10000   10000</span>
<span class="m">1</span><span class="w">  </span><span class="c1">#.foo      3      100     0.21340     0.21340     100     100</span>
</code></pre></div>
<p>Note that rows with an even depth level in column <code>[;1]</code> represent function summary entries and odd depth level rows are function line entries. Recursive functions will generate separate rows for each level of recursion.</p>
<h5>Notes</h5>
<h6>Profile Data Entry Types</h6>
<p>The results of <code>⎕PROFILE 'data'</code> and <code>⎕PROFILE 'tree'</code> have two types of entries; function summary entries and function line entries. Function summary entries contain <code>⍬</code> in the line number column, whereas function line entries contain the line number. Dfns line entries begin with 0 as they do not have a header line like traditional functions. The timer data and timer call counts in function summary entries represent the aggregate of the function line entries plus any time spent that cannot be directly attributed to a function line entry. This could include time spent during function initialisation, etc.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1">#.foo         1  1.04406 39347.649450   503 4080803</span>
<span class="w"> </span><span class="c1">#.foo    1    1  0.12488     0.124887     1       1</span>
<span class="w"> </span><span class="c1">#.foo    2  100  0.58851 39347.193900   200 4080500</span>
<span class="w"> </span><span class="c1">#.foo    3  100  0.21340     0.213406   100     100</span>
</code></pre></div>
<h6>Timer Data Persistence</h6>
<p>The profiling data collected is stored outside the workspace and will not impact workspace availability. The data is cleared upon workspace load, clear workspace, <code>⎕PROFILE 'clear'</code>, or interpreter sign off.</p>
<h5>The PROFILE User Command</h5>
<p><code>]PROFILE</code> is a utility which implements a high-level interface to <code>⎕PROFILE</code> and provides reporting and analysis tools that act upon the profiling data. For further information, see Tuning Applications using the Profile User Command.</p>
<h6>Using <code>⎕PROFILE</code> Directly</h6>
<p>If you choose to use <code>⎕PROFILE</code> directly, the following guidelines and information may be of use to you.</p>
<p>Note: Running your application with <code>⎕PROFILE</code> turned on incurs a significant processing overhead and will slow your application down.</p>
<h6>Decide which timer to use</h6>
<p><code>⎕PROFILE</code> supports profiling of either CPU or elapsed time. CPU time is generally of more interest in profiling application performance.</p>
<h6>Simple Profiling</h6>
<p>To get a quick handle on the top CPU time consumers in an application, use the following procedure:</p>
<ul>
<li>Make sure the application runs long enough to collect enough data to overcome the timer granularity – a reasonable rule of thumb is to make sure the application runs for at least <code>(4000×4⊃⎕PROFILE 'state')</code> milliseconds.</li>
<li>Turn profiling on with <code>⎕PROFILE 'start' 'CPU'</code></li>
<li>Run your application.</li>
<li>Pause the profiler with <code>⎕PROFILE 'stop'</code></li>
<li>Examine the profiling data from <code>⎕PROFILE 'data'</code> or <code>⎕PROFILE 'tree'</code> for entries that consume large amounts of resource.</li>
</ul>
<p>This should identify any items that take more than 10% of the run time.</p>
<p>To find finer time consumers, or to focus on elapsed time rather than CPU time, take the following additional steps prior to running the profiler:</p>
<p>Turn off as much hardware as possible. This would include peripherals, network connections, etc.</p>
<ul>
<li>Turn off as many other tasks and processes as possible. These include anti-virus software, firewalls, internet services, background tasks.</li>
<li>Raise the priority on the Dyalog APL task to higher than normal, but in general avoid giving it the highest priority.</li>
<li>Run the profiler as described above.</li>
</ul>
<p>Doing this should help identify items that take more than 1% of the run time.</p>
<h6>Advanced Profiling</h6>
<p>The timing data collected by <code>⎕PROFILE</code> is not adjusted for the timer's call time bias; in other words, the times reported by <code>⎕PROFILE</code> include the time spent calling the timer function. One effect of this can be to make "cheap" lines that are called many times seem to consume more resource. If you desire more accurate profiling measurements, or if your application takes a short amount of time to run, you will probably want to adjust for the timer call time bias. To do so, subtract from the timing data the timer's' 'call time bias multiplied by the number of times the timer was called.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">CallTimeBias</span><span class="kd">←</span><span class="m">3</span><span class="o">⊃</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'state'</span>
<span class="w">      </span><span class="nv">RawTimes</span><span class="kd">←</span><span class="nf">⎕PROFILE</span><span class="w"> </span><span class="s1">'data'</span>
<span class="w">      </span><span class="nv">Adjusted</span><span class="kd">←</span><span class="nv">RawTimes</span><span class="sr">[;</span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="sr">]</span><span class="o">-</span><span class="nv">RawTimes</span><span class="sr">[;</span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="sr">]</span><span class="o">×</span><span class="nv">CallTimeBias</span>
</code></pre></div>
</article>
<article id="system-functions-pw">
<div class="heading-container"><h3 class="heading" id="system-functions-pw-header">Print Width</h3><div class="command">⎕PW</div></div>
<p><code>⎕PW</code> is the maximum number of output characters per line before folding the display.</p>
<p><code>⎕PW</code> may be assigned any integer value in the range 42 to 32767. Note that in versions of Dyalog APL prior to 13.0 <code>⎕PW</code> had a minimum value of 30; this was increased to support 128-bit decimal values. <code>⎕PW</code> has Session scope.</p>
<p>If an attempt is made to display a line wider than <code>⎕PW</code>, then the display will be folded at or before the <code>⎕PW</code> width and the folded portions indented 6 spaces.  The display of a simple numeric array may be folded at a width less than <code>⎕PW</code> so that individual numbers are not split.</p>
<p><code>⎕PW</code> only affects output, either direct or through <code>⎕</code> output.  It does not affect the result of the function Format (<code>⍕</code>), of the system function <code>⎕FMT</code>, or output through the system functions <code>⎕ARBOUT</code> and <code>⎕ARBIN</code>, or output through <code>⍞</code>.</p>
<p>Note that if the Auto_PW parameter (<em>Options/Configure/Session/Auto PW</em>) is set to 1, <code>⎕PW</code> is automatically adjusted whenever the Session window is resized. In these circumstances, a value assigned to <code>⎕PW</code> will only apply until the Session window is next resized.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕PW</span><span class="kd">←</span><span class="m">42</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="m">3</span><span class="o">⍴÷</span><span class="m">3</span>
<span class="m">0.3333333333</span><span class="w"> </span><span class="m">0.3333333333</span><span class="w"> </span><span class="m">0.3333333333</span>
<span class="w">      </span><span class="m">0.3333333333</span>
</code></pre></div>
</article>
<article id="system-functions-r">
<div class="heading-container"><h3 class="heading" id="system-functions-r-header">Replace</h3><div class="command">R←{X}(A ⎕R B) Y</div></div>
<p><code>⎕R</code> (Replace) and <code>⎕S</code> (Search) are system operators which take search pattern(s) as their left arguments and transformation rule(s) as their right arguments; the derived function operates on text data to perform either a <strong>search</strong>, or a search and <strong>replace</strong> operation.</p>
<p>The search patterns may include <em>Regular Expressions</em> so that complex searches may be performed. <code>⎕R</code> and <code>⎕S</code> utilise the open-source regular-expression search engine PCRE, which is built into Dyalog APL and distributed according to the <i>PCRE licence</i> which is published separately.</p>
<p>The transformation rules are applied to the text which matches the search patterns; they may be given as a simple character vector, numeric codes, or  a function.</p>
<p>The two system operators, <code>⎕R</code> for replace and <code>⎕S</code> for search, are syntactically identical. With <code>⎕R</code>, the input document is examined; text which matches the search pattern is amended and the remainder is left unchanged. With <code>⎕S</code>, each match in the input document results in an item in the result whose type is dependent on the transformation specified. The operators use the Variant operator to set options.</p>
<p><code>A</code> specifies one or more search patterns, being given as a single character, a character vector, a vector of character vectors or a vector of both characters and character vectors. See search pattern following.</p>
<p><code>B</code> is the transformation to be performed on matches within the input document; it may be either one or more transformation patterns (specified as a character, a character vector, a vector of character vectors, or a vector of both characters and character vectors), one or more transformation codes (specified as a numeric scalar or a numeric vector) or a function; see  transformation pattern, transformation codes and transformation function following.</p>
<p><code>Y</code> specifies the input document; see input document below.</p>
<p><code>X</code> optionally specifies an output stream; see output below.</p>
<p><code>R</code> is the result value; see output below.</p>
<h5>Examples of replace operations</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\u0'</span><span class="p">)</span><span class="w"> </span><span class="s1">'The cat sat on the mat'</span><span class="w">     </span>
<span class="nv">The</span><span class="w"> </span><span class="nv">CAT</span><span class="w"> </span><span class="nv">SAT</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">MAT</span>
</code></pre></div>
<p>In the search pattern the dot matches any character, so the pattern as a whole matches sequences of three characters ending 'at'. The transformation is given as a character string, and causes the entire matching text to be folded to upper case.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'\w+'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="kt">{</span><span class="o">⌽</span><span class="bp">⍵</span><span class="na">.</span><span class="nv">Match</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="s1">'The cat sat on the mat'</span>
<span class="nv">ehT</span><span class="w"> </span><span class="nv">tac</span><span class="w"> </span><span class="nv">tas</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">eht</span><span class="w"> </span><span class="nv">tam</span>
</code></pre></div>
<p>The search pattern matches each word. The transformation is given as a function, which receives a namespace containing various variables describing the match, and it returns the match in reverse, which in turn replaces the matched text.</p>
<h5>Examples of search operations</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">STR</span><span class="kd">←</span><span class="s1">'The cat sat on the mat'</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'\u0'</span><span class="p">)</span><span class="w"> </span><span class="nv">STR</span>
<span class="nv">CAT</span><span class="w">  </span><span class="nv">SAT</span><span class="w">  </span><span class="nv">MAT</span><span class="w"> </span>
</code></pre></div>
<p>The example is identical to the first, above, except that after the transformation is applied to the matches the results are returned in a vector, not substituted into the source text.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">.</span><span class="p">((</span><span class="m">1</span><span class="o">↑</span><span class="nv">Offsets</span><span class="p">)</span><span class="o">,</span><span class="m">1</span><span class="o">↑</span><span class="nv">Lengths</span><span class="p">)</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="nv">STR</span>
<span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">19</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<p>When searching, the result vector need not contain only text and in this example the function returns the numeric position and length of the match given to it; the resultant vector contains these values for each of the three matches.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="nv">STR</span><span class="w">       </span>
<span class="m">4</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">19</span><span class="w"> </span><span class="m">3</span>
</code></pre></div></p>
<p>Here the transformation is given as a vector of numeric codes which are a short-hand for the position and length of each match; the overall result is therefore identical to the previous example.</p>
<p>These examples all operate on a simple character vector containing text, but the text may be given in several forms - character vectors, vectors of character vectors, and external data streams. These various forms constitute a 'document'. When the result also takes the form of a document it may be directed to a stream.</p>
<h5>Input Document</h5>
<p>The input document may be an array or a data stream.</p>
<p>When it is an array it may be given in one of two forms:</p>
<ol>
<li>A character scalar or vector</li>
<li>A vector of character vectors</li>
</ol>
<p>Currently, the only supported data stream is a native file, specified as tie number, which is read from the current position to the end. If the file is read from the start, and there is a valid Byte Order Mark (BOM) at the start of it, the data encoding is determined by this BOM. Otherwise, data in the file is assumed to be encoded as specified by the InEnc option.</p>
<p>Hint: once a native file has been read to the end by <code>⎕R</code> or <code>⎕S</code> it is possible to reset the file position to the start so that it may be read again using:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{}</span><span class="w"> </span><span class="nf">⎕NREAD</span><span class="w"> </span><span class="nv">tienum</span><span class="w"> </span><span class="m">82</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>The input document is comprised of lines of text. Line breaks may be included in the data:</p>
<p>Implicitly</p>
<ul>
<li>Between each item in the outer vector (type 2, above)</li>
</ul>
<p>Explicitly, as</p>
<ul>
<li>carriage return</li>
<li>line feed</li>
<li>carriage return and line feed together, in that order</li>
<li>vertical tab (U+000B)</li>
<li>newline (U+0085)</li>
<li>form Feed (U+000C)</li>
<li>line Separator (U+2028)</li>
<li>paragraph Separator (U+2029)</li>
</ul>
<p>The implicit line ending character may be set using the EOL option. Explicit line ending characters may also be replaced by this character - so that all line endings are normalised - using the NEOL option.</p>
<p>The input document may be processed in <strong>line</strong> mode, <strong>document</strong> mode or <strong>mixed</strong> mode. In document mode and mixed mode, the entire input document, line ending characters included, is passed to the search engine; in line mode the document is split on line endings and passed to the search engine in sections without the line ending characters. The choice of mode affects both memory usage and behaviour, as documented in the section 'Line, document and mixed modes'.</p>
<h5>Output</h5>
<p>The format of the output is dependent on whether <code>⎕S</code> or <code>⎕R</code> are in use, whether an output stream is specified and, for <code>⎕R</code>, the form of the input and whether the ResultText option is specified.</p>
<p>An output data stream may optionally be specified. Currently, the only supported data stream is a native file, specified as tie number, and all output will be appended to it. Data in the stream is encoded as specified by the OutEnc option. If this encoding specifies a Byte Order Mark and the file is initially empty then the Byte Order Mark will be written at the start. Appending to existing data using a different encoding is permitted but unlikely to produce desirable results. If an input stream is also used, care must be taken to ensure the input and output streams are not the same.</p>
<h5><code>⎕R</code></h5>
<p>With no output stream specified and unless overridden by the ResultText option, the derived function result will be a document which closely matches the format of the input document, as follows:</p>
<p>A <strong>character scalar or vector</strong> input will result in a <strong>character vector</strong> output. Any and all line endings in the output will be represented by line ending characters within the character vector.</p>
<p>A <strong>vector of character vectors</strong> as input will result in a <strong>vector of character vectors</strong> as document output. Any and all line endings in the output document will be implied at the end of each character vector.</p>
<p>A <strong>stream</strong> as input will result in a <strong>vector of character vectors</strong> document output. Any and all line endings in the output document will be implied at the end of each character vector.</p>
<p>Note that the shape of the output document may be significantly different to that of the input document.</p>
<p>If the ResultText option is specified, the output type may be forced to be a <strong>character vector</strong> or <strong>vector of character vectors</strong> as described above, regardless of the input document.</p>
<p>With an output stream specified the text is appended to the stream. If the appended text does not end with a line ending character then the line ending character specified by the EOL option is also appended. The resulting length of the file  is returned as a shy result.</p>
<h5><code>⎕S</code></h5>
<p>With no output stream specified, the result will be a vector containing one item for each match in the input document, of types determined by the transformation performed on each match.</p>
<p>With an output stream specified each match is appended to the stream. If any match does not end with a line ending character then the line ending character specified by the EOL option is also appended.  The resulting length of the file  is returned as a shy result. Only text may be written to the stream, which means:</p>
<ul>
<li>When a transformation function is used, the function may only generate a character vector result.</li>
<li>Transformation codes may not be used.</li>
</ul>
<h5>Search pattern</h5>
<p>A summary of the syntax of the search pattern is reproduced from the PCRE documentation. See <a class="internal-link" href="#pcre-specifications-pcre-regular-expression-syntax-summary">Section 6.2</a>.</p>
<p>A full description is provided in <a class="internal-link" href="#pcre-specifications-pcre-regular-expression-details">Section 6.3</a>.</p>
<p>There may be multiple search patterns. If more than one search pattern is specified and more than one pattern matches the same part of the input document then priority is given to the pattern specified first.</p>
<p>Note that when anchoring a search to the beginning of a line, it is essential to use <code>^</code> (<code>⎕UCS 94</code>), not <code>∧</code> (<code>⎕UCS 8743</code>).</p>
<h5>Transformation pattern</h5>
<p>For each match in the input document, the transformation pattern causes the creation of text which, for <code>⎕R</code>, replaces the matching text and, for <code>⎕S</code>, generates one item in the result.</p>
<p>There may be either one transformation pattern, or the same number of transformation patterns as search patterns. If there are multiple search patterns and multiple transformation patterns then the transformation pattern used corresponds to the search pattern which matched the input text.</p>
<p>Transformation patterns may not be mixed with transformation codes or functions.</p>
<p>The following characters have special meaning:</p>
<table>
<thead>
<tr>
<th>Character</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>%</td>
<td>acts as a placeholder for the entire line (line mode) or document (document mode or mixed mode) which contained the match</td>
</tr>
<tr>
<td>&amp;</td>
<td>acts as a placeholder for the entire portion of text which matched</td>
</tr>
<tr>
<td>\n</td>
<td>represents a line feed character</td>
</tr>
<tr>
<td>\r</td>
<td>represents a carriage return</td>
</tr>
<tr>
<td>\0</td>
<td>equivalent to &amp;</td>
</tr>
<tr>
<td>\ <em>n</em></td>
<td>acts as a placeholder for the text which matched the first to ninth subpattern; <em>n</em> may be any single digit value from 1 to 9</td>
</tr>
<tr>
<td>( <em>n</em> )</td>
<td>acts as a placeholder for the text which matched the numbered subpattern; <em>n</em> may have an integer value from 0 to 63.</td>
</tr>
<tr>
<td>\&lt; <em>name</em> &gt;</td>
<td>acts as a placeholder for the text which matched the named subpattern</td>
</tr>
<tr>
<td>\</td>
<td>represents the backslash character</td>
</tr>
<tr>
<td>\%</td>
<td>represents the percent character</td>
</tr>
<tr>
<td>\&amp;</td>
<td>represents the ampersand character</td>
</tr>
<tr>
<td>\x{ <em>nnnn</em> }</td>
<td>represents a Unicode code point; <em>nnnn</em> is a hexadecimal sequence of characters yielding a value between 0x1 and 0x10FFFF.</td>
</tr>
</tbody>
</table>
<p>The above may be qualified so that matching text is folded, or mapped to upper- or lower-case, by using the <strong>f</strong>, <strong>u</strong>, and <strong>l</strong> modifiers respectively; the effect is as if the text was processed by <code>⎕C</code>. See <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
<p>Character sequences beginning with the backslash place the modifier after the backslash; character sequences with no leading backslash add both a backslash and the modifier to the start of the sequence, for example:</p>
<table>
<tbody>
<tr>
<td>\u&amp;</td>
<td>acts as a placeholder for the entire portion of text which matched, folded to upper case</td>
</tr>
<tr>
<td>\l0</td>
<td>equivalent to \l&amp;</td>
</tr>
</tbody>
</table>
<p>Character sequences beginning with the backslash other that those shown are invalid. All characters other than those shown are literal values and are included in the text without modification.</p>
<h5>Transformation codes</h5>
<p>The transformation codes are a numeric scalar or vector. Transformation codes may only be used with <code>⎕S</code>. For each match in the input document, a numeric scalar or vector of the same shape as the transformation codes is created, with the codes replaced with values as follows:</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>The offset from the start of the line (line mode) or document (document mode or mixed mode) of the start of the match.</td>
</tr>
<tr>
<td>1</td>
<td>The length of the match.</td>
</tr>
<tr>
<td>2</td>
<td>In line mode, the block number in the source document of the start of the match. The value is origin zero. In document mode or mixed mode this value is always zero.</td>
</tr>
<tr>
<td>3</td>
<td>The pattern number which matched the input document, origin zero.</td>
</tr>
</tbody>
</table>
<h5>Transformation Function</h5>
<p>The transformation function is called for each match within the input document.  The function is monadic and is passed a namespace, containing the following variables:</p>
<table>
<tbody>
<tr>
<td><code>Block</code></td>
<td>The entire line (line mode) or document (document mode or mixed mode) in which the match was found.</td>
</tr>
<tr>
<td><code>BlockNum</code></td>
<td>With line mode, the block (line) number in the source document of the start of the match. The value is origin zero. With document mode or mixed mode the entire document is contained within one block and this value is always zero.</td>
</tr>
<tr>
<td><code>Pattern</code></td>
<td>The search pattern which matched.</td>
</tr>
<tr>
<td><code>PatternNum</code></td>
<td>The index-zero pattern number which matched.</td>
</tr>
<tr>
<td><code>Match</code></td>
<td>The text within Block which matched Pattern.</td>
</tr>
<tr>
<td><code>Offsets</code></td>
<td>A vector of one or more offsets relative to the start of Block. The first value is the offset of the entire match; any and all additional values are the offsets of the portions of the text which matched the subpatterns, in the order of the subpatterns within Pattern. <code>¯1</code> indicates no match, see below.</td>
</tr>
<tr>
<td><code>Lengths</code></td>
<td>A vector of one or more lengths, corresponding to each value in Offset. <code>¯1</code> indicates no match, see below.</td>
</tr>
<tr>
<td><code>Names</code></td>
<td>A vector of one or more character vectors corresponding to each of the values in Offsets, specifying the names given to the subpatterns within Pattern. The first entry (corresponding to the match) and all subpatterns with no name are included as length zero character vectors.</td>
</tr>
<tr>
<td><code>ReplaceMode</code></td>
<td>A Boolean indicating whether the function was called by <code>⎕R</code> (value 1) or <code>⎕S</code> (value 0).</td>
</tr>
<tr>
<td><code>TextOnly</code></td>
<td>A Boolean indicating whether the return value from the function must be a character vector (value 1) or any value (value 0).</td>
</tr>
</tbody>
</table>
<p>The return value from the function is used as follows:</p>
<p>With <code>⎕R</code> the function must return a character vector. The contents of this vector are used to replace the matching text.</p>
<p>With <code>⎕S</code> the function may return no value. If it does return a value:</p>
<ul>
<li>When output is being directed to a stream it must be a character vector.</li>
<li>Otherwise, it may be any value. The overall result of the derived function is the catenation of the enclosure of each returned value into a single vector.</li>
</ul>
<p>The passed namespace exists over the lifetime of <code>⎕R</code> or <code>⎕S</code>; the function may therefore preserve state by creating variables in the namespace.</p>
<p>The function may itself call <code>⎕R</code> or <code>⎕S</code>.</p>
<p>There may be only one transformation function, regardless of the number of search patterns.</p>
<p>The locations of the match within Block and subpatterns within Match are given as offsets rather than positions, i.e. the values are the number of characters preceding the data, and are not affected by the Index Origin.</p>
<p>The value of <code>¯1</code> may appear in both the Offsets and Fields items (in corresponding positions). They indicate that the subpattern to which they refer did not appear in the match at all.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="kt">{}</span><span class="p">(</span><span class="s1">'(A)|(B)'</span><span class="nf">⎕R</span><span class="kt">{</span><span class="vg">⎕</span><span class="kd">←</span><span class="bp">⍵</span><span class="na">.</span><span class="p">(</span><span class="nv">Offsets</span><span class="w"> </span><span class="nv">Lengths</span><span class="p">)⋄</span><span class="s1">'x'</span><span class="kt">}</span><span class="p">)</span><span class="s1">'ABC'</span>
<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>
</code></pre></div>
<p>The pattern has two subpatterns - (<code>A</code>) and (<code>B</code>). Therefore Offsets and Lengths would be expected to have three elements each - one for the entire match, one for the first subpattern and one for the second subpattern. But these subpatterns have a <code>|</code> between them which means they are alternates - only one can match.</p>
<p>When <code>ABC</code> is searched the first match is the <code>A</code> in the first subpattern. The second subpattern does not feature. Offsets is <code>0 0</code> and Lengths is <code>1 1</code>: the entire pattern matched from offset 0 length 1 and the first subpattern also matched from offset 0 length 1. The second subpattern did not feature in the match.</p>
<p>Note that <code>¯1</code> is only used as a "filler" when there are higher-numbered subpatterns that did match.</p>
<p>The second match is the B in the second subpattern. Offsets is <code>1 ¯1 1</code> and Lengths is <code>1 ¯1 1</code>: the entire pattern matched from offset 1 length 1 and the second subpattern also matched from offset 1 length 1. The first subpattern did not feature in the match and this is indicated by the <code>¯1</code>s. There has to be something between the offset/length for the entire pattern and the second subpattern.</p>
<h5>Options</h5>
<p>Options are specified using the Variant operator. The Principal option is IC.</p>
<p>Default values are highlighted thus.</p>
<h5>IC Option</h5>
<p>When set, case is ignored in searches.</p>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td>Matches are not case sensitive.</td>
</tr>
<tr>
<td>0</td>
<td>Matches are case sensitive.</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'[AEIOU]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABCDE abcde'</span>
<span class="nv">XBCDX</span><span class="w"> </span><span class="nv">XbcdX</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'[AEIOU]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'ABCDE abcde'</span>
<span class="nv">XBCDX</span><span class="w"> </span><span class="nv">XbcdX</span>
</code></pre></div>
<h5>Mode Option</h5>
<p>Specifies whether the input document is interpreted in <strong>line</strong> mode, <strong>document</strong> mode or <strong>mixed</strong> mode.</p>
<table>
<tbody>
<tr>
<td>L</td>
<td>When line mode is set, the input document is split into separate lines (discarding the line ending characters themselves), and each line is processed separately. This means that the ML option applies per line, and the '^' and '$' anchors match the start and end respectively of each line. Because the document is split, searches can never match across multiple lines, nor can searches for line ending characters ever succeed. Setting line mode can result in significantly reduced memory requirements compared with the other modes.</td>
</tr>
<tr>
<td><code>D</code></td>
<td>When document mode is set, the entire input document is processed as a single block. The ML option applies to this entire block, and the '^' and '$' anchors match the start and end respectively of the block - not the lines within it. Searches can match across lines, and can match line ending characters.</td>
</tr>
<tr>
<td><code>M</code></td>
<td>When mixed mode is set, the '^' and '$' anchors match the start and end respectively of each line, as if line mode is set, but in all other respects behaviour is as if document mode is set - the entire input document is processed in a single block.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'$'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'[Endline]'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'L'</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">ABC</span><span class="sr">[</span><span class="nv">Endline</span><span class="sr">]</span><span class="w">  </span><span class="nv">DEF</span><span class="sr">[</span><span class="nv">Endline</span><span class="sr">]</span><span class="w"> </span>

<span class="w">      </span><span class="p">(</span><span class="s1">'$'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'[Endline]'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">  </span><span class="nv">DEF</span><span class="sr">[</span><span class="nv">Endline</span><span class="sr">]</span>

<span class="w">      </span><span class="p">(</span><span class="s1">'$'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'[Endline]'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'M'</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">ABC</span><span class="sr">[</span><span class="nv">Endline</span><span class="sr">]</span><span class="w">  </span><span class="nv">DEF</span><span class="sr">[</span><span class="nv">Endline</span><span class="sr">]</span>
</code></pre></div>
<h5>DotAll Option</h5>
<p>Specifies whether the dot ('.') character in search patterns matches line ending characters.</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>The '.' character in search patterns matches most characters, but not line endings.</td>
</tr>
<tr>
<td><code>1</code></td>
<td>The '.' character in search patterns matches all characters.</td>
</tr>
</tbody>
</table>
<p>This option is invalid in line mode, because line endings are stripped from the input document.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'.'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">XXX</span><span class="w">  </span><span class="nv">XXX</span><span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)(</span><span class="s1">'DotAll'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">XXXXXXXX</span>
</code></pre></div>
<h5>EOL Option</h5>
<p>Sets the line ending character which is implicitly present between character vectors, when the input document is a vector of character vectors.</p>
<table>
<tbody>
<tr>
<td>CR</td>
<td>Carriage Return (U+000D)</td>
</tr>
<tr>
<td>LF</td>
<td>Line Feed (U+000A)</td>
</tr>
<tr>
<td>CRLF</td>
<td>Carriage Return followed by Line Feed</td>
</tr>
<tr>
<td>VT</td>
<td>Vertical Tab (U+000B)</td>
</tr>
<tr>
<td>NEL</td>
<td>New Line (U+0085)</td>
</tr>
<tr>
<td>FF</td>
<td>Form Feed (U+000C)</td>
</tr>
<tr>
<td>LS</td>
<td>Line Separator (U+2028)</td>
</tr>
<tr>
<td>PS</td>
<td>Paragraph Separator (U+2029)</td>
</tr>
</tbody>
</table>
<p>In the Classic Edition, setting a value which is not in <code>⎕AVU</code> may result in a <code>TRANSLATION ERROR</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'\n'</span><span class="w"> </span><span class="nf">⎕R</span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)(</span><span class="s1">'EOL'</span><span class="w"> </span><span class="s1">'LF'</span><span class="p">))</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">ABCXDEF</span>
</code></pre></div>
<p>Here, the implied line ending between 'ABC' and 'DEF' is '\n', not the default '\r\n'.</p>
<h5>NEOL Option</h5>
<p>Specifies whether explicit line ending sequences in the input document are normalised by replacing them with the character specified using the EOL option.</p>
<table>
<tbody>
<tr>
<td>0</td>
<td>Line endings are not normalised.</td>
</tr>
<tr>
<td>1</td>
<td>Line endings are normalised.</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">a</span><span class="kd">←</span><span class="s1">'ABC'</span><span class="o">,</span><span class="p">(</span><span class="m">1</span><span class="o">↑</span><span class="m">2</span><span class="o">↓</span><span class="nf">⎕AV</span><span class="p">)</span><span class="o">,</span><span class="s1">'DEF'</span><span class="o">,</span><span class="p">(</span><span class="m">1</span><span class="o">↑</span><span class="m">3</span><span class="o">↓</span><span class="nf">⎕AV</span><span class="p">)</span><span class="o">,</span><span class="s1">'GHI'</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'\n'</span><span class="nf">⎕S</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'NEOL'</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'EOL'</span><span class="w"> </span><span class="s1">'LF'</span><span class="p">)</span><span class="w"> </span><span class="nv">a</span>
<span class="m">3</span><span class="w"> </span><span class="m">7</span>
</code></pre></div>
<p>'\n' has matched both explicit line ending characters in the input, even though they are different.</p>
<h5>ML Option</h5>
<p>Sets a limit to the number of processed pattern matches per line (line mode) or document (document mode and mixed mode).</p>
<table>
<tbody>
<tr>
<td>Positive value n</td>
<td>Sets the limit to the first n matches.</td>
</tr>
<tr>
<td>0</td>
<td>Sets no limit.</td>
</tr>
<tr>
<td>Negative value <code>¯</code> n</td>
<td>Sets the limit to exactly the nth match.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'.'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'x'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'ML'</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">xxC</span><span class="w">  </span><span class="nv">xxF</span><span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'x'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'ML'</span><span class="w"> </span><span class="m">¯2</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">AxC</span><span class="w">  </span><span class="nv">DxF</span><span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'x'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'ML'</span><span class="w"> </span><span class="m">¯4</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)</span><span class="w"> </span><span class="s1">'ABC'</span><span class="w"> </span><span class="s1">'DEF'</span>
<span class="w"> </span><span class="nv">ABC</span><span class="w">  </span><span class="nv">xEF</span>
</code></pre></div>
<h5>Greedy Option</h5>
<p>Controls whether patterns are "greedy" (and match the maximum input possible) or are not (and match the minimum). Within the pattern itself it is possible to specify greediness for individual elements of the pattern; this option sets the default.</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Greedy by default.</td>
</tr>
<tr>
<td>0</td>
<td>Not greedy by default.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'[A-Z].*[0-9]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Greedy'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'ABC123 DEF456'</span>
<span class="nv">X</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'[A-Z].*[0-9]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'Greedy'</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="s1">'ABC123 DEF456'</span>
<span class="nv">X23</span><span class="w"> </span><span class="nv">X56</span>
</code></pre></div>
<h5>OM Option</h5>
<p>Specifies whether matches may overlap.</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Searching continues for all patterns and then from the character following the <em>start</em> of the match, thus permitting overlapping matches.</td>
</tr>
<tr>
<td>0</td>
<td>Searching continues from the character following the <em>end</em> of the match.</td>
</tr>
</tbody>
</table>
<p>This option may only be used with <code>⎕S</code>. With <code>⎕R</code> searching always continues from the character following the end of the match (the characters following the start of the match will have been changed).</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'[0-9]+'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'\0'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'OM'</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="s1">'A 1234 5678 B'</span>
<span class="w"> </span><span class="m">1234</span><span class="w">  </span><span class="m">5678</span><span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="s1">'[0-9]+'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'\0'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'OM'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="s1">'A 1234 5678 B'</span>
<span class="w"> </span><span class="m">1234</span><span class="w">  </span><span class="m">234</span><span class="w">  </span><span class="m">34</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5678</span><span class="w">  </span><span class="m">678</span><span class="w">  </span><span class="m">78</span><span class="w">  </span><span class="m">8</span>
</code></pre></div>
<h5>InEnc Option</h5>
<p>This option specifies the encoding of the input stream when it cannot be determined automatically. It is either:</p>
<ul>
<li>a character vector that specifies the file-encoding as shown in the table below.</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>
<p>When the stream is read from its start, and the start of the stream contains a recognised Byte Order Mark (BOM), the encoding is taken as that specified by the BOM and this option is ignored. Otherwise, the encoding is assumed to be as specified by this option.</p>
<table>
<tbody>
<tr>
<td>UTF-8</td>
<td>The stream is processed as UTF-8 data. Note that ASCII is a subset of UTF-8, so this default is also suitable for ASCII data.</td>
</tr>
<tr>
<td>UTF-16</td>
<td>The stream is processed as UTF16 little-endian data on little-ended systems, or as UTF16 big-endian data on big-endian systems.</td>
</tr>
<tr>
<td>UTF-16LE</td>
<td>The stream is processed as UTF16 little-endian data.</td>
</tr>
<tr>
<td>UTF-16BE</td>
<td>The stream is processed as UTF16 big-endian data.</td>
</tr>
<tr>
<td>UTF-32</td>
<td>The stream is processed as UTF32 little-endian data on little-ended systems, or as UTF32 big-endian data on big-endian systems.</td>
</tr>
<tr>
<td>UTF-32LE</td>
<td>The stream is processed as UTF32 little-endian data.</td>
</tr>
<tr>
<td>UTF-32BE</td>
<td>The stream is processed as UTF32 big-endian data.</td>
</tr>
<tr>
<td>ASCII</td>
<td>The stream is processed as ASCII data. If the stream contains any characters outside of the ASCII range then an error is produced.</td>
</tr>
<tr>
<td>Windows-1252</td>
<td>The stream is processed as Windows-1252 (ANSI) data.</td>
</tr>
<tr>
<td>ANSI</td>
<td>Same as Windows-1252</td>
</tr>
</tbody>
</table>
<p>For compatibility with the OutEnc option, the above UTF formats may be qualified with -BOM (e.g. UTF-8-BOM) or -NOBOM. For input streams, the qualified and unqualified options are equivalent.</p>
<h5>OutEnc Option</h5>
<p>When the output is written to a stream, this option specifies how the data is to be encoded.  It is either:</p>
<ul>
<li>a character vector that specifies the file-encoding as shown in the table below.</li>
<li>a 256-element numeric vector that maps each possible byte value (0-255) to a  Unicode code point (1st element = Unicode code point corresponding to byte value 0, and so on). ¯1 indicates that the corresponding byte value is not mapped to any character. Apart from ¯1, no value may appear in the table more than once.</li>
</ul>
<table>
<tbody>
<tr>
<td>Implied</td>
<td>If input came from a stream then the encoding format is the same as the input stream, otherwise UTF-8</td>
</tr>
<tr>
<td>UTF-8</td>
<td>The data is written in UTF-8 format.</td>
</tr>
<tr>
<td>UTF-16</td>
<td>The data is written in UTF16 little-endian format on little-ended systems, or in UTF16 big-endian format on big-endian systems.</td>
</tr>
<tr>
<td>UTF-16LE</td>
<td>The data is written in UTF-16 little-endian format.</td>
</tr>
<tr>
<td>UTF-16BE</td>
<td>The data is written in UTF-16 big-endian format.</td>
</tr>
<tr>
<td>UTF-32</td>
<td>The data is written in UTF32 little-endian format on little-ended systems, or in UTF32 big-endian format on big-endian systems.</td>
</tr>
<tr>
<td>UTF-32LE</td>
<td>The data is written in UTF-32 little-endian format.</td>
</tr>
<tr>
<td>UTF-32BE</td>
<td>The data is written in UTF-32 big-endian format.</td>
</tr>
<tr>
<td>ASCII</td>
<td>The data is written in ASCII format.</td>
</tr>
<tr>
<td>Windows-1252</td>
<td>The data is written in Windows-1252 (ANSI) format.</td>
</tr>
<tr>
<td>ANSI</td>
<td>Same as Windows-1252</td>
</tr>
</tbody>
</table>
<p>The above UTF formats may be qualified with -BOM (e.g. UTF-8-BOM) to specify that a Byte Order Mark should be written at the start of the stream or, -NOBOM that it should not. For files, this is ignored if the file already contains any data.  If the -BOM or -NOBOM suffix is omitted, UTF-8 defaults to UTF-8-NOBOM, while the other UTF formats default to -BOM.</p>
<h5>Enc Option</h5>
<p>This option sets both InEnc and OutEnc simultaneously, with the same given value. Any option value accepted by those options except Implied may be given.</p>
<h5>ResultText Option</h5>
<p>For <code>⎕R</code>, this option determines the format of the result.</p>
<table>
<tbody>
<tr>
<td>Implied</td>
<td>The output will either be a <strong>character vector</strong> or <strong>a vector of character vectors</strong> , dependent on the input document type</td>
</tr>
<tr>
<td>Simple</td>
<td>The output will be a <strong>character vector</strong> . Any and all line endings in the output will be represented by line ending characters within the character vector.</td>
</tr>
<tr>
<td>Nested</td>
<td>The output will be a <strong>vector of character vectors</strong> . Any and all line endings in the output document will be implied at the end of each character vector.</td>
</tr>
</tbody>
</table>
<p>This option may only be used with <code>⎕R</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="na">¨</span><span class="w"> </span><span class="p">(</span><span class="s1">'A'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'x'</span><span class="p">)</span><span class="w"> </span><span class="s1">'AB'</span><span class="w"> </span><span class="s1">'CD'</span><span class="w">                </span>
<span class="w">  </span><span class="m">120</span><span class="w"> </span><span class="m">66</span><span class="w">  </span><span class="m">67</span><span class="w"> </span><span class="m">68</span><span class="w">                    </span>
<span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="p">(</span><span class="s1">'A'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'x'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'ResultText'</span><span class="w"> </span><span class="s1">'Simple'</span><span class="p">)</span><span class="w"> </span><span class="s1">'AB'</span><span class="w"> </span><span class="s1">'CD'</span>
<span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">68</span>
</code></pre></div>
<h5>UCP Option</h5>
<p>This affects the way PCRE that processes \B, \b, \D, \d, \S, \s,  \W,
\w,  and  some  of  the POSIX character classes.</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Unicode  properties are  used to classify characters.</td>
</tr>
<tr>
<td>0</td>
<td>Only ASCII characters are recognized.</td>
</tr>
</tbody>
</table>
<p><strong>Implementation Note</strong>: this option is implemented by setting or not setting the PCRE_UCP option when calling pcre_compile(). More information can be found in the PCRE documentation.</p>
<p class="example">Examples</p>
<p>By default, the character ø (which is not an ASCII character) is considered to be a "non-word" character, so:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'\w'</span><span class="nf">⎕S</span><span class="s1">'\0'</span><span class="p">)</span><span class="s1">'Bjørn'</span><span class="w">  </span><span class="c1">⍝ identify "word" characters</span>
<span class="w"> </span><span class="nv">B</span><span class="w">  </span><span class="nv">j</span><span class="w">  </span><span class="nv">r</span><span class="w">  </span><span class="nv">n</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'\W'</span><span class="nf">⎕S</span><span class="s1">'\0'</span><span class="p">)</span><span class="s1">'Bjørn'</span><span class="w">  </span><span class="c1">⍝ non-word" characters</span>
<span class="w"> </span><span class="err">ø</span>
</code></pre></div></p>
<p>When UCP is set to 1, Unicode characters are matched as "word" characters (\w) too.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'\w'</span><span class="nf">⎕S</span><span class="s1">'\0'</span><span class="w"> </span><span class="na">⍠</span><span class="s1">'UCP'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="s1">'Bjørn'</span>
<span class="w"> </span><span class="nv">B</span><span class="w">  </span><span class="nv">j</span><span class="w">  </span><span class="err">ø</span><span class="w">  </span><span class="nv">r</span><span class="w">  </span><span class="nv">n</span>
</code></pre></div></p>
<h5>Regex Option</h5>
<p>This option may be used to disable regular expression matching which is enabled by default. It is a singleton Boolean value that applies to both search and transformation patterns, or a 2-element vector of Boolean values that applies to them separately.</p>
<table>
<tbody>
<tr>
<td>1</td>
<td>Regular expression matching is applied.</td>
</tr>
<tr>
<td>0</td>
<td>regular expression matching is disabled.</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">STR</span>
<span class="nv">The</span><span class="w"> </span><span class="nv">cat</span><span class="w"> </span><span class="nv">sat</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">mat</span>

<span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'\u0'</span><span class="p">)</span><span class="w"> </span><span class="nv">STR</span>
<span class="w"> </span><span class="nv">CAT</span><span class="w">  </span><span class="nv">SAT</span><span class="w">  </span><span class="nv">MAT</span><span class="w"> </span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'\u0'</span><span class="w"> </span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Regex'</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="nv">STR</span>

<span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="nf">⎕R</span><span class="s1">'\u0'</span><span class="p">)</span><span class="nv">STR</span>
<span class="nv">The</span><span class="w"> </span><span class="nv">CAT</span><span class="w"> </span><span class="nv">SAT</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">MAT</span>
<span class="w">      </span><span class="p">(</span><span class="s1">'.at'</span><span class="nf">⎕R</span><span class="s1">'\u0'</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'Regex'</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="p">)))</span><span class="nv">STR</span>
<span class="nv">The</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span>
</code></pre></div>
<h5>Line, document and mixed modes</h5>
<p>The Mode setting determines how the input document is packaged as a block and passed to the search engine. In line mode each line is processed separately; in document mode and mixed mode the entire document is presented to the search engine. This affects both the semantics of the search expression, and memory usage.</p>
<h5>Semantic differences</h5>
<ul>
<li>The ML option applies per block of data.</li>
<li>In line mode, search patterns cannot be constructed to span multiple lines. Specifically, patterns that include line ending characters (such as '\r') will never match because the line endings are never presented to the search engine.</li>
<li>By default the search pattern metacharacters '^' and '$' match the start and end of the block of data. In line mode this is always the start and end of each line. In document mode this is the start and end of the document. In mixed mode the behaviour of '^' and '$' are amended by setting the PCRE option 'MULTILINE' so that they match the start and end of each line within the document.</li>
</ul>
<h5>Memory usage differences</h5>
<p>Blocks of data passed to the search engine are processed and stored in the workspace. Processing the input document in line mode limits the total memory requirements; in particular this means that large streams can be processed without holding all the data in the workspace at the same time.</p>
<h5>Technical Considerations</h5>
<p><code>⎕R</code> and <code>⎕S</code> utilise the open-source regular-expression search engine PCRE, which is built into the Dyalog software and distributed according to the PCRE licence which is published separately.</p>
<p>Before data is passed to PCRE it is converted to UTF-8 format. This converted data is buffered in the workspace; processing large documents may have significant memory requirements. In line mode, the data is broken into individual lines and each is processed separately, potentially reducing memory demands.</p>
<p>It is possible to save a workspace with an active <code>⎕R</code> or <code>⎕S</code> on the stack and execution can continue when the workspace is reloaded with the same interpreter version. Later versions of the interpreter may not remain compatible and may signal a <code>DOMAIN ERROR</code> with explanatory message in the status window if it is unable to continue execution.</p>
<p>PCRE has a buffer length limit of 2<sup>31</sup> bytes (2GB). UTF-8 encodes each character using between 1 and 6 bytes (typically 1 or 3). In the very worst case, where every character is encoded in 6 bytes, the maximum block length which can be searched would be 357,913,940 characters.</p>
<h5>Further Examples</h5>
<p>Several of the examples use the following vector as the input document:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">text</span>
<span class="nv">To</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="o">-</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">question</span><span class="bp">:</span>
<span class="nv">Whether</span><span class="w"> </span><span class="err">'</span><span class="nv">tis</span><span class="w"> </span><span class="nv">nobler</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">mind</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">suffer</span>
<span class="nv">The</span><span class="w"> </span><span class="nv">slings</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">arrows</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">outrageous</span><span class="w"> </span><span class="nv">fortune</span><span class="o">,</span>
<span class="nv">Or</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">arms</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sea</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">troubles</span>
</code></pre></div></p>
<h5>Replace all upper and lower-case vowels by <code>'X'</code></h5>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="p">(</span><span class="s1">'[aeiou]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="nv">text</span>
<span class="nv">TX</span><span class="w"> </span><span class="nv">bX</span><span class="w"> </span><span class="nv">Xr</span><span class="w"> </span><span class="nv">nXt</span><span class="w"> </span><span class="nv">tX</span><span class="w"> </span><span class="nv">bX</span><span class="o">-</span><span class="w"> </span><span class="nv">thXt</span><span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">thX</span><span class="w"> </span><span class="nv">qXXstXXn</span><span class="bp">:</span><span class="w">   </span>
<span class="nv">WhXthXr</span><span class="w"> </span><span class="err">'</span><span class="nv">tXs</span><span class="w"> </span><span class="nv">nXblXr</span><span class="w"> </span><span class="nv">Xn</span><span class="w"> </span><span class="nv">thX</span><span class="w"> </span><span class="nv">mXnd</span><span class="w"> </span><span class="nv">tX</span><span class="w"> </span><span class="nv">sXffXr</span><span class="w">   </span>
<span class="nv">ThX</span><span class="w"> </span><span class="nv">slXngs</span><span class="w"> </span><span class="nv">Xnd</span><span class="w"> </span><span class="nv">XrrXws</span><span class="w"> </span><span class="nv">Xf</span><span class="w"> </span><span class="nv">XXtrXgXXXs</span><span class="w"> </span><span class="nv">fXrtXnX</span><span class="o">,</span>
<span class="nv">Xr</span><span class="w"> </span><span class="nv">tX</span><span class="w"> </span><span class="nv">tXkX</span><span class="w"> </span><span class="nv">Xrms</span><span class="w"> </span><span class="nv">XgXXnst</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">sXX</span><span class="w"> </span><span class="nv">Xf</span><span class="w"> </span><span class="nv">trXXblXs</span><span class="w">   </span>
</code></pre></div>
<h5>Replace only the second vowel on each line by <code>'\VOWEL\'</code></h5>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="p">(</span><span class="s1">'[aeiou]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\\VOWEL\\'</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'ML'</span><span class="w"> </span><span class="m">¯2</span><span class="p">))</span><span class="w"> </span><span class="nv">text</span>
<span class="nv">To</span><span class="w"> </span><span class="nv">b</span><span class="na">\</span><span class="nv">VOWEL</span><span class="na">\</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="o">-</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">question</span><span class="bp">:</span><span class="w">   </span>
<span class="nv">Wheth</span><span class="na">\</span><span class="nv">VOWEL</span><span class="na">\</span><span class="nv">r</span><span class="w"> </span><span class="err">'</span><span class="nv">tis</span><span class="w"> </span><span class="nv">nobler</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">mind</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">suffer</span><span class="w">   </span>
<span class="nv">The</span><span class="w"> </span><span class="nv">sl</span><span class="na">\</span><span class="nv">VOWEL</span><span class="na">\</span><span class="nv">ngs</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">arrows</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">outrageous</span><span class="w"> </span><span class="nv">fortune</span><span class="o">,</span>
<span class="nv">Or</span><span class="w"> </span><span class="nv">t</span><span class="na">\</span><span class="nv">VOWEL</span><span class="na">\</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">arms</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sea</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">troubles</span>
</code></pre></div>
<h5>Case fold each word</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'(?&lt;first&gt;\w)(?&lt;remainder&gt;\w*)'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\u&lt;first&gt;\l&lt;remainder&gt;'</span><span class="p">)</span><span class="w"> </span><span class="nv">text</span>
<span class="nv">To</span><span class="w"> </span><span class="nv">Be</span><span class="w"> </span><span class="nv">Or</span><span class="w"> </span><span class="nv">Not</span><span class="w"> </span><span class="nv">To</span><span class="w"> </span><span class="nv">Be</span><span class="o">-</span><span class="w"> </span><span class="nv">That</span><span class="w"> </span><span class="nv">Is</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">Question</span><span class="bp">:</span><span class="w">   </span>
<span class="nv">Whether</span><span class="w"> </span><span class="err">'</span><span class="nv">Tis</span><span class="w"> </span><span class="nv">Nobler</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">Mind</span><span class="w"> </span><span class="nv">To</span><span class="w"> </span><span class="nv">Suffer</span><span class="w">   </span>
<span class="nv">The</span><span class="w"> </span><span class="nv">Slings</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">Arrows</span><span class="w"> </span><span class="nv">Of</span><span class="w"> </span><span class="nv">Outrageous</span><span class="w"> </span><span class="nv">Fortune</span><span class="o">,</span>
<span class="nv">Or</span><span class="w"> </span><span class="nv">To</span><span class="w"> </span><span class="nv">Take</span><span class="w"> </span><span class="nv">Arms</span><span class="w"> </span><span class="nv">Against</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Sea</span><span class="w"> </span><span class="nv">Of</span><span class="w"> </span><span class="nv">Troubles</span><span class="w">   </span>
</code></pre></div>
<h5>Extract only the lines with characters 'or' (in upper or lower case) on them</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">↑</span><span class="p">(</span><span class="s1">'or'</span><span class="w"> </span><span class="nf">⎕S</span><span class="w"> </span><span class="s1">'%'</span><span class="w"> </span><span class="na">⍠</span><span class="w"> </span><span class="p">(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'ML'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="w"> </span><span class="nv">text</span>
<span class="nv">To</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="err">–</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">question</span><span class="bp">:</span><span class="w">   </span>
<span class="nv">The</span><span class="w"> </span><span class="nv">slings</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">arrows</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">outrageous</span><span class="w"> </span><span class="nv">fortune</span><span class="o">,</span>
<span class="nv">Or</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">arms</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sea</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">troubles</span><span class="w"> </span>
</code></pre></div>
<h5>Identify which lines contain the word 'or' (in upper or lower case) on them</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'\bor\b'</span><span class="nf">⎕S</span><span class="w"> </span><span class="m">2</span><span class="na">⍠</span><span class="p">(</span><span class="s1">'IC'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'ML'</span><span class="w"> </span><span class="m">1</span><span class="p">))</span><span class="nv">text</span>
<span class="m">0</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
<p>Note the difference between the characters <em>'or'</em> (which appear in 'fortune') and the word <em>'or'</em>.</p>
<h5>Place every non-space sequence of characters in brackets</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'[^\s]+'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'(&amp;)'</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="s1">'To be or not to be, that is the question'</span>
<span class="p">(</span><span class="nv">To</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">be</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">not</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">to</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">be</span><span class="o">,</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">that</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">is</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">the</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">question</span><span class="p">)</span>
</code></pre></div>
<h5>Replace all sequences of one or more spaces by newline. Note that the effect of this is dependent on the input format</h5>
<p>Character vector input results in a single character vector output with embedded newlines:</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="s1">'\s+'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\r'</span><span class="p">)</span><span class="w"> </span><span class="s1">'To be or not to be, that is the question'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span>
<span class="err">│</span><span class="nv">To</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">be</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">or</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">not</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="nv">to</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">be</span><span class="o">,</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="nv">that</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="nv">is</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="nv">the</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="nv">question</span><span class="err">│</span>
<span class="err">└────────┘</span>
</code></pre></div>
<p>A vector of two character vectors as input results in a vector of 10 character vectors output:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="s1">'\s+'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\r'</span><span class="p">)</span><span class="w"> </span><span class="s1">'To be or not to be,'</span><span class="w"> </span><span class="s1">'that is the question'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">To</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">be</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">or</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">not</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">to</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">be</span><span class="o">,</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">that</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">is</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">the</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">question</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────┘</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────────────────────────────────────────────────┘</span>
</code></pre></div></p>
<h5>Change numerals to their expanded names, using a function</h5>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="nv">r</span><span class="kd">←</span><span class="nv">f</span><span class="w"> </span><span class="nv">a</span><span class="sr">;</span><span class="nv">n</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">n</span><span class="kd">←</span><span class="s1">'zero'</span><span class="w"> </span><span class="s1">'one'</span><span class="w"> </span><span class="s1">'two'</span><span class="w"> </span><span class="s1">'three'</span><span class="w"> </span><span class="s1">'four'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">n</span><span class="o">,</span><span class="kd">←</span><span class="s1">'five'</span><span class="w"> </span><span class="s1">'six'</span><span class="w"> </span><span class="s1">'seven'</span><span class="w"> </span><span class="s1">'eight'</span><span class="w"> </span><span class="s1">'nine'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">r</span><span class="kd">←</span><span class="s1">' '</span><span class="o">,⊃</span><span class="p">(</span><span class="o">⍎</span><span class="nv">a</span><span class="na">.</span><span class="nv">Match</span><span class="p">)</span><span class="o">↓</span><span class="nv">n</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w">      </span><span class="nv">verbose</span><span class="kd">←</span><span class="p">(</span><span class="s1">'[0-9]'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="nv">f</span><span class="p">)</span>
<span class="w">      </span><span class="nv">verbose</span><span class="w"> </span><span class="o">⍕</span><span class="m">27</span><span class="o">×</span><span class="m">56</span><span class="o">×</span><span class="m">87</span>
<span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">five</span><span class="w"> </span><span class="nv">four</span><span class="w"> </span><span class="nv">four</span>
</code></pre></div>
<h5>Swap 'red' and 'blue'</h5>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'red'</span><span class="w"> </span><span class="s1">'blue'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'blue'</span><span class="w"> </span><span class="s1">'red'</span><span class="p">)</span><span class="w"> </span><span class="s1">'red hat blue coat'</span>
<span class="nv">blue</span><span class="w"> </span><span class="nv">hat</span><span class="w"> </span><span class="nv">red</span><span class="w"> </span><span class="nv">coat</span>
</code></pre></div>
<h6>Convert a comma separated values (CSV) file so that</h6>
<ul>
<li>dates in the first field are converted from European format to ISO, and</li>
<li>currency values are converted from Deutsche Marks (DEM) to Euros (DEM 1.95583 to €1).</li>
</ul>
<p>The currency conversion requires the use of a function. Note the nested use of <code>⎕R</code>.</p>
<p>Input file:</p>
<table>
<tbody>
<tr>
<td><code>01/03/1980,Widgets,DEM 10.20</code> <code>02/04/1980,Bolts,DEM 61.75</code> <code>17/06/1980,Nuts; special rate DEM 17.00,DEM 17.00</code> <code>18/07/1980,Hammer,DEM 1.25</code></td>
</tr>
</tbody>
</table>
<p>Output file:</p>
<p>|----------------------------------------------------------------------------------------------------------------------------------|
|<code>1980-03-01,Widgets,€ 5.21</code> <code>1980-04-02,Bolts,€ 31.57</code> <code>1980-06-17,Nuts; special rate DEM 17.00,€ 8.69</code> <code>1980-07-18,Hammer,€ 0.63</code>|
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">ret</span><span class="kd">←</span><span class="nv">f</span><span class="w"> </span><span class="nv">a</span><span class="sr">;</span><span class="nv">d</span><span class="sr">;</span><span class="nv">m</span><span class="sr">;</span><span class="nv">y</span><span class="sr">;</span><span class="nv">v</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Select</span><span class="w"> </span><span class="nv">a</span><span class="na">.</span><span class="nv">PatternNum</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Case</span><span class="w"> </span><span class="m">0</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nv">d</span><span class="w"> </span><span class="nv">m</span><span class="w"> </span><span class="nv">y</span><span class="kd">←</span><span class="kt">{</span><span class="nv">a</span><span class="na">.</span><span class="nv">Match</span><span class="sr">[</span><span class="nv">a</span><span class="na">.</span><span class="nv">Offsets</span><span class="sr">[</span><span class="bp">⍵</span><span class="o">+</span><span class="m">1</span><span class="sr">]</span><span class="o">+⍳</span><span class="nv">a</span><span class="na">.</span><span class="nv">Lengths</span><span class="sr">[</span><span class="bp">⍵</span><span class="o">+</span><span class="m">1</span><span class="sr">]]</span><span class="kt">}</span><span class="na">¨</span><span class="o">⍳</span><span class="m">3</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="nv">ret</span><span class="kd">←</span><span class="nv">y</span><span class="o">,</span><span class="s1">'-'</span><span class="o">,</span><span class="nv">m</span><span class="o">,</span><span class="s1">'-'</span><span class="o">,</span><span class="nv">d</span><span class="o">,</span><span class="s1">','</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">        </span><span class="nv">v</span><span class="kd">←</span><span class="o">⍎</span><span class="nv">a</span><span class="na">.</span><span class="nv">Block</span><span class="sr">[</span><span class="nv">a</span><span class="na">.</span><span class="nv">Offsets</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="o">+⍳</span><span class="nv">a</span><span class="na">.</span><span class="nv">Lengths</span><span class="sr">[</span><span class="m">1</span><span class="sr">]]</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">        </span><span class="nv">v</span><span class="o">÷</span><span class="kd">←</span><span class="m">1.95583</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">        </span><span class="nv">ret</span><span class="kd">←</span><span class="s1">',€ '</span><span class="o">,</span><span class="p">(</span><span class="s1">'(\d+\.\d\d).*'</span><span class="nf">⎕R</span><span class="s1">'\1'</span><span class="p">)</span><span class="o">⍕</span><span class="nv">v</span>
<span class="sr">[</span><span class="m">10</span><span class="sr">]</span><span class="w">   </span><span class="bp">:</span><span class="nv">EndSelect</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">in</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">'x.csv'</span><span class="w"> </span><span class="nf">⎕NTIE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">out</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="s1">'new.csv'</span><span class="w"> </span><span class="nf">⎕NCREATE</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nv">dateptn</span><span class="kd">←</span><span class="s1">'(\d{2})/(\d{2})/(\d{4}),'</span>
<span class="w">      </span><span class="nv">valptn</span><span class="kd">←</span><span class="s1">',DEM ([0-9.]+)'</span>
<span class="w">      </span><span class="nv">out</span><span class="w"> </span><span class="p">(</span><span class="nv">dateptn</span><span class="w"> </span><span class="nv">valptn</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="nv">f</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span>
<span class="w">      </span><span class="nf">⎕nuntie</span><span class="na">¨</span><span class="nv">in</span><span class="w"> </span><span class="nv">out</span>
</code></pre></div></p>
<h5>Create a simple profanity filter. For the list of objectionable words</h5>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nv">profanity</span><span class="kd">←</span><span class="s1">'bleeding'</span><span class="w"> </span><span class="s1">'heck'</span>
</code></pre></div>
<p>first construct a pattern which will match the words:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">ptn</span><span class="kd">←</span><span class="p">((</span><span class="s1">'^'</span><span class="w"> </span><span class="s1">'$'</span><span class="w"> </span><span class="s1">'\r\n'</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'\\b('</span><span class="w"> </span><span class="s1">')\\b'</span><span class="w"> </span><span class="s1">'|'</span>
<span class="w">                           </span><span class="nf">⎕OPT</span><span class="w"> </span><span class="s1">'Mode'</span><span class="w"> </span><span class="s1">'D'</span><span class="p">)</span><span class="w"> </span><span class="nv">profanity</span>
<span class="w">      </span><span class="nv">ptn</span>
<span class="na">\</span><span class="nv">b</span><span class="p">(</span><span class="nv">bleeding</span><span class="o">|</span><span class="nv">heck</span><span class="p">)</span><span class="na">\</span><span class="nv">b</span>
</code></pre></div></p>
<p>then a function that uses this pattern:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">sanitise</span><span class="kd">←</span><span class="nv">ptn</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="s1">'****'</span><span class="w"> </span><span class="nf">⎕opt</span><span class="w"> </span><span class="m">1</span>
<span class="w">      </span><span class="nv">sanitise</span><span class="w"> </span><span class="s1">'"Heck", I said'</span>
<span class="s2">"****"</span><span class="o">,</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">said</span>
</code></pre></div></p>
<h6>Replace the characters 'or' with '\u0' without having to escape the backslash</h6>
<p>Escaping transformation strings can be a daunting task. To avoid doing so, one can simply enclose the string in braces. This is not a special feature, but just a consequence of how transformation functions are used.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="s1">'to'</span><span class="w"> </span><span class="nf">⎕R</span><span class="w"> </span><span class="kt">{</span><span class="s1">'\u0'</span><span class="kt">}</span><span class="p">)</span><span class="nv">text</span>
<span class="nv">To</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span><span class="w"> </span><span class="nv">be</span><span class="err">–</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">question</span><span class="bp">:</span>
<span class="nv">Whether</span><span class="w"> </span><span class="err">'</span><span class="nv">tis</span><span class="w"> </span><span class="nv">nobler</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">mind</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span><span class="w"> </span><span class="nv">suffer</span>
<span class="nv">The</span><span class="w"> </span><span class="nv">slings</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">arrows</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">outrageous</span><span class="w"> </span><span class="nv">fortune</span><span class="o">,</span>
<span class="nv">Or</span><span class="w"> </span><span class="na">\</span><span class="nv">u0</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">arms</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sea</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">troubles</span>
</code></pre></div></p>
</article>
<article id="system-functions-refs">
<div class="heading-container"><h3 class="heading" id="system-functions-refs-header">Cross References</h3><div class="command">R←⎕REFS Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector, identifying the name of a function or operator, or the object representation form of a function or operator (see <a class="internal-link" href="#primitive-functions-floor">Section 1.4.36</a>).  <code>R</code> is a simple character matrix, with one name per row, of identified names in the function or operator in <code>Y</code> excluding distinguished names of system constants, variables or functions.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'OPTIONS'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">OPTIONS</span><span class="sr">;</span><span class="nv">OPTS</span><span class="sr">;</span><span class="nv">INP</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ REQUESTS AND EXECUTES AN OPTION</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">OPTS</span><span class="w"> </span><span class="kd">←</span><span class="s1">'INPUT'</span><span class="w"> </span><span class="s1">'REPORT'</span><span class="w"> </span><span class="s1">'END'</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">IN</span><span class="bp">:</span><span class="nv">INP</span><span class="kd">←</span><span class="nv">ASK</span><span class="s1">'OPTION:'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">EX</span><span class="o">⍴</span><span class="na">⍨</span><span class="p">(</span><span class="o">⊂</span><span class="nv">INP</span><span class="p">)</span><span class="o">∊</span><span class="nv">OPTS</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="s1">'INVALID OPTION. SELECT FROM'</span><span class="o">,</span><span class="nv">OPTS</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">IN</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">   </span><span class="nv">EX</span><span class="bp">:</span><span class="kd">→</span><span class="nv">EX</span><span class="o">+</span><span class="nv">OPTS</span><span class="o">⍳⊂</span><span class="nv">INP</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">    </span><span class="nv">INPUT</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">IN</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">    </span><span class="nv">REPORT</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">IN</span>
<span class="sr">[</span><span class="m">9</span><span class="sr">]</span><span class="w">   </span><span class="nv">END</span><span class="bp">:</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">    </span><span class="nf">⎕REFS</span><span class="s1">'OPTIONS'</span>
<span class="nv">ASK</span>
<span class="nv">END</span>
<span class="nv">EX</span>
<span class="nv">IN</span>
<span class="nv">INP</span>
<span class="nv">INPUT</span>
<span class="nv">OPTIONS</span>
<span class="nv">OPTS</span>
<span class="nv">REPORT</span>
</code></pre></div>
<p>If <code>Y</code> is locked or is an External Function, <code>R</code> contains its name only.  For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕LOCK</span><span class="w"> </span><span class="s1">'OPTIONS'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nf">⎕REFS</span><span class="w"> </span><span class="s1">'OPTIONS'</span>
<span class="nv">OPTIONS</span>
</code></pre></div></p>
<p>If <code>Y</code> is the name of a primitive, external or derived function, <code>R</code> is an empty matrix with shape 0 0.</p>
</article>
<article id="system-functions-rl">
<div class="heading-container"><h3 class="heading" id="system-functions-rl-header">Random Link</h3><div class="command">⎕RL</div></div>
<p><code>⎕RL</code> is a 2-element vector. Its first element contains the  base or <em>random number seed</em> and its second element is an integer that identifies the random number generator that is currently  in use. Together these items define how the system generates random numbers using <a class="internal-link" href="#primitive-functions-roll">Section 1.4.92</a> and <a class="internal-link" href="#primitive-functions-deal">Section 1.4.15</a>.</p>
<p>In a <code>clear ws</code> <code>⎕RL</code> is <code>(⍬ 1)</code>. <code>⎕RL</code> has Namespace scope.</p>
<h5>Random Number Seed</h5>
<p>The facility to set the seed to a specific value provides the means to generate a repeatable sequence of random numbers, such as might be required by certain types of simulation modelling. This capability is not provided by RNG2.</p>
<p>If the seed is set to 0, the seed is set randomly but may be retrieved and subsequently re-assigned to create a repeatable sequence.</p>
<p>If the seed is set to <code>⍬</code>, Dyalog is able to take advantage of certain optimisations which deliver maximum performance. In this case, the actual seed in use is intentionally hidden and <code>⎕RL[1]</code> always reports <code>⍬</code>, regardless of the Random Number Generator in use.</p>
<h5>Random Number Generators</h5>
<p>The 3 random number generators are listed in the table below. The 4th column of the table contains the values of seeds that may be assigned to them.</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Algorithm</th>
<th>Valid Seed Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>RNG0</td>
<td>Lehmer linear congruential generator.</td>
<td><code>0</code> , <code>⍬</code> , or an integer in the range 1 to <code>¯2+2*31</code></td>
</tr>
<tr>
<td>1</td>
<td>RNG1</td>
<td>Mersenne Twister.</td>
<td><code>0</code> , <code>⍬</code> , an integer in the range 1 to <code>¯1+2*63</code> or a 625-element integer vector</td>
</tr>
<tr>
<td>2</td>
<td>RNG2</td>
<td>Operating System random number generator.</td>
<td><code>⍬</code></td>
</tr>
</tbody>
</table>
<p>Note that assigning an invalid value to the seed will cause <code>DOMAIN ERROR</code>.</p>
<p>The default random number generator in a <code>CLEAR WS</code> is 1 (Mersenne Twister). This algorithm <em>RNG1</em> produces 64-bit values with good distribution.</p>
<p>The Lehmer linear congruential generator <em>RNG0</em> was the only random number generator provided in versions of Dyalog APL prior to Version 13.1. The implementation of this algorithm has several limitations including limited value range <code>(2*31)</code>, short period and non-uniform distribution (some values may appear more frequently than others). It is retained for backwards compatibility.</p>
<p>Under Windows, the Operating System random number generator algorithm <em>RNG2</em> uses the <code>rand_s()</code> function. Under UNIX/Linux it uses <code>/dev/urandom</code>.</p>
<h5>Random Number Sequences</h5>
<p>Random number sequences may be predictable or not and  repeatable or not. A predictable and repeatable sequence is obtained by starting with the same specific value for the seed. A non-predictable sequence is obtained by starting with a seed which is itself chosen at random, but such a sequence is repeatable if the value of the seed (chosen at random) is visible. A non-predictable and non-repeatable sequence of random numbers is obtained where the initial seed is chosen completely at random and is unknown.</p>
<p>Using  <em>RNG0</em> or <em>RNG1</em>:</p>
<ul>
<li>To obtain  an entirely predictable random sequence, set the seed to a non-zero value</li>
<li>To obtain a non-predictable, but repeatable sequence, set the seed to <code>0</code></li>
<li>To obtain a non-predictable, non-repeatable series of random numbers, set the seed to <code>⍬</code></li>
</ul>
<p><em>RNG2</em> does not support a user modifiable random number seed, so when using this scheme, it is not possible to obtain a repeatable random number series and the seed must always be <code>⍬</code>.</p>
<h5>Implementation Note</h5>
<p><code>⎕RL</code> does not behave quite like a regular 2-element variable; it has its own rules relating to assignment and reference.</p>
<h6>Reference</h6>
<p><code>⎕RL</code> <em>returns</em> a 2-element vector whose second element identifies the scheme in use (0, 1 or 2).</p>
<p>If  <code>⎕RL[1]</code> is set to <code>⍬</code>,  <code>⎕RL[1]</code>always reports <code>⍬</code>.</p>
<p>Otherwise if the seed <code>⎕RL[1]</code> is set to a value other than <code>⍬</code>:</p>
<ul>
<li>using <em>RNG0</em>, <code>⎕RL[1]</code> is an integer which  represents the <em>seed</em> for the next random number in the sequence.</li>
<li>using <em>RNG1</em>, the system internally retains a block of 312 64-bit numbers which are used one by one to generate the results of roll and deal. When the first block of 312 have been used up, the system generates a second block. In this case, <code>⎕RL[1]</code> is an integer vector of 32-bit numbers of length 625 (the first is an index into the block of 312) which represents the internal state of the random number generator. This means that, as with <em>RNG0</em>, you may save the value of  <code>⎕RL</code> in a variable and reassign it later.</li>
<li>
<p>Using <em>RNG2</em>, the seed is purely internal and <code>⎕RL[1]</code> is always zilde.</p>
</li>
<li>
<p>using <em>RNG0</em>, <code>⎕RL[1]</code> is an integer which  represents the <em>seed</em> for the next random number in the sequence.</p>
</li>
<li>using <em>RNG1</em>, the system internally retains a block of 312 64-bit numbers which are used one by one to generate the results of roll and deal. When the first block of 312 have been used up, the system generates a second block. In this case, <code>⎕RL[1]</code> is an integer vector of 32-bit numbers of length 625 (the first is an index into the block of 312) which represents the internal state of the random number generator. This means that, as with <em>RNG0</em>, you may save the value of  <code>⎕RL</code> in a variable and reassign it later.</li>
<li>Using <em>RNG2</em>, the seed is purely internal and <code>⎕RL[1]</code> is always zilde.</li>
</ul>
<h6>Assignment</h6>
<p><code>⎕RL</code> may only be assigned in its entirety. Indexed and selective assignment may not be used to assign values to individual elements.</p>
<p>To preserve compatibility with Versions of Dyalog prior to Version 15.0 (in which <code>⎕RL</code> specifies just the seed) if the value assigned to <code>⎕RL</code> represents a valid seed for the random number generator in use, it is taken to be the new seed. Otherwise, the value assigned to <code>⎕RL</code> must be a 2-element vector, whose first item is the seed and whose second item is 0, 1 or 2 and specifies the random number generator to be used subsequently.</p>
<h5>Examples (specific seeds for repeatable sequences)</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">16807</span><span class="w"> </span>
<span class="w">      </span><span class="m">10</span><span class="o">?</span><span class="m">10</span><span class="w">      </span>
<span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span>
<span class="w">      </span><span class="m">5</span><span class="o">↑⊃</span><span class="nf">⎕RL</span><span class="w">       </span>
<span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">16807</span><span class="w"> </span><span class="m">1819658750</span><span class="w"> </span><span class="m">¯355441828</span>
<span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="o">?</span><span class="m">1000</span><span class="o">⍴</span><span class="m">1000</span><span class="w"> </span>
<span class="w">      </span><span class="m">5</span><span class="o">↑⊃</span><span class="nf">⎕RL</span><span class="w">       </span>
<span class="m">100</span><span class="w"> </span><span class="m">¯465541037</span><span class="w"> </span><span class="m">¯1790786136</span><span class="w"> </span><span class="m">¯205462449</span><span class="w"> </span><span class="m">996695303</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">16807</span>
<span class="w">      </span><span class="m">10</span><span class="o">?</span><span class="m">10</span><span class="w">      </span>
<span class="m">4</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">8</span>
<span class="w">      </span><span class="nv">Y</span><span class="kd">←</span><span class="o">?</span><span class="m">1000</span><span class="o">⍴</span><span class="m">1000</span><span class="w"> </span>
<span class="w">      </span><span class="nv">X</span><span class="o">≡</span><span class="nv">Y</span>
<span class="m">1</span>
<span class="w">      </span><span class="m">5</span><span class="o">↑⊃</span><span class="nf">⎕RL</span><span class="w">       </span>
<span class="m">100</span><span class="w"> </span><span class="m">¯465541037</span><span class="w"> </span><span class="m">¯1790786136</span><span class="w"> </span><span class="m">¯205462449</span><span class="w"> </span><span class="m">996695303</span><span class="w">  </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">16807</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c1">⍝ Select RNG0</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="m">16807</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="o">?</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">9</span>
<span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="o">?</span><span class="m">9</span>
<span class="m">7</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="m">984943658</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">16807</span>
<span class="w">      </span><span class="o">?</span><span class="m">9</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">9</span>
<span class="m">2</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">5</span>
<span class="w">      </span><span class="o">?</span><span class="m">9</span>
<span class="m">7</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="m">984943658</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">16807</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="c1">⍝ Select RNG1</span>
<span class="w">      </span><span class="m">5</span><span class="o">↑⊃</span><span class="nf">⎕RL</span>
<span class="m">100</span><span class="w"> </span><span class="m">¯465541037</span><span class="w"> </span><span class="m">¯1790786136</span><span class="w"> </span><span class="m">¯205462449</span><span class="w"> </span><span class="m">996695303</span>
</code></pre></div></p>
<h6>Examples (0 seed)</h6>
<p>When you set the seed to 0, a random seed is created for you:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="m">865618822</span><span class="w"> </span><span class="m">0</span>
<span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">0</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="m">1100783275</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></p>
<p>Setting the seed to 0 gives you a new, unpredictable random sequence yet it is repeatable because you can retrieve (and subsequently re-use) the actual seed after you set it:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">?</span><span class="m">10</span><span class="o">⍴</span><span class="m">100</span>
<span class="m">14</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">12</span>
<span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="m">1100783275</span>
<span class="w">      </span><span class="o">?</span><span class="m">10</span><span class="o">⍴</span><span class="m">100</span>
<span class="m">14</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">18</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">71</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">12</span>
</code></pre></div></p>
<h6>Example (zilde)</h6>
<p>When you set the seed to zilde, you get the same random initialisation as setting it to 0 but you can't retrieve the actual value of the seed. When it is  set to <code>⍬</code> it is subsequently reported as <code>⍬</code> and the internal value of the seed is hidden.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RL</span><span class="kd">←</span><span class="no">⍬</span>
<span class="w">      </span><span class="nf">⎕RL</span>
<span class="err">┌┬─┐</span>
<span class="err">││</span><span class="m">0</span><span class="err">│</span>
<span class="err">└┴─┘</span>
</code></pre></div></p>
</article>
<article id="system-functions-rsi">
<div class="heading-container"><h3 class="heading" id="system-functions-rsi-header">Space Indicator</h3><div class="command">R←⎕RSI</div></div>
<p><code>R</code> is a vector of refs to the spaces from which functions in the state indicator were called <code>(⍴⎕RSI←→⍴⎕NSI←→⍴⎕SI)</code>.</p>
<p><code>⎕RSI</code> and <code>⎕NSI</code> are identical except that <code>⎕RSI</code> returns refs to the spaces whereas <code>⎕NSI</code> returns their names. Put another way: <code>⎕NSI←→⍕¨⎕RSI.</code></p>
<p>Note that <code>⎕RSI</code> returns refs to the spaces <em>from which</em> functions were called not those <em>in which</em> they are currently running.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">OBJECTS</span>
<span class="nv">xx</span><span class="w">      </span><span class="nv">yy</span>

<span class="w">      </span><span class="nf">⎕VR</span><span class="w"> </span><span class="s1">'yy.foo'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">goo</span>
<span class="w">     </span><span class="bp">∇</span><span class="w">                          </span>
<span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'⎕SE.goo'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">goo</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">r</span><span class="kd">←</span><span class="nf">⎕SI</span><span class="o">,</span><span class="sr">[</span><span class="m">1.5</span><span class="sr">]</span><span class="nf">⎕RSI</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">xx</span>
<span class="c1">#.xx</span>
<span class="w">      </span><span class="nv">calling</span><span class="kd">←</span><span class="c1">#.yy.foo</span>
<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">calling</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────┐</span>
<span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">goo</span><span class="err">│</span><span class="w"> </span><span class="c1">#.yy │</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">foo</span><span class="err">│</span><span class="w"> </span><span class="c1">#.xx │</span>
<span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w">      </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────┘</span>
</code></pre></div>
</article>
<article id="system-functions-rtl">
<div class="heading-container"><h3 class="heading" id="system-functions-rtl-header">Response Time Limit</h3><div class="command">⎕RTL</div></div>
<p>A non-zero value in <code>⎕RTL</code> places a time limit, in seconds, for input requested via <code>⍞</code>, <code>⎕ARBIN</code>, and <code>⎕SR</code>.  <code>⎕RTL</code> may be assigned any integer in the range 0 to 32767.  The value in a clear workspace is 0. <code>⎕RTL</code> has Namespace scope.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕RTL</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'FUEL QUANTITY?'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
<span class="nv">FUEL</span><span class="w"> </span><span class="nv">QUANTITY</span><span class="o">?</span>
<span class="nv">TIMEOUT</span>
<span class="w">      </span><span class="nf">⎕RTL</span><span class="kd">←</span><span class="m">5</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'FUEL QUANTITY?'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="vg">⍞</span>
</code></pre></div>
</article>
<article id="system-functions-s">
<div class="heading-container"><h3 class="heading" id="system-functions-s-header">Search</h3><div class="command">R←{X}(A ⎕S B) Y</div></div>
<p>See <a class="internal-link" href="#system-functions-frdci">Section 4.6.59</a>.</p>
</article>
<article id="system-functions-save">
<div class="heading-container"><h3 class="heading" id="system-functions-save-header">Save Workspace</h3><div class="command">{R}←{X}⎕SAVE Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector that identifies a  full or relative path name to the file in which the workspace will be written.</p>
<p>Unless the path specified by <code>Y</code> is a full pathname, it is taken to be relative to the current working directory which may be obtained by the expression: <code>⊃1 ⎕NPARTS ''</code>.</p>
<p>See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p>The active workspace is saved with the  file name specified by  <code>Y</code>, whether or not a workspace file of that name already exists.</p>
<p>A <code>DOMAIN ERROR</code> is reported if the name in <code>Y</code> :</p>
<ul>
<li>is not a valid workspace name</li>
<li>is not a valid  file name</li>
<li>refers to an unauthorised directory</li>
<li>specifies an existing file that does not already contain a Dyalog workspace or session file</li>
</ul>
<p>The shy result <code>R</code> is a simple Boolean scalar 1. However, when the  workspace is subsequently loaded using <code>⎕LOAD</code> and execution restarts, the result is 0, as described below.</p>
<p>The optional left argument <code>X</code> is either 0 or 1. If <code>X</code> is omitted or 1, the saved version of the workspace has execution suspended at the point of exit from the <code>⎕SAVE</code> function.  If the saved workspace is subsequently loaded by <code>⎕LOAD</code>, execution is resumed, and the value 0 is returned if the result is used or assigned, or otherwise the result is suppressed. In this case, the latent expression value (<code>⎕LX</code>) is ignored.</p>
<p>If <code>X</code> is 0, the workspace is saved without any state indicator in effect. The effect is the same as if you first executed <code>)RESET</code> and then <code>)SAVE</code>. In this case, when the workspace is subsequently loaded, the value of the latent expression (<code>⎕LX</code>) is honoured if applicable.</p>
<p>As is the case for <code>)SAVE</code> (see <a class="internal-link" href="#system-commands-save">Section 5.2.24</a>), monadic <code>⎕SAVE</code> will fail and issue <code>DOMAIN ERROR</code> if any threads (other than the root thread 0) are running or if there are any Edit or Trace windows open. However, neither of these restrictions apply if the left argument <code>X</code> is 0.</p>
<p>Note that the values of all system variables (including <code>⎕SM</code>) and all GUI objects are saved.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="o">⊃</span><span class="s1">'SAVED'</span><span class="w"> </span><span class="s1">'ACTIVE'</span><span class="w"> </span><span class="sr">[</span><span class="nf">⎕IO</span><span class="o">+</span><span class="nf">⎕SAVE</span><span class="s1">'TEMP'</span><span class="sr">]</span><span class="p">)</span><span class="o">,</span><span class="s1">' WS'</span>
<span class="nv">ACTIVE</span><span class="w"> </span><span class="nv">WS</span>
<span class="w">      </span><span class="nf">⎕LOAD</span><span class="w"> </span><span class="s1">'TEMP'</span>
<span class="nv">SAVED</span><span class="w"> </span><span class="nv">WS</span>
</code></pre></div>
<p>Additional operations may be performed before saving the workspace. For further information, see <a class="internal-link" href="#the-i-beam-operator-set-workspace-save-options">Section 3.2.39</a>.</p>
</article>
<article id="system-functions-sd">
<div class="heading-container"><h3 class="heading" id="system-functions-sd-header">Screen Dimensions</h3><div class="command">R←⎕SD</div></div>
<p><code>⎕SD</code> is a 2-element integer vector containing the number of rows and columns on the screen, or in the USER window.</p>
<p>For asynchronous terminals under UNIX, the screen size is taken from the terminal database <em>terminfo</em> or <em>termcap</em>.</p>
<p>In window implementations of Dyalog APL, <code>⎕SD</code> reports the current size (in characters) of the USER window or the current size of the SM object, whichever is appropriate.</p>
</article>
<article id="system-functions-se">
<div class="heading-container"><h3 class="heading" id="system-functions-se-header">Session Namespace</h3><div class="command">⎕SE</div></div>
<p><code>⎕SE</code> is a system namespace.  Its GUI components (MenuBar, ToolBar, and so forth) define the appearance and behaviour of the APL Session window and may be customised to suit individual requirements.</p>
<p><code>⎕SE</code> is maintained separately from the active workspace and is not affected by <code>)LOAD</code> or <code>)CLEAR</code>.  It is therefore useful for containing utility functions.  The contents of <code>⎕SE</code> may be saved in and loaded from a .DSE file.</p>
<p>See <i>The Session Object</i> for further details.</p>
</article>
<article id="system-functions-execute-unix-command">
<div class="heading-container"><h3 class="heading" id="system-functions-execute-unix-command-header">Execute (UNIX) Command</h3><div class="command">{R}←⎕SH Y</div></div>
<p><code>⎕SH</code> executes a UNIX shell or a Windows Command Processor.  <code>⎕SH</code> is a synonym of <code>⎕CMD</code>.  Either function may be used in either environment (UNIX or Windows) with exactly the same effect.  <code>⎕SH</code> is probably more natural for the UNIX user.  This section describes the behaviour of <code>⎕SH</code> and <code>⎕CMD</code> under UNIX.  See <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a> for a discussion of the behaviour of these system functions under Windows.</p>
<p>The system commands <a class="internal-link" href="#system-commands-sh">Section 5.2.25</a> and <a class="internal-link" href="#system-commands-cmd">Section 5.2.3</a> provide similar facilities. For further information, see <a class="internal-link" href="#system-commands-sh">Section 5.2.25</a> and <a class="internal-link" href="#system-commands-cmd">Section 5.2.3</a>.</p>
<p><code>Y</code> must be a simple character scalar or vector representing a UNIX shell command.  <code>R</code> is a nested vector of character vectors.</p>
<p><code>Y</code> may be any acceptable UNIX command. If the command does not produce any output, <code>R</code> is <code>0⍴⊂''</code> but the result is suppressed if not explicitly used or assigned.  If the command has a non-zero exit code, then APL will signal a <code>DOMAIN ERROR</code>.  If the command returns a result and has a zero exit code, then each element of <code>R</code> will be a line from the standard output (stdout) of the command.  Output from standard error (stderr) is not captured unless redirected to stdout.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SH</span><span class="s1">'ls'</span>
<span class="nv">FILES</span><span class="w"> </span><span class="nv">WS</span><span class="w"> </span><span class="nv">temp</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'rm WS/TEST'</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'grep bin /etc/passwd ; exit 0'</span>
<span class="nv">bin</span><span class="bp">:</span><span class="o">!</span><span class="bp">:</span><span class="m">2</span><span class="bp">:</span><span class="m">2</span><span class="bp">::</span><span class="na">/</span><span class="nv">bin</span><span class="bp">:</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'apl MYWS &lt;inputfile &gt;out1 2&gt;out2 &amp;'</span>
</code></pre></div>
<h5>Note</h5>
<p>This function is disabled and instead generates a <code>DOMAIN ERROR</code> if the RIDE_SPAWNED parameter is non-zero. This is designed to prevent it being invoked from a RIDE session which does not support this type of user interface. For further details, see the <em>RIDE User Guide</em>.</p>
<p>Under macOS and Linux, if the configuration parameter <strong>ENABLE_CEF</strong> is 1, Auxiliary Processors cannot be used (they hang on error). The default value is 1 unless you are not running under a desktop (for example, you are running Dyalog in a PuTTY session when the default is 0).</p>
</article>
<article id="system-functions-start-unix-auxiliary-processor">
<div class="heading-container"><h3 class="heading" id="system-functions-start-unix-auxiliary-processor-header">Start UNIX Auxiliary Processor</h3><div class="command">{R}←X ⎕SH Y</div></div>
<p>Used dyadically, <code>⎕SH</code> starts an Auxiliary Processor. The effect, as far as the APL user is concerned, is identical under both Windows and UNIX although there are differences in the method of implementation. <code>⎕SH</code> is a synonym of <code>⎕CMD</code> Either function may be used in either environment (UNIX or Windows) with exactly the same effect. This section describes the behaviour of <code>⎕SH</code> and <code>⎕CMD</code> under UNIX. See <a class="internal-link" href="#system-functions-start-windows-auxiliary-processor">Section 4.6.18</a> for a discussion of the behaviour of these system functions under Windows.</p>
<p>Although it is still possible for users to create their own APs, Dyalog strongly recommends creating shared libraries/DLLs instead.</p>
<p><code>X</code> must be a simple character vector. <code>Y</code> may be a simple character scalar or vector, or a nested character vector.</p>
<p><code>⎕SH</code> loads the Auxiliary Processor from the file named by <code>X</code> using a search-path defined by the environment variable <code>WSPATH</code>.</p>
<p>The shy result <code>R</code> is the process id of the Auxiliary Processor task.</p>
<p>The effect of starting an AP is that one or more <strong>external functions</strong> are defined in the workspace. These appear as locked functions and may be used in exactly the same way as regular defined functions.</p>
<p>When an external function is used in an expression, the argument(s) (if any) are <strong>piped</strong> to the AP for processing. If the function returns a result, APL halts while the AP is processing and waits for the result. If not it continues processing in parallel.</p>
<p>The syntax of dyadic <code>⎕SH</code> is similar to the UNIX execl(2) system call, where '<code>taskname</code>' is the name of the auxiliary processor to be executed and <code>arg0</code> through <code>argn</code> are the parameters of the calling line to be passed to the task, viz.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'taskname'</span><span class="w"> </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'arg0'</span><span class="w"> </span><span class="s1">'arg1'</span><span class="w"> </span><span class="na">...</span><span class="w"> </span><span class="s1">'argn'</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'xutils'</span><span class="w"> </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'xutils'</span><span class="w"> </span><span class="s1">'ss'</span><span class="w"> </span><span class="s1">'dbr'</span>
<span class="w">      </span><span class="s1">'/bin/sh'</span><span class="w"> </span><span class="nf">⎕SH</span><span class="w"> </span><span class="s1">'sh'</span><span class="w"> </span><span class="s1">'-c'</span><span class="w"> </span><span class="s1">'adb test'</span>
</code></pre></div>
</article>
<article id="system-functions-shadow">
<div class="heading-container"><h3 class="heading" id="system-functions-shadow-header">Shadow Name</h3><div class="command">{R}←⎕SHADOW Y</div></div>
<p><code>Y</code> must be a simple character scalar, vector or matrix or a vector of nested scalar  of character vectors identifying one or more APL names.  For a simple vector <code>Y</code>, names are separated by one or more blanks.  For a matrix <code>Y</code>, each row is taken to be a single name.</p>
<p>Each valid name in <code>Y</code> is shadowed in the most recently invoked defined function or operator, as though it were included in the list of local names in the function or operator header.  The class of the name becomes 0 (undefined).  The name ceases to be shadowed when execution of the shadowing function or operator is completed.  Shadow has no effect when the state indicator is empty.</p>
<p>The shy result <code>R</code> is a Boolean vector of 1s with the same length as the number of names in <code>Y</code>.</p>
<p>If a name is ill-formed, or if it is the name of a system constant or system function, <code>DOMAIN ERROR</code> is reported.</p>
<p>If the name of a top-level GUI object is shadowed, it is made inactive.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'RUN'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">RUN</span><span class="w"> </span><span class="nv">FN</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ Runs function named &lt;NAME&gt; defined</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ from representation form &lt;FN&gt;</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕SHADOW</span><span class="w"> </span><span class="nv">NAME</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="o">⍎</span><span class="nf">⎕FX</span><span class="w"> </span><span class="nv">FN</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'RUN'</span><span class="w"> </span><span class="c1">⍝ stop prior RUN exiting</span>

<span class="w">      </span><span class="s1">'FOO'</span><span class="w"> </span><span class="nv">RUN</span><span class="w"> </span><span class="s1">'R←FOO'</span><span class="w"> </span><span class="s1">'R←10'</span>
<span class="m">10</span>

<span class="nv">RUN</span><span class="sr">[</span><span class="m">0</span><span class="sr">]</span>

<span class="w">      </span><span class="p">)</span><span class="nv">SINL</span>
<span class="c1">#.RUN[0]*       FOO     FN      NAME</span>

<span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>

<span class="w">      </span><span class="nv">FOO</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nv">FOO</span>
<span class="w">      </span><span class="err">^</span>
</code></pre></div>
</article>
<article id="system-functions-si">
<div class="heading-container"><h3 class="heading" id="system-functions-si-header">State Indicator</h3><div class="command">R←⎕SI</div></div>
<p><code>R</code> is a nested vector of vectors giving the names of the functions or operators in the execution stack.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.PLUS[2]*</span>
<span class="na">.</span>
<span class="c1">#.MATDIV[4]</span>
<span class="c1">#.FOO[1]*</span>
<span class="o">⍎</span>

<span class="w">      </span><span class="nf">⎕SI</span>
<span class="w"> </span><span class="nv">PLUS</span><span class="w">  </span><span class="nv">MATDIV</span><span class="w">  </span><span class="nv">FOO</span>

<span class="w">      </span><span class="p">(</span><span class="o">⍴</span><span class="nf">⎕LC</span><span class="p">)</span><span class="o">=⍴</span><span class="nf">⎕SI</span>
<span class="m">1</span>
</code></pre></div>
<p>If execution stops in a callback function, <code>⎕DQ</code> will appear on the stack, and may occur more than once
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.ERRFN[7]*</span>
<span class="nf">⎕DQ</span>
<span class="c1">#.CALC</span>
<span class="nf">⎕DQ</span>
<span class="c1">#.MAIN</span>
</code></pre></div></p>
<p>To edit the function on the top of the stack:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕ED</span><span class="w"> </span><span class="o">⊃</span><span class="nf">⎕SI</span>
</code></pre></div></p>
<p>The name of the function which called this one:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="m">1</span><span class="o">↓</span><span class="nf">⎕SI</span>
</code></pre></div></p>
<p>To check if the function <code>∆N</code> is pendent:
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="p">((</span><span class="o">⊂</span><span class="nv">∆N</span><span class="p">)</span><span class="o">∊</span><span class="m">1</span><span class="o">↓</span><span class="nf">⎕SI</span><span class="p">)</span><span class="na">/</span><span class="s1">'Warning : '</span><span class="o">,</span><span class="nv">∆N</span><span class="o">,</span><span class="s1">' is pendent'</span>
</code></pre></div></p>
<p>See also <a class="internal-link" href="#system-functions-xsi">Section 4.6.180</a>.</p>
</article>
<article id="system-functions-signal">
<div class="heading-container"><h3 class="heading" id="system-functions-signal-header">Signal Event</h3><div class="command">{R}←{X}⎕SIGNAL Y</div></div>
<p><code>Y</code> must be a scalar or vector.</p>
<p>If <code>Y</code> is a an empty vector nothing is signalled.</p>
<p>If <code>Y</code> is a vector of more than one element, all but the first element are ignored.</p>
<p><code>R</code> has the same value as <code>Y</code>.</p>
<p><code>Y=0</code> is a special form of <code>⎕SIGNAL</code>, the side effect of which is to reset the values of certain system constants. It is described further down this section.</p>
<p>If the first element of <code>Y</code> is a simple integer it is taken to be an event number. Permitted values are 0, 1-999 and 1006.  <code>X</code> is an optional text message.   If present, <code>X</code> must be a simple character scalar or vector, or an object reference. If <code>X</code> is omitted or is  empty, the standard event message for the corresponding event number  is assumed. See <i>APL Error Messages</i>. If there is no standard message, a message of the form <code>ERROR NUMBER n</code> is composed, where <code>n</code> is the event number in <code>Y</code>. Values outside the permitted range will result in a <code>DOMAIN ERROR</code>.</p>
<p>If the first element of <code>Y</code> is a 2 column matrix or a vector of 2 element vectors of name/values pairs, then it is considered to be a set of values to be used to override the default values in a new instance of <code>⎕DMX</code>. Any other value for the first element of <code>Y</code> will result in a <code>DOMAIN ERROR</code>.</p>
<p>The names in the error specification must all  appear in a system-generated <code>⎕DMX</code>, otherwise a <code>DOMAIN ERROR</code> will be issued. For each name specified, the default value in the new instance of <code>⎕DMX</code> is replaced with the value specified. <code>EN</code> must be one of the names in the error specification. Attempting to specify certain names, including <code>InternalLocation</code> and <code>DM</code>, will result in a <code>DOMAIN ERROR</code>. The value which is to be assigned to a name must be appropriate to the name in question.</p>
<p>Dyalog may enhance <code>⎕DMX</code> in future, thus potentially altering the list of valid and/or assignable names.</p>
<p>If the first element of <code>Y</code> is an array of name/value pairs then  specifying any value for <code>X</code> will result in a <code>DOMAIN ERROR</code>.</p>
<p>The effect of the system function is to interrupt execution.  The state indicator is cut back to exit from the function or operator containing the line that invoked <code>⎕SIGNAL</code>, or is cut back to exit the Execute (<code>⍎</code>) expression that invoked <code>⎕SIGNAL</code>. If executed within a nested dfn, the state indicator is cut back to exit from the capsule containing the line that invoked <code>⎕SIGNAL</code>. An error is then generated.</p>
<p>An error interrupt may be trapped if the system variable <code>⎕TRAP</code> is set to intercept the event.  Otherwise, the standard system action is taken (which may involve cutting back the state indicator further if there are locked functions or operators in the state indicator).  The standard event message is replaced by the text given in <code>X</code>, if present.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="s1">'DIVIDE'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="w"> </span><span class="nv">DIVIDE</span><span class="w"> </span><span class="nv">B</span><span class="sr">;</span><span class="nf">⎕TRAP</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="m">11</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'→ERR'</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="o">÷</span><span class="nv">B</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="m">0</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">ERR</span><span class="bp">:</span><span class="s1">'DIVISION ERROR'</span><span class="w"> </span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">11</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w"> </span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="nv">DIVIDE</span><span class="w"> </span><span class="m">0</span>
<span class="nv">DIVISION</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="nv">DIVIDE</span><span class="w"> </span><span class="m">0</span>
<span class="w">     </span><span class="err">^</span>
</code></pre></div>
<p>If you are using the Microsoft .NET Framework, you may use <code>⎕SIGNAL</code> to throw an exception by specifying a value of 90 in <code>Y</code>. In this case, if you specify the optional left argument <code>X</code>, it must be a reference to a .NET object that is or derives from the Microsoft .NET class System.Exception. The following example illustrates a <em>constructor</em> function <code>CTOR</code> that expects to be called with a value for <code>⎕IO</code> (0 or 1)
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">CTOR</span><span class="w"> </span><span class="nv">IO</span><span class="sr">;</span><span class="nv">EX</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">If</span><span class="w"> </span><span class="nv">IO</span><span class="o">∊</span><span class="m">0</span><span class="w"> </span><span class="m">1</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">        </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="nv">IO</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">Else</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">        </span><span class="nv">EX</span><span class="kd">←</span><span class="nv">ArgumentException</span><span class="na">.</span><span class="nv">New</span><span class="s1">'IO must be 0 or 1'</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">        </span><span class="nv">EX</span><span class="w"> </span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">90</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">    </span><span class="bp">:</span><span class="nv">EndIf</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
<h5><code>⎕SIGNAL 0</code>: Reset error-related system constants</h5>
<p>If <code>Y</code> is a simple integer with the value 0, <code>⎕SIGNAL</code> does not interrupt execution, but merely returns the value 0. The side effect of calling <code>⎕SIGNAL 0</code> is to reset the values of <code>⎕DM</code>, <code>⎕DMX</code>, <code>⎕EN</code> and <code>⎕EXCEPTION</code> to their default values. <code>⎕SIGNAL 0</code> is the only form of <code>⎕SIGNAL</code> which can be used to reset the aforementioned system constants; including a left argument or using a name/value pair right argument of <code>⎕SIGNAL</code> will result in a <code>DOMAIN ERROR</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">÷</span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Divide</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span>
<span class="w">      </span><span class="o">÷</span><span class="m">0</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="nf">⎕DM</span><span class="w"> </span><span class="nf">⎕EN</span><span class="w"> </span><span class="nf">⎕DMX</span>
<span class="err">┌──────────────────────────────┬──┬─────────────────────────┐</span>
<span class="err">│┌────────────┬────────┬──────┐│</span><span class="m">11</span><span class="err">│</span><span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="w">   </span><span class="err">│</span>
<span class="err">││</span><span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="err">│</span><span class="w">      </span><span class="o">÷</span><span class="m">0</span><span class="err">│</span><span class="w">     </span><span class="o">∧</span><span class="err">││</span><span class="w">  </span><span class="err">│</span><span class="w"> </span><span class="nv">Message</span><span class="w">  </span><span class="nv">Divide</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="err">│</span>
<span class="err">│└────────────┴────────┴──────┘│</span><span class="w">  </span><span class="err">│</span><span class="w">                         </span><span class="err">│</span>
<span class="err">└──────────────────────────────┴──┴─────────────────────────┘</span>
<span class="w">      </span><span class="o">⊢</span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span>
<span class="w">      </span><span class="nf">⎕DM</span><span class="w"> </span><span class="nf">⎕EN</span><span class="w"> </span><span class="nf">⎕DMX</span>
<span class="err">┌┬─┬┐</span>
<span class="err">││</span><span class="m">0</span><span class="err">││</span>
<span class="err">└┴─┴┘</span>
</code></pre></div>
<h5>Further examples</h5>
<h5>Example 1</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'Hello'</span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">200</span>
<span class="nv">Hello</span>
<span class="w">      </span><span class="s1">'Hello'</span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">200</span>
<span class="w">     </span><span class="o">∧</span>
<span class="w">      </span><span class="nf">⎕DMX</span>
<span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">Hello</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">            </span>

<span class="w">      </span><span class="nf">⎕DM</span>
<span class="w"> </span><span class="nv">Hello</span><span class="w">        </span><span class="s1">'Hello'</span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">200</span><span class="w">       </span><span class="o">∧</span><span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)</span>
<span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span>
<span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)</span>
<span class="w">     </span><span class="o">∧</span>

<span class="w">      </span><span class="nf">⎕DMX</span>
<span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">    </span>

<span class="w">      </span><span class="nf">⎕DM</span>
<span class="w"> </span><span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span><span class="w">        </span><span class="nf">⎕SIGNAL</span><span class="o">⊂⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)</span><span class="w">       </span><span class="o">∧</span><span class="w"> </span>
</code></pre></div></p>
<h5>Example 2</h5>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)(</span><span class="s1">'Vendor'</span><span class="w"> </span><span class="s1">'Andy'</span><span class="p">)(</span><span class="s1">'Message'</span><span class="w"> </span><span class="s1">'My error'</span><span class="p">)</span>
<span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span><span class="bp">:</span><span class="w"> </span><span class="nv">My</span><span class="w"> </span><span class="nv">error</span>
<span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)(</span><span class="s1">'Vendor'</span><span class="w"> </span><span class="s1">'Andy'</span><span class="p">)(</span><span class="s1">'Message'</span><span class="w"> </span><span class="s1">'My error'</span><span class="p">)</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕DMX</span>
<span class="w"> </span><span class="nv">EM</span><span class="w">       </span><span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span><span class="w"> </span>
<span class="w"> </span><span class="nv">Message</span><span class="w">  </span><span class="nv">My</span><span class="w"> </span><span class="nv">error</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍪</span><span class="nf">⎕DMX</span><span class="na">.</span><span class="p">(</span><span class="nv">EN</span><span class="w"> </span><span class="nv">EM</span><span class="w"> </span><span class="nv">Vendor</span><span class="p">)</span>
<span class="w">       </span><span class="m">200</span><span class="w"> </span>
<span class="w"> </span><span class="nv">ERROR</span><span class="w"> </span><span class="m">200</span><span class="w"> </span>
<span class="w">      </span><span class="nv">Andy</span><span class="w"> </span>
</code></pre></div></p>
<p>Be aware of the following case, in which the argument has not been sufficiently nested:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span><span class="bp">:</span><span class="w"> </span><span class="nv">Unexpected</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">signalled</span><span class="w"> </span><span class="nf">⎕DMX</span><span class="w"> </span><span class="nv">specification</span>
<span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="o">⊂</span><span class="p">(</span><span class="s1">'EN'</span><span class="w"> </span><span class="m">200</span><span class="p">)</span>
<span class="w">     </span><span class="o">∧</span>
</code></pre></div></p>
</article>
<article id="system-functions-size">
<div class="heading-container"><h3 class="heading" id="system-functions-size-header">Size of Object</h3><div class="command">R←⎕SIZE Y</div></div>
<p><code>Y</code> must be a simple character scalar, vector or matrix, or a vector of character vectors containing a list of names. <code>R</code> is a simple integer vector of non-negative elements with the same length as the number of names in <code>Y</code>.</p>
<p>If the name in <code>Y</code> identifies an object with an active referent, the workspace required in bytes by that object is returned in the corresponding element of <code>R</code>.  Otherwise, 0 is returned in that element of <code>R</code>.</p>
<p>The result returned for an external variable is the space required to store the external array.  The result for a system constant, variable or function is 0.  The result returned for a GUI object gives the amount of workspace needed to store it, but excludes the space required for its children.</p>
<p>Note: Wherever possible, Dyalog APL <em>shares</em> the whole or part of a workspace object rather than generates a separate copy; however <code>⎕SIZE</code> reports the size as though nothing is shared. <code>⎕SIZE</code> also includes the space required for the interpreter's internal information about the object in question.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">FOO</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="m">10</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="nv">A</span><span class="kd">←</span><span class="o">⍳</span><span class="m">10</span>

<span class="w">      </span><span class="s1">'EXT/ARRAY'</span><span class="w"> </span><span class="nf">⎕XT</span><span class="s1">'E'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">E</span><span class="kd">←</span><span class="o">⍳</span><span class="m">20</span>

<span class="w">      </span><span class="nf">⎕SIZE</span><span class="w"> </span><span class="s1">'A'</span><span class="w"> </span><span class="s1">'FOO'</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'UND'</span>
<span class="m">28</span><span class="w"> </span><span class="m">76</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-sm">
<div class="heading-container"><h3 class="heading" id="system-functions-sm-header">Screen Map</h3><div class="command">⎕SM</div></div>
<p><code>⎕SM</code> is a system variable that defines a character-based user interface (as opposed to a graphical user interface).  In versions of Dyalog APL that support asynchronous terminals, <code>⎕SM</code> defines a <strong>form</strong> that is displayed on the <strong>USER SCREEN</strong>.  The implementation of <code>⎕SM</code> in "window" environments is compatible with these versions.  In Dyalog APL/X, <code>⎕SM</code> occupies its own separate window on the display, but is otherwise equivalent.  In versions of Dyalog APL with GUI support, <code>⎕SM</code> either occupies its own separate window (as in Dyalog APL/X) or, if it exists, uses the window assigned to the SM object.  This allows <code>⎕SM</code> to be used in a GUI application in conjunction with other GUI components.</p>
<p><code>⎕SM</code> has workspace scope.</p>
<p>In general <code>⎕SM</code> is a nested matrix containing between 3 and 13 columns.  Each row of <code>⎕SM</code> represents a <strong>field</strong>; each column a <strong>field attribute</strong>.</p>
<p>The columns have the following meanings:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Field Contents</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Field Position - Top Row</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Field Position - Left Column</td>
<td>N/A</td>
</tr>
<tr>
<td>4</td>
<td>Window Size - Rows</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>Window Size - Columns</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>Field Type</td>
<td>0</td>
</tr>
<tr>
<td>7</td>
<td>Behaviour</td>
<td>0</td>
</tr>
<tr>
<td>8</td>
<td>Video Attributes</td>
<td>0</td>
</tr>
<tr>
<td>9</td>
<td>Active Video Attributes</td>
<td><code>¯</code> 1</td>
</tr>
<tr>
<td>10</td>
<td>Home Element - Row</td>
<td>1</td>
</tr>
<tr>
<td>11</td>
<td>Home Element - Column</td>
<td>1</td>
</tr>
<tr>
<td>12</td>
<td>Scrolling Group - Vertical</td>
<td>0</td>
</tr>
<tr>
<td>13</td>
<td>Scrolling Group - Horizontal</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>With the exception of columns 1 and 8, all elements in <code>⎕SM</code> are integer scalar values.</p>
<p>Elements in column 1 (Field Contents) may be:</p>
<ul>
<li>A numeric scalar</li>
<li>A numeric vector</li>
<li>A 1-column numeric matrix</li>
<li>A character scalar</li>
<li>A character vector</li>
<li>A character matrix (rank 2)</li>
<li>A nested matrix defining a sub-form whose structure and contents must conform to that defined for <code>⎕SM</code> as a whole.  This definition is recursive.  Note however that a sub-form must be a matrix - a vector is not allowed.</li>
</ul>
<p>Elements in column 8 (Video Attributes) may be:</p>
<ul>
<li>An integer scalar that specifies the appearance of the entire field.</li>
<li>An integer array of the same shape as the field contents.  Each element specifies the appearance of the corresponding element in the field contents.</li>
</ul>
<h5>Screen Management (Async Terminals)</h5>
<p>Dyalog APL for UNIX systems on tty devices (async terminals or on terminal emulators) manages two screens; the SESSION screen and the USER screen.  If the SESSION screen is current, an assignment to <code>⎕SM</code> causes the display to switch to the USER screen and show the form defined by <code>⎕SM</code>.</p>
<p>Note that the RIDE does not directly support <code>⎕SM</code>, although it is possible to display <code>⎕SM</code> in the tty session to which a RIDE client is connected.</p>
<p>If the USER screen is current, any change in the value of <code>⎕SM</code> is immediately reflected by a corresponding change in the appearance of the display.  However, an assignment to <code>⎕SM</code> that leaves its value unchanged has no effect.</p>
<p>Dyalog APL automatically switches to the SESSION screen for default output, if it enters immediate input mode (6-space prompt), or through use of <code>⎕</code> or <code>⍞</code>.  This means that typing
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SM</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">expression</span>
</code></pre></div></p>
<p>in the APL session will cause the screen to switch first to the USER screen, display the form defined by <code>⎕SM</code>, and then switch back to the SESSION screen to issue the 6-space prompt.  This normally happens so quickly that all the user sees is a flash on the screen.To retain the USER screen in view it is necessary to issue a call to <code>⎕SR</code> or for APL to continue processing. e.g.</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SM</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">expression</span><span class="w">  </span><span class="p">⋄</span><span class="w">  </span><span class="nf">⎕SR</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>or
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SM</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">expression</span><span class="w">  </span><span class="p">⋄</span><span class="w">  </span><span class="nf">⎕DL</span><span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<h5>Screen Management (Window Versions)</h5>
<p>In Dyalog APL/X, and optionally in Dyalog APL/W, <code>⎕SM</code> is displayed in a separate <strong>USER WINDOW</strong> on the screen.  In an end-user application this may be the only Dyalog APL window.  However, during development, there will be a SESSION window, and perhaps EDIT and TRACE windows too.</p>
<p>The USER Window will only accept input during execution of <code>⎕SR</code>.  It is otherwise "output-only".  Furthermore, during the execution of <code>⎕SR</code> it is the only active window, and the SESSION, EDIT and TRACE Windows will not respond to user input.</p>
<h5>Screen Management (GUI Versions)</h5>
<p>In versions of Dyalog APL that provide GUI support, there is a special SM object that defines the position and size of the window to be associated with <code>⎕SM</code>.  This allows character-mode applications developed for previous versions of Dyalog APL to be migrated to and integrated with GUI environments without the need for a total re-write.</p>
<h5>Effect of Localisation</h5>
<p>Like all system variables (with the exception of <code>⎕TRAP</code>) <code>⎕SM</code> is subject to "pass-through localisation".  This means that a localised <code>⎕SM</code> assumes its value from the calling environment.  The localisation of <code>⎕SM</code> does not, of itself therefore, affect the appearance of the display.  However, reassignment of a localised <code>⎕SM</code> causes the new form to overlay rather than replace whatever forms are defined further down the stack.  The localisation of <code>⎕SM</code> thus provides a simple method of defining pop-up forms, help messages, etc.</p>
<p>The user may edit the form defined by <code>⎕SM</code> using the system function <code>⎕SR</code>.  Under the control of <code>⎕SR</code> the user may change the following elements in <code>⎕SM</code> which may afterwards be referenced to obtain the new values.</p>
<table>
<tbody>
<tr>
<td>Column 1</td>
<td>Field Contents</td>
</tr>
<tr>
<td>Column 10</td>
<td>Home Element - Row (by scrolling vertically)</td>
</tr>
<tr>
<td>Column 11</td>
<td>Home Element - Column (by scrolling horizontally)</td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-sr">
<div class="heading-container"><h3 class="heading" id="system-functions-sr-header">Screen Read</h3><div class="command">R←{X}⎕SR Y</div></div>
<p><code>⎕SR</code> is a system function that allows the user to edit or otherwise interact with the form defined by <code>⎕SM</code>.</p>
<p>In versions of Dyalog APL that support asynchronous terminals, if the current screen is the SESSION screen, <code>⎕SR</code> immediately switches to the USER SCREEN and displays the form defined by <code>⎕SM</code>.</p>
<p>In Dyalog APL/X, <code>⎕SR</code> causes the input cursor to be positioned in the USER window.  During execution of <code>⎕SR</code>, only the USER Window defined by <code>⎕SM</code> will accept input and respond to the keyboard or mouse.  The SESSION and any EDIT and TRACE Windows that may appear on the display are dormant.</p>
<p>In versions of Dyalog APL with GUI support, a single SM object may be defined.  This object defines the size and position of the <code>⎕SM</code> window, and allows <code>⎕SM</code> to be used in conjunctions with other GUI components.  In these versions, <code>⎕SR</code> acts as a superset of <code>⎕DQ</code> (see <a class="internal-link" href="#system-functions-dq">Section 4.6.31</a>) but additionally controls the character-based user interface defined by <code>⎕SM</code>.</p>
<p><code>Y</code> is an integer vector that specifies the fields which the user may visit.  In versions with GUI support, <code>Y</code> may additionally contain the names of GUI objects with which the user may also interact.</p>
<p>If specified, <code>X</code> may be an enclosed vector of character vectors defining <code>EXIT_KEYS</code> or a 2-element nested vector defining <code>EXIT_KEYS</code> and the <code>INITIAL_CONTEXT</code>.</p>
<p>The result <code>R</code> is the <code>EXIT_CONTEXT</code>.</p>
<p>Thus the 3 uses of <code>⎕SR</code> are:
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nv">EXIT_CONTEXT</span><span class="kd">←</span><span class="nf">⎕SR</span><span class="w"> </span><span class="nv">FIELDS</span>
<span class="w"> </span>
<span class="w">     </span><span class="nv">EXIT_CONTEXT</span><span class="kd">←</span><span class="p">(</span><span class="o">⊂</span><span class="nv">EXIT_KEYS</span><span class="p">)</span><span class="nf">⎕SR</span><span class="w"> </span><span class="nv">FIELDS</span>
<span class="w"> </span>
<span class="w">     </span><span class="nv">EXIT_CONTEXT</span><span class="kd">←</span><span class="p">(</span><span class="nv">EXIT_KEYS</span><span class="p">)(</span><span class="nv">INITIAL_CONTEXT</span><span class="p">)</span><span class="nf">⎕SR</span><span class="w"> </span><span class="nv">FIELDS</span>
</code></pre></div></p>
<h5>FIELDS</h5>
<p>If an element of <code>Y</code> is an integer scalar, it specifies a field as the index of a row in <code>⎕SM</code> (if <code>⎕SM</code> is a vector it is regarded as having 1 row).</p>
<p>If an element of <code>Y</code> is an integer vector, it specifies a sub-field.  The first element in <code>Y</code> specifies the top-level field as above.  The next element is used to index a row in the form defined by <code>⊃⎕SM[Y[1];1]</code> and so forth.</p>
<p>If an element of <code>Y</code> is a character scalar or vector, it specifies the name of a top-level GUI object with which the user may also interact.  Such an object must be a "top-level" object, i.e. the <code>Root</code> object ('<code>.'</code>) or a <code>Form</code> or pop-up <code>Menu</code>.  This feature is implemented ONLY in versions of Dyalog APL with GUI support.</p>
<h5>EXIT_KEYS</h5>
<p>Each element of <code>EXIT_KEYS</code> is a 2-character code from the Input Translate Table for the keyboard.  If the user presses one of these keys, <code>⎕SR</code> will terminate and return a result.</p>
<p>If <code>EXIT_KEYS</code> is not specified, it defaults to:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'ER'</span><span class="w"> </span><span class="s1">'EP'</span><span class="w"> </span><span class="s1">'QT'</span>
</code></pre></div></p>
<p>which (normally) specifies <enter>, <esc> and <shift+esc>.</shift+esc></esc></enter></p>
<h5>INITIAL_CONTEXT</h5>
<p>This is a vector of between 3 and 6 elements with the following meanings and defaults:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Initial Field</td>
<td>N/A</td>
</tr>
<tr>
<td>2</td>
<td>Initial Cursor Position - Row</td>
<td>N/A</td>
</tr>
<tr>
<td>3</td>
<td>Initial Cursor Position - Col</td>
<td>N/A</td>
</tr>
<tr>
<td>4</td>
<td>Initial Keystroke</td>
<td><code>''</code></td>
</tr>
<tr>
<td>5</td>
<td>(ignored)</td>
<td>N/A</td>
</tr>
<tr>
<td>6</td>
<td>Changed Field Flags</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Structure of  INITIAL_CONTEXT</p>
<p><code>INITIAL_CONTEXT[1]</code> specifies the field in which the cursor is to be placed.  It is an integer scalar or vector, and must be a member of <code>Y</code>.  It must not specify a field which has <code>BUTTON</code> behaviour (64), as the cursor is not allowed to enter such a field.</p>
<p><code>INITIAL_CONTEXT[2 3]</code> are integer scalars which specify the initial cursor position within the field in terms of row and column numbers.</p>
<p><code>INITIAL_CONTEXT[4]</code> is either empty, or a 2-element character vector specifying the initial keystroke as a code from the Input Translate Table for the keyboard.</p>
<p><code>INITIAL_CONTEXT[5]</code> is ignored.  It is included so that the <code>EXIT_CONTEXT</code> result of one call to <code>⎕SR</code> can be used as the <code>INITIAL_CONTEXT</code> to a subsequent call.</p>
<p><code>INITIAL_CONTEXT[6]</code> is a Boolean scalar or vector the same length as <code>Y</code>.  It specifies which of the fields in <code>Y</code> has been modified by the user.</p>
<h5>EXIT_CONTEXT</h5>
<p>The result <code>EXIT_CONTEXT</code> is a 6 or 9-element vector whose first 6 elements have the same structure as the <code>INITIAL_CONTEXT</code>.  Elements 7-9 <strong>only</strong> apply to those versions of Dyalog APL that provide mouse support.</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Final Field</td>
</tr>
<tr>
<td>2</td>
<td>Final Cursor Position - Row</td>
</tr>
<tr>
<td>3</td>
<td>Final Cursor Position - Col</td>
</tr>
<tr>
<td>4</td>
<td>Terminating Keystroke</td>
</tr>
<tr>
<td>5</td>
<td>Event Code</td>
</tr>
<tr>
<td>6</td>
<td>Changed Field Flags</td>
</tr>
<tr>
<td>7</td>
<td>Pointer Field</td>
</tr>
<tr>
<td>8</td>
<td>Pointer Position - Row</td>
</tr>
<tr>
<td>9</td>
<td>Pointer Position - Col</td>
</tr>
</tbody>
</table>
<p>Structure of the Result of <code>⎕SR</code></p>
<p><code>EXIT_CONTEXT[1]</code> contains the field in which the cursor was when <code>⎕SR</code> terminated due to the user pressing an exit key or due to an event occurring.  It is an integer scalar or vector, and a member of <code>Y</code>.</p>
<p><code>EXIT_CONTEXT[2 3]</code> are integer scalars which specify the row and column position of the cursor within the field <code>EXIT_CONTEXT[1]</code> when <code>⎕SR</code> terminated.</p>
<p><code>EXIT_CONTEXT[4]</code> is a 2-element character vector specifying the last keystroke pressed by the user before <code>⎕SR</code> terminated.  Unless <code>⎕SR</code> terminated due to an event, <code>EXIT_CONTEXT[4]</code> will contain one of the exit keys defined by <code>X</code>.  The keystroke is defined in terms of an Input Translate Table code.</p>
<p><code>EXIT_CONTEXT[5]</code> contains the <strong>sum</strong> of the event codes that caused <code>⎕SR</code> to terminate.  For example, if the user pressed a mouse button on a <code>BUTTON</code> field (event code 64) <strong>and</strong> the current field has <code>MODIFIED</code> behaviour (event code 2) <code>EXIT_CONTEXT[5]</code> will have the value 66.</p>
<p><code>EXIT_CONTEXT[6]</code> is a Boolean scalar or vector the same length as <code>Y</code>.  It specifies which of the fields in <code>Y</code> has been modified by the user during <strong>this</strong> <code>⎕SR</code>, ORed with <code>INITIAL_CONTEXT[6]</code>.  Thus if the <code>EXIT_CONTEXT</code> of one call to <code>⎕SR</code> is fed back as the <code>INITIAL_CONTEXT</code> of the next, <code>EXIT_CONTEXT[6]</code> records the fields changed since the start of the process.</p>
<h5>EXIT_CONTEXT (Window Versions)</h5>
<p><code>⎕SR</code> returns a 9-element result <strong>ONLY</strong> if it is terminated by the user pressing a mouse button.  In this case:</p>
<p><code>EXIT_CONTEXT[7]</code> contains the field over which the mouse pointer was positioned when the user pressed a button. It is an integer scalar or vector, and a member of <code>Y</code>.</p>
<p><code>EXIT_CONTEXT[8 9]</code> are integer scalars which specify the row and column position of the mouse pointer within the field <code>EXIT_CONTEXT[7]</code> when <code>⎕SR</code> terminated.</p>
<h5>Note</h5>
<p>This function is disabled and instead generates a <code>DOMAIN ERROR</code> if the RIDE_SPAWNED parameter is non-zero. This is designed to prevent it being invoked from a RIDE session which does not support this type of user interface. For further details, see the <em>RIDE User Guide</em>.</p>
</article>
<article id="system-functions-src">
<div class="heading-container"><h3 class="heading" id="system-functions-src-header">Source</h3><div class="command">R←⎕SRC Y</div></div>
<p><code>⎕SRC</code> returns the script that defines the scripted object   <code>Y</code>.</p>
<p><code>Y</code> must be a reference to a scripted object. Scripted objects include Classes, Interfaces and scripted Namespaces.</p>
<p><code>R</code> is a vector of character vectors containing the script that was used to define <code>Y</code>.</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">ed</span><span class="w"> </span><span class="o">○</span><span class="nv">MyClass</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span><span class="w"> </span><span class="nv">arg</span>
<span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">public</span><span class="w"> </span><span class="nv">shared</span>
<span class="nv">r</span><span class="kd">←</span><span class="m">1</span><span class="o">+</span><span class="nv">arg</span>
<span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span>

<span class="w">      </span><span class="nv">z</span><span class="kd">←</span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">      </span><span class="o">⍴</span><span class="nv">z</span>
<span class="m">6</span>
<span class="w">      </span><span class="o">⍴</span><span class="na">¨</span><span class="nv">z</span>
<span class="w"> </span><span class="m">14</span><span class="w">  </span><span class="m">15</span><span class="w">  </span><span class="m">27</span><span class="w">  </span><span class="m">13</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">9</span><span class="w"> </span>
<span class="w">      </span><span class="o">⍪</span><span class="nv">z</span>
<span class="w"> </span><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span><span class="w"> </span><span class="nv">arg</span>
<span class="w">       </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">public</span><span class="w"> </span><span class="nv">shared</span>
<span class="w">       </span><span class="nv">r</span><span class="kd">←</span><span class="m">1</span><span class="o">+</span><span class="nv">arg</span>
<span class="w">     </span><span class="bp">∇</span>
<span class="w"> </span><span class="bp">:</span><span class="nv">EndClass</span>
</code></pre></div></p>
<p>Note: The only two ways to permanently alter the source of a scripted object are to change the object in the editor, or by refixing it using <code>⎕FIX</code>. A useful technique to ensure that a scripted object is in sync with its source is to <code>⎕FIX ⎕SRC ref</code>, where <code>ref</code> is an object reference..</p>
</article>
<article id="system-functions-stack">
<div class="heading-container"><h3 class="heading" id="system-functions-stack-header">State Indicator Stack</h3><div class="command">R←⎕STACK</div></div>
<p><code>R</code> is a two-column matrix, with one row per entry in the state indicator.</p>
<p>Column 1 :<code>⎕OR</code> form of user defined functions or operators on the state indicator.  Space (<code>⎕UCS 32</code>) for entries that are not user defined functions or operators.</p>
<p>Column 2 :Indication of the type of the item on the stack.</p>
<table>
<tbody>
<tr>
<td><code>space</code></td>
<td>user defined function or operator</td>
</tr>
<tr>
<td><code>⍎</code></td>
<td>execute level</td>
</tr>
<tr>
<td><code>⎕</code></td>
<td>evaluated input</td>
</tr>
<tr>
<td><code>*</code></td>
<td>desk calculator level</td>
</tr>
<tr>
<td><code>⎕DQ</code></td>
<td>in callback function</td>
</tr>
<tr>
<td><code>other</code></td>
<td>primitive operator</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.PLUS[2]*</span>
<span class="na">.</span>
<span class="c1">#.MATDIV[4]</span>
<span class="c1">#.FOO[1]*</span>
<span class="o">⍎</span>

<span class="w">      </span><span class="nf">⎕STACK</span>
<span class="w">         </span><span class="o">*</span>
<span class="bp">∇</span><span class="nv">PLUS</span>
<span class="w">         </span><span class="na">.</span>
<span class="bp">∇</span><span class="nv">MATDIV</span>
<span class="w">         </span><span class="o">*</span>
<span class="bp">∇</span><span class="nv">FOO</span>
<span class="w">         </span><span class="o">⍎</span>
<span class="w">         </span><span class="o">*</span>

<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕STACK</span>
<span class="m">8</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="p">(</span><span class="o">⍴</span><span class="nf">⎕LC</span><span class="p">)</span><span class="o">=</span><span class="m">1</span><span class="o">↑⍴</span><span class="nf">⎕STACK</span>
<span class="m">0</span>
</code></pre></div>
<p>Pendent defined functions and operators may be edited in Dyalog APL with no resulting SI damage.  However, only the visible definition is changed; the pendent version on the stack is retained until its execution is complete.  When the function or operator is displayed, only the visible version is seen.  Hence <code>⎕STACK</code> is a tool which allows the user to display the form of the actual function or operator being executed.</p>
<p class="example">Example</p>
<p>To display the version of <code>MATDIV</code> currently pendent on the stack:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊃</span><span class="nf">⎕STACK</span><span class="sr">[</span><span class="m">4</span><span class="sr">;</span><span class="m">1</span><span class="sr">]</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="w"> </span><span class="nv">MATDIV</span><span class="w"> </span><span class="nv">B</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ Divide matrix A by matrix B</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">C</span><span class="kd">←</span><span class="nv">A</span><span class="o">⌹</span><span class="nv">B</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ Check accuracy</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="nv">D</span><span class="kd">←</span><span class="o">⌊</span><span class="m">0.5</span><span class="o">+</span><span class="nv">A</span><span class="w"> </span><span class="nv">PLUS</span><span class="na">.</span><span class="nv">TIMES</span><span class="w"> </span><span class="nv">B</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
</article>
<article id="system-functions-state">
<div class="heading-container"><h3 class="heading" id="system-functions-state-header">State of Object</h3><div class="command">R←⎕STATE Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of an APL object or a system variable. The result returned is a nested vector of 4 elements as described below. <code>⎕STATE</code> supplies information about shadowed or localised objects that is otherwise unobtainable.</p>
<table>
<tbody>
<tr>
<td><code>1⊃R</code></td>
<td>Boolean vector, element set to 1 if and only if this level shadows <code>Y</code> . Note: <code>(⍴1⊃R)=⍴⎕LC</code></td>
</tr>
<tr>
<td><code>2⊃R</code></td>
<td>Numeric vector giving the stack state of this name as it entered this level. Note: <code>(⍴2⊃R)=⍴⎕LC</code> 0=not on stack 1=suspended 2=pendent (may also be suspended) 3=active (may also be pendent or suspended)</td>
</tr>
<tr>
<td><code>3⊃R</code></td>
<td>Numeric vector giving the name classification of <code>Y</code> as it entered this level. Note: <code>(⍴3⊃R)=+/1⊃R</code></td>
</tr>
<tr>
<td><code>4⊃R</code></td>
<td>Vector giving the contents of <code>Y</code> before it was shadowed at this level. Note: <code>(⍴4⊃R)=+/0≠3⊃R</code></td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FMT</span><span class="na">∘</span><span class="nf">⎕OR</span><span class="na">¨</span><span class="s1">'FN1'</span><span class="w"> </span><span class="s1">'FN2'</span><span class="w"> </span><span class="s1">'FN3'</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">FN1</span><span class="sr">;</span><span class="nv">A</span><span class="sr">;</span><span class="nv">B</span><span class="sr">;</span><span class="nv">C</span><span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">FN2</span><span class="sr">;</span><span class="nv">A</span><span class="sr">;</span><span class="nv">C</span><span class="w">               </span><span class="bp">∇</span><span class="w"> </span><span class="nv">FN3</span><span class="sr">;</span><span class="nv">A</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">A</span><span class="kd">←</span><span class="m">1</span><span class="w">        </span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">A</span><span class="kd">←</span><span class="s1">'HELLO'</span><span class="w">         </span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="nv">A</span><span class="kd">←</span><span class="m">100</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">B</span><span class="kd">←</span><span class="m">2</span><span class="w">        </span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">B</span><span class="kd">←</span><span class="s1">'EVERYONE'</span><span class="w">      </span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="na">∘</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">C</span><span class="kd">←</span><span class="m">3</span><span class="w">        </span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">C</span><span class="kd">←</span><span class="s1">'HOW ARE YOU?'</span><span class="w">      </span><span class="bp">∇</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">FN2</span><span class="w">        </span><span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">  </span><span class="nv">FN3</span>
<span class="w">    </span><span class="bp">∇</span><span class="w">                </span><span class="bp">∇</span>

<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FN3[2]*</span>
<span class="c1">#.FN2[4]</span>
<span class="c1">#.FN1[4]</span>

<span class="w">      </span><span class="nf">⎕STATE</span><span class="w"> </span><span class="s1">'A'</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w">   </span><span class="nv">HELLO</span><span class="w">  </span><span class="m">1</span>

<span class="w">       </span><span class="nf">⎕FMT</span><span class="na">∘</span><span class="nf">⎕OR</span><span class="na">¨</span><span class="s1">'foo'</span><span class="w"> </span><span class="s1">'goo'</span>
<span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">foo</span><span class="sr">;</span><span class="nf">⎕IO</span><span class="w">       </span><span class="bp">∇</span><span class="w"> </span><span class="nv">goo</span><span class="sr">;</span><span class="nf">⎕IO</span><span class="w">     </span>
<span class="w"> </span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">0</span><span class="w">    </span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕IO</span><span class="kd">←</span><span class="m">1</span><span class="w">       </span>
<span class="w"> </span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">goo</span><span class="w">      </span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕STATE</span><span class="s1">'⎕IO'</span><span class="w"> </span>
<span class="w">      </span><span class="bp">∇</span><span class="w">               </span><span class="bp">∇</span><span class="w">             </span>

<span class="w">       </span><span class="nv">foo</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">¯1</span><span class="w"> </span><span class="m">¯1</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>
</code></pre></div>
</article>
<article id="system-functions-set-stop">
<div class="heading-container"><h3 class="heading" id="system-functions-set-stop-header">Set Stop</h3><div class="command">{R}←X ⎕STOP Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.  <code>X</code> must be a simple non-negative integer scalar or vector.  <code>R</code> is a simple integer vector of non-negative elements.  <code>X</code> identifies the numbers of lines in the function or operator named by <code>Y</code> on which a stop control is to be placed.  Numbers outside the range of line numbers in the function or operator (other than 0) are ignored.  The number 0 indicates that a stop control is to be placed immediately prior to exit from the function or operator.  If <code>X</code> is empty, all existing stop controls are cancelled.  The value of <code>X</code> is independent of <code>⎕IO</code>.</p>
<p><code>R</code> is a vector of the line numbers on which a stop control has been placed in ascending order.  The result is suppressed unless it is explicitly used or assigned.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>Existing stop controls in the function or operator named by <code>Y</code> are cancelled before new stop controls are set:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⊢</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">1</span>
</code></pre></div></p>
<p>All stop controls may be cancelled by giving <code>X</code> an empty vector:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="s1">''</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">0</span>

<span class="w">      </span><span class="o">⍴</span><span class="no">⍬</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">0</span>
</code></pre></div></p>
<p>Attempts to set stop controls in a locked function or operator are ignored.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕LOCK</span><span class="s1">'FOO'</span>

<span class="w">      </span><span class="o">⊢</span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="s1">'FOO'</span>
</code></pre></div></p>
<p>The effect of <code>⎕STOP</code> when a function or operator is invoked is to suspend execution at the beginning of any line in the function or operator on which a stop control is placed immediately before that line is executed, and immediately before exiting from the function or operator if a stop control of 0 is set.  Execution may be resumed by a branch expression.  A stop control interrupt (1001) may also be trapped - see <a class="internal-link" href="#system-functions-trap">Section 4.6.164</a>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕FX</span><span class="s1">'R←FOO'</span><span class="w"> </span><span class="s1">'R←10'</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕STOP</span><span class="s1">'FOO'</span>

<span class="w">      </span><span class="nv">FOO</span>
<span class="nv">FOO</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>

<span class="w">      </span><span class="nv">R</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nv">R</span>
<span class="w">      </span><span class="err">^</span>

<span class="w">      </span><span class="kd">→</span><span class="m">1</span>
<span class="nv">FOO</span><span class="sr">[</span><span class="m">0</span><span class="sr">]</span>

<span class="w">      </span><span class="nv">R</span>
<span class="m">10</span>

<span class="w">      </span><span class="kd">→</span><span class="nf">⎕LC</span>
<span class="m">10</span>
</code></pre></div>
</article>
<article id="system-functions-query-stop">
<div class="heading-container"><h3 class="heading" id="system-functions-query-stop-header">Query Stop</h3><div class="command">R←⎕STOP Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.  <code>R</code> is a simple non-negative integer vector of the line numbers of the function or operator named by <code>Y</code> on which stop controls are set, shown in ascending order.  The value 0 in <code>R</code> indicates that a stop control is set immediately prior to exit from the function or operator.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕STOP</span><span class="s1">'FOO'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-set-access-control">
<div class="heading-container"><h3 class="heading" id="system-functions-set-access-control-header">Set Access Control</h3><div class="command">R←X ⎕SVC Y</div></div>
<p>This system function sets access control on one or more shared variables.</p>
<p><code>Y</code> is a character scalar, vector, or matrix containing names of shared variables.  Each name may optionally be paired with its surrogate.  If so, the surrogate must be separated from the name by at least one space.</p>
<p><code>X</code> may be a 4-element Boolean vector which specifies the access control to be applied to all of the shared variables named in <code>Y</code>.  Alternatively, <code>X</code> may be a 4-column Boolean matrix whose rows specify the access control for the corresponding name in <code>Y</code>.  <code>X</code> may also be a scalar or a 1-element vector.  If so, it treated as if it were a 4-element vector with the same value in each element.</p>
<p>Each shared variable has a current access control vector which is a 4-element Boolean vector.  A 1 in each of the four positions has the following impact :</p>
<table>
<tbody>
<tr>
<td><code>[1]</code></td>
<td>You cannot <strong>set</strong> a new value for the shared variable until after an intervening use or set by your partner.</td>
</tr>
<tr>
<td><code>[2]</code></td>
<td>Your partner cannot <strong>set</strong> a new value for the shared variable until after an intervening use or set by you.</td>
</tr>
<tr>
<td><code>[3]</code></td>
<td>You cannot <strong>use</strong> the value of the shared variable until after an intervening set by your partner.</td>
</tr>
<tr>
<td><code>[4]</code></td>
<td>Your partner cannot <strong>use</strong> the value of the shared variable until after an intervening set by you.</td>
</tr>
</tbody>
</table>
<p>The effect of <code>⎕SVC</code> is to reset the access control vectors for each of the shared variables named in <code>Y</code> by OR-ing the values most recently specified by your partner with the values in <code>X</code>.  This means that you cannot reset elements of the control vector which your partner has set to 1.</p>
<p>Note that the initial value of your partner's access control vector is normally 0 0 0 0.  However, if it is a non-APL client application that has established a hot DDE link, its access control vector is defined to be 1 0 0 1.  This inhibits either partner from setting the value of the shared variable twice, without an intervening use (or set) by the other.  This prevents loss of data which is deemed to be desirable from the nature of the link.  (An application that requests a hot link is assumed to require every value of the shared variable, and not to miss any).  Note that APL's way of inhibiting another application from setting the value twice (without an intervening use) is to delay the acknowledgement of the DDE message containing the second value until the variable has been used by the APL workspace.  An application that waits for an acknowledgement will therefore hang until this happens.  An application that does not wait will carry on obliviously.</p>
<p>The result <code>R</code> is a Boolean vector or matrix, corresponding to the structure of <code>X</code>, which contains the new access control settings.  If <code>Y</code> refers to a name which is not a shared variable, or if the surrogate name is mis-spelt, the corresponding value in <code>R</code> is <code>4⍴0</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕SVC</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕SVC</span><span class="w"> </span><span class="s1">'X EXTNAME'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴</span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕SVC</span><span class="w"> </span><span class="o">↑</span><span class="s1">'ONE'</span><span class="w"> </span><span class="s1">'TWO'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-query-access-control">
<div class="heading-container"><h3 class="heading" id="system-functions-query-access-control-header">Query Access Control</h3><div class="command">R←⎕SVC Y</div></div>
<p>This system function queries the access control on one or more shared variables.</p>
<p><code>Y</code> is a character scalar, vector, or matrix containing names of shared variables.  Each name may optionally be paired with its surrogate.  If so, the surrogate must be separated from the name by at least one space.</p>
<p>If <code>Y</code> specifies a single name, the result <code>R</code> is a Boolean vector containing the current effective access control vector.  If <code>Y</code> is a matrix of names, <code>R</code> is a Boolean matrix whose rows contain the current effective access control vectors for the corresponding row in <code>Y</code>.</p>
<p>For further information, see the preceding section on setting the access control vector.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SVC</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-shared-variable-offer">
<div class="heading-container"><h3 class="heading" id="system-functions-shared-variable-offer-header">Shared Variable Offer</h3><div class="command">R←X ⎕SVO Y</div></div>
<p>This system function offers to share one or more variables with another APL workspace or with another application.  Shared variables are implemented using Dynamic Data Exchange (<strong>DDE</strong>) and may be used to communicate with any other application that supports this protocol.  See <em>Interface Guide</em> for further details.</p>
<p><code>Y</code> is a character scalar, vector or matrix.  If it is a vector it contains a name and optionally an external name or surrogate.  The first name is the name used internally in the current workspace.  The external name is the name used to make the connection with the partner and, if specified, must be separated from the internal name by one or more blanks.  If the partner is another application, the external name corresponds to the DDE <strong>item</strong> specified by that application.  If the external name is omitted, the internal name is used instead.  The internal name must be a valid APL name and be either undefined or be the name of a variable.  There are no such restrictions on the content of the external name.</p>
<p>Instead of an external name, <code>Y</code> may contain the special symbol <code>'⍎'</code> separated from the (internal) name by a blank.  This is used to implement a mechanism for sending <code>DDE_EXECUTE</code> messages, and is described at the end of this section.</p>
<p>If <code>Y</code> is a scalar, it specifies a single 1-character name.  If <code>Y</code> is a matrix, each row of <code>Y</code> specifies a name and an optional external name as for the vector case.</p>
<p>The left argument <code>X</code> is a character vector or matrix.  If it is a vector, it contains a string that defines the <strong>protocol</strong>, the <strong>application</strong> to which the shared variable is to be connected, and the <strong>topic</strong> of the conversation.  These three components are separated by the characters <code>':'</code> and <code>'|'</code> respectively.  The protocol is currently always <code>'DDE'</code>, but future implementations of Dyalog APL may support additional communications protocols if applicable.  If <code>Y</code> specifies more than one name, <code>X</code> may be a vector or a matrix with one row per row in <code>Y</code>.</p>
<p>If the shared variable offer is a general one (server), <code>X</code>, or the corresponding row of <code>X</code>, should just contain <code>'DDE:'</code>. In this case, Dyalog automatically defines the application name and topic to be <code>dyalog</code> and <code>⎕WSID</code> respectively.</p>
<p>The result <code>R</code> is a numeric scalar or vector with one element for each name in <code>Y</code> and indicates the "degree of coupling".  A value of 2 indicates that the variable is fully coupled (via a warm or hot DDE link) with a shared variable in another APL workspace, or with a DDE item in another application.  A value of 1 indicates that there is no connection, or that the second application rejected a warm link.  In this case, a transfer of data may have taken place (via a cold link) but the connection is no longer open.  Effectively, APL treats an application that insists on a cold link as if it immediately retracts the sharing after setting or using the value, whichever is appropriate.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'DDE:'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">1</span>

<span class="w">      </span><span class="s1">'DDE:'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'X SALES_92'</span>
<span class="m">1</span>

<span class="w">      </span><span class="s1">'DDE:'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="o">↑</span><span class="s1">'X SALES_92'</span><span class="w"> </span><span class="s1">'COSTS_92'</span>
<span class="m">1</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="s1">'DDE:DYALOG|SERV_WS'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">2</span>

<span class="w">      </span><span class="s1">'DDE:EXCEL|SHEET1'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'DATA R1C1:R10C12'</span>
<span class="m">2</span>
</code></pre></div>
<p>A special syntax is used to provide a mechanism for sending <code>DDE_EXECUTE</code> messages to another application.  This case is identified by specifying the <code>'⍎'</code> symbol in place of the external name.  The subsequent assignment of a character vector to a variable shared with the external name of <code>'⍎'</code> causes the value of the variable to be transmitted in the form of a <code>DDE_EXECUTE</code> message.  The value of the variable is then reset to 1 or 0 corresponding to a positive or negative acknowledgement from the partner.  In most (if not all) applications, commands transmitted in <code>DDE_EXECUTE</code> messages must be enclosed in square brackets <code>[]</code>.  For details, see the relevant documentation for the external application.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'DDE:EXCEL|SYSTEM'</span><span class="w"> </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'X ⍎'</span>
<span class="m">2</span>

<span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="s1">'[OPEN("c:\mydir\mysheet.xls")]'</span>
<span class="w">      </span><span class="nv">X</span>
<span class="m">1</span>

<span class="w">      </span><span class="nv">X</span><span class="kd">←</span><span class="s1">'[SELECT("R1C1:R5C10")]'</span>
<span class="w">      </span><span class="nv">X</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-query-degree-of-coupling">
<div class="heading-container"><h3 class="heading" id="system-functions-query-degree-of-coupling-header">Query Degree of Coupling</h3><div class="command">R←⎕SVO Y</div></div>
<p>This system function returns the current degree of coupling for one or more shared variables.</p>
<p><code>Y</code> is a character scalar, vector or matrix.  If it is a vector it contains a shared variable name and optionally its external name or surrogate separated from it by one of more blanks.</p>
<p>If <code>Y</code> is a scalar, it specifies a single 1-character name.  If <code>Y</code> is a matrix, each row of <code>Y</code> specifies a name and an optional external name as for the vector case.</p>
<p>If <code>Y</code> specifies a single name, the result <code>R</code> is a 1-element vector whose value 0, 1 or 2 indicates its current degree of coupling.  If <code>Y</code> specifies more than one name, <code>R</code> is a vector whose elements indicate the current degree of coupling of the variable specified by the corresponding row in <code>Y</code>.  A value of 2 indicates that the variable is fully coupled (via a warm or hot DDE link) with a shared variable in another APL workspace, or with a DDE item in another application.  A value of 1 indicates that you have offered the variable but there is no such connection, or that the second application rejected a warm link.  In this case, a transfer of data may have taken place (via a cold link) but the connection is no longer open.  A value of 0 indicates that the name is not a shared variable.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">2</span>
<span class="w">      </span><span class="nf">⎕SVO</span><span class="w"> </span><span class="o">↑</span><span class="s1">'X SALES'</span><span class="w"> </span><span class="s1">'Y'</span><span class="w"> </span><span class="s1">'JUNK'</span>
<span class="m">2</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-svq">
<div class="heading-container"><h3 class="heading" id="system-functions-svq-header">Shared Variable Query</h3><div class="command">R←⎕SVQ Y</div></div>
<p>This system function is implemented for compatibility with other versions of APL but currently performs no useful function.  Its purpose is to obtain a list of outstanding shared variable offers made to you, to which you have not yet responded.</p>
<p>Using DDE as the communication protocol, it is not possible to implement <code>⎕SVQ</code> effectively.</p>
</article>
<article id="system-functions-svr">
<div class="heading-container"><h3 class="heading" id="system-functions-svr-header">Shared Variable Retract Offer</h3><div class="command">R←⎕SVR Y</div></div>
<p>This system function terminates communication via one or more shared variables, or aborts shared variable offers that have not yet been accepted.</p>
<p><code>Y</code> is a character scalar, vector or matrix.  If it is a vector it contains a shared variable name and optionally its external name or surrogate separated from it by one of more blanks.  If <code>Y</code> is a scalar, it specifies a single 1-character name.  If <code>Y</code> is a matrix, each row of <code>Y</code> specifies a name and an optional external name as for the vector case.</p>
<p>The result <code>R</code> is vector whose length corresponds to the number of names specified by Y, indicating the level of sharing of each variable after retraction.</p>
<p>See <a class="internal-link" href="#system-functions-svs">Section 4.6.150</a> for further information on the possible states of a shared variable.</p>
</article>
<article id="system-functions-svs">
<div class="heading-container"><h3 class="heading" id="system-functions-svs-header">Shared Variable State</h3><div class="command">R←⎕SVS Y</div></div>
<p>This system function returns the current state of one or more shared variables.</p>
<p><code>Y</code> is a character scalar, vector or matrix.  If it is a vector it contains a shared variable name and optionally its external name or surrogate separated from it by one of more blanks.  If <code>Y</code> is a scalar, it specifies a single 1-character name.  If <code>Y</code> is a matrix, each row of <code>Y</code> specifies a name and an optional external name as for the vector case.</p>
<p>If <code>Y</code> specifies a single name, the result <code>R</code> is a 4-element vector indicating its current state.  If <code>Y</code> specifies more than one name, <code>R</code> is a matrix whose rows indicate the current state of the variable specified by the corresponding row in <code>Y</code>.</p>
<p>There are four possible shared variable states:</p>
<table>
<tbody>
<tr>
<td><code>0 0 1 1</code></td>
<td>means that you and your partner are both aware of the current value, and neither has since reset it.  This is also the initial value of the state when the link is first established.</td>
</tr>
<tr>
<td><code>1 0 1 0</code></td>
<td>means that you have reset the shared variable and your partner has not yet used it.  This state can only occur if both partners are APL workspaces.</td>
</tr>
<tr>
<td><code>0 1 0 1</code></td>
<td>means that your partner has reset the shared variable but that you have not yet used it.</td>
</tr>
<tr>
<td><code>0 0 0 0</code></td>
<td>the name is not that of a shared variable</td>
</tr>
</tbody>
</table>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕SVS</span><span class="w"> </span><span class="s1">'X'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span>

<span class="w">      </span><span class="nf">⎕SVS</span><span class="w"> </span><span class="o">↑</span><span class="s1">'X SALES'</span><span class="w"> </span><span class="s1">'Y'</span><span class="w"> </span><span class="s1">'JUNK'</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span>
<span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span>
<span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
</article>
<article id="system-functions-talloc">
<div class="heading-container"><h3 class="heading" id="system-functions-talloc-header">Allocate Token Range</h3><div class="command">{R}←{X} ⎕TALLOC Y</div></div>
<p><code>Y</code> is either a single integer or a 2-element vector. The first (or only) item in <code>Y</code> is 0, 1, 2 or ¯1 and indicates the type of operation to perform. If it is 1, then the optional second item is a character vector.</p>
<p>The optional left argument  <code>X</code> identifies an existing allocated range of token numbers <code>n</code>. <code>X</code> must be a scalar greater than or equal to <code>n</code>, but must be less than <code>n+1</code>.</p>
<h5>Allocation (First element of <code>Y</code> is 1)</h5>
<p>If the first element of <code>Y</code> is 1,  the result <code>R</code> is a positive integer that identifies a range of numbers that may be used as token types for <code>⎕TPUT</code> and <code>⎕TGET</code>. That range is defined as the set of floating-point numbers between <code>R</code> and <code>R+1</code> (but not the integer end-points). Negated values of these number may also be used.</p>
<p>In this case, the optional <code>Y[2]</code> is an arbitrary character vector that serves as a description for the allocated range of tokens.</p>
<h5>De-allocation (<code>Y</code> is <code>¯1</code>)</h5>
<p>If <code>Y</code> is <code>¯1</code>, <code>⎕TALLOC</code> releases a previously allocated range of tokens identified by the left-argument <code>X</code>. The result <code>R</code> is a shy <code>⍬</code>.</p>
<p>To succeed, this range must have previously been allocated, not freed by de-allocation, and must be inactive, i.e. its tokens must not currently be  in the token pool or in use by a <code>⎕TGET</code>. If not, <code>⎕TALLOC</code> will signal a <code>DOMAIN ERROR</code>.</p>
<p>A de-allocated range becomes free for subsequent re-allocation by <code>⎕TALLOC</code>.</p>
<h5>Querying a description (<code>Y</code> is 0)</h5>
<p><code>Y</code> is 0, <code>⎕TALLOC</code> returns a non-shy result <code>R</code> containing the description for a currently allocated range of tokens identified by the left-argument <code>X</code>.</p>
<p>If <code>X</code> does not represent a currently allocated range, <code>⎕TALLOC</code> will signal a <code>DOMAIN ERROR</code>.</p>
<p>If <code>X</code> is omitted, the result <code>R</code> is a vector of 2-element vectors identifying the range and description of all currently allocated ranges.</p>
<p>Descriptions that were not defined are returned as empty character vectors.</p>
<h5>Querying  the Token Pool (<code>Y</code> is 2)</h5>
<p><code>Y</code> is 2, <code>⎕TALLOC</code> returns a non-shy result <code>R</code> containing the list of tokens in the token pool that fall in the range specified by the left-argument <code>X</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">trg</span><span class="kd">←</span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="s1">'cats'</span>
<span class="m">1</span>
<span class="w">       </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">0</span>
<span class="err">┌────────┐</span>
<span class="err">│┌─┬────┐│</span>
<span class="err">││</span><span class="m">1</span><span class="err">│</span><span class="nv">cats</span><span class="err">││</span>
<span class="err">│└─┴────┘│</span>
<span class="err">└────────┘</span>
<span class="w">      </span><span class="nf">⎕TPUT</span><span class="w"> </span><span class="nv">trg</span><span class="o">+</span><span class="m">.1</span><span class="w"> </span><span class="m">.2</span><span class="w"> </span><span class="m">.3</span>
<span class="w">      </span><span class="nf">⎕TPUT</span><span class="w"> </span><span class="o">-</span><span class="nv">trg</span><span class="o">+</span><span class="m">.9</span>
<span class="w">      </span><span class="nf">⎕TPOOL</span><span class="w">             </span>
<span class="m">1.1</span><span class="w"> </span><span class="m">1.2</span><span class="w"> </span><span class="m">1.3</span><span class="w"> </span><span class="m">¯1.9</span>

<span class="w">      </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="nv">trg</span><span class="o">+</span><span class="m">.1</span><span class="w"> </span><span class="m">.2</span><span class="w"> </span><span class="m">.3</span><span class="w"> </span><span class="m">.9</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="c1">⍝ Try to de-allocate the range     </span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span>
<span class="w">        </span><span class="o">∧</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="c1">⍝ Failed due to ¯1.9 token</span>
<span class="m">¯1.9</span>
<span class="w">      </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">¯1.9</span><span class="w">   </span><span class="c1">⍝ Remove the inexhaustible ¯1.9 token</span>
<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TALLOC</span><span class="w"> </span><span class="m">¯1</span><span class="w"> </span><span class="c1">⍝ De-allocation now works   </span>
</code></pre></div>
</article>
<article id="system-functions-tc">
<div class="heading-container"><h3 class="heading" id="system-functions-tc-header">Terminal Control</h3><div class="command">(⎕ML)</div></div>
<p><code>⎕TC</code> is a deprecated feature and is replaced by <code>⎕UCS</code> (see note).</p>
<p><code>⎕TC</code> is a simple three element vector.  If <code>⎕ML&lt;3</code> this is ordered as follows:</p>
<table>
<tbody>
<tr>
<td><code>⎕TC[1]</code></td>
<td>Backspace</td>
</tr>
<tr>
<td><code>⎕TC[2]</code></td>
<td>Linefeed</td>
</tr>
<tr>
<td><code>⎕TC[3]</code></td>
<td>Newline</td>
</tr>
</tbody>
</table>
<p>Note that <code>⎕TC≡⎕AV[1+⍳3]</code> for <code>⎕ML&lt;3</code> .</p>
<p>If <code>⎕ML≥3</code>the order of the elements of <code>⎕TC</code> is instead compatible with IBM's APL2:</p>
<table>
<tbody>
<tr>
<td><code>⎕TC[1]</code></td>
<td>Backspace</td>
</tr>
<tr>
<td><code>⎕TC[2]</code></td>
<td>Newline</td>
</tr>
<tr>
<td><code>⎕TC[3]</code></td>
<td>Linefeed</td>
</tr>
</tbody>
</table>
<p>Elements of <code>⎕TC</code> beyond 3 are not defined but are reserved.</p>
<h5>Note</h5>
<p>With the introduction of <code>⎕UCS</code> in Version 12.0, the use of <code>⎕TC</code> is discouraged and it is strongly recommended that you generate control characters using <code>⎕UCS</code> instead. This recommendation holds true even if you continue to use the Classic Edition.</p>
<table>
<thead>
<tr>
<th>Control Character</th>
<th>Old</th>
<th>New</th>
</tr>
</thead>
<tbody>
<tr>
<td>Backspace</td>
<td><code>⎕TC[1]</code></td>
<td><code>⎕UCS 8</code></td>
</tr>
<tr>
<td>Linefeed</td>
<td><code>⎕TC[2] (⎕ML&lt;3)⎕TC[3] (⎕ML≥3)</code></td>
<td><code>⎕UCS 10</code></td>
</tr>
<tr>
<td>Newline</td>
<td><code>⎕TC[3] (⎕ML&lt;3)⎕TC[2] (⎕ML≥3)</code></td>
<td><code>⎕UCS 13</code></td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-tcnums">
<div class="heading-container"><h3 class="heading" id="system-functions-tcnums-header">Thread Child Numbers</h3><div class="command">R←⎕TCNUMS Y</div></div>
<p><code>Y</code> must be a simple array of integers representing thread numbers.</p>
<p>The result <code>R</code> is a simple integer vector of the child threads of each thread of <code>Y</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TCNUMS</span><span class="w"> </span><span class="m">0</span>
<span class="m">2</span><span class="w"> </span><span class="m">3</span>

<span class="w">      </span><span class="nf">⎕TCNUMS</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span>
</code></pre></div>
</article>
<article id="system-functions-tget">
<div class="heading-container"><h3 class="heading" id="system-functions-tget-header">Get Tokens</h3><div class="command">{R}←{X} ⎕TGET Y</div></div>
<p><code>Y</code> must be a simple numeric scalar or vector that specifies one or more tokens, each with a specific non-zero token type, that are to be retrieved from the pool. Non-integer values in <code>Y</code> must fall within a range that has been allocated using <code>⎕TALLOC</code>.</p>
<p><code>X</code> is an optional time-out value in seconds.</p>
<p>Shy result <code>R</code> is a scalar or vector containing the values of the tokens of type <code>Y</code> that have been retrieved from the token pool.</p>
<p>Note that types of the tokens in the pool may be positive or negative, and the elements of <code>Y</code> may also be positive or negative.</p>
<p>A request (<code>⎕TGET</code>) for a <em>positive</em> token will be satisfied by the presence of a token in the pool with the same positive or negative type. If the pool token has a positive type, it will be removed from the pool. If the pool token has a negative type, it will remain in the pool. N<em>egatively</em> typed tokens will therefore satisfy an infinite number of requests for their positive equivalents. Note that a request for a positive token will remove one if it is present, before resorting to its negative equivalent</p>
<p>A request for a negative token type will only be satisfied by the presence of a negative token type in the pool, and that token will be removed.</p>
<p>If, when a thread calls <code>⎕TGET</code>, the token pool satisfies <strong>all</strong> of the tokens specified by <code>Y</code>, the function returns immediately with a (shy) result that contains the values associated with the pool tokens. Otherwise, the function will block (wait) until <strong>all</strong> of the requested tokens are present or until a time-out (as specified by <code>X</code>) or a weak interrupt occurs.</p>
<p>For example, if the pool contains only tokens of type 2:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w">        </span><span class="c1">⍝ blocks waiting for a 4-token ...</span>
</code></pre></div></p>
<p>The <code>⎕TGET</code> operation is atomic in the sense that no tokens are taken from the pool until <strong>all</strong> of the requested types are present. While this last example is waiting for a 4-token, other threads could take any of the remaining 2-tokens.</p>
<p>Note also, that repeated items in the right argument are distinct. The following will block until there are at least 3 <code>×</code> 1.9-tokens in the pool:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">3</span><span class="na">/</span><span class="m">1.9</span><span class="w">       </span><span class="c1">⍝ wait for 3 × 2-tokens ...</span>
</code></pre></div></p>
<p>The pool is administered on a first-in-first-out basis. This is significant only if tokens of the same type are given distinct values. For example:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="nf">⎕TPOOL</span><span class="w">             </span><span class="c1">⍝ empty pool.</span>

<span class="w">    </span><span class="s1">'ABCDE'</span><span class="nf">⎕TPUT</span><span class="na">¨</span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="c1">⍝ pool some tokens.</span>

<span class="w">    </span><span class="o">⊢</span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="nv">AC</span>

<span class="w">    </span><span class="o">⊢</span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="nv">BE</span>
</code></pre></div></p>
<p><code>R</code> is an empty numeric vector <code>⍬</code> (zilde) if a timeout or a weak interrupt occurs.</p>
<p><strong>Beware</strong> - the following statement will wait forever and can only be terminated by an interrupt.
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TGET</span><span class="w"> </span><span class="m">0</span><span class="w">       </span><span class="c1">⍝ wait forever ...</span>
</code></pre></div></p>
<p>Note too that if a thread waiting to <code>⎕TGET</code> tokens is <code>⎕TKILL</code>ed, the thread disappears without removing any tokens from the pool. Conversely, if a thread that has removed tokens from the pools is <code>⎕TKILL</code>ed, the tokens are not returned to the pool.</p>
</article>
<article id="system-functions-this">
<div class="heading-container"><h3 class="heading" id="system-functions-this-header">This Space</h3><div class="command">R←⎕THIS</div></div>
<p><code>⎕THIS</code> returns a reference to the current namespace, i.e. to the space in which it is referenced.</p>
<p>If <code>NC9</code> is a reference to any object whose name-class is <code>9</code>, then:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">NC9</span><span class="o">≡</span><span class="nv">NC9</span><span class="na">.</span><span class="nf">⎕THIS</span>
<span class="m">1</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕THIS</span>
<span class="c1">#</span>
<span class="w">      </span><span class="s1">'X'</span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="nv">X</span><span class="na">.</span><span class="nf">⎕THIS</span>
<span class="c1">#.X</span>
<span class="w">     </span><span class="s1">'F'</span><span class="nf">⎕WC</span><span class="s1">'Form'</span>
<span class="w">     </span><span class="s1">'F.B'</span><span class="nf">⎕WC</span><span class="s1">'Button'</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nv">B</span><span class="na">.</span><span class="nf">⎕THIS</span>
<span class="c1">#.F.B</span>

<span class="w">      </span><span class="nv">Polly</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">Parrot</span>
<span class="w">      </span><span class="nv">Polly</span><span class="na">.</span><span class="nf">⎕THIS</span>
<span class="c1">#.[Parrot]</span>
</code></pre></div>
<p>An Instance may use <code>⎕THIS</code> to obtain a reference to its own Class:
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nv">Polly</span><span class="na">.</span><span class="p">(</span><span class="o">⊃⊃</span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nf">⎕THIS</span><span class="p">)</span>
<span class="c1">#.Parrot</span>
</code></pre></div></p>
<p>or a function (such as a Constructor or Destructor) may identify or enumerate all other Instances of the same Class:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Polly</span><span class="na">.</span><span class="p">(</span><span class="o">⍴</span><span class="nf">⎕INSTANCES</span><span class="o">⊃⊃</span><span class="nf">⎕CLASS</span><span class="w"> </span><span class="nf">⎕THIS</span><span class="p">)</span>
<span class="m">1</span>
</code></pre></div></p>
</article>
<article id="system-functions-tid">
<div class="heading-container"><h3 class="heading" id="system-functions-tid-header">Current Thread Identity</h3><div class="command">R←⎕TID</div></div>
<p><code>R</code> is a simple integer scalar whose value is the number of the current thread.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TID</span><span class="w">     </span><span class="c1">⍝ Base thread number</span>
<span class="m">0</span>

<span class="w">      </span><span class="o">⍎</span><span class="na">&amp;</span><span class="s1">'⎕TID'</span><span class="w"> </span><span class="c1">⍝ Thread number of async ⍎.</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-tkill">
<div class="heading-container"><h3 class="heading" id="system-functions-tkill-header">Kill Thread</h3><div class="command">{R}←{X}⎕TKILL Y</div></div>
<p><code>Y</code> must be a simple array of integers representing thread numbers to be terminated. <code>X</code> is a Boolean single, defaulting to 1, which indicates that all descendant threads should also be terminated.</p>
<p>The shy result <code>R</code> is a vector of the numbers of all threads that have been terminated.</p>
<p>The <strong>base thread</strong> 0 is always excluded from the cull.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TKILL</span><span class="w"> </span><span class="m">0</span><span class="w">            </span><span class="c1">⍝ Kill background threads.</span>

<span class="w">      </span><span class="nf">⎕TKILL</span><span class="w"> </span><span class="nf">⎕TID</span><span class="w">         </span><span class="c1">⍝ Kill self and descendants.</span>

<span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="nf">⎕TKILL</span><span class="w"> </span><span class="nf">⎕TID</span><span class="w">       </span><span class="c1">⍝ Kill self only.</span>

<span class="w">      </span><span class="nf">⎕TKILL</span><span class="w"> </span><span class="nf">⎕TCNUMS</span><span class="w"> </span><span class="nf">⎕TID</span><span class="w"> </span><span class="c1">⍝ Kill descendants.</span>
</code></pre></div>
</article>
<article id="system-functions-tname">
<div class="heading-container"><h3 class="heading" id="system-functions-tname-header">Current Thread Name</h3><div class="command">⎕TNAME</div></div>
<p>The system variable <code>⎕TNAME</code> reports and sets the name of the current APL thread. This name is used to identify the thread in the Tracer.</p>
<p>The default value of <code>⎕TNAME</code> is an empty character vector. <code>⎕TNAME</code> has workspace scope.</p>
<p>You may set <code>⎕TNAME</code> to any valid character vector, but it is recommended that control characters (such as <code>⎕AV[⎕IO]</code> ) be avoided.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TNAME</span><span class="kd">←</span><span class="s1">'Dylan'</span>
<span class="w">      </span><span class="nf">⎕TNAME</span>
<span class="nv">Dylan</span>
</code></pre></div>
</article>
<article id="system-functions-tnums">
<div class="heading-container"><h3 class="heading" id="system-functions-tnums-header">Thread Numbers</h3><div class="command">R←⎕TNUMS</div></div>
<p><code>⎕TNUMS</code> reports the numbers of all current threads.</p>
<p><code>R</code> is a simple integer vector of the base thread and all its living descendants.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TNUMS</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">9</span>
</code></pre></div>
</article>
<article id="system-functions-tpool">
<div class="heading-container"><h3 class="heading" id="system-functions-tpool-header">Token Pool</h3><div class="command">R←⎕TPOOL</div></div>
<p><code>R</code> is a simple scalar or vector containing the token types for each of the tokens that are currently in the token pool.</p>
<p>The following (<code>⎕ML=0</code>) function returns a 2-column snapshot of the contents of the pool. It does this by removing and replacing all of the tokens, restoring the state of the pool exactly as before. Coding it as a single expression guarantees that <code>snap</code> is atomic and cannot disturb running threads.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">snap</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="nf">⎕TGET</span><span class="w"> </span><span class="bp">⍵</span><span class="p">)</span><span class="kt">{</span><span class="p">(</span><span class="o">⍉↑</span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍺</span><span class="p">)</span><span class="w"> </span><span class="o">⊣</span><span class="w"> </span><span class="bp">⍺</span><span class="w"> </span><span class="nf">⎕TPUT</span><span class="na">¨</span><span class="bp">⍵</span><span class="kt">}</span><span class="bp">⍵</span><span class="kt">}</span>

<span class="w">      </span><span class="nv">snap</span><span class="w"> </span><span class="nf">⎕TPOOL</span><span class="w">   </span><span class="nv">snap</span><span class="w"> </span><span class="nf">⎕TPOOL</span>
<span class="err">┌────┬─────────┐</span>
<span class="err">│</span><span class="m">1.1</span><span class="w"> </span><span class="err">│</span><span class="m">1.1</span><span class="w">      </span><span class="err">│</span>
<span class="err">├────┼─────────┤</span>
<span class="err">│</span><span class="m">1.2</span><span class="w"> </span><span class="err">│</span><span class="m">1.2</span><span class="w">      </span><span class="err">│</span>
<span class="err">├────┼─────────┤</span>
<span class="err">│</span><span class="m">1.3</span><span class="w"> </span><span class="err">│</span><span class="m">1.3</span><span class="w">      </span><span class="err">│</span>
<span class="err">├────┼─────────┤</span>
<span class="err">│</span><span class="m">¯1.9</span><span class="err">│</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">limit</span><span class="err">│</span>
<span class="err">└────┴─────────┘</span>
</code></pre></div></p>
<p>See also: <a class="internal-link" href="#system-functions-talloc">Section 4.6.151</a>.</p>
</article>
<article id="system-functions-tput">
<div class="heading-container"><h3 class="heading" id="system-functions-tput-header">Put Tokens</h3><div class="command">{R}←{X} ⎕TPUT Y</div></div>
<p><code>Y</code> must be a simple numeric scalar or vector of non-zero token types. Non-integer values in <code>Y</code> must fall within a range that has been allocated using <code>⎕TALLOC</code>.</p>
<p><code>X</code> is an optional array of values to be stored in each of the tokens specified by <code>Y</code>.</p>
<p>Shy result <code>R</code> is a vector of thread numbers (if any) unblocked by the <code>⎕TPUT</code>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TPUT</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">2</span><span class="w">       </span><span class="c1">⍝ put a 2-token, a 3-token and</span>
<span class="w">                        </span><span class="nv">another</span><span class="w"> </span><span class="m">2</span><span class="o">-</span><span class="nv">token</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pool</span><span class="na">.</span>

<span class="w">    </span><span class="m">88</span><span class="w"> </span><span class="nf">⎕TPUT</span><span class="w"> </span><span class="m">2</span><span class="w">        </span><span class="c1">⍝ put another 2-token into the pool</span>
<span class="w">                        </span><span class="nv">this</span><span class="w"> </span><span class="nv">token</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="m">88</span><span class="na">.</span>

<span class="w">    </span><span class="s1">'Hello'</span><span class="nf">⎕TPUT</span><span class="w"> </span><span class="m">¯1.9</span><span class="w"> </span><span class="c1">⍝ put a ¯1.9-token into the pool</span>
<span class="w">                        </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="s1">'Hello'</span><span class="na">.</span>
</code></pre></div>
<p>If <code>X</code> is omitted, the <em>value</em> associated with each of the tokens added to the pool is the same as its <em>type</em>.</p>
<p>Note that you cannot put a 0-token into the pool; 0-s are removed from <code>Y</code>.</p>
</article>
<article id="system-functions-set-trace">
<div class="heading-container"><h3 class="heading" id="system-functions-set-trace-header">Set Trace</h3><div class="command">{R}←X ⎕TRACE Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.  <code>X</code> must be a simple non-negative integer scalar or vector.</p>
<p><code>X</code> identifies the numbers of lines in the function or operator named by <code>Y</code> on which a trace control is to be placed.  Numbers outside the range of line numbers in the function or operator (other than 0) are ignored.  The number 0 indicates that a trace control is to be placed immediately prior to exit from the function or operator.  The value of <code>X</code> is independent of <code>⎕IO</code>.</p>
<p><code>R</code> is a simple integer vector of non-negative elements indicating the lines in the function or operator on which a trace control has been placed.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕TRACE</span><span class="s1">'FOO'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span>
</code></pre></div>
<p>Existing trace controls in the function or operator named by <code>Y</code> are cancelled before new trace controls are set:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TRACE</span><span class="s1">'FOO'</span>
<span class="m">1</span>
</code></pre></div></p>
<p>All trace controls may be cancelled by giving <code>X</code> an empty vector:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="no">⍬</span><span class="w"> </span><span class="nf">⎕TRACE</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="m">0</span>
</code></pre></div></p>
<p>Attempts to set trace controls in a locked function or operator are ignored.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕LOCK</span><span class="w"> </span><span class="s1">'FOO'</span>
<span class="w">      </span><span class="o">+</span><span class="m">1</span><span class="w"> </span><span class="nf">⎕TRACE</span><span class="w"> </span><span class="s1">'FOO'</span>
</code></pre></div></p>
<p>The effect of trace controls when a function or operator is invoked is to display the result of each complete expression for lines with trace controls as they are executed, and the result of the function if trace control 0 is set.  If a line contains expressions separated by <code>⋄</code>, the result of each complete expression is displayed for that line after execution.</p>
<p>The result of a complete expression is displayed even where the result would normally be suppressed.  In particular:</p>
<ul>
<li>the result of a branch statement is displayed;</li>
<li>the result (<em>pass-through value</em>) of assignment is displayed;</li>
<li>the result of a function whose result would normally be suppressed is displayed;</li>
</ul>
<p>For each traced line, the output from <code>⎕TRACE</code> is displayed as a two element vector, the first element of which contains the function or operator name and line number, and the second element of which takes one of two forms.</p>
<ul>
<li>The result of the line, displayed as in standard output.</li>
<li><code>→</code> followed by a line number.</li>
</ul>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VR</span><span class="w"> </span><span class="s1">'DSL'</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">DSL</span><span class="w"> </span><span class="nv">SKIP</span><span class="sr">;</span><span class="nv">A</span><span class="sr">;</span><span class="nv">B</span><span class="sr">;</span><span class="nv">C</span><span class="sr">;</span><span class="nv">D</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span><span class="o">×</span><span class="m">3</span><span class="o">+</span><span class="m">4</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="nv">B</span><span class="kd">←</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="o">⍴</span><span class="s1">'ABCDEF'</span><span class="p">)</span><span class="nv">A</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">NEXT</span><span class="o">×⍳</span><span class="nv">SKIP</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">    </span><span class="s1">'SKIPPED LINE'</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">   </span><span class="nv">NEXT</span><span class="bp">:</span><span class="nv">C</span><span class="kd">←</span><span class="s1">'one'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">D</span><span class="kd">←</span><span class="s1">'two'</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">   </span><span class="nv">END</span><span class="bp">:</span><span class="nv">R</span><span class="kd">←</span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span>
<span class="w">     </span><span class="bp">∇</span>

<span class="w">      </span><span class="p">(</span><span class="m">0</span><span class="o">,⍳</span><span class="m">6</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕TRACE</span><span class="w"> </span><span class="s1">'DSL'</span>

<span class="w">      </span><span class="nv">DSL</span><span class="w"> </span><span class="m">1</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">  </span><span class="m">14</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="nv">ABC</span><span class="w">   </span><span class="m">14</span>
<span class="w">          </span><span class="nv">DEF</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">  </span><span class="kd">→</span><span class="m">5</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">  </span><span class="nv">one</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">  </span><span class="nv">two</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">   </span><span class="nv">one</span><span class="w">   </span><span class="nv">two</span>
<span class="w"> </span><span class="nv">DSL</span><span class="sr">[</span><span class="m">0</span><span class="sr">]</span><span class="w">   </span><span class="nv">one</span><span class="w">   </span><span class="nv">two</span>
<span class="w"> </span><span class="nv">one</span><span class="w">  </span><span class="nv">two</span>
</code></pre></div>
</article>
<article id="system-functions-query-trace">
<div class="heading-container"><h3 class="heading" id="system-functions-query-trace-header">Query Trace</h3><div class="command">R←⎕TRACE Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be the name of a visible defined function or operator.  <code>R</code> is a simple non-negative integer vector of the line numbers of the function or operator named by <code>Y</code> on which trace controls are set, shown in ascending order.  The value 0 in <code>R</code> indicates that a trace control is set to display the result of the function or operator immediately prior to exit.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRACE</span><span class="s1">'DSL'</span>
<span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span>
</code></pre></div>
</article>
<article id="system-functions-trap">
<div class="heading-container"><h3 class="heading" id="system-functions-trap-header">Trap Event</h3><div class="command">⎕TRAP</div></div>
<p>This is a non-simple vector.  An item of <code>⎕TRAP</code> specifies an action to be taken when one of a set of events occurs.  <code>⎕TRAP</code> has workspace scope.</p>
<p>An item of <code>⎕TRAP</code> is a 2 or 3 element vector whose items are simple scalars or vectors in the following order:</p>
<ol>
<li>an integer vector whose value is one or more event codes selected from the list in the Figure on the following two pages.</li>
<li>a character scalar whose value is an action code selected from the letters <code>C</code>, <code>E</code>, <code>N</code> or <code>S</code>.</li>
<li>if element 2 is the letter <code>C</code> or <code>E</code>, this item is a character vector forming a valid APL expression or series of expressions separated by <code>⋄</code>.  Otherwise, this element is omitted.</li>
</ol>
<p>An EVENT may be an APL execution error, an interrupt by the user or the system, a control interrupt caused by the <code>⎕STOP</code> system function, or an event generated by the <code>⎕SIGNAL</code> system function.</p>
<p>When an event occurs, the system searches for a trap definition for that event.  The most local <code>⎕TRAP</code> value is searched first, followed by successive shadowed values of <code>⎕TRAP</code>, and finally the global <code>⎕TRAP</code> value.  Separate actions defined in a single <code>⎕TRAP</code> value are searched from <strong>left to right</strong>.  If a trap definition for the event is found, the defined action is taken.  Otherwise, the normal system action is followed.</p>
<p>The ACTION code identifies the nature of the action to be taken when an associated event occurs.  Permitted codes are interpreted as follows:</p>

<table id="TrapEvents"><caption style="caption-side:top"><strong>Table 4-4:</strong> Trappable Event Codes</caption>
<tbody>
<tr>
<td><code>C</code></td>
<td>Cutback</td>
<td>The state indicator is 'cut back' to the environment in which the <code>⎕TRAP</code> is locally defined (or to immediate execution level).  The APL expression in element 3 of the same <code>⎕TRAP</code> item is then executed.</td>
</tr>
<tr>
<td><code>E</code></td>
<td>Execute</td>
<td>The APL expression in element 3 of the same <code>⎕TRAP</code> item is executed in the environment in which the event occurred.</td>
</tr>
<tr>
<td><code>N</code></td>
<td>Next</td>
<td>The event is excluded from the current <code>⎕TRAP</code> definition.  The search will continue through further localised definitions of <code>⎕TRAP</code> .</td>
</tr>
<tr>
<td><code>S</code></td>
<td>Stop</td>
<td>Stops the search and causes the normal APL action to be taken in the environment in which the event occurred.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Code</th>
<th>Event</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code></td>
<td><code>Any event in range 1-999</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td><code>WS FULL</code></td>
</tr>
<tr>
<td><code>2</code></td>
<td><code>SYNTAX ERROR</code></td>
</tr>
<tr>
<td><code>3</code></td>
<td><code>INDEX ERROR</code></td>
</tr>
<tr>
<td><code>4</code></td>
<td><code>RANK ERROR</code></td>
</tr>
<tr>
<td><code>5</code></td>
<td><code>LENGTH ERROR</code></td>
</tr>
<tr>
<td><code>6</code></td>
<td><code>VALUE ERROR</code></td>
</tr>
<tr>
<td><code>7</code></td>
<td><code>FORMAT ERROR</code></td>
</tr>
<tr>
<td><code>10</code></td>
<td><code>LIMIT ERROR</code></td>
</tr>
<tr>
<td><code>11</code></td>
<td><code>DOMAIN ERROR</code></td>
</tr>
<tr>
<td><code>12</code></td>
<td><code>HOLD ERROR</code></td>
</tr>
<tr>
<td><code>16</code></td>
<td><code>NONCE ERROR</code></td>
</tr>
<tr>
<td><code>18</code></td>
<td><code>FILE TIE ERROR</code></td>
</tr>
<tr>
<td><code>19</code></td>
<td><code>FILE ACCESS ERROR</code></td>
</tr>
<tr>
<td><code>20</code></td>
<td><code>FILE INDEX ERROR</code></td>
</tr>
<tr>
<td><code>21</code></td>
<td><code>FILE FULL</code></td>
</tr>
<tr>
<td><code>22</code></td>
<td><code>FILE NAME ERROR</code></td>
</tr>
<tr>
<td><code>23</code></td>
<td><code>FILE DAMAGED</code></td>
</tr>
<tr>
<td><code>24</code></td>
<td><code>FILE TIED</code></td>
</tr>
<tr>
<td><code>25</code></td>
<td><code>FILE TIED REMOTELY</code></td>
</tr>
<tr>
<td><code>26</code></td>
<td><code>FILE SYSTEM ERROR</code></td>
</tr>
<tr>
<td><code>28</code></td>
<td><code>FILE SYSTEM NOT AVAILABLE</code></td>
</tr>
<tr>
<td><code>30</code></td>
<td><code>FILE SYSTEM TIES USED UP</code></td>
</tr>
<tr>
<td><code>31</code></td>
<td><code>FILE TIE QUOTA USED UP</code></td>
</tr>
<tr>
<td><code>32</code></td>
<td><code>FILE NAME QUOTA USED UP</code></td>
</tr>
<tr>
<td><code>34</code></td>
<td><code>FILE SYSTEM NO SPACE</code></td>
</tr>
<tr>
<td><code>35</code></td>
<td><code>FILE ACCESS ERROR - CONVERTING FILE</code></td>
</tr>
<tr>
<td><code>38</code></td>
<td><code>FILE COMPONENT DAMAGED</code></td>
</tr>
<tr>
<td><code>52</code></td>
<td><code>FIELD CONTENTS RANK ERROR</code></td>
</tr>
<tr>
<td><code>53</code></td>
<td><code>FIELD CONTENTS TOO MANY COLUMNS</code></td>
</tr>
<tr>
<td><code>54</code></td>
<td><code>FIELD POSITION ERROR</code></td>
</tr>
<tr>
<td><code>55</code></td>
<td><code>FIELD SIZE ERROR</code></td>
</tr>
<tr>
<td><code>56</code></td>
<td><code>FIELD CONTENTS/TYPE MISMATCH</code></td>
</tr>
<tr>
<td><code>57</code></td>
<td><code>FIELD TYPE/BEHAVIOUR UNRECOGNISED</code></td>
</tr>
<tr>
<td><code>58</code></td>
<td><code>FIELD ATTRIBUTES RANK ERROR</code></td>
</tr>
<tr>
<td><code>59</code></td>
<td><code>FIELD ATTRIBUTES LENGTH ERROR</code></td>
</tr>
<tr>
<td><code>60</code></td>
<td><code>FULL-SCREEN ERROR</code></td>
</tr>
<tr>
<td><code>61</code></td>
<td><code>KEY CODE UNRECOGNISED</code></td>
</tr>
<tr>
<td><code>62</code></td>
<td><code>KEY CODE RANK ERROR</code></td>
</tr>
<tr>
<td><code>63</code></td>
<td><code>KEY CODE TYPE ERROR</code></td>
</tr>
<tr>
<td><code>70</code></td>
<td><code>FORMAT FILE ACCESS ERROR</code></td>
</tr>
<tr>
<td><code>71</code></td>
<td><code>FORMAT FILE ERROR</code></td>
</tr>
<tr>
<td><code>72</code></td>
<td><code>NO PIPES</code></td>
</tr>
<tr>
<td><code>76</code></td>
<td><code>PROCESSOR TABLE FULL</code></td>
</tr>
<tr>
<td><code>84</code></td>
<td><code>TRAP ERROR</code></td>
</tr>
<tr>
<td><code>90</code></td>
<td><code>EXCEPTION</code></td>
</tr>
<tr>
<td><code>92</code></td>
<td><code>TRANSLATION ERROR</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>200-499</code></td>
<td><code>Reserved for distributed auxiliary processors</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>500-999</code></td>
<td><code>User-defined events</code></td>
</tr>
<tr>
<td> </td>
<td> </td>
</tr>
<tr>
<td><code>1000</code></td>
<td><code>Any event in range 1001-1008</code></td>
</tr>
<tr>
<td><code>1001</code></td>
<td><code>Stop vector</code></td>
</tr>
<tr>
<td><code>1002</code></td>
<td><code>Weak interrupt</code></td>
</tr>
<tr>
<td><code>1003</code></td>
<td><code>INTERRUPT</code></td>
</tr>
<tr>
<td><code>1005</code></td>
<td><code>EOF INTERRUPT</code></td>
</tr>
<tr>
<td><code>1006</code></td>
<td><code>TIMEOUT</code></td>
</tr>
<tr>
<td><code>1007</code></td>
<td><code>RESIZE (Dyalog APL/X, Dyalog APL/W)</code></td>
</tr>
<tr>
<td><code>1008</code></td>
<td><code>DEADLOCK</code></td>
</tr>
</tbody>
</table>
<p>See <i>Programmer's Guide: Trap Statement</i> for an alternative 'control structured' error trapping mechanism.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="o">⊂</span><span class="p">(</span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'ERROR'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="o">⍴</span><span class="nf">⎕TRAP</span>
<span class="m">1</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕TRAP</span>
<span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div>
<p>Items may be specified as scalars.  If there is only a single trap definition, it need not be enclosed.  However, the value of <code>⎕TRAP</code> will be rigorously correct:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="m">11</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'→LAB'</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕TRAP</span>
<span class="w">  </span><span class="m">11</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="kd">→</span><span class="nv">ERR</span>
<span class="w"> </span>
<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕TRAP</span>
<span class="m">1</span>
</code></pre></div></p>
<p>The value of <code>⎕TRAP</code> in a clear workspace is an empty vector whose prototype is</p>
<p><code>0⍴(⍬ '' '')</code>.  A convenient way of cancelling a <code>⎕TRAP</code> definition is:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="m">0</span><span class="o">⍴</span><span class="nf">⎕TRAP</span>
</code></pre></div></p>
<p>Event codes 0 and 1000 allow all events in the respective ranges 1-999 and 1000-1006 to be trapped.  Specific event codes may be excluded by the <code>N</code> action (which must precede the general event action):
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="s1">'N'</span><span class="p">)(</span><span class="m">0</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'→GENERR'</span><span class="p">)</span>
</code></pre></div></p>
<p>The 'stop' action is a useful mechanism for cancelling trap definitions during development of applications.</p>
<p>The 'cut-back' action is useful for returning control to a known point in the application system when errors occur.  The following example shows a function that selects and executes an option with a general trap to return control to the function when an untrapped event occurs:
<div class="highlight"><pre><span></span><code><span class="w"> </span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">SELECT</span><span class="sr">;</span><span class="nv">OPT</span><span class="sr">;</span><span class="nf">⎕TRAP</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ Option selection and execution</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ A general cut-back trap</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">    </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="p">(</span><span class="m">0</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span><span class="s1">'C'</span><span class="w"> </span><span class="s1">'→ERR'</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">INP</span><span class="bp">:</span><span class="vg">⍞</span><span class="kd">←</span><span class="s1">'OPTION : '</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">OPT</span><span class="kd">←</span><span class="p">(</span><span class="nv">OPT</span><span class="o">≠</span><span class="s1">' '</span><span class="p">)</span><span class="na">/</span><span class="nv">OPT</span><span class="kd">←</span><span class="m">9</span><span class="o">↓</span><span class="vg">⍞</span>
<span class="sr">[</span><span class="m">5</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">EX</span><span class="o">⍴</span><span class="na">⍨</span><span class="p">(</span><span class="o">⊂</span><span class="nv">OPT</span><span class="p">)</span><span class="o">∊</span><span class="nv">Options</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="s1">'INVALID OPTION'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">INP</span>
<span class="sr">[</span><span class="m">6</span><span class="sr">]</span><span class="w">   </span><span class="nv">EX</span><span class="bp">:</span><span class="o">⍎</span><span class="nv">OPT</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">INP</span>
<span class="sr">[</span><span class="m">7</span><span class="sr">]</span><span class="w">   </span><span class="nv">ERR</span><span class="bp">:</span><span class="nv">ERROR∆ACTION</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">INP</span>
<span class="sr">[</span><span class="m">8</span><span class="sr">]</span><span class="w">   </span><span class="nv">END</span><span class="bp">:</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div></p>
<p>User-defined events may be signalled through the <code>⎕SIGNAL</code> system function.  A user-defined event (in the range 500-999) may be trapped explicitly or implicitly by the event code 0.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TRAP</span><span class="kd">←</span><span class="m">500</span><span class="w"> </span><span class="s1">'E'</span><span class="w"> </span><span class="s1">'''USER EVENT 500 - TRAPPED'''</span>
<span class="w"> </span>
<span class="w">      </span><span class="nf">⎕SIGNAL</span><span class="w"> </span><span class="m">500</span>
<span class="nv">USER</span><span class="w"> </span><span class="nv">EVENT</span><span class="w"> </span><span class="m">500</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">TRAPPED</span>
</code></pre></div>
</article>
<article id="system-functions-treq">
<div class="heading-container"><h3 class="heading" id="system-functions-treq-header">Token Requests</h3><div class="command">R←⎕TREQ Y</div></div>
<p><code>Y</code> is a simple scalar or vector of thread numbers.</p>
<p><code>R</code> is a vector containing the concatenated token requests for all the threads specified in <code>Y</code>. This is effectively the result of catenating all of the right arguments together for all threads in <code>Y</code> that are currently executing <code>⎕TGET</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nf">⎕TREQ</span><span class="w"> </span><span class="nf">⎕TNUMS</span><span class="w">    </span><span class="c1">⍝ tokens required by all threads.</span>
</code></pre></div>
</article>
<article id="system-functions-ts">
<div class="heading-container"><h3 class="heading" id="system-functions-ts-header">Timestamp</h3><div class="command">R←⎕TS</div></div>
<p>This is a seven element vector which identifies the clock time set on the particular installation as follows:</p>
<table>
<tbody>
<tr>
<td><code>⎕TS[1]</code></td>
<td>Year</td>
</tr>
<tr>
<td><code>⎕TS[2]</code></td>
<td>Month</td>
</tr>
<tr>
<td><code>⎕TS[3]</code></td>
<td>Day</td>
</tr>
<tr>
<td><code>⎕TS[4]</code></td>
<td>Hour</td>
</tr>
<tr>
<td><code>⎕TS[5]</code></td>
<td>Minute</td>
</tr>
<tr>
<td><code>⎕TS[6]</code></td>
<td>Second</td>
</tr>
<tr>
<td><code>⎕TS[7]</code></td>
<td>Millisecond</td>
</tr>
</tbody>
</table>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕TS</span>
<span class="m">1989</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">42</span><span class="w"> </span><span class="m">59</span><span class="w"> </span><span class="m">123</span>
</code></pre></div>
<p>Note that on some systems, where time is maintained only to the nearest second, a zero is returned for the seventh (millisecond) field.</p>
</article>
<article id="system-functions-tsync">
<div class="heading-container"><h3 class="heading" id="system-functions-tsync-header">Wait for Threads to Terminate</h3><div class="command">R←⎕TSYNC Y</div></div>
<p><code>Y</code> must be a simple array of thread numbers.</p>
<p>If <code>Y</code> is a simple scalar, <code>R</code> is an array, the result (if any) of the thread.</p>
<p>If <code>Y</code> is a simple non-scalar, <code>R</code> has the same shape as <code>Y</code>, and result is an array of enclosed thread results.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">dup</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵</span><span class="w"> </span><span class="bp">⍵</span><span class="kt">}</span><span class="w">        </span><span class="c1">⍝ Duplicate</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">dup</span><span class="na">&amp;</span><span class="m">88</span><span class="w">         </span><span class="c1">⍝ Show thread number</span>
<span class="m">11</span>
<span class="m">88</span><span class="w"> </span><span class="m">88</span>

<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nv">dup</span><span class="na">&amp;</span><span class="m">88</span><span class="w">    </span><span class="c1">⍝ Wait for result</span>
<span class="m">88</span><span class="w"> </span><span class="m">88</span>

<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="o">,</span><span class="nv">dup</span><span class="na">&amp;</span><span class="m">88</span>
<span class="w"> </span><span class="m">88</span><span class="w"> </span><span class="m">88</span><span class="w"> </span>

<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nv">dup</span><span class="na">&amp;</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>

<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nv">dup</span><span class="na">&amp;¨</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>
</code></pre></div>
<h6>Deadlock</h6>
<p>The interpreter detects a potential deadlock if a number of threads wait for each other in a cyclic dependency. In this case, the thread that attempts to cause the deadlock issues error number <code>1008: DEADLOCK</code>.
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nf">⎕TID</span><span class="w">      </span><span class="c1">⍝ Wait for self</span>
<span class="nv">DEADLOCK</span>
<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nf">⎕TID</span>
<span class="w">      </span><span class="err">^</span>

<span class="w">      </span><span class="nf">⎕EN</span>
<span class="m">1008</span>
</code></pre></div></p>
<h6>Potential Value Error</h6>
<p>If any item of <code>Y</code> does not correspond to the thread number of an active thread, or if any subject thread terminates without returning a result, then <code>⎕TSYNC</code> does not return a result. This means that, if the calling context of the <code>⎕TSYNC</code> requires a result, for example: <code>rslt←⎕TSYNC tnums</code>, a <code>VALUE ERROR</code> will be generated. This situation can occur if threads have completed before <code>⎕TSYNC</code> is called.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="o">÷</span><span class="na">&amp;</span><span class="m">4</span><span class="w">          </span><span class="c1">⍝ thread (3) runs and terminates.</span>
<span class="m">3</span>
<span class="m">0.25</span>
<span class="w">      </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="m">3</span><span class="w">       </span><span class="c1">⍝ no result required: no prob</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕tsync</span><span class="w"> </span><span class="m">3</span><span class="w">     </span><span class="c1">⍝ context requires result</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>

<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nf">⎕tsync</span><span class="w"> </span><span class="kt">{}</span><span class="na">&amp;</span><span class="m">0</span><span class="w">  </span><span class="c1">⍝ non-result-returning fn: no result.</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div></p>
<p>Coding would normally avoid such an inconvenient <code>VALUE ERROR</code> either by arranging that the thread-spawning and <code>⎕TSYNC</code> were on the same line:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">rslt</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nv">myfn</span><span class="na">&amp;¨</span><span class="w"> </span><span class="nv">argvec</span>
</code></pre></div></p>
<p>or
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">tnums</span><span class="kd">←</span><span class="nv">myfn</span><span class="na">&amp;¨</span><span class="w"> </span><span class="nv">argvec</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">rslt</span><span class="kd">←</span><span class="nf">⎕TSYNC</span><span class="w"> </span><span class="nv">tnums</span>
</code></pre></div></p>
<p>or by error-trapping the <code>VALUE ERROR</code>.</p>
</article>
<article id="system-functions-ucs">
<div class="heading-container"><h3 class="heading" id="system-functions-ucs-header">Unicode Convert</h3><div class="command">R←{X} ⎕UCS Y</div></div>
<p><code>⎕UCS</code> converts (Unicode) characters into integers and vice versa.</p>
<p>The optional left argument <code>X</code> is a character vector containing the name of a variable-length Unicode encoding scheme which must be one of:</p>
<ul>
<li>'UTF-8'</li>
<li>'UTF-16'</li>
<li>'UTF-32'</li>
</ul>
<p>If not, a <code>DOMAIN ERROR</code> is issued.</p>
<p>If <code>X</code> is omitted, <code>Y</code> is a simple character or integer array, and the result <code>R</code> is a simple integer or character array with the same rank and shape as <code>Y</code>.</p>
<p>If <code>X</code> is specified, <code>Y</code> must be a simple character or integer vector, and the result <code>R</code> is a simple integer or character vector.</p>
<h5>Monadic <code>⎕UCS</code></h5>
<p>Used monadically, <code>⎕UCS</code> simply converts characters to Unicode code points and vice-versa.</p>
<p>With a few exceptions, the first 256 Unicode code points correspond to the ANSI character set.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'Hello World'</span>
<span class="m">72</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">114</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">100</span>

<span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">11</span><span class="o">⍴</span><span class="m">72</span><span class="w"> </span><span class="m">101</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">87</span><span class="w"> </span><span class="m">111</span><span class="w"> </span><span class="m">114</span><span class="w"> </span><span class="m">108</span><span class="w"> </span><span class="m">100</span>
<span class="nv">Hello</span><span class="w"> </span><span class="nv">World</span>
<span class="nv">Hello</span><span class="w"> </span><span class="nv">World</span>
</code></pre></div></p>
<p>The code points for the Greek alphabet are situated in the 900's:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'καλημέρα'</span>
<span class="m">954</span><span class="w"> </span><span class="m">945</span><span class="w"> </span><span class="m">955</span><span class="w"> </span><span class="m">951</span><span class="w"> </span><span class="m">956</span><span class="w"> </span><span class="m">941</span><span class="w"> </span><span class="m">961</span><span class="w"> </span><span class="m">945</span>
</code></pre></div></p>
<p>Unicode also contains the APL character set. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">123</span><span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">43</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">9077</span><span class="w"> </span><span class="m">41</span><span class="w"> </span><span class="m">247</span><span class="w"> </span><span class="m">9076</span><span class="w"> </span><span class="m">9077</span><span class="w"> </span><span class="m">125</span>
<span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷⍴</span><span class="bp">⍵</span><span class="kt">}</span>
</code></pre></div></p>
<h5>Dyadic <code>⎕UCS</code></h5>
<p>Dyadic <code>⎕UCS</code> is used to translate between Unicode characters and one of three standard variable-length Unicode encoding schemes, UTF-8, UTF-16 and UTF-32. These represent a Unicode character string as a vector of 1-byte (UTF-8), 2-byte (UTF-16) and 4-byte (UTF-32) signed integer values respectively.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'ABC'</span>
<span class="m">65</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">67</span>
<span class="w">      </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'ABCÆØÅ'</span>
<span class="m">65</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">134</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">152</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">133</span>
<span class="w">      </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">134</span><span class="o">,</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">152</span><span class="o">,</span><span class="w"> </span><span class="m">195</span><span class="w"> </span><span class="m">133</span>
<span class="err">ÆØÅ</span>
<span class="w">      </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'γεια σου'</span>
<span class="m">206</span><span class="w"> </span><span class="m">179</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="m">181</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="m">185</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="m">177</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">207</span><span class="w"> </span><span class="m">131</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="m">191</span><span class="w"> </span><span class="m">207</span><span class="w"> </span><span class="m">133</span>
<span class="w">      </span><span class="s1">'UTF-16'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'γεια σου'</span>
<span class="m">947</span><span class="w"> </span><span class="m">949</span><span class="w"> </span><span class="m">953</span><span class="w"> </span><span class="m">945</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">963</span><span class="w"> </span><span class="m">959</span><span class="w"> </span><span class="m">965</span>
<span class="w">      </span><span class="s1">'UTF-32'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'γεια σου'</span>
<span class="m">947</span><span class="w"> </span><span class="m">949</span><span class="w"> </span><span class="m">953</span><span class="w"> </span><span class="m">945</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">963</span><span class="w"> </span><span class="m">959</span><span class="w"> </span><span class="m">965</span>
</code></pre></div></p>
<p>Because integers are <em>signed</em>, numbers greater than 127 will be represented as 2-byte integers (type 163), and are thus not suitable for writing directly to a native file. To write the above data to file, the easiest solution is to use  <code>⎕UCS</code> to convert the data to 1-byte characters and append this data to the file:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">(</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'UTF-8'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'ABCÆØÅ'</span><span class="p">)</span><span class="w"> </span><span class="nf">⎕NAPPEND</span><span class="w"> </span><span class="nv">tn</span>
</code></pre></div></p>
<p><strong>Note regarding UTF-16:</strong> For most characters in the first plane of Unicode (0000-FFFF), UTF-16 and UCS-2 are identical. However, UTF-16 has the potential to encode all Unicode characters, by using more than 2 bytes for characters outside plane 1.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'UTF-16'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="s1">'ABCÆØÅ⍒⍋'</span>
<span class="m">65</span><span class="w"> </span><span class="m">66</span><span class="w"> </span><span class="m">67</span><span class="w"> </span><span class="m">198</span><span class="w"> </span><span class="m">216</span><span class="w"> </span><span class="m">197</span><span class="w"> </span><span class="m">9042</span><span class="w"> </span><span class="m">9035</span>
<span class="w">      </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">unihan</span><span class="kd">←</span><span class="nf">⎕UCS</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="o">×</span><span class="m">2</span><span class="o">*</span><span class="m">16</span><span class="p">)</span><span class="o">+⍳</span><span class="m">3</span><span class="w"> </span><span class="c1">⍝ x20001-x20003</span>

<span class="w">      </span><span class="s1">'UTF-16'</span><span class="w"> </span><span class="nf">⎕UCS</span><span class="w"> </span><span class="nv">unihan</span>
<span class="m">55360</span><span class="w"> </span><span class="m">56321</span><span class="w"> </span><span class="m">55360</span><span class="w"> </span><span class="m">56322</span><span class="w"> </span><span class="m">55360</span><span class="w"> </span><span class="m">56323</span>
</code></pre></div></p>
<h5>Translation Error</h5>
<p><code>⎕UCS</code> will generate a <code>DOMAIN ERROR</code> if the argument cannot be converted. Additionally, in the Classic Edition, a <code>TRANSLATION ERROR</code> is generated if the result is not in <code>⎕AV</code> or the numeric argument is not in <code>⎕AVU</code>.</p>
</article>
<article id="system-functions-using">
<div class="heading-container"><h3 class="heading" id="system-functions-using-header">Using (Microsoft .NET Search Path)</h3><div class="command">⎕USING</div></div>
<p><code>⎕USING</code> specifies a list of Microsoft .NET Namespaces that are to be searched for a reference to a .NET class. <code>⎕USING</code> has Namespace scope.</p>
<p><code>⎕USING</code> is a vector of character vectors each element of which contains 1 or 2 comma-delimited strings. The first string specifies the name of a .NET namespace; the second specifies the <em>pathname</em> of an assembly file. This may be a full pathname or a relative one, but must include the file extension (<code>.dll</code>). If just the file name is specified, it is assumed to be located in the standard  .NET Framework directory that was specified when the .NET Framework was installed (e.g. <code>C:\Windows\Microsoft.NET\Framework64\v4.0.30319</code>)</p>
<p>It is convenient to treat .NET namespaces and assemblies in pairs. For example:
<div class="highlight"><pre><span></span><code><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System,mscorlib.dll'</span>
<span class="w">  </span><span class="nf">⎕USING</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'System.Windows.Forms,System.Windows.Forms.dll'</span><span class="w">  </span><span class="nf">⎕USING</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'System.Drawing,System.Drawing.dll'</span>
</code></pre></div></p>
<p>Note that because Dyalog APL automatically loads <code>mscorlib.dll</code> (which contains the most commonly used classes in the <code>System</code> Namespace), it is not actually necessary to specify it explicitly in <code>⎕USING</code>.</p>
<p><code>⎕USING</code> has Namespace scope, i.e. each Dyalog APL Namespace, Class or Instance has its own value of <code>⎕USING</code> that is initially inherited from its parent space but which may be separately modified. <code>⎕USING</code> may also be localised in a function header, so that different functions can declare different search paths for .NET namespaces/assemblies.</p>
<p>If <code>⎕USING</code> is empty (<code>⎕USING←0⍴⊂''</code>), APL will not search for .NET classes in order to resolve names which would otherwise give a <code>VALUE ERROR</code>.</p>
<p>Assigning a simple character vector to <code>⎕USING</code> is equivalent to setting it to the enclose of that vector. The statement (<code>⎕USING←'')</code> does not empty <code>⎕USING</code>, it sets it to a single empty element, which gives access to <code>mscorlib.dll</code> and the  Bridge DLL without a namespace prefix.</p>
<h5>Notes</h5>
<ul>
<li>The value of <code>⎕USING</code> is only used when an object is instantiated. Changing the value of <code>⎕USING</code> has no effect on objects that have already been instantiated in the active workspace.</li>
<li>When a workspace containing .Net objects is saved, the names of the Net objects are saved with it but they are not automatically re-instantiated when the workspace is loaded or copied. A reference to such an orphaned object will report <code>(NULL)</code>. </li>
<li>Some functionality might work with .NET Framework or .NET but not both, for example, SharpPlot requires the .NET Framework and does not work with .NET itself.</li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="s1">'System'</span>
<span class="w">  </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nf">⎕USING</span>
<span class="na">.</span><span class="kd">→</span><span class="o">---------</span><span class="na">.</span>
<span class="o">|</span><span class="w"> </span><span class="na">.</span><span class="kd">→</span><span class="o">-----</span><span class="na">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="nv">System</span><span class="o">|</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="s1">'------'</span><span class="w"> </span><span class="o">|</span>
<span class="s1">'∊---------'</span>

<span class="nf">⎕USING</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'System.Windows.Forms,System.Windows.Forms.dll'</span>
<span class="nf">⎕USING</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'System.Drawing,System.Drawing.dll'</span>
</code></pre></div>
<p>An Assembly may contain top-level classes which are not packaged into .NET Namespaces. In this case, you omit the Namespace name. For example:
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">⎕USING</span><span class="kd">←</span><span class="o">,⊂</span><span class="s1">',.\LoanService.dll'</span>
</code></pre></div></p>
</article>
<article id="system-functions-vr">
<div class="heading-container"><h3 class="heading" id="system-functions-vr-header">Vector Representation</h3><div class="command">R←⎕VR Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which represents the name of a function or defined operator.</p>
<p>If <code>Y</code> is the name of a defined function or defined operator, <code>R</code> is a simple character vector containing a character representation of the function or operator with each line except the last terminated by the newline character (<code>⎕UCS ⎕AVU[4]</code>).</p>
<p>Its display form is as follows:</p>
<ol>
<li>the header line starts at column 8 with the <code>∇</code> symbol in column 6,</li>
<li>the line number for each line of the function starts in column 1,</li>
<li>the statement contained in each line starts at column 8 except for labelled lines or lines beginning with <code>⍝</code> which start at column 7,</li>
<li>the header line and statements contain no redundant blanks beyond column 7 except that the <code>⋄</code> separator is surrounded by single blanks, control structure indentation is preserved and comments retain embedded blanks as originally defined,</li>
<li>the last line shows only the <code>∇</code> character in column 6.</li>
</ol>
<p>If <code>Y</code> is the name of a variable, a locked function or operator, an external function, or is undefined, <code>R</code> is an empty vector.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="o">⍴</span><span class="nv">V</span><span class="kd">←</span><span class="nf">⎕VR</span><span class="s1">'PLUS'</span>
<span class="m">128</span>

<span class="w">      </span><span class="nv">V</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="kt">{</span><span class="nv">A</span><span class="kt">}</span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">B</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">   </span><span class="c1">⍝ MONADIC OR DYADIC +</span>
<span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="w">    </span><span class="kd">→</span><span class="nv">DYADIC</span><span class="o">⍴</span><span class="na">⍨</span><span class="m">2</span><span class="o">=</span><span class="nf">⎕NC</span><span class="s1">'A'</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">B</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">END</span>
<span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="w">   </span><span class="nv">DYADIC</span><span class="bp">:</span><span class="nv">R</span><span class="kd">←</span><span class="nv">A</span><span class="o">+</span><span class="nv">B</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="kd">→</span><span class="nv">END</span>
<span class="sr">[</span><span class="m">4</span><span class="sr">]</span><span class="w">   </span><span class="nv">END</span><span class="bp">:</span>
<span class="w">     </span><span class="bp">∇</span>
</code></pre></div>
<p>The definition of <code>⎕VR</code> has been extended to names assigned to functions by specification (<code>←</code>), and to local names of functions used as operands to defined operators. In these cases, the result of <code>⎕VR</code> is identical to that of <code>⎕CR</code> except that the representation of defined functions and operators is as described above.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">AVG</span><span class="kd">←</span><span class="nv">MEAN</span><span class="na">∘</span><span class="o">,</span>

<span class="w">      </span><span class="o">+</span><span class="nv">F</span><span class="kd">←</span><span class="nf">⎕VR</span><span class="s1">'AVG'</span>
<span class="w">      </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Arithmetic mean</span>
<span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">     </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span>
<span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="na">∘</span><span class="o">,</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">F</span>
<span class="m">3</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">F</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────┐</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="bp">∇</span><span class="w"> </span><span class="nv">R</span><span class="kd">←</span><span class="nv">MEAN</span><span class="w"> </span><span class="nv">X</span><span class="w">    </span><span class="c1">⍝ Arithmetic mean│ ∘ , │</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w">    </span><span class="nv">R</span><span class="kd">←</span><span class="p">(</span><span class="o">+</span><span class="na">/</span><span class="nv">X</span><span class="p">)</span><span class="o">÷⍴</span><span class="nv">X</span><span class="w">                   </span><span class="err">│</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="bp">∇</span><span class="w">                              </span><span class="err">│</span><span class="w">     </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────────────────────────────────────┘</span><span class="w">     </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────────────────────────────────────┘</span>
</code></pre></div>
</article>
<article id="system-functions-vfi">
<div class="heading-container"><h3 class="heading" id="system-functions-vfi-header">Verify &amp; Fix Input</h3><div class="command">R←{X}⎕VFI Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector. <code>X</code> is optional.  If present, <code>X</code> must be a simple character scalar or vector.  <code>R</code> is a nested vector of length two whose first item is a simple logical vector and whose second item is a simple numeric vector of the same length as the first item of <code>R</code>.</p>
<p><code>Y</code> is the character representation of a series of numeric constants.  If <code>X</code> is omitted, adjacent numeric strings are separated by one or more blanks.  Leading and trailing blanks and separating blanks in excess of one are redundant and ignored.  If <code>X</code> is present, <code>X</code> specifies one or more alternative separating characters.  Blanks in leading and trailing positions in <code>Y</code> and between numeric strings separated also by the character(s) in <code>X</code> are redundant and ignored.  Leading, trailing and adjacent occurrences of the character(s) in <code>X</code> are not redundant.  The character 0 is implied in <code>Y</code> before a leading character, after a trailing character, and between each adjacent pair of characters specified by <code>X</code>.</p>
<p>The length of the items of <code>R</code> is the same as the number of identifiable strings (or implied strings) in <code>Y</code> separated by blank or the value of <code>X</code>.  An element of the first item of <code>R</code> is 1 where the corresponding string in <code>Y</code> is a valid numeric representation, or 0 otherwise.  An element of the second item of <code>R</code> is the numeric value of the corresponding string in <code>Y</code> if it is a valid numeric representation, or 0 otherwise.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕VFI</span><span class="w"> </span><span class="s1">'2 -2 ¯2'</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯2</span>

<span class="w">      </span><span class="nf">⎕VFI</span><span class="w"> </span><span class="s1">'12.1 1E1 1A1 ¯10'</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">12.1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">¯10</span>

<span class="w">      </span><span class="o">⊃</span><span class="p">(</span><span class="na">//</span><span class="nf">⎕VFI</span><span class="s1">'12.1 1E1 1A1 ¯10'</span><span class="p">)</span>
<span class="m">12.1</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">¯10</span>

<span class="w">      </span><span class="s1">','</span><span class="nf">⎕VFI</span><span class="s1">'3.9,2.4,,76,'</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">3.9</span><span class="w"> </span><span class="m">2.4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">76</span><span class="w"> </span><span class="m">0</span>

<span class="w">      </span><span class="s1">'⋄'</span><span class="nf">⎕VFI</span><span class="s1">'1 ⋄ 2 3 ⋄ 4 '</span>
<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span>
<span class="w">      </span><span class="p">(</span><span class="no">⍬</span><span class="w"> </span><span class="no">⍬</span><span class="p">)</span><span class="o">≡</span><span class="nf">⎕VFI</span><span class="s1">''</span>
<span class="m">1</span>
</code></pre></div>
</article>
<article id="system-functions-wa">
<div class="heading-container"><h3 class="heading" id="system-functions-wa-header">Workspace Available</h3><div class="command">R←⎕WA</div></div>
<p>This is a simple integer scalar.  It identifies the total available space in the active workspace area given as the number of bytes it could hold.</p>
<p>A side effect of using <code>⎕WA</code> is an internal reorganisation of the workspace and process memory, as follows:</p>
<ol>
<li>Any un-referenced memory is discarded. This process, known as <em>garbage collection</em>, is required because whole cycles of refs can become un-referenced.</li>
<li>Numeric arrays are <em>demoted</em> to their tightest form. For example, a simple numeric array that happens to contain only values 0 or 1, is demoted or <em>squeezed</em> to have a <code>⎕DR</code> type of 11 (Boolean).</li>
<li>All remaining used memory blocks are copied to the low-address end of the workspace, leaving a single free block at the high-address end. This process is known as <em>compaction</em>.</li>
<li>All memory allocated is returned to the Operating System except the space required for the compacted workspace, plus a working overhead based on the configured maximum workspace size (<strong>MAXWS</strong>). If the compacted workspace occupies more than 1/16 of <strong>MAXWS</strong> then the overhead is 1/16 of MAXWS, otherwise it is 1/64 of <strong>MAXWS</strong>. On a Windows system, you can see the process size changing by using Task Manager.</li>
</ol>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕WA</span>
<span class="m">261412</span>
</code></pre></div>
<p>See also: <a class="internal-link" href="#the-i-beam-operator-specify-workspace-available">Section 3.2.24</a></p>
</article>
<article id="system-functions-wc">
<div class="heading-container"><h3 class="heading" id="system-functions-wc-header">Window Create Object</h3><div class="command">{R}←{X}⎕WC Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This system function creates a GUI <strong>object</strong>.  <code>Y</code> is either a vector which specifies <strong>properties</strong> that determine the new object's appearance and behaviour, or a ref to or the <code>⎕OR</code> of a GUI object that exists or previously existed.  <code>X</code> is a character vector which specifies the name of the new object, and its position in the object hierarchy.</p>
<p>If <code>X</code> is omitted, <code>⎕WC</code> attaches a GUI component to the current namespace, retaining any functions, variables and other namespaces that it may contain.  Monadic <code>⎕WC</code> is discussed in detail at the end of this section.</p>
<p>If <code>Y</code> is a nested vector each element specifies a property.  The <code>Type</code> property (which specifies the class of the object) <strong>must</strong> be specified.  Most other properties take default values and need not be explicitly stated.  Properties (including <code>Type</code>) may be declared either positionally or with a keyword followed by a value. Note that <code>Type</code> must always be the first property specified. Properties are specified positionally by placing their values in <code>Y</code> in the order prescribed for an object of that type.</p>
<p>If <code>Y</code> is a ref or the result of <code>⎕OR</code>, the new object is a complete copy of the other, including any child objects, namespaces, functions and variables that it contained at that time.</p>
<p>The shy result <code>R</code> is the full name (starting <code>#.</code> or   <code>⎕SE</code>.) of the namespace <code>X</code>.</p>
<p>An object's name is specified by giving its full pathname in the object hierarchy.  At the top of the hierarchy is the <code>Root</code> object whose name is "<code>.</code>".  Below "<code>.</code>" there may be one or more "top-level" objects.  The names of these objects follow the standard rules for other APL objects as described in <em>Chapter 1</em>.</p>
<p>Names for sub-objects follow the same rules except that the character "<code>.</code>" is used as a delimiter to indicate parent/child relationships.</p>
<p>The following are examples of legal and illegal names:</p>
<table>
<thead>
<tr>
<th>Legal</th>
<th>Illegal</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FORM1</code></td>
<td><code>FORM 1</code></td>
</tr>
<tr>
<td><code>form_23</code></td>
<td><code>form#1</code></td>
</tr>
<tr>
<td><code>Form1.Gp</code></td>
<td><code>11_Form</code></td>
</tr>
<tr>
<td><code>F1.g2.b34</code></td>
<td><code>Form+1</code></td>
</tr>
</tbody>
</table>
<p>If <code>X</code> refers to the name of an APL variable, label, function, or operator, a <code>DOMAIN ERROR</code> is reported.  If <code>X</code> refers to the name of an existing GUI object or namespace, the existing one is replaced by the new one.  The effect is the same as if it were deleted first.</p>
<p>If <code>Y</code> refers to a non-existent property, or to a property that is not defined for the type of object <code>X</code>, a <code>DOMAIN ERROR</code> is reported.  A <code>DOMAIN ERROR</code> is also reported if a value is given that is inconsistent with the corresponding property.  This can occur for example, if <code>Y</code> specifies values positionally and in the wrong order.</p>
<p>A "top-level" object created by <code>⎕WC</code> whose name is localised in a function/operator header, is deleted on exit from the function/operator.  All objects, including sub-objects, can be deleted using <code>⎕EX</code>.</p>
<p>GUI objects are named <strong>relative</strong> to the current namespace, so the following examples are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F1.B1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Button'</span>
</code></pre></div></p>
<p>is equivalent to :
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">F1</span>
<span class="c1">#.F1</span>
<span class="w">      </span><span class="s1">'B1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Button'</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span>
<span class="c1">#</span>
</code></pre></div></p>
<p>is equivalent to :
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'B1'</span><span class="w"> </span><span class="nv">F1</span><span class="na">.</span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Button'</span>
</code></pre></div></p>
<p class="example">Examples</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">⍝ Create a default Form called F1</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span>
<span class="w"> </span>
<span class="c1">⍝ Create a Form with specified properties (by position)</span>
<span class="c1">⍝   Caption = "My Application"  (Title)</span>
<span class="c1">⍝   Posn    = 10 30  (10% down, 30% across)</span>
<span class="c1">⍝   Size    = 80 60  (80% high, 60% wide)</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span><span class="w"> </span><span class="s1">'My Application'</span><span class="w"> </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">30</span><span class="p">)(</span><span class="m">80</span><span class="w"> </span><span class="m">60</span><span class="p">)</span>
<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">⍝ Create a Form with specified properties (by keyword)</span>
<span class="c1">⍝   Caption = "My Application"  (Title)</span>
<span class="c1">⍝   Posn    = 10 30  (10% down, 30% across)</span>
<span class="c1">⍝   Size    = 80 60  (80% high, 60% wide)</span>
<span class="w"> </span>
<span class="w">      </span><span class="nv">PROPS</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'Type'</span><span class="w"> </span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">PROPS</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'My Application'</span>
<span class="w">      </span><span class="nv">PROPS</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'Posn'</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">30</span>
<span class="w">      </span><span class="nv">PROPS</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'Size'</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">60</span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="nv">PROPS</span>
<span class="w"> </span>
<span class="c1">⍝ Create a default Button (a pushbutton) in the Form F1</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1.BTN'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Button'</span>
<span class="w"> </span>
<span class="c1">⍝ Create a pushbutton labelled "Ok"</span>
<span class="c1">⍝ 10% down and 10% across from the start of the FORM</span>
<span class="c1">⍝ with callback function FOO associated with EVENT 30</span>
<span class="c1">⍝ (this event occurs when the user presses the button)</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1.BTN'</span><span class="nf">⎕WC</span><span class="s1">'Button'</span><span class="w"> </span><span class="s1">'&amp;Ok'</span><span class="w"> </span><span class="p">(</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="p">)(</span><span class="s1">'Event'</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="s1">'FOO'</span><span class="p">)</span>
</code></pre></div></p>
<p>Monadic <code>⎕WC</code> is used to <em>attach</em> a GUI component to an existing object.  The existing object must be a pure namespace or a GUI object.  The operation may be performed by changing space to the object or by running <code>⎕WC</code> <em>inside</em> the object using the <em>dot</em> syntax.  For example, the following statements are equivalent.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">F</span>
<span class="c1">#.F</span>
<span class="w">      </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span><span class="w">  </span><span class="c1">⍝ Attach a Form to this namespace</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span>
<span class="c1">#</span>
<span class="w">      </span><span class="nv">F</span><span class="na">.</span><span class="nf">⎕WC</span><span class="s1">'Form'</span><span class="w"> </span><span class="c1">⍝ Attach a Form to namespace F</span>
</code></pre></div></p>
</article>
<article id="system-functions-wg">
<div class="heading-container"><h3 class="heading" id="system-functions-wg-header">Window Get Property</h3><div class="command">R←{X}⎕WG Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This system function returns property values for a GUI object.</p>
<p><code>X</code> is a namespace reference or a character vector containing the name of the object. <code>Y</code> is a character vector or a vector of character vectors containing the name(s) of the properties whose values are required. The result <code>R</code> contains the current values of the specified properties. If <code>Y</code> specifies a single property name, a single property value is returned. If <code>Y</code> specifies more than one property, <code>R</code> is a vector with one element per name in <code>Y</code>.</p>
<p>If <code>X</code> refers to a non-existent GUI name, a <code>VALUE ERROR</code> is reported. If <code>Y</code> refers to a non-existent property, or to a property that is not defined for the type of object <code>X</code>, a <code>DOMAIN ERROR</code> is reported.</p>
<p>GUI objects are named <strong>relative</strong> to the current namespace. A null value of <code>X</code> (referring to the namespace in which the function is being evaluated) may be omitted. The following examples are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F1.B1'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span>
<span class="w">      </span><span class="s1">'B1'</span><span class="w"> </span><span class="nv">F1</span><span class="na">.</span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span>
<span class="w">      </span><span class="s1">''</span><span class="w"> </span><span class="nv">F1</span><span class="na">.</span><span class="nv">B1</span><span class="na">.</span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span>
<span class="w">      </span><span class="nv">F1</span><span class="na">.</span><span class="nv">B1</span><span class="na">.</span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span><span class="w"> </span><span class="s1">'TEST'</span>

<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span>
<span class="nv">TEST</span>

<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'MaxButton'</span>
<span class="m">1</span>

<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Size'</span>
<span class="m">50</span><span class="w"> </span><span class="m">50</span>

<span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WG</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'MaxButton'</span><span class="w"> </span><span class="s1">'Size'</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────┐</span>
<span class="err">│</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">TEST</span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="m">50</span><span class="w"> </span><span class="m">50</span><span class="err">│</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="err">└────┘</span><span class="w">   </span><span class="err">└</span><span class="o">~</span><span class="err">────┘</span><span class="w"> </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">─────────────────┘</span>
</code></pre></div>
</article>
<article id="system-functions-wn">
<div class="heading-container"><h3 class="heading" id="system-functions-wn-header">Window Child Names</h3><div class="command">R←{X}⎕WN Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This system function reports the GUI objects whose parent is <code>Y</code>.</p>
<p>If <code>Y</code> is a name (i.e. is a character vector) then the result <code>R</code> is a vector of character vectors containing the names of the named direct GUI children of <code>Y</code>.</p>
<p>If <code>Y</code> is a reference  then the result <code>R</code> is a vector of references to  the direct GUI children of <code>Y</code>, named or otherwise.</p>
<p>The optional left argument <code>X</code> is a character vector which specifies the <code>Type</code> of GUI object to be reported; if <code>X</code> is not specified, no such filtering is performed.</p>
<p>Names of objects further down the tree are not returned, but can be obtained by recursive use of <code>⎕WN</code>.</p>
<p>If <code>Y</code> refers to a namespace with no GUI element, a <code>VALUE ERROR</code> is reported.</p>
<p>Note that <code>⎕WN</code> reports <strong>only</strong> those child objects visible from the current thread.</p>
<p>GUI objects are named <strong>relative</strong> to the current namespace.  The following examples are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕WN</span><span class="w"> </span><span class="s1">'F1.B1'</span>
<span class="w">      </span><span class="nv">F1</span><span class="na">.</span><span class="nf">⎕WN</span><span class="w"> </span><span class="s1">'B1'</span>
<span class="w">      </span><span class="nv">F1</span><span class="na">.</span><span class="nv">B1</span><span class="na">.</span><span class="nf">⎕WN</span><span class="w"> </span><span class="s1">''</span><span class="w">    </span>
</code></pre></div></p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">f</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="o">⊂</span><span class="s1">'Form'</span>
<span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="nv">n</span><span class="kd">←</span><span class="nf">⎕ns</span><span class="s1">''</span><span class="w">                  </span><span class="c1">⍝ A non-GUI object       </span>
<span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="nv">l</span><span class="kd">←</span><span class="nv">f</span><span class="na">.</span><span class="nf">⎕NEW</span><span class="o">⊂</span><span class="s1">'Label'</span><span class="w">         </span><span class="c1">⍝ A reference to a Label</span>
<span class="w">      </span><span class="s1">'f.b1'</span><span class="nf">⎕wc</span><span class="s1">'Button'</span><span class="w">          </span><span class="c1">⍝ A named Button</span>
<span class="w">      </span><span class="nv">f</span><span class="na">.</span><span class="p">(</span><span class="nv">b2</span><span class="kd">←</span><span class="nf">⎕new</span><span class="w"> </span><span class="o">⊂</span><span class="s1">'Button'</span><span class="p">)</span><span class="w">      </span><span class="c1">⍝ A reference to a Button</span>
<span class="w">      </span><span class="nf">⎕wn</span><span class="w"> </span><span class="s1">'f'</span>
<span class="w"> </span><span class="sr">[</span><span class="nv">Form</span><span class="sr">]</span><span class="na">.</span><span class="nv">b1</span>
<span class="w">      </span><span class="nf">⎕wn</span><span class="w"> </span><span class="nv">f</span>
<span class="w"> </span><span class="c1">#.[Form].[Label]  #.[Form].b1  #.[Form].[Button]</span>
<span class="w">      </span><span class="s1">'Button'</span><span class="w"> </span><span class="nf">⎕wn</span><span class="w"> </span><span class="nv">f</span>
<span class="w"> </span><span class="c1">#.[Form].b1  #.[Form].[Button]</span>
</code></pre></div>
</article>
<article id="system-functions-ws">
<div class="heading-container"><h3 class="heading" id="system-functions-ws-header">Window Set Property</h3><div class="command">{R}←{X}⎕WS Y</div></div>
<p><strong>Windows only.</strong></p>
<p>This system function resets property values for a GUI object.</p>
<p><code>X</code> is a namespace reference or a character vector containing the name of the object.  <code>Y</code> defines the property or properties to be changed and the new value or values.  If a single property is to be changed, <code>Y</code> is a vector whose first element <code>Y[1]</code> is a character vector containing the property name.  If <code>Y</code> is of length 2, <code>Y[2]</code> contains the corresponding property value.  However, if the property value is itself a numeric or nested vector, its elements may be specified in <code>Y[2 3 4 ...]</code> instead of as a single nested element in <code>Y[2]</code>.  If <code>Y</code> specifies more than one property, they may be declared either positionally or with a keyword followed by a value.  Properties are specified positionally by placing their values in <code>Y</code> in the order prescribed for an object of that type.  Note that the first property in <code>Y</code> must always be specified with a keyword because the <code>Type</code> property (which is expected first) may not be changed using <code>⎕WS</code>.</p>
<p>If <code>X</code> refers to a non-existent GUI name, a <code>VALUE ERROR</code> is reported.  If <code>Y</code> refers to a non-existent property, or to a property that is not defined for the type of object <code>X</code>, or to a property whose value may not be changed by <code>⎕WS</code>, a <code>DOMAIN ERROR</code> is reported.</p>
<p>The shy result <code>R</code> contains the previous values of the properties specified in <code>Y</code>.</p>
<p>GUI objects are named <strong>relative</strong> to the current namespace.  A null value of <code>X</code> (referring to the namespace in which the function is being evaluated) may be omitted.  The following examples are equivalent:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F1.B1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'&amp;Ok'</span>
<span class="w">      </span><span class="s1">'B1'</span><span class="w"> </span><span class="nv">F1</span><span class="na">.</span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'&amp;Ok'</span>
<span class="w">      </span><span class="s1">''</span><span class="w"> </span><span class="nv">F1</span><span class="na">.</span><span class="nv">B1</span><span class="na">.</span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'&amp;Ok'</span>
<span class="w">      </span><span class="nv">F1</span><span class="na">.</span><span class="nv">B1</span><span class="na">.</span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'&amp;Ok'</span>
</code></pre></div></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span><span class="w">  </span><span class="c1">⍝ A default Form</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Active'</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Caption'</span><span class="w"> </span><span class="s1">'My Application'</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Posn'</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="p">(</span><span class="s1">'Active'</span><span class="w"> </span><span class="m">1</span><span class="p">)(</span><span class="s1">'Event'</span><span class="w"> </span><span class="s1">'Configure'</span><span class="w"> </span><span class="s1">'FOO'</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'Junk'</span><span class="w"> </span><span class="m">10</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w"> </span>
<span class="w">      </span><span class="s1">'F1'</span><span class="w"> </span><span class="nf">⎕WS</span><span class="w"> </span><span class="s1">'MaxButton'</span><span class="w"> </span><span class="m">0</span>
<span class="nv">DOMAIN</span><span class="w"> </span><span class="nv">ERROR</span>
</code></pre></div>
</article>
<article id="system-functions-wsid">
<div class="heading-container"><h3 class="heading" id="system-functions-wsid-header">Workspace Identification</h3><div class="command">⎕WSID</div></div>
<p>This is a simple character vector.  It contains the identification name of the active workspace.  If a new name is assigned, that name becomes the identification name of the active workspace, provided that it is a correctly formed name.</p>
<p>See <i> Workspaces</i> for workspace naming conventions.</p>
<p>It is useful, though not essential, to associate workspaces with a specific directory in order to distinguish workspaces from other files.</p>
<p>The value of <code>⎕WSID</code> in a clear workspace is <code>'CLEAR WS'</code>. <code>⎕WSID</code> has workspace scope.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕WSID</span>
<span class="nv">CLEAR</span><span class="w"> </span><span class="nv">WS</span>

<span class="w">      </span><span class="nf">⎕WSID</span><span class="kd">←</span><span class="s1">'ws/mywork       (UNIX)</span>

<span class="s1">      ⎕WSID←'</span><span class="nv">B</span><span class="bp">:</span><span class="na">\</span><span class="nv">WS</span><span class="na">\</span><span class="nv">MYWORK</span><span class="err">'</span><span class="w">   </span><span class="p">(</span><span class="nv">Windows</span><span class="p">)</span>
</code></pre></div>
</article>
<article id="system-functions-wx">
<div class="heading-container"><h3 class="heading" id="system-functions-wx-header">Window Expose</h3><div class="command">⎕WX</div></div>
<p><code>⎕WX</code> is a system variable with the value 0, 1or 3. <code>⎕WX</code> has Namespace scope.</p>
<p>Considered as a sum of bit flags, the first bit in <code>⎕WX</code> specifies (a); the second  (b) as follows:</p>
<ol>
<li>whether or not the names of properties, methods and events provided by a Dyalog APL GUI object are exposed </li>
<li>certain aspects of behaviour of .NET and COM objects</li>
</ol>
<p>If <code>⎕WX</code> is 1 (1<sup>st</sup> bit is set), the names of properties, methods and events are exposed as reserved names in GUI namespaces and can be accessed directly by name. This means that the same names may not be used for global variables in GUI namespaces.</p>
<p>If <code>⎕WX</code> is 0, these names are hidden and may only be accessed indirectly using <code>⎕WG</code> and <code>⎕WS</code>.</p>
<p>If <code>⎕WX</code> is 3 (2<sup>nd</sup> bit is also set) COM and .NET objects adopt the  behaviour introduced in Version 11, as opposed to the behaviour in previous versions of Dyalog APL.</p>
<p>Any attempt to set <code>⎕WX</code> to 2 generates a <code>DOMAIN ERROR</code>.</p>
<p>Note that it is the value of <code>⎕WX</code> in the object itself, rather than the value of <code>⎕WX</code> in the calling environment, that determines its behaviour.</p>
<p>When you create an object, its <code>⎕WX</code> (like any other system variable) is initially inherited from its parent.</p>
<p>If the value of <code>⎕WX</code> of a GUI object is initially 0, it will not expose its members. If you subsequently change it from 0 to 1, it will expose them. If you change its <code>⎕WX</code> back to 0, it will not expose any yet-unexposed members, although already-exposed members will continue to be exposed.</p>
<p>The value of <code>⎕WX</code> in a clear workspace is defined by the default_wx parameter (see <i> default_wx</i>) which itself defaults to 3.</p>
<p><code>⎕WX</code> has namespace scope and may be localised in a function header. This allows you to create a utility namespace or utility function in which the exposure of objects is known and determined, regardless of its global value in the workspace.</p>
<h5>Notes</h5>
<ul>
<li>The visibility of the properties and methods of the Root object are not controlled by <code>⎕WX</code> but by the <strong>PropertyExposeRoot</strong> parameter. For further information, see <i> PropertyExposeRoot</i>.</li>
<li><code>⎕WX</code> is retained for backwards compatibility and should be considered as deprecated. Dyalog recommends  <code>⎕WX</code> be set to 3 and never changed.</li>
</ul>
</article>
<article id="system-functions-xml">
<div class="heading-container"><h3 class="heading" id="system-functions-xml-header">XML Convert</h3><div class="command">R←{X} ⎕XML Y</div></div>
<p><code>⎕XML</code> converts an XML string into an APL array or converts an APL array into an XML string.</p>
<p>Options for <code>⎕XML</code> are specified using the Variant operator <code>⍠</code> or by the optional left argument <code>X</code>. The former is recommended but the older mechanism using the left argument is still supported.</p>
<p>For conversion <em>from</em> XML, <code>Y</code> is a character vector containing an XML string. The result <code>R</code> is a 5 column matrix whose columns are made up as follows:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Numeric value which indicates the level of nesting</td>
</tr>
<tr>
<td>2</td>
<td>Element name, other markup text, or empty character vector when empty</td>
</tr>
<tr>
<td>3</td>
<td>Character data or empty character vector when empty</td>
</tr>
<tr>
<td>4</td>
<td>Attribute name and value pairs, ( <code>0 2⍴⊂''</code> ) when empty</td>
</tr>
<tr>
<td>5</td>
<td>A numeric value which indicates what the row contains</td>
</tr>
</tbody>
</table>
<p>The values in column 5  have the following meanings:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Element</td>
</tr>
<tr>
<td>2</td>
<td>Child element</td>
</tr>
<tr>
<td>4</td>
<td>Character data</td>
</tr>
<tr>
<td>8</td>
<td>Markup not otherwise defined</td>
</tr>
<tr>
<td>16</td>
<td>Comment markup</td>
</tr>
<tr>
<td>32</td>
<td>Processing instruction markup</td>
</tr>
</tbody>
</table>
<p>These values are additive. For example, a value of 5 in column 5 means that the row contains both an element (value 1) and character data (value 4).</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">x</span><span class="kd">←</span><span class="s1">'&lt;xml&gt;&lt;document id="001"&gt;An introduction to XML'</span>
<span class="w">      </span><span class="nv">x</span><span class="o">,</span><span class="kd">←</span><span class="s1">'&lt;/document&gt;&lt;/xml&gt;'</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">v</span><span class="kd">←</span><span class="nf">⎕XML</span><span class="w"> </span><span class="nv">x</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────────────────────────────────────────┐</span>
<span class="o">↓</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">      </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">                      </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="err">│</span><span class="nv">xml</span><span class="err">│</span><span class="w">      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">                      </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">    </span><span class="m">3</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┘</span><span class="w">      </span><span class="err">└─┘</span><span class="w">                      </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">      </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─────────────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">───────────┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="nv">document</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">An</span><span class="w"> </span><span class="nv">introduction</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">XML</span><span class="err">│</span><span class="w"> </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└────────┘</span><span class="w"> </span><span class="err">└──────────────────────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">id</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="m">001</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                       </span><span class="err">│</span><span class="w"> </span><span class="err">└──┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                                       </span><span class="err">└</span><span class="o">∊</span><span class="err">───────────┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">───────────────────────────────────────────────────────┘</span>
</code></pre></div></p>
<p>For conversion <em>to</em> XML, <code>Y</code> is a 3, 4 or 5 column matrix and the result <code>R</code> is a character vector. The columns of <code>Y</code> have the same meaning as those described above for the result of converting <em>from</em> XML.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕XML</span><span class="w"> </span><span class="nv">v</span>
<span class="o">&lt;</span><span class="nv">xml</span><span class="o">&gt;</span><span class="w"> </span>
<span class="w">  </span><span class="o">&lt;</span><span class="nv">document</span><span class="w"> </span><span class="nv">id</span><span class="o">=</span><span class="s2">"001"</span><span class="o">&gt;</span><span class="nv">An</span><span class="w"> </span><span class="nv">introduction</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">XML</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">document</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="na">/</span><span class="nv">xml</span><span class="o">&gt;</span>
</code></pre></div>
<h5>Introduction to XML and Glossary of Terms</h5>
<p>XML is an open standard, designed to allow exchange of data between applications. The full specification <span class="footnote">http://www.w3.org/TR/2008/REC-xml-20081126/</span> describes functionality, including processing directives and other directives, which can transform XML data as it is read, and which a full XML processor would be expected to handle.</p>
<p>The <code>⎕XML</code> function is designed to handle XML to the extent required to import and export APL data. It favours speed over complexity - some markup is tolerated but largely ignored, and there are no XML query or validation features. APL applications which require processing, querying or validation will need to call external tools for this, and finally call <code>⎕XML</code> on the resulting XML to perform the transformation into APL arrays.</p>
<p>XML grammar such as processing instructions, document type declarations etc. may optionally be stored in the APL array, but will not be processed or validated. This is principally to allow regeneration of XML from XML input which contains such structures, but an APL application could process the data if it chose to do so.</p>
<p>The XML definition uses specific terminology to describe its component parts. The following is a summary of the terms used in this section:</p>
<h6>Character Data</h6>
<p>Character data consists of free-form text. The free-form text should not include the characters '&gt;', '&lt;' or '&amp;', so these must be represented by their entity references ('&gt;', '&lt;' and '&amp;' respectively), or numeric character references.</p>
<h6>Entity References and Character References</h6>
<p>Entity references are named representations of single characters which cannot normally be used in character data because they are used to delimit markup, such as &gt; for '&gt;'. Character references are numeric representations of any character, such as  for space. Note that character references always take values in the Unicode code space, regardless of the encoding of the XML text itself.</p>
<p><code>⎕XML</code> converts entity references and all character references which the APL character set is able to represent into their character equivalent when generating APL array data; when generating XML it converts any or all characters to entity references as needed.</p>
<p>There is a predefined set of entity references, and the XML specification allows others to be defined within the XML using the <code>&lt;!ENTITY &gt;</code> markup. <code>⎕XML</code> does not process these additional declarations and therefore will only convert the predefined types.</p>
<h6>Whitespace</h6>
<p>Whitespace sequences consist of one or more spaces, tabs or line-endings. Within character data, sequences of one or more whitespace characters are replaced with a single space when this is enabled by the whitespace option. Line endings are represented differently on different systems (0x0D 0x0A, 0x0A and 0x0D are all used) but are normalized by converting them all to 0x0A before the XML is parsed, regardless of the setting of the whitespace option.</p>
<h6>Elements</h6>
<p>An element consists of a balanced pair of tags or a single empty element tag. Tags are given names, and start and end tag names must match.</p>
<p>An example pair of tags, named TagName is</p>
<p><code>&lt;TagName&gt;&lt;/TagName&gt;</code></p>
<p>This pair is shown with no content between the tags; this may be abbreviated as an empty element tag as</p>
<p><code>&lt;TagName/&gt;</code></p>
<p>Tags may be given zero or more attributes, which are specified as name/value pairs; for example</p>
<p><code>&lt;TagName AttName="AttValue"&gt;</code></p>
<p>Attribute values may be delimited by either double quotes as shown or single quotes (apostrophes); they may not contain certain characters (the delimiting quote, '&amp;' or '&lt;') and these must be represented by entity or character references.</p>
<p>The content of elements may be zero or more mixed occurrences of character data and nested elements. Tags and attribute names <em>describe</em> data, attribute values and the content within tags contain the data itself. Nesting of elements allows structure to be defined.</p>
<p>Because certain markup which describes the format of allowable data (such as element type declarations and attribute-list declarations) is not processed, no error will be reported if element contents and attributes do not conform to their restricted declarations, nor are attributes automatically added to tags if not explicitly given.</p>
<p>Attributes with names beginning <strong>xml:</strong> are reserved. Only <strong>xml:space</strong> is treated specially by <code>⎕XML</code>. When converting both from and to XML, the value for this attribute has the following effects on space normalization for the character data within this element and child elements within it (unless subsequently overridden):</p>
<ul>
<li><strong>default</strong> – space normalization is as determined by the <strong>whitespace</strong> option. </li>
<li><strong>preserve</strong> - space normalization is disabled – all whitespace is preserved as given.</li>
<li><strong>any other value</strong> – rejected.</li>
</ul>
<p>Regardless of whether the attribute name and value have a recognised meaning, the attribute will be included in the APL array / generated XML. Note that when the names and values of attributes are examined, the comparisons are case-sensitive and take place after entity references and character references have been expanded.</p>
<h6>Comments</h6>
<p>Comments are fully supported markup. They are delimited by '<!--' and '-->' and all text between these delimiters is ignored. This text is included in the APL array if markup is being preserved, or discarded otherwise.</p>
<h6>CDATA Sections</h6>
<p>CDATA Sections are fully supported markup. They are used to delimit text within character data which has, or may have, markup text in it which is not to be processed as such. They and are delimited by '&lt;![CDATA[' and ']]&gt;'. CDATA sections are never recorded in the APL array as markup when XML is processed – instead, that data appears as character data. Note that this means that if you convert XML to an APL array and then convert this back to XML, CDATA sections will not be regenerated. It is, however, <em>possible</em> to generate CDATA sections in XML by presenting them as markup.</p>
<h6>Processing Instructions</h6>
<p>Processing Instructions are delimited by '&lt;&amp;' and '&amp;&gt;' but are otherwise treated as other markup, below.</p>
<h6>Other markup</h6>
<p>The remainder of XML markup, including document type declarations,  XML declarations and text declarations are all delimited by '&lt;!' and '&gt;', and may contain nested markup. If markup is being preserved the text, including nested markup, will appear as a single row in the APL array.  <code>⎕XML</code> does not process the contents of such markup. This has varying effects, including but not limited to the following:</p>
<ul>
<li>No validation is performed.</li>
<li>Constraints specified in markup such element type declarations will be ignored and therefore syntactically correct elements which fall outside their constraint will not be rejected.</li>
<li>Default attributes in attribute-list declarations will not be automatically added to elements.</li>
<li>Conditional sections will always be ignored.</li>
<li>Only standard, predefined, entity references will be recognized; entity declarations which define others entity references will have no effect.</li>
<li>External entities are not processed.</li>
</ul>
<h5>Conversion from XML</h5>
<ul>
<li>The level number in the first column of the result <code>R</code> is 0 for the outermost level and subsequent levels are represented by an increase of 1 for each level. Thus, for</li>
<li><xml><document id="001">An introduction to XML </document></xml></li>
<li>The <em>xml</em> element is at level 0 and the <em>document id</em> element is at level 1. The text within the <em>document id</em> element is at level 2.</li>
<li>Each tag in the XML contains an element name and zero or more attribute name and value pairs, delimited by '&lt;' and '&gt;' characters. The delimiters are not included in the result matrix. The element name of a tag is stored in column 2 and the attribute(s) in column 4.</li>
<li>All XML markup other than tags are delimited by either '&lt;!' and '&gt;', or '&lt;?' and '&gt;' characters. By default these are not stored in the result matrix but the <strong>markup</strong> option may be used to specify that they are. The elements are stored in their entirety, except for the leading and trailing '&lt;' and '&gt;' characters, in column 2. Nested constructs are treated as a single block. Because the leading and trailing '&lt;' and '&gt;' characters are stripped, such entries will always have either '!' or '&amp;' as the first character.</li>
<li>Character data itself has no tag name or attributes. As an optimisation, when character data is the sole content of an element, it is included with its parent rather than as a separate row in the result. Note that when this happens, the level number stored is that of the parent; the data itself implicitly has a level number one greater.</li>
<li>Attribute name and value pairs associated with the element name are stored in the fourth column, in an (<em>n x 2</em>) matrix of character values, for the <em>n</em> (including zero) pairs.</li>
<li>Each row is further described in the fifth column as a convenience to simplify processing of the array (although this information could be deduced). Any given row may contain an entry for an element, character data, markup not otherwise defined, a comment or a processing instruction. Furthermore, an element will have zero or more of these as children. For all types except elements, the value in the fifth column is as shown above. For elements, the value is computed by adding together the value of the row itself (1) and those of its children. For example, the value for a row for an element which contains one or more sub-elements and character data is 7 – that is 1 (element) + 2 (child element) + 4 (character data). It should be noted that:</li>
<li>Odd values always represent elements. Odd values other than 1 indicate that there are children.</li>
<li>Elements which contain just character data (5) are combined into a single row as noted previously.</li>
<li>Only immediate children are considered when computing the value. For example, an element which contains a sub-element which in turn contains character data does not itself contain the character data.</li>
<li>The computed value is derived from what is actually preserved in the array. For example, if the source XML contains an element which contains a comment, but comments are being discarded, there will be no entry for the comment in the array and the fifth column for the element will not indicate that it has a child comment.</li>
</ul>
<h6>Conversion to XML</h6>
<p>Conversion to XML takes an array with the format described above and generates XML text from it. There are some simplifications to the array which are accepted:</p>
<ul>
<li>The fifth column is not needed for XML generation and is effectively ignored. Any numeric values are accepted, or the column may be omitted altogether. If the fifth column is omitted then the fourth column may also be omitted.</li>
<li>For the fourth column, if there are no attributes in a particular row then the <code>(0 2⍴⊂'')</code> may be abbreviated as <code>⍬</code> (zilde). If there is only one attribute then a 2-element vector can be specified.</li>
<li>Data in the third column and attribute values in the fourth column (if present) may be provided as either character vectors or numeric values. Numeric values are implicitly formatted as if <code>⎕PP</code> was set to 17.</li>
</ul>
<p>The following validations are performed on the data in the array:</p>
<ul>
<li>All elements within the array are checked for type.</li>
<li>Values in column 1 must be non-negative and start from level 0, and the increment from one row to the next must be <code>≤</code> +1. </li>
<li>Tag names in column 2 and attribute names in column 4 (if present) must conform to the XML name definition.</li>
</ul>
<p>Then, character references and entity references are emitted in place of characters where necessary, to ensure that valid XML is generated. However, markup, if present, is <em>not</em> validated and it is possible to generate invalid XML if care in not taken with markup constructs.</p>
<h6>Options</h6>
<p>There are 3 options which may be specified using the Variant operator <code>⍠</code> (recommended) or by the optional left argument <code>X</code> (retained for backwards compatibility). The names are different and are case-sensitive; they must be spelled exactly as shown below.</p>
<table>
<thead>
<tr>
<th>Option names for Variant</th>
<th>Option names for left argument</th>
</tr>
</thead>
<tbody>
<tr>
<td>Whitespace</td>
<td>whitespace</td>
</tr>
<tr>
<td>Markup</td>
<td>markup</td>
</tr>
<tr>
<td>UnknownEntity</td>
<td>unknown-entity</td>
</tr>
</tbody>
</table>
<p>The values of each option are tabulated below. In each case the value of the option for Variant is given first, followed by its equivalent for the optional left argument in brackets; e.g. <strong>UnknownEntity (unknown-entity)</strong>.</p>
<p>Note that the default value is shown first, and that the option names and values are case-sensitive.</p>
<p>If options are specified using the optional left argument,  <code>X</code> specifies a set of option/value pairs, each of which is a character vector. <code>X</code> may be a 2-element vector, or a vector of 2-element character vectors. In the examples below, this method is illustrated by the equivalent expression written as a comment, following the recommended approach using the Variant operator <code>⍠</code>. i.e.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕XML</span><span class="na">⍠</span><span class="s1">'Whitespace'</span><span class="w"> </span><span class="s1">'Strip'</span><span class="p">)</span><span class="nv">eg</span>
<span class="w">      </span><span class="c1">⍝      'whitespace' 'strip' ⎕XML eg</span>
</code></pre></div></p>
<p>Errors detected in the input arrays or options will all cause <code>DOMAIN ERROR</code>.</p>
<h6>Whitespace (whitespace)</h6>
<p>When converting from XML <code>Whitespace</code> specifies the default handling of white space surrounding and within character data. When converting to XML <code>Whitespace</code> specifies the default formatting of the XML. Note that attribute values are not comprised of character data so white space in attribute values is always preserved.</p>
<table>
<thead>
<tr>
<th colspan="2">Converting from XML</th>
</tr>
</thead>
<tbody>
<tr>
<td>Strip (strip)</td>
<td>All leading and trailing whitespace sequences are removed; remaining whitespace sequences are replaced by a single space character</td>
</tr>
<tr>
<td><code>Trim(trim)</code></td>
<td>All leading and trailing whitespace sequences are removed; all remaining white space sequences are handled as preserve</td>
</tr>
<tr>
<td><code>Preserve(preserve)</code></td>
<td>Whitespace is preserved as given except that line endings are represented by Linefeed                 ( <code>⎕UCS 10</code> )</td>
</tr>
<tr>
<td colspan="2">Converting to XML</td>
</tr>
<tr>
<td>Strip (strip)</td>
<td>All leading and trailing whitespace sequences are removed; remaining whitespace sequences within the data are replaced by a single space character. XML is generated with formatting and indentation to show the data structure</td>
</tr>
<tr>
<td><code>Trim(trim)</code></td>
<td>Synonymous with <code>strip</code></td>
</tr>
<tr>
<td><code>Preserve(preserve)</code></td>
<td>White space in the data is preserved as given, except that line endings are represented by Linefeed               ( <code>⎕UCS 10</code> ). XML is generated with no formatting and indentation other than that which is contained within the data</td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────┐</span>
<span class="err">│</span><span class="o">&lt;</span><span class="nv">xml</span><span class="o">&gt;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="nv">a</span><span class="o">&gt;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data1</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;!--</span><span class="w"> </span><span class="nv">Comment</span><span class="w"> </span><span class="o">--&gt;</span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data2</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">b</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">Data3</span><span class="w"> </span><span class="o">&lt;</span><span class="na">/</span><span class="nv">b</span><span class="o">&gt;</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data4</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">c</span><span class="w"> </span><span class="nv">att</span><span class="o">=</span><span class="s2">"val"</span><span class="na">/</span><span class="o">&gt;</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="na">/</span><span class="nv">a</span><span class="o">&gt;</span><span class="w">              </span><span class="err">│</span>
<span class="err">│</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">xml</span><span class="o">&gt;</span><span class="w">              </span><span class="err">│</span>
<span class="err">└────────────────────┘</span>
</code></pre></div></td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕XML</span><span class="na">⍠</span><span class="s1">'Whitespace'</span><span class="w"> </span><span class="s1">'Strip'</span><span class="p">)</span><span class="nv">eg</span>
<span class="w">      </span><span class="c1">⍝      'whitespace' 'strip' ⎕XML eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────────────────────┐</span>
<span class="o">↓</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="err">│</span><span class="nv">xml</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">3</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data1</span><span class="w"> </span><span class="nv">Data2</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w">       </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data3</span><span class="err">│</span><span class="w">       </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">5</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w">       </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data4</span><span class="err">│</span><span class="w">       </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">att</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">val</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────────────────────┘</span>
</code></pre></div></td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕XML</span><span class="na">⍠</span><span class="s1">'Whitespace'</span><span class="w"> </span><span class="s1">'Preserve'</span><span class="p">)</span><span class="nv">eg</span>
<span class="w">      </span><span class="c1">⍝         'whitespace' 'preserve' ⎕XML eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────────┐</span>
<span class="o">↓</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">         </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="err">│</span><span class="nv">xml</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">         </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">        </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└──┘</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">         </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">         </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="nv">Data1</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">    </span><span class="nv">Data2</span><span class="err">│</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└─────────┘</span><span class="w">                   </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="nv">Data3</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">5</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└───────┘</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">│</span><span class="w">    </span><span class="nv">Data4</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└─────────┘</span><span class="w"> </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">         </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">         </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">att</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">val</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">─┐</span><span class="w">        </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">│</span><span class="w">  </span><span class="err">│</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└──┘</span><span class="w">        </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">         </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">         </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">         </span><span class="err">└─┘</span><span class="w">         </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                     </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────────────┘</span>
</code></pre></div></td>
</tr>
</tbody>
</table>
<h6>Markup (markup)</h6>
<p>When converting from XML, <code>Markup</code> determines whether markup (other than entity tags) appears in the output array or not. When converting to XML <code>Markup</code> has no effect.</p>
<table>
<thead>
<tr>
<th colspan="2">Converting from XML</th>
</tr>
</thead>
<tbody>
<tr>
<td>Strip (strip)</td>
<td>Markup data is not included in the output array</td>
</tr>
<tr>
<td><code>Preserve(preserve)</code></td>
<td>Markup text appears in the output array, without the leading '&lt;' and trailing '&gt;' in the tag (2 <sup>nd</sup> ) column</td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="nv">eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">───────────────────┐</span>
<span class="err">│</span><span class="o">&lt;</span><span class="nv">xml</span><span class="o">&gt;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="nv">a</span><span class="o">&gt;</span><span class="w">               </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data1</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;!--</span><span class="w"> </span><span class="nv">Comment</span><span class="w"> </span><span class="o">--&gt;</span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data2</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">b</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">Data3</span><span class="w"> </span><span class="o">&lt;</span><span class="na">/</span><span class="nv">b</span><span class="o">&gt;</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="nv">Data4</span><span class="w">           </span><span class="err">│</span>
<span class="err">│</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">c</span><span class="w"> </span><span class="nv">att</span><span class="o">=</span><span class="s2">"val"</span><span class="na">/</span><span class="o">&gt;</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">  </span><span class="o">&lt;</span><span class="na">/</span><span class="nv">a</span><span class="o">&gt;</span><span class="w">              </span><span class="err">│</span>
<span class="err">│</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">xml</span><span class="o">&gt;</span><span class="w">              </span><span class="err">│</span>
<span class="err">└────────────────────┘</span>
</code></pre></div></td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕XML</span><span class="na">⍠</span><span class="s1">'Markup'</span><span class="w"> </span><span class="s1">'Strip'</span><span class="p">)</span><span class="nv">eg</span>
<span class="w">      </span><span class="c1">⍝      'markup' 'strip' ⎕XML eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">────────────────────────────────────────┐</span>
<span class="o">↓</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="err">│</span><span class="nv">xml</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">3</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">7</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──────────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data1</span><span class="w"> </span><span class="nv">Data2</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└───────────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w">       </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data3</span><span class="err">│</span><span class="w">       </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">5</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w">       </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="nv">Data4</span><span class="err">│</span><span class="w">       </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─────┘</span><span class="w">       </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">       </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">           </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">           </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">   </span><span class="err">└─┘</span><span class="w">           </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">att</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">val</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span><span class="w">   </span><span class="err">│</span>
<span class="err">│</span><span class="w">                       </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────┘</span><span class="w">   </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">────────────────────────────────────────┘</span>
</code></pre></div></td>
</tr>
<tr>
<td colspan="2"><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="sr">]</span><span class="nv">display</span><span class="w"> </span><span class="p">(</span><span class="nf">⎕XML</span><span class="na">⍠</span><span class="s1">'Markup'</span><span class="w"> </span><span class="s1">'Preserve'</span><span class="p">)</span><span class="nv">eg</span>
<span class="w">      </span><span class="c1">⍝         'markup' 'preserve' ⎕XML eg</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">──────────────────────────────────────────────┐</span>
<span class="o">↓</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w">            </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="err">│</span><span class="nv">xml</span><span class="err">│</span><span class="w">            </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">3</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└───┘</span><span class="w">            </span><span class="err">└─┘</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="err">│</span><span class="nv">a</span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">23</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─┘</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="nv">Data1</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">─────────────┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="o">!--</span><span class="w"> </span><span class="nv">Comment</span><span class="w"> </span><span class="o">--</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">16</span><span class="w"> </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└──────────────┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="nv">Data2</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">b</span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="nv">Data3</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="kd">→</span><span class="err">────┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────┐</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="nv">Data4</span><span class="err">│</span><span class="w"> </span><span class="o">⌽</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="m">4</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─────┘</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">└─┘</span><span class="w"> </span><span class="err">│</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────┘</span><span class="w">        </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">┌</span><span class="kd">→</span><span class="err">┐</span><span class="w">              </span><span class="err">┌</span><span class="o">⊖</span><span class="err">┐</span><span class="w">     </span><span class="err">┌</span><span class="kd">→</span><span class="err">────────────┐</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="err">│</span><span class="nv">c</span><span class="err">│</span><span class="w">              </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">     </span><span class="o">↓</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">┌</span><span class="kd">→</span><span class="err">──┐</span><span class="w"> </span><span class="err">│</span><span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="err">│</span>
<span class="err">│</span><span class="w">   </span><span class="err">└─┘</span><span class="w">              </span><span class="err">└─┘</span><span class="w">     </span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">att</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="nv">val</span><span class="err">│</span><span class="w"> </span><span class="err">│</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">│</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">└───┘</span><span class="w"> </span><span class="err">│</span><span class="w">    </span><span class="err">│</span>
<span class="err">│</span><span class="w">                            </span><span class="err">└</span><span class="o">∊</span><span class="err">────────────┘</span><span class="w">    </span><span class="err">│</span>
<span class="err">└</span><span class="o">∊</span><span class="err">──────────────────────────────────────────────┘</span>
</code></pre></div></td>
</tr>
</tbody>
</table>
<h6>UnknownEntity (unknown-entity)</h6>
<p>When converting from XML, this option determines what happens when an unknown entity reference, or a character reference for a Unicode character which cannot be represented as an APL character, is encountered. In Classic versions of Dyalog APL that is any Unicode character which does not appear in <code>⎕AVU</code>. When converting to XML, this option determines what happens to Esc characters (<code>⎕UCS 27</code>) in data.</p>
<table>
<thead>
<tr>
<th colspan="2">Converting from XML</th>
</tr>
</thead>
<tbody>
<tr>
<td>Replace (replace)</td>
<td>The reference is replaced by a single '?' character</td>
</tr>
<tr>
<td><code>Preserve(preserve)</code></td>
<td>The reference is included in the output data as given, but with the leading '&amp;' replaced by Esc ( <code>⎕UCS 27</code> )</td>
</tr>
<tr>
<td colspan="2">Converting to XML</td>
</tr>
<tr>
<td>Replace (replace)</td>
<td>Esc ( <code>⎕UCS 27</code> ) is preserved</td>
</tr>
<tr>
<td><code>Preserve(preserve)</code></td>
<td>Esc ( <code>⎕UCS 27</code> ) is replaced by '&amp;'</td>
</tr>
</tbody>
</table>
</article>
<article id="system-functions-xsi">
<div class="heading-container"><h3 class="heading" id="system-functions-xsi-header">Extended State Indicator</h3><div class="command">R←⎕XSI</div></div>
<p><code>R</code> is a nested vector of character vectors giving the full path names of the functions or operators in the execution stack. Note that if a function has changed space, its original (home) space is reported, rather than its current one.</p>
<p class="example">Example</p>
<p>In the following, function <code>foo</code> in namespace <code>x</code> has called <code>goo</code> in namespace <code>y</code>.  Function <code>goo</code> has then changed space (<code>⎕CS</code>) to namespace <code>z</code> where it has been suspended:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">si</span>
<span class="sr">[</span><span class="nv">z</span><span class="sr">]</span><span class="w"> </span><span class="nv">y</span><span class="na">.</span><span class="nv">goo</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="o">*</span>
<span class="nv">x</span><span class="na">.</span><span class="nv">foo</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
</code></pre></div></p>
<p><code>⎕XSI</code> reports the full path name of each function:
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="nf">⎕xsi</span>
<span class="w"> </span><span class="c1">#.y.goo  #.x.foo</span>
</code></pre></div></p>
<p>This can be used for example, to edit all functions in the stack, irrespective of the current namespace by typing:    <code>⎕ed ⎕xsi</code></p>
<p>See also <a class="internal-link" href="#primitive-functions-residue">Section 1.4.88</a>.</p>
</article>
<article id="system-functions-set-external-variable">
<div class="heading-container"><h3 class="heading" id="system-functions-set-external-variable-header">Set External Variable</h3><div class="command">{R}←X ⎕XT Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be a variable name.  <code>X</code> must be a simple character scalar or vector which is taken to be a file reference.  The name given by <code>Y</code> is identified as an EXTERNAL VARIABLE associated with an EXTERNAL ARRAY whose value may be stored in file identified by <code>X</code>. The shy result <code>R</code> has the same value as <code>X</code>.</p>
<p>If <code>Y</code> is the name of a defined function or operator, a label or a namespace in the active workspace, a <code>DOMAIN ERROR</code> is reported.</p>
<p>Attempts to assign namespace references or the <code>⎕OR</code> of namespaces to an external array will result in a <code>DOMAIN ERROR</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">'EXT\ARRAY'</span><span class="w"> </span><span class="nf">⎕XT</span><span class="w"> </span><span class="s1">'V'</span>
</code></pre></div>
<p>If the file reference does not exist, the external variable has no value until a value is assigned:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">V</span>
<span class="nv">VALUE</span><span class="w"> </span><span class="nv">ERROR</span>
<span class="w">      </span><span class="nv">V</span>
<span class="w">      </span><span class="err">^</span>
</code></pre></div></p>
<p>A value assigned to an external variable is stored in file space, not within the workspace:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕WA</span>
<span class="m">2261186</span>

<span class="w">      </span><span class="nv">V</span><span class="kd">←</span><span class="o">⍳</span><span class="m">100000</span>

<span class="w">      </span><span class="nf">⎕WA</span>
<span class="m">2261186</span>
</code></pre></div></p>
<p>There are no specific restrictions placed on the use of external variables.  They must conform to the normal requirements when used as arguments of functions or as operands of operators.  The essential difference between a variable and an external variable is that an external variable requires only temporary workspace for an operation to accommodate (usually) a part of its value.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">V</span><span class="kd">←</span><span class="o">⍳</span><span class="m">5</span>
<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="nv">V</span>
<span class="m">15</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span><span class="kd">←</span><span class="o">⊂</span><span class="s1">'ABC'</span>

<span class="w">      </span><span class="nv">V</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">5</span>

<span class="w">      </span><span class="o">⍴</span><span class="na">¨</span><span class="nv">V</span>
<span class="w">     </span><span class="m">3</span>
</code></pre></div>
<p>Assignment allows the structure or the value of an external variable to be changed without fully defining the external array in the workspace.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">V</span><span class="o">,</span><span class="kd">←</span><span class="o">⊂</span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="o">⍴⍳</span><span class="m">8</span>

<span class="w">      </span><span class="o">⍴</span><span class="nv">V</span>
<span class="m">6</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="m">6</span><span class="sr">]</span>
<span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span>
<span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">8</span>

<span class="w">      </span><span class="nv">V</span><span class="sr">[</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="sr">]</span><span class="o">×</span><span class="kd">←</span><span class="m">10</span>

<span class="w">      </span><span class="nv">V</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">40</span><span class="w"> </span><span class="m">50</span><span class="w">  </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="w">                   </span><span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>
</code></pre></div>
<p>An external array is (usually) preserved in file space when the name of the external variable is disassociated from the file.  It may be re-associated with any valid variable name.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'V'</span>

<span class="w">      </span><span class="s1">'EXT\ARRAY'</span><span class="nf">⎕XT</span><span class="s1">'F'</span>

<span class="w">      </span><span class="nv">F</span>
<span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w">  </span><span class="nv">ABC</span><span class="w">  </span><span class="m">40</span><span class="w"> </span><span class="m">50</span><span class="w">  </span><span class="m">10</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">40</span>
<span class="w">                   </span><span class="m">50</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="m">80</span>
</code></pre></div>
<p>In UNIX versions, if <code>X</code> is an empty vector, the external array is associated with a temporary file which is erased when the array is disassociated.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="s1">''</span><span class="nf">⎕XT</span><span class="s1">'TEMP'</span>

<span class="w">      </span><span class="nv">TEMP</span><span class="kd">←</span><span class="o">⍳</span><span class="m">10</span>

<span class="w">      </span><span class="o">+</span><span class="na">/</span><span class="nv">TEMP</span><span class="o">×</span><span class="nv">TEMP</span>
<span class="m">385</span>

<span class="w">      </span><span class="nf">⎕EX</span><span class="s1">'TEMP'</span>
</code></pre></div>
<p>An external array may be erased using the native file function: <code>⎕NERASE</code>.</p>
<p>In a multi-user environment (UNIX or a Windows LAN) a new file associated with an external array is created with access permission for owner read/write.  An existing file is opened for exclusive use (by the owner) if the permissions remain at this level.  If the access permissions allow any other users to read and write to the file, the file is opened for shared use.  In UNIX versions, access permissions may be modified using the appropriate Operating System command, or in Windows using the supplied function <code>XVAR</code> from the UTIL workspace.</p>
</article>
<article id="system-functions-query-external-variable">
<div class="heading-container"><h3 class="heading" id="system-functions-query-external-variable-header">Query External Variable</h3><div class="command">R←⎕XT Y</div></div>
<p><code>Y</code> must be a simple character scalar or vector which is taken to be a variable name.  <code>R</code> is a simple character vector containing the file reference of the external array associated with the variable named by <code>Y</code>, or the null vector if there is no associated external array.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕XT</span><span class="s1">'V'</span>
<span class="nv">EXT</span><span class="na">\</span><span class="nv">ARRAY</span>

<span class="w">      </span><span class="o">⍴</span><span class="nf">⎕XT</span><span class="s1">'G'</span>
<span class="m">0</span>
</code></pre></div>
</article>
</section>
</section>
<section data-chapter-seq="5" id="system-commands">
<h1 class="chapter" id="system-commands-header">System Commands</h1>
<article id="system-commands-introduction">
<h2 id="system-commands-introduction-header"> Introduction</h2>
<p>System commands are <strong>not</strong> executable APL expressions.  They provide services or information associated with the workspace and the <strong>external environment</strong>.</p>
<h4>Command Presentation</h4>
<p>System commands may be entered from immediate execution mode or in response to the prompt <code>⎕</code>: within evaluated input.  All system commands begin with the symbol <code>)</code>, known as a right parenthesis.  All system commands may be entered in upper or lower case.</p>

<table id="SystemCommands"><caption style="caption-side:top"><strong>Table 5-1:</strong> System Commands</caption>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>)CLASSES</code></td>
<td>List classes</td>
</tr>
<tr>
<td><code>)CLEAR</code></td>
<td>Clear the workspace</td>
</tr>
<tr>
<td><code>)CMD Y</code></td>
<td>Execute a Windows Command</td>
</tr>
<tr>
<td><code>)CONTINUE</code></td>
<td>Save a Continue workspace and terminate APL</td>
</tr>
<tr>
<td><code>)COPY {Y}</code></td>
<td>Copy objects from another workspace</td>
</tr>
<tr>
<td><code>)CS {Y}</code></td>
<td>Change current namespace</td>
</tr>
<tr>
<td><code>)DROP {Y}</code></td>
<td>Drop named workspace</td>
</tr>
<tr>
<td><code>)ED Y</code></td>
<td>Edit object(s)</td>
</tr>
<tr>
<td><code>)ERASE Y</code></td>
<td>Erase object(s)</td>
</tr>
<tr>
<td><code>)EVENTS</code></td>
<td>List events of GUI namespace or object</td>
</tr>
<tr>
<td><code>)FNS {Y}</code></td>
<td>List user defined Functions</td>
</tr>
<tr>
<td><code>)HOLDS</code></td>
<td>Display Held tokens</td>
</tr>
<tr>
<td><code>)LIB {Y}</code></td>
<td>List workspaces in a directory</td>
</tr>
<tr>
<td><code>)LOAD {Y}</code></td>
<td>Load a workspace</td>
</tr>
<tr>
<td><code>)METHODS</code></td>
<td>List methods in GUI namespace or object</td>
</tr>
<tr>
<td><code>)NS {Y}</code></td>
<td>Create a global Namespace</td>
</tr>
<tr>
<td><code>)OBJECTS {Y}</code></td>
<td>List global namespaces</td>
</tr>
<tr>
<td><code>)OBS {Y}</code></td>
<td>List global namespaces (alternative form)</td>
</tr>
<tr>
<td><code>)OFF</code></td>
<td>Terminate the APL session</td>
</tr>
<tr>
<td><code>)OPS {Y}</code></td>
<td>List user defined Operators</td>
</tr>
<tr>
<td><code>)PCOPY {Y}</code></td>
<td>Perform Protected Copy of objects</td>
</tr>
<tr>
<td><code>)PROPS</code></td>
<td>List properties of GUI namespace or object</td>
</tr>
<tr>
<td><code>)RESET</code></td>
<td>Reset the state indicator</td>
</tr>
<tr>
<td><code>)SAVE {Y}</code></td>
<td>Save the workspace</td>
</tr>
<tr>
<td><code>)SH {Y}</code></td>
<td>Execute a (UNIX) Shell command</td>
</tr>
<tr>
<td><code>)SI</code></td>
<td>State Indicator</td>
</tr>
<tr>
<td><code>)SIC</code></td>
<td>Clear State Indicator</td>
</tr>
<tr>
<td><code>)SINL</code></td>
<td>State Indicator with local Name Lists</td>
</tr>
<tr>
<td><code>)TID {Y}</code></td>
<td>Switch current Thread Identity</td>
</tr>
<tr>
<td><code>)VARS {Y}</code></td>
<td>List user defined global Variables</td>
</tr>
<tr>
<td><code>)WSID {Y}</code></td>
<td>Workspace Identification</td>
</tr>
<tr>
<td><code>)XLOAD Y</code></td>
<td>Load a workspace; do not execute <code>⎕LX</code></td>
</tr>
<tr>
<td colspan="2"><code>{ }</code> indicates that the parameter(s) denoted by <code>Y</code> are optional.</td>
</tr>
</tbody>
</table>
</article>
<section id="system-commands-system-commands-a-z-">
<h2 id="system-commands-system-commands-a-z--header">System Commands (A-Z)</h2>
<article id="system-commands-classes">
<div class="heading-container"><h3 class="heading" id="system-commands-classes-header">List Classes</h3><div class="command">)CLASSES</div></div>
<p>This command lists the names of APL Classes in the active workspace.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CLEAR</span>
<span class="nv">clear</span><span class="w"> </span><span class="nv">ws</span>
<span class="w">      </span><span class="p">)</span><span class="nv">ED</span><span class="w"> </span><span class="o">○</span><span class="nv">MyClass</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">MyClass</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">Make</span><span class="w"> </span><span class="nv">Name</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Implements</span><span class="w"> </span><span class="nv">Constructor</span>
<span class="w">      </span><span class="nf">⎕DF</span><span class="w"> </span><span class="nv">Name</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span><span class="w"> </span><span class="c1">⍝ MyClass</span>

<span class="w">      </span><span class="p">)</span><span class="nv">CLASSES</span>
<span class="nv">MyClass</span>
<span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">OO</span><span class="w"> </span><span class="nv">YourClass</span>
<span class="na">.\</span><span class="nv">OO</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Sun</span><span class="w"> </span><span class="nv">Jan</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">18</span><span class="bp">:</span><span class="m">32</span><span class="bp">:</span><span class="m">03</span><span class="w"> </span><span class="m">2006</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CLASSES</span>
<span class="nv">MyClass</span><span class="w"> </span><span class="nv">YourClass</span>
<span class="w">      </span><span class="nf">⎕NC</span><span class="w"> </span><span class="s1">'MyClass'</span><span class="w"> </span><span class="s1">'YourClass'</span>
<span class="m">9.4</span><span class="w"> </span><span class="m">9.4</span>
</code></pre></div>
</article>
<article id="system-commands-clear">
<div class="heading-container"><h3 class="heading" id="system-commands-clear-header">Clear Workspace</h3><div class="command">)CLEAR</div></div>
<p>This command clears the active workspace and gives the report "<code>clear ws"</code>.  The active workspace is lost.  The name of a clear workspace is <code>CLEAR WS</code>.  System variables are initialised with their default values as described in <a class="internal-link" href="#system-functions-summary-tables-system-variables">Section 4.4</a>.</p>
<p>In GUI implementations of Dyalog APL, <code>)CLEAR</code> expunges all GUI objects, discards any unprocessed events in the event queue and resets the properties of the <code>Root</code> object  <code>'.'</code>  to their default values.</p>
<p>Apart from .NET objects, the contents of the session namespace <code>⎕SE</code> are not affected. .NET objects in <code>⎕SE</code> are disconnected from .NET because <code>)CLEAR</code> closes the current .NET AppDomain.</p>
</article>
<article id="system-commands-cmd">
<div class="heading-container"><h3 class="heading" id="system-commands-cmd-header">Windows Command Processor</h3><div class="command">)CMD cmd</div></div>
<p>This command allows Windows Command Processor or UNIX shell commands to be given from APL.  <code>)CMD</code> is a synonym of <code>)SH</code>.  Either command may be given in either environment (Windows or UNIX) with exactly the same effect.  <code>)CMD</code> is probably more natural for the Windows user.  This section describes the behaviour of <code>)CMD</code> and <code>)SH</code> under Windows.  See <a class="internal-link" href="#the-i-beam-operator-compress-vector-of-short-integers">Section 3.2.8</a> for a discussion of the behaviour of these commands under UNIX.</p>
<p>The system functions <a class="internal-link" href="#system-functions-execute-unix-command">Section 4.6.131</a> and <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a> provide similar facilities but may be executed from within APL code. For further information, see <a class="internal-link" href="#system-functions-execute-unix-command">Section 4.6.131</a> and <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a>.</p>
<p>Note that under Windows, you may not execute <code>)CMD</code> without a command.  If you wish to, you can easily open a new Command Prompt window outside APL.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">     </span><span class="p">)</span><span class="nv">cmd</span><span class="w"> </span><span class="nv">dir</span>
<span class="w"> </span><span class="nv">Volume</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">drive</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">OS</span>
<span class="w"> </span><span class="nv">Volume</span><span class="w"> </span><span class="nv">Serial</span><span class="w"> </span><span class="nv">Number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">B438</span><span class="o">-</span><span class="m">9</span><span class="nv">B76</span>

<span class="w"> </span><span class="nv">Directory</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\</span><span class="nv">Pete</span><span class="na">\</span><span class="nv">Documents</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="m">17.0</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">Files</span>

<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">15</span><span class="bp">:</span><span class="m">59</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">DIR</span><span class="o">&gt;</span><span class="w">          </span><span class="na">.</span>
<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">15</span><span class="bp">:</span><span class="m">59</span><span class="w">    </span><span class="o">&lt;</span><span class="nv">DIR</span><span class="o">&gt;</span><span class="w">          </span><span class="na">..</span>
<span class="m">23</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">14</span><span class="bp">:</span><span class="m">53</span><span class="w">           </span><span class="m">181</span><span class="o">,</span><span class="m">488</span><span class="w"> </span><span class="nv">default</span><span class="na">.</span><span class="nv">dlf</span>
<span class="m">13</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">20</span><span class="bp">:</span><span class="m">13</span><span class="w">         </span><span class="m">1</span><span class="o">,</span><span class="m">262</span><span class="o">,</span><span class="m">296</span><span class="w"> </span><span class="nv">def_uk</span><span class="na">.</span><span class="nv">dse</span>
<span class="m">14</span><span class="na">/</span><span class="m">06</span><span class="na">/</span><span class="m">2018</span><span class="w">  </span><span class="m">14</span><span class="bp">:</span><span class="m">36</span><span class="w">           </span><span class="m">108</span><span class="o">,</span><span class="m">976</span><span class="w"> </span><span class="nv">UserCommand20</span><span class="na">.</span><span class="nv">cache</span>
<span class="w">               </span><span class="m">3</span><span class="w"> </span><span class="nv">File</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span><span class="w">      </span><span class="m">1</span><span class="o">,</span><span class="m">552</span><span class="o">,</span><span class="m">760</span><span class="w"> </span><span class="nv">bytes</span>
<span class="w">               </span><span class="m">2</span><span class="w"> </span><span class="nv">Dir</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span><span class="w">  </span><span class="m">101</span><span class="o">,</span><span class="m">371</span><span class="o">,</span><span class="m">437</span><span class="o">,</span><span class="m">056</span><span class="w"> </span><span class="nv">bytes</span><span class="w"> </span><span class="nv">free</span>
</code></pre></div>
<p>If <strong>cmd</strong> issues prompts and expects user input, it is <strong>ESSENTIAL</strong> to explicitly redirect input and output to the console.  If this is done, APL detects the presence of a "<code>&gt;</code>" in the command line and runs the command processor in a visible window and does not direct output to the pipe.  If you fail to do this your system will appear to hang because there is no mechanism for you to receive or respond to the prompt.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CMD</span><span class="w"> </span><span class="nv">DATE</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">CON</span><span class="w"> </span><span class="o">&gt;</span><span class="nv">CON</span>
</code></pre></div>
<p>(Command Prompt window appears)
<div class="highlight"><pre><span></span><code><span class="nv">Current</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="m">19</span><span class="o">-</span><span class="m">07</span><span class="o">-</span><span class="m">1995</span>
<span class="nv">Enter</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">date</span><span class="w"> </span><span class="p">(</span><span class="nv">dd</span><span class="o">-</span><span class="nv">mm</span><span class="o">-</span><span class="nv">yy</span><span class="p">)</span><span class="bp">:</span><span class="w"> </span><span class="m">20</span><span class="o">-</span><span class="m">07</span><span class="o">-</span><span class="m">95</span>
</code></pre></div></p>
<p>(Command Prompt window disappears)</p>
<h5>Implementation Notes</h5>
<p>The argument of )<code>CMD</code> is simply passed to the appropriate command processor for execution and its output is received using an <em>unnamed pipe</em>.</p>
<p>By default, <code>)CMD</code> will execute the string <code>('cmd.exe /c',Y)</code> where <code>Y</code> is the argument given to <code>)CMD</code>.  However, the implementation permits the use of alternative command processors as follows:</p>
<p>Before execution, the argument is prefixed and postfixed with strings defined by the APL parameters CMD_PREFIX and CMD_POSTFIX. The former specifies the name of your command processor and any parameters that it requires. The latter specifies a string which may be required. If CMD_PREFIX is not defined, it defaults to the name defined by the environment variable COMSPEC followed by "\c".  If COMSPEC is not defined, it defaults to COMMAND.COM or CMD.EXE as appropriate. If CMD_POSTFIX is not defined, it defaults to an empty vector.</p>
<h5>Note</h5>
<p>This function is disabled and instead generates a <code>DOMAIN ERROR</code> if the RIDE_SPAWNED parameter is non-zero. This is designed to prevent it being invoked from a RIDE session which does not support this type of user interface. For further details, see the <em>RIDE User Guide</em>.</p>
</article>
<article id="system-commands-continue">
<div class="heading-container"><h3 class="heading" id="system-commands-continue-header">Save Continuation</h3><div class="command">)CONTINUE</div></div>
<p>This command saves the active workspace in the current working directory and ends the Dyalog APL session. The name of the workspace file is CONTINUE in upper-case with the extension defined by the <i>WSEXT parameter</i>.</p>
<p>Note that the values of all system variables (including <code>⎕SM</code>) and GUI objects are also saved in <code>CONTINUE</code>.</p>
<p>When a <code>CONTINUE</code> workspace is loaded, the latent expression (if any) is NOT executed.</p>
</article>
<article id="system-commands-copy">
<div class="heading-container"><h3 class="heading" id="system-commands-copy-header">Copy Workspace</h3><div class="command">)COPY {ws {nms}}</div></div>
<p>This command brings all or selected global objects <code>nms</code> from a stored workspace (or session file) with the given name.  A stored workspace is one which has previously been saved with the system command <code>)SAVE</code> or the system function <code>⎕SAVE</code>.</p>
<p>See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p>If the list of names is excluded, all defined objects (including namespaces) are copied.</p>
<p>If the workspace name identifies a valid, readable workspace, the system reports the workspace name, "<code>saved</code>" and the date and time when the workspace was last saved.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">UTILITY</span>
<span class="nv">WS</span><span class="na">/</span><span class="nv">UTILITY</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Mon</span><span class="w"> </span><span class="nv">Nov</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">13</span><span class="bp">:</span><span class="m">11</span><span class="bp">:</span><span class="m">19</span><span class="w"> </span><span class="m">1992</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">TEMP</span><span class="w"> </span><span class="nf">⎕LX</span><span class="w"> </span><span class="nv">FOO</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="na">.</span><span class="nv">B</span><span class="na">.</span><span class="nv">C</span>
<span class="na">./</span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Mon</span><span class="w"> </span><span class="nv">Nov</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">20</span><span class="bp">:</span><span class="m">47</span><span class="w"> </span><span class="m">1992</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="nv">X</span>
</code></pre></div>
<p>Copied objects are defined at the global level in the active workspace.  Existing global objects in the active workspace with the same name as a copied object are replaced.  If the copied object replaces either a function in the state indicator, or an object that is an operand of an operator in the state indicator, or a function whose left argument is being executed, the original object remains defined until its execution is completed or it is no longer referenced by an operator in the state indicator.  If the workspace name is not valid or does not exist or if access to the workspace is not authorised, the system reports <code>ws not found</code>.</p>
<p>You may copy an object from a namespace by specifying its full pathname.  The object will be copied to the current namespace in the active workspace, losing its original parent and gaining a new one in the process.  You may only copy a GUI object into a namespace that is a suitable parent for that object.  For example, you could only copy a Group object from a saved workspace if the current namespace in the active workspace is itself a Form, SubForm or Group.</p>
<p>If the workspace name identifies a file that is not a workspace, the system reports <code>bad ws</code>.</p>
<p>If the source workspace is too large to be loaded, the system reports <code>ws too large</code>.</p>
<p>When copying data between Classic and Unicode Editions, <code>)COPY</code> will fail with <code>TRANSLATION ERROR</code> if <em>any</em> object in the source workspace fails conversion between Unicode and <code>⎕AV</code> indices, whether or not that object is specified by <code>nms</code>. See <a class="internal-link" href="#system-functions-avu">Section 4.6.12</a> for further details.</p>
<p>If "<code>ws</code>" is omitted, the file open dialog box is displayed and all objects copied from the selected workspace.</p>
<p>If the list of names is included, the names of system variables may also be included and copied into the active workspace.  The global referents will be copied.</p>
<p>If an object is not found in the stored workspace, the system reports <code>not found</code> followed by the name of the object.</p>
<h5>Dependent Objects</h5>
<p>If the list of names includes the name of:</p>
<ul>
<li>an Instance of a Class but not the Class itself</li>
<li>a Class but not a Class upon which it depends</li>
<li>an array or a namespace that contains a ref to another namespace, but not the namespace to which it refers</li>
</ul>
<p>the dependent object(s) <strong>will also be copied</strong> but will be <strong>unnamed</strong> and <strong>hidden</strong>. In such as case, the system will issue a warning message.</p>
<p>For example, if a saved workspace named CFWS contains a Class named <code>#.CompFile</code> and an Instance (of <code>CompFile</code>) named <code>icf</code>,
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">COPY</span><span class="w"> </span><span class="nv">CFWS</span><span class="w"> </span><span class="nv">icf</span>
<span class="na">.\</span><span class="nv">CFWS</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Fri</span><span class="w"> </span><span class="nv">Mar</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">21</span><span class="bp">:</span><span class="m">36</span><span class="w"> </span><span class="m">2006</span>
<span class="nv">copied</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">created</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">unnamed</span><span class="w"> </span><span class="nv">copy</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="c1">#.CompFile</span>
</code></pre></div></p>
<p>The existence of a hidden copy can be confusing, especially if it is a hidden copy of an object which had a name which is in use in the current workspace. In the above example, if there is a class called <code>CompFile</code> in the workspace into which <code>icf</code> is copied, the copied instance may <em>appear</em> to be an instance of the <em>visible</em> <code>CompFile</code>, but it will actually be an instance of the hidden <code>CompFile</code> - which may have very different (or perhaps worse: very slightly different) characteristics to the named version.</p>
<p>If you copy a Class without copying its Base Class, the Class can be used (it will use the invisible copy of the Base Class), but if you edit the Class, you will either be unable to save it because the editor cannot find the Base Class, or - if there is a visible Class of that name in the workspace - it will be used as the Base Class.</p>
<p>In the latter case, the invisible copy which was brought in by <code>)COPY</code> will now disappear, since there are no longer any references to it - and if these two Base Classes were different, the behaviour of the derived Class will change (and any changes made to the invisible Base Class since it was copied will be lost).</p>
<h5>Referenced Objects</h5>
<p>If you copy a Class or a namespace that is referenced by a Class as its Base Class or via a <code>:Include</code> statement, the referring Class will continue to refer to the original definition of the copied name which will be retained for that purpose. The Class can be made to refer to the copied definition of that name by refixing it.</p>
<p class="example">Example</p>
<p>The current workspace has a class named <code>pete</code> whose Base class is called <code>base</code>.
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">pete</span><span class="bp">:</span><span class="w"> </span><span class="nv">base</span>
<span class="bp">:</span><span class="nv">EndClass</span>

<span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">base</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span><span class="w"> </span><span class="nv">n</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="s1">'Original'</span><span class="nv">n</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span>
</code></pre></div></p>
<p>A second workspace named <code>copy.dws</code> contains a different version of the <code>base</code> class:
<div class="highlight"><pre><span></span><code><span class="bp">:</span><span class="nv">Class</span><span class="w"> </span><span class="nv">base</span>
<span class="w">    </span><span class="bp">∇</span><span class="w"> </span><span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span><span class="w"> </span><span class="nv">n</span>
<span class="w">      </span><span class="bp">:</span><span class="nv">Access</span><span class="w"> </span><span class="nv">Public</span>
<span class="w">      </span><span class="nv">r</span><span class="kd">←</span><span class="s1">'Copied'</span><span class="nv">n</span>
<span class="w">    </span><span class="bp">∇</span>
<span class="bp">:</span><span class="nv">EndClass</span>

<span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">copy</span><span class="na">.</span><span class="nv">dws</span><span class="w"> </span><span class="nv">base</span>
<span class="nv">copy</span><span class="na">.</span><span class="nv">dws</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Thu</span><span class="w"> </span><span class="nv">Nov</span><span class="w"> </span><span class="m">22</span><span class="w"> </span><span class="m">16</span><span class="bp">:</span><span class="m">24</span><span class="bp">:</span><span class="m">27</span><span class="w"> </span><span class="m">2018</span>
<span class="w">      </span><span class="nv">inst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">pete</span>
<span class="w">      </span><span class="nv">inst</span><span class="na">.</span><span class="nv">foo</span><span class="w"> </span><span class="m">1</span>
<span class="nv">Original</span><span class="w">  </span><span class="m">1</span>

<span class="w">      </span><span class="nf">⎕FIX</span><span class="w"> </span><span class="nf">⎕SRC</span><span class="w"> </span><span class="nv">pete</span>
<span class="w">      </span><span class="nv">inst</span><span class="kd">←</span><span class="nf">⎕NEW</span><span class="w"> </span><span class="nv">pete</span>
<span class="w">      </span><span class="nv">inst</span><span class="na">.</span><span class="nv">foo</span><span class="w"> </span><span class="m">1</span>
<span class="nv">Copied</span><span class="w">  </span><span class="m">1</span>
</code></pre></div></p>
<h5>Copying Objects from Session Files</h5>
<p>You may also copy objects from session (.dse) files, although with certain restrictions.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">        </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\</span><span class="nv">Pete</span><span class="na">\</span><span class="nv">Desktop</span><span class="na">\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">UCMD</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\</span><span class="nv">Pete</span><span class="na">\</span><span class="nv">Desktop</span><span class="na">\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Oct</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="na">...</span>
</code></pre></div>
<ul>
<li>You can copy a function or variable from any namespace under a saved <code>⎕SE</code>, no matter what your current namespace is.</li>
<li>You can copy any namespace without GUI from a saved <code>⎕SE</code>, no matter what you current namespace is.</li>
<li>You can copy any namespace with GUI from a saved <code>⎕SE</code> as long as your current namespace is the same as the parent namespace of the namespace you are trying to copy</li>
</ul>
<p class="example">Examples</p>
<p>In the following example, the <em>not copied</em> cases occur because the current namespace is not an appropriate parent for the object in question.
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="c1">#</span>
<span class="c1">#</span>
<span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">Dyalog</span><span class="na">.</span><span class="nv">Callbacks</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Oct</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="bp">:</span><span class="m">31</span><span class="bp">:</span><span class="m">14</span><span class="w"> </span><span class="m">2015</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">cbbot</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Oct</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="bp">:</span><span class="m">31</span><span class="bp">:</span><span class="m">14</span><span class="w"> </span><span class="m">2015</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">copied</span><span class="w"> </span><span class="nv">cbbot</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nf">⎕SE</span>
<span class="nf">⎕SE</span>
<span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">cbbot</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Oct</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="bp">:</span><span class="m">31</span><span class="bp">:</span><span class="m">14</span><span class="w"> </span><span class="m">2015</span>

<span class="w">      </span><span class="p">)</span><span class="nv">copy</span><span class="w"> </span><span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nf">⎕SE</span><span class="na">.</span><span class="nv">cbbot</span><span class="na">.</span><span class="nv">bandsb1</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Users</span><span class="na">\...\</span><span class="nv">pete</span><span class="na">.</span><span class="nv">dse</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Wed</span><span class="w"> </span><span class="nv">Oct</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">15</span><span class="bp">:</span><span class="m">31</span><span class="bp">:</span><span class="m">14</span><span class="w"> </span><span class="m">2015</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">copied</span><span class="w"> </span><span class="nv">bandsb1</span>
</code></pre></div></p>
</article>
<article id="system-commands-cs">
<div class="heading-container"><h3 class="heading" id="system-commands-cs-header">Change Space</h3><div class="command">)CS {nm}</div></div>
<p><code>)CS</code> changes the current space to the <strong>global</strong> namespace <code>nm</code>.</p>
<p>If no <code>nm</code> is given, the system changes to the top level (Root) namespace. If <code>nm</code> is not the name of a global namespace, the system reports the error message <code>Namespace does not exist</code>.</p>
<p><code>name</code> may be either a simple name or a compound name separated by '<code>.</code>', including one of the special names <code>'#'</code> (Root) or <code>'##'</code> (Parent).</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">CS</span>
<span class="c1">#</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">X</span>
<span class="c1">#.X</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">Y</span><span class="na">.</span><span class="nv">Z</span>
<span class="c1">#.X.Y.Z</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="c1">##</span>
<span class="c1">#.X.Y</span>
<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="c1">#.UTIL</span>
<span class="c1">#.UTIL</span>
</code></pre></div>
</article>
<article id="system-commands-drop">
<div class="heading-container"><h3 class="heading" id="system-commands-drop-header">Drop Workspace</h3><div class="command">)DROP {ws}</div></div>
<p>This command removes the specified workspace from disk storage.</p>
<p>See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p>If <code>ws</code> is omitted, a file open dialog box is displayed to elicit the workspace name.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">DROP</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">TEMP</span>
<span class="nv">Thu</span><span class="w"> </span><span class="nv">Sep</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">32</span><span class="bp">:</span><span class="m">18</span><span class="w"> </span><span class="m">1998</span>
</code></pre></div>
</article>
<article id="system-commands-ed">
<div class="heading-container"><h3 class="heading" id="system-commands-ed-header">Edit Object</h3><div class="command">)ED nms</div></div>
<p><code>)ED</code> invokes the Dyalog APL editor and opens an Edit window for each of the objects specified in <code>nms</code>.</p>
<p>If a name includes the slash character  ("\" or "/") it is taken to be the name of a file. See <i>Editing Scripts and Text Files</i>.</p>
<p>If a name is followed by a line number specified in square brackets, the Editor positions the cursor in the corresponding line. There must not be a space between the last character of the name and the "[".</p>
<p>If a name specifies a new symbol it is taken to be a function or operator.  However, if a name is localised in a suspended function or operator but is otherwise undefined, it is assumed to be a vector of character vectors.</p>
<p>The type of a new object may be specified explicitly by preceding its name with an appropriate symbol as follows:</p>
<table>
<tbody>
<tr>
<td><code>∇</code></td>
<td>function or operator</td>
</tr>
<tr>
<td><code>→</code></td>
<td>simple character vector</td>
</tr>
<tr>
<td><code>∊</code></td>
<td>vector of character vectors</td>
</tr>
<tr>
<td><code>-</code></td>
<td>character matrix</td>
</tr>
<tr>
<td><code>⍟</code></td>
<td>Namespace script</td>
</tr>
<tr>
<td><code>○</code></td>
<td>Class script</td>
</tr>
<tr>
<td><code>∘</code></td>
<td>Interface</td>
</tr>
</tbody>
</table>
<p>The first object named becomes the top window on the stack.  See the <em>Dyalog for Microsoft Windows UI Guide</em> or the <em>Dyalog for UNIX UI Guide</em> for details.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">ED</span><span class="w"> </span><span class="nv">MYFUNCTION</span>

<span class="w">      </span><span class="p">)</span><span class="nv">ED</span><span class="w"> </span><span class="nv">MYFUNCTION</span><span class="sr">[</span><span class="m">1000</span><span class="sr">]</span><span class="w"> </span><span class="nv">YOURFUNCTION</span><span class="sr">[</span><span class="m">3</span><span class="sr">]</span>

<span class="w">      </span><span class="p">)</span><span class="nv">ED</span><span class="w"> </span><span class="bp">∇</span><span class="nv">FOO</span><span class="w"> </span><span class="o">-</span><span class="nv">MAT</span><span class="w"> </span><span class="o">∊</span><span class="nv">VECVEC</span>
</code></pre></div>
<p>Objects specified in <code>nms</code> that cannot be edited are silently ignored. Objects qualified with a namespace path  (e.g. <code>a.b.c.foo</code>) are silently ignored if the namespace does not exist.</p>
</article>
<article id="system-commands-erase">
<div class="heading-container"><h3 class="heading" id="system-commands-erase-header">Erase Object</h3><div class="command">)ERASE nms</div></div>
<p>This command erases named global defined objects (functions, operators, variables, namespaces and GUI objects) from the active workspace or current namespace.</p>
<p>If a named object is a function or operator in the state indicator, or the object is an operand of an operator in the state indicator, or the object is a function whose left argument is being executed, the object remains defined until its execution is completed or it is no longer referenced by an operator in the state indicator.  However, the name is available immediately for other uses.</p>
<p>If a named object is a GUI object, the object and all its children are deleted and removed from the screen.</p>
<p>If an object is not erased for any reason, the system reports  <code>not found</code>  followed by the name of the object.</p>
<p>Erasing objects such as external functions may have other implications: see <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a> for details.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">ERASE</span><span class="w"> </span><span class="nv">FOO</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nf">⎕IO</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="nf">⎕IO</span>
</code></pre></div>
</article>
<article id="system-commands-events">
<div class="heading-container"><h3 class="heading" id="system-commands-events-header">List Events</h3><div class="command">)EVENTS</div></div>
<p>The <code>)EVENTS</code> system command lists the Events that may be generated by the object associated with the current space.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'BB'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'BrowseBox'</span><span class="w"> </span>

<span class="w">      </span><span class="p">)</span><span class="nv">EVENTS</span>
<span class="nv">Close</span><span class="w">   </span><span class="nv">Create</span><span class="w">  </span><span class="nv">FileBoxCancel</span><span class="w">   </span><span class="nv">FileBoxOK</span>
</code></pre></div></p>
<p><code>)EVENTS</code> produces no output when executed in a pure (non-GUI) namespace, for example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="p">)</span><span class="nv">EVENTS</span>
</code></pre></div></p>
</article>
<article id="system-commands-fns">
<div class="heading-container"><h3 class="heading" id="system-commands-fns-header">List Global Defined Functions</h3><div class="command">)FNS {nm}</div></div>
<p>This command displays the names of global defined functions in the active workspace or current namespace.  Names are displayed in <code>⎕AV</code> collation order.  If a name is included after the command, only those names starting at or after the given name in collation order are displayed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">FNS</span>
<span class="nv">ASK</span><span class="w"> </span><span class="nv">DISPLAY</span><span class="w"> </span><span class="nv">GET</span><span class="w"> </span><span class="nv">PUT</span><span class="w"> </span><span class="nv">ZILCH</span>
<span class="w">      </span><span class="p">)</span><span class="nv">FNS</span><span class="w"> </span><span class="nv">G</span>
<span class="nv">GET</span><span class="w"> </span><span class="nv">PUT</span><span class="w"> </span><span class="nv">ZILCH</span>
</code></pre></div>
</article>
<article id="system-commands-holds">
<div class="heading-container"><h3 class="heading" id="system-commands-holds-header">Display Held Tokens</h3><div class="command">)HOLDS</div></div>
<p>System command <code>)HOLDS</code> displays a list of tokens which have been acquired or requested by the <code>:Hold</code> control structure.</p>
<p>Each line of the display is of the form:
<div class="highlight"><pre><span></span><code><span class="nv">token</span><span class="bp">:</span><span class="w">  </span><span class="nv">acq</span><span class="w">  </span><span class="nv">req</span><span class="w">  </span><span class="nv">req</span><span class="w"> </span><span class="na">...</span>
</code></pre></div></p>
<p>Where <code>acq</code> is the number of <em>the</em> thread that has acquired the token, and <code>req</code> is the number of <em>a</em> thread which is requesting it. For a token to appear in the display, a thread (and only one thread) must have acquired it, whereas any number of threads can be requesting it.</p>
<p class="example">Example</p>
<p>Thread <code>300</code>’s attempt to acquire token <code>'blue'</code> results in a deadlock:
<div class="highlight"><pre><span></span><code><span class="m">300</span><span class="bp">:</span><span class="nv">DEADLOCK</span>
<span class="nv">Sema4</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span><span class="w"> </span><span class="bp">:</span><span class="nv">Hold</span><span class="w"> </span><span class="s1">'blue'</span>
<span class="w">        </span><span class="err">^</span>

<span class="w">      </span><span class="p">)</span><span class="nv">HOLDS</span>
<span class="nv">blue</span><span class="bp">:</span><span class="w">   </span><span class="m">100</span>
<span class="nv">green</span><span class="bp">:</span><span class="w">  </span><span class="m">200</span><span class="w">     </span><span class="m">100</span>
<span class="nv">red</span><span class="bp">:</span><span class="w">    </span><span class="m">300</span><span class="w">     </span><span class="m">200</span><span class="w">     </span><span class="m">100</span>
</code></pre></div></p>
<ul>
<li><code>Blue</code> has been acquired by thread <code>100</code>.</li>
<li><code>Green</code> has been acquired by <code>200</code> and requested by <code>100</code>.</li>
<li><code>Red</code> has been acquired by <code>300</code> and requested by <code>200</code> and <code>100</code>.</li>
</ul>
<p>The following cycle of dependencies has caused the deadlock:
<div class="highlight"><pre><span></span><code><span class="nv">Thread</span><span class="w"> </span><span class="m">300</span><span class="w"> </span><span class="nv">attempts</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">acquire</span><span class="w"> </span><span class="nv">blue</span><span class="o">,</span><span class="w">      </span><span class="m">300</span><span class="w"> </span><span class="kd">→</span><span class="w"> </span><span class="nv">blue</span>
<span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">owned</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="m">100</span><span class="o">,</span><span class="w">                     </span><span class="o">↑</span><span class="w">      </span><span class="o">↓</span>
<span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">waiting</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">red</span><span class="o">,</span><span class="w">                 </span><span class="nv">red</span><span class="w"> </span><span class="kd">←</span><span class="w">  </span><span class="m">100</span>
<span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">owned</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="m">300</span><span class="na">.</span>
</code></pre></div></p>
</article>
<article id="system-commands-lib">
<div class="heading-container"><h3 class="heading" id="system-commands-lib-header">List Workspace Library</h3><div class="command">)LIB {dir}</div></div>
<p>This command lists the names of Dyalog APL workspaces contained in the given directory.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">LIB</span><span class="w"> </span><span class="nv">WS</span>
<span class="nv">MYWORK</span><span class="w"> </span><span class="nv">TEMP</span>
</code></pre></div>
<p>If a directory is not given, the workspaces on the user's APL workspace path (<strong>WSPATH</strong>) are listed.  In this case, the listing is divided into sections identifying the directories concerned.  The current directory is identified as "<code>.</code>".</p>
<p class="example">Example</p>
<p><div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">LIB</span>
<span class="na">.</span>
<span class="w">        </span><span class="nv">PDTEMP</span><span class="w">  </span><span class="nv">WORK</span><span class="w">   </span><span class="nv">GRAPHICS</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nv">c</span><span class="bp">:</span><span class="na">\</span><span class="nv">Dyalog</span><span class="na">\</span><span class="nv">ws</span>
<span class="w">        </span><span class="nv">display</span><span class="w"> </span><span class="nv">groups</span>
</code></pre></div></p>
</article>
<article id="system-commands-load">
<div class="heading-container"><h3 class="heading" id="system-commands-load-header">Load Workspace</h3><div class="command">)LOAD {ws}</div></div>
<p>This command causes the named stored workspace to be loaded.  The current active workspace is lost.</p>
<p><code>ws</code> specifies a file name. If no file extension is given, it is implied. See <i>WSEXT</i>.</p>
<p>If <code>ws</code> is a full or relative pathname, only the specified directory is examined.  If not, the APL workspace path (<code>WSPATH</code>) is traversed in search of the named workspace.  A stored workspace is one which has previously been saved with the system command <code>)SAVE</code> or the system function <code>⎕SAVE</code>.  Under Windows, if <code>ws</code> is omitted, the File Open dialog box is displayed.</p>
<p>If the workspace name is not valid or does not exist or if access to the workspace is not authorised, the system reports <code>ws not found</code>.  If the workspace name identifies a file or directory that is not a workspace, the system reports  <code>wsname is not a ws</code>.  If successfully loaded, the system reports workspace name <code>saved</code>, followed by the date and time when the workspace was last saved.  If the workspace is too large to be loaded into the APL session, the system reports <code>ws too large</code>.  After loading the workspace, the current namespace is set to <code>#</code> and the latent expression (<code>⎕LX</code>) is executed unless APL was invoked with the <strong>-x</strong> option. If the workspace was saved with a suspension, typing the expression <code>→1+⎕lc</code> will resume execution and switch back into the namespace associated with the suspended function.</p>
<p>If the workspace contains any GUI objects whose <code>Visible</code> property is 1, these objects will be displayed.  If the workspace contains a non-empty <code>⎕SM</code> but does not contain an SM GUI object, the form defined by <code>⎕SM</code> will be displayed in a window on the screen.</p>
<p>Holding the Ctrl key down while entering a <code>)LOAD</code> command or selecting a workspace from the session file menu causes the incoming latent expression to be <em>traced.</em></p>
<p>Holding the Shift key down while selecting a workspace from the session file menu will <em>prevent</em> execution of the latent expression.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">load</span><span class="w"> </span><span class="nv">dfns</span>
<span class="nv">C</span><span class="bp">:</span><span class="na">\</span><span class="nv">Program</span><span class="w"> </span><span class="nv">Files</span><span class="na">\</span><span class="nv">Dyalog</span><span class="na">\</span><span class="nv">Dyalog</span><span class="w"> </span><span class="nv">APL</span><span class="o">-</span><span class="m">64</span><span class="w"> </span><span class="na">...</span>

<span class="nv">An</span><span class="w"> </span><span class="nv">assortment</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">Functions</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Operators</span><span class="na">.</span>

<span class="w">      </span><span class="nv">tree</span><span class="w"> </span><span class="c1">#                ⍝ Workspace map.</span>
<span class="w">      </span><span class="o">↑</span><span class="m">¯10</span><span class="o">↑↓</span><span class="nv">attrib</span><span class="w"> </span><span class="nf">⎕nl</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">  </span><span class="c1">⍝ What's new?</span>
<span class="w">      </span><span class="nv">notes</span><span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="s1">'Word'</span><span class="w">     </span><span class="c1">⍝ Apropos "Word".</span>
</code></pre></div>
</article>
<article id="system-commands-methods">
<div class="heading-container"><h3 class="heading" id="system-commands-methods-header">List Methods</h3><div class="command">)METHODS</div></div>
<p>The <code>)METHODS</code> system command lists the Methods that apply to the object associated with the current space.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'F'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'Form'</span>
<span class="w">      </span><span class="p">)</span><span class="nv">METHODS</span>
<span class="nv">Animate</span><span class="w"> </span><span class="nv">ChooseFont</span><span class="w">   </span><span class="nv">Detach</span><span class="w">  </span><span class="nv">GetFocus</span><span class="w">    </span><span class="nv">GetTextSize</span><span class="w"> </span><span class="nv">Wait</span>
</code></pre></div></p>
<p><code>)METHODS</code> produces no output when executed in a pure (non-GUI) namespace, for example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="p">)</span><span class="nv">METHODS</span>
</code></pre></div></p>
</article>
<article id="system-commands-ns">
<div class="heading-container"><h3 class="heading" id="system-commands-ns-header">Create Namespace</h3><div class="command">)NS {nm}</div></div>
<p><code>)NS</code> creates a <strong>global</strong> namespace and displays its full name, <code>nm</code>.</p>
<p><code>nm</code> may be either a simple name or a compound name separated by <code>'.'</code>, including one of the special names <code>'#'</code> (Root) or <code>'##'</code> (Parent).</p>
<p>If <code>name</code> does not start with the special Root space identifier <code>'#'</code>, the new namespace is created relative to the current one.</p>
<p>If <code>name</code> is already in use for a workspace object other than a namespace, the command fails and displays the error message <code>Name already exists</code>.</p>
<p>If <code>name</code> is an existing namespace, no change occurs.</p>
<p><code>)NS</code> with no <code>nm</code> specification displays the current namespace.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">NS</span>
<span class="c1">#</span>

<span class="w">      </span><span class="p">)</span><span class="nv">NS</span><span class="w"> </span><span class="nv">W</span><span class="na">.</span><span class="nv">X</span>
<span class="c1">#.W.X</span>

<span class="w">      </span><span class="p">)</span><span class="nv">CS</span><span class="w"> </span><span class="nv">W</span><span class="na">.</span><span class="nv">X</span>
<span class="c1">#.W.X</span>

<span class="w">      </span><span class="p">)</span><span class="nv">NS</span><span class="w"> </span><span class="nv">Y</span><span class="na">.</span><span class="nv">Z</span>
<span class="c1">#.W.X.Y.Z</span>

<span class="w">      </span><span class="p">)</span><span class="nv">NS</span>
<span class="c1">#.W.X</span>
</code></pre></div>
</article>
<article id="system-commands-objects">
<div class="heading-container"><h3 class="heading" id="system-commands-objects-header">List Global Namespaces</h3><div class="command">)OBJECTS {nm}</div></div>
<p>This command displays the names of global <strong>namespaces</strong> in the active workspace.  Names are displayed in the <code>⎕AV</code> collating order.  If a name is included after the command, only those names starting at or after the given name in collating order are displayed.  Namespaces are objects created using <code>⎕NS</code>, <code>)NS</code> or <code>⎕WC</code> and have name class 9.</p>
<p>Note:  <code>)OBS</code> can be used as an <strong>alternative</strong> to <code>)OBJECTS</code></p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">OBJECTS</span>
<span class="nv">FORM1</span><span class="w">   </span><span class="nv">UTIL</span><span class="w">    </span><span class="nv">WSDOC</span><span class="w">   </span><span class="nv">XREF</span>

<span class="w">      </span><span class="p">)</span><span class="nv">OBS</span><span class="w"> </span><span class="nv">W</span>
<span class="nv">WSDOC</span><span class="w">   </span><span class="nv">XREF</span>
</code></pre></div>
</article>
<article id="system-commands-obs">
<div class="heading-container"><h3 class="heading" id="system-commands-obs-header">List Global Namespaces</h3><div class="command">)OBS {nm}</div></div>
<p>This command is the same as the <code>)OBJECTS</code> command. See <a class="internal-link" href="#system-commands-objects">Section 5.2.17</a></p>
</article>
<article id="system-commands-off">
<div class="heading-container"><h3 class="heading" id="system-commands-off-header">Sign Off APL</h3><div class="command">)OFF</div></div>
<p>This command terminates the APL session, returning to the Operating System command processor or shell.</p>
</article>
<article id="system-commands-ops">
<div class="heading-container"><h3 class="heading" id="system-commands-ops-header">List Global Defined Operators</h3><div class="command">)OPS {nm}</div></div>
<p>This command displays the names of global defined operators in the active workspace or current namespace.  Names are displayed in <code>⎕AV</code> collation order.  If a name is included after the command, only those names starting at or after the given name in collation order are displayed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">OPS</span>
<span class="nv">AND</span><span class="w"> </span><span class="nv">DOIF</span><span class="w"> </span><span class="nv">DUAL</span><span class="w"> </span><span class="nv">ELSE</span><span class="w"> </span><span class="nv">POWER</span>

<span class="w">      </span><span class="p">)</span><span class="nv">OPS</span><span class="w"> </span><span class="nv">E</span>
<span class="nv">ELSE</span><span class="w"> </span><span class="nv">POWER</span>
</code></pre></div>
</article>
<article id="system-commands-pcopy">
<div class="heading-container"><h3 class="heading" id="system-commands-pcopy-header">Protected Copy</h3><div class="command">)PCOPY {ws {nms}}</div></div>
<p>This command brings all or selected global objects from a stored workspace with the given name provided that there is no existing global usage of the name in the active workspace.  A stored workspace is one which has previously been saved with the system command <code>)SAVE</code> or the system function <code>⎕SAVE</code>.</p>
<p><code>)PCOPY</code> does not copy <code>⎕SM</code>.  This restriction may be removed in a later release.</p>
<p>If the workspace name is not valid or does not exist or if access to the workspace is not authorised, the system reports "<code>ws not found</code>".  If the workspace name identifies a file that is not a workspace, or is a workspace with an invalid version number (one that is greater than the version of the current APL) the system reports "<code>bad ws</code>".</p>
<p>See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p>If the workspace name is the name of a valid, readable workspace, the system reports the workspace name, "<code>saved</code>", and the date and time that the workspace was last saved.</p>
<p>If the list of names is excluded, all global defined objects (functions and variables) are copied.  If an object is not found in the stored workspace, the system reports "<code>not found</code>" followed by the name of the object. If an object cannot be copied into the active workspace because there is an existing referent, the system reports "<code>not copied</code>" followed by the name of the object.</p>
<p>For further information, see <a class="internal-link" href="#system-functions-cy">Section 4.6.23</a>.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">PCOPY</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">UTILITY</span>
<span class="nv">WS</span><span class="na">/</span><span class="nv">UTILITY</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Mon</span><span class="w"> </span><span class="nv">Nov</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">13</span><span class="bp">:</span><span class="m">11</span><span class="bp">:</span><span class="m">19</span><span class="w"> </span><span class="m">1993</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">copied</span><span class="w"> </span><span class="nv">COPIED</span><span class="w"> </span><span class="nv">IF</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">copied</span><span class="w"> </span><span class="nv">COPIED</span><span class="w"> </span><span class="nv">JOIN</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">PCOPY</span><span class="w"> </span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">FOO</span><span class="w"> </span><span class="nv">X</span>
<span class="na">./</span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Mon</span><span class="w"> </span><span class="nv">Nov</span><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">14</span><span class="bp">:</span><span class="m">20</span><span class="bp">:</span><span class="m">47</span><span class="w"> </span><span class="m">1993</span>
<span class="nv">not</span><span class="w"> </span><span class="nv">found</span><span class="w"> </span><span class="nv">X</span>
</code></pre></div>
<h5>Warning</h5>
<p>If a workspace full condition occurs during the execution of <code>)PCOPY</code> the state of the active workspace is unpredictable.</p>
</article>
<article id="system-commands-props">
<div class="heading-container"><h3 class="heading" id="system-commands-props-header">List Properties</h3><div class="command">)PROPS</div></div>
<p>The <code>)PROPS</code> system command lists the Properties of the object associated with the current space.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'BB'</span><span class="w"> </span><span class="nf">⎕WC</span><span class="w"> </span><span class="s1">'BrowseBox'</span><span class="w"> </span>

<span class="w">      </span><span class="p">)</span><span class="nv">PROPS</span>
<span class="nv">BrowseFor</span><span class="w">       </span><span class="nv">Caption</span><span class="w"> </span><span class="nv">ChildList</span><span class="w">       </span><span class="nv">Data</span><span class="w">    </span><span class="nv">Event</span>
<span class="nv">EventList</span><span class="w">       </span><span class="nv">HasEdit</span><span class="w"> </span><span class="nv">KeepOnClose</span><span class="w">     </span><span class="nv">MethodList</span>
<span class="nv">PropList</span><span class="w">        </span><span class="nv">StartIn</span><span class="w"> </span><span class="nv">Target</span><span class="w">  </span><span class="nv">Translate</span><span class="w">       </span><span class="nv">Type</span>
</code></pre></div></p>
<p><code>)PROPS</code> produces no output when executed in a pure (non GUI) namespace, for example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nf">⎕CS</span><span class="w"> </span><span class="s1">'X'</span><span class="w"> </span><span class="nf">⎕NS</span><span class="w"> </span><span class="s1">''</span>
<span class="w">      </span><span class="p">)</span><span class="nv">PROPS</span>
</code></pre></div></p>
</article>
<article id="system-commands-reset">
<div class="heading-container"><h3 class="heading" id="system-commands-reset-header">Reset State Indicator</h3><div class="command">)RESET {n}</div></div>
<p>This command cancels all suspensions recorded in the state indicator and discards any unprocessed events in the event queue.</p>
<p>The optional parameter <code>n</code> specifies that only the top <code>n</code> suspensions are to be cleared.</p>
<p><code>)RESET</code> also performs an internal re-organisation of the workspace and process memory. See <a class="internal-link" href="#system-functions-wa">Section 4.6.172</a>  for details.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.FOO[1]*</span>
<span class="o">⍎</span>
<span class="c1">#.FOO[1]*</span>

<span class="w">      </span><span class="p">)</span><span class="nv">RESET</span>

<span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
</code></pre></div>
</article>
<article id="system-commands-save">
<div class="heading-container"><h3 class="heading" id="system-commands-save-header">Save Workspace</h3><div class="command">)SAVE {-force} {ws}</div></div>
<p>This command compacts (see <a class="internal-link" href="#system-functions-wa">Section 4.6.172</a> for details) and saves the active workspace.</p>
<p>If specified, <code>ws</code> is a full or relative path name to the file in which the workspace will be written. If <code>ws</code> is omitted, it defaults to <code>⎕WSID</code>. Unless the path specified by <code>ws</code> or <code>⎕WSID</code> is a full pathname, it is taken to be relative to the current working directory which may be obtained by the expression: <code>⊃1 ⎕NPARTS ''</code>.</p>
<p>If  <code>ws</code> specifies a file name other than that implied by  <code>⎕WSID</code>, the specified file must not already exist unless the <strong>force</strong> parameter is specified.. If <code>ws</code> is omitted or resolves to the same file as  <code>⎕WSID</code>, an existing stored workspace with the same name will be replaced.</p>
<p>See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p>If an extension is not specified, an extension is added according to the <i>WSEXT parameter</i>..</p>
<p>A workspace may not be saved if any threads (other than the root thread 0) are running or if there are any Edit or Trace windows open. Otherwise, the workspace is saved with its state of execution intact, however certain operations may be performed before it is saved. For further information, see <a class="internal-link" href="#the-i-beam-operator-set-workspace-save-options">Section 3.2.39</a>.</p>
<p><code>)SAVE</code> may fail with one of the following error messages:</p>
<table>
<tbody>
<tr>
<td><code>unacceptable char</code></td>
<td>The given workspace name was ill-formed</td>
</tr>
<tr>
<td><code>not saved this ws is WSID</code></td>
<td>An attempt was made to change the name of the workspace for the save, and the renamed workspace already existed. This error can be overridden by specifying <strong>-force</strong> .</td>
</tr>
<tr>
<td><code>not saved this ws is CLEAR WS</code></td>
<td>The active workspace was <code>CLEAR WS</code> and no attempt was made to change the name.</td>
</tr>
<tr>
<td><code>Can't save - file could not be created.</code></td>
<td>The workspace name supplied did not represent a valid file name for the current Operating System.</td>
</tr>
<tr>
<td><code>cannot create</code></td>
<td>The user does not have access to create the file OR the workspace name conflicts with an existing non-workspace file.</td>
</tr>
<tr>
<td><code>cannot save with windows open</code></td>
<td>A workspace may not be saved if trace or edit windows are open.</td>
</tr>
</tbody>
</table>
<p>After a successful save, the system reports the workspace name, followed by the word  "<code>saved</code>" and the current time and date; and if <code>ws</code> specified a new name, <code>⎕WSID</code> is assigned that name.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SAVE</span><span class="w"> </span><span class="nv">MYWORK</span>
<span class="na">./</span><span class="nv">MYWORK</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Thu</span><span class="w"> </span><span class="nv">Sep</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">32</span><span class="bp">:</span><span class="m">20</span><span class="w"> </span><span class="m">1998</span>
</code></pre></div>
<p>Note that any time prior to executing <code>)SAVE</code>, the active workspace may be renamed by the system command <code>)WSID</code> or by assigning a name to the system variable <code>⎕WSID</code>.</p>
<p>A stored workspace may subsequently be loaded with the system command <code>)LOAD</code> or the system function <code>⎕LOAD</code>, and objects may be copied from a stored workspace with the system commands <code>)COPY</code> or <code>)PCOPY</code> or the system function <code>⎕CY</code>.</p>
</article>
<article id="system-commands-sh">
<div class="heading-container"><h3 class="heading" id="system-commands-sh-header">Execute (UNIX) Command</h3><div class="command">)SH {cmd}</div></div>
<p>This command allows WINDOWS or UNIX shell commands to be given from APL.  <code>)SH</code> is a synonym of <code>)CMD</code>. Either command may be given in either environment (Windows or UNIX) with exactly the same effect.  <code>)SH</code> is probably more natural for the UNIX user. This section describes the behaviour of <code>)SH</code> and <code>)CMD</code> under UNIX. See <a class="internal-link" href="#system-commands-cmd">Section 5.2.3</a> for a discussion of their behaviour under Windows.</p>
<p>The system functions <a class="internal-link" href="#system-functions-execute-unix-command">Section 4.6.131</a> and <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a> provide similar facilities but may be executed from within APL code. For further information, see <a class="internal-link" href="#system-functions-execute-unix-command">Section 4.6.131</a> and <a class="internal-link" href="#system-functions-execute-windows-command">Section 4.6.17</a>.</p>
<p><code>)SH</code> allows UNIX shell commands to be given from APL. The argument must be entered in the appropriate case (usually lower-case).  The result of the command, if any, is displayed.</p>
<p><code>)SH</code> causes Dyalog APL to invoke the <code>system()</code> library call. The shell which is used to run the command is therefore the shell which <code>system()</code> is defined to call. For example, under AIX this would be <code>/usr/bin/sh</code>.</p>
<p>When the shell is closed, control returns to APL. See <em>Dyalog for UNIX UI Guide</em> for further information.</p>
<p>The parameters CMD_PREFIX and CMD_POSTFIX may be used to execute a different shell under the shell associated with <code>system()</code>.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">sh</span><span class="w"> </span><span class="nv">ps</span><span class="w"> </span><span class="o">-</span><span class="nv">u</span><span class="w"> </span><span class="nv">andys</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">grep</span><span class="w"> </span><span class="o">-</span><span class="nv">v</span><span class="w"> </span><span class="nv">ps</span>
<span class="w">   </span><span class="nv">UID</span><span class="w">      </span><span class="nv">PID</span><span class="w">    </span><span class="nv">TTY</span><span class="w">  </span><span class="nv">TIME</span><span class="w"> </span><span class="nv">CMD</span>
<span class="w">  </span><span class="m">6179</span><span class="w">  </span><span class="m">9437326</span><span class="w">  </span><span class="nv">pts</span><span class="na">/</span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="bp">:</span><span class="m">00</span><span class="w"> </span><span class="nv">ksh</span>
<span class="w">  </span><span class="m">6179</span><span class="w"> </span><span class="m">10223736</span><span class="w">  </span><span class="nv">pts</span><span class="na">/</span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="bp">:</span><span class="m">00</span><span class="w"> </span><span class="nv">dyalog</span>
<span class="w">  </span><span class="m">6179</span><span class="w"> </span><span class="m">10354810</span><span class="w">  </span><span class="nv">pts</span><span class="na">/</span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="bp">:</span><span class="m">00</span><span class="w"> </span><span class="nv">sh</span>
<span class="w">  </span><span class="m">6179</span><span class="w"> </span><span class="m">10879188</span><span class="w">  </span><span class="nv">pts</span><span class="na">/</span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="bp">:</span><span class="m">00</span><span class="w"> </span><span class="nv">ksh</span>
<span class="w">  </span><span class="m">6179</span><span class="w"> </span><span class="m">11665660</span><span class="w">      </span><span class="o">-</span><span class="w">  </span><span class="m">0</span><span class="bp">:</span><span class="m">00</span><span class="w"> </span><span class="nv">sshd</span>
</code></pre></div>
<h5>Note</h5>
<p>This function is disabled and instead generates a <code>DOMAIN ERROR</code> if the RIDE_SPAWNED parameter is non-zero. This is designed to prevent it being invoked from a RIDE session which does not support this type of user interface. For further details, see the <em>RIDE User Guide</em>.</p>
</article>
<article id="system-commands-si">
<div class="heading-container"><h3 class="heading" id="system-commands-si-header">State Indicator</h3><div class="command">)SI {n} {-tid=tn}</div></div>
<p>This command displays the contents of the state indicator in the active workspace.  The state indicator identifies those operations which are suspended or pendent for each suspension.</p>
<p>The optional parameter <code>n</code> specifies that only the first <code>n</code> or last <code>¯n</code> lines of the output should be displayed.</p>
<p>The optional parameter <code>-tid=tn</code> specifies that the state indicator is to be displayed only for thread number <code>tn</code>.</p>
<p>The list consists of a line for each suspended or pendent operation beginning with the most recently suspended function or operator.  Each line may be:</p>
<ul>
<li>The name of a defined function or operator, followed by the line number at which the operation is halted, and followed by the <code>*</code> symbol if the operation is suspended. The name of the function or operator is its full pathname relative to the root namespace <code>#</code>. For example, <code>#.UTIL.PRINT</code>. In addition, the display of a function or operator which has dynamically changed space away from its origin is prefixed with its current space. For example, <code>[⎕SE] TRAV</code>.</li>
<li>A primitive operator symbol.</li>
<li>The Execute function symbol (<code>⍎</code>).</li>
<li>The Evaluated Input symbol (<code>⎕</code>).</li>
<li>The System Function <code>⎕DQ</code> or <code>⎕SR</code> (occurs when executing a callback function).</li>
</ul>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="c1">#.PLUS[2]*</span>
<span class="na">.</span>
<span class="c1">#.MATDIV[4]</span>
<span class="c1">#.FOO[1]*</span>
<span class="o">⍎</span>
</code></pre></div>
<p>This example indicates that at some point function <code>FOO</code> was executed and suspended on line 1. Subsequently, function <code>MATDIV</code> was invoked, with a function derived from the Inner Product or Outer Product operator (<code>.</code>) having defined function <code>PLUS</code> as an operand.</p>
<p>In the following, function <code>foo</code> in namespace <code>x</code> has called <code>goo</code> in namespace <code>y</code>. Function <code>goo</code> has then changed space (<code>⎕CS</code>) to namespace <code>z</code> where it has been suspended:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="sr">[</span><span class="nv">z</span><span class="sr">]</span><span class="w"> </span><span class="nv">y</span><span class="na">.</span><span class="nv">goo</span><span class="sr">[</span><span class="m">2</span><span class="sr">]</span><span class="o">*</span>
<span class="nv">x</span><span class="na">.</span><span class="nv">foo</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
</code></pre></div></p>
<h5>Threads</h5>
<p>In a multi-threading application, where parent threads spawn child threads, the state indicator assumes the structure of a branching tree. Branches of the tree are represented by indenting lines belonging to child threads. For example:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SI</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.Calc[1]</span>
<span class="na">&amp;</span><span class="m">5</span>
<span class="err">·</span><span class="w">   </span><span class="err">·</span><span class="w">   </span><span class="c1">#.DivSub[1]</span>
<span class="err">·</span><span class="w">   </span><span class="na">&amp;</span><span class="m">7</span>
<span class="err">·</span><span class="w">   </span><span class="err">·</span><span class="w">   </span><span class="c1">#.DivSub[1]</span>
<span class="err">·</span><span class="w">   </span><span class="na">&amp;</span><span class="m">6</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.Div[2]*</span>
<span class="na">&amp;</span><span class="m">4</span>
<span class="c1">#.Sub[3]</span>
<span class="c1">#.Main[4]</span>
</code></pre></div></p>
<p>Here, <code>Main</code> has called <code>Sub</code>, which has spawned threads <code>4</code> and <code>5</code> with functions: <code>Div</code> and <code>Calc</code>. Function <code>Div</code>, after spawning <code>DivSub</code> in each of threads <code>6</code> and <code>7</code>, has been suspended at line [2].</p>
<p>The state indicator for a particular thread <code>tn</code> may be displayed by specifying the parameter <code>-tid=tn</code>.
<div class="highlight"><pre><span></span><code><span class="w">       </span><span class="vg">⎕</span><span class="kd">←</span><span class="nv">foo</span><span class="na">&amp;¨</span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span>
<span class="err">┌</span><span class="kd">→</span><span class="err">─────────┐</span>
<span class="err">│</span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="err">│</span>
<span class="err">└</span><span class="o">~</span><span class="err">─────────┘</span>
<span class="w">       </span><span class="p">)</span><span class="nv">si</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.foo[1]</span>
<span class="na">&amp;</span><span class="m">9</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.foo[1]</span>
<span class="na">&amp;</span><span class="m">10</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.foo[1]</span>
<span class="na">&amp;</span><span class="m">11</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.foo[1]</span>
<span class="na">&amp;</span><span class="m">12</span>
<span class="w">      </span><span class="p">)</span><span class="nv">si</span><span class="w"> </span><span class="o">-</span><span class="nv">tid</span><span class="o">=</span><span class="m">11</span>
<span class="c1">#.foo[1]</span>
</code></pre></div></p>
</article>
<article id="system-commands-sic">
<div class="heading-container"><h3 class="heading" id="system-commands-sic-header">Clear State Indicator</h3><div class="command">)SIC</div></div>
<p>This command is a synonym for <code>)RESET</code>. See <a class="internal-link" href="#system-commands-reset">Section 5.2.23</a></p>
</article>
<article id="system-commands-sinl">
<div class="heading-container"><h3 class="heading" id="system-commands-sinl-header">State Indicator &amp; Name List</h3><div class="command">)SINL</div></div>
<p>This command displays the contents of the state indicator together with local names. The display is the same as for <code>)SI</code> (see above) except that a list of local names is appended to each defined function or operator line.</p>
<p class="example">Example</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">SINL</span>
<span class="c1">#.PLUS[2]*        B       A       R       DYADIC  END</span>
<span class="na">.</span>
<span class="c1">#.MATDIV[4]       R       END     I       J       ⎕TRAP</span>
<span class="c1">#.FOO[1]* R</span>
<span class="o">⍎</span>
</code></pre></div>
</article>
<article id="system-commands-tid">
<div class="heading-container"><h3 class="heading" id="system-commands-tid-header">Thread Identity</h3><div class="command">)TID {tid}</div></div>
<p><code>)TID</code> associates the Session window with the specified thread so that expressions that you subsequently execute in the Session are executed in the context of that thread.</p>
<p>If you attempt to <code>)TID</code> to a thread that is paused or running, that thread will, if possible, be interrupted by a strong interrupt. If the thread is in a state which it would be inappropriate to interrupt (for example, if the thread is executing an external function), the system reports:
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="nv">Can</span><span class="err">'</span><span class="nv">t</span><span class="w"> </span><span class="nv">switch</span><span class="o">,</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">thread</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">n</span>
</code></pre></div></p>
<p>If no thread number is given, <code>)TID</code> reports the number of the current thread.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">⍝ State indicator</span>
<span class="w">      </span><span class="p">)</span><span class="nv">si</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.print[1]</span>
<span class="na">&amp;</span><span class="m">3</span>
<span class="err">·</span><span class="w">   </span><span class="err">·</span><span class="w">   </span><span class="c1">#.sub_calc[2]*</span>
<span class="err">·</span><span class="w">   </span><span class="na">&amp;</span><span class="m">2</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.calc[1]</span>
<span class="na">&amp;</span><span class="m">1</span>

<span class="w">      </span><span class="c1">⍝ Current thread</span>
<span class="w">      </span><span class="p">)</span><span class="nv">tid</span>
<span class="nv">is</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="c1">⍝ Switch suspension to thread 3</span>
<span class="w">      </span><span class="p">)</span><span class="nv">tid</span><span class="w"> </span><span class="m">3</span>
<span class="nv">was</span><span class="w"> </span><span class="m">2</span>

<span class="w">      </span><span class="c1">⍝ State indicator</span>
<span class="w">      </span><span class="p">)</span><span class="nv">si</span>
<span class="err">·</span><span class="w">   </span><span class="c1">#.print[1]*</span>
<span class="na">&amp;</span><span class="m">3</span>
<span class="err">·</span><span class="w">   </span><span class="err">·</span><span class="w">   </span><span class="c1">#.sub_calc[2]</span>
<span class="err">·</span><span class="w">   </span><span class="na">&amp;</span><span class="m">2</span>
<span class="err">·</span><span class="w">   </span><span class="nv">calc</span><span class="sr">[</span><span class="m">1</span><span class="sr">]</span>
<span class="na">&amp;</span><span class="m">1</span>

<span class="w">      </span><span class="c1">⍝ Attempt to switch to pendent thread 1</span>
<span class="w">      </span><span class="p">)</span><span class="nv">tid</span><span class="w"> </span><span class="m">1</span>
<span class="nv">Can</span><span class="err">'</span><span class="nv">t</span><span class="w"> </span><span class="nv">switch</span><span class="o">,</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">thread</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">3</span>
</code></pre></div>
</article>
<article id="system-commands-vars">
<div class="heading-container"><h3 class="heading" id="system-commands-vars-header">List Global Defined Variables</h3><div class="command">)VARS {nm}</div></div>
<p>This command displays the names of global defined variables in the active workspace or current namespace.  Names are displayed in <code>⎕AV</code> collation order.  If a name is included after the command, only those names starting at or after the given name in collation order are displayed.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">VARS</span>
<span class="nv">A</span><span class="w">  </span><span class="nv">B</span><span class="w">  </span><span class="nv">F</span><span class="w">  </span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">VAR</span>

<span class="w">      </span><span class="p">)</span><span class="nv">VARS</span><span class="w"> </span><span class="nv">F</span>
<span class="nv">F</span><span class="w"> </span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">VAR</span>
</code></pre></div>
</article>
<article id="system-commands-wsid">
<div class="heading-container"><h3 class="heading" id="system-commands-wsid-header">Workspace Identification</h3><div class="command">)WSID {ws}</div></div>
<p>This command displays or sets the name of the active workspace.</p>
<p>If a workspace name is not specified, <code>)WSID</code> reports the name of the current active workspace.  The name reported is the full path name, including directory references.</p>
<p>If a workspace name is given, the current active workspace is renamed accordingly.  The previous name of the active workspace (excluding directory references) is reported.  See <i>Programmer's Guide: Workspaces</i> for the rules for specifying a workspace name.</p>
<p class="example">Examples</p>
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="p">)</span><span class="nv">LOAD</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">TEMP</span>
<span class="nv">WS</span><span class="na">/</span><span class="nv">TEMP</span><span class="w"> </span><span class="nv">saved</span><span class="w"> </span><span class="nv">Thu</span><span class="w"> </span><span class="nv">Sep</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">10</span><span class="bp">:</span><span class="m">32</span><span class="bp">:</span><span class="m">19</span><span class="w"> </span><span class="m">1998</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">WSID</span>
<span class="nv">is</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">TEMP</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">WSID</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">KEEP</span>
<span class="nv">was</span><span class="w"> </span><span class="nv">WS</span><span class="na">/</span><span class="nv">TEMP</span>
<span class="w"> </span>
<span class="w">      </span><span class="p">)</span><span class="nv">WSID</span>
<span class="nv">WS</span><span class="na">/</span><span class="nv">KEEP</span>
</code></pre></div>
</article>
<article id="system-commands-xload">
<div class="heading-container"><h3 class="heading" id="system-commands-xload-header">Load without Latent Expression</h3><div class="command">)XLOAD {ws}</div></div>
<p>This command causes the named stored workspace to be loaded.  The current active workspace is lost.</p>
<p><code>)XLOAD</code> is identical in effect to <code>)LOAD</code> except that <code>)XLOAD</code> does <strong>not</strong> cause the expression defined by the latent expression <code>⎕LX</code> in the saved workspace to be executed.</p>
</article>
</section>
</section>
<section data-chapter-seq="6" id="appendices">
<h1 class="chapter" id="appendices-header">Appendices</h1>
<article id="pcre-specifications-pcre-overview">
<h2 id="pcre-specifications-pcre-overview-header"> PCRE Overview</h2>
<p>PCRE (Perl Compatible Regular Expressions) is an <em>open source</em> library used by the
<code>⎕R</code> and <code>⎕S</code> system operators. The regular expression syntax which the library
supports is not unique to APL nor is it an integral part of the language.</p>
<p>There are two named sections: <em>pcrepattern</em>, which
describes the full syntax and semantics); and <em>prcresyntax</em>, a quick reference summary.</p>
</article>
<article id="pcre-specifications-pcre-regular-expression-syntax-summary">
<h2 id="pcre-specifications-pcre-regular-expression-syntax-summary-header"> PCRE Regular Expression Syntax Summary</h2>
<p>The following is a summary of search pattern syntax.
<div class="highlight"><pre><span></span><code><span class="nv">PCRESYNTAX</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="w">              </span><span class="nv">Library</span><span class="w"> </span><span class="nv">Functions</span><span class="w"> </span><span class="nv">Manual</span><span class="w">              </span><span class="nv">PCRESYNTAX</span><span class="p">(</span><span class="m">3</span><span class="p">)</span>

<span class="nv">NAME</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Perl</span><span class="o">-</span><span class="nv">compatible</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expressions</span>

<span class="nv">PCRE</span><span class="w"> </span><span class="nv">REGULAR</span><span class="w"> </span><span class="nv">EXPRESSION</span><span class="w"> </span><span class="nv">SYNTAX</span><span class="w"> </span><span class="nv">SUMMARY</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">full</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">semantics</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expressions</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">sup</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ported</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">pcrepattern</span><span class="w">  </span><span class="nv">documentation</span><span class="na">.</span><span class="w">  </span><span class="nv">This</span>
<span class="w">       </span><span class="nv">document</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quick</span><span class="o">-</span><span class="nv">reference</span><span class="w"> </span><span class="nv">summary</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span>

<span class="nv">QUOTING</span>

<span class="w">         </span><span class="na">\</span><span class="nv">x</span><span class="w">         </span><span class="nv">where</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">alphanumeric</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">x</span>
<span class="w">         </span><span class="na">\</span><span class="nv">Q</span><span class="na">...\</span><span class="nv">E</span><span class="w">    </span><span class="nv">treat</span><span class="w"> </span><span class="nv">enclosed</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">literal</span>

<span class="nv">CHARACTERS</span>

<span class="w">         </span><span class="na">\</span><span class="nv">a</span><span class="w">         </span><span class="nv">alarm</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">BEL</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">07</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">cx</span><span class="w">        </span><span class="s2">"control-x"</span><span class="o">,</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">e</span><span class="w">         </span><span class="nv">escape</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">1</span><span class="nv">B</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">f</span><span class="w">         </span><span class="nv">form</span><span class="w"> </span><span class="nv">feed</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">C</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">n</span><span class="w">         </span><span class="nv">newline</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">A</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">r</span><span class="w">         </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">D</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">t</span><span class="w">         </span><span class="nv">tab</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">09</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="m">0</span><span class="nv">dd</span><span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="m">0</span><span class="nv">dd</span>
<span class="w">         </span><span class="na">\</span><span class="nv">ddd</span><span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">ddd</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">backreference</span>
<span class="w">         </span><span class="na">\</span><span class="nv">o</span><span class="kt">{</span><span class="nv">ddd</span><span class="na">..</span><span class="kt">}</span><span class="w">  </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">ddd</span><span class="na">..</span>
<span class="w">         </span><span class="na">\</span><span class="nv">xhh</span><span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">hh</span>
<span class="w">         </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="nv">hhh</span><span class="na">..</span><span class="kt">}</span><span class="w">  </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">hhh</span><span class="na">..</span>

<span class="w">       </span><span class="nv">Note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="na">\</span><span class="m">0</span><span class="nv">dd</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="na">\</span><span class="m">8</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="m">9</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">lit</span><span class="o">-</span>
<span class="w">       </span><span class="nv">eral</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="s2">"8"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"9"</span><span class="na">.</span>

<span class="nv">CHARACTER</span><span class="w"> </span><span class="nv">TYPES</span>

<span class="w">         </span><span class="na">.</span><span class="w">          </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">except</span><span class="w"> </span><span class="nv">newline</span><span class="sr">;</span>
<span class="w">                      </span><span class="nv">in</span><span class="w"> </span><span class="nv">dotall</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">whatsoever</span>
<span class="w">         </span><span class="na">\</span><span class="nv">C</span><span class="w">         </span><span class="nv">one</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">unit</span><span class="o">,</span><span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="p">(</span><span class="nv">best</span><span class="w"> </span><span class="nv">avoided</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digit</span>
<span class="w">         </span><span class="na">\</span><span class="nv">D</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digit</span>
<span class="w">         </span><span class="na">\</span><span class="nv">h</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">horizontal</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">H</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">horizontal</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">N</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span>
<span class="w">         </span><span class="na">\</span><span class="nv">p</span><span class="kt">{</span><span class="nv">xx</span><span class="kt">}</span><span class="w">     </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">xx</span><span class="w"> </span><span class="nv">property</span>
<span class="w">         </span><span class="na">\</span><span class="nv">P</span><span class="kt">{</span><span class="nv">xx</span><span class="kt">}</span><span class="w">     </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">xx</span><span class="w"> </span><span class="nv">property</span>
<span class="w">         </span><span class="na">\</span><span class="nv">R</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span>
<span class="w">         </span><span class="na">\</span><span class="nv">s</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">S</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">v</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">vertical</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">V</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">vertical</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">w</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="s2">"word"</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">W</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="s2">"non-word"</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">X</span><span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">extended</span><span class="w"> </span><span class="nv">grapheme</span><span class="w"> </span><span class="nv">cluster</span>

<span class="w">       </span><span class="nv">By</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">s</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">w</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">characters</span><span class="o">,</span><span class="w"> </span><span class="nv">even</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span>
<span class="w">       </span><span class="nv">mode</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="m">16</span><span class="o">-</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">libraries</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">locale</span><span class="o">-</span><span class="nv">spe</span><span class="o">-</span>
<span class="w">       </span><span class="nv">cific</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">happening</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">s</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">w</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">match</span><span class="w">  </span><span class="nv">characters</span><span class="w">  </span><span class="nv">with</span>
<span class="w">       </span><span class="nv">code</span><span class="w">  </span><span class="nv">points</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="m">128</span><span class="o">-</span><span class="m">255</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_UCP</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">behaviour</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w">  </span><span class="nv">Unicode</span><span class="w">  </span><span class="nv">proper</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ties</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">characters</span><span class="na">.</span>

<span class="nv">GENERAL</span><span class="w"> </span><span class="nv">CATEGORY</span><span class="w"> </span><span class="nv">PROPERTIES</span><span class="w"> </span><span class="nv">FOR</span><span class="w"> </span><span class="na">\</span><span class="nv">p</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">P</span>

<span class="w">         </span><span class="nv">C</span><span class="w">          </span><span class="nv">Other</span>
<span class="w">         </span><span class="nv">Cc</span><span class="w">         </span><span class="nv">Control</span>
<span class="w">         </span><span class="nv">Cf</span><span class="w">         </span><span class="nv">Format</span>
<span class="w">         </span><span class="nv">Cn</span><span class="w">         </span><span class="nv">Unassigned</span>
<span class="w">         </span><span class="nv">Co</span><span class="w">         </span><span class="nv">Private</span><span class="w"> </span><span class="nv">use</span>
<span class="w">         </span><span class="nv">Cs</span><span class="w">         </span><span class="nv">Surrogate</span>

<span class="w">         </span><span class="nv">L</span><span class="w">          </span><span class="nv">Letter</span>
<span class="w">         </span><span class="nv">Ll</span><span class="w">         </span><span class="nv">Lower</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">Lm</span><span class="w">         </span><span class="nv">Modifier</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">Lo</span><span class="w">         </span><span class="nv">Other</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">Lt</span><span class="w">         </span><span class="nv">Title</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">Lu</span><span class="w">         </span><span class="nv">Upper</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">L</span><span class="na">&amp;</span><span class="w">         </span><span class="nv">Ll</span><span class="o">,</span><span class="w"> </span><span class="nv">Lu</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">Lt</span>

<span class="w">         </span><span class="nv">M</span><span class="w">          </span><span class="nv">Mark</span>
<span class="w">         </span><span class="nv">Mc</span><span class="w">         </span><span class="nv">Spacing</span><span class="w"> </span><span class="nv">mark</span>
<span class="w">         </span><span class="nv">Me</span><span class="w">         </span><span class="nv">Enclosing</span><span class="w"> </span><span class="nv">mark</span>
<span class="w">         </span><span class="nv">Mn</span><span class="w">         </span><span class="nv">Non</span><span class="o">-</span><span class="nv">spacing</span><span class="w"> </span><span class="nv">mark</span>

<span class="w">         </span><span class="nv">N</span><span class="w">          </span><span class="nv">Number</span>
<span class="w">         </span><span class="nv">Nd</span><span class="w">         </span><span class="nv">Decimal</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="nv">Nl</span><span class="w">         </span><span class="nv">Letter</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="nv">No</span><span class="w">         </span><span class="nv">Other</span><span class="w"> </span><span class="nv">number</span>

<span class="w">         </span><span class="nv">P</span><span class="w">          </span><span class="nv">Punctuation</span>
<span class="w">         </span><span class="nv">Pc</span><span class="w">         </span><span class="nv">Connector</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Pd</span><span class="w">         </span><span class="nv">Dash</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Pe</span><span class="w">         </span><span class="nv">Close</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Pf</span><span class="w">         </span><span class="nv">Final</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Pi</span><span class="w">         </span><span class="nv">Initial</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Po</span><span class="w">         </span><span class="nv">Other</span><span class="w"> </span><span class="nv">punctuation</span>
<span class="w">         </span><span class="nv">Ps</span><span class="w">         </span><span class="nv">Open</span><span class="w"> </span><span class="nv">punctuation</span>

<span class="w">         </span><span class="nv">S</span><span class="w">          </span><span class="nv">Symbol</span>
<span class="w">         </span><span class="nv">Sc</span><span class="w">         </span><span class="nv">Currency</span><span class="w"> </span><span class="nv">symbol</span>
<span class="w">         </span><span class="nv">Sk</span><span class="w">         </span><span class="nv">Modifier</span><span class="w"> </span><span class="nv">symbol</span>
<span class="w">         </span><span class="nv">Sm</span><span class="w">         </span><span class="nv">Mathematical</span><span class="w"> </span><span class="nv">symbol</span>
<span class="w">         </span><span class="nv">So</span><span class="w">         </span><span class="nv">Other</span><span class="w"> </span><span class="nv">symbol</span>

<span class="w">         </span><span class="nv">Z</span><span class="w">          </span><span class="nv">Separator</span>
<span class="w">         </span><span class="nv">Zl</span><span class="w">         </span><span class="nv">Line</span><span class="w"> </span><span class="nv">separator</span>
<span class="w">         </span><span class="nv">Zp</span><span class="w">         </span><span class="nv">Paragraph</span><span class="w"> </span><span class="nv">separator</span>
<span class="w">         </span><span class="nv">Zs</span><span class="w">         </span><span class="nv">Space</span><span class="w"> </span><span class="nv">separator</span>

<span class="nv">PCRE</span><span class="w"> </span><span class="nv">SPECIAL</span><span class="w"> </span><span class="nv">CATEGORY</span><span class="w"> </span><span class="nv">PROPERTIES</span><span class="w"> </span><span class="nv">FOR</span><span class="w"> </span><span class="na">\</span><span class="nv">p</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">P</span>

<span class="w">         </span><span class="nv">Xan</span><span class="w">        </span><span class="nv">Alphanumeric</span><span class="bp">:</span><span class="w"> </span><span class="nv">union</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">properties</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">N</span>
<span class="w">         </span><span class="nv">Xps</span><span class="w">        </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">space</span><span class="bp">:</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">tab</span><span class="o">,</span><span class="w"> </span><span class="nv">NL</span><span class="o">,</span><span class="w"> </span><span class="nv">VT</span><span class="o">,</span><span class="w"> </span><span class="nv">FF</span><span class="o">,</span><span class="w"> </span><span class="nv">CR</span>
<span class="w">         </span><span class="nv">Xsp</span><span class="w">        </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">space</span><span class="bp">:</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">tab</span><span class="o">,</span><span class="w"> </span><span class="nv">NL</span><span class="o">,</span><span class="w"> </span><span class="nv">VT</span><span class="o">,</span><span class="w"> </span><span class="nv">FF</span><span class="o">,</span><span class="w"> </span><span class="nv">CR</span>
<span class="w">         </span><span class="nv">Xuc</span><span class="w">        </span><span class="nv">Univerally</span><span class="o">-</span><span class="nv">named</span><span class="w"> </span><span class="nv">character</span><span class="bp">:</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span>
<span class="w">                      </span><span class="nv">represented</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">Universal</span><span class="w"> </span><span class="nv">Character</span><span class="w"> </span><span class="nv">Name</span>
<span class="w">         </span><span class="nv">Xwd</span><span class="w">        </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">word</span><span class="bp">:</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">Xan</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">underscore</span>

<span class="w">       </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="na">.</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">added</span><span class="w"> </span><span class="nv">VT</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">char</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acter</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="m">5.18</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="m">8.34</span><span class="na">.</span>

<span class="nv">SCRIPT</span><span class="w"> </span><span class="nv">NAMES</span><span class="w"> </span><span class="nv">FOR</span><span class="w"> </span><span class="na">\</span><span class="nv">p</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="na">\</span><span class="nv">P</span>

<span class="w">       </span><span class="nv">Arabic</span><span class="o">,</span><span class="w"> </span><span class="nv">Armenian</span><span class="o">,</span><span class="w"> </span><span class="nv">Avestan</span><span class="o">,</span><span class="w"> </span><span class="nv">Balinese</span><span class="o">,</span><span class="w"> </span><span class="nv">Bamum</span><span class="o">,</span><span class="w"> </span><span class="nv">Bassa_Vah</span><span class="o">,</span><span class="w"> </span><span class="nv">Batak</span><span class="o">,</span><span class="w">  </span><span class="nv">Bengali</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Bopomofo</span><span class="o">,</span><span class="w">  </span><span class="nv">Brahmi</span><span class="o">,</span><span class="w">  </span><span class="nv">Braille</span><span class="o">,</span><span class="w"> </span><span class="nv">Buginese</span><span class="o">,</span><span class="w"> </span><span class="nv">Buhid</span><span class="o">,</span><span class="w"> </span><span class="nv">Canadian_Aboriginal</span><span class="o">,</span><span class="w"> </span><span class="nv">Car</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ian</span><span class="o">,</span><span class="w"> </span><span class="nv">Caucasian_Albanian</span><span class="o">,</span><span class="w"> </span><span class="nv">Chakma</span><span class="o">,</span><span class="w"> </span><span class="nv">Cham</span><span class="o">,</span><span class="w"> </span><span class="nv">Cherokee</span><span class="o">,</span><span class="w"> </span><span class="nv">Common</span><span class="o">,</span><span class="w"> </span><span class="nv">Coptic</span><span class="o">,</span><span class="w"> </span><span class="nv">Cunei</span><span class="o">-</span>
<span class="w">       </span><span class="nv">form</span><span class="o">,</span><span class="w"> </span><span class="nv">Cypriot</span><span class="o">,</span><span class="w"> </span><span class="nv">Cyrillic</span><span class="o">,</span><span class="w"> </span><span class="nv">Deseret</span><span class="o">,</span><span class="w"> </span><span class="nv">Devanagari</span><span class="o">,</span><span class="w"> </span><span class="nv">Duployan</span><span class="o">,</span><span class="w"> </span><span class="nv">Egyptian_Hiero</span><span class="o">-</span>
<span class="w">       </span><span class="nv">glyphs</span><span class="o">,</span><span class="w">  </span><span class="nv">Elbasan</span><span class="o">,</span><span class="w">  </span><span class="nv">Ethiopic</span><span class="o">,</span><span class="w">  </span><span class="nv">Georgian</span><span class="o">,</span><span class="w">  </span><span class="nv">Glagolitic</span><span class="o">,</span><span class="w">  </span><span class="nv">Gothic</span><span class="o">,</span><span class="w">  </span><span class="nv">Grantha</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Greek</span><span class="o">,</span><span class="w">  </span><span class="nv">Gujarati</span><span class="o">,</span><span class="w">  </span><span class="nv">Gurmukhi</span><span class="o">,</span><span class="w">  </span><span class="nv">Han</span><span class="o">,</span><span class="w">  </span><span class="nv">Hangul</span><span class="o">,</span><span class="w">  </span><span class="nv">Hanunoo</span><span class="o">,</span><span class="w"> </span><span class="nv">Hebrew</span><span class="o">,</span><span class="w"> </span><span class="nv">Hiragana</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Imperial_Aramaic</span><span class="o">,</span><span class="w">    </span><span class="nv">Inherited</span><span class="o">,</span><span class="w">     </span><span class="nv">Inscriptional_Pahlavi</span><span class="o">,</span><span class="w">     </span><span class="nv">Inscrip</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tional_Parthian</span><span class="o">,</span><span class="w">   </span><span class="nv">Javanese</span><span class="o">,</span><span class="w">   </span><span class="nv">Kaithi</span><span class="o">,</span><span class="w">   </span><span class="nv">Kannada</span><span class="o">,</span><span class="w">  </span><span class="nv">Katakana</span><span class="o">,</span><span class="w">  </span><span class="nv">Kayah_Li</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Kharoshthi</span><span class="o">,</span><span class="w"> </span><span class="nv">Khmer</span><span class="o">,</span><span class="w"> </span><span class="nv">Khojki</span><span class="o">,</span><span class="w"> </span><span class="nv">Khudawadi</span><span class="o">,</span><span class="w"> </span><span class="nv">Lao</span><span class="o">,</span><span class="w"> </span><span class="nv">Latin</span><span class="o">,</span><span class="w"> </span><span class="nv">Lepcha</span><span class="o">,</span><span class="w">  </span><span class="nv">Limbu</span><span class="o">,</span><span class="w">  </span><span class="nv">Lin</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ear_A</span><span class="o">,</span><span class="w">  </span><span class="nv">Linear_B</span><span class="o">,</span><span class="w">  </span><span class="nv">Lisu</span><span class="o">,</span><span class="w">  </span><span class="nv">Lycian</span><span class="o">,</span><span class="w"> </span><span class="nv">Lydian</span><span class="o">,</span><span class="w"> </span><span class="nv">Mahajani</span><span class="o">,</span><span class="w"> </span><span class="nv">Malayalam</span><span class="o">,</span><span class="w"> </span><span class="nv">Mandaic</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Manichaean</span><span class="o">,</span><span class="w">     </span><span class="nv">Meetei_Mayek</span><span class="o">,</span><span class="w">     </span><span class="nv">Mende_Kikakui</span><span class="o">,</span><span class="w">      </span><span class="nv">Meroitic_Cursive</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Meroitic_Hieroglyphs</span><span class="o">,</span><span class="w">  </span><span class="nv">Miao</span><span class="o">,</span><span class="w">  </span><span class="nv">Modi</span><span class="o">,</span><span class="w"> </span><span class="nv">Mongolian</span><span class="o">,</span><span class="w"> </span><span class="nv">Mro</span><span class="o">,</span><span class="w"> </span><span class="nv">Myanmar</span><span class="o">,</span><span class="w"> </span><span class="nv">Nabataean</span><span class="o">,</span>
<span class="w">       </span><span class="nv">New_Tai_Lue</span><span class="o">,</span><span class="w">  </span><span class="nv">Nko</span><span class="o">,</span><span class="w">  </span><span class="nv">Ogham</span><span class="o">,</span><span class="w">  </span><span class="nv">Ol_Chiki</span><span class="o">,</span><span class="w">  </span><span class="nv">Old_Italic</span><span class="o">,</span><span class="w">   </span><span class="nv">Old_North_Arabian</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Old_Permic</span><span class="o">,</span><span class="w"> </span><span class="nv">Old_Persian</span><span class="o">,</span><span class="w"> </span><span class="nv">Old_South_Arabian</span><span class="o">,</span><span class="w"> </span><span class="nv">Old_Turkic</span><span class="o">,</span><span class="w"> </span><span class="nv">Oriya</span><span class="o">,</span><span class="w"> </span><span class="nv">Osmanya</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Pahawh_Hmong</span><span class="o">,</span><span class="w">    </span><span class="nv">Palmyrene</span><span class="o">,</span><span class="w">    </span><span class="nv">Pau_Cin_Hau</span><span class="o">,</span><span class="w">    </span><span class="nv">Phags_Pa</span><span class="o">,</span><span class="w">    </span><span class="nv">Phoenician</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Psalter_Pahlavi</span><span class="o">,</span><span class="w">  </span><span class="nv">Rejang</span><span class="o">,</span><span class="w">  </span><span class="nv">Runic</span><span class="o">,</span><span class="w">  </span><span class="nv">Samaritan</span><span class="o">,</span><span class="w"> </span><span class="nv">Saurashtra</span><span class="o">,</span><span class="w"> </span><span class="nv">Sharada</span><span class="o">,</span><span class="w"> </span><span class="nv">Sha</span><span class="o">-</span>
<span class="w">       </span><span class="nv">vian</span><span class="o">,</span><span class="w"> </span><span class="nv">Siddham</span><span class="o">,</span><span class="w"> </span><span class="nv">Sinhala</span><span class="o">,</span><span class="w"> </span><span class="nv">Sora_Sompeng</span><span class="o">,</span><span class="w"> </span><span class="nv">Sundanese</span><span class="o">,</span><span class="w"> </span><span class="nv">Syloti_Nagri</span><span class="o">,</span><span class="w">  </span><span class="nv">Syriac</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Tagalog</span><span class="o">,</span><span class="w">  </span><span class="nv">Tagbanwa</span><span class="o">,</span><span class="w">  </span><span class="nv">Tai_Le</span><span class="o">,</span><span class="w">  </span><span class="nv">Tai_Tham</span><span class="o">,</span><span class="w"> </span><span class="nv">Tai_Viet</span><span class="o">,</span><span class="w"> </span><span class="nv">Takri</span><span class="o">,</span><span class="w"> </span><span class="nv">Tamil</span><span class="o">,</span><span class="w"> </span><span class="nv">Telugu</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Thaana</span><span class="o">,</span><span class="w"> </span><span class="nv">Thai</span><span class="o">,</span><span class="w"> </span><span class="nv">Tibetan</span><span class="o">,</span><span class="w"> </span><span class="nv">Tifinagh</span><span class="o">,</span><span class="w"> </span><span class="nv">Tirhuta</span><span class="o">,</span><span class="w"> </span><span class="nv">Ugaritic</span><span class="o">,</span><span class="w">  </span><span class="nv">Vai</span><span class="o">,</span><span class="w">  </span><span class="nv">Warang_Citi</span><span class="o">,</span>
<span class="w">       </span><span class="nv">Yi</span><span class="na">.</span>

<span class="nv">CHARACTER</span><span class="w"> </span><span class="nv">CLASSES</span>

<span class="w">         </span><span class="sr">[</span><span class="na">...</span><span class="sr">]</span><span class="w">       </span><span class="nv">positive</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span>
<span class="w">         </span><span class="sr">[</span><span class="err">^</span><span class="na">...</span><span class="sr">]</span><span class="w">      </span><span class="nv">negative</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span>
<span class="w">         </span><span class="sr">[</span><span class="nv">x</span><span class="o">-</span><span class="nv">y</span><span class="sr">]</span><span class="w">       </span><span class="nv">range</span><span class="w"> </span><span class="p">(</span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">characters</span><span class="p">)</span>
<span class="w">         </span><span class="sr">[[</span><span class="bp">:</span><span class="nv">xxx</span><span class="bp">:</span><span class="sr">]]</span><span class="w">   </span><span class="nv">positive</span><span class="w"> </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">set</span>
<span class="w">         </span><span class="sr">[[</span><span class="bp">:</span><span class="err">^</span><span class="nv">xxx</span><span class="bp">:</span><span class="sr">]]</span><span class="w">  </span><span class="nv">negative</span><span class="w"> </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">set</span>

<span class="w">         </span><span class="nv">alnum</span><span class="w">       </span><span class="nv">alphanumeric</span>
<span class="w">         </span><span class="nv">alpha</span><span class="w">       </span><span class="nv">alphabetic</span>
<span class="w">         </span><span class="nv">ascii</span><span class="w">       </span><span class="m">0</span><span class="o">-</span><span class="m">127</span>
<span class="w">         </span><span class="nv">blank</span><span class="w">       </span><span class="nv">space</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">tab</span>
<span class="w">         </span><span class="nv">cntrl</span><span class="w">       </span><span class="nv">control</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="nv">digit</span><span class="w">       </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digit</span>
<span class="w">         </span><span class="nv">graph</span><span class="w">       </span><span class="nv">printing</span><span class="o">,</span><span class="w"> </span><span class="nv">excluding</span><span class="w"> </span><span class="nv">space</span>
<span class="w">         </span><span class="nv">lower</span><span class="w">       </span><span class="nv">lower</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">print</span><span class="w">       </span><span class="nv">printing</span><span class="o">,</span><span class="w"> </span><span class="nv">including</span><span class="w"> </span><span class="nv">space</span>
<span class="w">         </span><span class="nv">punct</span><span class="w">       </span><span class="nv">printing</span><span class="o">,</span><span class="w"> </span><span class="nv">excluding</span><span class="w"> </span><span class="nv">alphanumeric</span>
<span class="w">         </span><span class="nv">space</span><span class="w">       </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span>
<span class="w">         </span><span class="nv">upper</span><span class="w">       </span><span class="nv">upper</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">         </span><span class="nv">word</span><span class="w">        </span><span class="nv">same</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">w</span>
<span class="w">         </span><span class="nv">xdigit</span><span class="w">      </span><span class="nv">hexadecimal</span><span class="w"> </span><span class="nv">digit</span>

<span class="w">       </span><span class="nv">In</span><span class="w">  </span><span class="nv">PCRE</span><span class="o">,</span><span class="w">  </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">names</span><span class="w"> </span><span class="nv">recognize</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">by</span>
<span class="w">       </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">properties</span><span class="w"> </span><span class="nv">if</span><span class="w">  </span><span class="nv">PCRE_UCP</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">set</span><span class="na">.</span>
<span class="w">       </span><span class="nv">You</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span><span class="na">...\</span><span class="nv">E</span><span class="w"> </span><span class="nv">inside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="na">.</span>

<span class="nv">QUANTIFIERS</span>

<span class="w">         </span><span class="o">?</span><span class="w">           </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="nv">greedy</span>
<span class="w">         </span><span class="o">?+</span><span class="w">          </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="nv">possessive</span>
<span class="w">         </span><span class="o">??</span><span class="w">          </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="nv">lazy</span>
<span class="w">         </span><span class="o">*</span><span class="w">           </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">greedy</span>
<span class="w">         </span><span class="o">*+</span><span class="w">          </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">possessive</span>
<span class="w">         </span><span class="o">*?</span><span class="w">          </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">lazy</span>
<span class="w">         </span><span class="o">+</span><span class="w">           </span><span class="m">1</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">greedy</span>
<span class="w">         </span><span class="o">++</span><span class="w">          </span><span class="m">1</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">possessive</span>
<span class="w">         </span><span class="o">+?</span><span class="w">          </span><span class="m">1</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">lazy</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="kt">}</span><span class="w">         </span><span class="nv">exactly</span><span class="w"> </span><span class="nv">n</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="nv">m</span><span class="kt">}</span><span class="w">       </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">n</span><span class="o">,</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">m</span><span class="o">,</span><span class="w"> </span><span class="nv">greedy</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="nv">m</span><span class="kt">}</span><span class="o">+</span><span class="w">      </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">n</span><span class="o">,</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">m</span><span class="o">,</span><span class="w"> </span><span class="nv">possessive</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="nv">m</span><span class="kt">}</span><span class="o">?</span><span class="w">      </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">n</span><span class="o">,</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">m</span><span class="o">,</span><span class="w"> </span><span class="nv">lazy</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="kt">}</span><span class="w">        </span><span class="nv">n</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">greedy</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="kt">}</span><span class="o">+</span><span class="w">       </span><span class="nv">n</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">possessive</span>
<span class="w">         </span><span class="kt">{</span><span class="nv">n</span><span class="o">,</span><span class="kt">}</span><span class="o">?</span><span class="w">       </span><span class="nv">n</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">lazy</span>

<span class="nv">ANCHORS</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="nv">SIMPLE</span><span class="w"> </span><span class="nv">ASSERTIONS</span>

<span class="w">         </span><span class="na">\</span><span class="nv">b</span><span class="w">          </span><span class="nv">word</span><span class="w"> </span><span class="nv">boundary</span>
<span class="w">         </span><span class="na">\</span><span class="nv">B</span><span class="w">          </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">boundary</span>
<span class="w">         </span><span class="err">^</span><span class="w">           </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">                      </span><span class="nv">also</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">multiline</span><span class="w"> </span><span class="nv">mode</span>
<span class="w">         </span><span class="na">\</span><span class="nv">A</span><span class="w">          </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">         </span><span class="err">$</span><span class="w">           </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">                      </span><span class="nv">also</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">                      </span><span class="nv">also</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">multiline</span><span class="w"> </span><span class="nv">mode</span>
<span class="w">         </span><span class="na">\</span><span class="nv">Z</span><span class="w">          </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">                      </span><span class="nv">also</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">         </span><span class="na">\</span><span class="nv">z</span><span class="w">          </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">         </span><span class="na">\</span><span class="nv">G</span><span class="w">          </span><span class="nv">first</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">position</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">subject</span>

<span class="nv">MATCH</span><span class="w"> </span><span class="nv">POINT</span><span class="w"> </span><span class="nv">RESET</span>

<span class="w">         </span><span class="na">\</span><span class="nv">K</span><span class="w">          </span><span class="nv">reset</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">match</span>

<span class="w">       </span><span class="na">\</span><span class="nv">K</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">honoured</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">assertions</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">ignored</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">ones</span><span class="na">.</span>

<span class="nv">ALTERNATION</span>

<span class="w">         </span><span class="nv">expr</span><span class="o">|</span><span class="nv">expr</span><span class="o">|</span><span class="nv">expr</span><span class="na">...</span>

<span class="nv">CAPTURING</span>

<span class="w">         </span><span class="p">(</span><span class="na">...</span><span class="p">)</span><span class="w">           </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="na">...</span><span class="p">)</span><span class="w">    </span><span class="nv">named</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="s1">'name'</span><span class="na">...</span><span class="p">)</span><span class="w">    </span><span class="nv">named</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">P</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="na">...</span><span class="p">)</span><span class="w">   </span><span class="nv">named</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="p">(</span><span class="nv">Python</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="bp">:</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">non</span><span class="o">-</span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span>
<span class="w">         </span><span class="p">(</span><span class="o">?|</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">non</span><span class="o">-</span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span><span class="sr">;</span><span class="w"> </span><span class="nv">reset</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">for</span>
<span class="w">                          </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">groups</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">alternative</span>

<span class="nv">ATOMIC</span><span class="w"> </span><span class="nv">GROUPS</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&gt;</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">atomic</span><span class="o">,</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">capturing</span><span class="w"> </span><span class="nv">group</span>

<span class="nv">COMMENT</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="c1">#....)        comment (not nestable)</span>

<span class="nv">OPTION</span><span class="w"> </span><span class="nv">SETTING</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">i</span><span class="p">)</span><span class="w">            </span><span class="nv">caseless</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">J</span><span class="p">)</span><span class="w">            </span><span class="nv">allow</span><span class="w"> </span><span class="nv">duplicate</span><span class="w"> </span><span class="nv">names</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">m</span><span class="p">)</span><span class="w">            </span><span class="nv">multiline</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">s</span><span class="p">)</span><span class="w">            </span><span class="nv">single</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="p">(</span><span class="nv">dotall</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">U</span><span class="p">)</span><span class="w">            </span><span class="nv">default</span><span class="w"> </span><span class="nv">ungreedy</span><span class="w"> </span><span class="p">(</span><span class="nv">lazy</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">x</span><span class="p">)</span><span class="w">            </span><span class="nv">extended</span><span class="w"> </span><span class="p">(</span><span class="nv">ignore</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?-</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">unset</span><span class="w"> </span><span class="nv">option</span><span class="p">(</span><span class="nv">s</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">recognized</span><span class="w">  </span><span class="nv">only</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">or</span>
<span class="w">       </span><span class="nv">after</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">similar</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span><span class="w">  </span><span class="nv">More</span><span class="w">  </span><span class="nv">than</span>
<span class="w">       </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">appear</span><span class="na">.</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LIMIT_MATCH</span><span class="o">=</span><span class="nv">d</span><span class="p">)</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">limit</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="p">(</span><span class="nv">decimal</span><span class="w"> </span><span class="nv">number</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LIMIT_RECURSION</span><span class="o">=</span><span class="nv">d</span><span class="p">)</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">limit</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="p">(</span><span class="nv">decimal</span><span class="w"> </span><span class="nv">number</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">NO_AUTO_POSSESS</span><span class="p">)</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">auto</span><span class="o">-</span><span class="nv">possessification</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE_NO_AUTO_POSSESS</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">NO_START_OPT</span><span class="p">)</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">start</span><span class="o">-</span><span class="nv">match</span><span class="w"> </span><span class="nv">optimization</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE_NO_START_OPTIMIZE</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF8</span><span class="p">)</span><span class="w">         </span><span class="nv">set</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">mode</span><span class="bp">:</span><span class="w"> </span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE_UTF8</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF16</span><span class="p">)</span><span class="w">        </span><span class="nv">set</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">16</span><span class="w"> </span><span class="nv">mode</span><span class="bp">:</span><span class="w"> </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE_UTF16</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF32</span><span class="p">)</span><span class="w">        </span><span class="nv">set</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">32</span><span class="w"> </span><span class="nv">mode</span><span class="bp">:</span><span class="w"> </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE_UTF32</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF</span><span class="p">)</span><span class="w">          </span><span class="nv">set</span><span class="w"> </span><span class="nv">appropriate</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">use</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UCP</span><span class="p">)</span><span class="w">          </span><span class="nv">set</span><span class="w"> </span><span class="nv">PCRE_UCP</span><span class="w"> </span><span class="p">(</span><span class="nv">use</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">properties</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="nv">etc</span><span class="p">)</span>

<span class="w">       </span><span class="nv">Note</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">LIMIT_MATCH</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">LIMIT_RECURSION</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">reduce</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">limits</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">caller</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="o">,</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">increase</span><span class="w"> </span><span class="nv">them</span><span class="na">.</span>

<span class="nv">NEWLINE</span><span class="w"> </span><span class="nv">CONVENTION</span>

<span class="w">       </span><span class="nv">These</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">after</span>
<span class="w">       </span><span class="nv">option</span><span class="w"> </span><span class="nv">settings</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">similar</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">CR</span><span class="p">)</span><span class="w">           </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="w"> </span><span class="nv">only</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LF</span><span class="p">)</span><span class="w">           </span><span class="nv">linefeed</span><span class="w"> </span><span class="nv">only</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">CRLF</span><span class="p">)</span><span class="w">         </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">linefeed</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">ANYCRLF</span><span class="p">)</span><span class="w">      </span><span class="nv">all</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">above</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">ANY</span><span class="p">)</span><span class="w">          </span><span class="nv">any</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span>

<span class="nv">WHAT</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">MATCHES</span>

<span class="w">       </span><span class="nv">These</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">recognized</span><span class="w">  </span><span class="nv">only</span><span class="w">  </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">after</span>
<span class="w">       </span><span class="nv">option</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">similar</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">BSR_ANYCRLF</span><span class="p">)</span><span class="w">  </span><span class="nv">CR</span><span class="o">,</span><span class="w"> </span><span class="nv">LF</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">CRLF</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">BSR_UNICODE</span><span class="p">)</span><span class="w">  </span><span class="nv">any</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span>

<span class="nv">LOOKAHEAD</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="nv">LOOKBEHIND</span><span class="w"> </span><span class="nv">ASSERTIONS</span>

<span class="w">         </span><span class="p">(</span><span class="o">?=</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">positive</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">ahead</span>
<span class="w">         </span><span class="p">(</span><span class="o">?!</span><span class="na">...</span><span class="p">)</span><span class="w">         </span><span class="nv">negative</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">ahead</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;=</span><span class="na">...</span><span class="p">)</span><span class="w">        </span><span class="nv">positive</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">behind</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;!</span><span class="na">...</span><span class="p">)</span><span class="w">        </span><span class="nv">negative</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">behind</span>

<span class="w">       </span><span class="nv">Each</span><span class="w"> </span><span class="nv">top</span><span class="o">-</span><span class="nv">level</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">behind</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fixed</span><span class="w"> </span><span class="nv">length</span><span class="na">.</span>

<span class="nv">BACKREFERENCES</span>

<span class="w">         </span><span class="na">\</span><span class="nv">n</span><span class="w">              </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">ambiguous</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">gn</span><span class="w">             </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="nv">n</span><span class="kt">}</span><span class="w">           </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="o">-</span><span class="nv">n</span><span class="kt">}</span><span class="w">          </span><span class="nv">relative</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="na">\</span><span class="nv">k</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="w">        </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">k</span><span class="s1">'name'</span><span class="w">        </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="nv">name</span><span class="kt">}</span><span class="w">        </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">k</span><span class="kt">{</span><span class="nv">name</span><span class="kt">}</span><span class="w">        </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="na">.</span><span class="nv">NET</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">P</span><span class="o">=</span><span class="nv">name</span><span class="p">)</span><span class="w">       </span><span class="nv">reference</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Python</span><span class="p">)</span>

<span class="nv">SUBROUTINE</span><span class="w"> </span><span class="nv">REFERENCES</span><span class="w"> </span><span class="p">(</span><span class="nv">POSSIBLY</span><span class="w"> </span><span class="nv">RECURSIVE</span><span class="p">)</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">R</span><span class="p">)</span><span class="w">            </span><span class="nv">recurse</span><span class="w"> </span><span class="nv">whole</span><span class="w"> </span><span class="nv">pattern</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">n</span><span class="p">)</span><span class="w">            </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="p">(</span><span class="o">?+</span><span class="nv">n</span><span class="p">)</span><span class="w">           </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="p">(</span><span class="o">?-</span><span class="nv">n</span><span class="p">)</span><span class="w">           </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="na">&amp;</span><span class="nv">name</span><span class="p">)</span><span class="w">        </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">P</span><span class="o">&gt;</span><span class="nv">name</span><span class="p">)</span><span class="w">       </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Python</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="w">        </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Oniguruma</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="s1">'name'</span><span class="w">        </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="p">(</span><span class="nv">Oniguruma</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="o">&lt;</span><span class="nv">n</span><span class="o">&gt;</span><span class="w">           </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">Oniguruma</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="s1">'n'</span><span class="w">           </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">Oniguruma</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="o">&lt;+</span><span class="nv">n</span><span class="o">&gt;</span><span class="w">          </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">extension</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="s1">'+n'</span><span class="w">          </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">extension</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="o">&lt;-</span><span class="nv">n</span><span class="o">&gt;</span><span class="w">          </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">extension</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">g</span><span class="s1">'-n'</span><span class="w">          </span><span class="nv">call</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">extension</span><span class="p">)</span>

<span class="nv">CONDITIONAL</span><span class="w"> </span><span class="nv">PATTERNS</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">condition</span><span class="p">)</span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">condition</span><span class="p">)</span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="o">|</span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span><span class="p">)</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">n</span><span class="p">)</span><span class="na">...</span><span class="w">        </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">+</span><span class="nv">n</span><span class="p">)</span><span class="na">...</span><span class="w">       </span><span class="nv">relative</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">-</span><span class="nv">n</span><span class="p">)</span><span class="na">...</span><span class="w">       </span><span class="nv">relative</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="p">)</span><span class="na">...</span><span class="w">   </span><span class="nv">named</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="na">...</span><span class="w">   </span><span class="nv">named</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="p">(</span><span class="nv">Perl</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">name</span><span class="p">)</span><span class="na">...</span><span class="w">     </span><span class="nv">named</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="p">(</span><span class="nv">PCRE</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">R</span><span class="p">)</span><span class="na">...</span><span class="w">        </span><span class="nv">overall</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">Rn</span><span class="p">)</span><span class="na">...</span><span class="w">       </span><span class="nv">specific</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">R</span><span class="na">&amp;</span><span class="nv">name</span><span class="p">)</span><span class="na">...</span><span class="w">   </span><span class="nv">specific</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">condition</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">DEFINE</span><span class="p">)</span><span class="na">...</span><span class="w">   </span><span class="nv">define</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">reference</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">assert</span><span class="p">)</span><span class="na">...</span><span class="w">   </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">condition</span>

<span class="nv">BACKTRACKING</span><span class="w"> </span><span class="nv">CONTROL</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">act</span><span class="w"> </span><span class="nv">immediately</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">reached</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">ACCEPT</span><span class="p">)</span><span class="w">       </span><span class="nv">force</span><span class="w"> </span><span class="nv">successful</span><span class="w"> </span><span class="nv">match</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">FAIL</span><span class="p">)</span><span class="w">         </span><span class="nv">force</span><span class="w"> </span><span class="nv">backtrack</span><span class="sr">;</span><span class="w"> </span><span class="nv">synonym</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">F</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">MARK</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span><span class="w">    </span><span class="nv">set</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">passed</span><span class="w"> </span><span class="nv">back</span><span class="sr">;</span><span class="w"> </span><span class="nv">synonym</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">act</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subsequent</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span><span class="nv">causes</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">back</span><span class="o">-</span>
<span class="w">       </span><span class="nv">track</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">reach</span><span class="w"> </span><span class="nv">them</span><span class="na">.</span><span class="w"> </span><span class="nv">They</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">force</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">failure</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">differ</span><span class="w"> </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">what</span><span class="w"> </span><span class="nv">happens</span><span class="w"> </span><span class="nv">afterwards</span><span class="na">.</span><span class="w"> </span><span class="nv">Those</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">advance</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="o">-</span><span class="nv">of</span><span class="o">-</span><span class="nv">match</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">do</span>
<span class="w">       </span><span class="nv">so</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">anchored</span><span class="na">.</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">COMMIT</span><span class="p">)</span><span class="w">       </span><span class="nv">overall</span><span class="w"> </span><span class="nv">failure</span><span class="o">,</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">advance</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">point</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="p">)</span><span class="w">        </span><span class="nv">advance</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span><span class="w">   </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">MARK</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">SKIP</span><span class="p">)</span><span class="w">         </span><span class="nv">advance</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">position</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">SKIP</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span><span class="w">    </span><span class="nv">advance</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">position</span><span class="w"> </span><span class="nv">corresponding</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">earlier</span>
<span class="w">                         </span><span class="p">(</span><span class="o">*</span><span class="nv">MARK</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span><span class="sr">;</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">found</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">SKIP</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ignored</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w">         </span><span class="nv">local</span><span class="w"> </span><span class="nv">failure</span><span class="o">,</span><span class="w"> </span><span class="nv">backtrack</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">alternation</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)</span><span class="w">    </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">MARK</span><span class="bp">:</span><span class="nv">NAME</span><span class="p">)(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span>

<span class="nv">CALLOUTS</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">C</span><span class="p">)</span><span class="w">      </span><span class="nv">callout</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="nv">Cn</span><span class="p">)</span><span class="w">     </span><span class="nv">callout</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">n</span>

<span class="nv">SEE</span><span class="w"> </span><span class="nv">ALSO</span>

<span class="w">       </span><span class="nv">pcrepattern</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcreapi</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcrecallout</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcrematching</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcre</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="na">.</span>

<span class="nv">AUTHOR</span>

<span class="w">       </span><span class="nv">Philip</span><span class="w"> </span><span class="nv">Hazel</span>
<span class="w">       </span><span class="nv">University</span><span class="w"> </span><span class="nv">Computing</span><span class="w"> </span><span class="nv">Service</span>
<span class="w">       </span><span class="nv">Cambridge</span><span class="w"> </span><span class="nv">CB2</span><span class="w"> </span><span class="m">3</span><span class="nv">QH</span><span class="o">,</span><span class="w"> </span><span class="nv">England</span><span class="na">.</span>

<span class="nv">REVISION</span>

<span class="w">       </span><span class="nv">Last</span><span class="w"> </span><span class="nv">updated</span><span class="bp">:</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="nv">January</span><span class="w"> </span><span class="m">2014</span>
<span class="w">       </span><span class="nv">Copyright</span><span class="w"> </span><span class="p">(</span><span class="nv">c</span><span class="p">)</span><span class="w"> </span><span class="m">1997</span><span class="o">-</span><span class="m">2014</span><span class="w"> </span><span class="nv">University</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Cambridge</span><span class="na">.</span>
</code></pre></div></p>
</article>
<article id="pcre-specifications-pcre-regular-expression-details">
<h2 id="pcre-specifications-pcre-regular-expression-details-header"> PCRE Regular Expression Details</h2>
<div class="highlight"><pre><span></span><code><span class="nv">PCREPATTERN</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="w">             </span><span class="nv">Library</span><span class="w"> </span><span class="nv">Functions</span><span class="w"> </span><span class="nv">Manual</span><span class="w">             </span><span class="nv">PCREPATTERN</span><span class="p">(</span><span class="m">3</span><span class="p">)</span>

<span class="nv">NAME</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Perl</span><span class="o">-</span><span class="nv">compatible</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expressions</span>

<span class="nv">PCRE</span><span class="w"> </span><span class="nv">REGULAR</span><span class="w"> </span><span class="nv">EXPRESSION</span><span class="w"> </span><span class="nv">DETAILS</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">semantics</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expressions</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">supported</span>
<span class="w">       </span><span class="nv">by</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">detail</span><span class="w"> </span><span class="nv">below</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quick</span><span class="o">-</span><span class="nv">reference</span><span class="w">  </span><span class="nv">syn</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tax</span><span class="w"> </span><span class="nv">summary</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pcresyntax</span><span class="w"> </span><span class="nv">page</span><span class="na">.</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">tries</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">and</span>
<span class="w">       </span><span class="nv">semantics</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">closely</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="na">.</span><span class="w"> </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">also</span><span class="w">  </span><span class="nv">supports</span><span class="w">  </span><span class="nv">some</span><span class="w">  </span><span class="nv">alternative</span>
<span class="w">       </span><span class="nv">regular</span><span class="w">  </span><span class="nv">expression</span><span class="w">  </span><span class="nv">syntax</span><span class="w"> </span><span class="p">(</span><span class="nv">which</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">conflict</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">syn</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tax</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">order</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">provide</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">compatibility</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expressions</span><span class="w"> </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">Python</span><span class="o">,</span><span class="w"> </span><span class="na">.</span><span class="nv">NET</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Oniguruma</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Perl</span><span class="s1">'s  regular expressions are described in its own documentation, and</span>
<span class="s1">       regular expressions in general are covered in a number of  books,  some</span>
<span class="s1">       of  which  have  copious  examples. Jeffrey Friedl'</span><span class="nv">s</span><span class="w"> </span><span class="s2">"Mastering Regular</span>
<span class="s2">       Expressions"</span><span class="o">,</span><span class="w"> </span><span class="nv">published</span><span class="w"> </span><span class="nv">by</span><span class="w">  </span><span class="nv">O</span><span class="s1">'Reilly,  covers  regular  expressions  in</span>
<span class="s1">       great  detail.  This  description  of  PCRE'</span><span class="nv">s</span><span class="w">  </span><span class="nv">regular</span><span class="w">  </span><span class="nv">expressions</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">intended</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">material</span><span class="na">.</span>

<span class="w">       </span><span class="nv">This</span><span class="w"> </span><span class="nv">document</span><span class="w"> </span><span class="nv">discusses</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">supported</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">when</span>
<span class="w">       </span><span class="nv">one</span><span class="w">    </span><span class="nv">its</span><span class="w">    </span><span class="nv">main</span><span class="w">   </span><span class="nv">matching</span><span class="w">   </span><span class="nv">functions</span><span class="o">,</span><span class="w">   </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w">   </span><span class="p">(</span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="p">)</span><span class="w">   </span><span class="nv">or</span>
<span class="w">       </span><span class="nv">pcre</span><span class="sr">[</span><span class="m">16</span><span class="o">|</span><span class="m">32</span><span class="sr">]</span><span class="nv">_exec</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="m">16</span><span class="o">-</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">has</span><span class="w">  </span><span class="nv">alternative</span>
<span class="w">       </span><span class="nv">matching</span><span class="w">  </span><span class="nv">functions</span><span class="o">,</span><span class="w">  </span><span class="nv">pcre_dfa_exec</span><span class="p">()</span><span class="w">  </span><span class="nv">and</span><span class="w"> </span><span class="nv">pcre</span><span class="sr">[</span><span class="m">16</span><span class="o">|</span><span class="m">32</span><span class="nv">_dfa_exec</span><span class="p">()</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span>
<span class="w">       </span><span class="nv">match</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">algorithm</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">Perl</span><span class="o">-</span><span class="nv">compatible</span><span class="na">.</span><span class="w"> </span><span class="nv">Some</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">features</span><span class="w">  </span><span class="nv">discussed</span><span class="w">  </span><span class="nv">below</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">DFA</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">advantages</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">disadvantages</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">alternative</span><span class="w">  </span><span class="nv">functions</span><span class="o">,</span>
<span class="w">       </span><span class="nv">and</span><span class="w">  </span><span class="nv">how</span><span class="w">  </span><span class="nv">they</span><span class="w">  </span><span class="nv">differ</span><span class="w">  </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">normal</span><span class="w"> </span><span class="nv">functions</span><span class="o">,</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">discussed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pcrematching</span><span class="w"> </span><span class="nv">page</span><span class="na">.</span>

<span class="nv">SPECIAL</span><span class="w"> </span><span class="nv">START</span><span class="o">-</span><span class="nv">OF</span><span class="o">-</span><span class="nv">PATTERN</span><span class="w"> </span><span class="nv">ITEMS</span>

<span class="w">       </span><span class="nv">A</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">passed</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">pcre_compile</span><span class="p">()</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">also</span><span class="w">  </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">set</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">These</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">Perl</span><span class="o">-</span><span class="nv">com</span><span class="o">-</span>
<span class="w">       </span><span class="nv">patible</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">accessible</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">pattern</span>
<span class="w">       </span><span class="nv">writers</span><span class="w">  </span><span class="nv">who</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">able</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">change</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">program</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">processes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="na">.</span><span class="w"> </span><span class="nv">Any</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">items</span><span class="w">  </span><span class="nv">may</span><span class="w">  </span><span class="nv">appear</span><span class="o">,</span><span class="w">  </span><span class="nv">but</span><span class="w">  </span><span class="nv">they</span><span class="w">  </span><span class="nv">must</span><span class="w">  </span><span class="nv">all</span><span class="w">  </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">together</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">letters</span><span class="w"> </span><span class="nv">must</span>
<span class="w">       </span><span class="nv">be</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">case</span><span class="na">.</span>

<span class="w">   </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">support</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">original</span><span class="w"> </span><span class="nv">operation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">strings</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">one</span><span class="o">-</span><span class="nv">byte</span><span class="w">  </span><span class="nv">characters</span><span class="na">.</span>
<span class="w">       </span><span class="nv">However</span><span class="o">,</span><span class="w">  </span><span class="nv">there</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">now</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">strings</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">original</span>
<span class="w">       </span><span class="nv">library</span><span class="o">,</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">extra</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">supports</span><span class="w">  </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">UTF</span><span class="o">-</span><span class="m">16</span><span class="w">  </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">strings</span><span class="o">,</span><span class="w">  </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">third</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">supports</span><span class="w"> </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">32</span><span class="w"> </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">strings</span><span class="na">.</span><span class="w"> </span><span class="nv">To</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">features</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">built</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">include</span><span class="w"> </span><span class="nv">appropri</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ate</span><span class="w">  </span><span class="nv">support</span><span class="na">.</span><span class="w"> </span><span class="nv">When</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">strings</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiling</span>
<span class="w">       </span><span class="nv">function</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_UTF8</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE_UTF16</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">PCRE_UTF32</span><span class="w"> </span><span class="nv">option</span><span class="o">,</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">sequences</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF8</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF16</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF32</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF</span><span class="p">)</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF</span><span class="p">)</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">generic</span><span class="w">  </span><span class="nv">sequence</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">used</span><span class="w">  </span><span class="nv">with</span><span class="w">  </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">libraries</span><span class="na">.</span><span class="w">  </span><span class="nv">Starting</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sequence</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">equivalent</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">setting</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">relevant</span><span class="w">  </span><span class="nv">option</span><span class="na">.</span><span class="w">  </span><span class="nv">How</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">affects</span><span class="w"> </span><span class="nv">pattern</span>
<span class="w">       </span><span class="nv">matching</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">mentioned</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">several</span><span class="w"> </span><span class="nv">places</span><span class="w"> </span><span class="nv">below</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">summary</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">features</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pcreunicode</span><span class="w"> </span><span class="nv">page</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Some</span><span class="w"> </span><span class="nv">applications</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">allow</span><span class="w"> </span><span class="nv">their</span><span class="w"> </span><span class="nv">users</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">supply</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">wish</span><span class="w"> </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">restrict</span><span class="w">  </span><span class="nv">them</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">non</span><span class="o">-</span><span class="nv">UTF</span><span class="w">  </span><span class="nv">data</span><span class="w">  </span><span class="nv">for</span><span class="w">   </span><span class="nv">security</span><span class="w">   </span><span class="nv">reasons</span><span class="na">.</span><span class="w">   </span><span class="nv">If</span><span class="w">   </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_NEVER_UTF</span><span class="w">  </span><span class="nv">option</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">set</span><span class="w">  </span><span class="nv">at</span><span class="w">  </span><span class="nv">compile</span><span class="w">  </span><span class="nv">time</span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">UTF</span><span class="p">)</span><span class="w"> </span><span class="nv">etc</span><span class="na">.</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span>
<span class="w">       </span><span class="nv">allowed</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">their</span><span class="w"> </span><span class="nv">appearance</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">support</span>

<span class="w">       </span><span class="nv">Another</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">appear</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">UCP</span><span class="p">)</span><span class="na">.</span><span class="w">   </span><span class="nv">This</span><span class="w">  </span><span class="nv">has</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">effect</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_UCP</span><span class="w"> </span><span class="nv">option</span><span class="bp">:</span><span class="w"> </span><span class="nv">it</span>
<span class="w">       </span><span class="nv">causes</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">w</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">properties</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">deter</span><span class="o">-</span>
<span class="w">       </span><span class="nv">mine</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">types</span><span class="o">,</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">recognizing</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">codes</span>
<span class="w">       </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">128</span><span class="w"> </span><span class="nv">via</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">lookup</span><span class="w"> </span><span class="nv">table</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Disabling</span><span class="w"> </span><span class="nv">auto</span><span class="o">-</span><span class="nv">possessification</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">NO_AUTO_POSSESS</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">effect</span><span class="w">  </span><span class="nv">as</span>
<span class="w">       </span><span class="nv">setting</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">PCRE_NO_AUTO_POSSESS</span><span class="w">  </span><span class="nv">option</span><span class="w">  </span><span class="nv">at</span><span class="w"> </span><span class="nv">compile</span><span class="w"> </span><span class="nv">time</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">stops</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">making</span><span class="w"> </span><span class="nv">quantifiers</span><span class="w"> </span><span class="nv">possessive</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">follows</span><span class="w"> </span><span class="nv">cannot</span><span class="w">  </span><span class="nv">match</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">repeated</span><span class="w"> </span><span class="nv">item</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">treated</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="o">++</span><span class="nv">b</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span>
<span class="w">       </span><span class="nv">more</span><span class="w"> </span><span class="nv">details</span><span class="o">,</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pcreapi</span><span class="w"> </span><span class="nv">documentation</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Disabling</span><span class="w"> </span><span class="nv">start</span><span class="o">-</span><span class="nv">up</span><span class="w"> </span><span class="nv">optimizations</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">NO_START_OPT</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">same</span><span class="w">  </span><span class="nv">effect</span><span class="w">  </span><span class="nv">as</span>
<span class="w">       </span><span class="nv">setting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_NO_START_OPTIMIZE</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">compile</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">matching</span>
<span class="w">       </span><span class="nv">time</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">disables</span><span class="w"> </span><span class="nv">several</span><span class="w">  </span><span class="nv">optimizations</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">quickly</span><span class="w">  </span><span class="nv">reaching</span><span class="w">  </span><span class="s2">"no</span>
<span class="s2">       match"</span><span class="w"> </span><span class="nv">results</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">details</span><span class="o">,</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pcreapi</span><span class="w"> </span><span class="nv">documentation</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Newline</span><span class="w"> </span><span class="nv">conventions</span>

<span class="w">       </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">supports</span><span class="w"> </span><span class="nv">five</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">conventions</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">indicating</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">breaks</span><span class="w"> </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">strings</span><span class="bp">:</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">CR</span><span class="w"> </span><span class="p">(</span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="p">)</span><span class="w"> </span><span class="nv">character</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">single</span><span class="w">  </span><span class="nv">LF</span><span class="w">  </span><span class="p">(</span><span class="nv">line</span><span class="o">-</span>
<span class="w">       </span><span class="nv">feed</span><span class="p">)</span><span class="w"> </span><span class="nv">character</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">character</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">CRLF</span><span class="o">,</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">pre</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ceding</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">pcreapi</span><span class="w"> </span><span class="nv">page</span><span class="w">  </span><span class="nv">has</span><span class="w">  </span><span class="nv">further</span>
<span class="w">       </span><span class="nv">discussion</span><span class="w">  </span><span class="nv">about</span><span class="w"> </span><span class="nv">newlines</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">shows</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">convention</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">arguments</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiling</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">functions</span><span class="na">.</span>

<span class="w">       </span><span class="nv">It</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">specify</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">convention</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">five</span><span class="w"> </span><span class="nv">sequences</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">CR</span><span class="p">)</span><span class="w">        </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LF</span><span class="p">)</span><span class="w">        </span><span class="nv">linefeed</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">CRLF</span><span class="p">)</span><span class="w">      </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="o">,</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">linefeed</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">ANYCRLF</span><span class="p">)</span><span class="w">   </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">above</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">ANY</span><span class="p">)</span><span class="w">       </span><span class="nv">all</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequences</span>

<span class="w">       </span><span class="nv">These</span><span class="w"> </span><span class="nv">override</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiling</span><span class="w"> </span><span class="nv">func</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tion</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">Unix</span><span class="w"> </span><span class="nv">system</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">LF</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">default</span><span class="w">  </span><span class="nv">newline</span>
<span class="w">       </span><span class="nv">sequence</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">CR</span><span class="p">)</span><span class="nv">a</span><span class="na">.</span><span class="nv">b</span>

<span class="w">       </span><span class="nv">changes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">convention</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">CR</span><span class="na">.</span><span class="w"> </span><span class="nv">That</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="s2">"a\nb"</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">LF</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">no</span><span class="w"> </span><span class="nv">longer</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">settings</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">present</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">last</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">newline</span><span class="w">  </span><span class="nv">convention</span><span class="w"> </span><span class="nv">affects</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">circumflex</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">dollar</span><span class="w"> </span><span class="nv">asser</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tions</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">true</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">affects</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">interpretation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">metachar</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acter</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE_DOTALL</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">behaviour</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="na">\</span><span class="nv">N</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span>
<span class="w">       </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">affect</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">matches</span><span class="na">.</span><span class="w"> </span><span class="nv">By</span><span class="w">  </span><span class="nv">default</span><span class="o">,</span><span class="w">  </span><span class="nv">this</span>
<span class="w">       </span><span class="nv">is</span><span class="w">  </span><span class="nv">any</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span><span class="o">,</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">compatibility</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">this</span>
<span class="w">       </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">changed</span><span class="sr">;</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">description</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">section</span><span class="w"> </span><span class="nv">entitled</span><span class="w"> </span><span class="s2">"New-</span>
<span class="s2">       line  sequences"</span><span class="w">  </span><span class="nv">below</span><span class="na">.</span><span class="w">  </span><span class="nv">A</span><span class="w"> </span><span class="nv">change</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">combined</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">change</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">convention</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Setting</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">limits</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">caller</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">limit</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">number</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">times</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">internal</span><span class="w">  </span><span class="nv">match</span><span class="p">()</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">maximum</span><span class="w"> </span><span class="nv">depth</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">recur</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sive</span><span class="w"> </span><span class="nv">calls</span><span class="na">.</span><span class="w"> </span><span class="nv">These</span><span class="w"> </span><span class="nv">facilities</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">catch</span><span class="w"> </span><span class="nv">runaway</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">are</span><span class="w"> </span><span class="nv">provoked</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">huge</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">trees</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">typical</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">nested</span><span class="w"> </span><span class="nv">unlimited</span><span class="w"> </span><span class="nv">repeats</span><span class="p">)</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">avoid</span><span class="w">  </span><span class="nv">running</span><span class="w">  </span><span class="nv">out</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">system</span><span class="w">  </span><span class="nv">stack</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">too</span><span class="w">  </span><span class="nv">much</span><span class="w">  </span><span class="nv">recursion</span><span class="na">.</span><span class="w">  </span><span class="nv">When</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">limits</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">reached</span><span class="o">,</span><span class="w"> </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w"> </span><span class="nv">gives</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">return</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">limits</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">be</span><span class="w">  </span><span class="nv">set</span>
<span class="w">       </span><span class="nv">by</span><span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">form</span>

<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LIMIT_MATCH</span><span class="o">=</span><span class="nv">d</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">*</span><span class="nv">LIMIT_RECURSION</span><span class="o">=</span><span class="nv">d</span><span class="p">)</span>

<span class="w">       </span><span class="nv">where</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digits</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">set</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ting</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="w"> </span><span class="nv">defaulted</span><span class="p">)</span><span class="w"> </span><span class="nv">by</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">caller</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">have</span><span class="w">  </span><span class="nv">any</span><span class="w"> </span><span class="nv">effect</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">words</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span>
<span class="w">       </span><span class="nv">writer</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">lower</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">limits</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">programmer</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">raise</span><span class="w">  </span><span class="nv">them</span><span class="na">.</span>
<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">there</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">more</span><span class="w">  </span><span class="nv">than</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">limits</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">lower</span>
<span class="w">       </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span>

<span class="nv">EBCDIC</span><span class="w"> </span><span class="nv">CHARACTER</span><span class="w"> </span><span class="nv">CODES</span>

<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">environment</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">EBCDIC</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">its</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">rather</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="p">(</span><span class="nv">typically</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">mainframe</span><span class="w"> </span><span class="nv">sys</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tem</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">sections</span><span class="w"> </span><span class="nv">below</span><span class="o">,</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">are</span><span class="w">  </span><span class="nv">ASCII</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">Uni</span><span class="o">-</span>
<span class="w">       </span><span class="nv">code</span><span class="sr">;</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">EBCDIC</span><span class="w"> </span><span class="nv">environment</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">code</span>
<span class="w">       </span><span class="nv">values</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">points</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">255</span><span class="na">.</span>

<span class="nv">CHARACTERS</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="nv">METACHARACTERS</span>

<span class="w">       </span><span class="nv">A</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">matched</span><span class="w">  </span><span class="nv">against</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">subject</span>
<span class="w">       </span><span class="nv">string</span><span class="w">  </span><span class="nv">from</span><span class="w">  </span><span class="nv">left</span><span class="w">  </span><span class="nv">to</span><span class="w"> </span><span class="nv">right</span><span class="na">.</span><span class="w"> </span><span class="nv">Most</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">stand</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">themselves</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">corresponding</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">subject</span><span class="na">.</span><span class="w">  </span><span class="nv">As</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">trivial</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span>

<span class="w">         </span><span class="nv">The</span><span class="w"> </span><span class="nv">quick</span><span class="w"> </span><span class="nv">brown</span><span class="w"> </span><span class="nv">fox</span>

<span class="w">       </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">portion</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">identical</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">itself</span><span class="na">.</span><span class="w"> </span><span class="nv">When</span>
<span class="w">       </span><span class="nv">caseless</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">specified</span><span class="w"> </span><span class="p">(</span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_CASELESS</span><span class="w"> </span><span class="nv">option</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">letters</span><span class="w">  </span><span class="nv">are</span>
<span class="w">       </span><span class="nv">matched</span><span class="w">  </span><span class="nv">independently</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">case</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">understands</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">concept</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">whose</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w">  </span><span class="m">128</span><span class="o">,</span><span class="w">  </span><span class="nv">so</span>
<span class="w">       </span><span class="nv">caseless</span><span class="w">  </span><span class="nv">matching</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">possible</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">higher</span><span class="w"> </span><span class="nv">val</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ues</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">concept</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">supported</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">with</span><span class="w">  </span><span class="nv">Unicode</span>
<span class="w">       </span><span class="nv">property</span><span class="w">  </span><span class="nv">support</span><span class="o">,</span><span class="w">  </span><span class="nv">but</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">otherwise</span><span class="na">.</span><span class="w">   </span><span class="nv">If</span><span class="w">  </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">caseless</span>
<span class="w">       </span><span class="nv">matching</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="m">128</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">above</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">must</span><span class="w">  </span><span class="nv">ensure</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">well</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">support</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">power</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">regular</span><span class="w">  </span><span class="nv">expressions</span><span class="w">  </span><span class="nv">comes</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">ability</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">include</span>
<span class="w">       </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">repetitions</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">These</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">encoded</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">metacharacters</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">stand</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">themselves</span>
<span class="w">       </span><span class="nv">but</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">interpreted</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">way</span><span class="na">.</span>

<span class="w">       </span><span class="nv">There</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">sets</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">metacharacters</span><span class="bp">:</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">that</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">recog</span><span class="o">-</span>
<span class="w">       </span><span class="nv">nized</span><span class="w">  </span><span class="nv">anywhere</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">except</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">square</span><span class="w"> </span><span class="nv">brackets</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">those</span>
<span class="w">       </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">square</span><span class="w"> </span><span class="nv">brackets</span><span class="na">.</span><span class="w">  </span><span class="nv">Outside</span><span class="w">  </span><span class="nv">square</span><span class="w">  </span><span class="nv">brackets</span><span class="o">,</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">metacharacters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">follows</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="w">      </span><span class="nv">general</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">several</span><span class="w"> </span><span class="nv">uses</span>
<span class="w">         </span><span class="err">^</span><span class="w">      </span><span class="nv">assert</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="w"> </span><span class="nv">line</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">multiline</span><span class="w"> </span><span class="nv">mode</span><span class="p">)</span>
<span class="w">         </span><span class="err">$</span><span class="w">      </span><span class="nv">assert</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="w"> </span><span class="nv">line</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">multiline</span><span class="w"> </span><span class="nv">mode</span><span class="p">)</span>
<span class="w">         </span><span class="na">.</span><span class="w">      </span><span class="nv">match</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">except</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="p">(</span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="p">)</span>
<span class="w">         </span><span class="sr">[</span><span class="w">      </span><span class="nv">start</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">definition</span>
<span class="w">         </span><span class="o">|</span><span class="w">      </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">branch</span>
<span class="w">         </span><span class="p">(</span><span class="w">      </span><span class="nv">start</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">         </span><span class="p">)</span><span class="w">      </span><span class="nv">end</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">         </span><span class="o">?</span><span class="w">      </span><span class="nv">extends</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="nv">also</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">quantifier</span>
<span class="w">                </span><span class="nv">also</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">minimizer</span>
<span class="w">         </span><span class="o">*</span><span class="w">      </span><span class="m">0</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">quantifier</span>
<span class="w">         </span><span class="o">+</span><span class="w">      </span><span class="m">1</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">quantifier</span>
<span class="w">                </span><span class="nv">also</span><span class="w"> </span><span class="s2">"possessive quantifier"</span>
<span class="w">         </span><span class="kt">{</span><span class="w">      </span><span class="nv">start</span><span class="w"> </span><span class="nv">min</span><span class="na">/</span><span class="nv">max</span><span class="w"> </span><span class="nv">quantifier</span>

<span class="w">       </span><span class="nv">Part</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">square</span><span class="w"> </span><span class="nv">brackets</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="s2">"character</span>
<span class="s2">       class"</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">metacharacters</span><span class="w"> </span><span class="nv">are</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="w">      </span><span class="nv">general</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="err">^</span><span class="w">      </span><span class="nv">negate</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="o">-</span><span class="w">      </span><span class="nv">indicates</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">range</span>
<span class="w">         </span><span class="sr">[</span><span class="w">      </span><span class="nv">POSIX</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="p">(</span><span class="nv">only</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">POSIX</span>
<span class="w">                  </span><span class="nv">syntax</span><span class="p">)</span>
<span class="w">         </span><span class="sr">]</span><span class="w">      </span><span class="nv">terminates</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">sections</span><span class="w"> </span><span class="nv">describe</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">metacharacters</span><span class="na">.</span>

<span class="nv">BACKSLASH</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">several</span><span class="w"> </span><span class="nv">uses</span><span class="na">.</span><span class="w"> </span><span class="nv">Firstly</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span>
<span class="w">       </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">letter</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">takes</span><span class="w"> </span><span class="nv">away</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">special</span>
<span class="w">       </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">have</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">backslash</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">escape</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">applies</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">inside</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">outside</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">classes</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w">  </span><span class="nv">example</span><span class="o">,</span><span class="w">  </span><span class="nv">if</span><span class="w">  </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">character</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="na">\</span><span class="o">*</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pattern</span><span class="na">.</span><span class="w">  </span><span class="nv">This</span><span class="w"> </span><span class="nv">escaping</span><span class="w"> </span><span class="nv">action</span><span class="w"> </span><span class="nv">applies</span><span class="w"> </span><span class="nv">whether</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">following</span>
<span class="w">       </span><span class="nv">character</span><span class="w">  </span><span class="nv">would</span><span class="w">  </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">interpreted</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">metacharacter</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">always</span><span class="w"> </span><span class="nv">safe</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">precede</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">alphanumeric</span><span class="w">  </span><span class="nv">with</span><span class="w">  </span><span class="nv">backslash</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">specify</span>
<span class="w">       </span><span class="nv">that</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">stands</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">itself</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">particular</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="o">-</span>
<span class="w">       </span><span class="nv">slash</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="na">\\.</span>

<span class="w">       </span><span class="nv">In</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">letters</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">special</span><span class="w">  </span><span class="nv">meaning</span>
<span class="w">       </span><span class="nv">after</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">backslash</span><span class="na">.</span><span class="w">  </span><span class="nv">All</span><span class="w">  </span><span class="nv">other</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="p">(</span><span class="nv">in</span><span class="w"> </span><span class="nv">particular</span><span class="o">,</span><span class="w"> </span><span class="nv">those</span><span class="w"> </span><span class="nv">whose</span>
<span class="w">       </span><span class="nv">codepoints</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">127</span><span class="p">)</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">treated</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">literals</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">with</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">PCRE_EXTENDED</span><span class="w">  </span><span class="nv">option</span><span class="o">,</span><span class="w">  </span><span class="nv">most</span><span class="w">  </span><span class="nv">white</span>
<span class="w">       </span><span class="nv">space</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="p">(</span><span class="nv">other</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">characters</span>
<span class="w">       </span><span class="nv">between</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="c1"># outside a character class and the next newline,  inclusive,</span>
<span class="w">       </span><span class="nv">are</span><span class="w"> </span><span class="nv">ignored</span><span class="na">.</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span><span class="nv">escaping</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">include</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span>
<span class="w">       </span><span class="nv">or</span><span class="w"> </span><span class="c1"># character as part of the pattern.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">remove</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">sequence</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ters</span><span class="o">,</span><span class="w">  </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">putting</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">E</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">differ</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ent</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="na">@</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">handled</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">literals</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="na">\</span><span class="nv">Q</span><span class="na">...\</span><span class="nv">E</span>
<span class="w">       </span><span class="nv">sequences</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">PCRE</span><span class="o">,</span><span class="w"> </span><span class="nv">whereas</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="err">$</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">@</span><span class="w"> </span><span class="nv">cause</span><span class="w"> </span><span class="nv">variable</span><span class="w"> </span><span class="nv">interpola</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tion</span><span class="na">.</span><span class="w"> </span><span class="nv">Note</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">examples</span><span class="bp">:</span>

<span class="w">         </span><span class="nv">Pattern</span><span class="w">            </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">matches</span><span class="w">   </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">matches</span>

<span class="w">         </span><span class="na">\</span><span class="nv">Qabc</span><span class="err">$</span><span class="nv">xyz</span><span class="na">\</span><span class="nv">E</span><span class="w">        </span><span class="nv">abc</span><span class="err">$</span><span class="nv">xyz</span><span class="w">        </span><span class="nv">abc</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span>
<span class="w">                                             </span><span class="nv">contents</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="err">$</span><span class="nv">xyz</span>
<span class="w">         </span><span class="na">\</span><span class="nv">Qabc</span><span class="na">\</span><span class="err">$</span><span class="nv">xyz</span><span class="na">\</span><span class="nv">E</span><span class="w">       </span><span class="nv">abc</span><span class="na">\</span><span class="err">$</span><span class="nv">xyz</span><span class="w">       </span><span class="nv">abc</span><span class="na">\</span><span class="err">$</span><span class="nv">xyz</span>
<span class="w">         </span><span class="na">\</span><span class="nv">Qabc</span><span class="na">\</span><span class="nv">E</span><span class="na">\</span><span class="err">$</span><span class="na">\</span><span class="nv">Qxyz</span><span class="na">\</span><span class="nv">E</span><span class="w">   </span><span class="nv">abc</span><span class="err">$</span><span class="nv">xyz</span><span class="w">        </span><span class="nv">abc</span><span class="err">$</span><span class="nv">xyz</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span><span class="na">...\</span><span class="nv">E</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">inside</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">outside</span><span class="w">  </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">classes</span><span class="na">.</span><span class="w">   </span><span class="nv">An</span><span class="w">  </span><span class="nv">isolated</span><span class="w"> </span><span class="na">\</span><span class="nv">E</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">preceded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ignored</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="na">\</span><span class="nv">E</span><span class="w"> </span><span class="nv">later</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">literal</span><span class="w">  </span><span class="nv">interpretation</span>
<span class="w">       </span><span class="nv">continues</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">end</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="p">(</span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">E</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">assumed</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">end</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">isolated</span><span class="w"> </span><span class="na">\</span><span class="nv">Q</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">inside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">causes</span><span class="w">  </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">error</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">terminated</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Non</span><span class="o">-</span><span class="nv">printing</span><span class="w"> </span><span class="nv">characters</span>

<span class="w">       </span><span class="nv">A</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">provides</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">encoding</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">printing</span><span class="w"> </span><span class="nv">char</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acters</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">visible</span><span class="w"> </span><span class="nv">manner</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">restriction</span><span class="w"> </span><span class="nv">on</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">appearance</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">printing</span><span class="w"> </span><span class="nv">characters</span><span class="o">,</span><span class="w"> </span><span class="nv">apart</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">terminates</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">being</span><span class="w">  </span><span class="nv">prepared</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">text</span>
<span class="w">       </span><span class="nv">editing</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">often</span><span class="w">  </span><span class="nv">easier</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">use</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">escape</span>
<span class="w">       </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">represents</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="nv">a</span><span class="w">        </span><span class="nv">alarm</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">BEL</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">07</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">cx</span><span class="w">       </span><span class="s2">"control-x"</span><span class="o">,</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">e</span><span class="w">        </span><span class="nv">escape</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">1</span><span class="nv">B</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">f</span><span class="w">        </span><span class="nv">form</span><span class="w"> </span><span class="nv">feed</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">C</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">n</span><span class="w">        </span><span class="nv">linefeed</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">A</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">r</span><span class="w">        </span><span class="nv">carriage</span><span class="w"> </span><span class="nv">return</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">0</span><span class="nv">D</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">t</span><span class="w">        </span><span class="nv">tab</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">09</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="m">0</span><span class="nv">dd</span><span class="w">      </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="m">0</span><span class="nv">dd</span>
<span class="w">         </span><span class="na">\</span><span class="nv">ddd</span><span class="w">      </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">ddd</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span>
<span class="w">         </span><span class="na">\</span><span class="nv">o</span><span class="kt">{</span><span class="nv">ddd</span><span class="na">..</span><span class="kt">}</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">ddd</span><span class="na">..</span>
<span class="w">         </span><span class="na">\</span><span class="nv">xhh</span><span class="w">      </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">hh</span>
<span class="w">         </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="nv">hhh</span><span class="na">..</span><span class="kt">}</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">hhh</span><span class="na">..</span><span class="w"> </span><span class="p">(</span><span class="nv">non</span><span class="o">-</span><span class="nv">JavaScript</span><span class="w"> </span><span class="nv">mode</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">uhhhh</span><span class="w">    </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">hhhh</span><span class="w"> </span><span class="p">(</span><span class="nv">JavaScript</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">only</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">precise</span><span class="w"> </span><span class="nv">effect</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="na">\</span><span class="nv">cx</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">follows</span><span class="bp">:</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">lower</span><span class="w">  </span><span class="nv">case</span><span class="w">  </span><span class="nv">letter</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">converted</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">case</span><span class="na">.</span><span class="w"> </span><span class="nv">Then</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">40</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">inverted</span><span class="na">.</span><span class="w"> </span><span class="nv">Thus</span><span class="w"> </span><span class="na">\</span><span class="nv">cA</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="na">\</span><span class="nv">cZ</span><span class="w"> </span><span class="nv">become</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="m">1</span><span class="nv">A</span>
<span class="w">       </span><span class="p">(</span><span class="nv">A</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="m">41</span><span class="o">,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">5</span><span class="nv">A</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="na">\</span><span class="nv">c</span><span class="kt">{</span><span class="w"> </span><span class="nv">becomes</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="m">3</span><span class="nv">B</span><span class="w"> </span><span class="p">(</span><span class="kt">{</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">7</span><span class="nv">B</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">c</span><span class="sr">;</span><span class="w"> </span><span class="nv">becomes</span>
<span class="w">       </span><span class="nv">hex</span><span class="w"> </span><span class="m">7</span><span class="nv">B</span><span class="w"> </span><span class="p">(</span><span class="sr">;</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">3</span><span class="nv">B</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="p">(</span><span class="nv">byte</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="nv">following</span><span class="w">  </span><span class="na">\</span><span class="nv">c</span>
<span class="w">       </span><span class="nv">has</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">value</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">127</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">compile</span><span class="o">-</span><span class="nv">time</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">occurs</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">locks</span>
<span class="w">       </span><span class="nv">out</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">modes</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="na">\</span><span class="nv">c</span><span class="w"> </span><span class="nv">facility</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">designed</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">ASCII</span><span class="w">  </span><span class="nv">characters</span><span class="o">,</span><span class="w">  </span><span class="nv">but</span><span class="w">  </span><span class="nv">with</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">extension</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">useful</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">once</span><span class="w"> </span><span class="nv">was</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span>
<span class="w">       </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">however</span><span class="o">,</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">compiled</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">EBCDIC</span><span class="w">  </span><span class="nv">mode</span><span class="o">,</span><span class="w">  </span><span class="nv">where</span>
<span class="w">       </span><span class="nv">data</span><span class="w">  </span><span class="nv">items</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">bytes</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">after</span>
<span class="w">       </span><span class="na">\</span><span class="nv">c</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">lower</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">letter</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">converted</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">upper</span><span class="w">  </span><span class="nv">case</span><span class="na">.</span><span class="w">  </span><span class="nv">Then</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="m">0xc0</span><span class="w">  </span><span class="nv">bits</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">byte</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">inverted</span><span class="na">.</span><span class="w"> </span><span class="nv">Thus</span><span class="w"> </span><span class="na">\</span><span class="nv">cA</span>
<span class="w">       </span><span class="nv">becomes</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="m">01</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="p">(</span><span class="nv">A</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">C1</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">EBCDIC</span><span class="w">  </span><span class="nv">letters</span>
<span class="w">       </span><span class="nv">are</span><span class="w">  </span><span class="nv">disjoint</span><span class="o">,</span><span class="w">  </span><span class="na">\</span><span class="nv">cZ</span><span class="w"> </span><span class="nv">becomes</span><span class="w"> </span><span class="nv">hex</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="p">(</span><span class="nv">Z</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">E9</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">also</span>
<span class="w">       </span><span class="nv">generate</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">values</span><span class="na">.</span>

<span class="w">       </span><span class="nv">After</span><span class="w"> </span><span class="na">\</span><span class="m">0</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">read</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w">  </span><span class="nv">there</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">fewer</span>
<span class="w">       </span><span class="nv">than</span><span class="w">  </span><span class="nv">two</span><span class="w">  </span><span class="nv">digits</span><span class="o">,</span><span class="w">  </span><span class="nv">just</span><span class="w">  </span><span class="nv">those</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">present</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">Thus</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="m">0</span><span class="na">\</span><span class="nv">x</span><span class="na">\</span><span class="m">07</span><span class="w"> </span><span class="nv">specifies</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">zeros</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">BEL</span><span class="w"> </span><span class="nv">character</span>
<span class="w">       </span><span class="p">(</span><span class="nv">code</span><span class="w">  </span><span class="nv">value</span><span class="w"> </span><span class="m">7</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">Make</span><span class="w"> </span><span class="nv">sure</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">supply</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">initial</span><span class="w"> </span><span class="nv">zero</span>
<span class="w">       </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">follows</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">itself</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">digit</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="na">\</span><span class="nv">o</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">digits</span><span class="o">,</span><span class="w">  </span><span class="nv">enclosed</span>
<span class="w">       </span><span class="nv">in</span><span class="w">  </span><span class="nv">braces</span><span class="na">.</span><span class="w">  </span><span class="nv">An</span><span class="w">  </span><span class="nv">error</span><span class="w"> </span><span class="nv">occurs</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">case</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">recent</span><span class="w"> </span><span class="nv">addition</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Perl</span><span class="sr">;</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">provides</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">specifying</span><span class="w">  </span><span class="nv">character</span><span class="w">  </span><span class="nv">code</span>
<span class="w">       </span><span class="nv">points</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">octal</span><span class="w">  </span><span class="nv">numbers</span><span class="w">  </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0777</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">allows</span><span class="w"> </span><span class="nv">octal</span>
<span class="w">       </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">references</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">unambiguously</span><span class="w"> </span><span class="nv">specified</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">clarity</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">unambiguity</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">best</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">avoid</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="na">\</span><span class="w"> </span><span class="nv">by</span>
<span class="w">       </span><span class="nv">a</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">zero</span><span class="na">.</span><span class="w"> </span><span class="nv">Instead</span><span class="o">,</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="na">\</span><span class="nv">o</span><span class="kt">{}</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="kt">{}</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">specify</span><span class="w"> </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ter</span><span class="w"> </span><span class="nv">numbers</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="kt">{}</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">specify</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">references</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="nv">para</span><span class="o">-</span>
<span class="w">       </span><span class="nv">graphs</span><span class="w"> </span><span class="nv">describe</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">old</span><span class="o">,</span><span class="w"> </span><span class="nv">ambiguous</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">compli</span><span class="o">-</span>
<span class="w">       </span><span class="nv">cated</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="nv">releases</span><span class="o">,</span><span class="w"> </span><span class="nv">causing</span><span class="w">  </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">also</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">change</span><span class="na">.</span><span class="w"> </span><span class="nv">Outside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">reads</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">follow</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ing</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">less</span><span class="w">  </span><span class="nv">than</span><span class="w">  </span><span class="m">8</span><span class="o">,</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">if</span>
<span class="w">       </span><span class="nv">there</span><span class="w">  </span><span class="nv">have</span><span class="w"> </span><span class="nv">been</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">parentheses</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">expression</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">taken</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="na">.</span><span class="w">  </span><span class="nv">A</span>
<span class="w">       </span><span class="nv">description</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">works</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">later</span><span class="o">,</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">discussion</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">parenthesized</span><span class="w"> </span><span class="nv">subpatterns</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Inside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">if</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">decimal</span><span class="w">  </span><span class="nv">number</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="na">\</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">been</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpatterns</span><span class="o">,</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">handles</span><span class="w"> </span><span class="na">\</span><span class="m">8</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="m">9</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="s2">"8"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"9"</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="nv">oth</span><span class="o">-</span>
<span class="w">       </span><span class="nv">erwise</span><span class="w"> </span><span class="nv">re</span><span class="o">-</span><span class="nv">reads</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">backslash</span><span class="o">,</span><span class="w"> </span><span class="nv">using</span>
<span class="w">       </span><span class="nv">them</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">generate</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w">  </span><span class="nv">Any</span><span class="w">  </span><span class="nv">subsequent</span><span class="w">  </span><span class="nv">digits</span><span class="w">  </span><span class="nv">stand</span><span class="w">  </span><span class="nv">for</span>
<span class="w">       </span><span class="nv">themselves</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="m">040</span><span class="w">   </span><span class="nv">is</span><span class="w"> </span><span class="nv">another</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">writing</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">ASCII</span><span class="w"> </span><span class="nv">space</span>
<span class="w">         </span><span class="na">\</span><span class="m">40</span><span class="w">    </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="o">,</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">fewer</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">40</span>
<span class="w">                   </span><span class="nv">previous</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpatterns</span>
<span class="w">         </span><span class="na">\</span><span class="m">7</span><span class="w">     </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span>
<span class="w">         </span><span class="na">\</span><span class="m">11</span><span class="w">    </span><span class="nv">might</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">another</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span>
<span class="w">                   </span><span class="nv">writing</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">tab</span>
<span class="w">         </span><span class="na">\</span><span class="m">011</span><span class="w">   </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">tab</span>
<span class="w">         </span><span class="na">\</span><span class="m">0113</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">tab</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="s2">"3"</span>
<span class="w">         </span><span class="na">\</span><span class="m">113</span><span class="w">   </span><span class="nv">might</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">the</span>
<span class="w">                   </span><span class="nv">character</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="m">113</span>
<span class="w">         </span><span class="na">\</span><span class="m">377</span><span class="w">   </span><span class="nv">might</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">otherwise</span>
<span class="w">                   </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="m">255</span><span class="w"> </span><span class="p">(</span><span class="nv">decimal</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="m">81</span><span class="w">    </span><span class="nv">is</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span>
<span class="w">                   </span><span class="nv">characters</span><span class="w"> </span><span class="s2">"8"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"1"</span>

<span class="w">       </span><span class="nv">Note</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">specified</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">this</span>
<span class="w">       </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">introduced</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">leading</span><span class="w"> </span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">no</span><span class="w">  </span><span class="nv">more</span><span class="w">  </span><span class="nv">than</span>
<span class="w">       </span><span class="nv">three</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">ever</span><span class="w"> </span><span class="nv">read</span><span class="na">.</span>

<span class="w">       </span><span class="nv">By</span><span class="w">  </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="kt">{</span><span class="o">,</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">hexa</span><span class="o">-</span>
<span class="w">       </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">read</span><span class="w"> </span><span class="p">(</span><span class="nv">letters</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">or</span><span class="w">  </span><span class="nv">lower</span><span class="w">  </span><span class="nv">case</span><span class="p">)</span><span class="na">.</span><span class="w">  </span><span class="nv">Any</span>
<span class="w">       </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">hexadecimal</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">appear</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="kt">}</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ter</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">hexadecimal</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">appears</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="kt">}</span><span class="o">,</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">if</span>
<span class="w">       </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">terminating</span><span class="w"> </span><span class="kt">}</span><span class="o">,</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">occurs</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">PCRE_JAVASCRIPT_COMPAT</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">interpretation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">two</span><span class="w">  </span><span class="nv">hexadecimal</span><span class="w">  </span><span class="nv">dig</span><span class="o">-</span>
<span class="w">       </span><span class="nv">its</span><span class="na">.</span><span class="w">   </span><span class="nv">Otherwise</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">matches</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">literal</span><span class="w"> </span><span class="s2">"x"</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">JavaScript</span>
<span class="w">       </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">points</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">256</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="na">\</span><span class="nv">u</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span>
<span class="w">       </span><span class="nv">must</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">followed</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">four</span><span class="w"> </span><span class="nv">hexadecimal</span><span class="w"> </span><span class="nv">digits</span><span class="sr">;</span><span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">literal</span><span class="w"> </span><span class="s2">"u"</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Characters</span><span class="w"> </span><span class="nv">whose</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">256</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">two</span><span class="w">  </span><span class="nv">syntaxes</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="na">\</span><span class="nv">u</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">JavaScript</span><span class="w"> </span><span class="nv">mode</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">differ</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ence</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">handled</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">xdc</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span>
<span class="w">       </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="nv">dc</span><span class="kt">}</span><span class="w"> </span><span class="p">(</span><span class="nv">or</span><span class="w"> </span><span class="na">\</span><span class="nv">u00dc</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">JavaScript</span><span class="w"> </span><span class="nv">mode</span><span class="p">)</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Constraints</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">values</span>

<span class="w">       </span><span class="nv">Characters</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">specified</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">octal</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">hexadecimal</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">are</span>
<span class="w">       </span><span class="nv">limited</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">certain</span><span class="w"> </span><span class="nv">values</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">follows</span><span class="bp">:</span>

<span class="w">         </span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w">    </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x100</span>
<span class="w">         </span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">mode</span><span class="w">      </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x10ffff</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">codepoint</span>
<span class="w">         </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w">   </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x10000</span>
<span class="w">         </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">16</span><span class="w"> </span><span class="nv">mode</span><span class="w">    </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x10ffff</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">codepoint</span>
<span class="w">         </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w">   </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x100000000</span>
<span class="w">         </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">32</span><span class="w"> </span><span class="nv">mode</span><span class="w">    </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">0x10ffff</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">codepoint</span>

<span class="w">       </span><span class="nv">Invalid</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">codepoints</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">range</span><span class="w">  </span><span class="m">0xd800</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="m">0xdfff</span><span class="w">  </span><span class="p">(</span><span class="nv">the</span><span class="w">  </span><span class="nv">so</span><span class="o">-</span>
<span class="w">       </span><span class="nv">called</span><span class="w"> </span><span class="s2">"surrogate"</span><span class="w"> </span><span class="nv">codepoints</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="m">0xffef</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Escape</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">classes</span>

<span class="w">       </span><span class="nv">All</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">define</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">both</span>
<span class="w">       </span><span class="nv">inside</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">outside</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">classes</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">addition</span><span class="o">,</span><span class="w"> </span><span class="nv">inside</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">b</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">interpreted</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">backspace</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="p">(</span><span class="nv">hex</span><span class="w"> </span><span class="m">08</span><span class="p">)</span><span class="na">.</span>

<span class="w">       </span><span class="na">\</span><span class="nv">N</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">allowed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="na">.</span><span class="w"> </span><span class="na">\</span><span class="nv">B</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">X</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">special</span>
<span class="w">       </span><span class="nv">inside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="na">.</span><span class="w"> </span><span class="nv">Like</span><span class="w">  </span><span class="nv">other</span><span class="w">  </span><span class="nv">unrecognized</span><span class="w">  </span><span class="nv">escape</span><span class="w">  </span><span class="nv">sequences</span><span class="o">,</span>
<span class="w">       </span><span class="nv">they</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">treated</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">literal</span><span class="w">  </span><span class="nv">characters</span><span class="w">  </span><span class="s2">"B"</span><span class="o">,</span><span class="w">  </span><span class="s2">"R"</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"X"</span><span class="w"> </span><span class="nv">by</span>
<span class="w">       </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">cause</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_EXTRA</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span><span class="w"> </span><span class="nv">Outside</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">meanings</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Unsupported</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span>

<span class="w">       </span><span class="nv">In</span><span class="w">  </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="na">\</span><span class="nv">l</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">L</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">u</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">U</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">string</span>
<span class="w">       </span><span class="nv">handler</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">used</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">modify</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">case</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="nv">characters</span><span class="na">.</span><span class="w">  </span><span class="nv">By</span>
<span class="w">       </span><span class="nv">default</span><span class="o">,</span><span class="w">  </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_JAVASCRIPT_COMPAT</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">U</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="s2">"U"</span><span class="w">  </span><span class="nv">character</span><span class="o">,</span><span class="w">  </span><span class="nv">and</span>
<span class="w">       </span><span class="na">\</span><span class="nv">u</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">define</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">point</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">previous</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Absolute</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">references</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">unsigned</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">negative</span><span class="w">  </span><span class="nv">number</span><span class="o">,</span><span class="w">  </span><span class="nv">option</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ally</span><span class="w">  </span><span class="nv">enclosed</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">braces</span><span class="o">,</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span>
<span class="w">       </span><span class="nv">named</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">coded</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="nv">name</span><span class="kt">}</span><span class="na">.</span><span class="w"> </span><span class="nv">Back</span><span class="w"> </span><span class="nv">references</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">dis</span><span class="o">-</span>
<span class="w">       </span><span class="nv">cussed</span><span class="w"> </span><span class="nv">later</span><span class="o">,</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">discussion</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">parenthesized</span><span class="w"> </span><span class="nv">subpatterns</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Absolute</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">calls</span>

<span class="w">       </span><span class="nv">For</span><span class="w">  </span><span class="nv">compatibility</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Oniguruma</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">Perl</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">name</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">enclosed</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">angle</span><span class="w"> </span><span class="nv">brackets</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">quotes</span><span class="o">,</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">an</span><span class="w">  </span><span class="nv">alternative</span><span class="w">  </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">referencing</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="s2">"subroutine"</span><span class="na">.</span>
<span class="w">       </span><span class="nv">Details</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">discussed</span><span class="w"> </span><span class="nv">later</span><span class="na">.</span><span class="w">   </span><span class="nv">Note</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="na">...</span><span class="kt">}</span><span class="w">  </span><span class="p">(</span><span class="nv">Perl</span><span class="w">  </span><span class="nv">syntax</span><span class="p">)</span><span class="w">  </span><span class="nv">and</span>
<span class="w">       </span><span class="na">\</span><span class="nv">g</span><span class="o">&lt;</span><span class="na">...</span><span class="o">&gt;</span><span class="w">  </span><span class="p">(</span><span class="nv">Oniguruma</span><span class="w">  </span><span class="nv">syntax</span><span class="p">)</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">not</span><span class="w"> </span><span class="nv">synonymous</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">former</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span>
<span class="w">       </span><span class="nv">reference</span><span class="sr">;</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">latter</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Generic</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">types</span>

<span class="w">       </span><span class="nv">Another</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">specifying</span><span class="w"> </span><span class="nv">generic</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">types</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digit</span>
<span class="w">         </span><span class="na">\</span><span class="nv">D</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">digit</span>
<span class="w">         </span><span class="na">\</span><span class="nv">h</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">horizontal</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">H</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">horizontal</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">s</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">S</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">v</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">vertical</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">V</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">vertical</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">w</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="s2">"word"</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="na">\</span><span class="nv">W</span><span class="w">     </span><span class="nv">any</span><span class="w"> </span><span class="s2">"non-word"</span><span class="w"> </span><span class="nv">character</span>

<span class="w">       </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">N</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">newline</span><span class="w"> </span><span class="nv">char</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acter</span><span class="na">.</span><span class="w">   </span><span class="nv">This</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"."</span><span class="w"> </span><span class="nv">metacharacter</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE_DOTALL</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="na">\</span><span class="nv">N</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="sr">;</span><span class="w"> </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">does</span><span class="w">  </span><span class="nv">not</span>
<span class="w">       </span><span class="nv">support</span><span class="w"> </span><span class="nv">this</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Each</span><span class="w">  </span><span class="nv">pair</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">lower</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">partitions</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">com</span><span class="o">-</span>
<span class="w">       </span><span class="nv">plete</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">disjoint</span><span class="w">  </span><span class="nv">sets</span><span class="na">.</span><span class="w">  </span><span class="nv">Any</span><span class="w">  </span><span class="nv">given</span><span class="w">  </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="nv">one</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">one</span><span class="o">,</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">pair</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">appear</span><span class="w"> </span><span class="nv">both</span>
<span class="w">       </span><span class="nv">inside</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">outside</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">classes</span><span class="na">.</span><span class="w"> </span><span class="nv">They</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">character</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">appropriate</span><span class="w">  </span><span class="nv">type</span><span class="na">.</span><span class="w">  </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">fail</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">character</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">match</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w">  </span><span class="nv">compatibility</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">s</span><span class="w"> </span><span class="nv">did</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">VT</span><span class="w"> </span><span class="nv">character</span>
<span class="w">       </span><span class="p">(</span><span class="nv">code</span><span class="w"> </span><span class="m">11</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">made</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">POSIX</span><span class="w">  </span><span class="s2">"space"</span><span class="w">  </span><span class="nv">class</span><span class="na">.</span>
<span class="w">       </span><span class="nv">However</span><span class="o">,</span><span class="w">  </span><span class="nv">Perl</span><span class="w">  </span><span class="nv">added</span><span class="w">  </span><span class="nv">VT</span><span class="w">  </span><span class="nv">at</span><span class="w">  </span><span class="nv">release</span><span class="w">  </span><span class="m">5.18</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">suit</span><span class="w"> </span><span class="nv">at</span>
<span class="w">       </span><span class="nv">release</span><span class="w"> </span><span class="m">8.34</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="na">\</span><span class="nv">s</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">HT</span><span class="w">  </span><span class="p">(</span><span class="m">9</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">LF</span><span class="w">  </span><span class="p">(</span><span class="m">10</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">VT</span>
<span class="w">       </span><span class="p">(</span><span class="m">11</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">FF</span><span class="w">  </span><span class="p">(</span><span class="m">12</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">CR</span><span class="w">  </span><span class="p">(</span><span class="m">13</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">and</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="p">(</span><span class="m">32</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">white</span>
<span class="w">       </span><span class="nv">space</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"C"</span><span class="w"> </span><span class="nv">locale</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">vary</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">locale</span><span class="o">-</span><span class="nv">specific</span><span class="w"> </span><span class="nv">matching</span>
<span class="w">       </span><span class="nv">is</span><span class="w">  </span><span class="nv">taking</span><span class="w"> </span><span class="nv">place</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">locales</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"non-breaking space"</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="p">(</span><span class="na">\</span><span class="nv">xA0</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">recognized</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">others</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">VT</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="na">.</span>

<span class="w">       </span><span class="nv">A</span><span class="w">  </span><span class="s2">"word"</span><span class="w">  </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">underscore</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">letter</span>
<span class="w">       </span><span class="nv">or</span><span class="w"> </span><span class="nv">digit</span><span class="na">.</span><span class="w">  </span><span class="nv">By</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">definition</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">letters</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">digits</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">con</span><span class="o">-</span>
<span class="w">       </span><span class="nv">trolled</span><span class="w">  </span><span class="nv">by</span><span class="w"> </span><span class="nv">PCRE</span><span class="s1">'s low-valued character tables, and may vary if locale-</span>
<span class="s1">       specific matching is taking place (see "Locale support" in the  pcreapi</span>
<span class="s1">       page).  For  example,  in  a French locale such as "fr_FR" in Unix-like</span>
<span class="s1">       systems, or "french" in Windows, some character codes greater than  127</span>
<span class="s1">       are  used  for  accented letters, and these are then matched by \w. The</span>
<span class="s1">       use of locales with Unicode is discouraged.</span>

<span class="s1">       By default, characters whose code points are  greater  than  127  never</span>
<span class="s1">       match \d, \s, or \w, and always match \D, \S, and \W, although this may</span>
<span class="s1">       vary for characters in the range 128-255 when locale-specific  matching</span>
<span class="s1">       is  happening.   These  escape sequences retain their original meanings</span>
<span class="s1">       from before Unicode support was available, mainly for  efficiency  rea-</span>
<span class="s1">       sons.  If  PCRE  is  compiled  with  Unicode  property support, and the</span>
<span class="s1">       PCRE_UCP option is set, the behaviour is changed so that Unicode  prop-</span>
<span class="s1">       erties are used to determine character types, as follows:</span>

<span class="s1">         \d  any character that matches \p{Nd} (decimal digit)</span>
<span class="s1">         \s  any character that matches \p{Z} or \h or \v</span>
<span class="s1">         \w  any character that matches \p{L} or \p{N}, plus underscore</span>

<span class="s1">       The  upper case escapes match the inverse sets of characters. Note that</span>
<span class="s1">       \d matches only decimal digits, whereas \w matches any  Unicode  digit,</span>
<span class="s1">       as  well as any Unicode letter, and underscore. Note also that PCRE_UCP</span>
<span class="s1">       affects \b, and \B because they are defined in  terms  of  \w  and  \W.</span>
<span class="s1">       Matching these sequences is noticeably slower when PCRE_UCP is set.</span>

<span class="s1">       The  sequences  \h, \H, \v, and \V are features that were added to Perl</span>
<span class="s1">       at release 5.10. In contrast to the other sequences, which  match  only</span>
<span class="s1">       ASCII  characters  by  default,  these always match certain high-valued</span>
<span class="s1">       code points, whether or not PCRE_UCP is set. The horizontal space char-</span>
<span class="s1">       acters are:</span>

<span class="s1">         U+0009     Horizontal tab (HT)</span>
<span class="s1">         U+0020     Space</span>
<span class="s1">         U+00A0     Non-break space</span>
<span class="s1">         U+1680     Ogham space mark</span>
<span class="s1">         U+180E     Mongolian vowel separator</span>
<span class="s1">         U+2000     En quad</span>
<span class="s1">         U+2001     Em quad</span>
<span class="s1">         U+2002     En space</span>
<span class="s1">         U+2003     Em space</span>
<span class="s1">         U+2004     Three-per-em space</span>
<span class="s1">         U+2005     Four-per-em space</span>
<span class="s1">         U+2006     Six-per-em space</span>
<span class="s1">         U+2007     Figure space</span>
<span class="s1">         U+2008     Punctuation space</span>
<span class="s1">         U+2009     Thin space</span>
<span class="s1">         U+200A     Hair space</span>
<span class="s1">         U+202F     Narrow no-break space</span>
<span class="s1">         U+205F     Medium mathematical space</span>
<span class="s1">         U+3000     Ideographic space</span>

<span class="s1">       The vertical space characters are:</span>

<span class="s1">         U+000A     Linefeed (LF)</span>
<span class="s1">         U+000B     Vertical tab (VT)</span>
<span class="s1">         U+000C     Form feed (FF)</span>
<span class="s1">         U+000D     Carriage return (CR)</span>
<span class="s1">         U+0085     Next line (NEL)</span>
<span class="s1">         U+2028     Line separator</span>
<span class="s1">         U+2029     Paragraph separator</span>

<span class="s1">       In 8-bit, non-UTF-8 mode, only the characters with codepoints less than</span>
<span class="s1">       256 are relevant.</span>

<span class="s1">   Newline sequences</span>

<span class="s1">       Outside a character class, by default, the escape sequence  \R  matches</span>
<span class="s1">       any  Unicode newline sequence. In 8-bit non-UTF-8 mode \R is equivalent</span>
<span class="s1">       to the following:</span>

<span class="s1">         (?&gt;\r\n|\n|\x0b|\f|\r|\x85)</span>

<span class="s1">       This is an example of an "atomic group", details  of  which  are  given</span>
<span class="s1">       below.  This particular group matches either the two-character sequence</span>
<span class="s1">       CR followed by LF, or  one  of  the  single  characters  LF  (linefeed,</span>
<span class="s1">       U+000A),  VT  (vertical  tab, U+000B), FF (form feed, U+000C), CR (car-</span>
<span class="s1">       riage return, U+000D), or NEL (next line,  U+0085).  The  two-character</span>
<span class="s1">       sequence is treated as a single unit that cannot be split.</span>

<span class="s1">       In  other modes, two additional characters whose codepoints are greater</span>
<span class="s1">       than 255 are added: LS (line separator, U+2028) and PS (paragraph sepa-</span>
<span class="s1">       rator,  U+2029).   Unicode character property support is not needed for</span>
<span class="s1">       these characters to be recognized.</span>

<span class="s1">       It is possible to restrict \R to match only CR, LF, or CRLF (instead of</span>
<span class="s1">       the  complete  set  of  Unicode  line  endings)  by  setting the option</span>
<span class="s1">       PCRE_BSR_ANYCRLF either at compile time or when the pattern is matched.</span>
<span class="s1">       (BSR is an abbrevation for "backslash R".) This can be made the default</span>
<span class="s1">       when PCRE is built; if this is the case, the  other  behaviour  can  be</span>
<span class="s1">       requested  via  the  PCRE_BSR_UNICODE  option.   It is also possible to</span>
<span class="s1">       specify these settings by starting a pattern string  with  one  of  the</span>
<span class="s1">       following sequences:</span>

<span class="s1">         (*BSR_ANYCRLF)   CR, LF, or CRLF only</span>
<span class="s1">         (*BSR_UNICODE)   any Unicode newline sequence</span>

<span class="s1">       These override the default and the options given to the compiling func-</span>
<span class="s1">       tion, but they can themselves be  overridden  by  options  given  to  a</span>
<span class="s1">       matching  function.  Note  that  these  special settings, which are not</span>
<span class="s1">       Perl-compatible, are recognized only at the very start  of  a  pattern,</span>
<span class="s1">       and  that  they  must  be  in  upper  case. If more than one of them is</span>
<span class="s1">       present, the last one is used. They can be combined with  a  change  of</span>
<span class="s1">       newline convention; for example, a pattern can start with:</span>

<span class="s1">         (*ANY)(*BSR_ANYCRLF)</span>

<span class="s1">       They  can also be combined with the (*UTF8), (*UTF16), (*UTF32), (*UTF)</span>
<span class="s1">       or (*UCP) special sequences. Inside a character class, \R is treated as</span>
<span class="s1">       an  unrecognized  escape  sequence,  and  so  matches the letter "R" by</span>
<span class="s1">       default, but causes an error if PCRE_EXTRA is set.</span>

<span class="s1">   Unicode character properties</span>

<span class="s1">       When PCRE is built with Unicode character property support, three addi-</span>
<span class="s1">       tional  escape sequences that match characters with specific properties</span>
<span class="s1">       are available.  When in 8-bit non-UTF-8 mode, these  sequences  are  of</span>
<span class="s1">       course  limited  to  testing  characters whose codepoints are less than</span>
<span class="s1">       256, but they do work in this mode.  The extra escape sequences are:</span>

<span class="s1">         \p{xx}   a character with the xx property</span>
<span class="s1">         \P{xx}   a character without the xx property</span>
<span class="s1">         \X       a Unicode extended grapheme cluster</span>

<span class="s1">       The property names represented by xx above are limited to  the  Unicode</span>
<span class="s1">       script names, the general category properties, "Any", which matches any</span>
<span class="s1">       character  (including  newline),  and  some  special  PCRE   properties</span>
<span class="s1">       (described  in the next section).  Other Perl properties such as "InMu-</span>
<span class="s1">       sicalSymbols" are not currently supported by PCRE.  Note  that  \P{Any}</span>
<span class="s1">       does not match any characters, so always causes a match failure.</span>

<span class="s1">       Sets of Unicode characters are defined as belonging to certain scripts.</span>
<span class="s1">       A character from one of these sets can be matched using a script  name.</span>
<span class="s1">       For example:</span>

<span class="s1">         \p{Greek}</span>
<span class="s1">         \P{Han}</span>

<span class="s1">       Those  that are not part of an identified script are lumped together as</span>
<span class="s1">       "Common". The current list of scripts is:</span>

<span class="s1">       Arabic, Armenian, Avestan, Balinese, Bamum, Bassa_Vah, Batak,  Bengali,</span>
<span class="s1">       Bopomofo,  Brahmi,  Braille, Buginese, Buhid, Canadian_Aboriginal, Car-</span>
<span class="s1">       ian, Caucasian_Albanian, Chakma, Cham, Cherokee, Common, Coptic, Cunei-</span>
<span class="s1">       form, Cypriot, Cyrillic, Deseret, Devanagari, Duployan, Egyptian_Hiero-</span>
<span class="s1">       glyphs,  Elbasan,  Ethiopic,  Georgian,  Glagolitic,  Gothic,  Grantha,</span>
<span class="s1">       Greek,  Gujarati,  Gurmukhi,  Han,  Hangul,  Hanunoo, Hebrew, Hiragana,</span>
<span class="s1">       Imperial_Aramaic,    Inherited,     Inscriptional_Pahlavi,     Inscrip-</span>
<span class="s1">       tional_Parthian,   Javanese,   Kaithi,   Kannada,  Katakana,  Kayah_Li,</span>
<span class="s1">       Kharoshthi, Khmer, Khojki, Khudawadi, Lao, Latin, Lepcha,  Limbu,  Lin-</span>
<span class="s1">       ear_A,  Linear_B,  Lisu,  Lycian, Lydian, Mahajani, Malayalam, Mandaic,</span>
<span class="s1">       Manichaean,     Meetei_Mayek,     Mende_Kikakui,      Meroitic_Cursive,</span>
<span class="s1">       Meroitic_Hieroglyphs,  Miao,  Modi, Mongolian, Mro, Myanmar, Nabataean,</span>
<span class="s1">       New_Tai_Lue,  Nko,  Ogham,  Ol_Chiki,  Old_Italic,   Old_North_Arabian,</span>
<span class="s1">       Old_Permic, Old_Persian, Old_South_Arabian, Old_Turkic, Oriya, Osmanya,</span>
<span class="s1">       Pahawh_Hmong,    Palmyrene,    Pau_Cin_Hau,    Phags_Pa,    Phoenician,</span>
<span class="s1">       Psalter_Pahlavi,  Rejang,  Runic,  Samaritan, Saurashtra, Sharada, Sha-</span>
<span class="s1">       vian, Siddham, Sinhala, Sora_Sompeng, Sundanese, Syloti_Nagri,  Syriac,</span>
<span class="s1">       Tagalog,  Tagbanwa,  Tai_Le,  Tai_Tham, Tai_Viet, Takri, Tamil, Telugu,</span>
<span class="s1">       Thaana, Thai, Tibetan, Tifinagh, Tirhuta, Ugaritic,  Vai,  Warang_Citi,</span>
<span class="s1">       Yi.</span>

<span class="s1">       Each character has exactly one Unicode general category property, spec-</span>
<span class="s1">       ified by a two-letter abbreviation. For compatibility with Perl,  nega-</span>
<span class="s1">       tion  can  be  specified  by including a circumflex between the opening</span>
<span class="s1">       brace and the property name.  For  example,  \p{^Lu}  is  the  same  as</span>
<span class="s1">       \P{Lu}.</span>

<span class="s1">       If only one letter is specified with \p or \P, it includes all the gen-</span>
<span class="s1">       eral category properties that start with that letter. In this case,  in</span>
<span class="s1">       the  absence of negation, the curly brackets in the escape sequence are</span>
<span class="s1">       optional; these two examples have the same effect:</span>

<span class="s1">         \p{L}</span>
<span class="s1">         \pL</span>

<span class="s1">       The following general category property codes are supported:</span>

<span class="s1">         C     Other</span>
<span class="s1">         Cc    Control</span>
<span class="s1">         Cf    Format</span>
<span class="s1">         Cn    Unassigned</span>
<span class="s1">         Co    Private use</span>
<span class="s1">         Cs    Surrogate</span>

<span class="s1">         L     Letter</span>
<span class="s1">         Ll    Lower case letter</span>
<span class="s1">         Lm    Modifier letter</span>
<span class="s1">         Lo    Other letter</span>
<span class="s1">         Lt    Title case letter</span>
<span class="s1">         Lu    Upper case letter</span>

<span class="s1">         M     Mark</span>
<span class="s1">         Mc    Spacing mark</span>
<span class="s1">         Me    Enclosing mark</span>
<span class="s1">         Mn    Non-spacing mark</span>

<span class="s1">         N     Number</span>
<span class="s1">         Nd    Decimal number</span>
<span class="s1">         Nl    Letter number</span>
<span class="s1">         No    Other number</span>

<span class="s1">         P     Punctuation</span>
<span class="s1">         Pc    Connector punctuation</span>
<span class="s1">         Pd    Dash punctuation</span>
<span class="s1">         Pe    Close punctuation</span>
<span class="s1">         Pf    Final punctuation</span>
<span class="s1">         Pi    Initial punctuation</span>
<span class="s1">         Po    Other punctuation</span>
<span class="s1">         Ps    Open punctuation</span>

<span class="s1">         S     Symbol</span>
<span class="s1">         Sc    Currency symbol</span>
<span class="s1">         Sk    Modifier symbol</span>
<span class="s1">         Sm    Mathematical symbol</span>
<span class="s1">         So    Other symbol</span>

<span class="s1">         Z     Separator</span>
<span class="s1">         Zl    Line separator</span>
<span class="s1">         Zp    Paragraph separator</span>
<span class="s1">         Zs    Space separator</span>

<span class="s1">       The special property L&amp; is also supported: it matches a character  that</span>
<span class="s1">       has  the  Lu,  Ll, or Lt property, in other words, a letter that is not</span>
<span class="s1">       classified as a modifier or "other".</span>

<span class="s1">       The Cs (Surrogate) property applies only to  characters  in  the  range</span>
<span class="s1">       U+D800  to U+DFFF. Such characters are not valid in Unicode strings and</span>
<span class="s1">       so cannot be tested by PCRE, unless  UTF  validity  checking  has  been</span>
<span class="s1">       turned    off    (see    the    discussion    of    PCRE_NO_UTF8_CHECK,</span>
<span class="s1">       PCRE_NO_UTF16_CHECK and PCRE_NO_UTF32_CHECK in the pcreapi page).  Perl</span>
<span class="s1">       does not support the Cs property.</span>

<span class="s1">       The  long  synonyms  for  property  names  that  Perl supports (such as</span>
<span class="s1">       \p{Letter}) are not supported by PCRE, nor is it  permitted  to  prefix</span>
<span class="s1">       any of these properties with "Is".</span>

<span class="s1">       No character that is in the Unicode table has the Cn (unassigned) prop-</span>
<span class="s1">       erty.  Instead, this property is assumed for any code point that is not</span>
<span class="s1">       in the Unicode table.</span>

<span class="s1">       Specifying  caseless  matching  does not affect these escape sequences.</span>
<span class="s1">       For example, \p{Lu} always matches only upper  case  letters.  This  is</span>
<span class="s1">       different from the behaviour of current versions of Perl.</span>

<span class="s1">       Matching  characters  by Unicode property is not fast, because PCRE has</span>
<span class="s1">       to do a multistage table lookup in order to find  a  character'</span><span class="nv">s</span><span class="w">  </span><span class="nv">prop</span><span class="o">-</span>
<span class="w">       </span><span class="nv">erty</span><span class="na">.</span><span class="w"> </span><span class="nv">That</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">why</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">traditional</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">w</span><span class="w"> </span><span class="nv">do</span>
<span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">properties</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">though</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">them</span>
<span class="w">       </span><span class="nv">do</span><span class="w">  </span><span class="nv">so</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">setting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_UCP</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">with</span>
<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">UCP</span><span class="p">)</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Extended</span><span class="w"> </span><span class="nv">grapheme</span><span class="w"> </span><span class="nv">clusters</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="na">\</span><span class="nv">X</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Unicode</span><span class="w">  </span><span class="nv">characters</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">form</span><span class="w">  </span><span class="nv">an</span>
<span class="w">       </span><span class="s2">"extended grapheme cluster"</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">treats</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">group</span>
<span class="w">       </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">below</span><span class="p">)</span><span class="na">.</span><span class="w">  </span><span class="nv">Up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">including</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="m">8.31</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">matched</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">ear</span><span class="o">-</span>
<span class="w">       </span><span class="nv">lier</span><span class="o">,</span><span class="w"> </span><span class="nv">simpler</span><span class="w"> </span><span class="nv">definition</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&gt;</span><span class="na">\</span><span class="nv">PM</span><span class="na">\</span><span class="nv">pM</span><span class="o">*</span><span class="p">)</span>

<span class="w">       </span><span class="nv">That</span><span class="w">  </span><span class="nv">is</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"mark"</span><span class="w"> </span><span class="nv">property</span><span class="o">,</span><span class="w"> </span><span class="nv">followed</span>
<span class="w">       </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"mark"</span><span class="w">  </span><span class="nv">property</span><span class="na">.</span><span class="w">  </span><span class="nv">Characters</span><span class="w">  </span><span class="nv">with</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="s2">"mark"</span><span class="w">  </span><span class="nv">property</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">typically</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">spacing</span><span class="w"> </span><span class="nv">accents</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">affect</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">preceding</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span>

<span class="w">       </span><span class="nv">This</span><span class="w"> </span><span class="nv">simple</span><span class="w"> </span><span class="nv">definition</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">extended</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">include</span><span class="w"> </span><span class="nv">more</span><span class="w">  </span><span class="nv">compli</span><span class="o">-</span>
<span class="w">       </span><span class="nv">cated</span><span class="w">  </span><span class="nv">kinds</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">composite</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">giving</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">grapheme</span>
<span class="w">       </span><span class="nv">breaking</span><span class="w"> </span><span class="nv">property</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">creating</span><span class="w"> </span><span class="nv">rules</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">use</span><span class="w">  </span><span class="nv">these</span><span class="w">  </span><span class="nv">properties</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">define</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">boundaries</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">extended</span><span class="w"> </span><span class="nv">grapheme</span><span class="w"> </span><span class="nv">clusters</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">releases</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">later</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">8.31</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">X</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">clusters</span><span class="na">.</span>

<span class="w">       </span><span class="na">\</span><span class="nv">X</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w"> </span><span class="nv">Then</span><span class="w"> </span><span class="nv">it</span><span class="w">  </span><span class="nv">decides</span><span class="w">  </span><span class="nv">whether</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">add</span><span class="w"> </span><span class="nv">additional</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">according</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">rules</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">ending</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">cluster</span><span class="bp">:</span>

<span class="w">       </span><span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="nv">End</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span>

<span class="w">       </span><span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="nv">Do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">CR</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">LF</span><span class="sr">;</span><span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">control</span><span class="w">  </span><span class="nv">char</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acter</span><span class="na">.</span>

<span class="w">       </span><span class="m">3</span><span class="na">.</span><span class="w">  </span><span class="nv">Do</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">break</span><span class="w">  </span><span class="nv">Hangul</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">Korean</span><span class="w"> </span><span class="nv">script</span><span class="p">)</span><span class="w"> </span><span class="nv">syllable</span><span class="w"> </span><span class="nv">sequences</span><span class="na">.</span><span class="w"> </span><span class="nv">Hangul</span>
<span class="w">       </span><span class="nv">characters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">five</span><span class="w"> </span><span class="nv">types</span><span class="bp">:</span><span class="w"> </span><span class="nv">L</span><span class="o">,</span><span class="w"> </span><span class="nv">V</span><span class="o">,</span><span class="w"> </span><span class="nv">T</span><span class="o">,</span><span class="w"> </span><span class="nv">LV</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">LVT</span><span class="na">.</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">character</span><span class="w">  </span><span class="nv">may</span>
<span class="w">       </span><span class="nv">be</span><span class="w">  </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">L</span><span class="o">,</span><span class="w"> </span><span class="nv">V</span><span class="o">,</span><span class="w"> </span><span class="nv">LV</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">LVT</span><span class="w"> </span><span class="nv">character</span><span class="sr">;</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">LV</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">may</span>
<span class="w">       </span><span class="nv">be</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">character</span><span class="sr">;</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">LVT</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">follwed</span>
<span class="w">       </span><span class="nv">only</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span>

<span class="w">       </span><span class="m">4</span><span class="na">.</span><span class="w">  </span><span class="nv">Do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">extending</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">spacing</span><span class="w"> </span><span class="nv">marks</span><span class="na">.</span><span class="w"> </span><span class="nv">Characters</span>
<span class="w">       </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"mark"</span><span class="w"> </span><span class="nv">property</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">have</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="s2">"extend"</span><span class="w">  </span><span class="nv">grapheme</span><span class="w">  </span><span class="nv">breaking</span>
<span class="w">       </span><span class="nv">property</span><span class="na">.</span>

<span class="w">       </span><span class="m">5</span><span class="na">.</span><span class="w"> </span><span class="nv">Do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">prepend</span><span class="w"> </span><span class="nv">characters</span><span class="na">.</span>

<span class="w">       </span><span class="m">6</span><span class="na">.</span><span class="w"> </span><span class="nv">Otherwise</span><span class="o">,</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">cluster</span><span class="na">.</span>

<span class="w">   </span><span class="nv">PCRE</span><span class="s1">'s additional properties</span>

<span class="s1">       As  well  as the standard Unicode properties described above, PCRE sup-</span>
<span class="s1">       ports four more that make it possible  to  convert  traditional  escape</span>
<span class="s1">       sequences  such as \w and \s to use Unicode properties. PCRE uses these</span>
<span class="s1">       non-standard, non-Perl properties internally when PCRE_UCP is set. How-</span>
<span class="s1">       ever, they may also be used explicitly. These properties are:</span>

<span class="s1">         Xan   Any alphanumeric character</span>
<span class="s1">         Xps   Any POSIX space character</span>
<span class="s1">         Xsp   Any Perl space character</span>
<span class="s1">         Xwd   Any Perl "word" character</span>

<span class="s1">       Xan  matches  characters that have either the L (letter) or the N (num-</span>
<span class="s1">       ber) property. Xps matches the characters tab, linefeed, vertical  tab,</span>
<span class="s1">       form  feed,  or carriage return, and any other character that has the Z</span>
<span class="s1">       (separator) property.  Xsp is the same as Xps; it used to exclude  ver-</span>
<span class="s1">       tical  tab,  for Perl compatibility, but Perl changed, and so PCRE fol-</span>
<span class="s1">       lowed at release 8.34. Xwd matches the same  characters  as  Xan,  plus</span>
<span class="s1">       underscore.</span>

<span class="s1">       There  is another non-standard property, Xuc, which matches any charac-</span>
<span class="s1">       ter that can be represented by a Universal Character Name  in  C++  and</span>
<span class="s1">       other  programming  languages.  These are the characters $, @, ` (grave</span>
<span class="s1">       accent), and all characters with Unicode code points  greater  than  or</span>
<span class="s1">       equal  to U+00A0, except for the surrogates U+D800 to U+DFFF. Note that</span>
<span class="s1">       most base (ASCII) characters are excluded. (Universal  Character  Names</span>
<span class="s1">       are  of  the  form \uHHHH or \UHHHHHHHH where H is a hexadecimal digit.</span>
<span class="s1">       Note that the Xuc property does not match these sequences but the char-</span>
<span class="s1">       acters that they represent.)</span>

<span class="s1">   Resetting the match start</span>

<span class="s1">       The  escape sequence \K causes any previously matched characters not to</span>
<span class="s1">       be included in the final matched sequence. For example, the pattern:</span>

<span class="s1">         foo\Kbar</span>

<span class="s1">       matches "foobar", but reports that it has matched "bar".  This  feature</span>
<span class="s1">       is  similar  to  a lookbehind assertion (described below).  However, in</span>
<span class="s1">       this case, the part of the subject before the real match does not  have</span>
<span class="s1">       to  be of fixed length, as lookbehind assertions do. The use of \K does</span>
<span class="s1">       not interfere with the setting of captured  substrings.   For  example,</span>
<span class="s1">       when the pattern</span>

<span class="s1">         (foo)\Kbar</span>

<span class="s1">       matches "foobar", the first substring is still set to "foo".</span>

<span class="s1">       Perl  documents  that  the  use  of  \K  within assertions is "not well</span>
<span class="s1">       defined". In PCRE, \K is acted upon  when  it  occurs  inside  positive</span>
<span class="s1">       assertions,  but  is  ignored  in negative assertions. Note that when a</span>
<span class="s1">       pattern such as (?=ab\K) matches, the reported start of the  match  can</span>
<span class="s1">       be greater than the end of the match.</span>

<span class="s1">   Simple assertions</span>

<span class="s1">       The  final use of backslash is for certain simple assertions. An asser-</span>
<span class="s1">       tion specifies a condition that has to be met at a particular point  in</span>
<span class="s1">       a  match, without consuming any characters from the subject string. The</span>
<span class="s1">       use of subpatterns for more complicated assertions is described  below.</span>
<span class="s1">       The backslashed assertions are:</span>

<span class="s1">         \b     matches at a word boundary</span>
<span class="s1">         \B     matches when not at a word boundary</span>
<span class="s1">         \A     matches at the start of the subject</span>
<span class="s1">         \Z     matches at the end of the subject</span>
<span class="s1">                 also matches before a newline at the end of the subject</span>
<span class="s1">         \z     matches only at the end of the subject</span>
<span class="s1">         \G     matches at the first matching position in the subject</span>

<span class="s1">       Inside  a  character  class, \b has a different meaning; it matches the</span>
<span class="s1">       backspace character. If any other of  these  assertions  appears  in  a</span>
<span class="s1">       character  class, by default it matches the corresponding literal char-</span>
<span class="s1">       acter  (for  example,  \B  matches  the  letter  B).  However,  if  the</span>
<span class="s1">       PCRE_EXTRA  option is set, an "invalid escape sequence" error is gener-</span>
<span class="s1">       ated instead.</span>

<span class="s1">       A word boundary is a position in the subject string where  the  current</span>
<span class="s1">       character  and  the previous character do not both match \w or \W (i.e.</span>
<span class="s1">       one matches \w and the other matches \W), or the start or  end  of  the</span>
<span class="s1">       string  if  the  first or last character matches \w, respectively. In a</span>
<span class="s1">       UTF mode, the meanings of \w and \W  can  be  changed  by  setting  the</span>
<span class="s1">       PCRE_UCP  option. When this is done, it also affects \b and \B. Neither</span>
<span class="s1">       PCRE nor Perl has a separate "start of word" or "end of  word"  metase-</span>
<span class="s1">       quence.  However,  whatever follows \b normally determines which it is.</span>
<span class="s1">       For example, the fragment \ba matches "a" at the start of a word.</span>

<span class="s1">       The \A, \Z, and \z assertions differ from  the  traditional  circumflex</span>
<span class="s1">       and dollar (described in the next section) in that they only ever match</span>
<span class="s1">       at the very start and end of the subject string, whatever  options  are</span>
<span class="s1">       set.  Thus,  they are independent of multiline mode. These three asser-</span>
<span class="s1">       tions are not affected by the PCRE_NOTBOL or PCRE_NOTEOL options, which</span>
<span class="s1">       affect  only the behaviour of the circumflex and dollar metacharacters.</span>
<span class="s1">       However, if the startoffset argument of pcre_exec() is non-zero,  indi-</span>
<span class="s1">       cating that matching is to start at a point other than the beginning of</span>
<span class="s1">       the subject, \A can never match. The difference between \Z  and  \z  is</span>
<span class="s1">       that \Z matches before a newline at the end of the string as well as at</span>
<span class="s1">       the very end, whereas \z matches only at the end.</span>

<span class="s1">       The \G assertion is true only when the current matching position is  at</span>
<span class="s1">       the  start point of the match, as specified by the startoffset argument</span>
<span class="s1">       of pcre_exec(). It differs from \A when the  value  of  startoffset  is</span>
<span class="s1">       non-zero.  By calling pcre_exec() multiple times with appropriate argu-</span>
<span class="s1">       ments, you can mimic Perl'</span><span class="nv">s</span><span class="w"> </span><span class="na">/</span><span class="nv">g</span><span class="w"> </span><span class="nv">option</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">kind</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">imple</span><span class="o">-</span>
<span class="w">       </span><span class="nv">mentation</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="na">\</span><span class="nv">G</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">useful</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Note</span><span class="o">,</span><span class="w">  </span><span class="nv">however</span><span class="o">,</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">PCRE</span><span class="s1">'s interpretation of \G, as the start of the</span>
<span class="s1">       current match, is subtly different from Perl'</span><span class="nv">s</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">defines</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">end</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">previous</span><span class="w">  </span><span class="nv">match</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">previously</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">empty</span><span class="na">.</span><span class="w"> </span><span class="nv">Because</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">just</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">match</span>
<span class="w">       </span><span class="nv">at</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">time</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">reproduce</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">behaviour</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">all</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">begin</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="na">\</span><span class="nv">G</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">anchored</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">position</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="s2">"anchored"</span><span class="w"> </span><span class="nv">flag</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expression</span><span class="na">.</span>

<span class="nv">CIRCUMFLEX</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="nv">DOLLAR</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">circumflex</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">dollar</span><span class="w">  </span><span class="nv">metacharacters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">zero</span><span class="o">-</span><span class="nv">width</span><span class="w"> </span><span class="nv">assertions</span><span class="na">.</span>
<span class="w">       </span><span class="nv">That</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">particular</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">being</span><span class="w"> </span><span class="nv">true</span><span class="w">  </span><span class="nv">without</span><span class="w">  </span><span class="nv">con</span><span class="o">-</span>
<span class="w">       </span><span class="nv">suming</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Outside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">circumflex</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">only</span><span class="w">  </span><span class="nv">if</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">current</span><span class="w">  </span><span class="nv">matching</span>
<span class="w">       </span><span class="nv">point</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">startoffset</span><span class="w"> </span><span class="nv">argu</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ment</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">circumflex</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">never</span><span class="w">  </span><span class="nv">match</span><span class="w">  </span><span class="nv">if</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_MULTILINE</span><span class="w">  </span><span class="nv">option</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">unset</span><span class="na">.</span><span class="w"> </span><span class="nv">Inside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">circumflex</span>
<span class="w">       </span><span class="nv">has</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">entirely</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">below</span><span class="p">)</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Circumflex</span><span class="w"> </span><span class="nv">need</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">if</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">number</span>
<span class="w">       </span><span class="nv">of</span><span class="w">  </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">involved</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">thing</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">each</span>
<span class="w">       </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">appears</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ever</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">match</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">branch</span><span class="na">.</span><span class="w">  </span><span class="nv">If</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">circumflex</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span>
<span class="w">       </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">constrained</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">sub</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ject</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">said</span><span class="w">  </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="s2">"anchored"</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">There</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">other</span>
<span class="w">       </span><span class="nv">constructs</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">cause</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">anchored</span><span class="na">.</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">dollar</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">if</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">current</span>
<span class="w">       </span><span class="nv">matching</span><span class="w">  </span><span class="nv">point</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">immediately</span>
<span class="w">       </span><span class="nv">before</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">Note</span><span class="o">,</span><span class="w">  </span><span class="nv">however</span><span class="o">,</span>
<span class="w">       </span><span class="nv">that</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">does</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">actually</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">newline</span><span class="na">.</span><span class="w"> </span><span class="nv">Dollar</span><span class="w"> </span><span class="nv">need</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">last</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">involved</span><span class="o">,</span>
<span class="w">       </span><span class="nv">but</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">last</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">appears</span><span class="na">.</span><span class="w"> </span><span class="nv">Dol</span><span class="o">-</span>
<span class="w">       </span><span class="nv">lar</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">dollar</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w">  </span><span class="nv">matches</span><span class="w">  </span><span class="nv">only</span><span class="w">  </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">very</span><span class="w">  </span><span class="nv">end</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_DOLLAR_ENDONLY</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">at</span>
<span class="w">       </span><span class="nv">compile</span><span class="w"> </span><span class="nv">time</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">affect</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">Z</span><span class="w"> </span><span class="nv">assertion</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">meanings</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">circumflex</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">dollar</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_MULTILINE</span><span class="w">  </span><span class="nv">option</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">set</span><span class="na">.</span><span class="w">  </span><span class="nv">When</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">case</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">circumflex</span>
<span class="w">       </span><span class="nv">matches</span><span class="w"> </span><span class="nv">immediately</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="nv">newlines</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">well</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">subject</span><span class="w">  </span><span class="nv">string</span><span class="na">.</span><span class="w">  </span><span class="nv">It</span><span class="w">  </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">ends</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">string</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">dollar</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">newlines</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">well</span><span class="w">  </span><span class="nv">as</span>
<span class="w">       </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">end</span><span class="o">,</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE_MULTILINE</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span><span class="w"> </span><span class="nv">When</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">specified</span>
<span class="w">       </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">character</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">CRLF</span><span class="o">,</span><span class="w"> </span><span class="nv">isolated</span><span class="w"> </span><span class="nv">CR</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="nv">LF</span><span class="w">  </span><span class="nv">characters</span><span class="w">  </span><span class="nv">do</span>
<span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">indicate</span><span class="w"> </span><span class="nv">newlines</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w">  </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="na">/</span><span class="err">^</span><span class="nv">abc</span><span class="err">$</span><span class="na">/</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="s2">"def\nabc"</span>
<span class="w">       </span><span class="p">(</span><span class="nv">where</span><span class="w"> </span><span class="na">\</span><span class="nv">n</span><span class="w"> </span><span class="nv">represents</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">multiline</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">otherwise</span><span class="na">.</span>
<span class="w">       </span><span class="nv">Consequently</span><span class="o">,</span><span class="w">  </span><span class="nv">patterns</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">anchored</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">because</span>
<span class="w">       </span><span class="nv">all</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="err">^</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">anchored</span><span class="w"> </span><span class="nv">in</span><span class="w">  </span><span class="nv">multiline</span><span class="w">  </span><span class="nv">mode</span><span class="o">,</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">match</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">circumflex</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">possible</span><span class="w">  </span><span class="nv">when</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">startoffset</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">pcre_exec</span><span class="p">()</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">zero</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">PCRE_DOLLAR_ENDONLY</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">ignored</span><span class="w">  </span><span class="nv">if</span>
<span class="w">       </span><span class="nv">PCRE_MULTILINE</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Note</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="na">\</span><span class="nv">A</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">Z</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">z</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span>
<span class="w">       </span><span class="nv">and</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">modes</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">pattern</span>
<span class="w">       </span><span class="nv">start</span><span class="w">  </span><span class="nv">with</span><span class="w">  </span><span class="na">\</span><span class="nv">A</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">anchored</span><span class="o">,</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">PCRE_MULTILINE</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">set</span><span class="na">.</span>

<span class="nv">FULL</span><span class="w"> </span><span class="nv">STOP</span><span class="w"> </span><span class="p">(</span><span class="nv">PERIOD</span><span class="o">,</span><span class="w"> </span><span class="nv">DOT</span><span class="p">)</span><span class="w"> </span><span class="nv">AND</span><span class="w"> </span><span class="na">\</span><span class="nv">N</span>

<span class="w">       </span><span class="nv">Outside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ter</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">except</span><span class="w"> </span><span class="p">(</span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="p">)</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">signi</span><span class="o">-</span>
<span class="w">       </span><span class="nv">fies</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">line</span><span class="na">.</span>

<span class="w">       </span><span class="nv">When</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">ending</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">character</span><span class="o">,</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">never</span><span class="w">  </span><span class="nv">matches</span>
<span class="w">       </span><span class="nv">that</span><span class="w">  </span><span class="nv">character</span><span class="sr">;</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">character</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">CRLF</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="o">,</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">does</span>
<span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">CR</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">immediately</span><span class="w"> </span><span class="nv">followed</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">LF</span><span class="o">,</span><span class="w">  </span><span class="nv">but</span><span class="w">  </span><span class="nv">otherwise</span><span class="w">  </span><span class="nv">it</span>
<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="nv">all</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="p">(</span><span class="nv">including</span><span class="w"> </span><span class="nv">isolated</span><span class="w"> </span><span class="nv">CRs</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">LFs</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">When</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">Uni</span><span class="o">-</span>
<span class="w">       </span><span class="nv">code</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">endings</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">being</span><span class="w"> </span><span class="nv">recognized</span><span class="o">,</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">CR</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">LF</span><span class="w">  </span><span class="nv">or</span>
<span class="w">       </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">ending</span><span class="w"> </span><span class="nv">characters</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">behaviour</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">dot</span><span class="w">  </span><span class="nv">with</span><span class="w"> </span><span class="nv">regard</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">newlines</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">changed</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_DOTALL</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">matches</span><span class="w">  </span><span class="nv">any</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">character</span><span class="o">,</span><span class="w">  </span><span class="nv">without</span>
<span class="w">       </span><span class="nv">exception</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">character</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">CRLF</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">present</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">       </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">takes</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">dots</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">it</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">entirely</span><span class="w"> </span><span class="nv">independent</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">circum</span><span class="o">-</span>
<span class="w">       </span><span class="nv">flex</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">dollar</span><span class="o">,</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">only</span><span class="w"> </span><span class="nv">relationship</span><span class="w"> </span><span class="nv">being</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">involve</span>
<span class="w">       </span><span class="nv">newlines</span><span class="na">.</span><span class="w"> </span><span class="nv">Dot</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">meaning</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">N</span><span class="w"> </span><span class="nv">behaves</span><span class="w"> </span><span class="nv">like</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">dot</span><span class="o">,</span><span class="w">  </span><span class="nv">except</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">not</span>
<span class="w">       </span><span class="nv">affected</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">PCRE_DOTALL</span><span class="w">  </span><span class="nv">option</span><span class="na">.</span><span class="w">  </span><span class="nv">In</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">words</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">any</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">except</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">signifies</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">line</span><span class="na">.</span><span class="w"> </span><span class="nv">Perl</span><span class="w">  </span><span class="nv">also</span><span class="w">  </span><span class="nv">uses</span>
<span class="w">       </span><span class="na">\</span><span class="nv">N</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="sr">;</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">this</span><span class="na">.</span>

<span class="nv">MATCHING</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">SINGLE</span><span class="w"> </span><span class="nv">DATA</span><span class="w"> </span><span class="nv">UNIT</span>

<span class="w">       </span><span class="nv">Outside</span><span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">data</span>
<span class="w">       </span><span class="nv">unit</span><span class="o">,</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="o">,</span><span class="w"> </span><span class="nv">one</span><span class="w">  </span><span class="nv">data</span>
<span class="w">       </span><span class="nv">unit</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">byte</span><span class="sr">;</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">16</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">unit</span><span class="sr">;</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">library</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">32</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">unit</span><span class="na">.</span><span class="w"> </span><span class="nv">Unlike</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">dot</span><span class="o">,</span><span class="w">  </span><span class="na">\</span><span class="nv">C</span><span class="w">  </span><span class="nv">always</span><span class="w">  </span><span class="nv">matches</span>
<span class="w">       </span><span class="nv">line</span><span class="o">-</span><span class="nv">ending</span><span class="w">  </span><span class="nv">characters</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span><span class="w">  </span><span class="nv">feature</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">order</span><span class="w"> </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">match</span><span class="w"> </span><span class="nv">individual</span><span class="w"> </span><span class="nv">bytes</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">unclear</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">use</span><span class="o">-</span>
<span class="w">       </span><span class="nv">fully</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">used</span><span class="na">.</span><span class="w">  </span><span class="nv">Because</span><span class="w">  </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">breaks</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">individual</span><span class="w"> </span><span class="nv">data</span>
<span class="w">       </span><span class="nv">units</span><span class="o">,</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">rest</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">malformed</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">undefined</span>
<span class="w">       </span><span class="nv">results</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">assumes</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">dealing</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">strings</span>
<span class="w">       </span><span class="p">(</span><span class="nv">and</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">default</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">checks</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">processing</span><span class="w"> </span><span class="nv">unless</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_NO_UTF8_CHECK</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE_NO_UTF16_CHECK</span><span class="w"> </span><span class="nv">or</span><span class="w">  </span><span class="nv">PCRE_NO_UTF32_CHECK</span><span class="w">  </span><span class="nv">option</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="p">)</span><span class="na">.</span>

<span class="w">       </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">does</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">allow</span><span class="w"> </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">appear</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">lookbehind</span><span class="w"> </span><span class="nv">assertions</span><span class="w"> </span><span class="p">(</span><span class="nv">described</span>
<span class="w">       </span><span class="nv">below</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">mode</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">impossible</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">calcu</span><span class="o">-</span>
<span class="w">       </span><span class="nv">late</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">length</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">lookbehind</span><span class="na">.</span>

<span class="w">       </span><span class="nv">In</span><span class="w"> </span><span class="nv">general</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">best</span><span class="w"> </span><span class="nv">avoided</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">using</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">avoids</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">malformed</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">use</span>
<span class="w">       </span><span class="nv">a</span><span class="w">  </span><span class="nv">lookahead</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">length</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">character</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">could</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">ignore</span><span class="w"> </span><span class="nv">white</span><span class="w">  </span><span class="nv">space</span><span class="w">  </span><span class="nv">and</span>
<span class="w">       </span><span class="nv">line</span><span class="w"> </span><span class="nv">breaks</span><span class="p">)</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?|</span><span class="w"> </span><span class="p">(</span><span class="o">?=</span><span class="sr">[</span><span class="na">\</span><span class="nv">x00</span><span class="o">-</span><span class="na">\</span><span class="nv">x7f</span><span class="sr">]</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)</span><span class="w"> </span><span class="o">|</span>
<span class="w">             </span><span class="p">(</span><span class="o">?=</span><span class="sr">[</span><span class="na">\</span><span class="nv">x80</span><span class="o">-</span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="m">7</span><span class="nv">ff</span><span class="kt">}</span><span class="sr">]</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)</span><span class="w"> </span><span class="o">|</span>
<span class="w">             </span><span class="p">(</span><span class="o">?=</span><span class="sr">[</span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="m">800</span><span class="kt">}</span><span class="o">-</span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="nv">ffff</span><span class="kt">}</span><span class="sr">]</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)</span><span class="w"> </span><span class="o">|</span>
<span class="w">             </span><span class="p">(</span><span class="o">?=</span><span class="sr">[</span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="m">10000</span><span class="kt">}</span><span class="o">-</span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="m">1</span><span class="nv">fffff</span><span class="kt">}</span><span class="sr">]</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">)(</span><span class="na">\</span><span class="nv">C</span><span class="p">))</span>

<span class="w">       </span><span class="nv">A</span><span class="w">  </span><span class="nv">group</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="p">(</span><span class="o">?|</span><span class="w"> </span><span class="nv">resets</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">numbers</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="s2">"Duplicate  Subpattern  Numbers"</span><span class="w">  </span><span class="nv">below</span><span class="p">)</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">assertions</span><span class="w">  </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">for</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">whose</span><span class="w"> </span><span class="nv">encoding</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="m">1</span><span class="o">,</span><span class="w"> </span><span class="m">2</span><span class="o">,</span><span class="w"> </span><span class="m">3</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="nv">bytes</span><span class="o">,</span><span class="w">  </span><span class="nv">respectively</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">character</span><span class="s1">'s  individual bytes are then captured by the appropriate num-</span>
<span class="s1">       ber of groups.</span>

<span class="s1">SQUARE BRACKETS AND CHARACTER CLASSES</span>

<span class="s1">       An opening square bracket introduces a character class, terminated by a</span>
<span class="s1">       closing square bracket. A closing square bracket on its own is not spe-</span>
<span class="s1">       cial by default.  However, if the PCRE_JAVASCRIPT_COMPAT option is set,</span>
<span class="s1">       a lone closing square bracket causes a compile-time error. If a closing</span>
<span class="s1">       square bracket is required as a member of the class, it should  be  the</span>
<span class="s1">       first  data  character  in  the  class (after an initial circumflex, if</span>
<span class="s1">       present) or escaped with a backslash.</span>

<span class="s1">       A character class matches a single character in the subject. In  a  UTF</span>
<span class="s1">       mode,  the  character  may  be  more than one data unit long. A matched</span>
<span class="s1">       character must be in the set of characters defined by the class, unless</span>
<span class="s1">       the  first  character in the class definition is a circumflex, in which</span>
<span class="s1">       case the subject character must not be in the set defined by the class.</span>
<span class="s1">       If  a  circumflex is actually required as a member of the class, ensure</span>
<span class="s1">       it is not the first character, or escape it with a backslash.</span>

<span class="s1">       For example, the character class [aeiou] matches any lower case  vowel,</span>
<span class="s1">       while  [^aeiou]  matches  any character that is not a lower case vowel.</span>
<span class="s1">       Note that a circumflex is just a convenient notation for specifying the</span>
<span class="s1">       characters  that  are in the class by enumerating those that are not. A</span>
<span class="s1">       class that starts with a circumflex is not an assertion; it still  con-</span>
<span class="s1">       sumes  a  character  from the subject string, and therefore it fails if</span>
<span class="s1">       the current pointer is at the end of the string.</span>

<span class="s1">       In UTF-8 (UTF-16, UTF-32) mode, characters with values greater than 255</span>
<span class="s1">       (0xffff)  can be included in a class as a literal string of data units,</span>
<span class="s1">       or by using the \x{ escaping mechanism.</span>

<span class="s1">       When caseless matching is set, any letters in a  class  represent  both</span>
<span class="s1">       their  upper  case  and lower case versions, so for example, a caseless</span>
<span class="s1">       [aeiou] matches "A" as well as "a", and a caseless  [^aeiou]  does  not</span>
<span class="s1">       match  "A", whereas a caseful version would. In a UTF mode, PCRE always</span>
<span class="s1">       understands the concept of case for characters whose  values  are  less</span>
<span class="s1">       than  128, so caseless matching is always possible. For characters with</span>
<span class="s1">       higher values, the concept of case is supported  if  PCRE  is  compiled</span>
<span class="s1">       with  Unicode  property support, but not otherwise.  If you want to use</span>
<span class="s1">       caseless matching in a UTF mode for characters 128 and above, you  must</span>
<span class="s1">       ensure  that  PCRE is compiled with Unicode property support as well as</span>
<span class="s1">       with UTF support.</span>

<span class="s1">       Characters that might indicate line breaks are  never  treated  in  any</span>
<span class="s1">       special  way  when  matching  character  classes,  whatever line-ending</span>
<span class="s1">       sequence is in  use,  and  whatever  setting  of  the  PCRE_DOTALL  and</span>
<span class="s1">       PCRE_MULTILINE options is used. A class such as [^a] always matches one</span>
<span class="s1">       of these characters.</span>

<span class="s1">       The minus (hyphen) character can be used to specify a range of  charac-</span>
<span class="s1">       ters  in  a  character  class.  For  example,  [d-m] matches any letter</span>
<span class="s1">       between d and m, inclusive. If a  minus  character  is  required  in  a</span>
<span class="s1">       class,  it  must  be  escaped  with a backslash or appear in a position</span>
<span class="s1">       where it cannot be interpreted as indicating a range, typically as  the</span>
<span class="s1">       first or last character in the class, or immediately after a range. For</span>
<span class="s1">       example, [b-d-z] matches letters in the range b to d, a hyphen  charac-</span>
<span class="s1">       ter, or z.</span>

<span class="s1">       It is not possible to have the literal character "]" as the end charac-</span>
<span class="s1">       ter of a range. A pattern such as [W-]46] is interpreted as a class  of</span>
<span class="s1">       two  characters ("W" and "-") followed by a literal string "46]", so it</span>
<span class="s1">       would match "W46]" or "-46]". However, if the "]"  is  escaped  with  a</span>
<span class="s1">       backslash  it is interpreted as the end of range, so [W-\]46] is inter-</span>
<span class="s1">       preted as a class containing a range followed by two other  characters.</span>
<span class="s1">       The  octal or hexadecimal representation of "]" can also be used to end</span>
<span class="s1">       a range.</span>

<span class="s1">       An error is generated if a POSIX character  class  (see  below)  or  an</span>
<span class="s1">       escape  sequence other than one that defines a single character appears</span>
<span class="s1">       at a point where a range ending character  is  expected.  For  example,</span>
<span class="s1">       [z-\xff] is valid, but [A-\d] and [A-[:digit:]] are not.</span>

<span class="s1">       Ranges  operate in the collating sequence of character values. They can</span>
<span class="s1">       also  be  used  for  characters  specified  numerically,  for   example</span>
<span class="s1">       [\000-\037].  Ranges  can include any characters that are valid for the</span>
<span class="s1">       current mode.</span>

<span class="s1">       If a range that includes letters is used when caseless matching is set,</span>
<span class="s1">       it matches the letters in either case. For example, [W-c] is equivalent</span>
<span class="s1">       to [][\\^_`wxyzabc], matched caselessly, and  in  a  non-UTF  mode,  if</span>
<span class="s1">       character  tables  for  a French locale are in use, [\xc8-\xcb] matches</span>
<span class="s1">       accented E characters in both cases. In UTF modes,  PCRE  supports  the</span>
<span class="s1">       concept  of  case for characters with values greater than 128 only when</span>
<span class="s1">       it is compiled with Unicode property support.</span>

<span class="s1">       The character escape sequences \d, \D, \h, \H, \p, \P, \s, \S, \v,  \V,</span>
<span class="s1">       \w, and \W may appear in a character class, and add the characters that</span>
<span class="s1">       they match to the class. For example, [\dABCDEF] matches any  hexadeci-</span>
<span class="s1">       mal  digit.  In  UTF modes, the PCRE_UCP option affects the meanings of</span>
<span class="s1">       \d, \s, \w and their upper case partners, just as  it  does  when  they</span>
<span class="s1">       appear  outside a character class, as described in the section entitled</span>
<span class="s1">       "Generic character types" above. The escape sequence \b has a different</span>
<span class="s1">       meaning  inside  a character class; it matches the backspace character.</span>
<span class="s1">       The sequences \B, \N, \R, and \X are not  special  inside  a  character</span>
<span class="s1">       class.  Like  any other unrecognized escape sequences, they are treated</span>
<span class="s1">       as the literal characters "B", "N", "R", and "X" by default, but  cause</span>
<span class="s1">       an error if the PCRE_EXTRA option is set.</span>

<span class="s1">       A  circumflex  can  conveniently  be used with the upper case character</span>
<span class="s1">       types to specify a more restricted set of characters than the  matching</span>
<span class="s1">       lower  case  type.  For example, the class [^\W_] matches any letter or</span>
<span class="s1">       digit, but not underscore, whereas [\w] includes underscore. A positive</span>
<span class="s1">       character class should be read as "something OR something OR ..." and a</span>
<span class="s1">       negative class as "NOT something AND NOT something AND NOT ...".</span>

<span class="s1">       The only metacharacters that are recognized in  character  classes  are</span>
<span class="s1">       backslash,  hyphen  (only  where  it can be interpreted as specifying a</span>
<span class="s1">       range), circumflex (only at the start), opening  square  bracket  (only</span>
<span class="s1">       when  it can be interpreted as introducing a POSIX class name, or for a</span>
<span class="s1">       special compatibility feature - see the next  two  sections),  and  the</span>
<span class="s1">       terminating  closing  square  bracket.  However,  escaping  other  non-</span>
<span class="s1">       alphanumeric characters does no harm.</span>

<span class="s1">POSIX CHARACTER CLASSES</span>

<span class="s1">       Perl supports the POSIX notation for character classes. This uses names</span>
<span class="s1">       enclosed  by  [: and :] within the enclosing square brackets. PCRE also</span>
<span class="s1">       supports this notation. For example,</span>

<span class="s1">         [01[:alpha:]%]</span>

<span class="s1">       matches "0", "1", any alphabetic character, or "%". The supported class</span>
<span class="s1">       names are:</span>

<span class="s1">         alnum    letters and digits</span>
<span class="s1">         alpha    letters</span>
<span class="s1">         ascii    character codes 0 - 127</span>
<span class="s1">         blank    space or tab only</span>
<span class="s1">         cntrl    control characters</span>
<span class="s1">         digit    decimal digits (same as \d)</span>
<span class="s1">         graph    printing characters, excluding space</span>
<span class="s1">         lower    lower case letters</span>
<span class="s1">         print    printing characters, including space</span>
<span class="s1">         punct    printing characters, excluding letters and digits and space</span>
<span class="s1">         space    white space (the same as \s from PCRE 8.34)</span>
<span class="s1">         upper    upper case letters</span>
<span class="s1">         word     "word" characters (same as \w)</span>
<span class="s1">         xdigit   hexadecimal digits</span>

<span class="s1">       The  default  "space" characters are HT (9), LF (10), VT (11), FF (12),</span>
<span class="s1">       CR (13), and space (32). If locale-specific matching is  taking  place,</span>
<span class="s1">       the  list  of  space characters may be different; there may be fewer or</span>
<span class="s1">       more of them. "Space" used to be different to \s, which did not include</span>
<span class="s1">       VT, for Perl compatibility.  However, Perl changed at release 5.18, and</span>
<span class="s1">       PCRE followed at release 8.34.  "Space" and \s now match the  same  set</span>
<span class="s1">       of characters.</span>

<span class="s1">       The  name  "word"  is  a Perl extension, and "blank" is a GNU extension</span>
<span class="s1">       from Perl 5.8. Another Perl extension is negation, which  is  indicated</span>
<span class="s1">       by a ^ character after the colon. For example,</span>

<span class="s1">         [12[:^digit:]]</span>

<span class="s1">       matches  "1", "2", or any non-digit. PCRE (and Perl) also recognize the</span>
<span class="s1">       POSIX syntax [.ch.] and [=ch=] where "ch" is a "collating element", but</span>
<span class="s1">       these are not supported, and an error is given if they are encountered.</span>

<span class="s1">       By default, characters with values greater than 128 do not match any of</span>
<span class="s1">       the POSIX character classes. However, if the PCRE_UCP option is  passed</span>
<span class="s1">       to  pcre_compile(),  some  of  the  classes are changed so that Unicode</span>
<span class="s1">       character properties are used. This is achieved  by  replacing  certain</span>
<span class="s1">       POSIX classes by other sequences, as follows:</span>

<span class="s1">         [:alnum:]  becomes  \p{Xan}</span>
<span class="s1">         [:alpha:]  becomes  \p{L}</span>
<span class="s1">         [:blank:]  becomes  \h</span>
<span class="s1">         [:digit:]  becomes  \p{Nd}</span>
<span class="s1">         [:lower:]  becomes  \p{Ll}</span>
<span class="s1">         [:space:]  becomes  \p{Xps}</span>
<span class="s1">         [:upper:]  becomes  \p{Lu}</span>
<span class="s1">         [:word:]   becomes  \p{Xwd}</span>

<span class="s1">       Negated  versions, such as [:^alpha:] use \P instead of \p. Three other</span>
<span class="s1">       POSIX classes are handled specially in UCP mode:</span>

<span class="s1">       [:graph:] This matches characters that have glyphs that mark  the  page</span>
<span class="s1">                 when printed. In Unicode property terms, it matches all char-</span>
<span class="s1">                 acters with the L, M, N, P, S, or Cf properties, except for:</span>

<span class="s1">                   U+061C           Arabic Letter Mark</span>
<span class="s1">                   U+180E           Mongolian Vowel Separator</span>
<span class="s1">                   U+2066 - U+2069  Various "isolate"s</span>

<span class="s1">       [:print:] This matches the same  characters  as  [:graph:]  plus  space</span>
<span class="s1">                 characters  that  are  not controls, that is, characters with</span>
<span class="s1">                 the Zs property.</span>

<span class="s1">       [:punct:] This matches all characters that have the Unicode P (punctua-</span>
<span class="s1">                 tion)  property,  plus those characters whose code points are</span>
<span class="s1">                 less than 128 that have the S (Symbol) property.</span>

<span class="s1">       The other POSIX classes are unchanged, and match only  characters  with</span>
<span class="s1">       code points less than 128.</span>

<span class="s1">COMPATIBILITY FEATURE FOR WORD BOUNDARIES</span>

<span class="s1">       In  the POSIX.2 compliant library that was included in 4.4BSD Unix, the</span>
<span class="s1">       ugly syntax [[:&lt;:]] and [[:&gt;:]] is used for matching  "start  of  word"</span>
<span class="s1">       and "end of word". PCRE treats these items as follows:</span>

<span class="s1">         [[:&lt;:]]  is converted to  \b(?=\w)</span>
<span class="s1">         [[:&gt;:]]  is converted to  \b(?&lt;=\w)</span>

<span class="s1">       Only these exact character sequences are recognized. A sequence such as</span>
<span class="s1">       [a[:&lt;:]b] provokes error for an unrecognized  POSIX  class  name.  This</span>
<span class="s1">       support  is not compatible with Perl. It is provided to help migrations</span>
<span class="s1">       from other environments, and is best not used in any new patterns. Note</span>
<span class="s1">       that  \b matches at the start and the end of a word (see "Simple asser-</span>
<span class="s1">       tions" above), and in a Perl-style pattern the preceding  or  following</span>
<span class="s1">       character  normally  shows  which  is  wanted, without the need for the</span>
<span class="s1">       assertions that are used above in order to give exactly the  POSIX  be-</span>
<span class="s1">       haviour.</span>

<span class="s1">VERTICAL BAR</span>

<span class="s1">       Vertical  bar characters are used to separate alternative patterns. For</span>
<span class="s1">       example, the pattern</span>

<span class="s1">         gilbert|sullivan</span>

<span class="s1">       matches either "gilbert" or "sullivan". Any number of alternatives  may</span>
<span class="s1">       appear,  and  an  empty  alternative  is  permitted (matching the empty</span>
<span class="s1">       string). The matching process tries each alternative in turn, from left</span>
<span class="s1">       to  right, and the first one that succeeds is used. If the alternatives</span>
<span class="s1">       are within a subpattern (defined below), "succeeds" means matching  the</span>
<span class="s1">       rest of the main pattern as well as the alternative in the subpattern.</span>

<span class="s1">INTERNAL OPTION SETTING</span>

<span class="s1">       The  settings  of  the  PCRE_CASELESS, PCRE_MULTILINE, PCRE_DOTALL, and</span>
<span class="s1">       PCRE_EXTENDED options (which are Perl-compatible) can be  changed  from</span>
<span class="s1">       within  the  pattern  by  a  sequence  of  Perl option letters enclosed</span>
<span class="s1">       between "(?" and ")".  The option letters are</span>

<span class="s1">         i  for PCRE_CASELESS</span>
<span class="s1">         m  for PCRE_MULTILINE</span>
<span class="s1">         s  for PCRE_DOTALL</span>
<span class="s1">         x  for PCRE_EXTENDED</span>

<span class="s1">       For example, (?im) sets caseless, multiline matching. It is also possi-</span>
<span class="s1">       ble to unset these options by preceding the letter with a hyphen, and a</span>
<span class="s1">       combined setting and unsetting such as (?im-sx), which sets  PCRE_CASE-</span>
<span class="s1">       LESS  and PCRE_MULTILINE while unsetting PCRE_DOTALL and PCRE_EXTENDED,</span>
<span class="s1">       is also permitted. If a  letter  appears  both  before  and  after  the</span>
<span class="s1">       hyphen, the option is unset.</span>

<span class="s1">       The  PCRE-specific options PCRE_DUPNAMES, PCRE_UNGREEDY, and PCRE_EXTRA</span>
<span class="s1">       can be changed in the same way as the Perl-compatible options by  using</span>
<span class="s1">       the characters J, U and X respectively.</span>

<span class="s1">       When  one  of  these  option  changes occurs at top level (that is, not</span>
<span class="s1">       inside subpattern parentheses), the change applies to the remainder  of</span>
<span class="s1">       the pattern that follows. If the change is placed right at the start of</span>
<span class="s1">       a pattern, PCRE extracts it into the global options (and it will there-</span>
<span class="s1">       fore show up in data extracted by the pcre_fullinfo() function).</span>

<span class="s1">       An  option  change  within a subpattern (see below for a description of</span>
<span class="s1">       subpatterns) affects only that part of the subpattern that follows  it,</span>
<span class="s1">       so</span>

<span class="s1">         (a(?i)b)c</span>

<span class="s1">       matches abc and aBc and no other strings (assuming PCRE_CASELESS is not</span>
<span class="s1">       used).  By this means, options can be made to have  different  settings</span>
<span class="s1">       in  different parts of the pattern. Any changes made in one alternative</span>
<span class="s1">       do carry on into subsequent branches within the  same  subpattern.  For</span>
<span class="s1">       example,</span>

<span class="s1">         (a(?i)b|c)</span>

<span class="s1">       matches  "ab",  "aB",  "c",  and "C", even though when matching "C" the</span>
<span class="s1">       first branch is abandoned before the option setting.  This  is  because</span>
<span class="s1">       the  effects  of option settings happen at compile time. There would be</span>
<span class="s1">       some very weird behaviour otherwise.</span>

<span class="s1">       Note: There are other PCRE-specific options that  can  be  set  by  the</span>
<span class="s1">       application  when  the  compiling  or matching functions are called. In</span>
<span class="s1">       some cases the pattern can contain special leading  sequences  such  as</span>
<span class="s1">       (*CRLF)  to  override  what  the  application  has set or what has been</span>
<span class="s1">       defaulted.  Details  are  given  in  the  section   entitled   "Newline</span>
<span class="s1">       sequences"  above.  There  are also the (*UTF8), (*UTF16),(*UTF32), and</span>
<span class="s1">       (*UCP) leading sequences that can be used to set UTF and Unicode  prop-</span>
<span class="s1">       erty  modes;  they are equivalent to setting the PCRE_UTF8, PCRE_UTF16,</span>
<span class="s1">       PCRE_UTF32 and the PCRE_UCP options, respectively. The (*UTF)  sequence</span>
<span class="s1">       is  a  generic version that can be used with any of the libraries. How-</span>
<span class="s1">       ever, the application can set the PCRE_NEVER_UTF  option,  which  locks</span>
<span class="s1">       out the use of the (*UTF) sequences.</span>

<span class="s1">SUBPATTERNS</span>

<span class="s1">       Subpatterns are delimited by parentheses (round brackets), which can be</span>
<span class="s1">       nested.  Turning part of a pattern into a subpattern does two things:</span>

<span class="s1">       1. It localizes a set of alternatives. For example, the pattern</span>

<span class="s1">         cat(aract|erpillar|)</span>

<span class="s1">       matches "cataract", "caterpillar", or "cat". Without  the  parentheses,</span>
<span class="s1">       it would match "cataract", "erpillar" or an empty string.</span>

<span class="s1">       2.  It  sets  up  the  subpattern as a capturing subpattern. This means</span>
<span class="s1">       that, when the whole pattern  matches,  that  portion  of  the  subject</span>
<span class="s1">       string that matched the subpattern is passed back to the caller via the</span>
<span class="s1">       ovector argument of the matching function. (This applies  only  to  the</span>
<span class="s1">       traditional  matching functions; the DFA matching functions do not sup-</span>
<span class="s1">       port capturing.)</span>

<span class="s1">       Opening parentheses are counted from left to right (starting from 1) to</span>
<span class="s1">       obtain  numbers  for  the  capturing  subpatterns.  For example, if the</span>
<span class="s1">       string "the red king" is matched against the pattern</span>

<span class="s1">         the ((red|white) (king|queen))</span>

<span class="s1">       the captured substrings are "red king", "red", and "king", and are num-</span>
<span class="s1">       bered 1, 2, and 3, respectively.</span>

<span class="s1">       The  fact  that  plain  parentheses  fulfil two functions is not always</span>
<span class="s1">       helpful.  There are often times when a grouping subpattern is  required</span>
<span class="s1">       without  a capturing requirement. If an opening parenthesis is followed</span>
<span class="s1">       by a question mark and a colon, the subpattern does not do any  captur-</span>
<span class="s1">       ing,  and  is  not  counted when computing the number of any subsequent</span>
<span class="s1">       capturing subpatterns. For example, if the string "the white queen"  is</span>
<span class="s1">       matched against the pattern</span>

<span class="s1">         the ((?:red|white) (king|queen))</span>

<span class="s1">       the captured substrings are "white queen" and "queen", and are numbered</span>
<span class="s1">       1 and 2. The maximum number of capturing subpatterns is 65535.</span>

<span class="s1">       As a convenient shorthand, if any option settings are required  at  the</span>
<span class="s1">       start  of  a  non-capturing  subpattern,  the option letters may appear</span>
<span class="s1">       between the "?" and the ":". Thus the two patterns</span>

<span class="s1">         (?i:saturday|sunday)</span>
<span class="s1">         (?:(?i)saturday|sunday)</span>

<span class="s1">       match exactly the same set of strings. Because alternative branches are</span>
<span class="s1">       tried  from  left  to right, and options are not reset until the end of</span>
<span class="s1">       the subpattern is reached, an option setting in one branch does  affect</span>
<span class="s1">       subsequent  branches,  so  the above patterns match "SUNDAY" as well as</span>
<span class="s1">       "Saturday".</span>

<span class="s1">DUPLICATE SUBPATTERN NUMBERS</span>

<span class="s1">       Perl 5.10 introduced a feature whereby each alternative in a subpattern</span>
<span class="s1">       uses  the same numbers for its capturing parentheses. Such a subpattern</span>
<span class="s1">       starts with (?| and is itself a non-capturing subpattern. For  example,</span>
<span class="s1">       consider this pattern:</span>

<span class="s1">         (?|(Sat)ur|(Sun))day</span>

<span class="s1">       Because  the two alternatives are inside a (?| group, both sets of cap-</span>
<span class="s1">       turing parentheses are numbered one. Thus, when  the  pattern  matches,</span>
<span class="s1">       you  can  look  at captured substring number one, whichever alternative</span>
<span class="s1">       matched. This construct is useful when you want to  capture  part,  but</span>
<span class="s1">       not all, of one of a number of alternatives. Inside a (?| group, paren-</span>
<span class="s1">       theses are numbered as usual, but the number is reset at the  start  of</span>
<span class="s1">       each  branch.  The numbers of any capturing parentheses that follow the</span>
<span class="s1">       subpattern start after the highest number used in any branch. The  fol-</span>
<span class="s1">       lowing example is taken from the Perl documentation. The numbers under-</span>
<span class="s1">       neath show in which buffer the captured content will be stored.</span>

<span class="s1">         # before  ---------------branch-reset----------- after</span>
<span class="s1">         / ( a )  (?| x ( y ) z | (p (q) r) | (t) u (v) ) ( z ) /x</span>
<span class="s1">         # 1            2         2  3        2     3     4</span>

<span class="s1">       A back reference to a numbered subpattern uses the  most  recent  value</span>
<span class="s1">       that  is  set  for that number by any subpattern. The following pattern</span>
<span class="s1">       matches "abcabc" or "defdef":</span>

<span class="s1">         /(?|(abc)|(def))\1/</span>

<span class="s1">       In contrast, a subroutine call to a numbered subpattern  always  refers</span>
<span class="s1">       to  the  first  one in the pattern with the given number. The following</span>
<span class="s1">       pattern matches "abcabc" or "defabc":</span>

<span class="s1">         /(?|(abc)|(def))(?1)/</span>

<span class="s1">       If a condition test for a subpattern'</span><span class="nv">s</span><span class="w"> </span><span class="nv">having</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">refers</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">non</span><span class="o">-</span>
<span class="w">       </span><span class="nv">unique</span><span class="w">  </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">num</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ber</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span>

<span class="w">       </span><span class="nv">An</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">approach</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="s2">"branch reset"</span><span class="w"> </span><span class="nv">feature</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">use</span>
<span class="w">       </span><span class="nv">duplicate</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">subpatterns</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span>

<span class="nv">NAMED</span><span class="w"> </span><span class="nv">SUBPATTERNS</span>

<span class="w">       </span><span class="nv">Identifying</span><span class="w">  </span><span class="nv">capturing</span><span class="w">  </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">simple</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">very</span><span class="w"> </span><span class="nv">hard</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">keep</span><span class="w"> </span><span class="nv">track</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">complicated</span><span class="w">  </span><span class="nv">regular</span><span class="w">  </span><span class="nv">expres</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sions</span><span class="na">.</span><span class="w">  </span><span class="nv">Furthermore</span><span class="o">,</span><span class="w">  </span><span class="nv">if</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">expression</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">modified</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">may</span>
<span class="w">       </span><span class="nv">change</span><span class="na">.</span><span class="w"> </span><span class="nv">To</span><span class="w"> </span><span class="nv">help</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">difficulty</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">supports</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">naming</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">sub</span><span class="o">-</span>
<span class="w">       </span><span class="nv">patterns</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">feature</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">added</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">until</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="m">5.10</span><span class="na">.</span><span class="w"> </span><span class="nv">Python</span>
<span class="w">       </span><span class="nv">had</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">feature</span><span class="w"> </span><span class="nv">earlier</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">introduced</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">release</span><span class="w">  </span><span class="m">4.0</span><span class="o">,</span><span class="w">  </span><span class="nv">using</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">Python</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">supports</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Python</span><span class="w"> </span><span class="nv">syn</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tax</span><span class="na">.</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">allows</span><span class="w"> </span><span class="nv">identically</span><span class="w"> </span><span class="nv">numbered</span><span class="w">  </span><span class="nv">subpatterns</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">have</span><span class="w">  </span><span class="nv">different</span>
<span class="w">       </span><span class="nv">names</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="na">.</span>

<span class="w">       </span><span class="nv">In</span><span class="w">  </span><span class="nv">PCRE</span><span class="o">,</span><span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">ways</span><span class="bp">:</span><span class="w"> </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="na">...</span><span class="p">)</span>
<span class="w">       </span><span class="nv">or</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="s1">'name'</span><span class="na">...</span><span class="p">)</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="nv">P</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="na">...</span><span class="p">)</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w">  </span><span class="nv">Python</span><span class="na">.</span><span class="w">  </span><span class="nv">References</span>
<span class="w">       </span><span class="nv">to</span><span class="w">  </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">parts</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">back</span>
<span class="w">       </span><span class="nv">references</span><span class="o">,</span><span class="w"> </span><span class="nv">recursion</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">conditions</span><span class="o">,</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">made</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">as</span><span class="w">  </span><span class="nv">well</span><span class="w">  </span><span class="nv">as</span>
<span class="w">       </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Names</span><span class="w">  </span><span class="nv">consist</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="nv">alphanumeric</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">underscores</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span>
<span class="w">       </span><span class="nv">must</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">digit</span><span class="na">.</span><span class="w">  </span><span class="nv">Named</span><span class="w">  </span><span class="nv">capturing</span><span class="w">  </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">still</span>
<span class="w">       </span><span class="nv">allocated</span><span class="w">  </span><span class="nv">numbers</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">well</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">names</span><span class="o">,</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">names</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">not</span>
<span class="w">       </span><span class="nv">present</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">API</span><span class="w"> </span><span class="nv">provides</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">calls</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">extracting</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">name</span><span class="o">-</span>
<span class="w">       </span><span class="nv">to</span><span class="o">-</span><span class="nv">number</span><span class="w">  </span><span class="nv">translation</span><span class="w">  </span><span class="nv">table</span><span class="w">  </span><span class="nv">from</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">convenience</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">extracting</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">captured</span><span class="w"> </span><span class="nv">substring</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span><span class="na">.</span>

<span class="w">       </span><span class="nv">By</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">unique</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">possible</span>
<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">relax</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">constraint</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">setting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_DUPNAMES</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">compile</span>
<span class="w">       </span><span class="nv">time</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">Duplicate</span><span class="w"> </span><span class="nv">names</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">permitted</span><span class="w"> </span><span class="nv">for</span><span class="w">  </span><span class="nv">subpatterns</span><span class="w">  </span><span class="nv">with</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">same</span><span class="w">  </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span><span class="p">)</span><span class="w"> </span><span class="nv">Dupli</span><span class="o">-</span>
<span class="w">       </span><span class="nv">cate</span><span class="w"> </span><span class="nv">names</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">useful</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">one</span><span class="w">  </span><span class="nv">instance</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">named</span><span class="w">  </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">match</span><span class="na">.</span><span class="w"> </span><span class="nv">Suppose</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">weekday</span><span class="o">,</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">3</span><span class="o">-</span><span class="nv">letter</span><span class="w"> </span><span class="nv">abbreviation</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">full</span><span class="w"> </span><span class="nv">name</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">both</span><span class="w"> </span><span class="nv">cases</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">extract</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">abbreviation</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="p">(</span><span class="nv">ignoring</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">breaks</span><span class="p">)</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">job</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">DN</span><span class="o">&gt;</span><span class="nv">Mon</span><span class="o">|</span><span class="nv">Fri</span><span class="o">|</span><span class="nv">Sun</span><span class="p">)(</span><span class="o">?</span><span class="bp">:</span><span class="nv">day</span><span class="p">)</span><span class="o">?|</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">DN</span><span class="o">&gt;</span><span class="nv">Tue</span><span class="p">)(</span><span class="o">?</span><span class="bp">:</span><span class="nv">sday</span><span class="p">)</span><span class="o">?|</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">DN</span><span class="o">&gt;</span><span class="nv">Wed</span><span class="p">)(</span><span class="o">?</span><span class="bp">:</span><span class="nv">nesday</span><span class="p">)</span><span class="o">?|</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">DN</span><span class="o">&gt;</span><span class="nv">Thu</span><span class="p">)(</span><span class="o">?</span><span class="bp">:</span><span class="nv">rsday</span><span class="p">)</span><span class="o">?|</span>
<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">DN</span><span class="o">&gt;</span><span class="nv">Sat</span><span class="p">)(</span><span class="o">?</span><span class="bp">:</span><span class="nv">urday</span><span class="p">)</span><span class="o">?</span>

<span class="w">       </span><span class="nv">There</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">five</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">substrings</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ever</span><span class="w"> </span><span class="nv">set</span><span class="w">  </span><span class="nv">after</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">match</span><span class="na">.</span><span class="w">  </span><span class="p">(</span><span class="nv">An</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">solving</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="s2">"branch</span>
<span class="s2">       reset"</span><span class="w"> </span><span class="nv">subpattern</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">convenience</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">extracting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">by</span><span class="w">  </span><span class="nv">name</span><span class="w">  </span><span class="nv">returns</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">substring</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="p">(</span><span class="nv">and</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">only</span><span class="p">)</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">that</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">saves</span><span class="w"> </span><span class="nv">searching</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">find</span><span class="w">  </span><span class="nv">which</span><span class="w">  </span><span class="nv">numbered</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">was</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">you</span><span class="w">  </span><span class="nv">make</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">back</span><span class="w">  </span><span class="nv">reference</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">unique</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">from</span>
<span class="w">       </span><span class="nv">elsewhere</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">refers</span><span class="w">  </span><span class="nv">are</span>
<span class="w">       </span><span class="nv">checked</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">order</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">appear</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">overall</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">first</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">reference</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="s2">"foofoo"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"barbar"</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="s2">"foobar"</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="s2">"barfoo"</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="bp">:</span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">n</span><span class="o">&gt;</span><span class="nv">foo</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">n</span><span class="o">&gt;</span><span class="nv">bar</span><span class="p">))</span><span class="na">\</span><span class="nv">k</span><span class="o">&lt;</span><span class="nv">n</span><span class="o">&gt;</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">unique</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">subpattern</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">one</span>
<span class="w">       </span><span class="nv">that</span><span class="w"> </span><span class="nv">corresponds</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">occurrence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">used</span><span class="na">.</span><span class="w">  </span><span class="nv">In</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">absence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">duplicate</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">section</span><span class="p">)</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">one</span>
<span class="w">       </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">lowest</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">section</span><span class="w"> </span><span class="nv">about</span>
<span class="w">       </span><span class="nv">conditions</span><span class="w"> </span><span class="nv">below</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">matched</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span>
<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">recursion</span><span class="o">,</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">are</span><span class="w">  </span><span class="nv">tested</span><span class="na">.</span>
<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">overall</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">true</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">behaviour</span><span class="w"> </span><span class="nv">as</span><span class="w">  </span><span class="nv">testing</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">number</span><span class="na">.</span><span class="w">  </span><span class="nv">For</span><span class="w">  </span><span class="nv">further</span>
<span class="w">       </span><span class="nv">details</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">interfaces</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">handling</span><span class="w">  </span><span class="nv">named</span><span class="w"> </span><span class="nv">subpatterns</span><span class="o">,</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pcreapi</span><span class="w"> </span><span class="nv">documentation</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Warning</span><span class="bp">:</span><span class="w"> </span><span class="nv">You</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">names</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">distinguish</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">sub</span><span class="o">-</span>
<span class="w">       </span><span class="nv">patterns</span><span class="w">  </span><span class="nv">with</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">when</span>
<span class="w">       </span><span class="nv">matching</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">reason</span><span class="o">,</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">compile</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">differ</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ent</span><span class="w">  </span><span class="nv">names</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span>
<span class="w">       </span><span class="nv">can</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">give</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">even</span>
<span class="w">       </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE_DUPNAMES</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">set</span><span class="na">.</span>

<span class="nv">REPETITION</span>

<span class="w">       </span><span class="nv">Repetition</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">specified</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">quantifiers</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">follow</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">following</span><span class="w"> </span><span class="nv">items</span><span class="bp">:</span>

<span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="nv">the</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">metacharacter</span>
<span class="w">         </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">C</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span>
<span class="w">         </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">X</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span>
<span class="w">         </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">R</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequence</span>
<span class="w">         </span><span class="nv">an</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="na">\</span><span class="nv">pL</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">character</span>
<span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span>
<span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">section</span><span class="p">)</span>
<span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">parenthesized</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="p">(</span><span class="nv">including</span><span class="w"> </span><span class="nv">assertions</span><span class="p">)</span>
<span class="w">         </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="p">(</span><span class="nv">recursive</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">otherwise</span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">general</span><span class="w"> </span><span class="nv">repetition</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">specifies</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">minimum</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">maximum</span><span class="w">  </span><span class="nv">num</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ber</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">permitted</span><span class="w"> </span><span class="nv">matches</span><span class="o">,</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">giving</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">curly</span><span class="w"> </span><span class="nv">brackets</span>
<span class="w">       </span><span class="p">(</span><span class="nv">braces</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">separated</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">comma</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w">  </span><span class="nv">less</span><span class="w">  </span><span class="nv">than</span><span class="w">  </span><span class="m">65536</span><span class="o">,</span>
<span class="w">       </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">equal</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="nv">z</span><span class="kt">{</span><span class="m">2</span><span class="o">,</span><span class="m">4</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="s2">"zz"</span><span class="o">,</span><span class="w">  </span><span class="s2">"zzz"</span><span class="o">,</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="s2">"zzzz"</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">brace</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">own</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">special</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">omitted</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">comma</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">present</span><span class="o">,</span><span class="w">  </span><span class="nv">there</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">no</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">limit</span><span class="sr">;</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comma</span>
<span class="w">       </span><span class="nv">are</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">omitted</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">specifies</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">exact</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">required</span>
<span class="w">       </span><span class="nv">matches</span><span class="na">.</span><span class="w"> </span><span class="nv">Thus</span>

<span class="w">         </span><span class="sr">[</span><span class="nv">aeiou</span><span class="sr">]</span><span class="kt">{</span><span class="m">3</span><span class="o">,</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">matches</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="nv">successive</span><span class="w"> </span><span class="nv">vowels</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">more</span><span class="o">,</span><span class="w"> </span><span class="nv">while</span>

<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">8</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="nv">exactly</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="nv">digits</span><span class="na">.</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span><span class="nv">opening</span><span class="w"> </span><span class="nv">curly</span><span class="w"> </span><span class="nv">bracket</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">appears</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">position</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">allowed</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w">  </span><span class="nv">match</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quantifier</span><span class="o">,</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">taken</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">character</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">exam</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ple</span><span class="o">,</span><span class="w"> </span><span class="kt">{</span><span class="o">,</span><span class="m">6</span><span class="kt">}</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quantifier</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">four</span><span class="w"> </span><span class="nv">characters</span><span class="na">.</span>

<span class="w">       </span><span class="nv">In</span><span class="w"> </span><span class="nv">UTF</span><span class="w"> </span><span class="nv">modes</span><span class="o">,</span><span class="w"> </span><span class="nv">quantifiers</span><span class="w"> </span><span class="nv">apply</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">rather</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">individual</span>
<span class="w">       </span><span class="nv">data</span><span class="w">  </span><span class="nv">units</span><span class="na">.</span><span class="w"> </span><span class="nv">Thus</span><span class="o">,</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">x</span><span class="kt">{</span><span class="m">100</span><span class="kt">}{</span><span class="m">2</span><span class="kt">}</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">characters</span><span class="o">,</span><span class="w"> </span><span class="nv">each</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">represented</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">two</span><span class="o">-</span><span class="nv">byte</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">UTF</span><span class="o">-</span><span class="m">8</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span><span class="w"> </span><span class="nv">Simi</span><span class="o">-</span>
<span class="w">       </span><span class="nv">larly</span><span class="o">,</span><span class="w">  </span><span class="na">\</span><span class="nv">X</span><span class="kt">{</span><span class="m">3</span><span class="kt">}</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">Unicode</span><span class="w"> </span><span class="nv">extended</span><span class="w"> </span><span class="nv">grapheme</span><span class="w"> </span><span class="nv">clusters</span><span class="o">,</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">which</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">several</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">units</span><span class="w"> </span><span class="nv">long</span><span class="w"> </span><span class="p">(</span><span class="nv">and</span><span class="w">  </span><span class="nv">they</span><span class="w">  </span><span class="nv">may</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">different</span>
<span class="w">       </span><span class="nv">lengths</span><span class="p">)</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="kt">{</span><span class="m">0</span><span class="kt">}</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">permitted</span><span class="o">,</span><span class="w"> </span><span class="nv">causing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">behave</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">if</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">present</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">use</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ful</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">referenced</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">subroutines</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">elsewhere</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="p">(</span><span class="nv">but</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">section</span><span class="w"> </span><span class="nv">entitled</span><span class="w"> </span><span class="s2">"Defining subpatterns</span>
<span class="s2">       for  use  by  reference only"</span><span class="w"> </span><span class="nv">below</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">Items</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">have</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kt">{</span><span class="m">0</span><span class="kt">}</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">omitted</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w"> </span><span class="nv">convenience</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">common</span><span class="w"> </span><span class="nv">quantifiers</span><span class="w"> </span><span class="nv">have</span><span class="w">  </span><span class="nv">single</span><span class="o">-</span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ter</span><span class="w"> </span><span class="nv">abbreviations</span><span class="bp">:</span>

<span class="w">         </span><span class="o">*</span><span class="w">    </span><span class="nv">is</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="kt">{</span><span class="m">0</span><span class="o">,</span><span class="kt">}</span>
<span class="w">         </span><span class="o">+</span><span class="w">    </span><span class="nv">is</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="kt">{</span><span class="m">1</span><span class="o">,</span><span class="kt">}</span>
<span class="w">         </span><span class="o">?</span><span class="w">    </span><span class="nv">is</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="kt">{</span><span class="m">0</span><span class="o">,</span><span class="m">1</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">It</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">possible</span><span class="w">  </span><span class="nv">to</span><span class="w"> </span><span class="nv">construct</span><span class="w"> </span><span class="nv">infinite</span><span class="w"> </span><span class="nv">loops</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">       </span><span class="nv">that</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">upper</span><span class="w"> </span><span class="nv">limit</span><span class="o">,</span>
<span class="w">       </span><span class="nv">for</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="nv">a</span><span class="o">?</span><span class="p">)</span><span class="o">*</span>

<span class="w">       </span><span class="nv">Earlier</span><span class="w"> </span><span class="nv">versions</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">give</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">compile</span><span class="w"> </span><span class="nv">time</span>
<span class="w">       </span><span class="nv">for</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">patterns</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">cases</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">this</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">useful</span><span class="o">,</span><span class="w">  </span><span class="nv">such</span><span class="w">  </span><span class="nv">patterns</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">accepted</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">repetition</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">fact</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">characters</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">loop</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">forcibly</span><span class="w">  </span><span class="nv">bro</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ken</span><span class="na">.</span>

<span class="w">       </span><span class="nv">By</span><span class="w">  </span><span class="nv">default</span><span class="o">,</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">quantifiers</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="s2">"greedy"</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">much</span>
<span class="w">       </span><span class="nv">as</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="p">(</span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">maximum</span><span class="w">  </span><span class="nv">number</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">permitted</span><span class="w">  </span><span class="nv">times</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">without</span>
<span class="w">       </span><span class="nv">causing</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">rest</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">fail</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">classic</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">where</span>
<span class="w">       </span><span class="nv">this</span><span class="w"> </span><span class="nv">gives</span><span class="w"> </span><span class="nv">problems</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">trying</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">comments</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">programs</span><span class="na">.</span><span class="w"> </span><span class="nv">These</span>
<span class="w">       </span><span class="nv">appear</span><span class="w">  </span><span class="nv">between</span><span class="w">  </span><span class="na">/</span><span class="o">*</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="o">*</span><span class="na">/</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comment</span><span class="o">,</span><span class="w"> </span><span class="nv">individual</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">/</span>
<span class="w">       </span><span class="nv">characters</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">appear</span><span class="na">.</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span><span class="nv">attempt</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">comments</span><span class="w"> </span><span class="nv">by</span><span class="w">  </span><span class="nv">applying</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">pattern</span>

<span class="w">         </span><span class="na">/\</span><span class="o">*</span><span class="na">.</span><span class="o">*</span><span class="na">\</span><span class="o">*</span><span class="na">/</span>

<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span>

<span class="w">         </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="o">*</span><span class="na">/</span><span class="w">  </span><span class="nv">not</span><span class="w"> </span><span class="nv">comment</span><span class="w">  </span><span class="na">/</span><span class="o">*</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="o">*</span><span class="na">/</span>

<span class="w">       </span><span class="nv">fails</span><span class="o">,</span><span class="w">  </span><span class="nv">because</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">owing</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">greediness</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="na">.</span><span class="o">*</span><span class="w">  </span><span class="nv">item</span><span class="na">.</span>

<span class="w">       </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">question</span><span class="w"> </span><span class="nv">mark</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w">  </span><span class="nv">ceases</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">be</span><span class="w"> </span><span class="nv">greedy</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">minimum</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="nv">possible</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span>

<span class="w">         </span><span class="na">/\</span><span class="o">*</span><span class="na">.</span><span class="o">*?</span><span class="na">\</span><span class="o">*</span><span class="na">/</span>

<span class="w">       </span><span class="nv">does</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">thing</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">comments</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">meaning</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">various</span>
<span class="w">       </span><span class="nv">quantifiers</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">otherwise</span><span class="w">  </span><span class="nv">changed</span><span class="o">,</span><span class="w">  </span><span class="nv">just</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">preferred</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">matches</span><span class="na">.</span><span class="w">  </span><span class="nv">Do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">confuse</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">question</span><span class="w"> </span><span class="nv">mark</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">its</span><span class="w">  </span><span class="nv">use</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">quantifier</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">own</span><span class="w"> </span><span class="nv">right</span><span class="na">.</span><span class="w"> </span><span class="nv">Because</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">uses</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">sometimes</span>
<span class="w">       </span><span class="nv">appear</span><span class="w"> </span><span class="nv">doubled</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span>

<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="o">??</span><span class="na">\</span><span class="nv">d</span>

<span class="w">       </span><span class="nv">which</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">preference</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">only</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">rest</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matches</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_UNGREEDY</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="p">(</span><span class="nv">an</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">available</span><span class="w"> </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">Perl</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">quantifiers</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">greedy</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w">  </span><span class="nv">individual</span><span class="w">  </span><span class="nv">ones</span>
<span class="w">       </span><span class="nv">can</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">made</span><span class="w">  </span><span class="nv">greedy</span><span class="w">  </span><span class="nv">by</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">question</span><span class="w"> </span><span class="nv">mark</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">other</span>
<span class="w">       </span><span class="nv">words</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">inverts</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">behaviour</span><span class="na">.</span>

<span class="w">       </span><span class="nv">When</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">parenthesized</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">quantified</span><span class="w">  </span><span class="nv">with</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">minimum</span><span class="w">  </span><span class="nv">repeat</span>
<span class="w">       </span><span class="nv">count</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">limited</span><span class="w"> </span><span class="nv">maximum</span><span class="o">,</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">required</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">compiled</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">proportion</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">size</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">minimum</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">maximum</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="na">.</span><span class="o">*</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="na">.</span><span class="kt">{</span><span class="m">0</span><span class="o">,</span><span class="kt">}</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_DOTALL</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="p">(</span><span class="nv">equiv</span><span class="o">-</span>
<span class="w">       </span><span class="nv">alent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Perl</span><span class="s1">'s /s) is set, thus allowing the dot  to  match  newlines,</span>
<span class="s1">       the  pattern  is  implicitly anchored, because whatever follows will be</span>
<span class="s1">       tried against every character position in the subject string, so  there</span>
<span class="s1">       is  no  point  in  retrying the overall match at any position after the</span>
<span class="s1">       first. PCRE normally treats such a pattern as though it  were  preceded</span>
<span class="s1">       by \A.</span>

<span class="s1">       In  cases  where  it  is known that the subject string contains no new-</span>
<span class="s1">       lines, it is worth setting PCRE_DOTALL in order to  obtain  this  opti-</span>
<span class="s1">       mization, or alternatively using ^ to indicate anchoring explicitly.</span>

<span class="s1">       However,  there  are  some cases where the optimization cannot be used.</span>
<span class="s1">       When .*  is inside capturing parentheses that are the subject of a back</span>
<span class="s1">       reference elsewhere in the pattern, a match at the start may fail where</span>
<span class="s1">       a later one succeeds. Consider, for example:</span>

<span class="s1">         (.*)abc\1</span>

<span class="s1">       If the subject is "xyz123abc123" the match point is the fourth  charac-</span>
<span class="s1">       ter. For this reason, such a pattern is not implicitly anchored.</span>

<span class="s1">       Another  case where implicit anchoring is not applied is when the lead-</span>
<span class="s1">       ing .* is inside an atomic group. Once again, a match at the start  may</span>
<span class="s1">       fail where a later one succeeds. Consider this pattern:</span>

<span class="s1">         (?&gt;.*?a)b</span>

<span class="s1">       It  matches "ab" in the subject "aab". The use of the backtracking con-</span>
<span class="s1">       trol verbs (*PRUNE) and (*SKIP) also disable this optimization.</span>

<span class="s1">       When a capturing subpattern is repeated, the value captured is the sub-</span>
<span class="s1">       string that matched the final iteration. For example, after</span>

<span class="s1">         (tweedle[dume]{3}\s*)+</span>

<span class="s1">       has matched "tweedledum tweedledee" the value of the captured substring</span>
<span class="s1">       is "tweedledee". However, if there are  nested  capturing  subpatterns,</span>
<span class="s1">       the  corresponding captured values may have been set in previous itera-</span>
<span class="s1">       tions. For example, after</span>

<span class="s1">         /(a|(b))+/</span>

<span class="s1">       matches "aba" the value of the second captured substring is "b".</span>

<span class="s1">ATOMIC GROUPING AND POSSESSIVE QUANTIFIERS</span>

<span class="s1">       With both maximizing ("greedy") and minimizing ("ungreedy"  or  "lazy")</span>
<span class="s1">       repetition,  failure  of what follows normally causes the repeated item</span>
<span class="s1">       to be re-evaluated to see if a different number of repeats  allows  the</span>
<span class="s1">       rest  of  the pattern to match. Sometimes it is useful to prevent this,</span>
<span class="s1">       either to change the nature of the match, or to cause it  fail  earlier</span>
<span class="s1">       than  it otherwise might, when the author of the pattern knows there is</span>
<span class="s1">       no point in carrying on.</span>

<span class="s1">       Consider, for example, the pattern \d+foo when applied to  the  subject</span>
<span class="s1">       line</span>

<span class="s1">         123456bar</span>

<span class="s1">       After matching all 6 digits and then failing to match "foo", the normal</span>
<span class="s1">       action of the matcher is to try again with only 5 digits  matching  the</span>
<span class="s1">       \d+  item,  and  then  with  4,  and  so on, before ultimately failing.</span>
<span class="s1">       "Atomic grouping" (a term taken from Jeffrey  Friedl'</span><span class="nv">s</span><span class="w">  </span><span class="nv">book</span><span class="p">)</span><span class="w">  </span><span class="nv">provides</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">means</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">specifying</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">once</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">matched</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span>
<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">re</span><span class="o">-</span><span class="nv">evaluated</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">way</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">grouping</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">matcher</span><span class="w">  </span><span class="nv">gives</span>
<span class="w">       </span><span class="nv">up</span><span class="w">  </span><span class="nv">immediately</span><span class="w">  </span><span class="nv">on</span><span class="w"> </span><span class="nv">failing</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">time</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">notation</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">kind</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">parenthesis</span><span class="o">,</span><span class="w"> </span><span class="nv">starting</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="p">(</span><span class="o">?&gt;</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&gt;</span><span class="na">\</span><span class="nv">d</span><span class="o">+</span><span class="p">)</span><span class="nv">foo</span>

<span class="w">       </span><span class="nv">This</span><span class="w"> </span><span class="nv">kind</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">parenthesis</span><span class="w"> </span><span class="s2">"locks up"</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">part</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">con</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tains</span><span class="w">  </span><span class="nv">once</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">has</span><span class="w"> </span><span class="nv">matched</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">prevented</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">backtracking</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">it</span><span class="na">.</span><span class="w"> </span><span class="nv">Backtracking</span><span class="w"> </span><span class="nv">past</span><span class="w"> </span><span class="nv">it</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">previous</span>
<span class="w">       </span><span class="nv">items</span><span class="o">,</span><span class="w"> </span><span class="nv">however</span><span class="o">,</span><span class="w"> </span><span class="nv">works</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">normal</span><span class="na">.</span>

<span class="w">       </span><span class="nv">An</span><span class="w">  </span><span class="nv">alternative</span><span class="w">  </span><span class="nv">description</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">matches</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">an</span><span class="w">  </span><span class="nv">identical</span><span class="w">  </span><span class="nv">standalone</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">would</span>
<span class="w">       </span><span class="nv">match</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">anchored</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">current</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Atomic</span><span class="w"> </span><span class="nv">grouping</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpatterns</span><span class="na">.</span><span class="w"> </span><span class="nv">Simple</span><span class="w"> </span><span class="nv">cases</span>
<span class="w">       </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">above</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">thought</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">maximizing</span><span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">must</span><span class="w">  </span><span class="nv">swallow</span><span class="w">  </span><span class="nv">everything</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="o">,</span><span class="w"> </span><span class="nv">while</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="o">+</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="nv">d</span><span class="o">+?</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">pre</span><span class="o">-</span>
<span class="w">       </span><span class="nv">pared</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">adjust</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">order</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">make</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">rest</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">match</span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="o">?&gt;</span><span class="na">\</span><span class="nv">d</span><span class="o">+</span><span class="p">)</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">digits</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Atomic</span><span class="w"> </span><span class="nv">groups</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">general</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">course</span><span class="w"> </span><span class="nv">contain</span><span class="w"> </span><span class="nv">arbitrarily</span><span class="w">  </span><span class="nv">complicated</span>
<span class="w">       </span><span class="nv">subpatterns</span><span class="o">,</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">nested</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">repeated</span><span class="w"> </span><span class="nv">item</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">above</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">simpler</span><span class="w">  </span><span class="nv">notation</span><span class="o">,</span><span class="w">  </span><span class="nv">called</span><span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="s2">"possessive quantifier"</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span>
<span class="w">       </span><span class="nv">consists</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">additional</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">character</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">quantifier</span><span class="na">.</span><span class="w">  </span><span class="nv">Using</span>
<span class="w">       </span><span class="nv">this</span><span class="w"> </span><span class="nv">notation</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">rewritten</span><span class="w"> </span><span class="nv">as</span>

<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="o">++</span><span class="nv">foo</span>

<span class="w">       </span><span class="nv">Note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">possessive</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">group</span><span class="o">,</span><span class="w"> </span><span class="nv">for</span>
<span class="w">       </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="nv">abc</span><span class="o">|</span><span class="nv">xyz</span><span class="p">)</span><span class="kt">{</span><span class="m">2</span><span class="o">,</span><span class="m">3</span><span class="kt">}</span><span class="o">+</span>

<span class="w">       </span><span class="nv">Possessive</span><span class="w">  </span><span class="nv">quantifiers</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">always</span><span class="w">  </span><span class="nv">greedy</span><span class="sr">;</span><span class="w">  </span><span class="nv">the</span><span class="w">   </span><span class="nv">setting</span><span class="w">   </span><span class="nv">of</span><span class="w">   </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_UNGREEDY</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ignored</span><span class="na">.</span><span class="w"> </span><span class="nv">They</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">convenient</span><span class="w"> </span><span class="nv">notation</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">simpler</span><span class="w"> </span><span class="nv">forms</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">group</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">difference</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">meaning</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">possessive</span><span class="w">  </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">group</span><span class="o">,</span>
<span class="w">       </span><span class="nv">though</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">performance</span><span class="w">  </span><span class="nv">difference</span><span class="sr">;</span><span class="w">  </span><span class="nv">possessive</span><span class="w">  </span><span class="nv">quantifiers</span>
<span class="w">       </span><span class="nv">should</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">slightly</span><span class="w"> </span><span class="nv">faster</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">possessive</span><span class="w">  </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">extension</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="m">5.8</span><span class="w"> </span><span class="nv">syn</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tax</span><span class="na">.</span><span class="w">  </span><span class="nv">Jeffrey</span><span class="w"> </span><span class="nv">Friedl</span><span class="w"> </span><span class="nv">originated</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">idea</span><span class="w"> </span><span class="p">(</span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">first</span>
<span class="w">       </span><span class="nv">edition</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">his</span><span class="w"> </span><span class="nv">book</span><span class="na">.</span><span class="w"> </span><span class="nv">Mike</span><span class="w"> </span><span class="nv">McCloskey</span><span class="w"> </span><span class="nv">liked</span><span class="w"> </span><span class="nv">it</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">implemented</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">he</span>
<span class="w">       </span><span class="nv">built</span><span class="w"> </span><span class="nv">Sun</span><span class="s1">'s Java package, and PCRE copied it from there. It  ultimately</span>
<span class="s1">       found its way into Perl at release 5.10.</span>

<span class="s1">       PCRE has an optimization that automatically "possessifies" certain sim-</span>
<span class="s1">       ple pattern constructs. For example, the sequence  A+B  is  treated  as</span>
<span class="s1">       A++B  because  there is no point in backtracking into a sequence of A'</span><span class="nv">s</span>
<span class="w">       </span><span class="nv">when</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">follow</span><span class="na">.</span>

<span class="w">       </span><span class="nv">When</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">unlimited</span><span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="nv">inside</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">subpattern</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">can</span><span class="w">  </span><span class="nv">itself</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">repeated</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">unlimited</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">times</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">atomic</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">avoid</span><span class="w"> </span><span class="nv">some</span><span class="w">  </span><span class="nv">failing</span><span class="w">  </span><span class="nv">matches</span><span class="w">  </span><span class="nv">taking</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">very</span><span class="w"> </span><span class="nv">long</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">indeed</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">pattern</span>

<span class="w">         </span><span class="p">(</span><span class="na">\</span><span class="nv">D</span><span class="o">+|&lt;</span><span class="na">\</span><span class="nv">d</span><span class="o">+&gt;</span><span class="p">)</span><span class="o">*</span><span class="sr">[</span><span class="o">!?</span><span class="sr">]</span>

<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">unlimited</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">substrings</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="nv">consist</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span>
<span class="w">       </span><span class="nv">digits</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">enclosed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="o">&lt;&gt;,</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">either</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">or</span><span class="w">  </span><span class="o">?</span><span class="na">.</span><span class="w">  </span><span class="nv">When</span><span class="w">  </span><span class="nv">it</span>
<span class="w">       </span><span class="nv">matches</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">runs</span><span class="w"> </span><span class="nv">quickly</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">applied</span><span class="w"> </span><span class="nv">to</span>

<span class="w">         </span><span class="nv">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span>

<span class="w">       </span><span class="nv">it</span><span class="w">  </span><span class="nv">takes</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">long</span><span class="w">  </span><span class="nv">time</span><span class="w">  </span><span class="nv">before</span><span class="w"> </span><span class="nv">reporting</span><span class="w"> </span><span class="nv">failure</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">string</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">divided</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="na">\</span><span class="nv">D</span><span class="o">+</span><span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">external</span>
<span class="w">       </span><span class="o">*</span><span class="w">  </span><span class="nv">repeat</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">large</span><span class="w">  </span><span class="nv">number</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">ways</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">tried</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">The</span>
<span class="w">       </span><span class="nv">example</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="sr">[</span><span class="o">!?</span><span class="sr">]</span><span class="w"> </span><span class="nv">rather</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">end</span><span class="o">,</span><span class="w">  </span><span class="nv">because</span>
<span class="w">       </span><span class="nv">both</span><span class="w">  </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">optimization</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">allows</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">fast</span><span class="w"> </span><span class="nv">failure</span>
<span class="w">       </span><span class="nv">when</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">single</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">They</span><span class="w"> </span><span class="nv">remember</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">last</span><span class="w"> </span><span class="nv">single</span><span class="w">  </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ter</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">required</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">match</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">fail</span><span class="w"> </span><span class="nv">early</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">present</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="na">.</span><span class="p">)</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">changed</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">that</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">uses</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">atomic</span>
<span class="w">       </span><span class="nv">group</span><span class="o">,</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">this</span><span class="bp">:</span>

<span class="w">         </span><span class="p">((</span><span class="o">?&gt;</span><span class="na">\</span><span class="nv">D</span><span class="o">+</span><span class="p">)</span><span class="o">|&lt;</span><span class="na">\</span><span class="nv">d</span><span class="o">+&gt;</span><span class="p">)</span><span class="o">*</span><span class="sr">[</span><span class="o">!?</span><span class="sr">]</span>

<span class="w">       </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">digits</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">broken</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">failure</span><span class="w"> </span><span class="nv">happens</span><span class="w"> </span><span class="nv">quickly</span><span class="na">.</span>

<span class="nv">BACK</span><span class="w"> </span><span class="nv">REFERENCES</span>

<span class="w">       </span><span class="nv">Outside</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">digit</span><span class="w"> </span><span class="nv">greater</span><span class="w"> </span><span class="nv">than</span>
<span class="w">       </span><span class="m">0</span><span class="w"> </span><span class="p">(</span><span class="nv">and</span><span class="w"> </span><span class="nv">possibly</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">digits</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">sub</span><span class="o">-</span>
<span class="w">       </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">earlier</span><span class="w">  </span><span class="p">(</span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">left</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">there</span>
<span class="w">       </span><span class="nv">have</span><span class="w"> </span><span class="nv">been</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">previous</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">parentheses</span><span class="na">.</span>

<span class="w">       </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">10</span><span class="o">,</span>
<span class="w">       </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">always</span><span class="w">  </span><span class="nv">taken</span><span class="w">  </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">if</span>
<span class="w">       </span><span class="nv">there</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">entire</span><span class="w">  </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="na">.</span><span class="w">  </span><span class="nv">In</span><span class="w">  </span><span class="nv">other</span><span class="w"> </span><span class="nv">words</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">referenced</span><span class="w"> </span><span class="nv">need</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">10</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="s2">"forward  back</span>
<span class="s2">       reference"</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">type</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">sense</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">repetition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">involved</span>
<span class="w">       </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">participated</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">an</span><span class="w">  </span><span class="nv">earlier</span><span class="w">  </span><span class="nv">itera</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tion</span><span class="na">.</span>

<span class="w">       </span><span class="nv">It</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">possible</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">numerical</span><span class="w"> </span><span class="s2">"forward back reference"</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">whose</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">or</span><span class="w">  </span><span class="nv">more</span><span class="w">  </span><span class="nv">using</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">syntax</span><span class="w">  </span><span class="nv">because</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">sequence</span><span class="w">  </span><span class="nv">such</span><span class="w">  </span><span class="nv">as</span><span class="w">  </span><span class="na">\</span><span class="m">50</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">interpreted</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">defined</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">octal</span><span class="na">.</span>
<span class="w">       </span><span class="nv">See</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subsection</span><span class="w"> </span><span class="nv">entitled</span><span class="w"> </span><span class="s2">"Non-printing characters"</span><span class="w"> </span><span class="nv">above</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">further</span>
<span class="w">       </span><span class="nv">details</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">handling</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">following</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">backslash</span><span class="na">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span>
<span class="w">       </span><span class="nv">such</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">any</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="nv">below</span><span class="p">)</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Another</span><span class="w">  </span><span class="nv">way</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">avoiding</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">ambiguity</span><span class="w"> </span><span class="nv">inherent</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">digits</span>
<span class="w">       </span><span class="nv">following</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">backslash</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="w">  </span><span class="nv">escape</span><span class="w">  </span><span class="nv">sequence</span><span class="na">.</span><span class="w">  </span><span class="nv">This</span><span class="w">  </span><span class="nv">escape</span>
<span class="w">       </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">unsigned</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">optionally</span>
<span class="w">       </span><span class="nv">enclosed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">braces</span><span class="na">.</span><span class="w"> </span><span class="nv">These</span><span class="w"> </span><span class="nv">examples</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">identical</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="nv">ring</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="m">1</span>
<span class="w">         </span><span class="p">(</span><span class="nv">ring</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">g1</span>
<span class="w">         </span><span class="p">(</span><span class="nv">ring</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="m">1</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">An</span><span class="w"> </span><span class="nv">unsigned</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">specifies</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">absolute</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">ambigu</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ity</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">present</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">older</span><span class="w"> </span><span class="nv">syntax</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">useful</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">literal</span>
<span class="w">       </span><span class="nv">digits</span><span class="w"> </span><span class="nv">follow</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">reference</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">reference</span><span class="na">.</span>
<span class="w">       </span><span class="nv">Consider</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="nv">abc</span><span class="p">(</span><span class="nv">def</span><span class="p">)</span><span class="nv">ghi</span><span class="p">)</span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="o">-</span><span class="m">1</span><span class="kt">}</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="o">-</span><span class="m">1</span><span class="kt">}</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">recently</span><span class="w"> </span><span class="nv">started</span><span class="w"> </span><span class="nv">captur</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ing</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="na">\</span><span class="m">2</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">exam</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ple</span><span class="na">.</span><span class="w">   </span><span class="nv">Similarly</span><span class="o">,</span><span class="w"> </span><span class="na">\</span><span class="nv">g</span><span class="kt">{</span><span class="o">-</span><span class="m">2</span><span class="kt">}</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">equivalent</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="na">\</span><span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">relative</span>
<span class="w">       </span><span class="nv">references</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">helpful</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">long</span><span class="w"> </span><span class="nv">patterns</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">in</span><span class="w">  </span><span class="nv">patterns</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">are</span><span class="w">  </span><span class="nv">created</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">joining</span><span class="w">  </span><span class="nv">together</span><span class="w">  </span><span class="nv">fragments</span><span class="w">  </span><span class="nv">that</span><span class="w"> </span><span class="nv">contain</span><span class="w"> </span><span class="nv">references</span>
<span class="w">       </span><span class="nv">within</span><span class="w"> </span><span class="nv">themselves</span><span class="na">.</span>

<span class="w">       </span><span class="nv">A</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">whatever</span><span class="w"> </span><span class="nv">actually</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">capturing</span><span class="w">  </span><span class="nv">sub</span><span class="o">-</span>
<span class="w">       </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">current</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">string</span><span class="o">,</span><span class="w"> </span><span class="nv">rather</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">anything</span><span class="w"> </span><span class="nv">matching</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">itself</span><span class="w"> </span><span class="p">(</span><span class="nv">see</span><span class="w"> </span><span class="s2">"Subpatterns as subroutines"</span><span class="w"> </span><span class="nv">below</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">way</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">doing</span><span class="w"> </span><span class="nv">that</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span>

<span class="w">         </span><span class="p">(</span><span class="nv">sens</span><span class="o">|</span><span class="nv">respons</span><span class="p">)</span><span class="nv">e</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="na">\</span><span class="m">1</span><span class="nv">ibility</span>

<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="s2">"sense and sensibility"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"response and responsibility"</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span>
<span class="w">       </span><span class="nv">not</span><span class="w"> </span><span class="s2">"sense and responsibility"</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">caseful</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">force</span><span class="w"> </span><span class="nv">at</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">time</span><span class="w">  </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">reference</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">letters</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">relevant</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">exam</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ple</span><span class="o">,</span>

<span class="w">         </span><span class="p">((</span><span class="o">?</span><span class="nv">i</span><span class="p">)</span><span class="nv">rah</span><span class="p">)</span><span class="na">\</span><span class="nv">s</span><span class="o">+</span><span class="na">\</span><span class="m">1</span>

<span class="w">       </span><span class="nv">matches</span><span class="w"> </span><span class="s2">"rah rah"</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"RAH RAH"</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="s2">"RAH  rah"</span><span class="o">,</span><span class="w">  </span><span class="nv">even</span><span class="w">  </span><span class="nv">though</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">original</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">caselessly</span><span class="na">.</span>

<span class="w">       </span><span class="nv">There</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">several</span><span class="w">  </span><span class="nv">different</span><span class="w"> </span><span class="nv">ways</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">writing</span><span class="w"> </span><span class="nv">back</span><span class="w"> </span><span class="nv">references</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">named</span>
<span class="w">       </span><span class="nv">subpatterns</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="na">.</span><span class="nv">NET</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="na">\</span><span class="nv">k</span><span class="kt">{</span><span class="nv">name</span><span class="kt">}</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">syntax</span><span class="w">  </span><span class="na">\</span><span class="nv">k</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="w">  </span><span class="nv">or</span>
<span class="w">       </span><span class="na">\</span><span class="nv">k</span><span class="s1">'name'</span><span class="w">  </span><span class="nv">are</span><span class="w"> </span><span class="nv">supported</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Python</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="nv">P</span><span class="o">=</span><span class="nv">name</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="m">5.10</span><span class="s1">'s</span>
<span class="s1">       unified back reference syntax, in which \g can be used for both numeric</span>
<span class="s1">       and  named  references,  is  also supported. We could rewrite the above</span>
<span class="s1">       example in any of the following ways:</span>

<span class="s1">         (?&lt;p1&gt;(?i)rah)\s+\k&lt;p1&gt;</span>
<span class="s1">         (?'</span><span class="nv">p1</span><span class="s1">'(?i)rah)\s+\k{p1}</span>
<span class="s1">         (?P&lt;p1&gt;(?i)rah)\s+(?P=p1)</span>
<span class="s1">         (?&lt;p1&gt;(?i)rah)\s+\g{p1}</span>

<span class="s1">       A subpattern that is referenced by  name  may  appear  in  the  pattern</span>
<span class="s1">       before or after the reference.</span>

<span class="s1">       There  may be more than one back reference to the same subpattern. If a</span>
<span class="s1">       subpattern has not actually been used in a particular match,  any  back</span>
<span class="s1">       references to it always fail by default. For example, the pattern</span>

<span class="s1">         (a|(bc))\2</span>

<span class="s1">       always  fails  if  it starts to match "a" rather than "bc". However, if</span>
<span class="s1">       the PCRE_JAVASCRIPT_COMPAT option is set at compile time, a back refer-</span>
<span class="s1">       ence to an unset value matches an empty string.</span>

<span class="s1">       Because  there may be many capturing parentheses in a pattern, all dig-</span>
<span class="s1">       its following a backslash are taken as part of a potential back  refer-</span>
<span class="s1">       ence  number.   If  the  pattern continues with a digit character, some</span>
<span class="s1">       delimiter must  be  used  to  terminate  the  back  reference.  If  the</span>
<span class="s1">       PCRE_EXTENDED  option  is  set, this can be white space. Otherwise, the</span>
<span class="s1">       \g{ syntax or an empty comment (see "Comments" below) can be used.</span>

<span class="s1">   Recursive back references</span>

<span class="s1">       A back reference that occurs inside the parentheses to which it  refers</span>
<span class="s1">       fails  when  the subpattern is first used, so, for example, (a\1) never</span>
<span class="s1">       matches.  However, such references can be useful inside  repeated  sub-</span>
<span class="s1">       patterns. For example, the pattern</span>

<span class="s1">         (a|b\1)+</span>

<span class="s1">       matches any number of "a"s and also "aba", "ababbaa" etc. At each iter-</span>
<span class="s1">       ation of the subpattern,  the  back  reference  matches  the  character</span>
<span class="s1">       string  corresponding  to  the previous iteration. In order for this to</span>
<span class="s1">       work, the pattern must be such that the first iteration does  not  need</span>
<span class="s1">       to  match the back reference. This can be done using alternation, as in</span>
<span class="s1">       the example above, or by a quantifier with a minimum of zero.</span>

<span class="s1">       Back references of this type cause the group that they reference to  be</span>
<span class="s1">       treated  as  an atomic group.  Once the whole group has been matched, a</span>
<span class="s1">       subsequent matching failure cannot cause backtracking into  the  middle</span>
<span class="s1">       of the group.</span>

<span class="s1">ASSERTIONS</span>

<span class="s1">       An  assertion  is  a  test on the characters following or preceding the</span>
<span class="s1">       current matching point that does not actually consume  any  characters.</span>
<span class="s1">       The  simple  assertions  coded  as  \b, \B, \A, \G, \Z, \z, ^ and $ are</span>
<span class="s1">       described above.</span>

<span class="s1">       More complicated assertions are coded as  subpatterns.  There  are  two</span>
<span class="s1">       kinds:  those  that  look  ahead of the current position in the subject</span>
<span class="s1">       string, and those that look  behind  it.  An  assertion  subpattern  is</span>
<span class="s1">       matched  in  the  normal way, except that it does not cause the current</span>
<span class="s1">       matching position to be changed.</span>

<span class="s1">       Assertion subpatterns are not capturing subpatterns. If such an  asser-</span>
<span class="s1">       tion  contains  capturing  subpatterns within it, these are counted for</span>
<span class="s1">       the purposes of numbering the capturing subpatterns in the  whole  pat-</span>
<span class="s1">       tern.  However,  substring  capturing  is carried out only for positive</span>
<span class="s1">       assertions. (Perl sometimes, but not always, does do capturing in nega-</span>
<span class="s1">       tive assertions.)</span>

<span class="s1">       For  compatibility  with  Perl,  assertion subpatterns may be repeated;</span>
<span class="s1">       though it makes no sense to assert the same thing  several  times,  the</span>
<span class="s1">       side  effect  of  capturing  parentheses may occasionally be useful. In</span>
<span class="s1">       practice, there only three cases:</span>

<span class="s1">       (1) If the quantifier is {0}, the  assertion  is  never  obeyed  during</span>
<span class="s1">       matching.   However,  it  may  contain internal capturing parenthesized</span>
<span class="s1">       groups that are called from elsewhere via the subroutine mechanism.</span>

<span class="s1">       (2) If quantifier is {0,n} where n is greater than zero, it is  treated</span>
<span class="s1">       as  if  it  were  {0,1}.  At run time, the rest of the pattern match is</span>
<span class="s1">       tried with and without the assertion, the order depending on the greed-</span>
<span class="s1">       iness of the quantifier.</span>

<span class="s1">       (3)  If  the minimum repetition is greater than zero, the quantifier is</span>
<span class="s1">       ignored.  The assertion is obeyed just  once  when  encountered  during</span>
<span class="s1">       matching.</span>

<span class="s1">   Lookahead assertions</span>

<span class="s1">       Lookahead assertions start with (?= for positive assertions and (?! for</span>
<span class="s1">       negative assertions. For example,</span>

<span class="s1">         \w+(?=;)</span>

<span class="s1">       matches a word followed by a semicolon, but does not include the  semi-</span>
<span class="s1">       colon in the match, and</span>

<span class="s1">         foo(?!bar)</span>

<span class="s1">       matches  any  occurrence  of  "foo" that is not followed by "bar". Note</span>
<span class="s1">       that the apparently similar pattern</span>

<span class="s1">         (?!foo)bar</span>

<span class="s1">       does not find an occurrence of "bar"  that  is  preceded  by  something</span>
<span class="s1">       other  than "foo"; it finds any occurrence of "bar" whatsoever, because</span>
<span class="s1">       the assertion (?!foo) is always true when the next three characters are</span>
<span class="s1">       "bar". A lookbehind assertion is needed to achieve the other effect.</span>

<span class="s1">       If you want to force a matching failure at some point in a pattern, the</span>
<span class="s1">       most convenient way to do it is  with  (?!)  because  an  empty  string</span>
<span class="s1">       always  matches, so an assertion that requires there not to be an empty</span>
<span class="s1">       string must always fail.  The backtracking control verb (*FAIL) or (*F)</span>
<span class="s1">       is a synonym for (?!).</span>

<span class="s1">   Lookbehind assertions</span>

<span class="s1">       Lookbehind  assertions start with (?&lt;= for positive assertions and (?&lt;!</span>
<span class="s1">       for negative assertions. For example,</span>

<span class="s1">         (?&lt;!foo)bar</span>

<span class="s1">       does find an occurrence of "bar" that is not  preceded  by  "foo".  The</span>
<span class="s1">       contents  of  a  lookbehind  assertion are restricted such that all the</span>
<span class="s1">       strings it matches must have a fixed length. However, if there are sev-</span>
<span class="s1">       eral  top-level  alternatives,  they  do  not all have to have the same</span>
<span class="s1">       fixed length. Thus</span>

<span class="s1">         (?&lt;=bullock|donkey)</span>

<span class="s1">       is permitted, but</span>

<span class="s1">         (?&lt;!dogs?|cats?)</span>

<span class="s1">       causes an error at compile time. Branches that match  different  length</span>
<span class="s1">       strings  are permitted only at the top level of a lookbehind assertion.</span>
<span class="s1">       This is an extension compared with Perl, which requires all branches to</span>
<span class="s1">       match the same length of string. An assertion such as</span>

<span class="s1">         (?&lt;=ab(c|de))</span>

<span class="s1">       is  not  permitted,  because  its single top-level branch can match two</span>
<span class="s1">       different lengths, but it is acceptable to PCRE if rewritten to use two</span>
<span class="s1">       top-level branches:</span>

<span class="s1">         (?&lt;=abc|abde)</span>

<span class="s1">       In  some  cases, the escape sequence \K (see above) can be used instead</span>
<span class="s1">       of a lookbehind assertion to get round the fixed-length restriction.</span>

<span class="s1">       The implementation of lookbehind assertions is, for  each  alternative,</span>
<span class="s1">       to  temporarily  move the current position back by the fixed length and</span>
<span class="s1">       then try to match. If there are insufficient characters before the cur-</span>
<span class="s1">       rent position, the assertion fails.</span>

<span class="s1">       In  a UTF mode, PCRE does not allow the \C escape (which matches a sin-</span>
<span class="s1">       gle data unit even in a UTF mode) to appear in  lookbehind  assertions,</span>
<span class="s1">       because  it  makes it impossible to calculate the length of the lookbe-</span>
<span class="s1">       hind. The \X and \R escapes, which can match different numbers of  data</span>
<span class="s1">       units, are also not permitted.</span>

<span class="s1">       "Subroutine"  calls  (see below) such as (?2) or (?&amp;X) are permitted in</span>
<span class="s1">       lookbehinds, as long as the subpattern matches a  fixed-length  string.</span>
<span class="s1">       Recursion, however, is not supported.</span>

<span class="s1">       Possessive  quantifiers  can  be  used  in  conjunction with lookbehind</span>
<span class="s1">       assertions to specify efficient matching of fixed-length strings at the</span>
<span class="s1">       end of subject strings. Consider a simple pattern such as</span>

<span class="s1">         abcd$</span>

<span class="s1">       when  applied  to  a  long string that does not match. Because matching</span>
<span class="s1">       proceeds from left to right, PCRE will look for each "a" in the subject</span>
<span class="s1">       and  then  see  if what follows matches the rest of the pattern. If the</span>
<span class="s1">       pattern is specified as</span>

<span class="s1">         ^.*abcd$</span>

<span class="s1">       the initial .* matches the entire string at first, but when this  fails</span>
<span class="s1">       (because there is no following "a"), it backtracks to match all but the</span>
<span class="s1">       last character, then all but the last two characters, and so  on.  Once</span>
<span class="s1">       again  the search for "a" covers the entire string, from right to left,</span>
<span class="s1">       so we are no better off. However, if the pattern is written as</span>

<span class="s1">         ^.*+(?&lt;=abcd)</span>

<span class="s1">       there can be no backtracking for the .*+ item; it can  match  only  the</span>
<span class="s1">       entire  string.  The subsequent lookbehind assertion does a single test</span>
<span class="s1">       on the last four characters. If it fails, the match fails  immediately.</span>
<span class="s1">       For  long  strings, this approach makes a significant difference to the</span>
<span class="s1">       processing time.</span>

<span class="s1">   Using multiple assertions</span>

<span class="s1">       Several assertions (of any sort) may occur in succession. For example,</span>

<span class="s1">         (?&lt;=\d{3})(?&lt;!999)foo</span>

<span class="s1">       matches "foo" preceded by three digits that are not "999". Notice  that</span>
<span class="s1">       each  of  the  assertions is applied independently at the same point in</span>
<span class="s1">       the subject string. First there is a  check  that  the  previous  three</span>
<span class="s1">       characters  are  all  digits,  and  then there is a check that the same</span>
<span class="s1">       three characters are not "999".  This pattern does not match "foo" pre-</span>
<span class="s1">       ceded  by  six  characters,  the first of which are digits and the last</span>
<span class="s1">       three of which are not "999". For example, it  doesn'</span><span class="nv">t</span><span class="w">  </span><span class="nv">match</span><span class="w">  </span><span class="s2">"123abc-</span>
<span class="s2">       foo"</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&lt;=</span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">3</span><span class="kt">}</span><span class="na">...</span><span class="p">)(</span><span class="o">?&lt;!</span><span class="m">999</span><span class="p">)</span><span class="nv">foo</span>

<span class="w">       </span><span class="nv">This</span><span class="w">  </span><span class="nv">time</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">first</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">looks</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">preceding</span><span class="w"> </span><span class="nv">six</span><span class="w"> </span><span class="nv">characters</span><span class="o">,</span>
<span class="w">       </span><span class="nv">checking</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">digits</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">assertion</span>
<span class="w">       </span><span class="nv">checks</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">preceding</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="s2">"999"</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Assertions</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">nested</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">combination</span><span class="na">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span><span class="nv">example</span><span class="o">,</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&lt;=</span><span class="p">(</span><span class="o">?&lt;!</span><span class="nv">foo</span><span class="p">)</span><span class="nv">bar</span><span class="p">)</span><span class="nv">baz</span>

<span class="w">       </span><span class="nv">matches</span><span class="w">  </span><span class="nv">an</span><span class="w"> </span><span class="nv">occurrence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="s2">"baz"</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">preceded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">turn</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">preceded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="s2">"foo"</span><span class="o">,</span><span class="w"> </span><span class="nv">while</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&lt;=</span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">3</span><span class="kt">}</span><span class="p">(</span><span class="o">?!</span><span class="m">999</span><span class="p">)</span><span class="na">...</span><span class="p">)</span><span class="nv">foo</span>

<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">another</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"> </span><span class="nv">preceded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">and</span><span class="w">  </span><span class="nv">any</span>
<span class="w">       </span><span class="nv">three</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="s2">"999"</span><span class="na">.</span>

<span class="nv">CONDITIONAL</span><span class="w"> </span><span class="nv">SUBPATTERNS</span>

<span class="w">       </span><span class="nv">It</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">cause</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">obey</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">con</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ditionally</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">choose</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">subpatterns</span><span class="o">,</span><span class="w">  </span><span class="nv">depending</span>
<span class="w">       </span><span class="nv">on</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">assertion</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">specific</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">already</span><span class="w"> </span><span class="nv">been</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">possible</span><span class="w">  </span><span class="nv">forms</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">conditional</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">are</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">condition</span><span class="p">)</span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="p">)</span>
<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">condition</span><span class="p">)</span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="o">|</span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span><span class="p">)</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">satisfied</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="sr">;</span><span class="w"> </span><span class="nv">otherwise</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span><span class="w"> </span><span class="p">(</span><span class="nv">if</span><span class="w"> </span><span class="nv">present</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">used</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">more</span><span class="w">  </span><span class="nv">than</span><span class="w">  </span><span class="nv">two</span><span class="w">  </span><span class="nv">alterna</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tives</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">compile</span><span class="o">-</span><span class="nv">time</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">occurs</span><span class="na">.</span><span class="w"> </span><span class="nv">Each</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span>
<span class="w">       </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">itself</span><span class="w"> </span><span class="nv">contain</span><span class="w"> </span><span class="nv">nested</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">form</span><span class="o">,</span><span class="w"> </span><span class="nv">includ</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ing</span><span class="w">  </span><span class="nv">conditional</span><span class="w">  </span><span class="nv">subpatterns</span><span class="sr">;</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">restriction</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">two</span><span class="w">  </span><span class="nv">alternatives</span>
<span class="w">       </span><span class="nv">applies</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">fragment</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">example</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">complex</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">A</span><span class="o">|</span><span class="nv">B</span><span class="o">|</span><span class="nv">C</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="nv">D</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="nv">E</span><span class="o">|</span><span class="nv">F</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nv">E</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>

<span class="w">       </span><span class="nv">There</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">four</span><span class="w">  </span><span class="nv">kinds</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">condition</span><span class="bp">:</span><span class="w"> </span><span class="nv">references</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">subpatterns</span><span class="o">,</span><span class="w"> </span><span class="nv">refer</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ences</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">recursion</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pseudo</span><span class="o">-</span><span class="nv">condition</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">DEFINE</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">assertions</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Checking</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">number</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">text</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">consists</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sequence</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">digits</span><span class="o">,</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">pre</span><span class="o">-</span>
<span class="w">       </span><span class="nv">viously</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">one</span><span class="w">  </span><span class="nv">capturing</span><span class="w">  </span><span class="nv">subpattern</span><span class="w">  </span><span class="nv">with</span>
<span class="w">       </span><span class="nv">the</span><span class="w">  </span><span class="nv">same</span><span class="w">  </span><span class="nv">number</span><span class="w">  </span><span class="p">(</span><span class="nv">see</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">earlier</span><span class="w"> </span><span class="nv">section</span><span class="w"> </span><span class="nv">about</span><span class="w"> </span><span class="nv">duplicate</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">       </span><span class="nv">numbers</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span><span class="w"> </span><span class="nv">An</span><span class="w">  </span><span class="nv">alter</span><span class="o">-</span>
<span class="w">       </span><span class="nv">native</span><span class="w">  </span><span class="nv">notation</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">precede</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">plus</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">minus</span><span class="w"> </span><span class="nv">sign</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span>
<span class="w">       </span><span class="nv">this</span><span class="w"> </span><span class="nv">case</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">rather</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="nv">absolute</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">most</span><span class="w">  </span><span class="nv">recently</span><span class="w"> </span><span class="nv">opened</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">referenced</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span>
<span class="w">       </span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">on</span><span class="na">.</span><span class="w"> </span><span class="nv">Inside</span><span class="w"> </span><span class="nv">loops</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">also</span><span class="w">  </span><span class="nv">make</span><span class="w">  </span><span class="nv">sense</span>
<span class="w">       </span><span class="nv">to</span><span class="w"> </span><span class="nv">refer</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">subsequent</span><span class="w"> </span><span class="nv">groups</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">opened</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">referenced</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">+</span><span class="m">1</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">on</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">The</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w">  </span><span class="nv">forms</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">used</span><span class="sr">;</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">provokes</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">compile</span><span class="o">-</span><span class="nv">time</span><span class="w"> </span><span class="nv">error</span><span class="na">.</span><span class="p">)</span>

<span class="w">       </span><span class="nv">Consider</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">following</span><span class="w">  </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">significant</span><span class="w"> </span><span class="nv">white</span>
<span class="w">       </span><span class="nv">space</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">readable</span><span class="w"> </span><span class="p">(</span><span class="nv">assume</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">PCRE_EXTENDED</span><span class="w"> </span><span class="nv">option</span><span class="p">)</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">divide</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">three</span><span class="w"> </span><span class="nv">parts</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">ease</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">discussion</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="w"> </span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="o">?</span><span class="w">    </span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">+</span><span class="w">    </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="na">\</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">first</span><span class="w">  </span><span class="nv">part</span><span class="w">  </span><span class="nv">matches</span><span class="w">  </span><span class="nv">an</span><span class="w"> </span><span class="nv">optional</span><span class="w"> </span><span class="nv">opening</span><span class="w"> </span><span class="nv">parenthesis</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">character</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">present</span><span class="o">,</span><span class="w"> </span><span class="nv">sets</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">captured</span><span class="w"> </span><span class="nv">substring</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">sec</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ond</span><span class="w">  </span><span class="nv">part</span><span class="w">  </span><span class="nv">matches</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">parentheses</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">third</span><span class="w"> </span><span class="nv">part</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">conditional</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">tests</span><span class="w"> </span><span class="nv">whether</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">first</span><span class="w">  </span><span class="nv">set</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">matched</span><span class="na">.</span><span class="w">  </span><span class="nv">If</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">did</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">subject</span>
<span class="w">       </span><span class="nv">started</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">opening</span><span class="w"> </span><span class="nv">parenthesis</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">so</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">yes</span><span class="o">-</span><span class="nv">pattern</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">executed</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">parenthesis</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">required</span><span class="na">.</span><span class="w"> </span><span class="nv">Other</span><span class="o">-</span>
<span class="w">       </span><span class="nv">wise</span><span class="o">,</span><span class="w"> </span><span class="nv">since</span><span class="w"> </span><span class="nv">no</span><span class="o">-</span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">present</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">matches</span><span class="w">  </span><span class="nv">nothing</span><span class="na">.</span>
<span class="w">       </span><span class="nv">In</span><span class="w">  </span><span class="nv">other</span><span class="w">  </span><span class="nv">words</span><span class="o">,</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">parentheses</span><span class="o">,</span>
<span class="w">       </span><span class="nv">optionally</span><span class="w"> </span><span class="nv">enclosed</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">parentheses</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">embedding</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">larger</span><span class="w"> </span><span class="nv">one</span><span class="o">,</span><span class="w">  </span><span class="nv">you</span><span class="w">  </span><span class="nv">could</span><span class="w">  </span><span class="nv">use</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">relative</span><span class="w"> </span><span class="nv">reference</span><span class="bp">:</span>

<span class="w">         </span><span class="na">...</span><span class="nv">other</span><span class="w"> </span><span class="nv">stuff</span><span class="na">...</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="o">?</span><span class="w">    </span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">+</span><span class="w">    </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="na">\</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="na">...</span>

<span class="w">       </span><span class="nv">This</span><span class="w">  </span><span class="nv">makes</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">fragment</span><span class="w"> </span><span class="nv">independent</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">larger</span>
<span class="w">       </span><span class="nv">pattern</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Checking</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">name</span>

<span class="w">       </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">syntax</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">&lt;</span><span class="nv">name</span><span class="o">&gt;</span><span class="p">)</span><span class="na">...</span><span class="p">)</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="na">...</span><span class="p">)</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">test</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">used</span><span class="w">  </span><span class="nv">subpattern</span><span class="w">  </span><span class="nv">by</span><span class="w">  </span><span class="nv">name</span><span class="na">.</span><span class="w">  </span><span class="nv">For</span><span class="w"> </span><span class="nv">compatibility</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">earlier</span><span class="w"> </span><span class="nv">versions</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">had</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">facility</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">Perl</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">syntax</span><span class="w">  </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">name</span><span class="p">)</span><span class="na">...</span><span class="p">)</span><span class="w">  </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">also</span><span class="w"> </span><span class="nv">recognized</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Rewriting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">above</span><span class="w"> </span><span class="nv">example</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">gives</span><span class="w"> </span><span class="nv">this</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">OPEN</span><span class="o">&gt;</span><span class="w"> </span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="o">?</span><span class="w">    </span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">+</span><span class="w">    </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">&lt;</span><span class="nv">OPEN</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="na">\</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">name</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">kind</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">duplicate</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">test</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">applied</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">name</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w">  </span><span class="nv">one</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">matched</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Checking</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">recursion</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">R</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">name</span><span class="w"> </span><span class="nv">R</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">whole</span><span class="w">  </span><span class="nv">pattern</span>
<span class="w">       </span><span class="nv">or</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">been</span><span class="w"> </span><span class="nv">made</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">preceded</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">amper</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sand</span><span class="w"> </span><span class="nv">follow</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">letter</span><span class="w"> </span><span class="nv">R</span><span class="o">,</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">example</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">R3</span><span class="p">)</span><span class="na">...</span><span class="p">)</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">R</span><span class="na">&amp;</span><span class="nv">name</span><span class="p">)</span><span class="na">...</span><span class="p">)</span>

<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">       </span><span class="nv">whose</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">given</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span>
<span class="w">       </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">stack</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">condition</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">kind</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">duplicate</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">applied</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">name</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span>
<span class="w">       </span><span class="nv">is</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">recent</span><span class="w"> </span><span class="nv">recursion</span><span class="na">.</span>

<span class="w">       </span><span class="nv">At</span><span class="w"> </span><span class="s2">"top level"</span><span class="o">,</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">test</span><span class="w">  </span><span class="nv">conditions</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">false</span><span class="na">.</span><span class="w">   </span><span class="nv">The</span>
<span class="w">       </span><span class="nv">syntax</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">below</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Defining</span><span class="w"> </span><span class="nv">subpatterns</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">only</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">condition</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">(</span><span class="nv">DEFINE</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">subpattern</span>
<span class="w">       </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">DEFINE</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w">  </span><span class="nv">always</span><span class="w">  </span><span class="nv">false</span><span class="na">.</span><span class="w">  </span><span class="nv">In</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">case</span><span class="o">,</span>
<span class="w">       </span><span class="nv">there</span><span class="w">  </span><span class="nv">may</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">only</span><span class="w">  </span><span class="nv">one</span><span class="w">  </span><span class="nv">alternative</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span>
<span class="w">       </span><span class="nv">skipped</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">control</span><span class="w"> </span><span class="nv">reaches</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">point</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">pattern</span><span class="sr">;</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">idea</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">DEFINE</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">define</span><span class="w"> </span><span class="nv">subroutines</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">refer</span><span class="o">-</span>
<span class="w">       </span><span class="nv">enced</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">elsewhere</span><span class="na">.</span><span class="w"> </span><span class="p">(</span><span class="nv">The</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subroutines</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">below</span><span class="na">.</span><span class="p">)</span><span class="w">  </span><span class="nv">For</span>
<span class="w">       </span><span class="nv">example</span><span class="o">,</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">to</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">IPv4</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="s2">"192.168.23.245"</span>
<span class="w">       </span><span class="nv">could</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">written</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="p">(</span><span class="nv">ignore</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">line</span><span class="w"> </span><span class="nv">breaks</span><span class="p">)</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="nv">DEFINE</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">?&lt;</span><span class="nv">byte</span><span class="o">&gt;</span><span class="w"> </span><span class="m">2</span><span class="sr">[</span><span class="m">0</span><span class="o">-</span><span class="m">4</span><span class="sr">]</span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="m">25</span><span class="sr">[</span><span class="m">0</span><span class="o">-</span><span class="m">5</span><span class="sr">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="m">1</span><span class="na">\</span><span class="nv">d</span><span class="na">\</span><span class="nv">d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="sr">[</span><span class="m">1</span><span class="o">-</span><span class="m">9</span><span class="sr">]</span><span class="o">?</span><span class="na">\</span><span class="nv">d</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">b</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="na">&amp;</span><span class="nv">byte</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="na">\.</span><span class="p">(</span><span class="o">?</span><span class="na">&amp;</span><span class="nv">byte</span><span class="p">))</span><span class="kt">{</span><span class="m">3</span><span class="kt">}</span><span class="w"> </span><span class="na">\</span><span class="nv">b</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">part</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">DEFINE</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">inside</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">another</span>
<span class="w">       </span><span class="nv">group</span><span class="w">  </span><span class="nv">named</span><span class="w"> </span><span class="s2">"byte"</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">defined</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">individual</span><span class="w"> </span><span class="nv">component</span><span class="w"> </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">an</span><span class="w"> </span><span class="nv">IPv4</span><span class="w"> </span><span class="nv">address</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">less</span><span class="w"> </span><span class="nv">than</span><span class="w"> </span><span class="m">256</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">When</span><span class="w">  </span><span class="nv">matching</span><span class="w">  </span><span class="nv">takes</span><span class="w">  </span><span class="nv">place</span><span class="o">,</span>
<span class="w">       </span><span class="nv">this</span><span class="w">  </span><span class="nv">part</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">skipped</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">DEFINE</span><span class="w"> </span><span class="nv">acts</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">false</span>
<span class="w">       </span><span class="nv">condition</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">rest</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">references</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">named</span><span class="w">  </span><span class="nv">group</span>
<span class="w">       </span><span class="nv">to</span><span class="w">  </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">four</span><span class="w"> </span><span class="nv">dot</span><span class="o">-</span><span class="nv">separated</span><span class="w"> </span><span class="nv">components</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">IPv4</span><span class="w"> </span><span class="nv">address</span><span class="o">,</span><span class="w"> </span><span class="nv">insist</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ing</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">word</span><span class="w"> </span><span class="nv">boundary</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">end</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Assertion</span><span class="w"> </span><span class="nv">conditions</span>

<span class="w">       </span><span class="nv">If</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">above</span><span class="w">  </span><span class="nv">formats</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">must</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">assertion</span><span class="na">.</span><span class="w">   </span><span class="nv">This</span><span class="w"> </span><span class="nv">may</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">lookahead</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">lookbehind</span>
<span class="w">       </span><span class="nv">assertion</span><span class="na">.</span><span class="w"> </span><span class="nv">Consider</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">pattern</span><span class="o">,</span><span class="w">  </span><span class="nv">again</span><span class="w">  </span><span class="nv">containing</span><span class="w">  </span><span class="nv">non</span><span class="o">-</span><span class="nv">significant</span>
<span class="w">       </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">alternatives</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">line</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="o">?</span><span class="p">(</span><span class="o">?=</span><span class="sr">[</span><span class="err">^</span><span class="nv">a</span><span class="o">-</span><span class="nv">z</span><span class="sr">]</span><span class="o">*</span><span class="sr">[</span><span class="nv">a</span><span class="o">-</span><span class="nv">z</span><span class="sr">]</span><span class="p">)</span>
<span class="w">         </span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">2</span><span class="kt">}</span><span class="o">-</span><span class="sr">[</span><span class="nv">a</span><span class="o">-</span><span class="nv">z</span><span class="sr">]</span><span class="kt">{</span><span class="m">3</span><span class="kt">}</span><span class="o">-</span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">2</span><span class="kt">}</span><span class="w">  </span><span class="o">|</span><span class="w">  </span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">2</span><span class="kt">}</span><span class="o">-</span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">2</span><span class="kt">}</span><span class="o">-</span><span class="na">\</span><span class="nv">d</span><span class="kt">{</span><span class="m">2</span><span class="kt">}</span><span class="w"> </span><span class="p">)</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">condition</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">positive</span><span class="w">  </span><span class="nv">lookahead</span><span class="w">  </span><span class="nv">assertion</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">matches</span><span class="w"> </span><span class="nv">an</span>
<span class="w">       </span><span class="nv">optional</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">letters</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">letter</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">other</span><span class="w">  </span><span class="nv">words</span><span class="o">,</span>
<span class="w">       </span><span class="nv">it</span><span class="w">  </span><span class="nv">tests</span><span class="w">  </span><span class="nv">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">presence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">letter</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">letter</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">found</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w">  </span><span class="nv">alternative</span><span class="sr">;</span>
<span class="w">       </span><span class="nv">otherwise</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">matched</span><span class="w">  </span><span class="nv">against</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">second</span><span class="na">.</span><span class="w">  </span><span class="nv">This</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matches</span>
<span class="w">       </span><span class="nv">strings</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">forms</span><span class="w"> </span><span class="nv">dd</span><span class="o">-</span><span class="nv">aaa</span><span class="o">-</span><span class="nv">dd</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">dd</span><span class="o">-</span><span class="nv">dd</span><span class="o">-</span><span class="nv">dd</span><span class="o">,</span><span class="w">  </span><span class="nv">where</span><span class="w">  </span><span class="nv">aaa</span><span class="w">  </span><span class="nv">are</span>
<span class="w">       </span><span class="nv">letters</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">dd</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">digits</span><span class="na">.</span>

<span class="nv">COMMENTS</span>

<span class="w">       </span><span class="nv">There</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">ways</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">including</span><span class="w"> </span><span class="nv">comments</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">processed</span>
<span class="w">       </span><span class="nv">by</span><span class="w"> </span><span class="nv">PCRE</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">cases</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">char</span><span class="o">-</span>
<span class="w">       </span><span class="nv">acter</span><span class="w"> </span><span class="nv">class</span><span class="o">,</span><span class="w"> </span><span class="nv">nor</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">middle</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">related</span><span class="w"> </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ters</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="bp">:</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span><span class="w">  </span><span class="nv">characters</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">make</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="nv">play</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">part</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">matching</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">sequence</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="c1"># marks the start of a comment that continues up to the</span>
<span class="w">       </span><span class="nv">next</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">parenthesis</span><span class="na">.</span><span class="w"> </span><span class="nv">Nested</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">permitted</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w">  </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_EXTENDED</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">unescaped</span><span class="w"> </span><span class="c1"># character also introduces a</span>
<span class="w">       </span><span class="nv">comment</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">case</span><span class="w"> </span><span class="nv">continues</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">immediately</span><span class="w">  </span><span class="nv">after</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">next</span>
<span class="w">       </span><span class="nv">newline</span><span class="w">  </span><span class="nv">character</span><span class="w">  </span><span class="nv">or</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">Which</span><span class="w"> </span><span class="nv">charac</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ters</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">interpreted</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">newlines</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">controlled</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">options</span><span class="w"> </span><span class="nv">passed</span><span class="w"> </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">a</span><span class="w">  </span><span class="nv">compiling</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pat</span><span class="o">-</span>
<span class="w">       </span><span class="nv">tern</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">section</span><span class="w"> </span><span class="nv">entitled</span><span class="w"> </span><span class="s2">"Newline conventions"</span><span class="w"> </span><span class="nv">above</span><span class="na">.</span>
<span class="w">       </span><span class="nv">Note</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">sequence</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="sr">;</span><span class="w"> </span><span class="nv">escape</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">happen</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">represent</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w">  </span><span class="nv">do</span>
<span class="w">       </span><span class="nv">not</span><span class="w">  </span><span class="nv">count</span><span class="na">.</span><span class="w">  </span><span class="nv">For</span><span class="w">  </span><span class="nv">example</span><span class="o">,</span><span class="w">  </span><span class="nv">consider</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">PCRE_EXTENDED</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">set</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">convention</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">force</span><span class="bp">:</span>

<span class="w">         </span><span class="nv">abc</span><span class="w"> </span><span class="c1">#comment \n still comment</span>

<span class="w">       </span><span class="nv">On</span><span class="w"> </span><span class="nv">encountering</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="c1"># character, pcre_compile()  skips  along,  looking</span>
<span class="w">       </span><span class="nv">for</span><span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="nv">newline</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="na">\</span><span class="nv">n</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">still</span><span class="w"> </span><span class="nv">literal</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">this</span>
<span class="w">       </span><span class="nv">stage</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">terminate</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comment</span><span class="na">.</span><span class="w"> </span><span class="nv">Only</span><span class="w"> </span><span class="nv">an</span><span class="w">  </span><span class="nv">actual</span><span class="w">  </span><span class="nv">character</span>
<span class="w">       </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="m">0x0a</span><span class="w"> </span><span class="p">(</span><span class="nv">the</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">newline</span><span class="p">)</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">so</span><span class="na">.</span>

<span class="nv">RECURSIVE</span><span class="w"> </span><span class="nv">PATTERNS</span>

<span class="w">       </span><span class="nv">Consider</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">matching</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">parentheses</span><span class="o">,</span><span class="w"> </span><span class="nv">allowing</span><span class="w"> </span><span class="nv">for</span>
<span class="w">       </span><span class="nv">unlimited</span><span class="w"> </span><span class="nv">nested</span><span class="w"> </span><span class="nv">parentheses</span><span class="na">.</span><span class="w"> </span><span class="nv">Without</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w">  </span><span class="nv">recursion</span><span class="o">,</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">best</span>
<span class="w">       </span><span class="nv">that</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">done</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">fixed</span>
<span class="w">       </span><span class="nv">depth</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">nesting</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">handle</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">arbitrary</span><span class="w">  </span><span class="nv">nesting</span>
<span class="w">       </span><span class="nv">depth</span><span class="na">.</span>

<span class="w">       </span><span class="nv">For</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">time</span><span class="o">,</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">facility</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">allows</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expres</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sions</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">recurse</span><span class="w"> </span><span class="p">(</span><span class="nv">amongst</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">things</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">does</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">by</span><span class="w">  </span><span class="nv">interpolating</span>
<span class="w">       </span><span class="nv">Perl</span><span class="w">  </span><span class="nv">code</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">time</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">refer</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">expression</span><span class="w"> </span><span class="nv">itself</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">interpolation</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">solve</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">created</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">this</span><span class="bp">:</span>

<span class="w">         </span><span class="err">$</span><span class="nv">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">qr</span><span class="kt">{</span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="bp">:</span><span class="w"> </span><span class="p">(</span><span class="o">?&gt;</span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">+</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="nv">p</span><span class="kt">{</span><span class="err">$</span><span class="nv">re</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span><span class="na">\</span><span class="p">)</span><span class="kt">}</span><span class="nv">x</span><span class="sr">;</span>

<span class="w">       </span><span class="nv">The</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="nv">p</span><span class="kt">{</span><span class="na">...</span><span class="kt">}</span><span class="p">)</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nv">interpolates</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">time</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">case</span>
<span class="w">       </span><span class="nv">refers</span><span class="w"> </span><span class="nv">recursively</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">appears</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Obviously</span><span class="o">,</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">support</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">interpolation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">code</span><span class="na">.</span><span class="w"> </span><span class="nv">Instead</span><span class="o">,</span>
<span class="w">       </span><span class="nv">it</span><span class="w">  </span><span class="nv">supports</span><span class="w">  </span><span class="nv">special</span><span class="w">  </span><span class="nv">syntax</span><span class="w">  </span><span class="nv">for</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span>
<span class="w">       </span><span class="nv">also</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">individual</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">recursion</span><span class="na">.</span><span class="w">  </span><span class="nv">After</span><span class="w">  </span><span class="nv">its</span><span class="w">  </span><span class="nv">introduction</span><span class="w">  </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">Python</span><span class="o">,</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">kind</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">recursion</span><span class="w"> </span><span class="nv">was</span><span class="w"> </span><span class="nv">subsequently</span><span class="w"> </span><span class="nv">introduced</span>
<span class="w">       </span><span class="nv">into</span><span class="w"> </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">release</span><span class="w"> </span><span class="m">5.10</span><span class="na">.</span>

<span class="w">       </span><span class="nv">A</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">consists</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">number</span><span class="w">  </span><span class="nv">greater</span><span class="w">  </span><span class="nv">than</span>
<span class="w">       </span><span class="nv">zero</span><span class="w">  </span><span class="nv">and</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">closing</span><span class="w"> </span><span class="nv">parenthesis</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">provided</span><span class="w"> </span><span class="nv">that</span><span class="w">  </span><span class="nv">it</span><span class="w">  </span><span class="nv">occurs</span><span class="w">  </span><span class="nv">inside</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">subpattern</span><span class="na">.</span><span class="w">  </span><span class="p">(</span><span class="nv">If</span><span class="w">  </span><span class="nv">not</span><span class="o">,</span><span class="w">  </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">recursive</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span>
<span class="w">       </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span><span class="p">)</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">special</span><span class="w"> </span><span class="nv">item</span><span class="w">  </span><span class="p">(</span><span class="o">?</span><span class="nv">R</span><span class="p">)</span><span class="w">  </span><span class="nv">or</span><span class="w">  </span><span class="p">(</span><span class="o">?</span><span class="m">0</span><span class="p">)</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">expression</span><span class="na">.</span>

<span class="w">       </span><span class="nv">This</span><span class="w">  </span><span class="nv">PCRE</span><span class="w">  </span><span class="nv">pattern</span><span class="w">  </span><span class="nv">solves</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">nested</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="p">(</span><span class="nv">assume</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="nv">PCRE_EXTENDED</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">white</span><span class="w"> </span><span class="nv">space</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">ignored</span><span class="p">)</span><span class="bp">:</span>

<span class="w">         </span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">++</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="nv">R</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span><span class="na">\</span><span class="p">)</span>

<span class="w">       </span><span class="nv">First</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">opening</span><span class="w"> </span><span class="nv">parenthesis</span><span class="na">.</span><span class="w"> </span><span class="nv">Then</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">number</span><span class="w">  </span><span class="nv">of</span>
<span class="w">       </span><span class="nv">substrings</span><span class="w">  </span><span class="nv">which</span><span class="w">  </span><span class="nv">can</span><span class="w">  </span><span class="nv">either</span><span class="w">  </span><span class="nv">be</span><span class="w">  </span><span class="nv">a</span><span class="w"> </span><span class="nv">sequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">parentheses</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">a</span>
<span class="w">       </span><span class="nv">recursive</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">itself</span><span class="w"> </span><span class="p">(</span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w">  </span><span class="nv">correctly</span><span class="w">  </span><span class="nv">parenthe</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sized</span><span class="w"> </span><span class="nv">substring</span><span class="p">)</span><span class="na">.</span><span class="w">  </span><span class="nv">Finally</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">closing</span><span class="w"> </span><span class="nv">parenthesis</span><span class="na">.</span><span class="w"> </span><span class="nv">Note</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">possessive</span><span class="w"> </span><span class="nv">quantifier</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">avoid</span><span class="w"> </span><span class="nv">backtracking</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">sequences</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span>
<span class="w">       </span><span class="nv">parentheses</span><span class="na">.</span>

<span class="w">       </span><span class="nv">If</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">were</span><span class="w">  </span><span class="nv">part</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">larger</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">recurse</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">entire</span><span class="w"> </span><span class="nv">pattern</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">could</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">this</span><span class="bp">:</span>

<span class="w">         </span><span class="p">(</span><span class="w"> </span><span class="na">\</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="sr">[</span><span class="err">^</span><span class="p">()</span><span class="sr">]</span><span class="o">++</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span><span class="na">\</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>

<span class="w">       </span><span class="nv">We</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">put</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">parentheses</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">caused</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">recursion</span><span class="w">  </span><span class="nv">to</span>
<span class="w">       </span><span class="nv">refer</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">instead</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">whole</span><span class="w"> </span><span class="nv">pattern</span><span class="na">.</span>

<span class="w">       </span><span class="nv">In</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">larger</span><span class="w">  </span><span class="nv">pattern</span><span class="o">,</span><span class="w">  </span><span class="nv">keeping</span><span class="w">  </span><span class="nv">track</span><span class="w">  </span><span class="nv">of</span><span class="w">  </span><span class="nv">parenthesis</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span>
<span class="w">       </span><span class="nv">tricky</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">made</span><span class="w"> </span><span class="nv">easier</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">references</span><span class="na">.</span><span class="w">  </span><span class="nv">Instead</span>
<span class="w">       </span><span class="nv">of</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">above</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">write</span><span class="w"> </span><span class="p">(</span><span class="o">?-</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">refer</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span>
<span class="w">       </span><span class="nv">most</span><span class="w"> </span><span class="nv">recently</span><span class="w"> </span><span class="nv">opened</span><span class="w"> </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">preceding</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">recursion</span><span class="na">.</span><span class="w">  </span><span class="nv">In</span><span class="w">  </span><span class="nv">other</span>
<span class="w">       </span><span class="nv">words</span><span class="o">,</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">negative</span><span class="w">  </span><span class="nv">number</span><span class="w"> </span><span class="nv">counts</span><span class="w"> </span><span class="nv">capturing</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">leftwards</span><span class="w"> </span><span class="nv">from</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">encountered</span><span class="na">.</span>

<span class="w">       </span><span class="nv">It</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">refer</span><span class="w"> </span><span class="nv">to</span><span class="w">  </span><span class="nv">subsequently</span><span class="w">  </span><span class="nv">opened</span><span class="w">  </span><span class="nv">parentheses</span><span class="o">,</span><span class="w">  </span><span class="nv">by</span>
<span class="w">       </span><span class="nv">writing</span><span class="w">  </span><span class="nv">references</span><span class="w">  </span><span class="nv">such</span><span class="w">  </span><span class="nv">as</span><span class="w"> </span><span class="p">(</span><span class="o">?+</span><span class="m">2</span><span class="p">)</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">recursive</span>
<span class="w">       </span><span class="nv">because</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">reference</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">inside</span><span class="w"> </span><span class="nv">the</span><span class="w">  </span><span class="nv">parentheses</span><span class="w">  </span><span class="nv">that</span><span class="w">  </span><span class="nv">are</span><span class="w">  </span><span class="nv">refer</span><span class="o">-</span>
<span class="w">       </span><span class="nv">enced</span><span class="na">.</span><span class="w">  </span><span class="nv">They</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">recursive</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">calls</span><span class="o">,</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">described</span><span class="w"> </span><span class="nv">in</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">section</span><span class="na">.</span>

<span class="w">       </span><span class="nv">An</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">approach</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">instead</span><span class="na">.</span><span class="w">  </span><span class="nv">The</span><span class="w">  </span><span class="nv">Perl</span>
<span class="w">       </span><span class="nv">syntax</span><span class="w">  </span><span class="nv">for</span><span class="w">  </span><span class="nv">this</span><span class="w">  </span><span class="nv">is</span><span class="w"> </span><span class="p">(</span><span class="o">?</span><span class="na">&amp;</span><span class="nv">name</span><span class="p">)</span><span class="sr">;</span><span class="w"> </span><span class="nv">PCRE</span><span class="s1">'s earlier syntax (?P&gt;name) is also</span>
<span class="s1">       supported. We could rewrite the above example as follows:</span>

<span class="s1">         (?&lt;pn&gt; \( ( [^()]++ | (?&amp;pn) )* \) )</span>

<span class="s1">       If there is more than one subpattern with the same name,  the  earliest</span>
<span class="s1">       one is used.</span>

<span class="s1">       This  particular  example pattern that we have been looking at contains</span>
<span class="s1">       nested unlimited repeats, and so the use of a possessive quantifier for</span>
<span class="s1">       matching strings of non-parentheses is important when applying the pat-</span>
<span class="s1">       tern to strings that do not match. For example, when  this  pattern  is</span>
<span class="s1">       applied to</span>

<span class="s1">         (aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa()</span>

<span class="s1">       it  yields  "no  match" quickly. However, if a possessive quantifier is</span>
<span class="s1">       not used, the match runs for a very long time indeed because there  are</span>
<span class="s1">       so  many  different  ways the + and * repeats can carve up the subject,</span>
<span class="s1">       and all have to be tested before failure can be reported.</span>

<span class="s1">       At the end of a match, the values of capturing  parentheses  are  those</span>
<span class="s1">       from  the outermost level. If you want to obtain intermediate values, a</span>
<span class="s1">       callout function can be used (see below and the pcrecallout  documenta-</span>
<span class="s1">       tion). If the pattern above is matched against</span>

<span class="s1">         (ab(cd)ef)</span>

<span class="s1">       the  value  for  the  inner capturing parentheses (numbered 2) is "ef",</span>
<span class="s1">       which is the last value taken on at the top level. If a capturing  sub-</span>
<span class="s1">       pattern  is  not  matched at the top level, its final captured value is</span>
<span class="s1">       unset, even if it was (temporarily) set at a deeper  level  during  the</span>
<span class="s1">       matching process.</span>

<span class="s1">       If  there are more than 15 capturing parentheses in a pattern, PCRE has</span>
<span class="s1">       to obtain extra memory to store data during a recursion, which it  does</span>
<span class="s1">       by using pcre_malloc, freeing it via pcre_free afterwards. If no memory</span>
<span class="s1">       can be obtained, the match fails with the PCRE_ERROR_NOMEMORY error.</span>

<span class="s1">       Do not confuse the (?R) item with the condition (R),  which  tests  for</span>
<span class="s1">       recursion.   Consider  this pattern, which matches text in angle brack-</span>
<span class="s1">       ets, allowing for arbitrary nesting. Only digits are allowed in  nested</span>
<span class="s1">       brackets  (that is, when recursing), whereas any characters are permit-</span>
<span class="s1">       ted at the outer level.</span>

<span class="s1">         &lt; (?: (?(R) \d++  | [^&lt;&gt;]*+) | (?R)) * &gt;</span>

<span class="s1">       In this pattern, (?(R) is the start of a conditional  subpattern,  with</span>
<span class="s1">       two  different  alternatives for the recursive and non-recursive cases.</span>
<span class="s1">       The (?R) item is the actual recursive call.</span>

<span class="s1">   Differences in recursion processing between PCRE and Perl</span>

<span class="s1">       Recursion processing in PCRE differs from Perl in two  important  ways.</span>
<span class="s1">       In  PCRE (like Python, but unlike Perl), a recursive subpattern call is</span>
<span class="s1">       always treated as an atomic group. That is, once it has matched some of</span>
<span class="s1">       the subject string, it is never re-entered, even if it contains untried</span>
<span class="s1">       alternatives and there is a subsequent matching failure.  This  can  be</span>
<span class="s1">       illustrated  by the following pattern, which purports to match a palin-</span>
<span class="s1">       dromic string that contains an odd number of characters  (for  example,</span>
<span class="s1">       "a", "aba", "abcba", "abcdcba"):</span>

<span class="s1">         ^(.|(.)(?1)\2)$</span>

<span class="s1">       The idea is that it either matches a single character, or two identical</span>
<span class="s1">       characters surrounding a sub-palindrome. In Perl, this  pattern  works;</span>
<span class="s1">       in  PCRE  it  does  not if the pattern is longer than three characters.</span>
<span class="s1">       Consider the subject string "abcba":</span>

<span class="s1">       At the top level, the first character is matched, but as it is  not  at</span>
<span class="s1">       the end of the string, the first alternative fails; the second alterna-</span>
<span class="s1">       tive is taken and the recursion kicks in. The recursive call to subpat-</span>
<span class="s1">       tern  1  successfully  matches the next character ("b"). (Note that the</span>
<span class="s1">       beginning and end of line tests are not part of the recursion).</span>

<span class="s1">       Back at the top level, the next character ("c") is compared  with  what</span>
<span class="s1">       subpattern  2 matched, which was "a". This fails. Because the recursion</span>
<span class="s1">       is treated as an atomic group, there are now  no  backtracking  points,</span>
<span class="s1">       and  so  the  entire  match fails. (Perl is able, at this point, to re-</span>
<span class="s1">       enter the recursion and try the second alternative.)  However,  if  the</span>
<span class="s1">       pattern is written with the alternatives in the other order, things are</span>
<span class="s1">       different:</span>

<span class="s1">         ^((.)(?1)\2|.)$</span>

<span class="s1">       This time, the recursing alternative is tried first, and  continues  to</span>
<span class="s1">       recurse  until  it runs out of characters, at which point the recursion</span>
<span class="s1">       fails. But this time we do have  another  alternative  to  try  at  the</span>
<span class="s1">       higher  level.  That  is  the  big difference: in the previous case the</span>
<span class="s1">       remaining alternative is at a deeper recursion level, which PCRE cannot</span>
<span class="s1">       use.</span>

<span class="s1">       To  change  the pattern so that it matches all palindromic strings, not</span>
<span class="s1">       just those with an odd number of characters, it is tempting  to  change</span>
<span class="s1">       the pattern to this:</span>

<span class="s1">         ^((.)(?1)\2|.?)$</span>

<span class="s1">       Again,  this  works  in Perl, but not in PCRE, and for the same reason.</span>
<span class="s1">       When a deeper recursion has matched a single character,  it  cannot  be</span>
<span class="s1">       entered  again  in  order  to match an empty string. The solution is to</span>
<span class="s1">       separate the two cases, and write out the odd and even cases as  alter-</span>
<span class="s1">       natives at the higher level:</span>

<span class="s1">         ^(?:((.)(?1)\2|)|((.)(?3)\4|.))</span>

<span class="s1">       If  you  want  to match typical palindromic phrases, the pattern has to</span>
<span class="s1">       ignore all non-word characters, which can be done like this:</span>

<span class="s1">         ^\W*+(?:((.)\W*+(?1)\W*+\2|)|((.)\W*+(?3)\W*+\4|\W*+.\W*+))\W*+$</span>

<span class="s1">       If run with the PCRE_CASELESS option, this pattern matches phrases such</span>
<span class="s1">       as "A man, a plan, a canal: Panama!" and it works well in both PCRE and</span>
<span class="s1">       Perl. Note the use of the possessive quantifier *+ to avoid  backtrack-</span>
<span class="s1">       ing  into  sequences of non-word characters. Without this, PCRE takes a</span>
<span class="s1">       great deal longer (ten times or more) to  match  typical  phrases,  and</span>
<span class="s1">       Perl takes so long that you think it has gone into a loop.</span>

<span class="s1">       WARNING:  The  palindrome-matching patterns above work only if the sub-</span>
<span class="s1">       ject string does not start with a palindrome that is shorter  than  the</span>
<span class="s1">       entire  string.  For example, although "abcba" is correctly matched, if</span>
<span class="s1">       the subject is "ababa", PCRE finds the palindrome "aba" at  the  start,</span>
<span class="s1">       then  fails at top level because the end of the string does not follow.</span>
<span class="s1">       Once again, it cannot jump back into the recursion to try other  alter-</span>
<span class="s1">       natives, so the entire match fails.</span>

<span class="s1">       The  second  way  in which PCRE and Perl differ in their recursion pro-</span>
<span class="s1">       cessing is in the handling of captured values. In Perl, when a  subpat-</span>
<span class="s1">       tern  is  called recursively or as a subpattern (see the next section),</span>
<span class="s1">       it has no access to any values that were captured  outside  the  recur-</span>
<span class="s1">       sion,  whereas  in  PCRE  these values can be referenced. Consider this</span>
<span class="s1">       pattern:</span>

<span class="s1">         ^(.)(\1|a(?2))</span>

<span class="s1">       In PCRE, this pattern matches "bab". The  first  capturing  parentheses</span>
<span class="s1">       match  "b",  then in the second group, when the back reference \1 fails</span>
<span class="s1">       to match "b", the second alternative matches "a" and then recurses.  In</span>
<span class="s1">       the  recursion,  \1 does now match "b" and so the whole match succeeds.</span>
<span class="s1">       In Perl, the pattern fails to match because inside the  recursive  call</span>
<span class="s1">       \1 cannot access the externally set value.</span>

<span class="s1">SUBPATTERNS AS SUBROUTINES</span>

<span class="s1">       If  the  syntax for a recursive subpattern call (either by number or by</span>
<span class="s1">       name) is used outside the parentheses to which it refers,  it  operates</span>
<span class="s1">       like  a subroutine in a programming language. The called subpattern may</span>
<span class="s1">       be defined before or after the reference. A numbered reference  can  be</span>
<span class="s1">       absolute or relative, as in these examples:</span>

<span class="s1">         (...(absolute)...)...(?2)...</span>
<span class="s1">         (...(relative)...)...(?-1)...</span>
<span class="s1">         (...(?+1)...(relative)...</span>

<span class="s1">       An earlier example pointed out that the pattern</span>

<span class="s1">         (sens|respons)e and \1ibility</span>

<span class="s1">       matches  "sense and sensibility" and "response and responsibility", but</span>
<span class="s1">       not "sense and responsibility". If instead the pattern</span>

<span class="s1">         (sens|respons)e and (?1)ibility</span>

<span class="s1">       is used, it does match "sense and responsibility" as well as the  other</span>
<span class="s1">       two  strings.  Another  example  is  given  in the discussion of DEFINE</span>
<span class="s1">       above.</span>

<span class="s1">       All subroutine calls, whether recursive or not, are always  treated  as</span>
<span class="s1">       atomic  groups. That is, once a subroutine has matched some of the sub-</span>
<span class="s1">       ject string, it is never re-entered, even if it contains untried alter-</span>
<span class="s1">       natives  and  there  is  a  subsequent  matching failure. Any capturing</span>
<span class="s1">       parentheses that are set during the subroutine  call  revert  to  their</span>
<span class="s1">       previous values afterwards.</span>

<span class="s1">       Processing  options  such as case-independence are fixed when a subpat-</span>
<span class="s1">       tern is defined, so if it is used as a subroutine, such options  cannot</span>
<span class="s1">       be changed for different calls. For example, consider this pattern:</span>

<span class="s1">         (abc)(?i:(?-1))</span>

<span class="s1">       It  matches  "abcabc". It does not match "abcABC" because the change of</span>
<span class="s1">       processing option does not affect the called subpattern.</span>

<span class="s1">ONIGURUMA SUBROUTINE SYNTAX</span>

<span class="s1">       For compatibility with Oniguruma, the non-Perl syntax \g followed by  a</span>
<span class="s1">       name or a number enclosed either in angle brackets or single quotes, is</span>
<span class="s1">       an alternative syntax for referencing a  subpattern  as  a  subroutine,</span>
<span class="s1">       possibly  recursively. Here are two of the examples used above, rewrit-</span>
<span class="s1">       ten using this syntax:</span>

<span class="s1">         (?&lt;pn&gt; \( ( (?&gt;[^()]+) | \g&lt;pn&gt; )* \) )</span>
<span class="s1">         (sens|respons)e and \g'</span><span class="m">1</span><span class="s1">'ibility</span>

<span class="s1">       PCRE supports an extension to Oniguruma: if a number is preceded  by  a</span>
<span class="s1">       plus or a minus sign it is taken as a relative reference. For example:</span>

<span class="s1">         (abc)(?i:\g&lt;-1&gt;)</span>

<span class="s1">       Note  that \g{...} (Perl syntax) and \g&lt;...&gt; (Oniguruma syntax) are not</span>
<span class="s1">       synonymous. The former is a back reference; the latter is a  subroutine</span>
<span class="s1">       call.</span>

<span class="s1">CALLOUTS</span>

<span class="s1">       Perl has a feature whereby using the sequence (?{...}) causes arbitrary</span>
<span class="s1">       Perl code to be obeyed in the middle of matching a regular  expression.</span>
<span class="s1">       This makes it possible, amongst other things, to extract different sub-</span>
<span class="s1">       strings that match the same pair of parentheses when there is a repeti-</span>
<span class="s1">       tion.</span>

<span class="s1">       PCRE provides a similar feature, but of course it cannot obey arbitrary</span>
<span class="s1">       Perl code. The feature is called "callout". The caller of PCRE provides</span>
<span class="s1">       an  external function by putting its entry point in the global variable</span>
<span class="s1">       pcre_callout (8-bit library) or pcre[16|32]_callout (16-bit  or  32-bit</span>
<span class="s1">       library).   By default, this variable contains NULL, which disables all</span>
<span class="s1">       calling out.</span>

<span class="s1">       Within a regular expression, (?C) indicates the  points  at  which  the</span>
<span class="s1">       external  function  is  to be called. If you want to identify different</span>
<span class="s1">       callout points, you can put a number less than 256 after the letter  C.</span>
<span class="s1">       The  default  value is zero.  For example, this pattern has two callout</span>
<span class="s1">       points:</span>

<span class="s1">         (?C1)abc(?C2)def</span>

<span class="s1">       If the PCRE_AUTO_CALLOUT flag is passed to a compiling function,  call-</span>
<span class="s1">       outs  are automatically installed before each item in the pattern. They</span>
<span class="s1">       are all numbered 255. If there is a conditional group  in  the  pattern</span>
<span class="s1">       whose condition is an assertion, an additional callout is inserted just</span>
<span class="s1">       before the condition. An explicit callout may also be set at this posi-</span>
<span class="s1">       tion, as in this example:</span>

<span class="s1">         (?(?C9)(?=a)abc|def)</span>

<span class="s1">       Note that this applies only to assertion conditions, not to other types</span>
<span class="s1">       of condition.</span>

<span class="s1">       During matching, when PCRE reaches a callout point, the external  func-</span>
<span class="s1">       tion  is  called.  It  is  provided with the number of the callout, the</span>
<span class="s1">       position in the pattern, and, optionally, one item of  data  originally</span>
<span class="s1">       supplied  by  the caller of the matching function. The callout function</span>
<span class="s1">       may cause matching to proceed, to backtrack, or to fail altogether.</span>

<span class="s1">       By default, PCRE implements a number of optimizations at  compile  time</span>
<span class="s1">       and  matching  time, and one side-effect is that sometimes callouts are</span>
<span class="s1">       skipped. If you need all possible callouts to happen, you need  to  set</span>
<span class="s1">       options  that  disable  the relevant optimizations. More details, and a</span>
<span class="s1">       complete description of the interface  to  the  callout  function,  are</span>
<span class="s1">       given in the pcrecallout documentation.</span>

<span class="s1">BACKTRACKING CONTROL</span>

<span class="s1">       Perl  5.10 introduced a number of "Special Backtracking Control Verbs",</span>
<span class="s1">       which are still described in the Perl  documentation  as  "experimental</span>
<span class="s1">       and  subject to change or removal in a future version of Perl". It goes</span>
<span class="s1">       on to say: "Their usage in production code should  be  noted  to  avoid</span>
<span class="s1">       problems  during upgrades." The same remarks apply to the PCRE features</span>
<span class="s1">       described in this section.</span>

<span class="s1">       The new verbs make use of what was previously invalid syntax: an  open-</span>
<span class="s1">       ing parenthesis followed by an asterisk. They are generally of the form</span>
<span class="s1">       (*VERB) or (*VERB:NAME). Some may take either form,  possibly  behaving</span>
<span class="s1">       differently  depending  on  whether or not a name is present. A name is</span>
<span class="s1">       any sequence of characters that does not include a closing parenthesis.</span>
<span class="s1">       The maximum length of name is 255 in the 8-bit library and 65535 in the</span>
<span class="s1">       16-bit and 32-bit libraries. If the name is  empty,  that  is,  if  the</span>
<span class="s1">       closing  parenthesis immediately follows the colon, the effect is as if</span>
<span class="s1">       the colon were not there.  Any number of these verbs  may  occur  in  a</span>
<span class="s1">       pattern.</span>

<span class="s1">       Since  these  verbs  are  specifically related to backtracking, most of</span>
<span class="s1">       them can be used only when the pattern is to be matched  using  one  of</span>
<span class="s1">       the  traditional  matching  functions, because these use a backtracking</span>
<span class="s1">       algorithm. With the exception of (*FAIL), which behaves like a  failing</span>
<span class="s1">       negative  assertion,  the  backtracking control verbs cause an error if</span>
<span class="s1">       encountered by a DFA matching function.</span>

<span class="s1">       The behaviour of these verbs in repeated  groups,  assertions,  and  in</span>
<span class="s1">       subpatterns called as subroutines (whether or not recursively) is docu-</span>
<span class="s1">       mented below.</span>

<span class="s1">   Optimizations that affect backtracking verbs</span>

<span class="s1">       PCRE contains some optimizations that are used to speed up matching  by</span>
<span class="s1">       running some checks at the start of each match attempt. For example, it</span>
<span class="s1">       may know the minimum length of matching subject, or that  a  particular</span>
<span class="s1">       character must be present. When one of these optimizations bypasses the</span>
<span class="s1">       running of a match,  any  included  backtracking  verbs  will  not,  of</span>
<span class="s1">       course, be processed. You can suppress the start-of-match optimizations</span>
<span class="s1">       by setting the PCRE_NO_START_OPTIMIZE  option  when  calling  pcre_com-</span>
<span class="s1">       pile() or pcre_exec(), or by starting the pattern with (*NO_START_OPT).</span>
<span class="s1">       There is more discussion of this option in the section entitled "Option</span>
<span class="s1">       bits for pcre_exec()" in the pcreapi documentation.</span>

<span class="s1">       Experiments  with  Perl  suggest that it too has similar optimizations,</span>
<span class="s1">       sometimes leading to anomalous results.</span>

<span class="s1">   Verbs that act immediately</span>

<span class="s1">       The following verbs act as soon as they are encountered. They  may  not</span>
<span class="s1">       be followed by a name.</span>

<span class="s1">          (*ACCEPT)</span>

<span class="s1">       This  verb causes the match to end successfully, skipping the remainder</span>
<span class="s1">       of the pattern. However, when it is inside a subpattern that is  called</span>
<span class="s1">       as  a  subroutine, only that subpattern is ended successfully. Matching</span>
<span class="s1">       then continues at the outer level. If (*ACCEPT) in triggered in a posi-</span>
<span class="s1">       tive  assertion,  the  assertion succeeds; in a negative assertion, the</span>
<span class="s1">       assertion fails.</span>

<span class="s1">       If (*ACCEPT) is inside capturing parentheses, the data so far  is  cap-</span>
<span class="s1">       tured. For example:</span>

<span class="s1">         A((?:A|B(*ACCEPT)|C)D)</span>

<span class="s1">       This  matches  "AB", "AAD", or "ACD"; when it matches "AB", "B" is cap-</span>
<span class="s1">       tured by the outer parentheses.</span>

<span class="s1">         (*FAIL) or (*F)</span>

<span class="s1">       This verb causes a matching failure, forcing backtracking to occur.  It</span>
<span class="s1">       is  equivalent to (?!) but easier to read. The Perl documentation notes</span>
<span class="s1">       that it is probably useful only when combined  with  (?{})  or  (??{}).</span>
<span class="s1">       Those  are,  of course, Perl features that are not present in PCRE. The</span>
<span class="s1">       nearest equivalent is the callout feature, as for example in this  pat-</span>
<span class="s1">       tern:</span>

<span class="s1">         a+(?C)(*FAIL)</span>

<span class="s1">       A  match  with the string "aaaa" always fails, but the callout is taken</span>
<span class="s1">       before each backtrack happens (in this example, 10 times).</span>

<span class="s1">   Recording which path was taken</span>

<span class="s1">       There is one verb whose main purpose  is  to  track  how  a  match  was</span>
<span class="s1">       arrived  at,  though  it  also  has a secondary use in conjunction with</span>
<span class="s1">       advancing the match starting point (see (*SKIP) below).</span>

<span class="s1">         (*MARK:NAME) or (*:NAME)</span>

<span class="s1">       A name is always  required  with  this  verb.  There  may  be  as  many</span>
<span class="s1">       instances  of  (*MARK) as you like in a pattern, and their names do not</span>
<span class="s1">       have to be unique.</span>

<span class="s1">       When a match succeeds, the name of the  last-encountered  (*MARK:NAME),</span>
<span class="s1">       (*PRUNE:NAME),  or  (*THEN:NAME) on the matching path is passed back to</span>
<span class="s1">       the caller as  described  in  the  section  entitled  "Extra  data  for</span>
<span class="s1">       pcre_exec()"  in  the  pcreapi  documentation.  Here  is  an example of</span>
<span class="s1">       pcretest output, where the /K modifier requests the retrieval and  out-</span>
<span class="s1">       putting of (*MARK) data:</span>

<span class="s1">           re&gt; /X(*MARK:A)Y|X(*MARK:B)Z/K</span>
<span class="s1">         data&gt; XY</span>
<span class="s1">          0: XY</span>
<span class="s1">         MK: A</span>
<span class="s1">         XZ</span>
<span class="s1">          0: XZ</span>
<span class="s1">         MK: B</span>

<span class="s1">       The (*MARK) name is tagged with "MK:" in this output, and in this exam-</span>
<span class="s1">       ple it indicates which of the two alternatives matched. This is a  more</span>
<span class="s1">       efficient  way of obtaining this information than putting each alterna-</span>
<span class="s1">       tive in its own capturing parentheses.</span>

<span class="s1">       If a verb with a name is encountered in a positive  assertion  that  is</span>
<span class="s1">       true,  the  name  is recorded and passed back if it is the last-encoun-</span>
<span class="s1">       tered. This does not happen for negative assertions or failing positive</span>
<span class="s1">       assertions.</span>

<span class="s1">       After  a  partial match or a failed match, the last encountered name in</span>
<span class="s1">       the entire match process is returned. For example:</span>

<span class="s1">           re&gt; /X(*MARK:A)Y|X(*MARK:B)Z/K</span>
<span class="s1">         data&gt; XP</span>
<span class="s1">         No match, mark = B</span>

<span class="s1">       Note that in this unanchored example the  mark  is  retained  from  the</span>
<span class="s1">       match attempt that started at the letter "X" in the subject. Subsequent</span>
<span class="s1">       match attempts starting at "P" and then with an empty string do not get</span>
<span class="s1">       as far as the (*MARK) item, but nevertheless do not reset it.</span>

<span class="s1">       If  you  are  interested  in  (*MARK)  values after failed matches, you</span>
<span class="s1">       should probably set the PCRE_NO_START_OPTIMIZE option  (see  above)  to</span>
<span class="s1">       ensure that the match is always attempted.</span>

<span class="s1">   Verbs that act after backtracking</span>

<span class="s1">       The following verbs do nothing when they are encountered. Matching con-</span>
<span class="s1">       tinues with what follows, but if there is no subsequent match,  causing</span>
<span class="s1">       a  backtrack  to  the  verb, a failure is forced. That is, backtracking</span>
<span class="s1">       cannot pass to the left of the verb. However, when one of  these  verbs</span>
<span class="s1">       appears inside an atomic group or an assertion that is true, its effect</span>
<span class="s1">       is confined to that group, because once the  group  has  been  matched,</span>
<span class="s1">       there  is never any backtracking into it. In this situation, backtrack-</span>
<span class="s1">       ing can "jump back" to the left of the entire atomic  group  or  asser-</span>
<span class="s1">       tion.  (Remember  also,  as  stated  above, that this localization also</span>
<span class="s1">       applies in subroutine calls.)</span>

<span class="s1">       These verbs differ in exactly what kind of failure  occurs  when  back-</span>
<span class="s1">       tracking  reaches  them.  The behaviour described below is what happens</span>
<span class="s1">       when the verb is not in a subroutine or an assertion.  Subsequent  sec-</span>
<span class="s1">       tions cover these special cases.</span>

<span class="s1">         (*COMMIT)</span>

<span class="s1">       This  verb, which may not be followed by a name, causes the whole match</span>
<span class="s1">       to fail outright if there is a later matching failure that causes back-</span>
<span class="s1">       tracking  to  reach  it.  Even if the pattern is unanchored, no further</span>
<span class="s1">       attempts to find a match by advancing the starting point take place. If</span>
<span class="s1">       (*COMMIT)  is  the  only backtracking verb that is encountered, once it</span>
<span class="s1">       has been passed pcre_exec() is committed to finding a match at the cur-</span>
<span class="s1">       rent starting point, or not at all. For example:</span>

<span class="s1">         a+(*COMMIT)b</span>

<span class="s1">       This  matches  "xxaab" but not "aacaab". It can be thought of as a kind</span>
<span class="s1">       of dynamic anchor, or "I'</span><span class="nv">ve</span><span class="w"> </span><span class="nv">started</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">finish</span><span class="na">.</span><span class="s2">" The name of the</span>
<span class="s2">       most  recently passed (*MARK) in the path is passed back when (*COMMIT)</span>
<span class="s2">       forces a match failure.</span>

<span class="s2">       If there is more than one backtracking verb in a pattern,  a  different</span>
<span class="s2">       one  that  follows  (*COMMIT) may be triggered first, so merely passing</span>
<span class="s2">       (*COMMIT) during a match does not always guarantee that a match must be</span>
<span class="s2">       at this starting point.</span>

<span class="s2">       Note  that  (*COMMIT)  at  the start of a pattern is not the same as an</span>
<span class="s2">       anchor, unless PCRE's start-of-match optimizations are turned  off,  as</span>
<span class="s2">       shown in this output from pcretest:</span>

<span class="s2">           re&gt; /(*COMMIT)abc/</span>
<span class="s2">         data&gt; xyzabc</span>
<span class="s2">          0: abc</span>
<span class="s2">         data&gt; xyzabc\Y</span>
<span class="s2">         No match</span>

<span class="s2">       For this pattern, PCRE knows that any match must start with "</span><span class="nv">a</span><span class="s2">", so the</span>
<span class="s2">       optimization skips along the subject to "</span><span class="nv">a</span><span class="s2">" before applying the pattern</span>
<span class="s2">       to  the first set of data. The match attempt then succeeds. In the sec-</span>
<span class="s2">       ond set of data, the escape sequence \Y is interpreted by the  pcretest</span>
<span class="s2">       program.  It  causes  the  PCRE_NO_START_OPTIMIZE option to be set when</span>
<span class="s2">       pcre_exec() is called.  This disables the optimization that skips along</span>
<span class="s2">       to the first character. The pattern is now applied starting at "</span><span class="nv">x</span><span class="s2">", and</span>
<span class="s2">       so the (*COMMIT) causes the match to  fail  without  trying  any  other</span>
<span class="s2">       starting points.</span>

<span class="s2">         (*PRUNE) or (*PRUNE:NAME)</span>

<span class="s2">       This  verb causes the match to fail at the current starting position in</span>
<span class="s2">       the subject if there is a later matching failure that causes backtrack-</span>
<span class="s2">       ing  to  reach it. If the pattern is unanchored, the normal "</span><span class="nv">bumpalong</span><span class="s2">"</span>
<span class="s2">       advance to the next starting character then happens.  Backtracking  can</span>
<span class="s2">       occur  as  usual to the left of (*PRUNE), before it is reached, or when</span>
<span class="s2">       matching to the right of (*PRUNE), but if there  is  no  match  to  the</span>
<span class="s2">       right,  backtracking cannot cross (*PRUNE). In simple cases, the use of</span>
<span class="s2">       (*PRUNE) is just an alternative to an atomic group or possessive  quan-</span>
<span class="s2">       tifier, but there are some uses of (*PRUNE) that cannot be expressed in</span>
<span class="s2">       any other way. In an anchored pattern (*PRUNE) has the same  effect  as</span>
<span class="s2">       (*COMMIT).</span>

<span class="s2">       The   behaviour   of   (*PRUNE:NAME)   is   the   not   the   same   as</span>
<span class="s2">       (*MARK:NAME)(*PRUNE).  It is like (*MARK:NAME)  in  that  the  name  is</span>
<span class="s2">       remembered  for  passing  back  to  the  caller.  However, (*SKIP:NAME)</span>
<span class="s2">       searches only for names set with (*MARK).</span>

<span class="s2">         (*SKIP)</span>

<span class="s2">       This verb, when given without a name, is like (*PRUNE), except that  if</span>
<span class="s2">       the  pattern  is unanchored, the "</span><span class="nv">bumpalong</span><span class="s2">" advance is not to the next</span>
<span class="s2">       character, but to the position in the subject where (*SKIP) was encoun-</span>
<span class="s2">       tered.  (*SKIP)  signifies that whatever text was matched leading up to</span>
<span class="s2">       it cannot be part of a successful match. Consider:</span>

<span class="s2">         a+(*SKIP)b</span>

<span class="s2">       If the subject is "</span><span class="nv">aaaac</span><span class="na">...</span><span class="s2">",  after  the  first  match  attempt  fails</span>
<span class="s2">       (starting  at  the  first  character in the string), the starting point</span>
<span class="s2">       skips on to start the next attempt at "</span><span class="nv">c</span><span class="s2">". Note that a possessive quan-</span>
<span class="s2">       tifer  does not have the same effect as this example; although it would</span>
<span class="s2">       suppress backtracking  during  the  first  match  attempt,  the  second</span>
<span class="s2">       attempt  would  start at the second character instead of skipping on to</span>
<span class="s2">       "</span><span class="nv">c</span><span class="s2">".</span>

<span class="s2">         (*SKIP:NAME)</span>

<span class="s2">       When (*SKIP) has an associated name, its behaviour is modified. When it</span>
<span class="s2">       is triggered, the previous path through the pattern is searched for the</span>
<span class="s2">       most recent (*MARK) that has the  same  name.  If  one  is  found,  the</span>
<span class="s2">       "</span><span class="nv">bumpalong</span><span class="s2">" advance is to the subject position that corresponds to that</span>
<span class="s2">       (*MARK) instead of to where (*SKIP) was encountered. If no (*MARK) with</span>
<span class="s2">       a matching name is found, the (*SKIP) is ignored.</span>

<span class="s2">       Note  that (*SKIP:NAME) searches only for names set by (*MARK:NAME). It</span>
<span class="s2">       ignores names that are set by (*PRUNE:NAME) or (*THEN:NAME).</span>

<span class="s2">         (*THEN) or (*THEN:NAME)</span>

<span class="s2">       This verb causes a skip to the next innermost  alternative  when  back-</span>
<span class="s2">       tracking  reaches  it.  That  is,  it  cancels any further backtracking</span>
<span class="s2">       within the current alternative. Its name  comes  from  the  observation</span>
<span class="s2">       that it can be used for a pattern-based if-then-else block:</span>

<span class="s2">         ( COND1 (*THEN) FOO | COND2 (*THEN) BAR | COND3 (*THEN) BAZ ) ...</span>

<span class="s2">       If  the COND1 pattern matches, FOO is tried (and possibly further items</span>
<span class="s2">       after the end of the group if FOO succeeds); on  failure,  the  matcher</span>
<span class="s2">       skips  to  the second alternative and tries COND2, without backtracking</span>
<span class="s2">       into COND1. If that succeeds and BAR fails, COND3 is tried.  If  subse-</span>
<span class="s2">       quently  BAZ fails, there are no more alternatives, so there is a back-</span>
<span class="s2">       track to whatever came before the  entire  group.  If  (*THEN)  is  not</span>
<span class="s2">       inside an alternation, it acts like (*PRUNE).</span>

<span class="s2">       The    behaviour   of   (*THEN:NAME)   is   the   not   the   same   as</span>
<span class="s2">       (*MARK:NAME)(*THEN).  It is like  (*MARK:NAME)  in  that  the  name  is</span>
<span class="s2">       remembered  for  passing  back  to  the  caller.  However, (*SKIP:NAME)</span>
<span class="s2">       searches only for names set with (*MARK).</span>

<span class="s2">       A subpattern that does not contain a | character is just a part of  the</span>
<span class="s2">       enclosing  alternative;  it  is  not a nested alternation with only one</span>
<span class="s2">       alternative. The effect of (*THEN) extends beyond such a subpattern  to</span>
<span class="s2">       the  enclosing alternative. Consider this pattern, where A, B, etc. are</span>
<span class="s2">       complex pattern fragments that do not contain any | characters at  this</span>
<span class="s2">       level:</span>

<span class="s2">         A (B(*THEN)C) | D</span>

<span class="s2">       If  A and B are matched, but there is a failure in C, matching does not</span>
<span class="s2">       backtrack into A; instead it moves to the next alternative, that is, D.</span>
<span class="s2">       However,  if the subpattern containing (*THEN) is given an alternative,</span>
<span class="s2">       it behaves differently:</span>

<span class="s2">         A (B(*THEN)C | (*FAIL)) | D</span>

<span class="s2">       The effect of (*THEN) is now confined to the inner subpattern. After  a</span>
<span class="s2">       failure in C, matching moves to (*FAIL), which causes the whole subpat-</span>
<span class="s2">       tern to fail because there are no more alternatives  to  try.  In  this</span>
<span class="s2">       case, matching does now backtrack into A.</span>

<span class="s2">       Note  that  a  conditional  subpattern  is not considered as having two</span>
<span class="s2">       alternatives, because only one is ever used.  In  other  words,  the  |</span>
<span class="s2">       character in a conditional subpattern has a different meaning. Ignoring</span>
<span class="s2">       white space, consider:</span>

<span class="s2">         ^.*? (?(?=a) a | b(*THEN)c )</span>

<span class="s2">       If the subject is "</span><span class="nv">ba</span><span class="s2">", this pattern does not  match.  Because  .*?  is</span>
<span class="s2">       ungreedy,  it  initially  matches  zero characters. The condition (?=a)</span>
<span class="s2">       then fails, the character "</span><span class="nv">b</span><span class="s2">" is matched,  but  "</span><span class="nv">c</span><span class="s2">"  is  not.  At  this</span>
<span class="s2">       point,  matching does not backtrack to .*? as might perhaps be expected</span>
<span class="s2">       from the presence of the | character.  The  conditional  subpattern  is</span>
<span class="s2">       part of the single alternative that comprises the whole pattern, and so</span>
<span class="s2">       the match fails. (If there was a backtrack into  .*?,  allowing  it  to</span>
<span class="s2">       match "</span><span class="nv">b</span><span class="s2">", the match would succeed.)</span>

<span class="s2">       The  verbs just described provide four different "</span><span class="nv">strengths</span><span class="s2">" of control</span>
<span class="s2">       when subsequent matching fails. (*THEN) is the weakest, carrying on the</span>
<span class="s2">       match  at  the next alternative. (*PRUNE) comes next, failing the match</span>
<span class="s2">       at the current starting position, but allowing an advance to  the  next</span>
<span class="s2">       character  (for an unanchored pattern). (*SKIP) is similar, except that</span>
<span class="s2">       the advance may be more than one character. (*COMMIT) is the strongest,</span>
<span class="s2">       causing the entire match to fail.</span>

<span class="s2">   More than one backtracking verb</span>

<span class="s2">       If  more  than  one  backtracking verb is present in a pattern, the one</span>
<span class="s2">       that is backtracked onto first acts. For example,  consider  this  pat-</span>
<span class="s2">       tern, where A, B, etc. are complex pattern fragments:</span>

<span class="s2">         (A(*COMMIT)B(*THEN)C|ABD)</span>

<span class="s2">       If  A matches but B fails, the backtrack to (*COMMIT) causes the entire</span>
<span class="s2">       match to fail. However, if A and B match, but C fails, the backtrack to</span>
<span class="s2">       (*THEN)  causes  the next alternative (ABD) to be tried. This behaviour</span>
<span class="s2">       is consistent, but is not always the same as Perl's. It means  that  if</span>
<span class="s2">       two  or  more backtracking verbs appear in succession, all the the last</span>
<span class="s2">       of them has no effect. Consider this example:</span>

<span class="s2">         ...(*COMMIT)(*PRUNE)...</span>

<span class="s2">       If there is a matching failure to the right, backtracking onto (*PRUNE)</span>
<span class="s2">       causes  it to be triggered, and its action is taken. There can never be</span>
<span class="s2">       a backtrack onto (*COMMIT).</span>

<span class="s2">   Backtracking verbs in repeated groups</span>

<span class="s2">       PCRE differs from  Perl  in  its  handling  of  backtracking  verbs  in</span>
<span class="s2">       repeated groups. For example, consider:</span>

<span class="s2">         /(a(*COMMIT)b)+ac/</span>

<span class="s2">       If  the  subject  is  "</span><span class="nv">abac</span><span class="err">"</span><span class="o">,</span><span class="w">  </span><span class="nv">Perl</span><span class="w"> </span><span class="nv">matches</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">PCRE</span><span class="w"> </span><span class="nv">fails</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">the</span>
<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">COMMIT</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">repeat</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">acts</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Backtracking</span><span class="w"> </span><span class="nv">verbs</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">assertions</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">FAIL</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">normal</span><span class="w"> </span><span class="nv">effect</span><span class="bp">:</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">forces</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">immediate</span>
<span class="w">       </span><span class="nv">backtrack</span><span class="na">.</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">ACCEPT</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">succeed</span><span class="w"> </span><span class="nv">with</span><span class="o">-</span>
<span class="w">       </span><span class="nv">out</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">processing</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">assertion</span><span class="o">,</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="nv">ACCEPT</span><span class="p">)</span><span class="w">  </span><span class="nv">causes</span>
<span class="w">       </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">fail</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">processing</span><span class="na">.</span>

<span class="w">       </span><span class="nv">The</span><span class="w">  </span><span class="nv">other</span><span class="w">  </span><span class="nv">backtracking</span><span class="w"> </span><span class="nv">verbs</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">treated</span><span class="w"> </span><span class="nv">specially</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">appear</span>
<span class="w">       </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">assertion</span><span class="na">.</span><span class="w"> </span><span class="nv">In</span><span class="w">  </span><span class="nv">particular</span><span class="o">,</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w">  </span><span class="nv">skips</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">next</span>
<span class="w">       </span><span class="nv">alternative</span><span class="w">  </span><span class="nv">in</span><span class="w">  </span><span class="nv">the</span><span class="w">  </span><span class="nv">innermost</span><span class="w">  </span><span class="nv">enclosing</span><span class="w"> </span><span class="nv">group</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">alternations</span><span class="o">,</span>
<span class="w">       </span><span class="nv">whether</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="na">.</span>

<span class="w">       </span><span class="nv">Negative</span><span class="w"> </span><span class="nv">assertions</span><span class="w"> </span><span class="nv">are</span><span class="o">,</span><span class="w"> </span><span class="nv">however</span><span class="o">,</span><span class="w"> </span><span class="nv">different</span><span class="o">,</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">order</span><span class="w">  </span><span class="nv">to</span><span class="w">  </span><span class="nv">ensure</span><span class="w">  </span><span class="nv">that</span>
<span class="w">       </span><span class="nv">changing</span><span class="w">  </span><span class="nv">a</span><span class="w">  </span><span class="nv">positive</span><span class="w">  </span><span class="nv">assertion</span><span class="w">  </span><span class="nv">into</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">changes</span><span class="w"> </span><span class="nv">its</span>
<span class="w">       </span><span class="nv">result</span><span class="na">.</span><span class="w"> </span><span class="nv">Backtracking</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">COMMIT</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">SKIP</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="p">)</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">neg</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ative</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">true</span><span class="o">,</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">considering</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">alternative</span>
<span class="w">       </span><span class="nv">branches</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="na">.</span><span class="w">  </span><span class="nv">Backtracking</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">skip</span>
<span class="w">       </span><span class="nv">to</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">enclosing</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">within</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="w"> </span><span class="p">(</span><span class="nv">the</span><span class="w"> </span><span class="nv">normal</span><span class="w"> </span><span class="nv">be</span><span class="o">-</span>
<span class="w">       </span><span class="nv">haviour</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">assertion</span><span class="w">  </span><span class="nv">does</span><span class="w">  </span><span class="nv">not</span><span class="w">  </span><span class="nv">have</span><span class="w">  </span><span class="nv">such</span><span class="w">  </span><span class="nv">an</span><span class="w">  </span><span class="nv">alternative</span><span class="o">,</span>
<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w"> </span><span class="nv">behaves</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="p">)</span><span class="na">.</span>

<span class="w">   </span><span class="nv">Backtracking</span><span class="w"> </span><span class="nv">verbs</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">subroutines</span>

<span class="w">       </span><span class="nv">These</span><span class="w">  </span><span class="nv">behaviours</span><span class="w">  </span><span class="nv">occur</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">recur</span><span class="o">-</span>
<span class="w">       </span><span class="nv">sively</span><span class="na">.</span><span class="w">  </span><span class="nv">Perl</span><span class="err">'</span><span class="nv">s</span><span class="w"> </span><span class="nv">treatment</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">subroutines</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">different</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">cases</span><span class="na">.</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">FAIL</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">its</span><span class="w">  </span><span class="nv">normal</span><span class="w">  </span><span class="nv">effect</span><span class="bp">:</span>
<span class="w">       </span><span class="nv">it</span><span class="w"> </span><span class="nv">forces</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">immediate</span><span class="w"> </span><span class="nv">backtrack</span><span class="na">.</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">ACCEPT</span><span class="p">)</span><span class="w">  </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subroutine</span>
<span class="w">       </span><span class="nv">match</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">succeed</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">further</span><span class="w"> </span><span class="nv">processing</span><span class="na">.</span><span class="w"> </span><span class="nv">Matching</span><span class="w"> </span><span class="nv">then</span><span class="w">  </span><span class="nv">contin</span><span class="o">-</span>
<span class="w">       </span><span class="nv">ues</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">call</span><span class="na">.</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">COMMIT</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">SKIP</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">PRUNE</span><span class="p">)</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">subroutine</span>
<span class="w">       </span><span class="nv">cause</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">fail</span><span class="na">.</span>

<span class="w">       </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w"> </span><span class="nv">skips</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">next</span><span class="w"> </span><span class="nv">alternative</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">innermost</span><span class="w"> </span><span class="nv">enclosing</span><span class="w">  </span><span class="nv">group</span>
<span class="w">       </span><span class="nv">within</span><span class="w">  </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">alternatives</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">no</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">group</span>
<span class="w">       </span><span class="nv">within</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subpattern</span><span class="o">,</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nv">THEN</span><span class="p">)</span><span class="w"> </span><span class="nv">causes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">subroutine</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">fail</span><span class="na">.</span>

<span class="nv">SEE</span><span class="w"> </span><span class="nv">ALSO</span>

<span class="w">       </span><span class="nv">pcreapi</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcrecallout</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">pcrematching</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">pcresyntax</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w">  </span><span class="nv">pcre</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span>
<span class="w">       </span><span class="nv">pcre16</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">pcre32</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="na">.</span>

<span class="nv">AUTHOR</span>

<span class="w">       </span><span class="nv">Philip</span><span class="w"> </span><span class="nv">Hazel</span>
<span class="w">       </span><span class="nv">University</span><span class="w"> </span><span class="nv">Computing</span><span class="w"> </span><span class="nv">Service</span>
<span class="w">       </span><span class="nv">Cambridge</span><span class="w"> </span><span class="nv">CB2</span><span class="w"> </span><span class="m">3</span><span class="nv">QH</span><span class="o">,</span><span class="w"> </span><span class="nv">England</span><span class="na">.</span>

<span class="nv">REVISION</span>

<span class="w">       </span><span class="nv">Last</span><span class="w"> </span><span class="nv">updated</span><span class="bp">:</span><span class="w"> </span><span class="m">08</span><span class="w"> </span><span class="nv">January</span><span class="w"> </span><span class="m">2014</span>
<span class="w">       </span><span class="nv">Copyright</span><span class="w"> </span><span class="p">(</span><span class="nv">c</span><span class="p">)</span><span class="w"> </span><span class="m">1997</span><span class="o">-</span><span class="m">2014</span><span class="w"> </span><span class="nv">University</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Cambridge</span><span class="na">.</span>
</code></pre></div>
</article>
</section>
</body>
</html>
